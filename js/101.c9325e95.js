/*! For license information please see 101.c9325e95.js.LICENSE.txt */
(self.webpackJsonp=self.webpackJsonp||[]).push([[101],{"8264":function(nt,at,lt){"use strict";lt.d(at,{"z1":function(){return fe},"cM":function(){return generate},"bK":function(){return le},"UA":function(){return Ce},"uy":function(){return re}});var Rt=lt(5779),Bt=2,Lt=.16,Ht=.05,jt=.05,$t=.15,Kt=5,te=4,ne=[{"index":7,"amount":15},{"index":6,"amount":25},{"index":5,"amount":30},{"index":5,"amount":45},{"index":5,"amount":65},{"index":5,"amount":85},{"index":4,"amount":90},{"index":3,"amount":95},{"index":2,"amount":97},{"index":1,"amount":98}];function getHue(nt,at,lt){var Rt;return(Rt=Math.round(nt.h)>=60&&Math.round(nt.h)<=240?lt?Math.round(nt.h)-Bt*at:Math.round(nt.h)+Bt*at:lt?Math.round(nt.h)+Bt*at:Math.round(nt.h)-Bt*at)<0?Rt+=360:Rt>=360&&(Rt-=360),Rt}function getSaturation(nt,at,lt){return 0===nt.h&&0===nt.s?nt.s:((Rt=lt?nt.s-Lt*at:at===te?nt.s+Lt:nt.s+Ht*at)>1&&(Rt=1),lt&&at===Kt&&Rt>.1&&(Rt=.1),Rt<.06&&(Rt=.06),Math.round(100*Rt)/100);var Rt}function getValue(nt,at,lt){var Rt;return Rt=lt?nt.v+jt*at:nt.v-$t*at,Rt=Math.max(0,Math.min(1,Rt)),Math.round(100*Rt)/100}function generate(nt){for(var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=[],Bt=new Rt.Y(nt),Lt=Bt.toHsv(),Ht=Kt;Ht>0;Ht-=1){var jt=new Rt.Y({"h":getHue(Lt,Ht,!0),"s":getSaturation(Lt,Ht,!0),"v":getValue(Lt,Ht,!0)});lt.push(jt)}lt.push(Bt);for(var $t=1;$t<=te;$t+=1){var re=new Rt.Y({"h":getHue(Lt,$t),"s":getSaturation(Lt,$t),"v":getValue(Lt,$t)});lt.push(re)}return"dark"===at.theme?ne.map((function(nt){var Bt=nt.index,Lt=nt.amount;return new Rt.Y(at.backgroundColor||"#141414").mix(lt[Bt],Lt).toHexString()})):lt.map((function(nt){return nt.toHexString()}))}var re={"red":"#F5222D","volcano":"#FA541C","orange":"#FA8C16","gold":"#FAAD14","yellow":"#FADB14","lime":"#A0D911","green":"#52C41A","cyan":"#13C2C2","blue":"#1677FF","geekblue":"#2F54EB","purple":"#722ED1","magenta":"#EB2F96","grey":"#666666"},ae=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];ae.primary=ae[5];var oe=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];oe.primary=oe[5];var se=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];se.primary=se[5];var le=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];le.primary=le[5];var ue=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];ue.primary=ue[5];var ce=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];ce.primary=ce[5];var he=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];he.primary=he[5];var de=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];de.primary=de[5];var fe=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];fe.primary=fe[5];var pe=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];pe.primary=pe[5];var ve=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];ve.primary=ve[5];var Ae=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Ae.primary=Ae[5];var we=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];we.primary=we[5];var Ce={"red":ae,"volcano":oe,"orange":se,"gold":le,"yellow":ue,"lime":ce,"green":he,"cyan":de,"blue":fe,"geekblue":pe,"purple":ve,"magenta":Ae,"grey":we},je=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];je.primary=je[5];var Ne=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];Ne.primary=Ne[5];var Ve=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];Ve.primary=Ve[5];var Ge=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];Ge.primary=Ge[5];var ti=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];ti.primary=ti[5];var li=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];li.primary=li[5];var hi=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];hi.primary=hi[5];var di=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];di.primary=di[5];var fi=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];fi.primary=fi[5];var pi=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];pi.primary=pi[5];var vi=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];vi.primary=vi[5];var mi=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];mi.primary=mi[5];var _i=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];_i.primary=_i[5]},"8615":function(nt,at,lt){"use strict";lt.d(at,{"L_":function(){return ti},"oX":function(){return merge}});var Rt=lt(8299),Bt=lt(9859),Lt=lt(6640),Ht=lt(1950),jt=lt(758),$t=lt(4336),Kt=lt(6214),te=lt(7584),ne=lt(2320),re=lt(542),ae=lt(8527),oe=(0,te.A)((function AbstractCalculator(){(0,Kt.A)(this,AbstractCalculator)})),se="CALC_UNIT",le=new RegExp(se,"g");function unit(nt){return"number"==typeof nt?"".concat(nt).concat(se):nt}var ue=function(nt){(0,re.A)(CSSCalculator,nt);var at=(0,ae.A)(CSSCalculator);function CSSCalculator(nt,lt){var Bt;(0,Kt.A)(this,CSSCalculator),Bt=at.call(this),(0,Lt.A)((0,ne.A)(Bt),"result",""),(0,Lt.A)((0,ne.A)(Bt),"unitlessCssVar",void 0),(0,Lt.A)((0,ne.A)(Bt),"lowPriority",void 0);var Ht=(0,Rt.A)(nt);return Bt.unitlessCssVar=lt,nt instanceof CSSCalculator?Bt.result="(".concat(nt.result,")"):"number"===Ht?Bt.result=unit(nt):"string"===Ht&&(Bt.result=nt),Bt}return(0,te.A)(CSSCalculator,[{"key":"add","value":function add(nt){return nt instanceof CSSCalculator?this.result="".concat(this.result," + ").concat(nt.getResult()):"number"!=typeof nt&&"string"!=typeof nt||(this.result="".concat(this.result," + ").concat(unit(nt))),this.lowPriority=!0,this}},{"key":"sub","value":function sub(nt){return nt instanceof CSSCalculator?this.result="".concat(this.result," - ").concat(nt.getResult()):"number"!=typeof nt&&"string"!=typeof nt||(this.result="".concat(this.result," - ").concat(unit(nt))),this.lowPriority=!0,this}},{"key":"mul","value":function mul(nt){return this.lowPriority&&(this.result="(".concat(this.result,")")),nt instanceof CSSCalculator?this.result="".concat(this.result," * ").concat(nt.getResult(!0)):"number"!=typeof nt&&"string"!=typeof nt||(this.result="".concat(this.result," * ").concat(nt)),this.lowPriority=!1,this}},{"key":"div","value":function div(nt){return this.lowPriority&&(this.result="(".concat(this.result,")")),nt instanceof CSSCalculator?this.result="".concat(this.result," / ").concat(nt.getResult(!0)):"number"!=typeof nt&&"string"!=typeof nt||(this.result="".concat(this.result," / ").concat(nt)),this.lowPriority=!1,this}},{"key":"getResult","value":function getResult(nt){return this.lowPriority||nt?"(".concat(this.result,")"):this.result}},{"key":"equal","value":function equal(nt){var at=this,lt=(nt||{}).unit,Rt=!0;return"boolean"==typeof lt?Rt=lt:Array.from(this.unitlessCssVar).some((function(nt){return at.result.includes(nt)}))&&(Rt=!1),this.result=this.result.replace(le,Rt?"px":""),void 0!==this.lowPriority?"calc(".concat(this.result,")"):this.result}}]),CSSCalculator}(oe),ce=function(nt){(0,re.A)(NumCalculator,nt);var at=(0,ae.A)(NumCalculator);function NumCalculator(nt){var lt;return(0,Kt.A)(this,NumCalculator),lt=at.call(this),(0,Lt.A)((0,ne.A)(lt),"result",0),nt instanceof NumCalculator?lt.result=nt.result:"number"==typeof nt&&(lt.result=nt),lt}return(0,te.A)(NumCalculator,[{"key":"add","value":function add(nt){return nt instanceof NumCalculator?this.result+=nt.result:"number"==typeof nt&&(this.result+=nt),this}},{"key":"sub","value":function sub(nt){return nt instanceof NumCalculator?this.result-=nt.result:"number"==typeof nt&&(this.result-=nt),this}},{"key":"mul","value":function mul(nt){return nt instanceof NumCalculator?this.result*=nt.result:"number"==typeof nt&&(this.result*=nt),this}},{"key":"div","value":function div(nt){return nt instanceof NumCalculator?this.result/=nt.result:"number"==typeof nt&&(this.result/=nt),this}},{"key":"equal","value":function equal(){return this.result}}]),NumCalculator}(oe),he=function genCalc(nt,at){var lt="css"===nt?ue:ce;return function(nt){return new lt(nt,at)}},de=function getCompVarPrefix(nt,at){return"".concat([at,nt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};lt(2110);var fe=function getComponentToken(nt,at,lt,Rt){var Lt=(0,Ht.A)({},at[nt]);null!=Rt&&Rt.deprecatedTokens&&Rt.deprecatedTokens.forEach((function(nt){var at,lt=(0,Bt.A)(nt,2),Rt=lt[0],Ht=lt[1];(null!=Lt&&Lt[Rt]||null!=Lt&&Lt[Ht])&&(null!==(at=Lt[Ht])&&void 0!==at||(Lt[Ht]=null==Lt?void 0:Lt[Rt]))}));var jt=(0,Ht.A)((0,Ht.A)({},lt),Lt);return Object.keys(jt).forEach((function(nt){jt[nt]===at[nt]&&delete jt[nt]})),jt},pe="undefined"!=typeof CSSINJS_STATISTIC,ve=!0;function merge(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];if(!pe)return Object.assign.apply(Object,[{}].concat(at));ve=!1;var Bt={};return at.forEach((function(nt){"object"===(0,Rt.A)(nt)&&Object.keys(nt).forEach((function(at){Object.defineProperty(Bt,at,{"configurable":!0,"enumerable":!0,"get":function get(){return nt[at]}})}))})),ve=!0,Bt}var Ae={};function noop(){}var we=function statisticToken(nt){var at,lt=nt,Rt=noop;return pe&&"undefined"!=typeof Proxy&&(at=new Set,lt=new Proxy(nt,{"get":function get(nt,lt){var Rt;ve&&(null===(Rt=at)||void 0===Rt||Rt.add(lt));return nt[lt]}}),Rt=function flush(nt,lt){var Rt;Ae[nt]={"global":Array.from(at),"component":(0,Ht.A)((0,Ht.A)({},null===(Rt=Ae[nt])||void 0===Rt?void 0:Rt.component),lt)}}),{"token":lt,"keys":at,"flush":Rt}};var Ce=function getDefaultComponentToken(nt,at,lt){var Rt;return"function"==typeof lt?lt(merge(at,null!==(Rt=at[nt])&&void 0!==Rt?Rt:{})):null!=lt?lt:{}};var je=function genMaxMin(nt){return"js"===nt?{"max":Math.max,"min":Math.min}:{"max":function max(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return"max(".concat(at.map((function(nt){return(0,$t.zA)(nt)})).join(","),")")},"min":function min(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return"min(".concat(at.map((function(nt){return(0,$t.zA)(nt)})).join(","),")")}}},Ne=new(function(){function ArrayKeyMap(){(0,Kt.A)(this,ArrayKeyMap),(0,Lt.A)(this,"map",new Map),(0,Lt.A)(this,"objectIDMap",new WeakMap),(0,Lt.A)(this,"nextID",0),(0,Lt.A)(this,"lastAccessBeat",new Map),(0,Lt.A)(this,"accessBeat",0)}return(0,te.A)(ArrayKeyMap,[{"key":"set","value":function set(nt,at){this.clear();var lt=this.getCompositeKey(nt);this.map.set(lt,at),this.lastAccessBeat.set(lt,Date.now())}},{"key":"get","value":function get(nt){var at=this.getCompositeKey(nt),lt=this.map.get(at);return this.lastAccessBeat.set(at,Date.now()),this.accessBeat+=1,lt}},{"key":"getCompositeKey","value":function getCompositeKey(nt){var at=this;return nt.map((function(nt){return nt&&"object"===(0,Rt.A)(nt)?"obj_".concat(at.getObjectID(nt)):"".concat((0,Rt.A)(nt),"_").concat(nt)})).join("|")}},{"key":"getObjectID","value":function getObjectID(nt){if(this.objectIDMap.has(nt))return this.objectIDMap.get(nt);var at=this.nextID;return this.objectIDMap.set(nt,at),this.nextID+=1,at}},{"key":"clear","value":function clear(){var nt=this;if(this.accessBeat>1e4){var at=Date.now();this.lastAccessBeat.forEach((function(lt,Rt){at-lt>6e5&&(nt.map.delete(Rt),nt.lastAccessBeat.delete(Rt))})),this.accessBeat=0}}}]),ArrayKeyMap}());var Ve=function useUniqueMemo(nt,at){return jt.useMemo((function(){var lt=Ne.get(at);if(lt)return lt;var Rt=nt();return Ne.set(at,Rt),Rt}),at)},Ge=function useDefaultCSP(){return{}};var ti=function genStyleUtils(nt){var at=nt.useCSP,lt=void 0===at?Ge:at,Kt=nt.useToken,te=nt.usePrefix,ne=nt.getResetStyles,re=nt.getCommonStyle,ae=nt.getCompUnitless;function genComponentStyleHook(at,Lt,jt){var ae=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},oe=Array.isArray(at)?at:[at,at],se=(0,Bt.A)(oe,1)[0],le=oe.join("-"),ue=nt.layer||{"name":"antd"};return function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt,Bt=Kt(),oe=Bt.theme,ce=Bt.realToken,pe=Bt.hashId,ve=Bt.token,Ae=Bt.cssVar,Ne=te(),Ge=Ne.rootPrefixCls,ti=Ne.iconPrefixCls,li=lt(),hi=Ae?"css":"js",di=Ve((function(){var nt=new Set;return Ae&&Object.keys(ae.unitless||{}).forEach((function(at){nt.add((0,$t.Ki)(at,Ae.prefix)),nt.add((0,$t.Ki)(at,de(se,Ae.prefix)))})),he(hi,nt)}),[hi,se,null==Ae?void 0:Ae.prefix]),fi=je(hi),pi=fi.max,vi=fi.min,mi={"theme":oe,"token":ve,"hashId":pe,"nonce":function nonce(){return li.nonce},"clientOnly":ae.clientOnly,"layer":ue,"order":ae.order||-999};return"function"==typeof ne&&(0,$t.IV)((0,Ht.A)((0,Ht.A)({},mi),{},{"clientOnly":!1,"path":["Shared",Ge]}),(function(){return ne(ve,{"prefix":{"rootPrefixCls":Ge,"iconPrefixCls":ti},"csp":li})})),[(0,$t.IV)((0,Ht.A)((0,Ht.A)({},mi),{},{"path":[le,nt,ti]}),(function(){if(!1===ae.injectStyle)return[];var lt=we(ve),Bt=lt.token,Ht=lt.flush,Kt=Ce(se,ce,jt),te=".".concat(nt),ne=fe(se,ce,Kt,{"deprecatedTokens":ae.deprecatedTokens});Ae&&Kt&&"object"===(0,Rt.A)(Kt)&&Object.keys(Kt).forEach((function(nt){Kt[nt]="var(".concat((0,$t.Ki)(nt,de(se,Ae.prefix)),")")}));var oe=merge(Bt,{"componentCls":te,"prefixCls":nt,"iconCls":".".concat(ti),"antCls":".".concat(Ge),"calc":di,"max":pi,"min":vi},Ae?Kt:ne),le=Lt(oe,{"hashId":pe,"prefixCls":nt,"rootPrefixCls":Ge,"iconPrefixCls":ti});Ht(se,ne);var ue="function"==typeof re?re(oe,nt,at,ae.resetFont):null;return[!1===ae.resetStyle?null:ue,le]})),pe]}}return{"genStyleHooks":function genStyleHooks(nt,at,lt,Rt){var te=Array.isArray(nt)?nt[0]:nt;function prefixToken(nt){return"".concat(String(te)).concat(nt.slice(0,1).toUpperCase()).concat(nt.slice(1))}var ne=(null==Rt?void 0:Rt.unitless)||{},re="function"==typeof ae?ae(nt):{},oe=(0,Ht.A)((0,Ht.A)({},re),{},(0,Lt.A)({},prefixToken("zIndexPopup"),!0));Object.keys(ne).forEach((function(nt){oe[prefixToken(nt)]=ne[nt]}));var se=(0,Ht.A)((0,Ht.A)({},Rt),{},{"unitless":oe,"prefixToken":prefixToken}),le=genComponentStyleHook(nt,at,lt,se),ue=function genCSSVarRegister(nt,at,lt){var Rt=lt.unitless,Bt=lt.injectStyle,Lt=void 0===Bt||Bt,Ht=lt.prefixToken,te=lt.ignore,ne=function CSSVarRegister(Bt){var Lt=Bt.rootCls,jt=Bt.cssVar,ne=void 0===jt?{}:jt,re=Kt().realToken;return(0,$t.RC)({"path":[nt],"prefix":ne.prefix,"key":ne.key,"unitless":Rt,"ignore":te,"token":re,"scope":Lt},(function(){var Rt=Ce(nt,re,at),Bt=fe(nt,re,Rt,{"deprecatedTokens":null==lt?void 0:lt.deprecatedTokens});return Object.keys(Rt).forEach((function(nt){Bt[Ht(nt)]=Bt[nt],delete Bt[nt]})),Bt})),null},re=function useCSSVar(at){var lt=Kt().cssVar;return[function(Rt){return Lt&&lt?jt.createElement(jt.Fragment,null,jt.createElement(ne,{"rootCls":at,"cssVar":lt,"component":nt}),Rt):Rt},null==lt?void 0:lt.key]};return re}(te,lt,se);return function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt,lt=le(nt,at),Rt=(0,Bt.A)(lt,2)[1],Lt=ue(at),Ht=(0,Bt.A)(Lt,2);return[Ht[0],Rt,Ht[1]]}},"genSubStyleComponent":function genSubStyleComponent(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Bt=genComponentStyleHook(nt,at,lt,(0,Ht.A)({"resetStyle":!1,"order":-998},Rt));return function StyledComponent(nt){var at=nt.prefixCls,lt=nt.rootCls;return Bt(at,void 0===lt?at:lt),null}},"genComponentStyleHook":genComponentStyleHook}}},"4336":function(nt,at,lt){"use strict";lt.d(at,{"Mo":function(){return or},"J":function(){return he},"an":function(){return createTheme},"Ki":function(){return li},"zA":function(){return util_unit},"RC":function(){return On},"hV":function(){return useCacheToken},"IV":function(){return useStyleRegister}});var Rt=lt(6640),Bt=lt(9859),Lt=lt(3691),Ht=lt(1950);var jt=function murmur2(nt){for(var at,lt=0,Rt=0,Bt=nt.length;Bt>=4;++Rt,Bt-=4)at=1540483477*(65535&(at=255&nt.charCodeAt(Rt)|(255&nt.charCodeAt(++Rt))<<8|(255&nt.charCodeAt(++Rt))<<16|(255&nt.charCodeAt(++Rt))<<24))+(59797*(at>>>16)<<16),lt=1540483477*(65535&(at^=at>>>24))+(59797*(at>>>16)<<16)^1540483477*(65535&lt)+(59797*(lt>>>16)<<16);switch(Bt){case 3:lt^=(255&nt.charCodeAt(Rt+2))<<16;case 2:lt^=(255&nt.charCodeAt(Rt+1))<<8;case 1:lt=1540483477*(65535&(lt^=255&nt.charCodeAt(Rt)))+(59797*(lt>>>16)<<16)}return(((lt=1540483477*(65535&(lt^=lt>>>13))+(59797*(lt>>>16)<<16))^lt>>>15)>>>0).toString(36)},$t=lt(3144),Kt=lt(758),te=lt.t(Kt,2),ne=(lt(3400),lt(6378),lt(6214)),re=lt(7584),ae="%";function pathKey(nt){return nt.join(ae)}var oe=function(){function Entity(nt){(0,ne.A)(this,Entity),(0,Rt.A)(this,"instanceId",void 0),(0,Rt.A)(this,"cache",new Map),this.instanceId=nt}return(0,re.A)(Entity,[{"key":"get","value":function get(nt){return this.opGet(pathKey(nt))}},{"key":"opGet","value":function opGet(nt){return this.cache.get(nt)||null}},{"key":"update","value":function update(nt,at){return this.opUpdate(pathKey(nt),at)}},{"key":"opUpdate","value":function opUpdate(nt,at){var lt=at(this.cache.get(nt));null===lt?this.cache.delete(nt):this.cache.set(nt,lt)}}]),Entity}(),se="data-token-hash",le="data-css-hash",ue="__cssinjs_instance__";function createCache(){var nt=Math.random().toString(12).slice(2);if("undefined"!=typeof document&&document.head&&document.body){var at=document.body.querySelectorAll("style[".concat(le,"]"))||[],lt=document.head.firstChild;Array.from(at).forEach((function(at){at[ue]=at[ue]||nt,at[ue]===nt&&document.head.insertBefore(at,lt)}));var Rt={};Array.from(document.querySelectorAll("style[".concat(le,"]"))).forEach((function(at){var lt,Bt=at.getAttribute(le);Rt[Bt]?at[ue]===nt&&(null===(lt=at.parentNode)||void 0===lt||lt.removeChild(at)):Rt[Bt]=!0}))}return new oe(nt)}var ce=Kt.createContext({"hashPriority":"low","cache":createCache(),"defaultCache":!0}),he=ce,de=lt(8299),fe=lt(9942),pe="CALC_UNIT";new RegExp(pe,"g");var ve=function(){function ThemeCache(){(0,ne.A)(this,ThemeCache),(0,Rt.A)(this,"cache",void 0),(0,Rt.A)(this,"keys",void 0),(0,Rt.A)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return(0,re.A)(ThemeCache,[{"key":"size","value":function size(){return this.keys.length}},{"key":"internalGet","value":function internalGet(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Bt={"map":this.cache};return nt.forEach((function(nt){var at;Bt?Bt=null===(at=Bt)||void 0===at||null===(at=at.map)||void 0===at?void 0:at.get(nt):Bt=void 0})),null!==(at=Bt)&&void 0!==at&&at.value&&Rt&&(Bt.value[1]=this.cacheCallTimes++),null===(lt=Bt)||void 0===lt?void 0:lt.value}},{"key":"get","value":function get(nt){var at;return null===(at=this.internalGet(nt,!0))||void 0===at?void 0:at[0]}},{"key":"has","value":function has(nt){return!!this.internalGet(nt)}},{"key":"set","value":function set(nt,at){var lt=this;if(!this.has(nt)){if(this.size()+1>ThemeCache.MAX_CACHE_SIZE+ThemeCache.MAX_CACHE_OFFSET){var Rt=this.keys.reduce((function(nt,at){var Rt=(0,Bt.A)(nt,2)[1];return lt.internalGet(at)[1]<Rt?[at,lt.internalGet(at)[1]]:nt}),[this.keys[0],this.cacheCallTimes]),Lt=(0,Bt.A)(Rt,1)[0];this.delete(Lt)}this.keys.push(nt)}var Ht=this.cache;nt.forEach((function(Rt,Bt){if(Bt===nt.length-1)Ht.set(Rt,{"value":[at,lt.cacheCallTimes++]});else{var Lt=Ht.get(Rt);Lt?Lt.map||(Lt.map=new Map):Ht.set(Rt,{"map":new Map}),Ht=Ht.get(Rt).map}}))}},{"key":"deleteByPath","value":function deleteByPath(nt,at){var lt,Rt=nt.get(at[0]);if(1===at.length)return Rt.map?nt.set(at[0],{"map":Rt.map}):nt.delete(at[0]),null===(lt=Rt.value)||void 0===lt?void 0:lt[0];var Bt=this.deleteByPath(Rt.map,at.slice(1));return Rt.map&&0!==Rt.map.size||Rt.value||nt.delete(at[0]),Bt}},{"key":"delete","value":function _delete(nt){if(this.has(nt))return this.keys=this.keys.filter((function(at){return!function sameDerivativeOption(nt,at){if(nt.length!==at.length)return!1;for(var lt=0;lt<nt.length;lt++)if(nt[lt]!==at[lt])return!1;return!0}(at,nt)})),this.deleteByPath(this.cache,nt)}}]),ThemeCache}();(0,Rt.A)(ve,"MAX_CACHE_SIZE",20),(0,Rt.A)(ve,"MAX_CACHE_OFFSET",5);var Ae=lt(1378),we=0,Ce=function(){function Theme(nt){(0,ne.A)(this,Theme),(0,Rt.A)(this,"derivatives",void 0),(0,Rt.A)(this,"id",void 0),this.derivatives=Array.isArray(nt)?nt:[nt],this.id=we,0===nt.length&&(0,Ae.$e)(nt.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),we+=1}return(0,re.A)(Theme,[{"key":"getDerivativeToken","value":function getDerivativeToken(nt){return this.derivatives.reduce((function(at,lt){return lt(nt,at)}),void 0)}}]),Theme}(),je=new ve;function createTheme(nt){var at=Array.isArray(nt)?nt:[nt];return je.has(at)||je.set(at,new Ce(at)),je.get(at)}var Ne=new WeakMap,Ve={};var Ge=new WeakMap;function flattenToken(nt){var at=Ge.get(nt)||"";return at||(Object.keys(nt).forEach((function(lt){var Rt=nt[lt];at+=lt,Rt instanceof Ce?at+=Rt.id:Rt&&"object"===(0,de.A)(Rt)?at+=flattenToken(Rt):at+=Rt})),at=jt(at),Ge.set(nt,at)),at}function token2key(nt,at){return jt("".concat(at,"_").concat(flattenToken(nt)))}"random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,"");var ti=(0,fe.A)();function util_unit(nt){return"number"==typeof nt?"".concat(nt,"px"):nt}function util_toStyleStr(nt,at,lt){var Bt,Lt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return nt;var jt=(0,Ht.A)((0,Ht.A)({},Lt),{},(Bt={},(0,Rt.A)(Bt,se,at),(0,Rt.A)(Bt,le,lt),Bt)),$t=Object.keys(jt).map((function(nt){var at=jt[nt];return at?"".concat(nt,'="').concat(at,'"'):null})).filter((function(nt){return nt})).join(" ");return"<style ".concat($t,">").concat(nt,"</style>")}var li=function token2CSSVar(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(at?"".concat(at,"-"):"").concat(nt).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},hi=function serializeCSSVar(nt,at,lt){return Object.keys(nt).length?".".concat(at).concat(null!=lt&&lt.scope?".".concat(lt.scope):"","{").concat(Object.entries(nt).map((function(nt){var at=(0,Bt.A)(nt,2),lt=at[0],Rt=at[1];return"".concat(lt,":").concat(Rt,";")})).join(""),"}"):""},di=function transformToken(nt,at,lt){var Rt={},Lt={};return Object.entries(nt).forEach((function(nt){var at,Ht,jt=(0,Bt.A)(nt,2),$t=jt[0],Kt=jt[1];if(null!=lt&&null!==(at=lt.preserve)&&void 0!==at&&at[$t])Lt[$t]=Kt;else if(!("string"!=typeof Kt&&"number"!=typeof Kt||null!=lt&&null!==(Ht=lt.ignore)&&void 0!==Ht&&Ht[$t])){var te,ne=li($t,null==lt?void 0:lt.prefix);Rt[ne]="number"!=typeof Kt||null!=lt&&null!==(te=lt.unitless)&&void 0!==te&&te[$t]?String(Kt):"".concat(Kt,"px"),Lt[$t]="var(".concat(ne,")")}})),[Lt,hi(Rt,at,{"scope":null==lt?void 0:lt.scope})]},fi=lt(5429),pi=(0,Ht.A)({},te).useInsertionEffect,vi=pi?function(nt,at,lt){return pi((function(){return nt(),at()}),lt)}:function useInsertionEffectPolyfill(nt,at,lt){Kt.useMemo(nt,lt),(0,fi.A)((function(){return at(!0)}),lt)},mi=void 0!==(0,Ht.A)({},te).useInsertionEffect?function useCleanupRegister(nt){var at=[],lt=!1;return Kt.useEffect((function(){return lt=!1,function(){lt=!0,at.length&&at.forEach((function(nt){return nt()}))}}),nt),function register(nt){lt||at.push(nt)}}:function useRun(){return function(nt){nt()}};var _i=function useProdHMR(){return!1};function useGlobalCache(nt,at,lt,Rt,Ht){var jt=Kt.useContext(he).cache,$t=pathKey([nt].concat((0,Lt.A)(at))),te=mi([$t]),ne=(_i(),function buildCache(nt){jt.opUpdate($t,(function(at){var Rt=at||[void 0,void 0],Lt=(0,Bt.A)(Rt,2),Ht=Lt[0];var jt=[void 0===Ht?0:Ht,Lt[1]||lt()];return nt?nt(jt):jt}))});Kt.useMemo((function(){ne()}),[$t]);var re=jt.opGet($t)[1];return vi((function(){null==Ht||Ht(re)}),(function(nt){return ne((function(at){var lt=(0,Bt.A)(at,2),Rt=lt[0],Lt=lt[1];return nt&&0===Rt&&(null==Ht||Ht(re)),[Rt+1,Lt]})),function(){jt.opUpdate($t,(function(at){var lt=at||[],Lt=(0,Bt.A)(lt,2),Ht=Lt[0],Kt=void 0===Ht?0:Ht,ne=Lt[1];return 0===Kt-1?(te((function(){!nt&&jt.opGet($t)||null==Rt||Rt(ne,!1)})),null):[Kt-1,ne]}))}}),[$t]),re}var bi={},Mi="css",Ti=new Map;var Ii=0;function cleanTokenStyle(nt,at){Ti.set(nt,(Ti.get(nt)||0)-1);var lt=Array.from(Ti.keys()),Rt=lt.filter((function(nt){return(Ti.get(nt)||0)<=0}));lt.length-Rt.length>Ii&&Rt.forEach((function(nt){!function removeStyleTags(nt,at){"undefined"!=typeof document&&document.querySelectorAll("style[".concat(se,'="').concat(nt,'"]')).forEach((function(nt){var lt;nt[ue]===at&&(null===(lt=nt.parentNode)||void 0===lt||lt.removeChild(nt))}))}(nt,at),Ti.delete(nt)}))}var Bi=function getComputedToken(nt,at,lt,Rt){var Bt=lt.getDerivativeToken(nt),Lt=(0,Ht.A)((0,Ht.A)({},Bt),at);return Rt&&(Lt=Rt(Lt)),Lt},zi="token";function useCacheToken(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Rt=(0,Kt.useContext)(he),te=Rt.cache.instanceId,ne=Rt.container,re=lt.salt,ae=void 0===re?"":re,oe=lt.override,ce=void 0===oe?bi:oe,de=lt.formatToken,fe=lt.getComputedToken,pe=lt.cssVar,ve=function memoResult(nt,at){for(var lt=Ne,Rt=0;Rt<at.length;Rt+=1){var Bt=at[Rt];lt.has(Bt)||lt.set(Bt,new WeakMap),lt=lt.get(Bt)}return lt.has(Ve)||lt.set(Ve,nt()),lt.get(Ve)}((function(){return Object.assign.apply(Object,[{}].concat((0,Lt.A)(at)))}),at),Ae=flattenToken(ve),we=flattenToken(ce),Ce=pe?flattenToken(pe):"",je=useGlobalCache(zi,[ae,nt.id,Ae,we,Ce],(function(){var at,lt=fe?fe(ve,ce,nt):Bi(ve,ce,nt,de),Rt=(0,Ht.A)({},lt),Lt="";if(pe){var $t=di(lt,pe.key,{"prefix":pe.prefix,"ignore":pe.ignore,"unitless":pe.unitless,"preserve":pe.preserve}),Kt=(0,Bt.A)($t,2);lt=Kt[0],Lt=Kt[1]}var te=token2key(lt,ae);lt._tokenKey=te,Rt._tokenKey=token2key(Rt,ae);var ne=null!==(at=null==pe?void 0:pe.key)&&void 0!==at?at:te;lt._themeKey=ne,function recordCleanToken(nt){Ti.set(nt,(Ti.get(nt)||0)+1)}(ne);var re="".concat(Mi,"-").concat(jt(te));return lt._hashId=re,[lt,re,Rt,Lt,(null==pe?void 0:pe.key)||""]}),(function(nt){cleanTokenStyle(nt[0]._themeKey,te)}),(function(nt){var at=(0,Bt.A)(nt,4),lt=at[0],Rt=at[3];if(pe&&Rt){var Lt=(0,$t.BD)(Rt,jt("css-variables-".concat(lt._themeKey)),{"mark":le,"prepend":"queue","attachTo":ne,"priority":-999});Lt[ue]=te,Lt.setAttribute(se,lt._themeKey)}}));return je}var Wi=lt(3973),Ui={"animationIterationCount":1,"borderImageOutset":1,"borderImageSlice":1,"borderImageWidth":1,"boxFlex":1,"boxFlexGroup":1,"boxOrdinalGroup":1,"columnCount":1,"columns":1,"flex":1,"flexGrow":1,"flexPositive":1,"flexShrink":1,"flexNegative":1,"flexOrder":1,"gridRow":1,"gridRowEnd":1,"gridRowSpan":1,"gridRowStart":1,"gridColumn":1,"gridColumnEnd":1,"gridColumnSpan":1,"gridColumnStart":1,"msGridRow":1,"msGridRowSpan":1,"msGridColumn":1,"msGridColumnSpan":1,"fontWeight":1,"lineHeight":1,"opacity":1,"order":1,"orphans":1,"tabSize":1,"widows":1,"zIndex":1,"zoom":1,"WebkitLineClamp":1,"fillOpacity":1,"floodOpacity":1,"stopOpacity":1,"strokeDasharray":1,"strokeDashoffset":1,"strokeMiterlimit":1,"strokeOpacity":1,"strokeWidth":1},$i="comm",qi="rule",Ki="decl",Qi="@import",Ji="@namespace",dn="@keyframes",fn="@layer",vn=Math.abs,gn=String.fromCharCode;Object.assign;function trim(nt){return nt.trim()}function replace(nt,at,lt){return nt.replace(at,lt)}function indexof(nt,at,lt){return nt.indexOf(at,lt)}function charat(nt,at){return 0|nt.charCodeAt(at)}function substr(nt,at,lt){return nt.slice(at,lt)}function strlen(nt){return nt.length}function Utility_append(nt,at){return at.push(nt),nt}function serialize(nt,at){for(var lt="",Rt=0;Rt<nt.length;Rt++)lt+=at(nt[Rt],Rt,nt,at)||"";return lt}function stringify(nt,at,lt,Rt){switch(nt.type){case fn:if(nt.children.length)break;case Qi:case Ji:case Ki:return nt.return=nt.return||nt.value;case $i:return"";case dn:return nt.return=nt.value+"{"+serialize(nt.children,Rt)+"}";case qi:if(!strlen(nt.value=nt.props.join(",")))return""}return strlen(lt=serialize(nt.children,Rt))?nt.return=nt.value+"{"+lt+"}":""}var yn=1,mn=1,_n=0,bn=0,xn=0,kn="";function node(nt,at,lt,Rt,Bt,Lt,Ht,jt){return{"value":nt,"root":at,"parent":lt,"type":Rt,"props":Bt,"children":Lt,"line":yn,"column":mn,"length":Ht,"return":"","siblings":jt}}function prev(){return xn=bn>0?charat(kn,--bn):0,mn--,10===xn&&(mn=1,yn--),xn}function next(){return xn=bn<_n?charat(kn,bn++):0,mn++,10===xn&&(mn=1,yn++),xn}function peek(){return charat(kn,bn)}function caret(){return bn}function slice(nt,at){return substr(kn,nt,at)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return yn=mn=1,_n=strlen(kn=nt),bn=0,[]}function dealloc(nt){return kn="",nt}function delimit(nt){return trim(slice(bn-1,delimiter(91===nt?nt+2:40===nt?nt+1:nt)))}function whitespace(nt){for(;(xn=peek())&&xn<33;)next();return token(nt)>2||token(xn)>3?"":" "}function escaping(nt,at){for(;--at&&next()&&!(xn<48||xn>102||xn>57&&xn<65||xn>70&&xn<97););return slice(nt,caret()+(at<6&&32==peek()&&32==next()))}function delimiter(nt){for(;next();)switch(xn){case nt:return bn;case 34:case 39:34!==nt&&39!==nt&&delimiter(xn);break;case 40:41===nt&&delimiter(nt);break;case 92:next()}return bn}function commenter(nt,at){for(;next()&&nt+xn!==57&&(nt+xn!==84||47!==peek()););return"/*"+slice(at,bn-1)+"*"+gn(47===nt?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,bn)}function compile(nt){return dealloc(parse("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){for(var Kt=0,te=0,ne=Ht,re=0,ae=0,oe=0,se=1,le=1,ue=1,ce=0,he="",de=Bt,fe=Lt,pe=Rt,ve=he;le;)switch(oe=ce,ce=next()){case 40:if(108!=oe&&58==charat(ve,ne-1)){-1!=indexof(ve+=replace(delimit(ce),"&","&\f"),"&\f",vn(Kt?jt[Kt-1]:0))&&(ue=-1);break}case 34:case 39:case 91:ve+=delimit(ce);break;case 9:case 10:case 13:case 32:ve+=whitespace(oe);break;case 92:ve+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:Utility_append(comment(commenter(next(),caret()),at,lt,$t),$t),5!=token(oe||1)&&5!=token(peek()||1)||!strlen(ve)||" "===substr(ve,-1,void 0)||(ve+=" ");break;default:ve+="/"}break;case 123*se:jt[Kt++]=strlen(ve)*ue;case 125*se:case 59:case 0:switch(ce){case 0:case 125:le=0;case 59+te:-1==ue&&(ve=replace(ve,/\f/g,"")),ae>0&&(strlen(ve)-ne||0===se&&47===oe)&&Utility_append(ae>32?declaration(ve+";",Rt,lt,ne-1,$t):declaration(replace(ve," ","")+";",Rt,lt,ne-2,$t),$t);break;case 59:ve+=";";default:if(Utility_append(pe=ruleset(ve,at,lt,Kt,te,Bt,jt,he,de=[],fe=[],ne,Lt),Lt),123===ce)if(0===te)parse(ve,at,pe,pe,de,Lt,ne,jt,fe);else{switch(re){case 99:if(110===charat(ve,3))break;case 108:if(97===charat(ve,2))break;default:te=0;case 100:case 109:case 115:}te?parse(nt,pe,pe,Rt&&Utility_append(ruleset(nt,pe,pe,0,0,Bt,jt,he,Bt,de=[],ne,fe),fe),Bt,fe,ne,jt,Rt?de:fe):parse(ve,pe,pe,pe,[""],fe,0,jt,fe)}}Kt=te=ae=0,se=ue=1,he=ve="",ne=Ht;break;case 58:ne=1+strlen(ve),ae=oe;default:if(se<1)if(123==ce)--se;else if(125==ce&&0==se++&&125==prev())continue;switch(ve+=gn(ce),ce*se){case 38:ue=te>0?1:(ve+="\f",-1);break;case 44:jt[Kt++]=(strlen(ve)-1)*ue,ue=1;break;case 64:45===peek()&&(ve+=delimit(next())),re=peek(),te=ne=strlen(he=ve+=identifier(caret())),ce++;break;case 45:45===oe&&2==strlen(ve)&&(se=0)}}return Lt}function ruleset(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){for(var re=Bt-1,ae=0===Bt?Lt:[""],oe=function sizeof(nt){return nt.length}(ae),se=0,le=0,ue=0;se<Rt;++se)for(var ce=0,he=substr(nt,re+1,re=vn(le=Ht[se])),de=nt;ce<oe;++ce)(de=trim(le>0?ae[ce]+" "+he:replace(he,/&\f/g,ae[ce])))&&($t[ue++]=de);return node(nt,at,lt,0===Bt?qi:jt,$t,Kt,te,ne)}function comment(nt,at,lt,Rt){return node(nt,at,lt,$i,gn(function Tokenizer_char(){return xn}()),substr(nt,2,-2),0,Rt)}function declaration(nt,at,lt,Rt,Bt){return node(nt,at,lt,Ki,substr(nt,0,Rt),substr(nt,Rt+1,-1),Rt,Bt)}var Sn,An="data-ant-cssinjs-cache-path",wn="_FILE_STYLE__";var Cn=!0;function existPath(nt){return function prepare(){if(!Sn&&(Sn={},(0,fe.A)())){var nt=document.createElement("div");nt.className=An,nt.style.position="fixed",nt.style.visibility="hidden",nt.style.top="-9999px",document.body.appendChild(nt);var at=getComputedStyle(nt).content||"";(at=at.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(nt){var at=nt.split(":"),lt=(0,Bt.A)(at,2),Rt=lt[0],Lt=lt[1];Sn[Rt]=Lt}));var lt,Rt=document.querySelector("style[".concat(An,"]"));Rt&&(Cn=!1,null===(lt=Rt.parentNode)||void 0===lt||lt.removeChild(Rt)),document.body.removeChild(nt)}}(),!!Sn[nt]}var Mn="_multi_value_";function normalizeStyle(nt){return serialize(compile(nt),stringify).replace(/\{%%%\:[^;];}/g,";")}function injectSelectorHash(nt,at,lt){if(!at)return nt;var Rt=".".concat(at),Bt="low"===lt?":where(".concat(Rt,")"):Rt;return nt.split(",").map((function(nt){var at,lt=nt.trim().split(/\s+/),Rt=lt[0]||"",Ht=(null===(at=Rt.match(/^\w+/))||void 0===at?void 0:at[0])||"";return[Rt="".concat(Ht).concat(Bt).concat(Rt.slice(Ht.length))].concat((0,Lt.A)(lt.slice(1))).join(" ")})).join(",")}var Tn=function parseStyle(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{"root":!0,"parentSelectors":[]},Rt=lt.root,jt=lt.injectHash,$t=lt.parentSelectors,Kt=at.hashId,te=at.layer,ne=(at.path,at.hashPriority),re=at.transformers,ae=void 0===re?[]:re,oe=(at.linters,""),se={};function parseKeyframes(nt){var lt=nt.getName(Kt);if(!se[lt]){var Rt=parseStyle(nt.style,at,{"root":!1,"parentSelectors":$t}),Lt=(0,Bt.A)(Rt,1)[0];se[lt]="@keyframes ".concat(nt.getName(Kt)).concat(Lt)}}var le=function flattenList(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return nt.forEach((function(nt){Array.isArray(nt)?flattenList(nt,at):nt&&at.push(nt)})),at}(Array.isArray(nt)?nt:[nt]);return le.forEach((function(nt){var lt="string"!=typeof nt||Rt?nt:{};if("string"==typeof lt)oe+="".concat(lt,"\n");else if(lt._keyframe)parseKeyframes(lt);else{var te=ae.reduce((function(nt,at){var lt;return(null==at||null===(lt=at.visit)||void 0===lt?void 0:lt.call(at,nt))||nt}),lt);Object.keys(te).forEach((function(nt){var lt=te[nt];if("object"!==(0,de.A)(lt)||!lt||"animationName"===nt&&lt._keyframe||function isCompoundCSSProperty(nt){return"object"===(0,de.A)(nt)&&nt&&("_skip_check_"in nt||Mn in nt)}(lt)){var re;function appendStyle(nt,at){var lt=nt.replace(/[A-Z]/g,(function(nt){return"-".concat(nt.toLowerCase())})),Rt=at;Ui[nt]||"number"!=typeof Rt||0===Rt||(Rt="".concat(Rt,"px")),"animationName"===nt&&null!=at&&at._keyframe&&(parseKeyframes(at),Rt=at.getName(Kt)),oe+="".concat(lt,":").concat(Rt,";")}var ae=null!==(re=null==lt?void 0:lt.value)&&void 0!==re?re:lt;"object"===(0,de.A)(lt)&&null!=lt&&lt[Mn]&&Array.isArray(ae)?ae.forEach((function(at){appendStyle(nt,at)})):appendStyle(nt,ae)}else{var le=!1,ue=nt.trim(),ce=!1;(Rt||jt)&&Kt?ue.startsWith("@")?le=!0:ue=injectSelectorHash("&"===ue?"":nt,Kt,ne):!Rt||Kt||"&"!==ue&&""!==ue||(ue="",ce=!0);var he=parseStyle(lt,at,{"root":ce,"injectHash":le,"parentSelectors":[].concat((0,Lt.A)($t),[ue])}),fe=(0,Bt.A)(he,2),pe=fe[0],ve=fe[1];se=(0,Ht.A)((0,Ht.A)({},se),ve),oe+="".concat(ue).concat(pe)}}))}})),Rt?te&&(oe&&(oe="@layer ".concat(te.name," {").concat(oe,"}")),te.dependencies&&(se["@layer ".concat(te.name)]=te.dependencies.map((function(nt){return"@layer ".concat(nt,", ").concat(te.name,";")})).join("\n"))):oe="{".concat(oe,"}"),[oe,se]};function uniqueHash(nt,at){return jt("".concat(nt.join("%")).concat(at))}function Empty(){return null}var En="style";function useStyleRegister(nt,at){var lt=nt.token,jt=nt.path,te=nt.hashId,ne=nt.layer,re=nt.nonce,ae=nt.clientOnly,oe=nt.order,ce=void 0===oe?0:oe,de=Kt.useContext(he),pe=de.autoClear,ve=(de.mock,de.defaultCache),Ae=de.hashPriority,we=de.container,Ce=de.ssrInline,je=de.transformers,Ne=de.linters,Ve=de.cache,Ge=de.layer,li=lt._tokenKey,hi=[li];Ge&&hi.push("layer"),hi.push.apply(hi,(0,Lt.A)(jt));var di=ti;var fi=useGlobalCache(En,hi,(function(){var nt=hi.join("|");if(existPath(nt)){var lt=function getStyleAndHash(nt){var at=Sn[nt],lt=null;if(at&&(0,fe.A)())if(Cn)lt=wn;else{var Rt=document.querySelector("style[".concat(le,'="').concat(Sn[nt],'"]'));Rt?lt=Rt.innerHTML:delete Sn[nt]}return[lt,at]}(nt),Rt=(0,Bt.A)(lt,2),Lt=Rt[0],Ht=Rt[1];if(Lt)return[Lt,li,Ht,{},ae,ce]}var $t=at(),Kt=Tn($t,{"hashId":te,"hashPriority":Ae,"layer":Ge?ne:void 0,"path":jt.join("-"),"transformers":je,"linters":Ne}),re=(0,Bt.A)(Kt,2),oe=re[0],se=re[1],ue=normalizeStyle(oe),he=uniqueHash(hi,ue);return[ue,li,he,se,ae,ce]}),(function(nt,at){var lt=(0,Bt.A)(nt,3)[2];(at||pe)&&ti&&(0,$t.m6)(lt,{"mark":le})}),(function(nt){var at=(0,Bt.A)(nt,4),lt=at[0],Rt=(at[1],at[2]),Lt=at[3];if(di&&lt!==wn){var jt={"mark":le,"prepend":!Ge&&"queue","attachTo":we,"priority":ce},Kt="function"==typeof re?re():re;Kt&&(jt.csp={"nonce":Kt});var te=[],ne=[];Object.keys(Lt).forEach((function(nt){nt.startsWith("@layer")?te.push(nt):ne.push(nt)})),te.forEach((function(nt){(0,$t.BD)(normalizeStyle(Lt[nt]),"_layer-".concat(nt),(0,Ht.A)((0,Ht.A)({},jt),{},{"prepend":!0}))}));var ae=(0,$t.BD)(lt,Rt,jt);ae[ue]=Ve.instanceId,ae.setAttribute(se,li),ne.forEach((function(nt){(0,$t.BD)(normalizeStyle(Lt[nt]),"_effect-".concat(nt),jt)}))}})),pi=(0,Bt.A)(fi,3),vi=pi[0],mi=pi[1],_i=pi[2];return function(nt){var at,lt;Ce&&!di&&ve?at=Kt.createElement("style",(0,Wi.A)({},(lt={},(0,Rt.A)(lt,se,mi),(0,Rt.A)(lt,le,_i),lt),{"dangerouslySetInnerHTML":{"__html":vi}})):at=Kt.createElement(Empty,null);return Kt.createElement(Kt.Fragment,null,at,nt)}}var Pn,Rn="cssVar",On=function useCSSVarRegister(nt,at){var lt=nt.key,Rt=nt.prefix,Ht=nt.unitless,jt=nt.ignore,te=nt.token,ne=nt.scope,re=void 0===ne?"":ne,ae=(0,Kt.useContext)(he),oe=ae.cache.instanceId,ce=ae.container,de=te._tokenKey,fe=[].concat((0,Lt.A)(nt.path),[lt,re,de]);return useGlobalCache(Rn,fe,(function(){var nt=at(),Lt=di(nt,lt,{"prefix":Rt,"unitless":Ht,"ignore":jt,"scope":re}),$t=(0,Bt.A)(Lt,2),Kt=$t[0],te=$t[1];return[Kt,te,uniqueHash(fe,te),lt]}),(function(nt){var at=(0,Bt.A)(nt,3)[2];ti&&(0,$t.m6)(at,{"mark":le})}),(function(nt){var at=(0,Bt.A)(nt,3),Rt=at[1],Lt=at[2];if(Rt){var Ht=(0,$t.BD)(Rt,Lt,{"mark":le,"prepend":"queue","attachTo":ce,"priority":-999});Ht[ue]=oe,Ht.setAttribute(se,lt)}}))};Pn={},(0,Rt.A)(Pn,En,(function extract(nt,at,lt){var Rt=(0,Bt.A)(nt,6),Lt=Rt[0],Ht=Rt[1],jt=Rt[2],$t=Rt[3],Kt=Rt[4],te=Rt[5],ne=(lt||{}).plain;if(Kt)return null;var re=Lt,ae={"data-rc-order":"prependQueue","data-rc-priority":"".concat(te)};return re=util_toStyleStr(Lt,Ht,jt,ae,ne),$t&&Object.keys($t).forEach((function(nt){if(!at[nt]){at[nt]=!0;var lt=util_toStyleStr(normalizeStyle($t[nt]),Ht,"_effect-".concat(nt),ae,ne);nt.startsWith("@layer")?re=lt+re:re+=lt}})),[te,jt,re]})),(0,Rt.A)(Pn,zi,(function extract(nt,at,lt){var Rt=(0,Bt.A)(nt,5),Lt=Rt[2],Ht=Rt[3],jt=Rt[4],$t=(lt||{}).plain;if(!Ht)return null;var Kt=Lt._tokenKey;return[-999,Kt,util_toStyleStr(Ht,jt,Kt,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},$t)]})),(0,Rt.A)(Pn,Rn,(function extract(nt,at,lt){var Rt=(0,Bt.A)(nt,4),Lt=Rt[1],Ht=Rt[2],jt=Rt[3],$t=(lt||{}).plain;if(!Lt)return null;return[-999,Ht,util_toStyleStr(Lt,jt,Ht,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},$t)]}));var Fn=function(){function Keyframe(nt,at){(0,ne.A)(this,Keyframe),(0,Rt.A)(this,"name",void 0),(0,Rt.A)(this,"style",void 0),(0,Rt.A)(this,"_keyframe",!0),this.name=nt,this.style=at}return(0,re.A)(Keyframe,[{"key":"getName","value":function getName(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return nt?"".concat(nt,"-").concat(this.name):this.name}}]),Keyframe}(),or=Fn;function noSplit(nt){return nt.notSplit=!0,nt}noSplit(["borderTop","borderBottom"]),noSplit(["borderTop"]),noSplit(["borderBottom"]),noSplit(["borderLeft","borderRight"]),noSplit(["borderLeft"]),noSplit(["borderRight"])},"5779":function(nt,at,lt){"use strict";lt.d(at,{"Y":function(){return FastColor}});var Rt=lt(6640);const Bt=Math.round;function splitColorStr(nt,at){const lt=nt.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],Rt=lt.map((nt=>parseFloat(nt)));for(let nt=0;nt<3;nt+=1)Rt[nt]=at(Rt[nt]||0,lt[nt]||"",nt);return lt[3]?Rt[3]=lt[3].includes("%")?Rt[3]/100:Rt[3]:Rt[3]=1,Rt}const parseHSVorHSL=(nt,at,lt)=>0===lt?nt:nt/100;function limitRange(nt,at){const lt=at||255;return nt>lt?lt:nt<0?0:nt}class FastColor{"constructor"(nt){function matchFormat(at){return at[0]in nt&&at[1]in nt&&at[2]in nt}if((0,Rt.A)(this,"isValid",!0),(0,Rt.A)(this,"r",0),(0,Rt.A)(this,"g",0),(0,Rt.A)(this,"b",0),(0,Rt.A)(this,"a",1),(0,Rt.A)(this,"_h",void 0),(0,Rt.A)(this,"_s",void 0),(0,Rt.A)(this,"_l",void 0),(0,Rt.A)(this,"_v",void 0),(0,Rt.A)(this,"_max",void 0),(0,Rt.A)(this,"_min",void 0),(0,Rt.A)(this,"_brightness",void 0),nt)if("string"==typeof nt){const at=nt.trim();function matchPrefix(nt){return at.startsWith(nt)}/^#?[A-F\d]{3,8}$/i.test(at)?this.fromHexString(at):matchPrefix("rgb")?this.fromRgbString(at):matchPrefix("hsl")?this.fromHslString(at):(matchPrefix("hsv")||matchPrefix("hsb"))&&this.fromHsvString(at)}else if(nt instanceof FastColor)this.r=nt.r,this.g=nt.g,this.b=nt.b,this.a=nt.a,this._h=nt._h,this._s=nt._s,this._l=nt._l,this._v=nt._v;else if(matchFormat("rgb"))this.r=limitRange(nt.r),this.g=limitRange(nt.g),this.b=limitRange(nt.b),this.a="number"==typeof nt.a?limitRange(nt.a,1):1;else if(matchFormat("hsl"))this.fromHsl(nt);else{if(!matchFormat("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(nt));this.fromHsv(nt)}else;}"setR"(nt){return this._sc("r",nt)}"setG"(nt){return this._sc("g",nt)}"setB"(nt){return this._sc("b",nt)}"setA"(nt){return this._sc("a",nt,1)}"setHue"(nt){const at=this.toHsv();return at.h=nt,this._c(at)}"getLuminance"(){function adjustGamma(nt){const at=nt/255;return at<=.03928?at/12.92:Math.pow((at+.055)/1.055,2.4)}return.2126*adjustGamma(this.r)+.7152*adjustGamma(this.g)+.0722*adjustGamma(this.b)}"getHue"(){if(void 0===this._h){const nt=this.getMax()-this.getMin();this._h=0===nt?0:Bt(60*(this.r===this.getMax()?(this.g-this.b)/nt+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/nt+2:(this.r-this.g)/nt+4))}return this._h}"getSaturation"(){if(void 0===this._s){const nt=this.getMax()-this.getMin();this._s=0===nt?0:nt/this.getMax()}return this._s}"getLightness"(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}"getValue"(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}"getBrightness"(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}"darken"(nt=10){const at=this.getHue(),lt=this.getSaturation();let Rt=this.getLightness()-nt/100;return Rt<0&&(Rt=0),this._c({"h":at,"s":lt,"l":Rt,"a":this.a})}"lighten"(nt=10){const at=this.getHue(),lt=this.getSaturation();let Rt=this.getLightness()+nt/100;return Rt>1&&(Rt=1),this._c({"h":at,"s":lt,"l":Rt,"a":this.a})}"mix"(nt,at=50){const lt=this._c(nt),Rt=at/100,calc=nt=>(lt[nt]-this[nt])*Rt+this[nt],Lt={"r":Bt(calc("r")),"g":Bt(calc("g")),"b":Bt(calc("b")),"a":Bt(100*calc("a"))/100};return this._c(Lt)}"tint"(nt=10){return this.mix({"r":255,"g":255,"b":255,"a":1},nt)}"shade"(nt=10){return this.mix({"r":0,"g":0,"b":0,"a":1},nt)}"onBackground"(nt){const at=this._c(nt),lt=this.a+at.a*(1-this.a),calc=nt=>Bt((this[nt]*this.a+at[nt]*at.a*(1-this.a))/lt);return this._c({"r":calc("r"),"g":calc("g"),"b":calc("b"),"a":lt})}"isDark"(){return this.getBrightness()<128}"isLight"(){return this.getBrightness()>=128}"equals"(nt){return this.r===nt.r&&this.g===nt.g&&this.b===nt.b&&this.a===nt.a}"clone"(){return this._c(this)}"toHexString"(){let nt="#";const at=(this.r||0).toString(16);nt+=2===at.length?at:"0"+at;const lt=(this.g||0).toString(16);nt+=2===lt.length?lt:"0"+lt;const Rt=(this.b||0).toString(16);if(nt+=2===Rt.length?Rt:"0"+Rt,"number"==typeof this.a&&this.a>=0&&this.a<1){const at=Bt(255*this.a).toString(16);nt+=2===at.length?at:"0"+at}return nt}"toHsl"(){return{"h":this.getHue(),"s":this.getSaturation(),"l":this.getLightness(),"a":this.a}}"toHslString"(){const nt=this.getHue(),at=Bt(100*this.getSaturation()),lt=Bt(100*this.getLightness());return 1!==this.a?`hsla(${nt},${at}%,${lt}%,${this.a})`:`hsl(${nt},${at}%,${lt}%)`}"toHsv"(){return{"h":this.getHue(),"s":this.getSaturation(),"v":this.getValue(),"a":this.a}}"toRgb"(){return{"r":this.r,"g":this.g,"b":this.b,"a":this.a}}"toRgbString"(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}"toString"(){return this.toRgbString()}"_sc"(nt,at,lt){const Rt=this.clone();return Rt[nt]=limitRange(at,lt),Rt}"_c"(nt){return new this.constructor(nt)}"getMax"(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}"getMin"(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}"fromHexString"(nt){const at=nt.replace("#","");function connectNum(nt,lt){return parseInt(at[nt]+at[lt||nt],16)}at.length<6?(this.r=connectNum(0),this.g=connectNum(1),this.b=connectNum(2),this.a=at[3]?connectNum(3)/255:1):(this.r=connectNum(0,1),this.g=connectNum(2,3),this.b=connectNum(4,5),this.a=at[6]?connectNum(6,7)/255:1)}"fromHsl"({"h":nt,"s":at,"l":lt,"a":Rt}){if(this._h=nt%360,this._s=at,this._l=lt,this.a="number"==typeof Rt?Rt:1,at<=0){const nt=Bt(255*lt);this.r=nt,this.g=nt,this.b=nt}let Lt=0,Ht=0,jt=0;const $t=nt/60,Kt=(1-Math.abs(2*lt-1))*at,te=Kt*(1-Math.abs($t%2-1));$t>=0&&$t<1?(Lt=Kt,Ht=te):$t>=1&&$t<2?(Lt=te,Ht=Kt):$t>=2&&$t<3?(Ht=Kt,jt=te):$t>=3&&$t<4?(Ht=te,jt=Kt):$t>=4&&$t<5?(Lt=te,jt=Kt):$t>=5&&$t<6&&(Lt=Kt,jt=te);const ne=lt-Kt/2;this.r=Bt(255*(Lt+ne)),this.g=Bt(255*(Ht+ne)),this.b=Bt(255*(jt+ne))}"fromHsv"({"h":nt,"s":at,"v":lt,"a":Rt}){this._h=nt%360,this._s=at,this._v=lt,this.a="number"==typeof Rt?Rt:1;const Lt=Bt(255*lt);if(this.r=Lt,this.g=Lt,this.b=Lt,at<=0)return;const Ht=nt/60,jt=Math.floor(Ht),$t=Ht-jt,Kt=Bt(lt*(1-at)*255),te=Bt(lt*(1-at*$t)*255),ne=Bt(lt*(1-at*(1-$t))*255);switch(jt){case 0:this.g=ne,this.b=Kt;break;case 1:this.r=te,this.b=Kt;break;case 2:this.r=Kt,this.b=ne;break;case 3:this.r=Kt,this.g=te;break;case 4:this.r=ne,this.g=Kt;break;default:this.g=Kt,this.b=te}}"fromHsvString"(nt){const at=splitColorStr(nt,parseHSVorHSL);this.fromHsv({"h":at[0],"s":at[1],"v":at[2],"a":at[3]})}"fromHslString"(nt){const at=splitColorStr(nt,parseHSVorHSL);this.fromHsl({"h":at[0],"s":at[1],"l":at[2],"a":at[3]})}"fromRgbString"(nt){const at=splitColorStr(nt,((nt,at)=>at.includes("%")?Bt(nt/100*255):nt));this.r=at[0],this.g=at[1],this.b=at[2],this.a=at[3]}}},"7588":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return ve}});var Rt=lt(3973),Bt=lt(9859),Lt=lt(6640),Ht=lt(5985),jt=lt(758),$t=lt(7500),Kt=lt.n($t),te=lt(8264),ne=lt(7929),re=lt(1950),ae=lt(8299),oe=lt(3144),se=lt(9657),le=lt(1378);function isIconDefinition(nt){return"object"===(0,ae.A)(nt)&&"string"==typeof nt.name&&"string"==typeof nt.theme&&("object"===(0,ae.A)(nt.icon)||"function"==typeof nt.icon)}function normalizeAttrs(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(nt).reduce((function(at,lt){var Rt=nt[lt];if("class"===lt)at.className=Rt,delete at.class;else delete at[lt],at[function camelCase(nt){return nt.replace(/-(.)/g,(function(nt,at){return at.toUpperCase()}))}(lt)]=Rt;return at}),{})}function generate(nt,at,lt){return lt?jt.createElement(nt.tag,(0,re.A)((0,re.A)({"key":at},normalizeAttrs(nt.attrs)),lt),(nt.children||[]).map((function(lt,Rt){return generate(lt,"".concat(at,"-").concat(nt.tag,"-").concat(Rt))}))):jt.createElement(nt.tag,(0,re.A)({"key":at},normalizeAttrs(nt.attrs)),(nt.children||[]).map((function(lt,Rt){return generate(lt,"".concat(at,"-").concat(nt.tag,"-").concat(Rt))})))}function getSecondaryColor(nt){return(0,te.cM)(nt)[0]}function normalizeTwoToneColors(nt){return nt?Array.isArray(nt)?nt:[nt]:[]}var ue=["icon","className","onClick","style","primaryColor","secondaryColor"],ce={"primaryColor":"#333","secondaryColor":"#E6E6E6","calculated":!1};var he=function IconBase(nt){var at=nt.icon,lt=nt.className,Rt=nt.onClick,Bt=nt.style,Lt=nt.primaryColor,$t=nt.secondaryColor,Kt=(0,Ht.A)(nt,ue),te=jt.useRef(),ae=ce;if(Lt&&(ae={"primaryColor":Lt,"secondaryColor":$t||getSecondaryColor(Lt)}),function useInsertStyles(nt){var at=(0,jt.useContext)(ne.A),lt=at.csp,Rt=at.prefixCls,Bt=at.layer,Lt="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";Rt&&(Lt=Lt.replace(/anticon/g,Rt)),Bt&&(Lt="@layer ".concat(Bt," {\n").concat(Lt,"\n}")),(0,jt.useEffect)((function(){var at=nt.current,Rt=(0,se.j)(at);(0,oe.BD)(Lt,"@ant-design-icons",{"prepend":!Bt,"csp":lt,"attachTo":Rt})}),[])}(te),function utils_warning(nt,at){(0,le.Ay)(nt,"[@ant-design/icons] ".concat(at))}(isIconDefinition(at),"icon should be icon definiton, but got ".concat(at)),!isIconDefinition(at))return null;var he=at;return he&&"function"==typeof he.icon&&(he=(0,re.A)((0,re.A)({},he),{},{"icon":he.icon(ae.primaryColor,ae.secondaryColor)})),generate(he.icon,"svg-".concat(he.name),(0,re.A)((0,re.A)({"className":lt,"onClick":Rt,"style":Bt,"data-icon":he.name,"width":"1em","height":"1em","fill":"currentColor","aria-hidden":"true"},Kt),{},{"ref":te}))};he.displayName="IconReact",he.getTwoToneColors=function getTwoToneColors(){return(0,re.A)({},ce)},he.setTwoToneColors=function setTwoToneColors(nt){var at=nt.primaryColor,lt=nt.secondaryColor;ce.primaryColor=at,ce.secondaryColor=lt||getSecondaryColor(at),ce.calculated=!!lt};var de=he;function setTwoToneColor(nt){var at=normalizeTwoToneColors(nt),lt=(0,Bt.A)(at,2),Rt=lt[0],Lt=lt[1];return de.setTwoToneColors({"primaryColor":Rt,"secondaryColor":Lt})}var fe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];setTwoToneColor(te.z1.primary);var pe=jt.forwardRef((function(nt,at){var lt=nt.className,$t=nt.icon,te=nt.spin,re=nt.rotate,ae=nt.tabIndex,oe=nt.onClick,se=nt.twoToneColor,le=(0,Ht.A)(nt,fe),ue=jt.useContext(ne.A),ce=ue.prefixCls,he=void 0===ce?"anticon":ce,pe=ue.rootClassName,ve=Kt()(pe,he,(0,Lt.A)((0,Lt.A)({},"".concat(he,"-").concat($t.name),!!$t.name),"".concat(he,"-spin"),!!te||"loading"===$t.name),lt),Ae=ae;void 0===Ae&&oe&&(Ae=-1);var we=re?{"msTransform":"rotate(".concat(re,"deg)"),"transform":"rotate(".concat(re,"deg)")}:void 0,Ce=normalizeTwoToneColors(se),je=(0,Bt.A)(Ce,2),Ne=je[0],Ve=je[1];return jt.createElement("span",(0,Rt.A)({"role":"img","aria-label":$t.name},le,{"ref":at,"tabIndex":Ae,"onClick":oe,"className":ve}),jt.createElement(de,{"icon":$t,"primaryColor":Ne,"secondaryColor":Ve,"style":we}))}));pe.displayName="AntdIcon",pe.getTwoToneColor=function getTwoToneColor(){var nt=de.getTwoToneColors();return nt.calculated?[nt.primaryColor,nt.secondaryColor]:nt.primaryColor},pe.setTwoToneColor=setTwoToneColor;var ve=pe},"7929":function(nt,at,lt){"use strict";var Rt=(0,lt(758).createContext)({});at.A=Rt},"9574":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(3973),Bt=lt(758),Lt={"icon":{"tag":"svg","attrs":{"viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},"name":"check","theme":"outlined"},Ht=lt(7588),jt=function CheckOutlined(nt,at){return Bt.createElement(Ht.A,(0,Rt.A)({},nt,{"ref":at,"icon":Lt}))};var $t=Bt.forwardRef(jt)},"9980":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(3973),Bt=lt(758),Lt={"icon":{"tag":"svg","attrs":{"fill-rule":"evenodd","viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},"name":"close-circle","theme":"filled"},Ht=lt(7588),jt=function CloseCircleFilled(nt,at){return Bt.createElement(Ht.A,(0,Rt.A)({},nt,{"ref":at,"icon":Lt}))};var $t=Bt.forwardRef(jt)},"2107":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(3973),Bt=lt(758),Lt={"icon":{"tag":"svg","attrs":{"fill-rule":"evenodd","viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},"name":"close","theme":"outlined"},Ht=lt(7588),jt=function CloseOutlined(nt,at){return Bt.createElement(Ht.A,(0,Rt.A)({},nt,{"ref":at,"icon":Lt}))};var $t=Bt.forwardRef(jt)},"5200":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(3973),Bt=lt(758),Lt={"icon":{"tag":"svg","attrs":{"viewBox":"0 0 1024 1024","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},"name":"loading","theme":"outlined"},Ht=lt(7588),jt=function LoadingOutlined(nt,at){return Bt.createElement(Ht.A,(0,Rt.A)({},nt,{"ref":at,"icon":Lt}))};var $t=Bt.forwardRef(jt)},"6251":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(3973),Bt=lt(758),Lt={"icon":{"tag":"svg","attrs":{"viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},"name":"search","theme":"outlined"},Ht=lt(7588),jt=function SearchOutlined(nt,at){return Bt.createElement(Ht.A,(0,Rt.A)({},nt,{"ref":at,"icon":Lt}))};var $t=Bt.forwardRef(jt)},"2477":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return vi}});var Rt=lt(1950),Bt=lt(9859),Lt=lt(5985),Ht=lt(758),jt=lt(8143),$t=lt(9942),Kt=(lt(1378),lt(15)),te=Ht.createContext(null),ne=lt(3691),re=lt(5429),ae=[];var oe=lt(3144);function measureScrollbarSize(nt){var at="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),lt=document.createElement("div");lt.id=at;var Rt,Bt,Lt=lt.style;if(Lt.position="absolute",Lt.left="0",Lt.top="0",Lt.width="100px",Lt.height="100px",Lt.overflow="scroll",nt){var Ht=getComputedStyle(nt);Lt.scrollbarColor=Ht.scrollbarColor,Lt.scrollbarWidth=Ht.scrollbarWidth;var jt=getComputedStyle(nt,"::-webkit-scrollbar"),$t=parseInt(jt.width,10),Kt=parseInt(jt.height,10);try{var te=$t?"width: ".concat(jt.width,";"):"",ne=Kt?"height: ".concat(jt.height,";"):"";(0,oe.BD)("\n#".concat(at,"::-webkit-scrollbar {\n").concat(te,"\n").concat(ne,"\n}"),at)}catch(nt){console.error(nt),Rt=$t,Bt=Kt}}document.body.appendChild(lt);var re=nt&&Rt&&!isNaN(Rt)?Rt:lt.offsetWidth-lt.clientWidth,ae=nt&&Bt&&!isNaN(Bt)?Bt:lt.offsetHeight-lt.clientHeight;return document.body.removeChild(lt),(0,oe.m6)(at),{"width":re,"height":ae}}var se="rc-util-locker-".concat(Date.now()),le=0;function useScrollLocker(nt){var at=!!nt,lt=Ht.useState((function(){return le+=1,"".concat(se,"_").concat(le)})),Rt=(0,Bt.A)(lt,1)[0];(0,re.A)((function(){if(at){var nt=function getTargetScrollBarSize(nt){return"undefined"!=typeof document&&nt&&nt instanceof Element?measureScrollbarSize(nt):{"width":0,"height":0}}(document.body).width,lt=function isBodyOverflowing(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}();(0,oe.BD)("\nhtml body {\n  overflow-y: hidden;\n  ".concat(lt?"width: calc(100% - ".concat(nt,"px);"):"","\n}"),Rt)}else(0,oe.m6)(Rt);return function(){(0,oe.m6)(Rt)}}),[at,Rt])}var ue=!1;var ce=function getPortalContainer(nt){return!1!==nt&&((0,$t.A)()&&nt?"string"==typeof nt?document.querySelector(nt):"function"==typeof nt?nt():nt:null)};var he=Ht.forwardRef((function(nt,at){var lt=nt.open,Rt=nt.autoLock,Lt=nt.getContainer,oe=(nt.debug,nt.autoDestroy),se=void 0===oe||oe,le=nt.children,he=Ht.useState(lt),de=(0,Bt.A)(he,2),fe=de[0],pe=de[1],ve=fe||lt;Ht.useEffect((function(){(se||lt)&&pe(lt)}),[lt,se]);var Ae=Ht.useState((function(){return ce(Lt)})),we=(0,Bt.A)(Ae,2),Ce=we[0],je=we[1];Ht.useEffect((function(){var nt=ce(Lt);je(null!=nt?nt:null)}));var Ne=function useDom(nt,at){var lt=Ht.useState((function(){return(0,$t.A)()?document.createElement("div"):null})),Rt=(0,Bt.A)(lt,1)[0],Lt=Ht.useRef(!1),jt=Ht.useContext(te),Kt=Ht.useState(ae),oe=(0,Bt.A)(Kt,2),se=oe[0],le=oe[1],ue=jt||(Lt.current?void 0:function(nt){le((function(at){return[nt].concat((0,ne.A)(at))}))});function append(){Rt.parentElement||document.body.appendChild(Rt),Lt.current=!0}function cleanup(){var nt;null===(nt=Rt.parentElement)||void 0===nt||nt.removeChild(Rt),Lt.current=!1}return(0,re.A)((function(){return nt?jt?jt(append):append():cleanup(),cleanup}),[nt]),(0,re.A)((function(){se.length&&(se.forEach((function(nt){return nt()})),le(ae))}),[se]),[Rt,ue]}(ve&&!Ce),Ve=(0,Bt.A)(Ne,2),Ge=Ve[0],ti=Ve[1],li=null!=Ce?Ce:Ge;useScrollLocker(Rt&&lt&&(0,$t.A)()&&(li===Ge||li===document.body));var hi=null;le&&(0,Kt.f3)(le)&&at&&(hi=le.ref);var di=(0,Kt.xK)(hi,at);if(!ve||!(0,$t.A)()||void 0===Ce)return null;var fi=!1===li||function inlineMock(nt){return"boolean"==typeof nt&&(ue=nt),ue}(),pi=le;return at&&(pi=Ht.cloneElement(le,{"ref":di})),Ht.createElement(te.Provider,{"value":ti},fi?pi:(0,jt.createPortal)(pi,li))})),de=lt(7500),fe=lt.n(de),pe=lt(5113),ve=lt(8636),Ae=lt(9657),we=lt(6812),Ce=lt(9511),je=lt(9294),Ne=lt(3973),Ve=lt(3295);function Arrow(nt){var at=nt.prefixCls,lt=nt.align,Rt=nt.arrow,Bt=nt.arrowPos,Lt=Rt||{},jt=Lt.className,$t=Lt.content,Kt=Bt.x,te=void 0===Kt?0:Kt,ne=Bt.y,re=void 0===ne?0:ne,ae=Ht.useRef();if(!lt||!lt.points)return null;var oe={"position":"absolute"};if(!1!==lt.autoArrow){var se=lt.points[0],le=lt.points[1],ue=se[0],ce=se[1],he=le[0],de=le[1];ue!==he&&["t","b"].includes(ue)?"t"===ue?oe.top=0:oe.bottom=0:oe.top=re,ce!==de&&["l","r"].includes(ce)?"l"===ce?oe.left=0:oe.right=0:oe.left=te}return Ht.createElement("div",{"ref":ae,"className":fe()("".concat(at,"-arrow"),jt),"style":oe},$t)}function Mask(nt){var at=nt.prefixCls,lt=nt.open,Rt=nt.zIndex,Bt=nt.mask,Lt=nt.motion;return Bt?Ht.createElement(Ve.Ay,(0,Ne.A)({},Lt,{"motionAppear":!0,"visible":lt,"removeOnLeave":!0}),(function(nt){var lt=nt.className;return Ht.createElement("div",{"style":{"zIndex":Rt},"className":fe()("".concat(at,"-mask"),lt)})})):null}var Ge=Ht.memo((function(nt){return nt.children}),(function(nt,at){return at.cache})),ti=Ht.forwardRef((function(nt,at){var lt=nt.popup,Lt=nt.className,jt=nt.prefixCls,$t=nt.style,te=nt.target,ne=nt.onVisibleChanged,ae=nt.open,oe=nt.keepDom,se=nt.fresh,le=nt.onClick,ue=nt.mask,ce=nt.arrow,he=nt.arrowPos,de=nt.align,ve=nt.motion,Ae=nt.maskMotion,we=nt.forceRender,Ce=nt.getPopupContainer,je=nt.autoDestroy,ti=nt.portal,li=nt.zIndex,hi=nt.onMouseEnter,di=nt.onMouseLeave,fi=nt.onPointerEnter,pi=nt.onPointerDownCapture,vi=nt.ready,mi=nt.offsetX,_i=nt.offsetY,bi=nt.offsetR,Mi=nt.offsetB,Ti=nt.onAlign,Ii=nt.onPrepare,Bi=nt.stretch,zi=nt.targetWidth,Wi=nt.targetHeight,Ui="function"==typeof lt?lt():lt,$i=ae||oe,qi=(null==Ce?void 0:Ce.length)>0,Ki=Ht.useState(!Ce||!qi),Qi=(0,Bt.A)(Ki,2),Ji=Qi[0],dn=Qi[1];if((0,re.A)((function(){!Ji&&qi&&te&&dn(!0)}),[Ji,qi,te]),!Ji)return null;var fn="auto",vn={"left":"-1000vw","top":"-1000vh","right":fn,"bottom":fn};if(vi||!ae){var gn,yn=de.points,mn=de.dynamicInset||(null===(gn=de._experimental)||void 0===gn?void 0:gn.dynamicInset),_n=mn&&"r"===yn[0][1],bn=mn&&"b"===yn[0][0];_n?(vn.right=bi,vn.left=fn):(vn.left=mi,vn.right=fn),bn?(vn.bottom=Mi,vn.top=fn):(vn.top=_i,vn.bottom=fn)}var xn={};return Bi&&(Bi.includes("height")&&Wi?xn.height=Wi:Bi.includes("minHeight")&&Wi&&(xn.minHeight=Wi),Bi.includes("width")&&zi?xn.width=zi:Bi.includes("minWidth")&&zi&&(xn.minWidth=zi)),ae||(xn.pointerEvents="none"),Ht.createElement(ti,{"open":we||$i,"getContainer":Ce&&function(){return Ce(te)},"autoDestroy":je},Ht.createElement(Mask,{"prefixCls":jt,"open":ae,"zIndex":li,"mask":ue,"motion":Ae}),Ht.createElement(pe.A,{"onResize":Ti,"disabled":!ae},(function(nt){return Ht.createElement(Ve.Ay,(0,Ne.A)({"motionAppear":!0,"motionEnter":!0,"motionLeave":!0,"removeOnLeave":!1,"forceRender":we,"leavedClassName":"".concat(jt,"-hidden")},ve,{"onAppearPrepare":Ii,"onEnterPrepare":Ii,"visible":ae,"onVisibleChanged":function onVisibleChanged(nt){var at;null==ve||null===(at=ve.onVisibleChanged)||void 0===at||at.call(ve,nt),ne(nt)}}),(function(lt,Bt){var te=lt.className,ne=lt.style,re=fe()(jt,te,Lt);return Ht.createElement("div",{"ref":(0,Kt.K4)(nt,at,Bt),"className":re,"style":(0,Rt.A)((0,Rt.A)((0,Rt.A)((0,Rt.A)({"--arrow-x":"".concat(he.x||0,"px"),"--arrow-y":"".concat(he.y||0,"px")},vn),xn),ne),{},{"boxSizing":"border-box","zIndex":li},$t),"onMouseEnter":hi,"onMouseLeave":di,"onPointerEnter":fi,"onClick":le,"onPointerDownCapture":pi},ce&&Ht.createElement(Arrow,{"prefixCls":jt,"arrow":ce,"arrowPos":he,"align":de}),Ht.createElement(Ge,{"cache":!ae&&!se},Ui))}))})))}));var li=ti;var hi=Ht.forwardRef((function(nt,at){var lt=nt.children,Rt=nt.getTriggerDOMNode,Bt=(0,Kt.f3)(lt),Lt=Ht.useCallback((function(nt){(0,Kt.Xf)(at,Rt?Rt(nt):nt)}),[Rt]),jt=(0,Kt.xK)(Lt,(0,Kt.A9)(lt));return Bt?Ht.cloneElement(lt,{"ref":jt}):lt})),di=Ht.createContext(null);function toArray(nt){return nt?Array.isArray(nt)?nt:[nt]:[]}var fi=lt(1411);function isPointsEq(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?nt[0]===at[0]:nt[0]===at[0]&&nt[1]===at[1]}function getMotion(nt,at,lt,Rt){return at||(lt?{"motionName":"".concat(nt,"-").concat(lt)}:Rt?{"motionName":Rt}:null)}function getWin(nt){return nt.ownerDocument.defaultView}function collectScroller(nt){for(var at=[],lt=null==nt?void 0:nt.parentElement,Rt=["hidden","scroll","clip","auto"];lt;){var Bt=getWin(lt).getComputedStyle(lt);[Bt.overflowX,Bt.overflowY,Bt.overflow].some((function(nt){return Rt.includes(nt)}))&&at.push(lt),lt=lt.parentElement}return at}function toNum(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(nt)?at:nt}function getPxValue(nt){return toNum(parseFloat(nt),0)}function getVisibleArea(nt,at){var lt=(0,Rt.A)({},nt);return(at||[]).forEach((function(nt){if(!(nt instanceof HTMLBodyElement||nt instanceof HTMLHtmlElement)){var at=getWin(nt).getComputedStyle(nt),Rt=at.overflow,Bt=at.overflowClipMargin,Lt=at.borderTopWidth,Ht=at.borderBottomWidth,jt=at.borderLeftWidth,$t=at.borderRightWidth,Kt=nt.getBoundingClientRect(),te=nt.offsetHeight,ne=nt.clientHeight,re=nt.offsetWidth,ae=nt.clientWidth,oe=getPxValue(Lt),se=getPxValue(Ht),le=getPxValue(jt),ue=getPxValue($t),ce=toNum(Math.round(Kt.width/re*1e3)/1e3),he=toNum(Math.round(Kt.height/te*1e3)/1e3),de=(re-ae-le-ue)*ce,fe=(te-ne-oe-se)*he,pe=oe*he,ve=se*he,Ae=le*ce,we=ue*ce,Ce=0,je=0;if("clip"===Rt){var Ne=getPxValue(Bt);Ce=Ne*ce,je=Ne*he}var Ve=Kt.x+Ae-Ce,Ge=Kt.y+pe-je,ti=Ve+Kt.width+2*Ce-Ae-we-de,li=Ge+Kt.height+2*je-pe-ve-fe;lt.left=Math.max(lt.left,Ve),lt.top=Math.max(lt.top,Ge),lt.right=Math.min(lt.right,ti),lt.bottom=Math.min(lt.bottom,li)}})),lt}function getUnitOffset(nt){var at="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),lt=at.match(/^(.*)\%$/);return lt?nt*(parseFloat(lt[1])/100):parseFloat(at)}function getNumberOffset(nt,at){var lt=at||[],Rt=(0,Bt.A)(lt,2),Lt=Rt[0],Ht=Rt[1];return[getUnitOffset(nt.width,Lt),getUnitOffset(nt.height,Ht)]}function splitPoints(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[nt[0],nt[1]]}function getAlignPoint(nt,at){var lt,Rt=at[0],Bt=at[1];return lt="t"===Rt?nt.y:"b"===Rt?nt.y+nt.height:nt.y+nt.height/2,{"x":"l"===Bt?nt.x:"r"===Bt?nt.x+nt.width:nt.x+nt.width/2,"y":lt}}function reversePoints(nt,at){var lt={"t":"b","b":"t","l":"r","r":"l"};return nt.map((function(nt,Rt){return Rt===at?lt[nt]||"c":nt})).join("")}var pi=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];var vi=function generateTrigger(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,at=Ht.forwardRef((function(at,lt){var jt=at.prefixCls,$t=void 0===jt?"rc-trigger-popup":jt,Kt=at.children,te=at.action,ae=void 0===te?"hover":te,oe=at.showAction,se=at.hideAction,le=at.popupVisible,ue=at.defaultPopupVisible,ce=at.onPopupVisibleChange,he=at.afterPopupVisibleChange,de=at.mouseEnterDelay,Ne=at.mouseLeaveDelay,Ve=void 0===Ne?.1:Ne,Ge=at.focusDelay,ti=at.blurDelay,vi=at.mask,mi=at.maskClosable,_i=void 0===mi||mi,bi=at.getPopupContainer,Mi=at.forceRender,Ti=at.autoDestroy,Ii=at.destroyPopupOnHide,Bi=at.popup,zi=at.popupClassName,Wi=at.popupStyle,Ui=at.popupPlacement,$i=at.builtinPlacements,qi=void 0===$i?{}:$i,Ki=at.popupAlign,Qi=at.zIndex,Ji=at.stretch,dn=at.getPopupClassNameFromAlign,fn=at.fresh,vn=at.alignPoint,gn=at.onPopupClick,yn=at.onPopupAlign,mn=at.arrow,_n=at.popupMotion,bn=at.maskMotion,xn=at.popupTransitionName,kn=at.popupAnimation,Sn=at.maskTransitionName,An=at.maskAnimation,wn=at.className,Cn=at.getTriggerDOMNode,Mn=(0,Lt.A)(at,pi),Tn=Ti||Ii||!1,En=Ht.useState(!1),Pn=(0,Bt.A)(En,2),Rn=Pn[0],On=Pn[1];(0,re.A)((function(){On((0,je.A)())}),[]);var Fn=Ht.useRef({}),or=Ht.useContext(di),sr=Ht.useMemo((function(){return{"registerSubPopup":function registerSubPopup(nt,at){Fn.current[nt]=at,null==or||or.registerSubPopup(nt,at)}}}),[or]),lr=(0,Ce.A)(),vr=Ht.useState(null),yr=(0,Bt.A)(vr,2),mr=yr[0],xr=yr[1],kr=Ht.useRef(null),Sr=(0,we.A)((function(nt){kr.current=nt,(0,ve.fk)(nt)&&mr!==nt&&xr(nt),null==or||or.registerSubPopup(lr,nt)})),Ar=Ht.useState(null),wr=(0,Bt.A)(Ar,2),Mr=wr[0],Tr=wr[1],Ir=Ht.useRef(null),Br=(0,we.A)((function(nt){(0,ve.fk)(nt)&&Mr!==nt&&(Tr(nt),Ir.current=nt)})),Or=Ht.Children.only(Kt),Dr=(null==Or?void 0:Or.props)||{},Lr={},Fr=(0,we.A)((function(nt){var at,lt,Rt=Mr;return(null==Rt?void 0:Rt.contains(nt))||(null===(at=(0,Ae.j)(Rt))||void 0===at?void 0:at.host)===nt||nt===Rt||(null==mr?void 0:mr.contains(nt))||(null===(lt=(0,Ae.j)(mr))||void 0===lt?void 0:lt.host)===nt||nt===mr||Object.values(Fn.current).some((function(at){return(null==at?void 0:at.contains(nt))||nt===at}))})),zr=getMotion($t,_n,kn,xn),Hr=getMotion($t,bn,An,Sn),jr=Ht.useState(ue||!1),Nr=(0,Bt.A)(jr,2),Vr=Nr[0],Wr=Nr[1],Gr=null!=le?le:Vr,Ur=(0,we.A)((function(nt){void 0===le&&Wr(nt)}));(0,re.A)((function(){Wr(le||!1)}),[le]);var Yr=Ht.useRef(Gr);Yr.current=Gr;var Xr=Ht.useRef([]);Xr.current=[];var qr=(0,we.A)((function(nt){var at;Ur(nt),(null!==(at=Xr.current[Xr.current.length-1])&&void 0!==at?at:Gr)!==nt&&(Xr.current.push(nt),null==ce||ce(nt))})),Kr=Ht.useRef(),Zr=function clearDelay(){clearTimeout(Kr.current)},Jr=function triggerOpen(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Zr(),0===at?qr(nt):Kr.current=setTimeout((function(){qr(nt)}),1e3*at)};Ht.useEffect((function(){return Zr}),[]);var sa=Ht.useState(!1),ua=(0,Bt.A)(sa,2),ca=ua[0],ha=ua[1];(0,re.A)((function(nt){nt&&!Gr||ha(!0)}),[Gr]);var da=Ht.useState(null),fa=(0,Bt.A)(da,2),pa=fa[0],va=fa[1],ma=Ht.useState(null),Ea=(0,Bt.A)(ma,2),Pa=Ea[0],Ba=Ea[1],Wa=function setMousePosByEvent(nt){Ba([nt.clientX,nt.clientY])},Ga=function useAlign(nt,at,lt,Lt,jt,$t,Kt){var te=Ht.useState({"ready":!1,"offsetX":0,"offsetY":0,"offsetR":0,"offsetB":0,"arrowX":0,"arrowY":0,"scaleX":1,"scaleY":1,"align":jt[Lt]||{}}),ne=(0,Bt.A)(te,2),ae=ne[0],oe=ne[1],se=Ht.useRef(0),le=Ht.useMemo((function(){return at?collectScroller(at):[]}),[at]),ue=Ht.useRef({});nt||function resetFlipCache(){ue.current={}}();var ce=(0,we.A)((function(){if(at&&lt&&nt){var Ht,te,ne,re,ae,se=at,ce=se.ownerDocument,he=getWin(se).getComputedStyle(se),de=he.width,fe=he.height,pe=he.position,Ae=se.style.left,we=se.style.top,Ce=se.style.right,je=se.style.bottom,Ne=se.style.overflow,Ve=(0,Rt.A)((0,Rt.A)({},jt[Lt]),$t),Ge=ce.createElement("div");if(null===(Ht=se.parentElement)||void 0===Ht||Ht.appendChild(Ge),Ge.style.left="".concat(se.offsetLeft,"px"),Ge.style.top="".concat(se.offsetTop,"px"),Ge.style.position=pe,Ge.style.height="".concat(se.offsetHeight,"px"),Ge.style.width="".concat(se.offsetWidth,"px"),se.style.left="0",se.style.top="0",se.style.right="auto",se.style.bottom="auto",se.style.overflow="hidden",Array.isArray(lt))ae={"x":lt[0],"y":lt[1],"width":0,"height":0};else{var ti,li,hi=lt.getBoundingClientRect();hi.x=null!==(ti=hi.x)&&void 0!==ti?ti:hi.left,hi.y=null!==(li=hi.y)&&void 0!==li?li:hi.top,ae={"x":hi.x,"y":hi.y,"width":hi.width,"height":hi.height}}var di=se.getBoundingClientRect();di.x=null!==(te=di.x)&&void 0!==te?te:di.left,di.y=null!==(ne=di.y)&&void 0!==ne?ne:di.top;var pi=ce.documentElement,vi=pi.clientWidth,mi=pi.clientHeight,_i=pi.scrollWidth,bi=pi.scrollHeight,Mi=pi.scrollTop,Ti=pi.scrollLeft,Ii=di.height,Bi=di.width,zi=ae.height,Wi=ae.width,Ui={"left":0,"top":0,"right":vi,"bottom":mi},$i={"left":-Ti,"top":-Mi,"right":_i-Ti,"bottom":bi-Mi},qi=Ve.htmlRegion,Ki="visible",Qi="visibleFirst";"scroll"!==qi&&qi!==Qi&&(qi=Ki);var Ji=qi===Qi,dn=getVisibleArea($i,le),fn=getVisibleArea(Ui,le),vn=qi===Ki?fn:dn,gn=Ji?fn:vn;se.style.left="auto",se.style.top="auto",se.style.right="0",se.style.bottom="0";var yn=se.getBoundingClientRect();se.style.left=Ae,se.style.top=we,se.style.right=Ce,se.style.bottom=je,se.style.overflow=Ne,null===(re=se.parentElement)||void 0===re||re.removeChild(Ge);var mn=toNum(Math.round(Bi/parseFloat(de)*1e3)/1e3),_n=toNum(Math.round(Ii/parseFloat(fe)*1e3)/1e3);if(0===mn||0===_n||(0,ve.fk)(lt)&&!(0,fi.A)(lt))return;var bn=Ve.offset,xn=Ve.targetOffset,kn=getNumberOffset(di,bn),Sn=(0,Bt.A)(kn,2),An=Sn[0],wn=Sn[1],Cn=getNumberOffset(ae,xn),Mn=(0,Bt.A)(Cn,2),Tn=Mn[0],En=Mn[1];ae.x-=Tn,ae.y-=En;var Pn=Ve.points||[],Rn=(0,Bt.A)(Pn,2),On=Rn[0],Fn=splitPoints(Rn[1]),or=splitPoints(On),sr=getAlignPoint(ae,Fn),lr=getAlignPoint(di,or),vr=(0,Rt.A)({},Ve),yr=sr.x-lr.x+An,mr=sr.y-lr.y+wn;function getIntersectionVisibleArea(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn,Rt=di.x+nt,Bt=di.y+at,Lt=Rt+Bi,Ht=Bt+Ii,jt=Math.max(Rt,lt.left),$t=Math.max(Bt,lt.top),Kt=Math.min(Lt,lt.right),te=Math.min(Ht,lt.bottom);return Math.max(0,(Kt-jt)*(te-$t))}var xr,kr,Sr,Ar,wr=getIntersectionVisibleArea(yr,mr),Mr=getIntersectionVisibleArea(yr,mr,fn),Tr=getAlignPoint(ae,["t","l"]),Ir=getAlignPoint(di,["t","l"]),Br=getAlignPoint(ae,["b","r"]),Or=getAlignPoint(di,["b","r"]),Dr=Ve.overflow||{},Lr=Dr.adjustX,Fr=Dr.adjustY,zr=Dr.shiftX,Hr=Dr.shiftY,jr=function supportAdjust(nt){return"boolean"==typeof nt?nt:nt>=0};function syncNextPopupPosition(){xr=di.y+mr,kr=xr+Ii,Sr=di.x+yr,Ar=Sr+Bi}syncNextPopupPosition();var Nr=jr(Fr),Vr=or[0]===Fn[0];if(Nr&&"t"===or[0]&&(kr>gn.bottom||ue.current.bt)){var Wr=mr;Vr?Wr-=Ii-zi:Wr=Tr.y-Or.y-wn;var Gr=getIntersectionVisibleArea(yr,Wr),Ur=getIntersectionVisibleArea(yr,Wr,fn);Gr>wr||Gr===wr&&(!Ji||Ur>=Mr)?(ue.current.bt=!0,mr=Wr,wn=-wn,vr.points=[reversePoints(or,0),reversePoints(Fn,0)]):ue.current.bt=!1}if(Nr&&"b"===or[0]&&(xr<gn.top||ue.current.tb)){var Yr=mr;Vr?Yr+=Ii-zi:Yr=Br.y-Ir.y-wn;var Xr=getIntersectionVisibleArea(yr,Yr),qr=getIntersectionVisibleArea(yr,Yr,fn);Xr>wr||Xr===wr&&(!Ji||qr>=Mr)?(ue.current.tb=!0,mr=Yr,wn=-wn,vr.points=[reversePoints(or,0),reversePoints(Fn,0)]):ue.current.tb=!1}var Kr=jr(Lr),Zr=or[1]===Fn[1];if(Kr&&"l"===or[1]&&(Ar>gn.right||ue.current.rl)){var Jr=yr;Zr?Jr-=Bi-Wi:Jr=Tr.x-Or.x-An;var sa=getIntersectionVisibleArea(Jr,mr),ua=getIntersectionVisibleArea(Jr,mr,fn);sa>wr||sa===wr&&(!Ji||ua>=Mr)?(ue.current.rl=!0,yr=Jr,An=-An,vr.points=[reversePoints(or,1),reversePoints(Fn,1)]):ue.current.rl=!1}if(Kr&&"r"===or[1]&&(Sr<gn.left||ue.current.lr)){var ca=yr;Zr?ca+=Bi-Wi:ca=Br.x-Ir.x-An;var ha=getIntersectionVisibleArea(ca,mr),da=getIntersectionVisibleArea(ca,mr,fn);ha>wr||ha===wr&&(!Ji||da>=Mr)?(ue.current.lr=!0,yr=ca,An=-An,vr.points=[reversePoints(or,1),reversePoints(Fn,1)]):ue.current.lr=!1}syncNextPopupPosition();var fa=!0===zr?0:zr;"number"==typeof fa&&(Sr<fn.left&&(yr-=Sr-fn.left-An,ae.x+Wi<fn.left+fa&&(yr+=ae.x-fn.left+Wi-fa)),Ar>fn.right&&(yr-=Ar-fn.right-An,ae.x>fn.right-fa&&(yr+=ae.x-fn.right+fa)));var pa=!0===Hr?0:Hr;"number"==typeof pa&&(xr<fn.top&&(mr-=xr-fn.top-wn,ae.y+zi<fn.top+pa&&(mr+=ae.y-fn.top+zi-pa)),kr>fn.bottom&&(mr-=kr-fn.bottom-wn,ae.y>fn.bottom-pa&&(mr+=ae.y-fn.bottom+pa)));var va=di.x+yr,ma=va+Bi,Ea=di.y+mr,Pa=Ea+Ii,Ba=ae.x,Wa=Ba+Wi,Ga=ae.y,$a=Ga+zi,Qa=(Math.max(va,Ba)+Math.min(ma,Wa))/2-va,Ja=(Math.max(Ea,Ga)+Math.min(Pa,$a))/2-Ea;null==Kt||Kt(at,vr);var to=yn.right-di.x-(yr+di.width),eo=yn.bottom-di.y-(mr+di.height);1===mn&&(yr=Math.round(yr),to=Math.round(to)),1===_n&&(mr=Math.round(mr),eo=Math.round(eo)),oe({"ready":!0,"offsetX":yr/mn,"offsetY":mr/_n,"offsetR":to/mn,"offsetB":eo/_n,"arrowX":Qa/mn,"arrowY":Ja/_n,"scaleX":mn,"scaleY":_n,"align":vr})}})),he=function resetReady(){oe((function(nt){return(0,Rt.A)((0,Rt.A)({},nt),{},{"ready":!1})}))};return(0,re.A)(he,[Lt]),(0,re.A)((function(){nt||he()}),[nt]),[ae.ready,ae.offsetX,ae.offsetY,ae.offsetR,ae.offsetB,ae.arrowX,ae.arrowY,ae.scaleX,ae.scaleY,ae.align,function triggerAlign(){se.current+=1;var nt=se.current;Promise.resolve().then((function(){se.current===nt&&ce()}))}]}(Gr,mr,vn&&null!==Pa?Pa:Mr,Ui,qi,Ki,yn),$a=(0,Bt.A)(Ga,11),Qa=$a[0],Ja=$a[1],to=$a[2],eo=$a[3],co=$a[4],po=$a[5],vo=$a[6],go=$a[7],xo=$a[8],ko=$a[9],Mo=$a[10],To=function useAction(nt,at,lt,Rt){return Ht.useMemo((function(){var Bt=toArray(null!=lt?lt:at),Lt=toArray(null!=Rt?Rt:at),Ht=new Set(Bt),jt=new Set(Lt);return nt&&(Ht.has("hover")&&(Ht.delete("hover"),Ht.add("click")),jt.has("hover")&&(jt.delete("hover"),jt.add("click"))),[Ht,jt]}),[nt,at,lt,Rt])}(Rn,ae,oe,se),Io=(0,Bt.A)(To,2),Do=Io[0],Lo=Io[1],$o=Do.has("click"),ts=Lo.has("click")||Lo.has("contextMenu"),ns=(0,we.A)((function(){ca||Mo()}));!function useWatch(nt,at,lt,Rt,Bt){(0,re.A)((function(){if(nt&&at&&lt){var Lt=lt,Ht=collectScroller(at),jt=collectScroller(Lt),$t=getWin(Lt),Kt=new Set([$t].concat((0,ne.A)(Ht),(0,ne.A)(jt)));function notifyScroll(){Rt(),Bt()}return Kt.forEach((function(nt){nt.addEventListener("scroll",notifyScroll,{"passive":!0})})),$t.addEventListener("resize",notifyScroll,{"passive":!0}),Rt(),function(){Kt.forEach((function(nt){nt.removeEventListener("scroll",notifyScroll),$t.removeEventListener("resize",notifyScroll)}))}}}),[nt,at,lt])}(Gr,Mr,mr,ns,(function onScroll(){Yr.current&&vn&&ts&&Jr(!1)})),(0,re.A)((function(){ns()}),[Pa,Ui]),(0,re.A)((function(){!Gr||null!=qi&&qi[Ui]||ns()}),[JSON.stringify(Ki)]);var os=Ht.useMemo((function(){var nt=function getAlignPopupClassName(nt,at,lt,Rt){for(var Bt=lt.points,Lt=Object.keys(nt),Ht=0;Ht<Lt.length;Ht+=1){var jt,$t=Lt[Ht];if(isPointsEq(null===(jt=nt[$t])||void 0===jt?void 0:jt.points,Bt,Rt))return"".concat(at,"-placement-").concat($t)}return""}(qi,$t,ko,vn);return fe()(nt,null==dn?void 0:dn(ko))}),[ko,dn,qi,$t,vn]);Ht.useImperativeHandle(lt,(function(){return{"nativeElement":Ir.current,"popupElement":kr.current,"forceAlign":ns}}));var ss=Ht.useState(0),ls=(0,Bt.A)(ss,2),us=ls[0],cs=ls[1],hs=Ht.useState(0),ds=(0,Bt.A)(hs,2),fs=ds[0],bs=ds[1],ks=function syncTargetSize(){if(Ji&&Mr){var nt=Mr.getBoundingClientRect();cs(nt.width),bs(nt.height)}};function wrapperAction(nt,at,lt,Rt){Lr[nt]=function(Bt){var Lt;null==Rt||Rt(Bt),Jr(at,lt);for(var Ht=arguments.length,jt=new Array(Ht>1?Ht-1:0),$t=1;$t<Ht;$t++)jt[$t-1]=arguments[$t];null===(Lt=Dr[nt])||void 0===Lt||Lt.call.apply(Lt,[Dr,Bt].concat(jt))}}(0,re.A)((function(){pa&&(Mo(),pa(),va(null))}),[pa]),($o||ts)&&(Lr.onClick=function(nt){var at;Yr.current&&ts?Jr(!1):!Yr.current&&$o&&(Wa(nt),Jr(!0));for(var lt=arguments.length,Rt=new Array(lt>1?lt-1:0),Bt=1;Bt<lt;Bt++)Rt[Bt-1]=arguments[Bt];null===(at=Dr.onClick)||void 0===at||at.call.apply(at,[Dr,nt].concat(Rt))});var Ss,As,ws=function useWinClick(nt,at,lt,Rt,Bt,Lt,jt,$t){var Kt=Ht.useRef(nt);Kt.current=nt;var te=Ht.useRef(!1);return Ht.useEffect((function(){if(at&&Rt&&(!Bt||Lt)){var nt=function onPointerDown(){te.current=!1},Ht=function onTriggerClose(nt){var at;!Kt.current||jt((null===(at=nt.composedPath)||void 0===at||null===(at=at.call(nt))||void 0===at?void 0:at[0])||nt.target)||te.current||$t(!1)},ne=getWin(Rt);ne.addEventListener("pointerdown",nt,!0),ne.addEventListener("mousedown",Ht,!0),ne.addEventListener("contextmenu",Ht,!0);var re=(0,Ae.j)(lt);return re&&(re.addEventListener("mousedown",Ht,!0),re.addEventListener("contextmenu",Ht,!0)),function(){ne.removeEventListener("pointerdown",nt,!0),ne.removeEventListener("mousedown",Ht,!0),ne.removeEventListener("contextmenu",Ht,!0),re&&(re.removeEventListener("mousedown",Ht,!0),re.removeEventListener("contextmenu",Ht,!0))}}}),[at,lt,Rt,Bt,Lt]),function onPopupPointerDown(){te.current=!0}}(Gr,ts,Mr,mr,vi,_i,Fr,Jr),Cs=Do.has("hover"),Ms=Lo.has("hover");Cs&&(wrapperAction("onMouseEnter",!0,de,(function(nt){Wa(nt)})),wrapperAction("onPointerEnter",!0,de,(function(nt){Wa(nt)})),Ss=function onPopupMouseEnter(nt){(Gr||ca)&&null!=mr&&mr.contains(nt.target)&&Jr(!0,de)},vn&&(Lr.onMouseMove=function(nt){var at;null===(at=Dr.onMouseMove)||void 0===at||at.call(Dr,nt)})),Ms&&(wrapperAction("onMouseLeave",!1,Ve),wrapperAction("onPointerLeave",!1,Ve),As=function onPopupMouseLeave(){Jr(!1,Ve)}),Do.has("focus")&&wrapperAction("onFocus",!0,Ge),Lo.has("focus")&&wrapperAction("onBlur",!1,ti),Do.has("contextMenu")&&(Lr.onContextMenu=function(nt){var at;Yr.current&&Lo.has("contextMenu")?Jr(!1):(Wa(nt),Jr(!0)),nt.preventDefault();for(var lt=arguments.length,Rt=new Array(lt>1?lt-1:0),Bt=1;Bt<lt;Bt++)Rt[Bt-1]=arguments[Bt];null===(at=Dr.onContextMenu)||void 0===at||at.call.apply(at,[Dr,nt].concat(Rt))}),wn&&(Lr.className=fe()(Dr.className,wn));var Ts=(0,Rt.A)((0,Rt.A)({},Dr),Lr),Es={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(nt){Mn[nt]&&(Es[nt]=function(){for(var at,lt=arguments.length,Rt=new Array(lt),Bt=0;Bt<lt;Bt++)Rt[Bt]=arguments[Bt];null===(at=Ts[nt])||void 0===at||at.call.apply(at,[Ts].concat(Rt)),Mn[nt].apply(Mn,Rt)})}));var Ps=Ht.cloneElement(Or,(0,Rt.A)((0,Rt.A)({},Ts),Es)),Rs={"x":po,"y":vo},Is=mn?(0,Rt.A)({},!0!==mn?mn:{}):null;return Ht.createElement(Ht.Fragment,null,Ht.createElement(pe.A,{"disabled":!Gr,"ref":Br,"onResize":function onTargetResize(){ks(),ns()}},Ht.createElement(hi,{"getTriggerDOMNode":Cn},Ps)),Ht.createElement(di.Provider,{"value":sr},Ht.createElement(li,{"portal":nt,"ref":Sr,"prefixCls":$t,"popup":Bi,"className":fe()(zi,os),"style":Wi,"target":Mr,"onMouseEnter":Ss,"onMouseLeave":As,"onPointerEnter":Ss,"zIndex":Qi,"open":Gr,"keepDom":ca,"fresh":fn,"onClick":gn,"onPointerDownCapture":ws,"mask":vi,"motion":zr,"maskMotion":Hr,"onVisibleChanged":function onVisibleChanged(nt){ha(!1),Mo(),null==he||he(nt)},"onPrepare":function onPrepare(){return new Promise((function(nt){ks(),va((function(){return nt}))}))},"forceRender":Mi,"autoDestroy":Tn,"getPopupContainer":bi,"align":ko,"arrow":Is,"arrowPos":Rs,"ready":Qa,"offsetX":Ja,"offsetY":to,"offsetR":eo,"offsetB":co,"onAlign":ns,"stretch":Ji,"targetWidth":us/go,"targetHeight":fs/xo})))}));return at}(he)},"6932":function(nt,at){!function(nt){"use strict";function e(nt,at){(null==at||at>nt.length)&&(at=nt.length);for(var lt=0,Rt=Array(at);lt<at;lt++)Rt[lt]=nt[lt];return Rt}function i(nt){if(void 0===nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function n(nt,at,lt){return at=c(at),p(nt,d()?Reflect.construct(at,lt||[],c(nt).constructor):at.apply(nt,lt))}function r(nt,at){if(!(nt instanceof at))throw new TypeError("Cannot call a class as a function")}function a(nt,at){for(var lt=0;lt<at.length;lt++){var Rt=at[lt];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(nt,_(Rt.key),Rt)}}function o(nt,at,lt){return at&&a(nt.prototype,at),lt&&a(nt,lt),Object.defineProperty(nt,"prototype",{"writable":!1}),nt}function s(nt,at){var lt="undefined"!=typeof Symbol&&nt[Symbol.iterator]||nt["@@iterator"];if(!lt){if(Array.isArray(nt)||(lt=x(nt))||at&&nt&&"number"==typeof nt.length){lt&&(nt=lt);var Rt=0,r=function(){};return{"s":r,"n":function(){return Rt>=nt.length?{"done":!0}:{"done":!1,"value":nt[Rt++]}},"e":function(nt){throw nt},"f":r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Bt,Lt=!0,Ht=!1;return{"s":function(){lt=lt.call(nt)},"n":function(){var nt=lt.next();return Lt=nt.done,nt},"e":function(nt){Ht=!0,Bt=nt},"f":function(){try{Lt||null==lt.return||lt.return()}finally{if(Ht)throw Bt}}}}function l(nt,at,lt){return(at=_(at))in nt?Object.defineProperty(nt,at,{"value":lt,"enumerable":!0,"configurable":!0,"writable":!0}):nt[at]=lt,nt}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(nt,at,lt){var Rt=function(nt,at){for(;!{}.hasOwnProperty.call(nt,at)&&null!==(nt=c(nt)););return nt}(nt,at);if(Rt){var Bt=Object.getOwnPropertyDescriptor(Rt,at);return Bt.get?Bt.get.call(arguments.length<3?nt:lt):Bt.value}},u.apply(null,arguments)}function c(nt){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nt){return nt.__proto__||Object.getPrototypeOf(nt)},c(nt)}function h(nt,at){if("function"!=typeof at&&null!==at)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(at&&at.prototype,{"constructor":{"value":nt,"writable":!0,"configurable":!0}}),Object.defineProperty(nt,"prototype",{"writable":!1}),at&&v(nt,at)}function d(){try{var nt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(nt){}return(d=function(){return!!nt})()}function p(nt,at){if(at&&("object"==typeof at||"function"==typeof at))return at;if(void 0!==at)throw new TypeError("Derived constructors may only return object or undefined");return i(nt)}function f(){f=function(){return at};var nt,at={},lt=Object.prototype,Rt=lt.hasOwnProperty,Bt=Object.defineProperty||function(nt,at,lt){nt[at]=lt.value},Lt="function"==typeof Symbol?Symbol:{},Ht=Lt.iterator||"@@iterator",jt=Lt.asyncIterator||"@@asyncIterator",$t=Lt.toStringTag||"@@toStringTag";function u(nt,at,lt){return Object.defineProperty(nt,at,{"value":lt,"enumerable":!0,"configurable":!0,"writable":!0}),nt[at]}try{u({},"")}catch(nt){u=function(nt,at,lt){return nt[at]=lt}}function c(nt,at,lt,Rt){var Lt=at&&at.prototype instanceof m?at:m,Ht=Object.create(Lt.prototype),jt=new R(Rt||[]);return Bt(Ht,"_invoke",{"value":T(nt,lt,jt)}),Ht}function h(nt,at,lt){try{return{"type":"normal","arg":nt.call(at,lt)}}catch(nt){return{"type":"throw","arg":nt}}}at.wrap=c;var Kt="suspendedStart",te="suspendedYield",ne="executing",re="completed",ae={};function m(){}function _(){}function b(){}var oe={};u(oe,Ht,(function(){return this}));var se=Object.getPrototypeOf,le=se&&se(se(B([])));le&&le!==lt&&Rt.call(le,Ht)&&(oe=le);var ue=b.prototype=m.prototype=Object.create(oe);function w(nt){["next","throw","return"].forEach((function(at){u(nt,at,(function(nt){return this._invoke(at,nt)}))}))}function M(nt,at){function i(lt,Bt,Lt,Ht){var jt=h(nt[lt],nt,Bt);if("throw"!==jt.type){var $t=jt.arg,Kt=$t.value;return Kt&&"object"==typeof Kt&&Rt.call(Kt,"__await")?at.resolve(Kt.__await).then((function(nt){i("next",nt,Lt,Ht)}),(function(nt){i("throw",nt,Lt,Ht)})):at.resolve(Kt).then((function(nt){$t.value=nt,Lt($t)}),(function(nt){return i("throw",nt,Lt,Ht)}))}Ht(jt.arg)}var lt;Bt(this,"_invoke",{"value":function(nt,Rt){function r(){return new at((function(at,lt){i(nt,Rt,at,lt)}))}return lt=lt?lt.then(r,r):r()}})}function T(at,lt,Rt){var Bt=Kt;return function(Lt,Ht){if(Bt===ne)throw Error("Generator is already running");if(Bt===re){if("throw"===Lt)throw Ht;return{"value":nt,"done":!0}}for(Rt.method=Lt,Rt.arg=Ht;;){var jt=Rt.delegate;if(jt){var $t=C(jt,Rt);if($t){if($t===ae)continue;return $t}}if("next"===Rt.method)Rt.sent=Rt._sent=Rt.arg;else if("throw"===Rt.method){if(Bt===Kt)throw Bt=re,Rt.arg;Rt.dispatchException(Rt.arg)}else"return"===Rt.method&&Rt.abrupt("return",Rt.arg);Bt=ne;var oe=h(at,lt,Rt);if("normal"===oe.type){if(Bt=Rt.done?re:te,oe.arg===ae)continue;return{"value":oe.arg,"done":Rt.done}}"throw"===oe.type&&(Bt=re,Rt.method="throw",Rt.arg=oe.arg)}}}function C(at,lt){var Rt=lt.method,Bt=at.iterator[Rt];if(Bt===nt)return lt.delegate=null,"throw"===Rt&&at.iterator.return&&(lt.method="return",lt.arg=nt,C(at,lt),"throw"===lt.method)||"return"!==Rt&&(lt.method="throw",lt.arg=new TypeError("The iterator does not provide a '"+Rt+"' method")),ae;var Lt=h(Bt,at.iterator,lt.arg);if("throw"===Lt.type)return lt.method="throw",lt.arg=Lt.arg,lt.delegate=null,ae;var Ht=Lt.arg;return Ht?Ht.done?(lt[at.resultName]=Ht.value,lt.next=at.nextLoc,"return"!==lt.method&&(lt.method="next",lt.arg=nt),lt.delegate=null,ae):Ht:(lt.method="throw",lt.arg=new TypeError("iterator result is not an object"),lt.delegate=null,ae)}function E(nt){var at={"tryLoc":nt[0]};1 in nt&&(at.catchLoc=nt[1]),2 in nt&&(at.finallyLoc=nt[2],at.afterLoc=nt[3]),this.tryEntries.push(at)}function P(nt){var at=nt.completion||{};at.type="normal",delete at.arg,nt.completion=at}function R(nt){this.tryEntries=[{"tryLoc":"root"}],nt.forEach(E,this),this.reset(!0)}function B(at){if(at||""===at){var lt=at[Ht];if(lt)return lt.call(at);if("function"==typeof at.next)return at;if(!isNaN(at.length)){var Bt=-1,Lt=function i(){for(;++Bt<at.length;)if(Rt.call(at,Bt))return i.value=at[Bt],i.done=!1,i;return i.value=nt,i.done=!0,i};return Lt.next=Lt}}throw new TypeError(typeof at+" is not iterable")}return _.prototype=b,Bt(ue,"constructor",{"value":b,"configurable":!0}),Bt(b,"constructor",{"value":_,"configurable":!0}),_.displayName=u(b,$t,"GeneratorFunction"),at.isGeneratorFunction=function(nt){var at="function"==typeof nt&&nt.constructor;return!!at&&(at===_||"GeneratorFunction"===(at.displayName||at.name))},at.mark=function(nt){return Object.setPrototypeOf?Object.setPrototypeOf(nt,b):(nt.__proto__=b,u(nt,$t,"GeneratorFunction")),nt.prototype=Object.create(ue),nt},at.awrap=function(nt){return{"__await":nt}},w(M.prototype),u(M.prototype,jt,(function(){return this})),at.AsyncIterator=M,at.async=function(nt,lt,Rt,Bt,Lt){void 0===Lt&&(Lt=Promise);var Ht=new M(c(nt,lt,Rt,Bt),Lt);return at.isGeneratorFunction(lt)?Ht:Ht.next().then((function(nt){return nt.done?nt.value:Ht.next()}))},w(ue),u(ue,$t,"Generator"),u(ue,Ht,(function(){return this})),u(ue,"toString",(function(){return"[object Generator]"})),at.keys=function(nt){var at=Object(nt),lt=[];for(var Rt in at)lt.push(Rt);return lt.reverse(),function t(){for(;lt.length;){var nt=lt.pop();if(nt in at)return t.value=nt,t.done=!1,t}return t.done=!0,t}},at.values=B,R.prototype={"constructor":R,"reset":function(at){if(this.prev=0,this.next=0,this.sent=this._sent=nt,this.done=!1,this.delegate=null,this.method="next",this.arg=nt,this.tryEntries.forEach(P),!at)for(var lt in this)"t"===lt.charAt(0)&&Rt.call(this,lt)&&!isNaN(+lt.slice(1))&&(this[lt]=nt)},"stop":function(){this.done=!0;var nt=this.tryEntries[0].completion;if("throw"===nt.type)throw nt.arg;return this.rval},"dispatchException":function(at){if(this.done)throw at;var lt=this;function r(Rt,Bt){return Ht.type="throw",Ht.arg=at,lt.next=Rt,Bt&&(lt.method="next",lt.arg=nt),!!Bt}for(var Bt=this.tryEntries.length-1;Bt>=0;--Bt){var Lt=this.tryEntries[Bt],Ht=Lt.completion;if("root"===Lt.tryLoc)return r("end");if(Lt.tryLoc<=this.prev){var jt=Rt.call(Lt,"catchLoc"),$t=Rt.call(Lt,"finallyLoc");if(jt&&$t){if(this.prev<Lt.catchLoc)return r(Lt.catchLoc,!0);if(this.prev<Lt.finallyLoc)return r(Lt.finallyLoc)}else if(jt){if(this.prev<Lt.catchLoc)return r(Lt.catchLoc,!0)}else{if(!$t)throw Error("try statement without catch or finally");if(this.prev<Lt.finallyLoc)return r(Lt.finallyLoc)}}}},"abrupt":function(nt,at){for(var lt=this.tryEntries.length-1;lt>=0;--lt){var Bt=this.tryEntries[lt];if(Bt.tryLoc<=this.prev&&Rt.call(Bt,"finallyLoc")&&this.prev<Bt.finallyLoc){var Lt=Bt;break}}Lt&&("break"===nt||"continue"===nt)&&Lt.tryLoc<=at&&at<=Lt.finallyLoc&&(Lt=null);var Ht=Lt?Lt.completion:{};return Ht.type=nt,Ht.arg=at,Lt?(this.method="next",this.next=Lt.finallyLoc,ae):this.complete(Ht)},"complete":function(nt,at){if("throw"===nt.type)throw nt.arg;return"break"===nt.type||"continue"===nt.type?this.next=nt.arg:"return"===nt.type?(this.rval=this.arg=nt.arg,this.method="return",this.next="end"):"normal"===nt.type&&at&&(this.next=at),ae},"finish":function(nt){for(var at=this.tryEntries.length-1;at>=0;--at){var lt=this.tryEntries[at];if(lt.finallyLoc===nt)return this.complete(lt.completion,lt.afterLoc),P(lt),ae}},"catch":function(nt){for(var at=this.tryEntries.length-1;at>=0;--at){var lt=this.tryEntries[at];if(lt.tryLoc===nt){var Rt=lt.completion;if("throw"===Rt.type){var Bt=Rt.arg;P(lt)}return Bt}}throw Error("illegal catch attempt")},"delegateYield":function(at,lt,Rt){return this.delegate={"iterator":B(at),"resultName":lt,"nextLoc":Rt},"next"===this.method&&(this.arg=nt),ae}},at}function v(nt,at){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nt,at){return nt.__proto__=at,nt},v(nt,at)}function g(nt,at){return function(nt){if(Array.isArray(nt))return nt}(nt)||function(nt,at){var lt=null==nt?null:"undefined"!=typeof Symbol&&nt[Symbol.iterator]||nt["@@iterator"];if(null!=lt){var Rt,Bt,Lt,Ht,jt=[],$t=!0,Kt=!1;try{if(Lt=(lt=lt.call(nt)).next,0===at){if(Object(lt)!==lt)return;$t=!1}else for(;!($t=(Rt=Lt.call(lt)).done)&&(jt.push(Rt.value),jt.length!==at);$t=!0);}catch(nt){Kt=!0,Bt=nt}finally{try{if(!$t&&null!=lt.return&&(Ht=lt.return(),Object(Ht)!==Ht))return}finally{if(Kt)throw Bt}}return jt}}(nt,at)||x(nt,at)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(nt,at,lt,Rt){var Bt=u(c(1&Rt?nt.prototype:nt),at,lt);return 2&Rt&&"function"==typeof Bt?function(nt){return Bt.apply(lt,nt)}:Bt}function m(nt){return function(nt){if(Array.isArray(nt))return e(nt)}(nt)||function(nt){if("undefined"!=typeof Symbol&&null!=nt[Symbol.iterator]||null!=nt["@@iterator"])return Array.from(nt)}(nt)||x(nt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(nt){var at=function(nt,at){if("object"!=typeof nt||!nt)return nt;var lt=nt[Symbol.toPrimitive];if(void 0!==lt){var Rt=lt.call(nt,at||"default");if("object"!=typeof Rt)return Rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===at?String:Number)(nt)}(nt,"string");return"symbol"==typeof at?at:at+""}function b(nt){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(nt){return typeof nt}:function(nt){return nt&&"function"==typeof Symbol&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},b(nt)}function x(nt,at){if(nt){if("string"==typeof nt)return e(nt,at);var lt={}.toString.call(nt).slice(8,-1);return"Object"===lt&&nt.constructor&&(lt=nt.constructor.name),"Map"===lt||"Set"===lt?Array.from(nt):"Arguments"===lt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt)?e(nt,at):void 0}}var k=function(nt,at){return k=Object.setPrototypeOf||{"__proto__":[]}instanceof Array&&function(nt,at){nt.__proto__=at}||function(nt,at){for(var lt in at)Object.prototype.hasOwnProperty.call(at,lt)&&(nt[lt]=at[lt])},k(nt,at)};function S(nt,at){if("function"!=typeof at&&null!==at)throw new TypeError("Class extends value "+String(at)+" is not a constructor or null");function i(){this.constructor=nt}k(nt,at),nt.prototype=null===at?Object.create(at):(i.prototype=at.prototype,new i)}var A=function(){return A=Object.assign||function(nt){for(var at,lt=1,Rt=arguments.length;lt<Rt;lt++)for(var Bt in at=arguments[lt])Object.prototype.hasOwnProperty.call(at,Bt)&&(nt[Bt]=at[Bt]);return nt},A.apply(this,arguments)};function w(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt}function M(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))}function T(nt,at){var lt,Rt,Bt,Lt,Ht={"label":0,"sent":function(){if(1&Bt[0])throw Bt[1];return Bt[1]},"trys":[],"ops":[]};return Lt={"next":s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(Lt[Symbol.iterator]=function(){return this}),Lt;function s(Lt){return function(jt){return function(Lt){if(lt)throw new TypeError("Generator is already executing.");for(;Ht;)try{if(lt=1,Rt&&(Bt=2&Lt[0]?Rt.return:Lt[0]?Rt.throw||((Bt=Rt.return)&&Bt.call(Rt),0):Rt.next)&&!(Bt=Bt.call(Rt,Lt[1])).done)return Bt;switch(Rt=0,Bt&&(Lt=[2&Lt[0],Bt.value]),Lt[0]){case 0:case 1:Bt=Lt;break;case 4:return Ht.label++,{"value":Lt[1],"done":!1};case 5:Ht.label++,Rt=Lt[1],Lt=[0];continue;case 7:Lt=Ht.ops.pop(),Ht.trys.pop();continue;default:if(!((Bt=(Bt=Ht.trys).length>0&&Bt[Bt.length-1])||6!==Lt[0]&&2!==Lt[0])){Ht=0;continue}if(3===Lt[0]&&(!Bt||Lt[1]>Bt[0]&&Lt[1]<Bt[3])){Ht.label=Lt[1];break}if(6===Lt[0]&&Ht.label<Bt[1]){Ht.label=Bt[1],Bt=Lt;break}if(Bt&&Ht.label<Bt[2]){Ht.label=Bt[2],Ht.ops.push(Lt);break}Bt[2]&&Ht.ops.pop(),Ht.trys.pop();continue}Lt=at.call(nt,Ht)}catch(nt){Lt=[6,nt],Rt=0}finally{lt=Bt=0}if(5&Lt[0])throw Lt[1];return{"value":Lt[0]?Lt[1]:void 0,"done":!0}}([Lt,jt])}}}function C(nt){var at="function"==typeof Symbol&&Symbol.iterator,lt=at&&nt[at],Rt=0;if(lt)return lt.call(nt);if(nt&&"number"==typeof nt.length)return{"next":function(){return nt&&Rt>=nt.length&&(nt=void 0),{"value":nt&&nt[Rt++],"done":!nt}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(nt,at){var lt="function"==typeof Symbol&&nt[Symbol.iterator];if(!lt)return nt;var Rt,Bt,Lt=lt.call(nt),Ht=[];try{for(;(void 0===at||at-- >0)&&!(Rt=Lt.next()).done;)Ht.push(Rt.value)}catch(nt){Bt={"error":nt}}finally{try{Rt&&!Rt.done&&(lt=Lt.return)&&lt.call(Lt)}finally{if(Bt)throw Bt.error}}return Ht}function P(nt,at,lt){if(lt||2===arguments.length)for(var Rt,Bt=0,Lt=at.length;Bt<Lt;Bt++)!Rt&&Bt in at||(Rt||(Rt=Array.prototype.slice.call(at,0,Bt)),Rt[Bt]=at[Bt]);return nt.concat(Rt||Array.prototype.slice.call(at))}var at,lt,I=function(nt){return nt};function L(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}nt.RenderModeEnum=void 0,(at=nt.RenderModeEnum||(nt.RenderModeEnum={}))["desktop-browser"]="desktop-browser",at["mobile-browser"]="mobile-browser",at.node="node",at.worker="worker",at.miniApp="miniApp",at.wx="wx",at.tt="tt",at.harmony="harmony",at["desktop-miniApp"]="desktop-miniApp",at.lynx="lynx",function(nt){nt.cartesianAxis="cartesianAxis",nt.cartesianBandAxis="cartesianAxis-band",nt.cartesianLinearAxis="cartesianAxis-linear",nt.cartesianTimeAxis="cartesianAxis-time",nt.cartesianLogAxis="cartesianAxis-log",nt.cartesianSymlogAxis="cartesianAxis-symlog",nt.polarAxis="polarAxis",nt.polarBandAxis="polarAxis-band",nt.polarLinearAxis="polarAxis-linear",nt.crosshair="crosshair",nt.cartesianCrosshair="cartesianCrosshair",nt.polarCrosshair="polarCrosshair",nt.dataZoom="dataZoom",nt.geoCoordinate="geoCoordinate",nt.indicator="indicator",nt.discreteLegend="discreteLegend",nt.continuousLegend="continuousLegend",nt.colorLegend="colorLegend",nt.sizeLegend="sizeLegend",nt.mapLabel="mapLabel",nt.markLine="markLine",nt.markArea="markArea",nt.markPoint="markPoint",nt.polarMarkLine="polarMarkLine",nt.polarMarkArea="polarMarkArea",nt.polarMarkPoint="polarMarkPoint",nt.geoMarkPoint="geoMarkPoint",nt.tooltip="tooltip",nt.title="title",nt.player="player",nt.scrollBar="scrollBar",nt.label="label",nt.totalLabel="totalLabel",nt.brush="brush",nt.poptip="poptip",nt.customMark="customMark"}(lt||(lt={}));var Rt={"exports":{}};!function(nt){var at=Object.prototype.hasOwnProperty,lt="~";function n(){}function r(nt,at,lt){this.fn=nt,this.context=at,this.once=lt||!1}function a(nt,at,Rt,Bt,Lt){if("function"!=typeof Rt)throw new TypeError("The listener must be a function");var Ht=new r(Rt,Bt||nt,Lt),jt=lt?lt+at:at;return nt._events[jt]?nt._events[jt].fn?nt._events[jt]=[nt._events[jt],Ht]:nt._events[jt].push(Ht):(nt._events[jt]=Ht,nt._eventsCount++),nt}function o(nt,at){0==--nt._eventsCount?nt._events=new n:delete nt._events[at]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(lt=!1)),s.prototype.eventNames=function(){var nt,Rt,Bt=[];if(0===this._eventsCount)return Bt;for(Rt in nt=this._events)at.call(nt,Rt)&&Bt.push(lt?Rt.slice(1):Rt);return Object.getOwnPropertySymbols?Bt.concat(Object.getOwnPropertySymbols(nt)):Bt},s.prototype.listeners=function(nt){var at=lt?lt+nt:nt,Rt=this._events[at];if(!Rt)return[];if(Rt.fn)return[Rt.fn];for(var Bt=0,Lt=Rt.length,Ht=new Array(Lt);Bt<Lt;Bt++)Ht[Bt]=Rt[Bt].fn;return Ht},s.prototype.listenerCount=function(nt){var at=lt?lt+nt:nt,Rt=this._events[at];return Rt?Rt.fn?1:Rt.length:0},s.prototype.emit=function(nt,at,Rt,Bt,Lt,Ht){var jt=lt?lt+nt:nt;if(!this._events[jt])return!1;var $t,Kt,te=this._events[jt],ne=arguments.length;if(te.fn){switch(te.once&&this.removeListener(nt,te.fn,void 0,!0),ne){case 1:return te.fn.call(te.context),!0;case 2:return te.fn.call(te.context,at),!0;case 3:return te.fn.call(te.context,at,Rt),!0;case 4:return te.fn.call(te.context,at,Rt,Bt),!0;case 5:return te.fn.call(te.context,at,Rt,Bt,Lt),!0;case 6:return te.fn.call(te.context,at,Rt,Bt,Lt,Ht),!0}for(Kt=1,$t=new Array(ne-1);Kt<ne;Kt++)$t[Kt-1]=arguments[Kt];te.fn.apply(te.context,$t)}else{var re,ae=te.length;for(Kt=0;Kt<ae;Kt++)switch(te[Kt].once&&this.removeListener(nt,te[Kt].fn,void 0,!0),ne){case 1:te[Kt].fn.call(te[Kt].context);break;case 2:te[Kt].fn.call(te[Kt].context,at);break;case 3:te[Kt].fn.call(te[Kt].context,at,Rt);break;case 4:te[Kt].fn.call(te[Kt].context,at,Rt,Bt);break;default:if(!$t)for(re=1,$t=new Array(ne-1);re<ne;re++)$t[re-1]=arguments[re];te[Kt].fn.apply(te[Kt].context,$t)}}return!0},s.prototype.on=function(nt,at,lt){return a(this,nt,at,lt,!1)},s.prototype.once=function(nt,at,lt){return a(this,nt,at,lt,!0)},s.prototype.removeListener=function(nt,at,Rt,Bt){var Lt=lt?lt+nt:nt;if(!this._events[Lt])return this;if(!at)return o(this,Lt),this;var Ht=this._events[Lt];if(Ht.fn)Ht.fn!==at||Bt&&!Ht.once||Rt&&Ht.context!==Rt||o(this,Lt);else{for(var jt=0,$t=[],Kt=Ht.length;jt<Kt;jt++)(Ht[jt].fn!==at||Bt&&!Ht[jt].once||Rt&&Ht[jt].context!==Rt)&&$t.push(Ht[jt]);$t.length?this._events[Lt]=1===$t.length?$t[0]:$t:o(this,Lt)}return this},s.prototype.removeAllListeners=function(nt){var at;return nt?(at=lt?lt+nt:nt,this._events[at]&&o(this,at)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=lt,s.EventEmitter=s,nt.exports=s}(Rt);var Bt=L(Rt.exports),F=function(nt,at){return Object.prototype.toString.call(nt)==="[object ".concat(at,"]")},z=function(nt){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"boolean"==typeof nt:!0===nt||!1===nt||F(nt,"Boolean")},H=function(nt){return"function"==typeof nt},j=function(nt){return null==nt},N=function(nt){return null!=nt},V=function(nt){var at=b(nt);return null!==nt&&"object"===at||"function"===at},G=function(nt){return"object"==b(nt)&&null!==nt},W=function(nt){if(!G(nt)||!F(nt,"Object"))return!1;if(null===Object.getPrototypeOf(nt))return!0;for(var at=nt;null!==Object.getPrototypeOf(at);)at=Object.getPrototypeOf(at);return Object.getPrototypeOf(nt)===at},U=function(nt){return void 0===nt},Y=function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=b(nt);return at?"string"===lt:"string"===lt||F(nt,"String")},X=function(nt){return Array.isArray?Array.isArray(nt):F(nt,"Array")},K=function(nt){return null!==nt&&"function"!=typeof nt&&Number.isFinite(nt.length)},q=function(nt){return F(nt,"Date")},Z=function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=b(nt);return at?"number"===lt:"number"===lt||F(nt,"Number")},J=function(nt){return"string"==typeof nt&&!isNaN(Number(nt))&&!isNaN(parseFloat(nt))},Q=function(nt){return Z(nt)&&Number.isFinite(nt)},$=function(nt){return new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(nt)},et=function(nt){return new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(nt)},it=function(nt){return{}.toString.call(nt).replace(/^\[object /,"").replace(/]$/,"")},Lt=Object.prototype,rt=function(nt){var at=nt&&nt.constructor;return nt===("function"==typeof at&&at.prototype||Lt)},Ht=Object.prototype.hasOwnProperty;function ot(nt){if(j(nt))return!0;if(K(nt))return!nt.length;var at=it(nt);if("Map"===at||"Set"===at)return!nt.size;if(rt(nt))return!Object.keys(nt).length;for(var lt in nt)if(Ht.call(nt,lt))return!1;return!0}var st=function(nt,at,lt){for(var Rt=Y(at)?at.split("."):at,Bt=0;Bt<Rt.length;Bt++)nt=nt?nt[Rt[Bt]]:void 0;return void 0===nt?lt:nt},jt=Object.prototype.hasOwnProperty,ut=function(nt,at){return null!=nt&&jt.call(nt,at)};function ct(nt,at,lt){var Rt;if(!N(nt)||"object"!=b(nt)||at&&at(nt))return nt;var Bt=X(nt),Lt=nt.length;Rt=Bt?new Array(Lt):"object"==b(nt)?{}:z(nt)||Z(nt)||Y(nt)?nt:q(nt)?new Date(+nt):void 0;var Ht=Bt?void 0:Object.keys(Object(nt)),jt=-1;if(Rt)for(;++jt<(Ht||nt).length;){var $t=Ht?Ht[jt]:jt,Kt=nt[$t];lt&&lt.includes($t.toString())?Rt[$t]=Kt:Rt[$t]=ct(Kt,at,lt)}return Rt}function ht(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(at){if(nt===at)return;if(N(at)&&"object"==b(at)){var Bt=Object(at),Lt=[];for(var Ht in Bt)Lt.push(Ht);for(var jt=Lt.length,$t=-1;jt--;){var Kt=Lt[++$t];!N(Bt[Kt])||"object"!=b(Bt[Kt])||Rt&&X(nt[Kt])?pt(nt,Kt,Bt[Kt]):dt(nt,at,Kt,lt,Rt)}}}}function dt(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Bt=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Lt=nt[lt],Ht=at[lt],jt=at[lt],$t=!0;if(X(Ht)){if(Rt)jt=[];else if(X(Lt))jt=Lt;else if(K(Lt)){jt=new Array(Lt.length);for(var Kt=-1,te=Lt.length;++Kt<te;)jt[Kt]=Lt[Kt]}}else W(Ht)?(jt=null!=Lt?Lt:{},"function"!=typeof Lt&&"object"==b(Lt)||(jt={})):$t=!1;$t&&ht(jt,Ht,Rt,Bt),pt(nt,lt,jt)}function pt(nt,at,lt){(void 0!==lt&&!function(nt,at){return nt===at||Number.isNaN(nt)&&Number.isNaN(at)}(nt[at],lt)||void 0===lt&&!(at in nt))&&(nt[at]=lt)}function ft(nt){for(var at=-1,lt=arguments.length<=1?0:arguments.length-1;++at<lt;)ht(nt,at+1<1||arguments.length<=at+1?void 0:arguments[at+1],!0);return nt}function vt(nt,at){if(!nt||!W(nt))return nt;var lt={};return Object.keys(nt).forEach((function(Rt){var Bt=nt[Rt],Lt=!1;at.forEach((function(nt){(Y(nt)&&nt===Rt||nt instanceof RegExp&&Rt.match(nt))&&(Lt=!0)})),Lt||(lt[Rt]=Bt)})),lt}function gt(nt){return Object.prototype.toString.call(nt)}function yt(nt){return Object.keys(nt)}function mt(nt,at,lt){if(nt===at)return!0;if(b(nt)!=b(at))return!1;if(null==nt||null==at)return!1;if(Number.isNaN(nt)&&Number.isNaN(at))return!0;if(gt(nt)!==gt(at))return!1;if(H(nt))return!!(null==lt?void 0:lt.skipFunction);if("object"!=b(nt))return!1;if(X(nt)){if(nt.length!==at.length)return!1;for(var Rt=nt.length-1;Rt>=0;Rt--)if(!mt(nt[Rt],at[Rt],lt))return!1;return!0}if(!W(nt))return!1;var Bt=yt(nt),Lt=yt(at);if(Bt.length!==Lt.length)return!1;Bt.sort(),Lt.sort();for(var Ht=Bt.length-1;Ht>=0;Ht--)if(Bt[Ht]!=Lt[Ht])return!1;for(var jt=Bt.length-1;jt>=0;jt--){var $t=Bt[jt];if(!mt(nt[$t],at[$t],lt))return!1}return!0}function _t(nt,at,lt){for(var Rt=function(nt){if(!nt)return[];if(Object.keys)return Object.keys(nt);var at=[];for(var lt in nt)nt.hasOwnProperty(lt)&&at.push(lt);return at}(at),Bt=0;Bt<Rt.length;Bt++){var Lt=Rt[Bt];(lt?null!=at[Lt]:null==nt[Lt])&&(nt[Lt]=at[Lt])}return nt}function bt(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(nt="prototype"in nt?nt.prototype:nt,at="prototype"in at?at.prototype:at,Object.getOwnPropertyNames)for(var Rt=Object.getOwnPropertyNames(at),Bt=0;Bt<Rt.length;Bt++){var Lt=Rt[Bt];"constructor"!==Lt&&(lt?null!=at[Lt]:null==nt[Lt])&&(nt[Lt]=at[Lt])}else _t(nt,at,lt)}function xt(nt){return N(nt)?X(nt)?nt:[nt]:[]}function kt(nt){if(K(nt))return nt[nt.length-1]}var St=function(nt,at){var lt;if(0!==nt.length){for(var Rt=nt[0],Bt=1;Bt<nt.length;Bt++){var Lt=nt[Bt];(null!==(lt=null==at?void 0:at(Lt,Rt))&&void 0!==lt?lt:Lt-Rt)>0&&(Rt=Lt)}return Rt}},At=function(nt,at){var lt;if(0!==nt.length){for(var Rt=nt[0],Bt=1;Bt<nt.length;Bt++){var Lt=nt[Bt];(null!==(lt=null==at?void 0:at(Lt,Rt))&&void 0!==lt?lt:Lt-Rt)<0&&(Rt=Lt)}return Rt}};function wt(nt,at){if(!X(nt)||!X(at))return!1;if(nt.length!==at.length)return!1;for(var lt=0;lt<nt.length;lt++)if(nt[lt]!==at[lt])return!1;return!0}function Mt(nt){for(var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random,Bt=nt.length;Bt;)at=Math.floor(Rt()*Bt),lt=nt[--Bt],nt[Bt]=nt[at],nt[at]=lt;return nt}function Tt(nt){if(!X(nt))return[nt];var at,lt=[],Rt=s(nt);try{for(Rt.s();!(at=Rt.n()).done;){var Bt=at.value;lt.push.apply(lt,m(Tt(Bt)))}}catch(nt){Rt.e(nt)}finally{Rt.f()}return lt}function Ct(nt,at,lt){N(at)||(at=nt,nt=0),N(lt)||(lt=1);for(var Rt=-1,Bt=0|Math.max(0,Math.ceil((at-nt)/lt)),Lt=new Array(Bt);++Rt<Bt;)Lt[Rt]=nt+Rt*lt;return Lt}function Et(nt,at){return nt<at?-1:nt>at?1:nt>=at?0:NaN}function Pt(nt){return Number(nt)}var $t,Kt="undefined"!=typeof console;function It(nt,at,lt){var Rt=[at].concat([].slice.call(lt));Kt&&console[nt].apply(console,Rt)}!function(nt){nt[nt.None=0]="None",nt[nt.Error=1]="Error",nt[nt.Warn=2]="Warn",nt[nt.Info=3]="Info",nt[nt.Debug=4]="Debug"}($t||($t={}));var te=function(){function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t.None,at=arguments.length>1?arguments[1]:void 0;r(this,t),this._onErrorHandler=[],this._level=nt,this._method=at}return o(t,[{"key":"addErrorHandler","value":function(nt){this._onErrorHandler.find((function(at){return at===nt}))||this._onErrorHandler.push(nt)}},{"key":"removeErrorHandler","value":function(nt){var at=this._onErrorHandler.findIndex((function(at){return at===nt}));at<0||this._onErrorHandler.splice(at,1)}},{"key":"callErrorHandler","value":function(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];this._onErrorHandler.forEach((function(nt){return nt.apply(void 0,at)}))}},{"key":"canLogInfo","value":function(){return this._level>=$t.Info}},{"key":"canLogDebug","value":function(){return this._level>=$t.Debug}},{"key":"canLogError","value":function(){return this._level>=$t.Error}},{"key":"canLogWarn","value":function(){return this._level>=$t.Warn}},{"key":"level","value":function(nt){return arguments.length?(this._level=+nt,this):this._level}},{"key":"error","value":function(){for(var nt,at=arguments.length,lt=new Array(at),Rt=0;Rt<at;Rt++)lt[Rt]=arguments[Rt];return this._level>=$t.Error&&(this._onErrorHandler.length?this.callErrorHandler.apply(this,lt):It(null!==(nt=this._method)&&void 0!==nt?nt:"error","ERROR",lt)),this}},{"key":"warn","value":function(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this._level>=$t.Warn&&It(this._method||"warn","WARN",at),this}},{"key":"info","value":function(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this._level>=$t.Info&&It(this._method||"log","INFO",at),this}},{"key":"debug","value":function(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this._level>=$t.Debug&&It(this._method||"log","DEBUG",at),this}}],[{"key":"getInstance","value":function(nt,at){return t._instance&&Z(nt)?t._instance.level(nt):t._instance||(t._instance=new t(nt,at)),t._instance}},{"key":"setInstance","value":function(nt){return t._instance=nt}},{"key":"setInstanceLevel","value":function(nt){t._instance?t._instance.level(nt):t._instance=new t(nt)}},{"key":"clearInstance","value":function(){t._instance=null}}])}();function Dt(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3?arguments[3]:void 0;for(j(Rt)&&(Rt=nt.length);lt<Rt;){var Bt=lt+Rt>>>1;Et(nt[Bt],at)>0?Rt=Bt:lt=Bt+1}return lt}te._instance=null;var Ot=function(nt,at){return Ft(0,nt.length,(function(lt){return at(nt[lt])}))},Ft=function(nt,at,lt){for(var Rt=nt,Bt=at;Rt<Bt;){var Lt=Math.floor((Rt+Bt)/2);lt(Lt)>=0?Bt=Lt:Rt=Lt+1}return Rt},zt=function(nt,at){var lt=nt;return!0!==at&&(lt=nt.sort(Et)),function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pt,Rt=nt.length;if(Rt){if(at<=0||Rt<2)return lt(nt[0],0,nt);if(at>=1)return lt(nt[Rt-1],Rt-1,nt);var Bt=(Rt-1)*at,Lt=Math.floor(Bt),Ht=lt(nt[Lt],Lt,nt);return Ht+(lt(nt[Lt+1],Lt+1,nt)-Ht)*(Bt-Lt)}}(lt,.5)},ne=1e-10,re=1e-10;function Nt(nt,at){var lt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ne,Rt=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:re)*Math.max(nt,at);return Math.abs(nt-at)<=Math.max(lt,Rt)}function Vt(nt,at,lt,Rt){return nt>at&&!Nt(nt,at,lt,Rt)}function Gt(nt,at,lt,Rt){return nt<at&&!Nt(nt,at,lt,Rt)}var Wt=function(nt){var at=null,lt=null;return function(){for(var Rt=arguments.length,Bt=new Array(Rt),Lt=0;Lt<Rt;Lt++)Bt[Lt]=arguments[Lt];return at&&Bt.every((function(nt,lt){return nt===at[lt]}))||(at=Bt,lt=nt.apply(void 0,Bt)),lt}},Ut=function(nt,at,lt){return nt<at?at:nt>lt?lt:nt},Yt=function(nt,at,lt){var Rt=g(nt,2),Bt=Rt[0],Lt=Rt[1];Lt<Bt&&(Bt=nt[1],Lt=nt[0]);var Ht=Lt-Bt;return Ht>=lt-at?[at,lt]:[Bt=Math.min(Math.max(Bt,at),lt-Ht),Bt+Ht]};function Xt(nt,at){var lt;return nt>at&&(lt=nt,nt=at,at=lt),function(lt){return Math.max(nt,Math.min(at,lt))}}var ae=!1;try{ae="function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame}catch(nt){ae=!1}function qt(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt=0,te=!1,ne=!1,re=!0,oe=!at&&0!==at&&ae;if("function"!=typeof nt)throw new TypeError("Expected a function");function f(at){var lt=Rt,Lt=Bt;return Rt=Bt=void 0,Kt=at,Ht=nt.apply(Lt,lt)}function v(nt,at){return oe?(cancelAnimationFrame(jt),requestAnimationFrame(nt)):setTimeout(nt,at)}function g(nt){var lt=nt-$t;return void 0===$t||lt>=at||lt<0||ne&&nt-Kt>=Lt}function y(){var nt=Date.now();if(g(nt))return m(nt);jt=v(y,function(nt){var lt=nt-Kt,Rt=at-(nt-$t);return ne?Math.min(Rt,Lt-lt):Rt}(nt))}function m(nt){return jt=void 0,re&&Rt?f(nt):(Rt=Bt=void 0,Ht)}function _(){for(var nt=Date.now(),lt=g(nt),Lt=arguments.length,re=new Array(Lt),ae=0;ae<Lt;ae++)re[ae]=arguments[ae];if(Rt=re,Bt=this,$t=nt,lt){if(void 0===jt)return function(nt){return Kt=nt,jt=v(y,at),te?f(nt):Ht}($t);if(ne)return jt=v(y,at),f($t)}return void 0===jt&&(jt=v(y,at)),Ht}return at=+at||0,V(lt)&&(te=!!lt.leading,(ne="maxWait"in lt)&&(Lt=Math.max(Q(lt.maxWait)?lt.maxWait:0,at)),re="trailing"in lt?!!lt.trailing:re),_.cancel=function(){void 0!==jt&&function(nt){if(oe)return cancelAnimationFrame(nt);clearTimeout(nt)}(jt),Kt=0,Rt=$t=Bt=jt=void 0},_.flush=function(){return void 0===jt?Ht:m(Date.now())},_.pending=function(){return void 0!==jt},_}function Zt(nt,at,lt){var Rt=!0,Bt=!0;if("function"!=typeof nt)throw new TypeError("Expected a function");return V(lt)&&(Rt="leading"in lt?!!lt.leading:Rt,Bt="trailing"in lt?!!lt.trailing:Bt),qt(nt,at,{"leading":Rt,"trailing":Bt,"maxWait":at})}function Jt(nt,at){return function(lt){return nt*(1-lt)+at*lt}}function Qt(nt,at){return function(lt){return Math.round(nt*(1-lt)+at*lt)}}ae=!1;var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,se=new RegExp(oe.source,"g");function ee(nt){if(Q(nt))return nt;var at=+nt;return Q(at)?at:0}function ie(nt){return parseFloat("0."+Math.sin(nt).toString().substring(6))}var le=1e-12,ue=Math.PI,ce=ue/2,he=2*ue,de=2*Math.PI,fe=Math.abs,pe=Math.atan2,ve=Math.cos,Ae=Math.max,we=Math.min,Ce=Math.sin,je=Math.sqrt,Ne=Math.pow;function ge(nt){return nt>=1?ce:nt<=-1?-ce:Math.asin(nt)}function ye(nt,at,lt,Rt,Bt){var Lt=lt,Ht=Rt;return"number"==typeof nt&&"number"==typeof lt&&(Lt=(1-Bt)*nt+Bt*lt),"number"==typeof at&&"number"==typeof Rt&&(Ht=(1-Bt)*at+Bt*Rt),{"x":Lt,"y":Ht}}function me(nt,at){return nt[0]*at[1]-nt[1]*at[0]}function _e(nt,at){for(var lt=0,Rt=0;Rt<nt.length;++Rt)lt+=nt[Rt]*at[Rt];return lt}function be(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Math.round(nt*at)/at}function xe(nt){var at=nt.toString().split(/[eE]/),lt=(at[0].split(".")[1]||"").length-(+at[1]||0);return lt>0?lt:0}function ke(nt,at){return be(nt+at,Math.pow(10,Math.max(xe(nt),xe(at))))}function Se(nt,at){return be(nt-at,Math.pow(10,Math.max(xe(nt),xe(at))))}var Ve=function(){function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2?arguments[2]:void 0,Rt=arguments.length>3?arguments[3]:void 0;r(this,t),this.x=0,this.y=0,this.x=nt,this.y=at,this.x1=lt,this.y1=Rt}return o(t,[{"key":"clone","value":function(){return new t(this.x,this.y)}},{"key":"copyFrom","value":function(nt){return this.x=nt.x,this.y=nt.y,this.x1=nt.x1,this.y1=nt.y1,this.defined=nt.defined,this.context=nt.context,this}},{"key":"set","value":function(nt,at){return this.x=nt,this.y=at,this}},{"key":"add","value":function(nt){return Z(nt)?(this.x+=nt,void(this.y+=nt)):(this.x+=nt.x,this.y+=nt.y,this)}},{"key":"sub","value":function(nt){return Z(nt)?(this.x-=nt,void(this.y-=nt)):(this.x-=nt.x,this.y-=nt.y,this)}},{"key":"multi","value":function(nt){throw new Error("")}},{"key":"div","value":function(nt){throw new Error("")}}])}(),Ge=o((function t(){r(this,t)}),null,[{"key":"distancePP","value":function(nt,at){return je(Ne(nt.x-at.x,2)+Ne(nt.y-at.y,2))}},{"key":"distanceNN","value":function(nt,at,lt,Rt){return je(Ne(nt-lt,2)+Ne(at-Rt,2))}},{"key":"distancePN","value":function(nt,at,lt){return je(Ne(at-nt.x,2)+Ne(lt-nt.y,2))}},{"key":"pointAtPP","value":function(nt,at,lt){return new Ve((at.x-nt.x)*lt+nt.x,(at.y-nt.y)*lt+nt.y)}}]);function Me(nt){return nt*(Math.PI/180)}function Te(nt){return 180*nt/Math.PI}var ti,Ee=function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(nt<0)for(;nt<-he;)nt+=he;else if(nt>0)for(;nt>he;)nt-=he;return nt};function Pe(nt,at,lt){return at?{"x":nt.x+at*Math.cos(lt),"y":nt.y+at*Math.sin(lt)}:{"x":nt.x,"y":nt.y}}function Re(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"x":0,"y":0},lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI,Bt=nt.x,Lt=nt.y,Ht=Bt-at.x,jt=Lt-at.y,$t=Math.sqrt(Ht*Ht+jt*jt);if(0===$t)return{"radius":0,"angle":0};Ht/=$t,jt/=$t;var Kt=Math.atan2(jt,Ht);if(Kt<lt)for(;Kt<=lt;)Kt+=2*Math.PI;if(Kt>Rt)for(;Kt>=Rt;)Kt-=2*Math.PI;return{"radius":$t,"angle":Kt}}function Be(nt,at){return Math.atan2(at.y-nt.y,at.x-nt.x)}function Ie(nt){for(;nt<0;)nt+=2*Math.PI;for(;nt>=2*Math.PI;)nt-=2*Math.PI;return nt}function Le(nt,at,lt,Rt){var Bt=at.x,Lt=at.y,Ht=function(nt,at){var lt=Math.abs(at-nt);if(lt>=2*Math.PI||2*Math.PI-lt<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];for(var Rt=Ie(Math.min(nt,at)),Bt=Rt+lt,Lt=[Rt,Bt],Ht=Math.floor(Rt/Math.PI)*Math.PI/2;Ht<Bt;)Ht>Rt&&Lt.push(Ht),Ht+=Math.PI/2;return Lt}(lt,Rt),jt=nt.width,$t=nt.height,Kt=[];return Ht.forEach((function(nt){var at=Math.sin(nt),lt=Math.cos(nt);1===at?Kt.push($t-Lt):-1===at?Kt.push(Lt):1===lt?Kt.push(jt-Bt):-1===lt?Kt.push(Bt):(at>0?Kt.push(Math.abs(($t-Lt)/at)):Kt.push(Math.abs(Lt/at)),lt>0?Kt.push(Math.abs((jt-Bt)/lt)):Kt.push(Math.abs(Bt/lt)))})),Math.min.apply(null,Kt)}function De(nt){return(nt=Ie(nt))>0&&nt<=Math.PI/2?2:nt>Math.PI/2&&nt<=Math.PI?3:nt>Math.PI&&nt<=3*Math.PI/2?4:1}function Oe(nt,at,lt){nt[0]=at[0]-lt[0],nt[1]=at[1]-lt[1]}function Fe(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=nt[0],Kt=at[0],te=lt[0],ne=Rt[0];return Kt<$t&&($t=(Bt=[Kt,$t])[0],Kt=Bt[1]),ne<te&&(ne=(Lt=[te,ne])[0],te=Lt[1]),!(Kt<te||ne<$t||($t=nt[1],Kt=at[1],te=lt[1],ne=Rt[1],Kt<$t&&(Ht=[Kt,$t],$t=Ht[0],Kt=Ht[1]),ne<te&&(jt=[te,ne],ne=jt[0],te=jt[1]),Kt<te||ne<$t))}function ze(nt,at,lt,Rt){if(!Fe(nt,at,lt,Rt))return!1;var Bt=[0,0],Lt=[0,0],Ht=[0,0];if(Oe(Bt,at,nt),Oe(Lt,Rt,lt),function(nt,at){return fe(nt[0]-at[0])+fe(nt[1]-at[1])<1e-12}(Bt,Lt))return!0;Oe(Ht,lt,nt);var jt=me(Ht,Lt)/me(Bt,Lt);return jt>=0&&jt<=1&&[nt[0]+Bt[0]*jt,nt[1]+Bt[1]*jt]}function He(nt,at,lt){if(null===nt)return at;if(null===at)return nt;var Rt=We(nt,at,lt),Bt=Rt.x11,Lt=Rt.x12,Ht=Rt.y11,jt=Rt.y12,$t=Rt.x21,Kt=Rt.x22,te=Rt.y21,ne=Rt.y22;return Bt>=Kt||Lt<=$t||Ht>=ne||jt<=te?{"x1":0,"y1":0,"x2":0,"y2":0}:{"x1":Math.max(Bt,$t),"y1":Math.max(Ht,te),"x2":Math.min(Lt,Kt),"y2":Math.min(jt,ne)}}!function(nt){nt[nt.NONE=0]="NONE",nt[nt.BBOX1=1]="BBOX1",nt[nt.BBOX2=2]="BBOX2"}(ti||(ti={}));var li,hi,di,fi,We=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=nt.x1,$t=nt.x2,Kt=nt.y1,te=nt.y2,ne=at.x1,re=at.x2,ae=at.y1,oe=at.y2;return lt&&(jt>$t&&(jt=(Rt=[$t,jt])[0],$t=Rt[1]),Kt>te&&(Kt=(Bt=[te,Kt])[0],te=Bt[1]),ne>re&&(ne=(Lt=[re,ne])[0],re=Lt[1]),ae>oe&&(ae=(Ht=[oe,ae])[0],oe=Ht[1])),{"x11":jt,"x12":$t,"y11":Kt,"y12":te,"x21":ne,"x22":re,"y21":ae,"y22":oe}};function Ue(nt,at,lt){if(!nt||!at)return ti.NONE;var Rt=We(nt,at,lt),Bt=Rt.x11,Lt=Rt.x12,Ht=Rt.y11,jt=Rt.y12,$t=Rt.x21,Kt=Rt.x22,te=Rt.y21,ne=Rt.y22;return Bt>$t&&Lt<Kt&&Ht>te&&jt<ne?ti.BBOX1:$t>Bt&&Kt<Lt&&te>Ht&&ne<jt?ti.BBOX2:ti.NONE}function Ye(nt,at,lt){if(nt&&at){if(!lt)return!(nt.x1>at.x2||nt.x2<at.x1||nt.y1>at.y2||nt.y2<at.y1);var Rt=We(nt,at,!0),Bt=Rt.x11,Lt=Rt.x12,Ht=Rt.y11,jt=Rt.y12,$t=Rt.x21,Kt=Rt.x22,te=Rt.y21,ne=Rt.y22;return!(Bt>Kt||Lt<$t||Ht>ne||jt<te)}return!0}function Xe(nt,at,lt){var Rt,Bt;if(!at)return!0;if(!lt)return nt.x>=at.x1&&nt.x<=at.x2&&nt.y>=at.y1&&nt.y<=at.y2;var Lt=at.x1,Ht=at.x2,jt=at.y1,$t=at.y2;return Lt>Ht&&(Lt=(Rt=[Ht,Lt])[0],Ht=Rt[1]),jt>$t&&(jt=(Bt=[$t,jt])[0],$t=Bt[1]),nt.x>=Lt&&nt.x<=Ht&&nt.y>=jt&&nt.y<=$t}function Ke(nt,at){return Math.abs(at[0]*nt[0]+at[1]*nt[1])}function qe(nt,at){var lt=nt.x,Rt=nt.y,Bt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{"x":0,"y":0};return{"x":(lt-Bt.x)*Math.cos(at)-(Rt-Bt.y)*Math.sin(at)+Bt.x,"y":(lt-Bt.x)*Math.sin(at)+(Rt-Bt.y)*Math.cos(at)+Bt.y}}function Ze(nt){return{"x":(nt.x1+nt.x2)/2,"y":(nt.y1+nt.y2)/2}}function Je(nt,at){var lt=at?Me(nt.angle):nt.angle,Rt=Ze(nt);return[qe({"x":nt.x1,"y":nt.y1},lt,Rt),qe({"x":nt.x2,"y":nt.y1},lt,Rt),qe({"x":nt.x2,"y":nt.y2},lt,Rt),qe({"x":nt.x1,"y":nt.y2},lt,Rt)]}function Qe(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Rt=Je(nt,lt),Bt=Je(at,lt),a=function(nt,at){return[at.x-nt.x,at.y-nt.y]},Lt=a(Ze(nt),Ze(at)),Ht=a(Rt[0],Rt[1]),jt=a(Rt[1],Rt[2]),$t=a(Bt[0],Bt[1]),Kt=a(Bt[1],Bt[2]),te=lt?Me(nt.angle):nt.angle,ne=lt?Me(90-nt.angle):nt.angle+ce,re=lt?Me(at.angle):at.angle,ae=lt?Me(90-at.angle):at.angle+ce;ne>de&&(ne-=de),ae>de&&(ae-=de);var v=function(nt,at,lt,Rt){var Bt=[Math.cos(at),Math.sin(at)];return nt+(Ke(Bt,lt)+Ke(Bt,Rt))/2>Ke(Bt,Lt)};return v((nt.x2-nt.x1)/2,te,$t,Kt)&&v((nt.y2-nt.y1)/2,ne,$t,Kt)&&v((at.x2-at.x1)/2,re,Ht,jt)&&v((at.y2-at.y1)/2,ae,Ht,jt)}function $e(nt){return li=1/0,hi=1/0,di=-1/0,fi=-1/0,nt.forEach((function(nt){li>nt.x&&(li=nt.x),di<nt.x&&(di=nt.x),hi>nt.y&&(hi=nt.y),fi<nt.y&&(fi=nt.y)})),{"x1":li,"y1":hi,"x2":di,"y2":fi}}var pi=1e-8;function ei(nt,at,lt,Rt,Bt){for(var Lt=0,Ht=Bt[Bt.length-1];Lt<Bt.length;Lt++){var jt=Bt[Lt];if(Fe([nt,at],[lt,Rt],[jt.x,jt.y],[Ht.x,Ht.y]))return!0;Ht=jt}return!1}function ii(nt,at,lt){var Rt=0,Bt=nt[0];if(!Bt)return!1;for(var Lt=1;Lt<nt.length;Lt++){var Ht=nt[Lt];Rt+=ni(Bt.x,Bt.y,Ht.x,Ht.y,at,lt),Bt=Ht}var jt=nt[0];return ri(Bt.x,jt.x)&&ri(Bt.y,jt.y)||(Rt+=ni(Bt.x,Bt.y,jt.x,jt.y,at,lt)),0!==Rt}function ni(nt,at,lt,Rt,Bt,Lt){if(Lt>at&&Lt>Rt||Lt<at&&Lt<Rt)return 0;if(Rt===at)return 0;var Ht=(Lt-at)/(Rt-at),jt=Rt<at?1:-1;1!==Ht&&0!==Ht||(jt=Rt<at?.5:-.5);var $t=Ht*(lt-nt)+nt;return $t===Bt?1/0:$t>Bt?jt:0}function ri(nt,at){return Math.abs(nt-at)<pi}function ai(nt,at){for(var lt=0;lt<at.length;lt++){if(ii(nt,at[lt].x,at[lt].y))return!0;if(lt>0&&ei(at[lt-1].x,at[lt-1].y,at[lt].x,at[lt].y,nt))return!0}return!1}var oi=function(nt){var at=nt.charCodeAt(0),lt=2===nt.length?nt.charCodeAt(1):0,Rt=at;return 55296<=at&&at<=56319&&56320<=lt&&lt<=57343&&(Rt=(at&=1023)<<10|(lt&=1023),Rt+=65536),12288===Rt||65281<=Rt&&Rt<=65376||65504<=Rt&&Rt<=65510?"F":8361===Rt||65377<=Rt&&Rt<=65470||65474<=Rt&&Rt<=65479||65482<=Rt&&Rt<=65487||65490<=Rt&&Rt<=65495||65498<=Rt&&Rt<=65500||65512<=Rt&&Rt<=65518?"H":4352<=Rt&&Rt<=4447||4515<=Rt&&Rt<=4519||4602<=Rt&&Rt<=4607||9001<=Rt&&Rt<=9002||11904<=Rt&&Rt<=11929||11931<=Rt&&Rt<=12019||12032<=Rt&&Rt<=12245||12272<=Rt&&Rt<=12283||12289<=Rt&&Rt<=12350||12353<=Rt&&Rt<=12438||12441<=Rt&&Rt<=12543||12549<=Rt&&Rt<=12589||12593<=Rt&&Rt<=12686||12688<=Rt&&Rt<=12730||12736<=Rt&&Rt<=12771||12784<=Rt&&Rt<=12830||12832<=Rt&&Rt<=12871||12880<=Rt&&Rt<=13054||13056<=Rt&&Rt<=19903||19968<=Rt&&Rt<=42124||42128<=Rt&&Rt<=42182||43360<=Rt&&Rt<=43388||44032<=Rt&&Rt<=55203||55216<=Rt&&Rt<=55238||55243<=Rt&&Rt<=55291||63744<=Rt&&Rt<=64255||65040<=Rt&&Rt<=65049||65072<=Rt&&Rt<=65106||65108<=Rt&&Rt<=65126||65128<=Rt&&Rt<=65131||110592<=Rt&&Rt<=110593||127488<=Rt&&Rt<=127490||127504<=Rt&&Rt<=127546||127552<=Rt&&Rt<=127560||127568<=Rt&&Rt<=127569||131072<=Rt&&Rt<=194367||177984<=Rt&&Rt<=196605||196608<=Rt&&Rt<=262141?"W":32<=Rt&&Rt<=126||162<=Rt&&Rt<=163||165<=Rt&&Rt<=166||172===Rt||175===Rt||10214<=Rt&&Rt<=10221||10629<=Rt&&Rt<=10630?"Na":161===Rt||164===Rt||167<=Rt&&Rt<=168||170===Rt||173<=Rt&&Rt<=174||176<=Rt&&Rt<=180||182<=Rt&&Rt<=186||188<=Rt&&Rt<=191||198===Rt||208===Rt||215<=Rt&&Rt<=216||222<=Rt&&Rt<=225||230===Rt||232<=Rt&&Rt<=234||236<=Rt&&Rt<=237||240===Rt||242<=Rt&&Rt<=243||247<=Rt&&Rt<=250||252===Rt||254===Rt||257===Rt||273===Rt||275===Rt||283===Rt||294<=Rt&&Rt<=295||299===Rt||305<=Rt&&Rt<=307||312===Rt||319<=Rt&&Rt<=322||324===Rt||328<=Rt&&Rt<=331||333===Rt||338<=Rt&&Rt<=339||358<=Rt&&Rt<=359||363===Rt||462===Rt||464===Rt||466===Rt||468===Rt||470===Rt||472===Rt||474===Rt||476===Rt||593===Rt||609===Rt||708===Rt||711===Rt||713<=Rt&&Rt<=715||717===Rt||720===Rt||728<=Rt&&Rt<=731||733===Rt||735===Rt||768<=Rt&&Rt<=879||913<=Rt&&Rt<=929||931<=Rt&&Rt<=937||945<=Rt&&Rt<=961||963<=Rt&&Rt<=969||1025===Rt||1040<=Rt&&Rt<=1103||1105===Rt||8208===Rt||8211<=Rt&&Rt<=8214||8216<=Rt&&Rt<=8217||8220<=Rt&&Rt<=8221||8224<=Rt&&Rt<=8226||8228<=Rt&&Rt<=8231||8240===Rt||8242<=Rt&&Rt<=8243||8245===Rt||8251===Rt||8254===Rt||8308===Rt||8319===Rt||8321<=Rt&&Rt<=8324||8364===Rt||8451===Rt||8453===Rt||8457===Rt||8467===Rt||8470===Rt||8481<=Rt&&Rt<=8482||8486===Rt||8491===Rt||8531<=Rt&&Rt<=8532||8539<=Rt&&Rt<=8542||8544<=Rt&&Rt<=8555||8560<=Rt&&Rt<=8569||8585===Rt||8592<=Rt&&Rt<=8601||8632<=Rt&&Rt<=8633||8658===Rt||8660===Rt||8679===Rt||8704===Rt||8706<=Rt&&Rt<=8707||8711<=Rt&&Rt<=8712||8715===Rt||8719===Rt||8721===Rt||8725===Rt||8730===Rt||8733<=Rt&&Rt<=8736||8739===Rt||8741===Rt||8743<=Rt&&Rt<=8748||8750===Rt||8756<=Rt&&Rt<=8759||8764<=Rt&&Rt<=8765||8776===Rt||8780===Rt||8786===Rt||8800<=Rt&&Rt<=8801||8804<=Rt&&Rt<=8807||8810<=Rt&&Rt<=8811||8814<=Rt&&Rt<=8815||8834<=Rt&&Rt<=8835||8838<=Rt&&Rt<=8839||8853===Rt||8857===Rt||8869===Rt||8895===Rt||8978===Rt||9312<=Rt&&Rt<=9449||9451<=Rt&&Rt<=9547||9552<=Rt&&Rt<=9587||9600<=Rt&&Rt<=9615||9618<=Rt&&Rt<=9621||9632<=Rt&&Rt<=9633||9635<=Rt&&Rt<=9641||9650<=Rt&&Rt<=9651||9654<=Rt&&Rt<=9655||9660<=Rt&&Rt<=9661||9664<=Rt&&Rt<=9665||9670<=Rt&&Rt<=9672||9675===Rt||9678<=Rt&&Rt<=9681||9698<=Rt&&Rt<=9701||9711===Rt||9733<=Rt&&Rt<=9734||9737===Rt||9742<=Rt&&Rt<=9743||9748<=Rt&&Rt<=9749||9756===Rt||9758===Rt||9792===Rt||9794===Rt||9824<=Rt&&Rt<=9825||9827<=Rt&&Rt<=9829||9831<=Rt&&Rt<=9834||9836<=Rt&&Rt<=9837||9839===Rt||9886<=Rt&&Rt<=9887||9918<=Rt&&Rt<=9919||9924<=Rt&&Rt<=9933||9935<=Rt&&Rt<=9953||9955===Rt||9960<=Rt&&Rt<=9983||10045===Rt||10071===Rt||10102<=Rt&&Rt<=10111||11093<=Rt&&Rt<=11097||12872<=Rt&&Rt<=12879||57344<=Rt&&Rt<=63743||65024<=Rt&&Rt<=65039||65533===Rt||127232<=Rt&&Rt<=127242||127248<=Rt&&Rt<=127277||127280<=Rt&&Rt<=127337||127344<=Rt&&Rt<=127386||917760<=Rt&&Rt<=917999||983040<=Rt&&Rt<=1048573||1048576<=Rt&&Rt<=1114109?"A":"N"};function si(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=arguments.length>2?arguments[2]:void 0;lt||(lt=1);var Rt=nt.fontStyle,Bt=void 0===Rt?at.fontStyle:Rt,Lt=nt.fontVariant,Ht=void 0===Lt?at.fontVariant:Lt,jt=nt.fontWeight,$t=void 0===jt?at.fontWeight:jt,Kt=nt.fontSize,te=void 0===Kt?at.fontSize:Kt,ne=nt.fontFamily;return(Bt?Bt+" ":"")+(Ht?Ht+" ":"")+($t?$t+" ":"")+te*lt+"px "+((void 0===ne?at.fontFamily:ne)||"sans-serif")}var vi=function(){function t(nt,at){r(this,t),this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet="-/: .,@%'\"~",this._option=nt,this._userSpec=null!=at?at:{},this.textSpec=this._initSpec(),N(nt.specialCharSet)&&(this.specialCharSet=nt.specialCharSet),this._standardMethod=N(nt.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}return o(t,[{"key":"initContext","value":function(){if(this._notSupportCanvas)return!1;if(j(this._canvas)&&(N(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),j(this._canvas)&&"undefined"!=typeof window&&void 0!==window.document&&globalThis&&N(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),j(this._context)&&N(this._canvas)){var nt=this._canvas.getContext("2d");N(nt)&&(nt.save(),nt.font=si(this.textSpec),this._contextSaved=!0,this._context=nt)}return!j(this._context)||(this._notSupportCanvas=!0,!1)}},{"key":"_initSpec","value":function(){var nt,at,lt,Rt=this._option.defaultFontParams,Bt=void 0===Rt?{}:Rt,Lt=this._userSpec,Ht=Lt.fontStyle,jt=void 0===Ht?Bt.fontStyle:Ht,$t=Lt.fontVariant,Kt=void 0===$t?Bt.fontVariant:$t,te=Lt.fontWeight,ne=void 0===te?null!==(nt=Bt.fontWeight)&&void 0!==nt?nt:"normal":te,re=Lt.fontSize,ae=void 0===re?null!==(at=Bt.fontSize)&&void 0!==at?at:12:re,oe=Lt.fontFamily,se=void 0===oe?null!==(lt=Bt.fontFamily)&&void 0!==lt?lt:"sans-serif":oe,le=Lt.align,ue=Lt.textAlign,ce=void 0===ue?null!=le?le:"center":ue,he=Lt.baseline,de=Lt.textBaseline,fe=void 0===de?null!=he?he:"middle":de,pe=Lt.ellipsis,ve=Lt.limit,Ae=this._userSpec.lineHeight,we=void 0===Ae?ae:Ae;if(Y(we)&&"%"===we[we.length-1]){var Ce=Number.parseFloat(we.substring(0,we.length-1))/100;we=ae*Ce}return{"fontStyle":jt,"fontVariant":Kt,"fontFamily":se,"fontSize":ae,"fontWeight":ne,"textAlign":ce,"textBaseline":fe,"ellipsis":pe,"limit":ve,"lineHeight":we}}},{"key":"measure","value":function(nt,at){switch(at){case"vrender":case"canopus":return this.fullMeasure(nt);case"canvas":return this.measureWithNaiveCanvas(nt);case"simple":return this.quickMeasureWithoutCanvas(nt);default:return this.quickMeasure(nt)}}},{"key":"fullMeasure","value":function(nt){if(j(nt))return{"width":0,"height":0};if(j(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(nt);var at,lt=this.textSpec,Rt=lt.fontFamily,Bt=lt.fontSize,Lt=lt.fontWeight,Ht=lt.textAlign,jt=lt.textBaseline,$t=lt.ellipsis,Kt=lt.limit,te=lt.lineHeight;try{var ne=this._option.getTextBounds({"text":nt,"fontFamily":Rt,"fontSize":Bt,"fontWeight":Lt,"textAlign":Ht,"textBaseline":jt,"ellipsis":!!$t,"maxLineWidth":Kt||1/0,"lineHeight":te});at={"width":ne.width(),"height":ne.height()}}catch(lt){this._notSupportVRender=!0,at=this.measureWithNaiveCanvas(nt)}return at}},{"key":"measureWithNaiveCanvas","value":function(nt){return this._measureReduce(nt,this._measureWithNaiveCanvas.bind(this))}},{"key":"_measureWithNaiveCanvas","value":function(nt){var at;if(!this.initContext())return this._quickMeasureWithoutCanvas(nt);var lt=this._context.measureText(nt),Rt=this.textSpec,Bt=Rt.fontSize,Lt=Rt.lineHeight;return{"width":lt.width,"height":null!==(at=Lt)&&void 0!==at?at:Bt,"fontBoundingBoxAscent":lt.fontBoundingBoxAscent,"fontBoundingBoxDescent":lt.fontBoundingBoxDescent}}},{"key":"quickMeasure","value":function(nt){return this._measureReduce(nt,this._quickMeasure.bind(this))}},{"key":"_quickMeasure","value":function(nt){for(var at={"width":0,"height":0},lt=0;lt<nt.length;lt++){var Rt=nt[lt],Bt=this._measureSpecialChar(Rt);j(Bt)&&t.NUMBERS_CHAR_SET.includes(Rt)&&(Bt=this._measureNumberChar()),j(Bt)&&["F","W"].includes(oi(Rt))&&(Bt=this._measureFullSizeChar()),j(Bt)&&(Bt=this._measureLetterChar()),at.width+=Bt.width,at.height=Math.max(at.height,Bt.height),!j(Bt.fontBoundingBoxAscent)&&(at.fontBoundingBoxAscent=Bt.fontBoundingBoxAscent),!j(Bt.fontBoundingBoxDescent)&&(at.fontBoundingBoxDescent=Bt.fontBoundingBoxDescent)}return at}},{"key":"quickMeasureWithoutCanvas","value":function(nt){return this._measureReduce(nt,this._quickMeasureWithoutCanvas.bind(this))}},{"key":"_quickMeasureWithoutCanvas","value":function(nt){for(var at,lt={"width":0,"height":0},Rt=this.textSpec,Bt=Rt.fontSize,Lt=Rt.lineHeight,Ht=0;Ht<nt.length;Ht++){var jt=nt[Ht],$t=["F","W"].includes(oi(jt))?1:.53;lt.width+=$t*Bt}return lt.height=null!==(at=Lt)&&void 0!==at?at:Bt,lt}},{"key":"_measureReduce","value":function(nt,at){var lt,Rt=this.textSpec,Bt=Rt.fontSize,Lt=Rt.lineHeight,Ht={"width":0,"height":0};if(j(nt))return Ht;if(X(nt)){var jt=nt.filter(N).map((function(nt){return nt.toString()}));return 0===jt.length?Ht:1===jt.length?at(jt[0]):{"width":jt.reduce((function(nt,lt){return Math.max(nt,at(lt).width)}),0),"height":jt.length*((null!==(lt=Lt)&&void 0!==lt?lt:Bt)+1)+1}}return at(nt.toString())}},{"key":"_measureNumberChar","value":function(){if(j(this._numberCharSize)){var nt=this._standardMethod(t.NUMBERS_CHAR_SET);this._numberCharSize={"width":nt.width/t.NUMBERS_CHAR_SET.length,"height":nt.height,"fontBoundingBoxAscent":nt.fontBoundingBoxAscent,"fontBoundingBoxDescent":nt.fontBoundingBoxDescent}}return this._numberCharSize}},{"key":"_measureFullSizeChar","value":function(){return j(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(t.FULL_SIZE_CHAR)),this._fullCharSize}},{"key":"_measureLetterChar","value":function(){if(j(this._letterCharSize)){var nt=this._standardMethod(t.ALPHABET_CHAR_SET);this._letterCharSize={"width":nt.width/t.ALPHABET_CHAR_SET.length,"height":nt.height,"fontBoundingBoxAscent":nt.fontBoundingBoxAscent,"fontBoundingBoxDescent":nt.fontBoundingBoxDescent}}return this._letterCharSize}},{"key":"_measureSpecialChar","value":function(nt){return N(this._specialCharSizeMap[nt])?this._specialCharSizeMap[nt]:this.specialCharSet.includes(nt)?(this._specialCharSizeMap[nt]=this._standardMethod(nt),this._specialCharSizeMap[nt]):null}},{"key":"release","value":function(){N(this._canvas)&&(this._canvas=null),N(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}])}();vi.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",vi.NUMBERS_CHAR_SET="0123456789",vi.FULL_SIZE_CHAR="";var ui=function(nt,at){var lt=nt.x1,Rt=nt.x2,Bt=nt.y1,Lt=nt.y2,Ht=Math.abs(Rt-lt),jt=Math.abs(Lt-Bt),$t=(lt+Rt)/2,Kt=(Bt+Lt)/2,te=0,ne=0;switch(at){case"top":case"inside-top":ne=-.5;break;case"bottom":case"inside-bottom":ne=.5;break;case"left":case"inside-left":te=-.5;break;case"right":case"inside-right":te=.5;break;case"top-right":te=.5,ne=-.5;break;case"top-left":te=-.5,ne=-.5;break;case"bottom-right":te=.5,ne=.5;break;case"bottom-left":te=-.5,ne=.5}return{"x":$t+=te*Ht,"y":Kt+=ne*jt}};function ci(nt,at,lt){var Rt=at.x1,Bt=at.y1,Lt=at.x2,Ht=at.y2;return lt.onlyTranslate()?(nt!==at&&nt.setValue(at.x1,at.y1,at.x2,at.y2),nt.translate(lt.e,lt.f),at):(nt.clear(),nt.add(lt.a*Rt+lt.c*Bt+lt.e,lt.b*Rt+lt.d*Bt+lt.f),nt.add(lt.a*Lt+lt.c*Bt+lt.e,lt.b*Lt+lt.d*Bt+lt.f),nt.add(lt.a*Lt+lt.c*Ht+lt.e,lt.b*Lt+lt.d*Ht+lt.f),nt.add(lt.a*Rt+lt.c*Ht+lt.e,lt.b*Rt+lt.d*Ht+lt.f),at)}var mi=function(){function t(nt){r(this,t),nt?this.setValue(nt.x1,nt.y1,nt.x2,nt.y2):this.clear()}return o(t,[{"key":"clone","value":function(){return new t(this)}},{"key":"clear","value":function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}},{"key":"empty","value":function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}},{"key":"equals","value":function(nt){return this.x1===nt.x1&&this.y1===nt.y1&&this.x2===nt.x2&&this.y2===nt.y2}},{"key":"setValue","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x1=nt,this.y1=at,this.x2=lt,this.y2=Rt,this}},{"key":"set","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return lt<nt?(this.x2=nt,this.x1=lt):(this.x1=nt,this.x2=lt),Rt<at?(this.y2=at,this.y1=Rt):(this.y1=at,this.y2=Rt),this}},{"key":"add","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return nt<this.x1&&(this.x1=nt),at<this.y1&&(this.y1=at),nt>this.x2&&(this.x2=nt),at>this.y2&&(this.y2=at),this}},{"key":"expand","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return X(nt)?(this.y1-=nt[0],this.x2+=nt[1],this.y2+=nt[2],this.x1-=nt[3]):(this.x1-=nt,this.y1-=nt,this.x2+=nt,this.y2+=nt),this}},{"key":"round","value":function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}},{"key":"translate","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x1+=nt,this.x2+=nt,this.y1+=at,this.y2+=at,this}},{"key":"rotate","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=this.rotatedPoints(nt,at,lt);return this.clear().add(Rt[0],Rt[1]).add(Rt[2],Rt[3]).add(Rt[4],Rt[5]).add(Rt[6],Rt[7])}},{"key":"scale","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Bt=this.scalePoints(nt,at,lt,Rt);return this.clear().add(Bt[0],Bt[1]).add(Bt[2],Bt[3])}},{"key":"union","value":function(nt){return nt.x1<this.x1&&(this.x1=nt.x1),nt.y1<this.y1&&(this.y1=nt.y1),nt.x2>this.x2&&(this.x2=nt.x2),nt.y2>this.y2&&(this.y2=nt.y2),this}},{"key":"intersect","value":function(nt){return nt.x1>this.x1&&(this.x1=nt.x1),nt.y1>this.y1&&(this.y1=nt.y1),nt.x2<this.x2&&(this.x2=nt.x2),nt.y2<this.y2&&(this.y2=nt.y2),this}},{"key":"encloses","value":function(nt){return nt&&this.x1<=nt.x1&&this.x2>=nt.x2&&this.y1<=nt.y1&&this.y2>=nt.y2}},{"key":"alignsWith","value":function(nt){return nt&&(this.x1===nt.x1||this.x2===nt.x2||this.y1===nt.y1||this.y2===nt.y2)}},{"key":"intersects","value":function(nt){return nt&&!(this.x2<nt.x1||this.x1>nt.x2||this.y2<nt.y1||this.y1>nt.y2)}},{"key":"contains","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(nt<this.x1||nt>this.x2||at<this.y1||at>this.y2)}},{"key":"containsPoint","value":function(nt){return!(nt.x<this.x1||nt.x>this.x2||nt.y<this.y1||nt.y>this.y2)}},{"key":"width","value":function(){return this.empty()?0:this.x2-this.x1}},{"key":"height","value":function(){return this.empty()?0:this.y2-this.y1}},{"key":"scaleX","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x1*=nt,this.x2*=nt,this}},{"key":"scaleY","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y1*=nt,this.y2*=nt,this}},{"key":"transformWithMatrix","value":function(nt){return ci(this,this,nt),this}},{"key":"copy","value":function(nt){return this.x1=nt.x1,this.y1=nt.y1,this.x2=nt.x2,this.y2=nt.y2,this}},{"key":"rotatedPoints","value":function(nt,at,lt){var Rt=this.x1,Bt=this.y1,Lt=this.x2,Ht=this.y2,jt=Math.cos(nt),$t=Math.sin(nt),Kt=at-at*jt+lt*$t,te=lt-at*$t-lt*jt;return[jt*Rt-$t*Bt+Kt,$t*Rt+jt*Bt+te,jt*Rt-$t*Ht+Kt,$t*Rt+jt*Ht+te,jt*Lt-$t*Bt+Kt,$t*Lt+jt*Bt+te,jt*Lt-$t*Ht+Kt,$t*Lt+jt*Ht+te]}},{"key":"scalePoints","value":function(nt,at,lt,Rt){return[nt*this.x1+(1-nt)*lt,at*this.y1+(1-at)*Rt,nt*this.x2+(1-nt)*lt,at*this.y2+(1-at)*Rt]}}])}(),_i=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e)}(mi),bi=function(nt){function e(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(this,e),at=n(this,e,[nt]),nt&&(at.angle=null!==(lt=nt.angle)&&void 0!==lt?lt:Rt),at}return h(e,nt),o(e,[{"key":"intersects","value":function(nt){return Qe(this,nt)}},{"key":"setValue","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return y(e,"setValue",this,3)([nt,at,lt,Rt]),this.angle=Bt,this}},{"key":"clone","value":function(){return new e(this)}}])}(mi),Mi=function(){function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,Lt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=nt,this.b=at,this.c=lt,this.d=Rt,this.e=Bt,this.f=Lt}return o(t,[{"key":"equalToMatrix","value":function(nt){return!(this.e!==nt.e||this.f!==nt.f||this.a!==nt.a||this.d!==nt.d||this.b!==nt.b||this.c!==nt.c)}},{"key":"equalTo","value":function(nt,at,lt,Rt,Bt,Lt){return!(this.e!==Bt||this.f!==Lt||this.a!==nt||this.d!==Rt||this.b!==at||this.c!==lt)}},{"key":"setValue","value":function(nt,at,lt,Rt,Bt,Lt){return this.a=nt,this.b=at,this.c=lt,this.d=Rt,this.e=Bt,this.f=Lt,this}},{"key":"reset","value":function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{"key":"getInverse","value":function(){var nt=this.a,at=this.b,lt=this.c,Rt=this.d,Bt=this.e,Lt=this.f,Ht=new t,jt=nt*Rt-at*lt;return Ht.a=Rt/jt,Ht.b=-at/jt,Ht.c=-lt/jt,Ht.d=nt/jt,Ht.e=(lt*Lt-Rt*Bt)/jt,Ht.f=-(nt*Lt-at*Bt)/jt,Ht}},{"key":"rotate","value":function(nt){var at=Math.cos(nt),lt=Math.sin(nt),Rt=this.a*at+this.c*lt,Bt=this.b*at+this.d*lt,Lt=this.a*-lt+this.c*at,Ht=this.b*-lt+this.d*at;return this.a=Rt,this.b=Bt,this.c=Lt,this.d=Ht,this}},{"key":"rotateByCenter","value":function(nt,at,lt){var Rt=Math.cos(nt),Bt=Math.sin(nt),Lt=(1-Rt)*at+Bt*lt,Ht=(1-Rt)*lt-Bt*at,jt=Rt*this.a-Bt*this.b,$t=Bt*this.a+Rt*this.b,Kt=Rt*this.c-Bt*this.d,te=Bt*this.c+Rt*this.d,ne=Rt*this.e-Bt*this.f+Lt,re=Bt*this.e+Rt*this.f+Ht;return this.a=jt,this.b=$t,this.c=Kt,this.d=te,this.e=ne,this.f=re,this}},{"key":"scale","value":function(nt,at){return this.a*=nt,this.b*=nt,this.c*=at,this.d*=at,this}},{"key":"setScale","value":function(nt,at){return this.b=this.b/this.a*nt,this.c=this.c/this.d*at,this.a=nt,this.d=at,this}},{"key":"transform","value":function(nt,at,lt,Rt,Bt,Lt){return this.multiply(nt,at,lt,Rt,Bt,Lt),this}},{"key":"translate","value":function(nt,at){return this.e+=this.a*nt+this.c*at,this.f+=this.b*nt+this.d*at,this}},{"key":"transpose","value":function(){var nt=this.a,at=this.b,lt=this.c,Rt=this.d,Bt=this.e,Lt=this.f;return this.a=at,this.b=nt,this.c=Rt,this.d=lt,this.e=Lt,this.f=Bt,this}},{"key":"multiply","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=this.a,jt=this.b,$t=this.c,Kt=this.d,te=Ht*nt+$t*at,ne=jt*nt+Kt*at,re=Ht*lt+$t*Rt,ae=jt*lt+Kt*Rt,oe=Ht*Bt+$t*Lt+this.e,se=jt*Bt+Kt*Lt+this.f;return this.a=te,this.b=ne,this.c=re,this.d=ae,this.e=oe,this.f=se,this}},{"key":"interpolate","value":function(nt,at){var lt=new t;return lt.a=this.a+(nt.a-this.a)*at,lt.b=this.b+(nt.b-this.b)*at,lt.c=this.c+(nt.c-this.c)*at,lt.d=this.d+(nt.d-this.d)*at,lt.e=this.e+(nt.e-this.e)*at,lt.f=this.f+(nt.f-this.f)*at,lt}},{"key":"transformPoint","value":function(nt,at){var lt=this.a,Rt=this.b,Bt=this.c,Lt=this.d,Ht=this.e,jt=this.f,$t=lt*Lt-Rt*Bt,Kt=Lt/$t,te=-Rt/$t,ne=-Bt/$t,re=lt/$t,ae=(Bt*jt-Lt*Ht)/$t,oe=-(lt*jt-Rt*Ht)/$t,se=nt.x,le=nt.y;at.x=se*Kt+le*ne+ae,at.y=se*te+le*re+oe}},{"key":"onlyTranslate","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.a===nt&&0===this.b&&0===this.c&&this.d===nt}},{"key":"clone","value":function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)}},{"key":"toTransformAttrs","value":function(){var nt=this.a,at=this.b,lt=this.c,Rt=this.d,Bt=nt*Rt-at*lt,Lt={"x":this.e,"y":this.f,"rotateDeg":0,"scaleX":0,"scaleY":0,"skewX":0,"skewY":0};if(0!==nt||0!==at){var Ht=Math.sqrt(nt*nt+at*at);Lt.rotateDeg=at>0?Math.acos(nt/Ht):-Math.acos(nt/Ht),Lt.scaleX=Ht,Lt.scaleY=Bt/Ht,Lt.skewX=(nt*lt+at*Rt)/Bt,Lt.skewY=0}else if(0!==lt||0!==Rt){var jt=Math.sqrt(lt*lt+Rt*Rt);Lt.rotateDeg=Math.PI/2-(Rt>0?Math.acos(-lt/jt):-Math.acos(lt/jt)),Lt.scaleX=Bt/jt,Lt.scaleY=jt,Lt.skewX=0,Lt.skewY=(nt*lt+at*Rt)/Bt}return Lt.rotateDeg=Te(Lt.rotateDeg),Lt}}])}(),Ti=o((function t(){r(this,t),this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}),[{"key":"clearCache","value":function(nt,at){var lt=at.CLEAN_THRESHOLD,Rt=void 0===lt?this.CLEAN_THRESHOLD:lt,Bt=at.L_TIME,Lt=void 0===Bt?this.L_TIME:Bt,Ht=at.R_COUNT,jt=void 0===Ht?this.R_COUNT:Ht;if(nt.size<Rt)return 0;var $t=0,u=function(at){$t++,nt.delete(at)},Kt=Date.now();return nt.forEach((function(nt,at){if(nt.timestamp.length<jt)return u(at);for(var lt=0;Kt-nt.timestamp[nt.timestamp.length-1-lt]<Lt&&!(++lt>=jt););if(lt<jt)return u(at);for(;Kt-nt.timestamp[0]>Lt;)nt.timestamp.shift()})),$t}},{"key":"addLimitedTimestamp","value":function(nt,at,lt){var Rt=lt.R_TIMESTAMP_MAX_SIZE,Bt=void 0===Rt?this.R_TIMESTAMP_MAX_SIZE:Rt;nt.timestamp.length>Bt&&nt.timestamp.shift(),nt.timestamp.push(at)}},{"key":"clearTimeStamp","value":function(nt,at){var lt=at.L_TIME,Rt=void 0===lt?this.L_TIME:lt,Bt=Date.now();nt.forEach((function(nt){for(;Bt-nt.timestamp[0]>Rt;)nt.timestamp.shift()}))}},{"key":"clearItemTimestamp","value":function(nt,at){for(var lt=at.L_TIME,Rt=void 0===lt?this.L_TIME:lt,Bt=Date.now();Bt-nt.timestamp[0]>Rt;)nt.timestamp.shift()}}]);function gi(nt,at,lt){at/=100,lt/=100;var Rt=(1-Math.abs(2*lt-1))*at,Bt=Rt*(1-Math.abs(nt/60%2-1)),Lt=lt-Rt/2,Ht=0,jt=0,$t=0;return 0<=nt&&nt<60?(Ht=Rt,jt=Bt,$t=0):60<=nt&&nt<120?(Ht=Bt,jt=Rt,$t=0):120<=nt&&nt<180?(Ht=0,jt=Rt,$t=Bt):180<=nt&&nt<240?(Ht=0,jt=Bt,$t=Rt):240<=nt&&nt<300?(Ht=Bt,jt=0,$t=Rt):300<=nt&&nt<360&&(Ht=Rt,jt=0,$t=Bt),{"r":Ht=Math.round(255*(Ht+Lt)),"g":jt=Math.round(255*(jt+Lt)),"b":$t=Math.round(255*($t+Lt))}}function yi(nt,at,lt){nt/=255,at/=255,lt/=255;var Rt=Math.min(nt,at,lt),Bt=Math.max(nt,at,lt),Lt=Bt-Rt,Ht=0,jt=0;return Ht=0===Lt?0:Bt===nt?(at-lt)/Lt%6:Bt===at?(lt-nt)/Lt+2:(nt-at)/Lt+4,(Ht=Math.round(60*Ht))<0&&(Ht+=360),jt=(Bt+Rt)/2,{"h":Ht,"s":+(100*(0===Lt?0:Lt/(1-Math.abs(2*jt-1)))).toFixed(1),"l":jt=+(100*jt).toFixed(1)}}var Ii=/^#([0-9a-f]{3,8})$/,Bi={"transparent":4294967040},zi={"aliceblue":15792383,"antiquewhite":16444375,"aqua":65535,"aquamarine":8388564,"azure":15794175,"beige":16119260,"bisque":16770244,"black":0,"blanchedalmond":16772045,"blue":255,"blueviolet":9055202,"brown":10824234,"burlywood":14596231,"cadetblue":6266528,"chartreuse":8388352,"chocolate":13789470,"coral":16744272,"cornflowerblue":6591981,"cornsilk":16775388,"crimson":14423100,"cyan":65535,"darkblue":139,"darkcyan":35723,"darkgoldenrod":12092939,"darkgray":11119017,"darkgreen":25600,"darkgrey":11119017,"darkkhaki":12433259,"darkmagenta":9109643,"darkolivegreen":5597999,"darkorange":16747520,"darkorchid":10040012,"darkred":9109504,"darksalmon":15308410,"darkseagreen":9419919,"darkslateblue":4734347,"darkslategray":3100495,"darkslategrey":3100495,"darkturquoise":52945,"darkviolet":9699539,"deeppink":16716947,"deepskyblue":49151,"dimgray":6908265,"dimgrey":6908265,"dodgerblue":2003199,"firebrick":11674146,"floralwhite":16775920,"forestgreen":2263842,"fuchsia":16711935,"gainsboro":14474460,"ghostwhite":16316671,"gold":16766720,"goldenrod":14329120,"gray":8421504,"green":32768,"greenyellow":11403055,"grey":8421504,"honeydew":15794160,"hotpink":16738740,"indianred":13458524,"indigo":4915330,"ivory":16777200,"khaki":15787660,"lavender":15132410,"lavenderblush":16773365,"lawngreen":8190976,"lemonchiffon":16775885,"lightblue":11393254,"lightcoral":15761536,"lightcyan":14745599,"lightgoldenrodyellow":16448210,"lightgray":13882323,"lightgreen":9498256,"lightgrey":13882323,"lightpink":16758465,"lightsalmon":16752762,"lightseagreen":2142890,"lightskyblue":8900346,"lightslategray":7833753,"lightslategrey":7833753,"lightsteelblue":11584734,"lightyellow":16777184,"lime":65280,"limegreen":3329330,"linen":16445670,"magenta":16711935,"maroon":8388608,"mediumaquamarine":6737322,"mediumblue":205,"mediumorchid":12211667,"mediumpurple":9662683,"mediumseagreen":3978097,"mediumslateblue":8087790,"mediumspringgreen":64154,"mediumturquoise":4772300,"mediumvioletred":13047173,"midnightblue":1644912,"mintcream":16121850,"mistyrose":16770273,"moccasin":16770229,"navajowhite":16768685,"navy":128,"oldlace":16643558,"olive":8421376,"olivedrab":7048739,"orange":16753920,"orangered":16729344,"orchid":14315734,"palegoldenrod":15657130,"palegreen":10025880,"paleturquoise":11529966,"palevioletred":14381203,"papayawhip":16773077,"peachpuff":16767673,"peru":13468991,"pink":16761035,"plum":14524637,"powderblue":11591910,"purple":8388736,"rebeccapurple":6697881,"red":16711680,"rosybrown":12357519,"royalblue":4286945,"saddlebrown":9127187,"salmon":16416882,"sandybrown":16032864,"seagreen":3050327,"seashell":16774638,"sienna":10506797,"silver":12632256,"skyblue":8900331,"slateblue":6970061,"slategray":7372944,"slategrey":7372944,"snow":16775930,"springgreen":65407,"steelblue":4620980,"tan":13808780,"teal":32896,"thistle":14204888,"tomato":16737095,"turquoise":4251856,"violet":15631086,"wheat":16113331,"white":16777215,"whitesmoke":16119285,"yellow":16776960,"yellowgreen":10145074};function xi(nt){return((nt=Math.max(0,Math.min(255,Math.round(nt)||0)))<16?"0":"")+nt.toString(16)}function ki(nt){return Z(nt)?new Ui(nt>>16,nt>>8&255,255&nt,1):X(nt)?new Ui(nt[0],nt[1],nt[2]):new Ui(255,255,255)}function Si(nt){return nt<.04045?.0773993808*nt:Math.pow(.9478672986*nt+.0521327014,2.4)}function Ai(nt){return nt<.0031308?12.92*nt:1.055*Math.pow(nt,.41666)-.055}var wi=function(nt,at){var lt=Ii.exec(nt);if(at||lt){var Rt=parseInt(lt[1],16),Bt=lt[1].length;return 3===Bt?new Ui((Rt>>8&15)+((Rt>>8&15)<<4),(Rt>>4&15)+((Rt>>4&15)<<4),(15&Rt)+((15&Rt)<<4),1):6===Bt?ki(Rt):8===Bt?new Ui(Rt>>24&255,Rt>>16&255,Rt>>8&255,(255&Rt)/255):null}},Wi=function(){function t(nt){r(this,t);var at=t.parseColorString(nt);at?this.color=at:(console.warn("Warn: ".concat(nt,"Color")),this.color=new Ui(255,255,255))}return o(t,[{"key":"toRGBA","value":function(){return this.color.formatRgb()}},{"key":"toString","value":function(){return this.color.formatRgb()}},{"key":"toHex","value":function(){return this.color.formatHex()}},{"key":"toHsl","value":function(){return this.color.formatHsl()}},{"key":"brighter","value":function(nt){var at=this.color,lt=at.r,Rt=at.g,Bt=at.b;return this.color.r=Math.max(0,Math.min(255,Math.floor(lt*nt))),this.color.g=Math.max(0,Math.min(255,Math.floor(Rt*nt))),this.color.b=Math.max(0,Math.min(255,Math.floor(Bt*nt))),this}},{"key":"add","value":function(nt){var at=this.color,lt=at.r,Rt=at.g,Bt=at.b;return this.color.r+=Math.min(255,lt+nt.color.r),this.color.g+=Math.min(255,Rt+nt.color.g),this.color.b+=Math.min(255,Bt+nt.color.b),this}},{"key":"sub","value":function(nt){return this.color.r=Math.max(0,this.color.r-nt.color.r),this.color.g=Math.max(0,this.color.g-nt.color.g),this.color.b=Math.max(0,this.color.b-nt.color.b),this}},{"key":"multiply","value":function(nt){var at=this.color,lt=at.r,Rt=at.g,Bt=at.b;return this.color.r=Math.max(0,Math.min(255,Math.floor(lt*nt.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(Rt*nt.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(Bt*nt.color.b))),this}},{"key":"getHSVBrightness","value":function(){return Math.max(this.color.r,this.color.g,this.color.b)/255}},{"key":"getHSLBrightness","value":function(){return.5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}},{"key":"setHsl","value":function(nt,at,lt){var Rt=this.color.opacity,Bt=yi(this.color.r,this.color.g,this.color.b),Lt=gi(j(nt)?Bt.h:Ut(nt,0,360),j(at)?Bt.s:at>=0&&at<=1?100*at:at,j(lt)?Bt.l:lt<=1&&lt>=0?100*lt:lt);return this.color=new Ui(Lt.r,Lt.g,Lt.b,Rt),this}},{"key":"setRGB","value":function(nt,at,lt){return!j(nt)&&(this.color.r=nt),!j(at)&&(this.color.g=at),!j(lt)&&(this.color.b=lt),this}},{"key":"setHex","value":function(nt){var at="".concat(nt).trim().toLowerCase(),lt=wi(at,!0);return null!=lt?lt:this}},{"key":"setColorName","value":function(nt){var at=zi[nt.toLowerCase()];return void 0!==at?this.setHex(at):console.warn("THREE.Color: Unknown color "+nt),this}},{"key":"setScalar","value":function(nt){return this.color.r=nt,this.color.g=nt,this.color.b=nt,this}},{"key":"setOpacity","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.color.opacity=nt,this}},{"key":"getLuminance","value":function(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}},{"key":"getLuminance2","value":function(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}},{"key":"getLuminance3","value":function(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}},{"key":"getLuminanceWCAG","value":function(){var nt=this.color.r/255,at=this.color.g/255,lt=this.color.b/255;return.2126*(nt<=.03928?nt/12.92:Math.pow((nt+.055)/1.055,2.4))+.7152*(at<=.03928?at/12.92:Math.pow((at+.055)/1.055,2.4))+.0722*(lt<=.03928?lt/12.92:Math.pow((lt+.055)/1.055,2.4))}},{"key":"clone","value":function(){return new t(this.color.toString())}},{"key":"copyGammaToLinear","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.color.r=Math.pow(nt.color.r,at),this.color.g=Math.pow(nt.color.g,at),this.color.b=Math.pow(nt.color.b,at),this}},{"key":"copyLinearToGamma","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,lt=at>0?1/at:1;return this.color.r=Math.pow(nt.color.r,lt),this.color.g=Math.pow(nt.color.g,lt),this.color.b=Math.pow(nt.color.b,lt),this}},{"key":"convertGammaToLinear","value":function(nt){return this.copyGammaToLinear(this,nt),this}},{"key":"convertLinearToGamma","value":function(nt){return this.copyLinearToGamma(this,nt),this}},{"key":"copySRGBToLinear","value":function(nt){return this.color.r=Si(nt.color.r),this.color.g=Si(nt.color.g),this.color.b=Si(nt.color.b),this}},{"key":"copyLinearToSRGB","value":function(nt){return this.color.r=Ai(nt.color.r),this.color.g=Ai(nt.color.g),this.color.b=Ai(nt.color.b),this}},{"key":"convertSRGBToLinear","value":function(){return this.copySRGBToLinear(this),this}},{"key":"convertLinearToSRGB","value":function(){return this.copyLinearToSRGB(this),this}}],[{"key":"Brighter","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===at?nt:new t(nt).brighter(at).toRGBA()}},{"key":"SetOpacity","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===at?nt:new t(nt).setOpacity(at).toRGBA()}},{"key":"getColorBrightness","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hsl",lt=nt instanceof t?nt:new t(nt);switch(at){case"hsv":default:return lt.getHSVBrightness();case"hsl":return lt.getHSLBrightness();case"lum":return lt.getLuminance();case"lum2":return lt.getLuminance2();case"lum3":return lt.getLuminance3();case"wcag":return lt.getLuminanceWCAG()}}},{"key":"parseColorString","value":function(nt){if(N(Bi[nt]))return function(nt){return Z(nt)?new Ui(nt>>>24,nt>>>16&255,nt>>>8&255,255&nt):X(nt)?new Ui(nt[0],nt[1],nt[2],nt[3]):new Ui(255,255,255,1)}(Bi[nt]);if(N(zi[nt]))return ki(zi[nt]);var at="".concat(nt).trim().toLowerCase(),lt=wi(at);if(void 0!==lt)return lt;if(/^(rgb|RGB|rgba|RGBA)/.test(at)){var Rt=at.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new Ui(parseInt(Rt[0],10),parseInt(Rt[1],10),parseInt(Rt[2],10),parseFloat(Rt[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(at)){var Bt=at.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),Lt=gi(parseInt(Bt[0],10),parseInt(Bt[1],10),parseInt(Bt[2],10));return new Ui(Lt.r,Lt.g,Lt.b,parseFloat(Bt[3]))}}}])}(),Ui=o((function t(nt,at,lt,Rt){r(this,t),this.r=isNaN(+nt)?255:Math.max(0,Math.min(255,+nt)),this.g=isNaN(+at)?255:Math.max(0,Math.min(255,+at)),this.b=isNaN(+lt)?255:Math.max(0,Math.min(255,+lt)),N(Rt)?this.opacity=isNaN(+Rt)?1:Math.max(0,Math.min(1,+Rt)):this.opacity=1}),[{"key":"formatHex","value":function(){return"#".concat(xi(this.r)+xi(this.g)+xi(this.b)+(1===this.opacity?"":xi(255*this.opacity)))}},{"key":"formatRgb","value":function(){var nt=this.opacity;return"".concat(1===nt?"rgb(":"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b).concat(1===nt?")":",".concat(nt,")"))}},{"key":"formatHsl","value":function(){var nt=this.opacity,at=yi(this.r,this.g,this.b),lt=at.h,Rt=at.s,Bt=at.l;return"".concat(1===nt?"hsl(":"hsla(").concat(lt,",").concat(Rt,"%,").concat(Bt,"%").concat(1===nt?")":",".concat(nt,")"))}},{"key":"toString","value":function(){return this.formatHex()}}]);function Ci(nt){if(Q(nt))return[nt,nt,nt,nt];if(X(nt)){var at=nt.length;if(1===at){var lt=nt[0];return[lt,lt,lt,lt]}if(2===at){var Rt=g(nt,2),Bt=Rt[0],Lt=Rt[1];return[Bt,Lt,Bt,Lt]}if(3===at){var Ht=g(nt,3),jt=Ht[0],$t=Ht[1];return[jt,$t,Ht[2],$t]}if(4===at)return nt}if(V(nt)){var Kt=nt.top,te=void 0===Kt?0:Kt,ne=nt.right,re=void 0===ne?0:ne,ae=nt.bottom,oe=void 0===ae?0:ae,se=nt.left;return[te,re,oe,void 0===se?0:se]}return[0,0,0,0]}function Ei(nt){var at,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!nt)return{"width":lt,"height":Rt};try{at=null===window||void 0===window?void 0:window.getComputedStyle}catch(nt){at=function(){return{}}}var Bt=at(nt);if(/^(\d*\.?\d+)(px)$/.exec(Bt.width)){var Lt=parseFloat(Bt.width)-parseFloat(Bt.paddingLeft)-parseFloat(Bt.paddingRight)||nt.clientWidth-1,Ht=parseFloat(Bt.height)-parseFloat(Bt.paddingTop)-parseFloat(Bt.paddingBottom)||nt.clientHeight-1;return{"width":Lt<=0?lt:Lt,"height":Ht<=0?Rt:Ht}}return{"width":lt,"height":Rt}}var Pi=function(nt){return nt.replace(/([A-Z])/g,"-$1").toLowerCase()};function Ri(nt){return nt.replace(/-([a-z])/g,(function(nt,at){return at.toUpperCase()}))}var $i=6371008.8,qi={"centimeters":637100880,"centimetres":637100880,"degrees":57.22891354143274,"feet":20902260.511392,"inches":39.37*$i,"kilometers":6371.0088,"kilometres":6371.0088,"meters":$i,"metres":$i,"miles":3958.761333810546,"millimeters":6371008800,"millimetres":6371008800,"nauticalmiles":$i/1852,"radians":1,"yards":6967335.223679999};function Li(nt,at,lt){void 0===lt&&(lt={});var Rt={"type":"Feature"};return(0===lt.id||lt.id)&&(Rt.id=lt.id),lt.bbox&&(Rt.bbox=lt.bbox),Rt.properties=at||{},Rt.geometry=nt,Rt}function Di(nt,at){void 0===at&&(at={});var lt={"type":"FeatureCollection"};return at.id&&(lt.id=at.id),at.bbox&&(lt.bbox=at.bbox),lt.features=nt,lt}function Oi(nt,at){if(!nt)return!1;if(!at)return!1;var lt,Rt="Feature"===(lt=at).type?lt.geometry:lt,Bt=Rt.type,Lt=at.bbox,Ht=Rt.coordinates;if(Lt&&!0===Xe(nt,{"x1":Lt[0],"x2":Lt[1],"y1":Lt[1],"y2":Lt[3]},!0))return!1;"Polygon"===Bt&&(Ht=[Ht]);for(var jt=!1,$t=0;$t<Ht.length;++$t)for(var Kt=0;Kt<Ht[$t].length;++Kt)if(ii(Ht[$t][Kt].map((function(nt){return{"x":nt[0],"y":nt[1]}})),nt.x,nt.y))return!0;return jt}function Fi(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Bt=Me(nt[0]),Lt=Me(nt[1]),Ht=Me(lt),jt=function(nt,at){void 0===at&&(at="kilometers");var lt=qi[at];if(!lt)throw new Error(at+" units is invalid");return nt/lt}(at,Rt.units),$t=Math.asin(Math.sin(Lt)*Math.cos(jt)+Math.cos(Lt)*Math.sin(jt)*Math.cos(Ht));return{"x":Te(Bt+Math.atan2(Math.sin(Ht)*Math.sin(jt)*Math.cos(Lt),Math.cos(jt)-Math.sin(Lt)*Math.sin($t))),"y":Te($t)}}var Ki=1e-10;function Hi(nt,at){var lt=function(nt){for(var at=[],lt=0;lt<nt.length;++lt)for(var Rt=lt+1;Rt<nt.length;++Rt)for(var Bt=Vi(nt[lt],nt[Rt]),Lt=0;Lt<Bt.length;++Lt){var Ht=Bt[Lt];Ht.parentIndex=[lt,Rt],at.push(Ht)}return at}(nt),Rt=lt.filter((function(at){return function(nt,at){for(var lt=0;lt<at.length;++lt)if(Ge.distancePP(nt,at[lt])>at[lt].radius+Ki)return!1;return!0}(at,nt)})),Bt=0,Lt=0,Ht=[];if(Rt.length>1){for(var jt=Gi(Rt),$t=0;$t<Rt.length;++$t){var Kt=Rt[$t];Kt.angle=Math.atan2(Kt.x-jt.x,Kt.y-jt.y)}Rt.sort((function(nt,at){return at.angle-nt.angle}));for(var te=Rt[Rt.length-1],ne=0;ne<Rt.length;++ne){var re=Rt[ne];Lt+=(te.x+re.x)*(re.y-te.y);for(var ae={"x":(re.x+te.x)/2,"y":(re.y+te.y)/2},oe=null,se=0;se<re.parentIndex.length;++se)if(te.parentIndex.indexOf(re.parentIndex[se])>-1){var le=nt[re.parentIndex[se]],ue=Math.atan2(re.x-le.x,re.y-le.y),ce=Math.atan2(te.x-le.x,te.y-le.y),he=ce-ue;he<0&&(he+=2*Math.PI);var de=ce-he/2,fe=Ge.distancePP(ae,{"x":le.x+le.radius*Math.sin(de),"y":le.y+le.radius*Math.cos(de)});fe>2*le.radius&&(fe=2*le.radius),(null===oe||oe.width>fe)&&(oe={"circle":le,"width":fe,"p1":re,"p2":te})}null!==oe&&(Ht.push(oe),Bt+=ji(oe.circle.radius,oe.width),te=re)}}else{for(var pe=nt[0],ve=1;ve<nt.length;++ve)nt[ve].radius<pe.radius&&(pe=nt[ve]);for(var Ae=!1,we=0;we<nt.length;++we)if(Ge.distancePP(nt[we],pe)>Math.abs(pe.radius-nt[we].radius)){Ae=!0;break}Ae?Bt=Lt=0:(Bt=pe.radius*pe.radius*Math.PI,Ht.push({"circle":pe,"p1":{"x":pe.x,"y":pe.y+pe.radius},"p2":{"x":pe.x-Ki,"y":pe.y+pe.radius},"width":2*pe.radius}))}return Lt/=2,at&&(at.area=Bt+Lt,at.arcArea=Bt,at.polygonArea=Lt,at.arcs=Ht,at.innerPoints=Rt,at.intersectionPoints=lt),Bt+Lt}function ji(nt,at){return nt*nt*Math.acos(1-at/nt)-(nt-at)*Math.sqrt(at*(2*nt-at))}function Ni(nt,at,lt){if(lt>=nt+at)return 0;if(lt<=Math.abs(nt-at))return Math.PI*Math.min(nt,at)*Math.min(nt,at);var Rt=at-(lt*lt-nt*nt+at*at)/(2*lt);return ji(nt,nt-(lt*lt-at*at+nt*nt)/(2*lt))+ji(at,Rt)}function Vi(nt,at){var lt=Ge.distancePP(nt,at),Rt=nt.radius,Bt=at.radius;if(lt>=Rt+Bt||lt<=Math.abs(Rt-Bt))return[];var Lt=(Rt*Rt-Bt*Bt+lt*lt)/(2*lt),Ht=Math.sqrt(Rt*Rt-Lt*Lt),jt=nt.x+Lt*(at.x-nt.x)/lt,$t=nt.y+Lt*(at.y-nt.y)/lt,Kt=-(at.y-nt.y)*(Ht/lt),te=-(at.x-nt.x)*(Ht/lt);return[{"x":jt+Kt,"y":$t-te},{"x":jt-Kt,"y":$t+te}]}function Gi(nt){for(var at={"x":0,"y":0},lt=0;lt<nt.length;++lt)at.x+=nt[lt].x,at.y+=nt[lt].y;return at.x/=nt.length,at.y/=nt.length,at}var Qi,Ji=function(){function t(){var nt=this;r(this,t),this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"","_":" ","0":"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=function(at){return nt.locale_shortWeekdays[at.getDay()]},this.formatWeekday=function(at){return nt.locale_weekdays[at.getDay()]},this.formatShortMonth=function(at){return nt.locale_shortMonths[at.getMonth()]},this.formatMonth=function(at){return nt.locale_months[at.getMonth()]},this.formatDayOfMonth=function(at,lt){return nt.pad(at.getDate(),lt,2)},this.formatHour24=function(at,lt){return nt.pad(at.getHours(),lt,2)},this.formatHour12=function(at,lt){return nt.pad(at.getHours()%12||12,lt,2)},this.formatMilliseconds=function(at,lt){return nt.pad(at.getMilliseconds(),lt,3)},this.formatMonthNumber=function(at,lt){return nt.pad(at.getMonth()+1,lt,2)},this.formatMinutes=function(at,lt){return nt.pad(at.getMinutes(),lt,2)},this.formatPeriod=function(at){return nt.locale_periods[+(at.getHours()>=12)]},this.formatSeconds=function(at,lt){return nt.pad(at.getSeconds(),lt,2)},this.formatFullYear=function(at,lt){return nt.pad(at.getFullYear()%1e4,lt,4)},this.formatUTCShortWeekday=function(at){return nt.locale_shortWeekdays[at.getUTCDay()]},this.formatUTCWeekday=function(at){return nt.locale_weekdays[at.getUTCDay()]},this.formatUTCShortMonth=function(at){return nt.locale_shortMonths[at.getUTCMonth()]},this.formatUTCMonth=function(at){return nt.locale_months[at.getUTCMonth()]},this.formatUTCDayOfMonth=function(at,lt){return nt.pad(at.getUTCDate(),lt,2)},this.formatUTCHour24=function(at,lt){return nt.pad(at.getUTCHours(),lt,2)},this.formatUTCHour12=function(at,lt){return nt.pad(at.getUTCHours()%12||12,lt,2)},this.formatUTCMilliseconds=function(at,lt){return nt.pad(at.getUTCMilliseconds(),lt,3)},this.formatUTCMonthNumber=function(at,lt){return nt.pad(at.getUTCMonth()+1,lt,2)},this.formatUTCMinutes=function(at,lt){return nt.pad(at.getUTCMinutes(),lt,2)},this.formatUTCPeriod=function(at){return nt.locale_periods[+(at.getUTCHours()>=12)]},this.formatUTCSeconds=function(at,lt){return nt.pad(at.getUTCSeconds(),lt,2)},this.formatUTCFullYear=function(at,lt){return nt.pad(at.getUTCFullYear()%1e4,lt,4)},this.formats={"a":this.formatShortWeekday,"A":this.formatWeekday,"b":this.formatShortMonth,"B":this.formatMonth,"d":this.formatDayOfMonth,"e":this.formatDayOfMonth,"H":this.formatHour24,"I":this.formatHour12,"L":this.formatMilliseconds,"m":this.formatMonthNumber,"M":this.formatMinutes,"p":this.formatPeriod,"S":this.formatSeconds,"Y":this.formatFullYear},this.utcFormats={"a":this.formatUTCShortWeekday,"A":this.formatUTCWeekday,"b":this.formatUTCShortMonth,"B":this.formatUTCMonth,"d":this.formatUTCDayOfMonth,"e":this.formatUTCDayOfMonth,"H":this.formatUTCHour24,"I":this.formatUTCHour12,"L":this.formatUTCMilliseconds,"m":this.formatUTCMonthNumber,"M":this.formatUTCMinutes,"p":this.formatUTCPeriod,"S":this.formatUTCSeconds,"Y":this.formatUTCFullYear},this.parseShortWeekday=function(at,lt,Rt){var Bt=nt.shortWeekdayRe.exec(lt.slice(Rt));return Bt?(at.w=nt.shortWeekdayLookup.get(Bt[0].toLowerCase()),Rt+Bt[0].length):-1},this.parseWeekday=function(at,lt,Rt){var Bt=nt.weekdayRe.exec(lt.slice(Rt));return Bt?(at.w=nt.weekdayLookup.get(Bt[0].toLowerCase()),Rt+Bt[0].length):-1},this.parseShortMonth=function(at,lt,Rt){var Bt=nt.shortMonthRe.exec(lt.slice(Rt));return Bt?(at.m=nt.shortMonthLookup.get(Bt[0].toLowerCase()),Rt+Bt[0].length):-1},this.parseMonth=function(at,lt,Rt){var Bt=nt.monthRe.exec(lt.slice(Rt));return Bt?(at.m=nt.monthLookup.get(Bt[0].toLowerCase()),Rt+Bt[0].length):-1},this.parseDayOfMonth=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+2));return Bt?(at.d=+Bt[0],Rt+Bt[0].length):-1},this.parseHour24=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+2));return Bt?(at.H=+Bt[0],Rt+Bt[0].length):-1},this.parseMilliseconds=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+3));return Bt?(at.L=+Bt[0],Rt+Bt[0].length):-1},this.parseMonthNumber=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+2));return Bt?(at.m=Bt-1,Rt+Bt[0].length):-1},this.parseMinutes=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+2));return Bt?(at.M=+Bt[0],Rt+Bt[0].length):-1},this.parsePeriod=function(at,lt,Rt){var Bt=nt.periodRe.exec(lt.slice(Rt));return Bt?(at.p=nt.periodLookup.get(Bt[0].toLowerCase()),Rt+Bt[0].length):-1},this.parseSeconds=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+2));return Bt?(at.S=+Bt[0],Rt+Bt[0].length):-1},this.parseFullYear=function(at,lt,Rt){var Bt=nt.numberRe.exec(lt.slice(Rt,Rt+4));return Bt?(at.y=+Bt[0],Rt+Bt[0].length):-1},this.parses={"a":this.parseShortWeekday,"A":this.parseWeekday,"b":this.parseShortMonth,"B":this.parseMonth,"d":this.parseDayOfMonth,"e":this.parseDayOfMonth,"H":this.parseHour24,"I":this.parseHour24,"L":this.parseMilliseconds,"m":this.parseMonthNumber,"M":this.parseMinutes,"p":this.parsePeriod,"S":this.parseSeconds,"Y":this.parseFullYear},this.timeFormat=function(at,lt){return nt.newFormat(at,nt.formats)(new Date(nt.getFullTimeStamp(lt)))},this.timeUTCFormat=function(at,lt){return nt.newFormat(at,nt.utcFormats)(new Date(nt.getFullTimeStamp(lt)))},this.timeParse=function(at,lt){return nt.newParse(at,!1)(lt+"")},this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}return o(t,[{"key":"requote","value":function(nt){return nt.replace(this.requoteRe,"\\$&")}},{"key":"localDate","value":function(nt){if(0<=nt.y&&nt.y<100){var at=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return at.setFullYear(nt.y),at}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}},{"key":"utcDate","value":function(nt){if(0<=nt.y&&nt.y<100){var at=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return at.setUTCFullYear(nt.y),at}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}},{"key":"newDate","value":function(nt,at,lt){return{"y":nt,"m":at,"d":lt,"H":0,"M":0,"S":0,"L":0}}},{"key":"formatRe","value":function(nt){return new RegExp("^(?:"+nt.map(this.requoteF).join("|")+")","i")}},{"key":"formatLookup","value":function(nt){return new Map(nt.map((function(nt,at){return[nt.toLowerCase(),at]})))}},{"key":"pad","value":function(nt,at,lt){var Rt=nt<0?"-":"",Bt=(Rt?-nt:nt)+"",Lt=Bt.length;return Rt+(Lt<lt?new Array(lt-Lt+1).join(at)+Bt:Bt)}},{"key":"parseSpecifier","value":function(nt,at,lt,Rt){for(var Bt,Lt,Ht=0,jt=at.length,$t=lt.length;Ht<jt;){if(Rt>=$t)return-1;if(37===(Bt=at.charCodeAt(Ht++))){if(Bt=at.charAt(Ht++),!(Lt=this.parses[Bt in this.pads?at.charAt(Ht++):Bt])||(Rt=Lt(nt,lt,Rt))<0)return-1}else if(Bt!==lt.charCodeAt(Rt++))return-1}return Rt}},{"key":"newParse","value":function(nt,at){var lt=this;return function(Rt){var Bt=lt.newDate(1900,void 0,1);return lt.parseSpecifier(Bt,nt,Rt+="",0)!==Rt.length?null:"Q"in Bt?new Date(Bt.Q):"s"in Bt?new Date(1e3*Bt.s+("L"in Bt?Bt.L:0)):(at&&!("Z"in Bt)&&(Bt.Z=0),"p"in Bt&&(Bt.H=Bt.H%12+12*Bt.p),void 0===Bt.m&&(Bt.m="q"in Bt?Bt.q:0),"Z"in Bt?(Bt.H+=Bt.Z/100|0,Bt.M+=Bt.Z%100,lt.utcDate(Bt)):lt.localDate(Bt))}}},{"key":"newFormat","value":function(nt,at){var lt=this;return function(Rt){var Bt,Lt,Ht=[],jt=-1,$t=0,Kt=nt.length;for(Rt instanceof Date||(Rt=new Date(+Rt));++jt<Kt;)37===nt.charCodeAt(jt)&&(Ht.push(nt.slice($t,jt)),(Lt=lt.pads[Bt=nt.charAt(++jt)])?Bt=nt.charAt(++jt):Lt="e"===Bt?" ":"0",Bt=(0,at[Bt])(Rt,Lt),Ht.push(Bt),$t=jt+1);return Ht.push(nt.slice($t,jt)),Ht.join("")}}},{"key":"getFullTimeStamp","value":function(nt){var at=parseInt(nt+"",10);return 10===String(at).length?1e3*at:at}}],[{"key":"getInstance","value":function(){return t.instance||(t.instance=new t),t.instance}}])}();function Yi(nt,at){var lt=at?nt.toExponential(at-1):nt.toExponential(),Rt=lt.indexOf("e");if(Rt<0)return null;var Bt=lt.slice(0,Rt);return[Bt.length>1?Bt[0]+Bt.slice(2):Bt,+lt.slice(Rt+1)]}function Xi(nt,at){var lt=Yi(nt,at);if(!lt)return nt+"";var Rt=lt[0],Bt=lt[1];return Bt<0?"0."+new Array(-Bt).join("0")+Rt:Rt.length>Bt+1?Rt.slice(0,Bt+1)+"."+Rt.slice(Bt+1):Rt+new Array(Bt-Rt.length+2).join("0")}var dn=o((function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.fill=void 0===nt.fill?" ":nt.fill+"",this.align=void 0===nt.align?">":nt.align+"",this.sign=void 0===nt.sign?"-":nt.sign+"",this.symbol=void 0===nt.symbol?"":nt.symbol+"",this.zero=!!nt.zero,this.width=void 0===nt.width?void 0:+nt.width,this.comma=!!nt.comma,this.precision=void 0===nt.precision?void 0:+nt.precision,this.trim=!!nt.trim,this.type=void 0===nt.type?"":nt.type+""}),[{"key":"toString","value":function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}]),fn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zi(nt){var at;if(at=fn.exec(nt))return new dn({"fill":at[1],"align":at[2],"sign":at[3],"symbol":at[4],"zero":at[5],"width":at[6],"comma":at[7],"precision":at[8]&&at[8].slice(1),"trim":at[9],"type":at[10]});te.getInstance().error("invalid format: "+nt)}var vn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],gn=function(){function t(){var nt,at,lt,Rt=this;r(this,t),this.locale={"thousands":",","grouping":[3],"currency":["$",""]},this.group=void 0===this.locale.grouping||void 0===this.locale.thousands?function(nt){return nt}:(at=m(this.locale.grouping).map(Number),lt="".concat(this.locale.thousands),function(nt,Rt){for(var Bt=nt.length,Lt=[],Ht=0,jt=at[0],$t=0;Bt>0&&jt>0&&($t+jt+1>Rt&&(jt=Math.max(1,Rt-$t)),Lt.push(nt.substring(Bt-=jt,Bt+jt)),!(($t+=jt+1)>Rt));)jt=at[Ht=(Ht+1)%at.length];return Lt.reverse().join(lt)}),this.currencyPrefix=void 0===this.locale.currency?"":this.locale.currency[0]+"",this.currencySuffix=void 0===this.locale.currency?"":this.locale.currency[1]+"",this.decimal=void 0===this.locale.decimal?".":this.locale.decimal+"",this.numerals=void 0===this.locale.numerals?function(nt){return nt}:(nt=m(this.locale.numerals).map(String),function(at){return at.replace(/[0-9]/g,(function(at){return nt[+at]}))}),this.percent=void 0===this.locale.percent?"%":this.locale.percent+"",this.minus=void 0===this.locale.minus?"":this.locale.minus+"",this.nan=void 0===this.locale.nan?"NaN":this.locale.nan+"",this.formatter=function(nt){return Rt.newFormat(nt)},this.format=function(nt,at){return Rt.formatter(nt)(at)},this.formatPrefix=function(nt,at){return Rt._formatPrefix(nt,at)}}return o(t,[{"key":"newFormat","value":function(nt){var at=Zi(nt),lt=at.fill,Rt=at.align,Bt=at.sign,Lt=at.symbol,Ht=at.zero,jt=at.width,$t=at.comma,Kt=at.precision,te=at.trim,ne=at.type;"n"===ne?($t=!0,ne="g"):yn[ne]||(void 0===Kt&&(Kt=12),te=!0,ne="g"),(Ht||"0"===lt&&"="===Rt)&&(Ht=!0,lt="0",Rt="=");var re="$"===Lt?this.currencyPrefix:"#"===Lt&&/[boxX]/.test(ne)?"0"+ne.toLowerCase():"",ae="$"===Lt?this.currencySuffix:/[%p]/.test(ne)?this.percent:"",oe=yn[ne],se=/[defgprstz%]/.test(ne);Kt=void 0===Kt?6:/[gprs]/.test(ne)?Math.max(1,Math.min(21,Kt)):Math.max(0,Math.min(20,Kt));var le=this.nan,ue=this.minus,ce=this.decimal,he=this.group,de=this.numerals;function x(nt){var at,Lt,fe,pe=re,ve=ae,Ae=nt;if("c"===ne)ve=oe(Ae)+ve,Ae="";else{var we=(Ae=+Ae)<0||1/Ae<0;if(Ae=isNaN(Ae)?le:oe(Math.abs(Ae),Kt),te&&(Ae=function(nt){var at,lt=nt.length,Rt=-1;t:for(var Bt=1;Bt<lt;++Bt)switch(nt[Bt]){case".":Rt=at=Bt;break;case"0":0===Rt&&(Rt=Bt),at=Bt;break;default:if(!+nt[Bt])break t;Rt>0&&(Rt=0)}return Rt>0?nt.slice(0,Rt)+nt.slice(at+1):nt}(Ae)),we&&0==+Ae&&"+"!==Bt&&(we=!1),pe=(we?"("===Bt?Bt:ue:"-"===Bt||"("===Bt?"":Bt)+pe,ve=("s"===ne?vn[8+Qi/3]:"")+ve+(we&&"("===Bt?")":""),se)for(at=-1,Lt=Ae.length;++at<Lt;)if(48>(fe=Ae.charCodeAt(at))||fe>57){ve=(46===fe?ce+Ae.slice(at+1):Ae.slice(at))+ve,Ae=Ae.slice(0,at);break}}$t&&!Ht&&(Ae=he(Ae,1/0));var Ce=pe.length+Ae.length+ve.length,je=Ce<jt?new Array(jt-Ce+1).join(lt):"";switch($t&&Ht&&(Ae=he(je+Ae,je.length?jt-ve.length:1/0),je=""),Rt){case"<":Ae=pe+Ae+ve+je;break;case"=":Ae=pe+je+Ae+ve;break;case"^":Ae=je.slice(0,Ce=je.length>>1)+pe+Ae+ve+je.slice(Ce);break;default:Ae=je+pe+Ae+ve}return de(Ae)}return x.toString=function(){return nt+""},x}},{"key":"_formatPrefix","value":function(nt,at){var lt=Zi(nt);lt.type="f";var Rt,Bt,Lt=this.newFormat(lt.toString()),Ht=3*Math.max(-8,Math.min(8,Math.floor((Rt=at,((Bt=Yi(Math.abs(Rt)))?Bt[1]:NaN)/3)))),jt=Math.pow(10,-Ht),$t=vn[8+Ht/3];return function(nt){return Lt(jt*nt)+$t}}}],[{"key":"getInstance","value":function(){return t.instance||(t.instance=new t),t.instance}}])}(),yn={"%":function(nt,at){return(100*nt).toFixed(at)},"b":function(nt){return Math.round(nt).toString(2)},"c":function(nt){return nt+""},"d":function(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)},"f":function(nt,at){return nt.toFixed(at)},"e":function(nt,at){return nt.toExponential(at)},"g":function(nt,at){return nt.toPrecision(at)},"o":function(nt){return Math.round(nt).toString(8)},"p":function(nt,at){return Xi(100*nt,at)},"r":Xi,"s":function(nt,at){var lt=Yi(nt,at);if(!lt)return nt+"";var Rt=lt[0],Bt=lt[1],Lt=Bt-(Qi=3*Math.max(-8,Math.min(8,Math.floor(Bt/3))))+1,Ht=Rt.length;return Lt===Ht?Rt:Lt>Ht?Rt+new Array(Lt-Ht+1).join("0"):Lt>0?Rt.slice(0,Lt)+"."+Rt.slice(Lt):"0."+new Array(1-Lt).join("0")+Yi(nt,Math.max(0,at+Lt-1))[0]},"X":function(nt){return Math.round(nt).toString(16).toUpperCase()},"x":function(nt){return Math.round(nt).toString(16)},"t":function(nt,at){return Number.isInteger(nt)?nt.toFixed(2):Math.floor(nt*Math.pow(10,at))/Math.pow(10,at)+""},"z":function(nt,at){return nt%1==0?nt+"":nt.toFixed(at)}};function tn(nt){for(var at=new Array(nt),lt=0;lt<nt;++lt)at[lt]=0;return at}function en(nt,at){return tn(nt).map((function(){return tn(at)}))}function nn(nt){return Math.sqrt(_e(nt,nt))}function rn(nt,at,lt){for(var Rt=0;Rt<at.length;++Rt)nt[Rt]=at[Rt]*lt}function an(nt,at,lt,Rt,Bt){for(var Lt=0;Lt<nt.length;++Lt)nt[Lt]=at*lt[Lt]+Rt*Bt[Lt]}function on(nt,at,lt){var Rt,Bt=(lt=lt||{}).maxIterations||200*at.length,Lt=lt.nonZeroDelta||1.05,Ht=lt.zeroDelta||.001,jt=lt.minErrorDelta||1e-6,$t=lt.minErrorDelta||1e-5,Kt=void 0!==lt.rho?lt.rho:1,te=void 0!==lt.chi?lt.chi:2,ne=void 0!==lt.psi?lt.psi:-.5,re=void 0!==lt.sigma?lt.sigma:.5,ae=at.length,oe=new Array(ae+1);oe[0]=at,oe[0].fx=nt(at),oe[0].id=0;for(var se=0;se<ae;++se){var le=at.slice();le[se]=le[se]?le[se]*Lt:Ht,oe[se+1]=le,oe[se+1].fx=nt(le),oe[se+1].id=se+1}function y(nt){for(var at=0;at<nt.length;at++)oe[ae][at]=nt[at];oe[ae].fx=nt.fx}for(var m=function(nt,at){return nt.fx-at.fx},ue=at.slice(),ce=at.slice(),he=at.slice(),de=at.slice(),fe=0;fe<Bt;++fe){if(oe.sort(m),lt.history){var pe=oe.map((function(nt){var at=nt.slice();return at.fx=nt.fx,at.id=nt.id,at}));pe.sort((function(nt,at){return nt.id-at.id})),lt.history.push({"x":oe[0].slice(),"fx":oe[0].fx,"simplex":pe})}Rt=0;for(var ve=0;ve<ae;++ve)Rt=Math.max(Rt,Math.abs(oe[0][ve]-oe[1][ve]));if(Math.abs(oe[0].fx-oe[ae].fx)<jt&&Rt<$t)break;for(var Ae=0;Ae<ae;++Ae){ue[Ae]=0;for(var we=0;we<ae;++we)ue[Ae]+=oe[we][Ae];ue[Ae]/=ae}var Ce=oe[ae];if(an(ce,1+Kt,ue,-Kt,Ce),ce.fx=nt(ce),ce.fx<oe[0].fx)an(de,1+te,ue,-te,Ce),de.fx=nt(de),de.fx<ce.fx?y(de):y(ce);else if(ce.fx>=oe[ae-1].fx){var je=!1;if(ce.fx>Ce.fx?(an(he,1+ne,ue,-ne,Ce),he.fx=nt(he),he.fx<Ce.fx?y(he):je=!0):(an(he,1-ne*Kt,ue,ne*Kt,Ce),he.fx=nt(he),he.fx<ce.fx?y(he):je=!0),je){if(re>=1)break;for(var Ne=1;Ne<oe.length;++Ne)an(oe[Ne],1-re,oe[0],re,oe[Ne]),oe[Ne].fx=nt(oe[Ne])}}else y(ce)}return oe.sort(m),{"fx":oe[0].fx,"x":oe[0]}}function sn(nt,at,lt,Rt,Bt,Lt,Ht){var jt=lt.fx,$t=_e(lt.fxprime,at),Kt=jt,te=jt,ne=$t,re=0;function p(te,re,ae){for(var oe=0;oe<16;++oe)if(Bt=(te+re)/2,an(Rt.x,1,lt.x,Bt,at),Kt=Rt.fx=nt(Rt.x,Rt.fxprime),ne=_e(Rt.fxprime,at),Kt>jt+Lt*Bt*$t||Kt>=ae)re=Bt;else{if(Math.abs(ne)<=-Ht*$t)return Bt;ne*(re-te)>=0&&(re=te),te=Bt,ae=Kt}return 0}Bt=Bt||1,Lt=Lt||1e-6,Ht=Ht||.1;for(var ae=0;ae<10;++ae){if(an(Rt.x,1,lt.x,Bt,at),Kt=Rt.fx=nt(Rt.x,Rt.fxprime),ne=_e(Rt.fxprime,at),Kt>jt+Lt*Bt*$t||ae&&Kt>=te)return p(re,Bt,te);if(Math.abs(ne)<=-Ht*$t)return Bt;if(ne>=0)return p(Bt,re,Kt);te=Kt,re=Bt,Bt*=2}return Bt}function ln(nt,at,lt){var Rt,Bt={"x":at.slice(),"fx":0,"fxprime":at.slice()},Lt={"x":at.slice(),"fx":0,"fxprime":at.slice()},Ht=at.slice(),jt=1,$t=(lt=lt||{}).maxIterations||20*at.length;Bt.fx=nt(Bt.x,Bt.fxprime);var Kt=Bt.fxprime.slice();rn(Kt,Bt.fxprime,-1);for(var te=0;te<$t;++te){if(jt=sn(nt,Kt,Bt,Lt,jt),lt.history&&lt.history.push({"x":Bt.x.slice(),"fx":Bt.fx,"fxprime":Bt.fxprime.slice(),"alpha":jt}),jt){an(Ht,1,Lt.fxprime,-1,Bt.fxprime);var ne=_e(Bt.fxprime,Bt.fxprime);an(Kt,Math.max(0,_e(Ht,Lt.fxprime)/ne),Kt,-1,Lt.fxprime),Rt=Bt,Bt=Lt,Lt=Rt}else rn(Kt,Bt.fxprime,-1);if(nn(Bt.fxprime)<=1e-5)break}return lt.history&&lt.history.push({"x":Bt.x.slice(),"fx":Bt.fx,"fxprime":Bt.fxprime.slice(),"alpha":jt}),Bt}var un=function(nt,at){var lt=at.callback;return lt&&(nt=nt.filter(lt)),nt};function cn(){return new hn}function hn(){this.reset()}hn.prototype={"constructor":hn,"reset":function(){this.s=this.t=0},"add":function(nt){pn(mn,nt,this.t),pn(this,mn.s,this.s),this.s?this.t+=mn.t:this.s=mn.t},"valueOf":function(){return this.s}};var mn=new hn;function pn(nt,at,lt){var Rt=nt.s=at+lt,Bt=Rt-at,Lt=Rt-Bt;nt.t=at-Lt+(lt-Bt)}var _n=1e-6,bn=Math.PI,xn=bn/2,kn=bn/4,Sn=2*bn,An=180/bn,wn=bn/180,Cn=Math.abs,Mn=Math.atan,Tn=Math.atan2,En=Math.cos,Pn=Math.exp,Rn=Math.log,On=Math.pow,Fn=Math.sin,or=Math.sign||function(nt){return nt>0?1:nt<0?-1:0},sr=Math.sqrt,lr=Math.tan;function Bn(nt){return nt>1?0:nt<-1?bn:Math.acos(nt)}function In(nt){return nt>1?xn:nt<-1?-xn:Math.asin(nt)}function Ln(){}function Dn(nt,at){nt&&yr.hasOwnProperty(nt.type)&&yr[nt.type](nt,at)}var vr={"Feature":function(nt,at){Dn(nt.geometry,at)},"FeatureCollection":function(nt,at){for(var lt=nt.features,Rt=-1,Bt=lt.length;++Rt<Bt;)Dn(lt[Rt].geometry,at)}},yr={"Sphere":function(nt,at){at.sphere()},"Point":function(nt,at){nt=nt.coordinates,at.point(nt[0],nt[1],nt[2])},"MultiPoint":function(nt,at){for(var lt=nt.coordinates,Rt=-1,Bt=lt.length;++Rt<Bt;)nt=lt[Rt],at.point(nt[0],nt[1],nt[2])},"LineString":function(nt,at){zn(nt.coordinates,at,0)},"MultiLineString":function(nt,at){for(var lt=nt.coordinates,Rt=-1,Bt=lt.length;++Rt<Bt;)zn(lt[Rt],at,0)},"Polygon":function(nt,at){Hn(nt.coordinates,at)},"MultiPolygon":function(nt,at){for(var lt=nt.coordinates,Rt=-1,Bt=lt.length;++Rt<Bt;)Hn(lt[Rt],at)},"GeometryCollection":function(nt,at){for(var lt=nt.geometries,Rt=-1,Bt=lt.length;++Rt<Bt;)Dn(lt[Rt],at)}};function zn(nt,at,lt){var Rt,Bt=-1,Lt=nt.length-lt;for(at.lineStart();++Bt<Lt;)Rt=nt[Bt],at.point(Rt[0],Rt[1],Rt[2]);at.lineEnd()}function Hn(nt,at){var lt=-1,Rt=nt.length;for(at.polygonStart();++lt<Rt;)zn(nt[lt],at,1);at.polygonEnd()}function jn(nt,at){nt&&vr.hasOwnProperty(nt.type)?vr[nt.type](nt,at):Dn(nt,at)}function Nn(nt){return[Tn(nt[1],nt[0]),In(nt[2])]}function Vn(nt){var at=nt[0],lt=nt[1],Rt=En(lt);return[Rt*En(at),Rt*Fn(at),Fn(lt)]}function Gn(nt,at){return nt[0]*at[0]+nt[1]*at[1]+nt[2]*at[2]}function Wn(nt,at){return[nt[1]*at[2]-nt[2]*at[1],nt[2]*at[0]-nt[0]*at[2],nt[0]*at[1]-nt[1]*at[0]]}function Un(nt,at){nt[0]+=at[0],nt[1]+=at[1],nt[2]+=at[2]}function Yn(nt,at){return[nt[0]*at,nt[1]*at,nt[2]*at]}function Xn(nt){var at=sr(nt[0]*nt[0]+nt[1]*nt[1]+nt[2]*nt[2]);nt[0]/=at,nt[1]/=at,nt[2]/=at}function Kn(nt,at){function i(lt,Rt){return lt=nt(lt,Rt),at(lt[0],lt[1])}return nt.invert&&at.invert&&(i.invert=function(lt,Rt){return(lt=at.invert(lt,Rt))&&nt.invert(lt[0],lt[1])}),i}function qn(nt,at){return[Cn(nt)>bn?nt+Math.round(-nt/Sn)*Sn:nt,at]}function Zn(nt,at,lt){return(nt%=Sn)?at||lt?Kn(Qn(nt),$n(at,lt)):Qn(nt):at||lt?$n(at,lt):qn}function Jn(nt){return function(at,lt){return[(at+=nt)>bn?at-Sn:at<-bn?at+Sn:at,lt]}}function Qn(nt){var at=Jn(nt);return at.invert=Jn(-nt),at}function $n(nt,at){var lt=En(nt),Rt=Fn(nt),Bt=En(at),Lt=Fn(at);function o(nt,at){var Ht=En(at),jt=En(nt)*Ht,$t=Fn(nt)*Ht,Kt=Fn(at),te=Kt*lt+jt*Rt;return[Tn($t*Bt-te*Lt,jt*lt-Kt*Rt),In(te*Bt+$t*Lt)]}return o.invert=function(nt,at){var Ht=En(at),jt=En(nt)*Ht,$t=Fn(nt)*Ht,Kt=Fn(at),te=Kt*Bt-$t*Lt;return[Tn($t*Bt+Kt*Lt,jt*lt+te*Rt),In(te*lt-jt*Rt)]},o}function tr(nt,at){(at=Vn(at))[0]-=nt,Xn(at);var lt=Bn(-at[1]);return((-at[2]<0?-lt:lt)+Sn-_n)%Sn}function er(){var nt,at=[];return{"point":function(at,lt,Rt){nt.push([at,lt,Rt])},"lineStart":function(){at.push(nt=[])},"lineEnd":Ln,"rejoin":function(){at.length>1&&at.push(at.pop().concat(at.shift()))},"result":function(){var lt=at;return at=[],nt=null,lt}}}function ir(nt,at){return Cn(nt[0]-at[0])<_n&&Cn(nt[1]-at[1])<_n}function nr(nt,at,lt,Rt){this.x=nt,this.z=at,this.o=lt,this.e=Rt,this.v=!1,this.n=this.p=null}function rr(nt,at,lt,Rt,Bt){var Lt,Ht,jt=[],$t=[];if(nt.forEach((function(nt){if(!((at=nt.length-1)<=0)){var at,lt,Rt=nt[0],Ht=nt[at];if(ir(Rt,Ht)){if(!Rt[2]&&!Ht[2]){for(Bt.lineStart(),Lt=0;Lt<at;++Lt)Bt.point((Rt=nt[Lt])[0],Rt[1]);return void Bt.lineEnd()}Ht[0]+=2*_n}jt.push(lt=new nr(Rt,nt,null,!0)),$t.push(lt.o=new nr(Rt,null,lt,!1)),jt.push(lt=new nr(Ht,nt,null,!1)),$t.push(lt.o=new nr(Ht,null,lt,!0))}})),jt.length){for($t.sort(at),ar(jt),ar($t),Lt=0,Ht=$t.length;Lt<Ht;++Lt)$t[Lt].e=lt=!lt;for(var Kt,te,ne=jt[0];;){for(var re=ne,ae=!0;re.v;)if((re=re.n)===ne)return;Kt=re.z,Bt.lineStart();do{if(re.v=re.o.v=!0,re.e){if(ae)for(Lt=0,Ht=Kt.length;Lt<Ht;++Lt)Bt.point((te=Kt[Lt])[0],te[1]);else Rt(re.x,re.n.x,1,Bt);re=re.n}else{if(ae)for(Kt=re.p.z,Lt=Kt.length-1;Lt>=0;--Lt)Bt.point((te=Kt[Lt])[0],te[1]);else Rt(re.x,re.p.x,-1,Bt);re=re.p}Kt=(re=re.o).z,ae=!ae}while(!re.v);Bt.lineEnd()}}}function ar(nt){if(at=nt.length){for(var at,lt,Rt=0,Bt=nt[0];++Rt<at;)Bt.n=lt=nt[Rt],lt.p=Bt,Bt=lt;Bt.n=lt=nt[0],lt.p=Bt}}qn.invert=qn;var mr,xr,kr=cn();function ur(nt){return Cn(nt[0])<=bn?nt[0]:or(nt[0])*((Cn(nt[0])+bn)%Sn-bn)}function cr(nt,at){return nt<at?-1:nt>at?1:nt>=at?0:NaN}function hr(nt){for(var at,lt,Rt,Bt=nt.length,Lt=-1,Ht=0;++Lt<Bt;)Ht+=nt[Lt].length;for(lt=new Array(Ht);--Bt>=0;)for(at=(Rt=nt[Bt]).length;--at>=0;)lt[--Ht]=Rt[at];return lt}function dr(nt,at,lt,Rt){return function(Bt){var Lt,Ht,jt,$t=at(Bt),Kt=er(),te=at(Kt),ne=!1,re={"point":p,"lineStart":v,"lineEnd":g,"polygonStart":function(){re.point=y,re.lineStart=m,re.lineEnd=_,Ht=[],Lt=[]},"polygonEnd":function(){re.point=p,re.lineStart=v,re.lineEnd=g,Ht=hr(Ht);var nt=function(nt,at){var lt=ur(at),Rt=at[1],Bt=Fn(Rt),Lt=[Fn(lt),-En(lt),0],Ht=0,jt=0;kr.reset(),1===Bt?Rt=xn+_n:-1===Bt&&(Rt=-xn-_n);for(var $t=0,Kt=nt.length;$t<Kt;++$t)if(ne=(te=nt[$t]).length)for(var te,ne,re=te[ne-1],ae=ur(re),oe=re[1]/2+kn,se=Fn(oe),le=En(oe),ue=0;ue<ne;++ue,ae=he,se=fe,le=pe,re=ce){var ce=te[ue],he=ur(ce),de=ce[1]/2+kn,fe=Fn(de),pe=En(de),ve=he-ae,Ae=ve>=0?1:-1,we=Ae*ve,Ce=we>bn,je=se*fe;if(kr.add(Tn(je*Ae*Fn(we),le*pe+je*En(we))),Ht+=Ce?ve+Ae*Sn:ve,Ce^ae>=lt^he>=lt){var Ne=Wn(Vn(re),Vn(ce));Xn(Ne);var Ve=Wn(Lt,Ne);Xn(Ve);var Ge=(Ce^ve>=0?-1:1)*In(Ve[2]);(Rt>Ge||Rt===Ge&&(Ne[0]||Ne[1]))&&(jt+=Ce^ve>=0?1:-1)}}return(Ht<-_n||Ht<_n&&kr<-_n)^1&jt}(Lt,Rt);Ht.length?(ne||(Bt.polygonStart(),ne=!0),rr(Ht,fr,nt,lt,Bt)):nt&&(ne||(Bt.polygonStart(),ne=!0),Bt.lineStart(),lt(null,null,1,Bt),Bt.lineEnd()),ne&&(Bt.polygonEnd(),ne=!1),Ht=Lt=null},"sphere":function(){Bt.polygonStart(),Bt.lineStart(),lt(null,null,1,Bt),Bt.lineEnd(),Bt.polygonEnd()}};function p(at,lt){nt(at,lt)&&Bt.point(at,lt)}function f(nt,at){$t.point(nt,at)}function v(){re.point=f,$t.lineStart()}function g(){re.point=p,$t.lineEnd()}function y(nt,at){jt.push([nt,at]),te.point(nt,at)}function m(){te.lineStart(),jt=[]}function _(){y(jt[0][0],jt[0][1]),te.lineEnd();var nt,at,lt,Rt,$t=te.clean(),re=Kt.result(),ae=re.length;if(jt.pop(),Lt.push(jt),jt=null,ae)if(1&$t){if((at=(lt=re[0]).length-1)>0){for(ne||(Bt.polygonStart(),ne=!0),Bt.lineStart(),nt=0;nt<at;++nt)Bt.point((Rt=lt[nt])[0],Rt[1]);Bt.lineEnd()}}else ae>1&&2&$t&&re.push(re.pop().concat(re.shift())),Ht.push(re.filter(pr))}return re}}function pr(nt){return nt.length>1}function fr(nt,at){return((nt=nt.x)[0]<0?nt[1]-xn-_n:xn-nt[1])-((at=at.x)[0]<0?at[1]-xn-_n:xn-at[1])}1===(mr=cr).length&&(xr=mr,mr=function(nt,at){return cr(xr(nt),at)});var Sr=dr((function(){return!0}),(function(nt){var at,lt=NaN,Rt=NaN,Bt=NaN;return{"lineStart":function(){nt.lineStart(),at=1},"point":function(Lt,Ht){var jt=Lt>0?bn:-bn,$t=Cn(Lt-lt);Cn($t-bn)<_n?(nt.point(lt,Rt=(Rt+Ht)/2>0?xn:-xn),nt.point(Bt,Rt),nt.lineEnd(),nt.lineStart(),nt.point(jt,Rt),nt.point(Lt,Rt),at=0):Bt!==jt&&$t>=bn&&(Cn(lt-Bt)<_n&&(lt-=Bt*_n),Cn(Lt-jt)<_n&&(Lt-=jt*_n),Rt=function(nt,at,lt,Rt){var Bt,Lt,Ht=Fn(nt-lt);return Cn(Ht)>_n?Mn((Fn(at)*(Lt=En(Rt))*Fn(lt)-Fn(Rt)*(Bt=En(at))*Fn(nt))/(Bt*Lt*Ht)):(at+Rt)/2}(lt,Rt,Lt,Ht),nt.point(Bt,Rt),nt.lineEnd(),nt.lineStart(),nt.point(jt,Rt),at=0),nt.point(lt=Lt,Rt=Ht),Bt=jt},"lineEnd":function(){nt.lineEnd(),lt=Rt=NaN},"clean":function(){return 2-at}}}),(function(nt,at,lt,Rt){var Bt;if(null==nt)Bt=lt*xn,Rt.point(-bn,Bt),Rt.point(0,Bt),Rt.point(bn,Bt),Rt.point(bn,0),Rt.point(bn,-Bt),Rt.point(0,-Bt),Rt.point(-bn,-Bt),Rt.point(-bn,0),Rt.point(-bn,Bt);else if(Cn(nt[0]-at[0])>_n){var Lt=nt[0]<at[0]?bn:-bn;Bt=lt*Lt/2,Rt.point(-Lt,Bt),Rt.point(0,Bt),Rt.point(Lt,Bt)}else Rt.point(at[0],at[1])}),[-bn,-xn]);function gr(nt){var at=En(nt),lt=6*wn,Rt=at>0,Bt=Cn(at)>_n;function a(nt,lt){return En(nt)*En(lt)>at}function o(nt,lt,Rt){var Bt=[1,0,0],Lt=Wn(Vn(nt),Vn(lt)),Ht=Gn(Lt,Lt),jt=Lt[0],$t=Ht-jt*jt;if(!$t)return!Rt&&nt;var Kt=at*Ht/$t,te=-at*jt/$t,ne=Wn(Bt,Lt),re=Yn(Bt,Kt);Un(re,Yn(Lt,te));var ae=ne,oe=Gn(re,ae),se=Gn(ae,ae),le=oe*oe-se*(Gn(re,re)-1);if(!(le<0)){var ue=sr(le),ce=Yn(ae,(-oe-ue)/se);if(Un(ce,re),ce=Nn(ce),!Rt)return ce;var he,de=nt[0],fe=lt[0],pe=nt[1],ve=lt[1];fe<de&&(he=de,de=fe,fe=he);var Ae=fe-de,we=Cn(Ae-bn)<_n;if(!we&&ve<pe&&(he=pe,pe=ve,ve=he),we||Ae<_n?we?pe+ve>0^ce[1]<(Cn(ce[0]-de)<_n?pe:ve):pe<=ce[1]&&ce[1]<=ve:Ae>bn^(de<=ce[0]&&ce[0]<=fe)){var Ce=Yn(ae,(-oe+ue)/se);return Un(Ce,re),[ce,Nn(Ce)]}}}function s(at,lt){var Bt=Rt?nt:bn-nt,Lt=0;return at<-Bt?Lt|=1:at>Bt&&(Lt|=2),lt<-Bt?Lt|=4:lt>Bt&&(Lt|=8),Lt}return dr(a,(function(nt){var at,lt,Lt,Ht,jt;return{"lineStart":function(){Ht=Lt=!1,jt=1},"point":function($t,Kt){var te,ne=[$t,Kt],re=a($t,Kt),ae=Rt?re?0:s($t,Kt):re?s($t+($t<0?bn:-bn),Kt):0;if(!at&&(Ht=Lt=re)&&nt.lineStart(),re!==Lt&&(!(te=o(at,ne))||ir(at,te)||ir(ne,te))&&(ne[2]=1),re!==Lt)jt=0,re?(nt.lineStart(),te=o(ne,at),nt.point(te[0],te[1])):(te=o(at,ne),nt.point(te[0],te[1],2),nt.lineEnd()),at=te;else if(Bt&&at&&Rt^re){var oe;ae&lt||!(oe=o(ne,at,!0))||(jt=0,Rt?(nt.lineStart(),nt.point(oe[0][0],oe[0][1]),nt.point(oe[1][0],oe[1][1]),nt.lineEnd()):(nt.point(oe[1][0],oe[1][1]),nt.lineEnd(),nt.lineStart(),nt.point(oe[0][0],oe[0][1],3)))}!re||at&&ir(at,ne)||nt.point(ne[0],ne[1]),at=ne,Lt=re,lt=ae},"lineEnd":function(){Lt&&nt.lineEnd(),at=null},"clean":function(){return jt|(Ht&&Lt)<<1}}}),(function(at,Rt,Bt,Lt){!function(nt,at,lt,Rt,Bt,Lt){if(lt){var Ht=En(at),jt=Fn(at),$t=Rt*lt;null==Bt?(Bt=at+Rt*Sn,Lt=at-$t/2):(Bt=tr(Ht,Bt),Lt=tr(Ht,Lt),(Rt>0?Bt<Lt:Bt>Lt)&&(Bt+=Rt*Sn));for(var Kt,te=Bt;Rt>0?te>Lt:te<Lt;te-=$t)Kt=Nn([Ht,-jt*En(te),-jt*Fn(te)]),nt.point(Kt[0],Kt[1])}}(Lt,nt,lt,Bt,at,Rt)}),Rt?[0,-nt]:[-bn,nt-bn])}var Ar=1e9,wr=-Ar;function _r(nt,at,lt,Rt){function r(Bt,Lt){return nt<=Bt&&Bt<=lt&&at<=Lt&&Lt<=Rt}function a(Bt,Lt,Ht,jt){var $t=0,Kt=0;if(null==Bt||($t=o(Bt,Ht))!==(Kt=o(Lt,Ht))||l(Bt,Lt)<0^Ht>0)do{jt.point(0===$t||3===$t?nt:lt,$t>1?Rt:at)}while(($t=($t+Ht+4)%4)!==Kt);else jt.point(Lt[0],Lt[1])}function o(Rt,Bt){return Cn(Rt[0]-nt)<_n?Bt>0?0:3:Cn(Rt[0]-lt)<_n?Bt>0?2:1:Cn(Rt[1]-at)<_n?Bt>0?1:0:Bt>0?3:2}function s(nt,at){return l(nt.x,at.x)}function l(nt,at){var lt=o(nt,1),Rt=o(at,1);return lt!==Rt?lt-Rt:0===lt?at[1]-nt[1]:1===lt?nt[0]-at[0]:2===lt?nt[1]-at[1]:at[0]-nt[0]}return function(Bt){var Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le=Bt,ue=er(),ce={"point":k,"lineStart":function(){ce.point=S,Ht&&Ht.push(jt=[]),oe=!0,ae=!1,ne=re=NaN},"lineEnd":function(){Lt&&(S($t,Kt),te&&ae&&ue.rejoin(),Lt.push(ue.result())),ce.point=k,ae&&le.lineEnd()},"polygonStart":function(){le=ue,Lt=[],Ht=[],se=!0},"polygonEnd":function(){var at=function(){for(var at=0,lt=0,Bt=Ht.length;lt<Bt;++lt)for(var Lt,jt,$t=Ht[lt],Kt=1,te=$t.length,ne=$t[0],re=ne[0],ae=ne[1];Kt<te;++Kt)Lt=re,jt=ae,re=(ne=$t[Kt])[0],ae=ne[1],jt<=Rt?ae>Rt&&(re-Lt)*(Rt-jt)>(ae-jt)*(nt-Lt)&&++at:ae<=Rt&&(re-Lt)*(Rt-jt)<(ae-jt)*(nt-Lt)&&--at;return at}(),lt=se&&at,$t=(Lt=hr(Lt)).length;(lt||$t)&&(Bt.polygonStart(),lt&&(Bt.lineStart(),a(null,null,1,Bt),Bt.lineEnd()),$t&&rr(Lt,s,at,a,Bt),Bt.polygonEnd()),le=Bt,Lt=Ht=jt=null}};function k(nt,at){r(nt,at)&&le.point(nt,at)}function S(Bt,Lt){var ue=r(Bt,Lt);if(Ht&&jt.push([Bt,Lt]),oe)$t=Bt,Kt=Lt,te=ue,oe=!1,ue&&(le.lineStart(),le.point(Bt,Lt));else if(ue&&ae)le.point(Bt,Lt);else{var ce=[ne=Math.max(wr,Math.min(Ar,ne)),re=Math.max(wr,Math.min(Ar,re))],he=[Bt=Math.max(wr,Math.min(Ar,Bt)),Lt=Math.max(wr,Math.min(Ar,Lt))];!function(nt,at,lt,Rt,Bt,Lt){var Ht,jt=nt[0],$t=nt[1],Kt=0,te=1,ne=at[0]-jt,re=at[1]-$t;if(Ht=lt-jt,ne||!(Ht>0)){if(Ht/=ne,ne<0){if(Ht<Kt)return;Ht<te&&(te=Ht)}else if(ne>0){if(Ht>te)return;Ht>Kt&&(Kt=Ht)}if(Ht=Bt-jt,ne||!(Ht<0)){if(Ht/=ne,ne<0){if(Ht>te)return;Ht>Kt&&(Kt=Ht)}else if(ne>0){if(Ht<Kt)return;Ht<te&&(te=Ht)}if(Ht=Rt-$t,re||!(Ht>0)){if(Ht/=re,re<0){if(Ht<Kt)return;Ht<te&&(te=Ht)}else if(re>0){if(Ht>te)return;Ht>Kt&&(Kt=Ht)}if(Ht=Lt-$t,re||!(Ht<0)){if(Ht/=re,re<0){if(Ht>te)return;Ht>Kt&&(Kt=Ht)}else if(re>0){if(Ht<Kt)return;Ht<te&&(te=Ht)}return Kt>0&&(nt[0]=jt+Kt*ne,nt[1]=$t+Kt*re),te<1&&(at[0]=jt+te*ne,at[1]=$t+te*re),!0}}}}}(ce,he,nt,at,lt,Rt)?ue&&(le.lineStart(),le.point(Bt,Lt),se=!1):(ae||(le.lineStart(),le.point(ce[0],ce[1])),le.point(he[0],he[1]),ue||le.lineEnd(),se=!1)}ne=Bt,re=Lt,ae=ue}return ce}}function br(nt){return nt}var Mr,Tr,Ir,Br,Or=cn(),Dr=cn(),Lr={"point":Ln,"lineStart":Ln,"lineEnd":Ln,"polygonStart":function(){Lr.lineStart=Cr,Lr.lineEnd=Rr},"polygonEnd":function(){Lr.lineStart=Lr.lineEnd=Lr.point=Ln,Or.add(Cn(Dr)),Dr.reset()},"result":function(){var nt=Or/2;return Or.reset(),nt}};function Cr(){Lr.point=Er}function Er(nt,at){Lr.point=Pr,Mr=Ir=nt,Tr=Br=at}function Pr(nt,at){Dr.add(Br*nt-Ir*at),Ir=nt,Br=at}function Rr(){Pr(Mr,Tr)}var Fr,zr,Hr,jr,Nr=Lr,Vr=1/0,Wr=Vr,Gr=-Vr,Ur=Gr,Yr={"point":function(nt,at){nt<Vr&&(Vr=nt),nt>Gr&&(Gr=nt),at<Wr&&(Wr=at),at>Ur&&(Ur=at)},"lineStart":Ln,"lineEnd":Ln,"polygonStart":Ln,"polygonEnd":Ln,"result":function(){var nt=[[Vr,Wr],[Gr,Ur]];return Gr=Ur=-(Wr=Vr=1/0),nt}},Xr=0,qr=0,Kr=0,Zr=0,Jr=0,sa=0,ua=0,ca=0,ha=0,da={"point":Qr,"lineStart":$r,"lineEnd":ia,"polygonStart":function(){da.lineStart=na,da.lineEnd=ra},"polygonEnd":function(){da.point=Qr,da.lineStart=$r,da.lineEnd=ia},"result":function(){var nt=ha?[ua/ha,ca/ha]:sa?[Zr/sa,Jr/sa]:Kr?[Xr/Kr,qr/Kr]:[NaN,NaN];return Xr=qr=Kr=Zr=Jr=sa=ua=ca=ha=0,nt}};function Qr(nt,at){Xr+=nt,qr+=at,++Kr}function $r(){da.point=ta}function ta(nt,at){da.point=ea,Qr(Hr=nt,jr=at)}function ea(nt,at){var lt=nt-Hr,Rt=at-jr,Bt=sr(lt*lt+Rt*Rt);Zr+=Bt*(Hr+nt)/2,Jr+=Bt*(jr+at)/2,sa+=Bt,Qr(Hr=nt,jr=at)}function ia(){da.point=Qr}function na(){da.point=aa}function ra(){oa(Fr,zr)}function aa(nt,at){da.point=oa,Qr(Fr=Hr=nt,zr=jr=at)}function oa(nt,at){var lt=nt-Hr,Rt=at-jr,Bt=sr(lt*lt+Rt*Rt);Zr+=Bt*(Hr+nt)/2,Jr+=Bt*(jr+at)/2,sa+=Bt,ua+=(Bt=jr*nt-Hr*at)*(Hr+nt),ca+=Bt*(jr+at),ha+=3*Bt,Qr(Hr=nt,jr=at)}var fa=da;function la(nt){this._context=nt}la.prototype={"_radius":4.5,"pointRadius":function(nt){return this._radius=nt,this},"polygonStart":function(){this._line=0},"polygonEnd":function(){this._line=NaN},"lineStart":function(){this._point=0},"lineEnd":function(){0===this._line&&this._context.closePath(),this._point=NaN},"point":function(nt,at){switch(this._point){case 0:this._context.moveTo(nt,at),this._point=1;break;case 1:this._context.lineTo(nt,at);break;default:this._context.moveTo(nt+this._radius,at),this._context.arc(nt,at,this._radius,0,Sn)}},"result":Ln};var pa,va,ma,Ea,Pa,Ba=cn(),Wa={"point":Ln,"lineStart":function(){Wa.point=ga},"lineEnd":function(){pa&&ya(va,ma),Wa.point=Ln},"polygonStart":function(){pa=!0},"polygonEnd":function(){pa=null},"result":function(){var nt=+Ba;return Ba.reset(),nt}};function ga(nt,at){Wa.point=ya,va=Ea=nt,ma=Pa=at}function ya(nt,at){Ea-=nt,Pa-=at,Ba.add(sr(Ea*Ea+Pa*Pa)),Ea=nt,Pa=at}var Ga=Wa;function _a(){this._string=[]}function ba(nt){return"m0,"+nt+"a"+nt+","+nt+" 0 1,1 0,"+-2*nt+"a"+nt+","+nt+" 0 1,1 0,"+2*nt+"z"}function xa(nt,at){var lt,Rt,Bt=4.5;function a(nt){return nt&&("function"==typeof Bt&&Rt.pointRadius(+Bt.apply(this,arguments)),jn(nt,lt(Rt))),Rt.result()}return a.area=function(nt){return jn(nt,lt(Nr)),Nr.result()},a.measure=function(nt){return jn(nt,lt(Ga)),Ga.result()},a.bounds=function(nt){return jn(nt,lt(Yr)),Yr.result()},a.centroid=function(nt){return jn(nt,lt(fa)),fa.result()},a.projection=function(at){return arguments.length?(lt=null==at?(nt=null,br):(nt=at).stream,a):nt},a.context=function(nt){return arguments.length?(Rt=null==nt?(at=null,new _a):new la(at=nt),"function"!=typeof Bt&&Rt.pointRadius(Bt),a):at},a.pointRadius=function(nt){return arguments.length?(Bt="function"==typeof nt?nt:(Rt.pointRadius(+nt),+nt),a):Bt},a.projection(nt).context(at)}function ka(nt){return function(at){var lt=new Sa;for(var Rt in nt)lt[Rt]=nt[Rt];return lt.stream=at,lt}}function Sa(){}function Aa(nt,at,lt){var Rt=nt.clipExtent&&nt.clipExtent();return nt.scale(150).translate([0,0]),null!=Rt&&nt.clipExtent(null),jn(lt,nt.stream(Yr)),at(Yr.result()),null!=Rt&&nt.clipExtent(Rt),nt}function wa(nt,at,lt){return Aa(nt,(function(lt){var Rt=at[1][0]-at[0][0],Bt=at[1][1]-at[0][1],Lt=Math.min(Rt/(lt[1][0]-lt[0][0]),Bt/(lt[1][1]-lt[0][1])),Ht=+at[0][0]+(Rt-Lt*(lt[1][0]+lt[0][0]))/2,jt=+at[0][1]+(Bt-Lt*(lt[1][1]+lt[0][1]))/2;nt.scale(150*Lt).translate([Ht,jt])}),lt)}function Ma(nt,at,lt){return wa(nt,[[0,0],at],lt)}function Ta(nt,at,lt){return Aa(nt,(function(lt){var Rt=+at,Bt=Rt/(lt[1][0]-lt[0][0]),Lt=(Rt-Bt*(lt[1][0]+lt[0][0]))/2,Ht=-Bt*lt[0][1];nt.scale(150*Bt).translate([Lt,Ht])}),lt)}function Ca(nt,at,lt){return Aa(nt,(function(lt){var Rt=+at,Bt=Rt/(lt[1][1]-lt[0][1]),Lt=-Bt*lt[0][0],Ht=(Rt-Bt*(lt[1][1]+lt[0][1]))/2;nt.scale(150*Bt).translate([Lt,Ht])}),lt)}_a.prototype={"_radius":4.5,"_circle":ba(4.5),"pointRadius":function(nt){return(nt=+nt)!==this._radius&&(this._radius=nt,this._circle=null),this},"polygonStart":function(){this._line=0},"polygonEnd":function(){this._line=NaN},"lineStart":function(){this._point=0},"lineEnd":function(){0===this._line&&this._string.push("Z"),this._point=NaN},"point":function(nt,at){switch(this._point){case 0:this._string.push("M",nt,",",at),this._point=1;break;case 1:this._string.push("L",nt,",",at);break;default:null==this._circle&&(this._circle=ba(this._radius)),this._string.push("M",nt,",",at,this._circle)}},"result":function(){if(this._string.length){var nt=this._string.join("");return this._string=[],nt}return null}},Sa.prototype={"constructor":Sa,"point":function(nt,at){this.stream.point(nt,at)},"sphere":function(){this.stream.sphere()},"lineStart":function(){this.stream.lineStart()},"lineEnd":function(){this.stream.lineEnd()},"polygonStart":function(){this.stream.polygonStart()},"polygonEnd":function(){this.stream.polygonEnd()}};var $a=16,Qa=En(30*wn);function Ra(nt,at){return+at?function(nt,at){function i(lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se){var le=$t-lt,ue=Kt-Rt,ce=le*le+ue*ue;if(ce>4*at&&oe--){var he=Lt+ne,de=Ht+re,fe=jt+ae,pe=sr(he*he+de*de+fe*fe),ve=In(fe/=pe),Ae=Cn(Cn(fe)-1)<_n||Cn(Bt-te)<_n?(Bt+te)/2:Tn(de,he),we=nt(Ae,ve),Ce=we[0],je=we[1],Ne=Ce-lt,Ve=je-Rt,Ge=ue*Ne-le*Ve;(Ge*Ge/ce>at||Cn((le*Ne+ue*Ve)/ce-.5)>.3||Lt*ne+Ht*re+jt*ae<Qa)&&(i(lt,Rt,Bt,Lt,Ht,jt,Ce,je,Ae,he/=pe,de/=pe,fe,oe,se),se.point(Ce,je),i(Ce,je,Ae,he,de,fe,$t,Kt,te,ne,re,ae,oe,se))}}return function(at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe={"point":g,"lineStart":y,"lineEnd":_,"polygonStart":function(){at.polygonStart(),oe.lineStart=b},"polygonEnd":function(){at.polygonEnd(),oe.lineStart=y}};function g(lt,Rt){lt=nt(lt,Rt),at.point(lt[0],lt[1])}function y(){Kt=NaN,oe.point=m,at.lineStart()}function m(lt,Rt){var Bt=Vn([lt,Rt]),Lt=nt(lt,Rt);i(Kt,te,$t,ne,re,ae,Kt=Lt[0],te=Lt[1],$t=lt,ne=Bt[0],re=Bt[1],ae=Bt[2],$a,at),at.point(Kt,te)}function _(){oe.point=g,at.lineEnd()}function b(){y(),oe.point=x,oe.lineEnd=k}function x(nt,at){m(lt=nt,at),Rt=Kt,Bt=te,Lt=ne,Ht=re,jt=ae,oe.point=m}function k(){i(Kt,te,$t,ne,re,ae,Rt,Bt,lt,Lt,Ht,jt,$a,at),oe.lineEnd=_,_()}return oe}}(nt,at):function(nt){return ka({"point":function(at,lt){at=nt(at,lt),this.stream.point(at[0],at[1])}})}(nt)}var Ja=ka({"point":function(nt,at){this.stream.point(nt*wn,at*wn)}});function Ia(nt,at,lt,Rt,Bt){function a(Lt,Ht){return[at+nt*(Lt*=Rt),lt-nt*(Ht*=Bt)]}return a.invert=function(Lt,Ht){return[(Lt-at)/nt*Rt,(lt-Ht)/nt*Bt]},a}function La(nt,at,lt,Rt,Bt,Lt){var Ht=En(Lt),jt=Fn(Lt),$t=Ht*nt,Kt=jt*nt,te=Ht/nt,ne=jt/nt,re=(jt*lt-Ht*at)/nt,ae=(jt*at+Ht*lt)/nt;function f(nt,Lt){return[$t*(nt*=Rt)-Kt*(Lt*=Bt)+at,lt-Kt*nt-$t*Lt]}return f.invert=function(nt,at){return[Rt*(te*nt-ne*at+re),Bt*(ae-ne*nt-te*at)]},f}function Da(nt){return Oa((function(){return nt}))()}function Oa(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne=150,re=480,ae=250,oe=0,se=0,le=0,ue=0,ce=0,he=0,de=1,fe=1,pe=null,ve=Sr,Ae=null,we=br,Ce=.5;function T(nt){return $t(nt[0]*wn,nt[1]*wn)}function C(nt){return(nt=$t.invert(nt[0],nt[1]))&&[nt[0]*An,nt[1]*An]}function E(){var nt=La(ne,0,0,de,fe,he).apply(null,at(oe,se)),Rt=(he?La:Ia)(ne,re-nt[0],ae-nt[1],de,fe,he);return lt=Zn(le,ue,ce),jt=Kn(at,Rt),$t=Kn(lt,jt),Ht=Ra(jt,Ce),P()}function P(){return Kt=te=null,T}return T.stream=function(nt){return Kt&&te===nt?Kt:Kt=Ja(function(nt){return ka({"point":function(at,lt){var Rt=nt(at,lt);return this.stream.point(Rt[0],Rt[1])}})}(lt)(ve(Ht(we(te=nt)))))},T.preclip=function(nt){return arguments.length?(ve=nt,pe=void 0,P()):ve},T.postclip=function(nt){return arguments.length?(we=nt,Ae=Rt=Bt=Lt=null,P()):we},T.clipAngle=function(nt){return arguments.length?(ve=+nt?gr(pe=nt*wn):(pe=null,Sr),P()):pe*An},T.clipExtent=function(nt){return arguments.length?(we=null==nt?(Ae=Rt=Bt=Lt=null,br):_r(Ae=+nt[0][0],Rt=+nt[0][1],Bt=+nt[1][0],Lt=+nt[1][1]),P()):null==Ae?null:[[Ae,Rt],[Bt,Lt]]},T.scale=function(nt){return arguments.length?(ne=+nt,E()):ne},T.translate=function(nt){return arguments.length?(re=+nt[0],ae=+nt[1],E()):[re,ae]},T.center=function(nt){return arguments.length?(oe=nt[0]%360*wn,se=nt[1]%360*wn,E()):[oe*An,se*An]},T.rotate=function(nt){return arguments.length?(le=nt[0]%360*wn,ue=nt[1]%360*wn,ce=nt.length>2?nt[2]%360*wn:0,E()):[le*An,ue*An,ce*An]},T.angle=function(nt){return arguments.length?(he=nt%360*wn,E()):he*An},T.reflectX=function(nt){return arguments.length?(de=nt?-1:1,E()):de<0},T.reflectY=function(nt){return arguments.length?(fe=nt?-1:1,E()):fe<0},T.precision=function(nt){return arguments.length?(Ht=Ra(jt,Ce=nt*nt),P()):sr(Ce)},T.fitExtent=function(nt,at){return wa(T,nt,at)},T.fitSize=function(nt,at){return Ma(T,nt,at)},T.fitWidth=function(nt,at){return Ta(T,nt,at)},T.fitHeight=function(nt,at){return Ca(T,nt,at)},function(){return at=nt.apply(this,arguments),T.invert=at.invert&&C,E()}}function Fa(nt){var at=0,lt=bn/3,Rt=Oa(nt),Bt=Rt(at,lt);return Bt.parallels=function(nt){return arguments.length?Rt(at=nt[0]*wn,lt=nt[1]*wn):[at*An,lt*An]},Bt}function za(nt,at){var lt=Fn(nt),Rt=(lt+Fn(at))/2;if(Cn(Rt)<_n)return function(nt){var at=En(nt);function i(nt,lt){return[nt*at,Fn(lt)/at]}return i.invert=function(nt,lt){return[nt/at,In(lt*at)]},i}(nt);var Bt=1+lt*(2*Rt-lt),Lt=sr(Bt)/Rt;function o(nt,at){var lt=sr(Bt-2*Rt*Fn(at))/Rt;return[lt*Fn(nt*=Rt),Lt-lt*En(nt)]}return o.invert=function(nt,at){var lt=Lt-at,Ht=Tn(nt,Cn(lt))*or(lt);return lt*Rt<0&&(Ht-=bn*or(nt)*or(lt)),[Ht/Rt,In((Bt-(nt*nt+lt*lt)*Rt*Rt)/(2*Rt))]},o}function Ha(){return Fa(za).scale(155.424).center([0,33.6442])}function ja(){return Ha().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Na(nt){return function(at,lt){var Rt=En(at),Bt=En(lt),Lt=nt(Rt*Bt);return[Lt*Bt*Fn(at),Lt*Fn(lt)]}}function Va(nt){return function(at,lt){var Rt=sr(at*at+lt*lt),Bt=nt(Rt),Lt=Fn(Bt),Ht=En(Bt);return[Tn(at*Lt,Rt*Ht),In(Rt&&lt*Lt/Rt)]}}var to=Na((function(nt){return sr(2/(1+nt))}));to.invert=Va((function(nt){return 2*In(nt/2)}));var eo=Na((function(nt){return(nt=Bn(nt))&&nt/Fn(nt)}));function Ua(nt,at){return[nt,Rn(lr((xn+at)/2))]}function Ya(nt){var at,lt,Rt,Bt=Da(nt),Lt=Bt.center,Ht=Bt.scale,jt=Bt.translate,$t=Bt.clipExtent,Kt=null;function c(){var Lt=bn*Ht(),jt=Bt(function(nt){function e(at){return(at=nt(at[0]*wn,at[1]*wn))[0]*=An,at[1]*=An,at}return nt=Zn(nt[0]*wn,nt[1]*wn,nt.length>2?nt[2]*wn:0),e.invert=function(at){return(at=nt.invert(at[0]*wn,at[1]*wn))[0]*=An,at[1]*=An,at},e}(Bt.rotate()).invert([0,0]));return $t(null==Kt?[[jt[0]-Lt,jt[1]-Lt],[jt[0]+Lt,jt[1]+Lt]]:nt===Ua?[[Math.max(jt[0]-Lt,Kt),at],[Math.min(jt[0]+Lt,lt),Rt]]:[[Kt,Math.max(jt[1]-Lt,at)],[lt,Math.min(jt[1]+Lt,Rt)]])}return Bt.scale=function(nt){return arguments.length?(Ht(nt),c()):Ht()},Bt.translate=function(nt){return arguments.length?(jt(nt),c()):jt()},Bt.center=function(nt){return arguments.length?(Lt(nt),c()):Lt()},Bt.clipExtent=function(nt){return arguments.length?(null==nt?Kt=at=lt=Rt=null:(Kt=+nt[0][0],at=+nt[0][1],lt=+nt[1][0],Rt=+nt[1][1]),c()):null==Kt?null:[[Kt,at],[lt,Rt]]},c()}function Xa(nt){return lr((xn+nt)/2)}function Ka(nt,at){var lt=En(nt),Rt=nt===at?Fn(nt):Rn(lt/En(at))/Rn(Xa(at)/Xa(nt)),Bt=lt*On(Xa(nt),Rt)/Rt;if(!Rt)return Ua;function a(nt,at){Bt>0?at<-xn+_n&&(at=-xn+_n):at>xn-_n&&(at=xn-_n);var lt=Bt/On(Xa(at),Rt);return[lt*Fn(Rt*nt),Bt-lt*En(Rt*nt)]}return a.invert=function(nt,at){var lt=Bt-at,Lt=or(Rt)*sr(nt*nt+lt*lt),Ht=Tn(nt,Cn(lt))*or(lt);return lt*Rt<0&&(Ht-=bn*or(nt)*or(lt)),[Ht/Rt,2*Mn(On(Bt/Lt,1/Rt))-xn]},a}function qa(nt,at){return[nt,at]}function Za(nt,at){var lt=En(nt),Rt=nt===at?Fn(nt):(lt-En(at))/(at-nt),Bt=lt/Rt+nt;if(Cn(Rt)<_n)return qa;function a(nt,at){var lt=Bt-at,Lt=Rt*nt;return[lt*Fn(Lt),Bt-lt*En(Lt)]}return a.invert=function(nt,at){var lt=Bt-at,Lt=Tn(nt,Cn(lt))*or(lt);return lt*Rt<0&&(Lt-=bn*or(nt)*or(lt)),[Lt/Rt,Bt-or(Rt)*sr(nt*nt+lt*lt)]},a}eo.invert=Va((function(nt){return nt})),Ua.invert=function(nt,at){return[nt,2*Mn(Pn(at))-xn]},qa.invert=qa;var co=1.340264,po=-.081106,vo=893e-6,go=.003796,xo=sr(3)/2;function io(nt,at){var lt=In(xo*Fn(at)),Rt=lt*lt,Bt=Rt*Rt*Rt;return[nt*En(lt)/(xo*(co+3*po*Rt+Bt*(7*vo+9*go*Rt))),lt*(co+po*Rt+Bt*(vo+go*Rt))]}function no(nt,at){var lt=En(at),Rt=En(nt)*lt;return[lt*Fn(nt)/Rt,Fn(at)/Rt]}function ro(nt,at){var lt=at*at,Rt=lt*lt;return[nt*(.8707-.131979*lt+Rt*(Rt*(.003971*lt-.001529*Rt)-.013791)),at*(1.007226+lt*(.015085+Rt*(.028874*lt-.044475-.005916*Rt)))]}function ao(nt,at){return[En(at)*Fn(nt),Fn(at)]}function oo(nt,at){var lt=En(at),Rt=1+En(nt)*lt;return[lt*Fn(nt)/Rt,Fn(at)/Rt]}function so(nt,at){return[Rn(lr((xn+at)/2)),-nt]}function lo(nt){return nt}function uo(nt,at){var lt=at.id,Rt=at.bbox,Bt=null==at.properties?{}:at.properties,Lt=function(nt,at){var lt=function(nt){if(null==nt)return lo;var at,lt,Rt=nt.scale[0],Bt=nt.scale[1],Lt=nt.translate[0],Ht=nt.translate[1];return function(nt,jt){jt||(at=lt=0);var $t=2,Kt=nt.length,te=new Array(Kt);for(te[0]=(at+=nt[0])*Rt+Lt,te[1]=(lt+=nt[1])*Bt+Ht;$t<Kt;)te[$t]=nt[$t],++$t;return te}}(nt.transform),Rt=nt.arcs;function r(nt,at){at.length&&at.pop();for(var Bt=Rt[nt<0?~nt:nt],Lt=0,Ht=Bt.length;Lt<Ht;++Lt)at.push(lt(Bt[Lt],Lt));nt<0&&function(nt,at){for(var lt,Rt=nt.length,Bt=Rt-at;Bt<--Rt;)lt=nt[Bt],nt[Bt++]=nt[Rt],nt[Rt]=lt}(at,Ht)}function a(nt){return lt(nt)}function o(nt){for(var at=[],lt=0,Rt=nt.length;lt<Rt;++lt)r(nt[lt],at);return at.length<2&&at.push(at[0]),at}function s(nt){for(var at=o(nt);at.length<4;)at.push(at[0]);return at}function l(nt){return nt.map(s)}function u(nt){var at,lt=nt.type;switch(lt){case"GeometryCollection":return{"type":lt,"geometries":nt.geometries.map(u)};case"Point":at=a(nt.coordinates);break;case"MultiPoint":at=nt.coordinates.map(a);break;case"LineString":at=o(nt.arcs);break;case"MultiLineString":at=nt.arcs.map(o);break;case"Polygon":at=l(nt.arcs);break;case"MultiPolygon":at=nt.arcs.map(l);break;default:return null}return{"type":lt,"coordinates":at}}return u(at)}(nt,at);return null==lt&&null==Rt?{"type":"Feature","properties":Bt,"geometry":Lt}:null==Rt?{"type":"Feature","id":lt,"properties":Bt,"geometry":Lt}:{"type":"Feature","id":lt,"bbox":Rt,"properties":Bt,"geometry":Lt}}io.invert=function(nt,at){for(var lt,Rt=at,Bt=Rt*Rt,Lt=Bt*Bt*Bt,Ht=0;Ht<12&&(Lt=(Bt=(Rt-=lt=(Rt*(co+po*Bt+Lt*(vo+go*Bt))-at)/(co+3*po*Bt+Lt*(7*vo+9*go*Bt)))*Rt)*Bt*Bt,!(Cn(lt)<1e-12));++Ht);return[xo*nt*(co+3*po*Bt+Lt*(7*vo+9*go*Bt))/En(Rt),In(Fn(Rt)/xo)]},no.invert=Va(Mn),ro.invert=function(nt,at){var lt,Rt=at,Bt=25;do{var Lt=Rt*Rt,Ht=Lt*Lt;Rt-=lt=(Rt*(1.007226+Lt*(.015085+Ht*(.028874*Lt-.044475-.005916*Ht)))-at)/(1.007226+Lt*(.045255+Ht*(.259866*Lt-.311325-.005916*11*Ht)))}while(Cn(lt)>_n&&--Bt>0);return[nt/(.8707+(Lt=Rt*Rt)*(Lt*(Lt*Lt*Lt*(.003971-.001529*Lt)-.013791)-.131979)),Rt]},ao.invert=Va(In),oo.invert=Va((function(nt){return 2*Mn(nt)})),so.invert=function(nt,at){return[-at,2*Mn(Pn(nt))-xn]};var ko={"exports":{}},ho=function(nt,at){this.p1=nt,this.p2=at};ho.prototype.rise=function(){return this.p2[1]-this.p1[1]},ho.prototype.run=function(){return this.p2[0]-this.p1[0]},ho.prototype.slope=function(){return this.rise()/this.run()},ho.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)},ho.prototype.isVertical=function(){return!isFinite(this.slope())},ho.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]},ho.prototype._perpendicularDistanceHorizontal=function(nt){return Math.abs(this.p1[1]-nt[1])},ho.prototype._perpendicularDistanceVertical=function(nt){return Math.abs(this.p1[0]-nt[0])},ho.prototype._perpendicularDistanceHasSlope=function(nt){var at=this.slope(),lt=this.yIntercept();return Math.abs(at*nt[0]-nt[1]+lt)/Math.sqrt(Math.pow(at,2)+1)},ho.prototype.perpendicularDistance=function(nt){return this.isVertical()?this._perpendicularDistanceVertical(nt):this.isHorizontal()?this._perpendicularDistanceHorizontal(nt):this._perpendicularDistanceHasSlope(nt)};var Mo=ho,fo=function(nt,at){for(var lt=0,Rt=0,Bt=1;Bt<=nt.length-2;Bt++){var Lt=new Mo(nt[0],nt[nt.length-1]).perpendicularDistance(nt[Bt]);Lt>lt&&(Rt=Bt,lt=Lt)}if(lt>at)var Ht=fo(nt.slice(0,Rt),at),jt=fo(nt.slice(Rt,nt.length),at),$t=Ht.concat(jt);else $t=nt.length>1?[nt[0],nt[nt.length-1]]:[nt[0]];return $t},To=fo;!function(nt){var at=To;function i(at,lt){var Rt=at.geometry,Bt=Rt.type;if("LineString"===Bt)Rt.coordinates=nt.exports.simplify(Rt.coordinates,lt);else if("Polygon"===Bt||"MultiLineString"===Bt)for(var Lt=0;Lt<Rt.coordinates.length;Lt++)Rt.coordinates[Lt]=nt.exports.simplify(Rt.coordinates[Lt],lt);else if("MultiPolygon"===Bt)for(var Ht=0;Ht<Rt.coordinates.length;Ht++)for(var jt=0;jt<Rt.coordinates[Ht].length;jt++)Rt.coordinates[Ht][jt]=nt.exports.simplify(Rt.coordinates[Ht][jt],lt);return at}nt.exports=function(nt,at,lt){return lt||(nt=JSON.parse(JSON.stringify(nt))),nt.features?function(nt,at){for(var lt=0;lt<nt.features.length;lt++)nt.features[lt]=i(nt.features[lt],at);return nt}(nt,at):nt.type&&"Feature"===nt.type?i(nt,at):new Error("FeatureCollection or individual Feature required")},nt.exports.simplify=function(nt,lt){return at(nt,lt)}}(ko);var Io=L(ko.exports),yo=function(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];return bo.apply(void 0,[ct(nt)].concat(lt))};function mo(nt,at,lt){var Rt=at[lt];if(void 0===Rt)nt[lt]=null;else if(V(Rt))for(var Bt in V(nt[lt])||(nt[lt]={}),Rt)mo(nt[lt],Rt,Bt);else nt[lt]=Rt}function _o(nt,at){if(V(at)&&nt!==at)for(var lt in at)mo(nt,at,lt)}function bo(nt){nt||(nt={});for(var at=-1,lt=arguments.length<=1?0:arguments.length-1;++at<lt;)_o(nt,at+1<1||arguments.length<=at+1?void 0:arguments[at+1]);return nt}var Do,Lo={"tolerance":.01},So=function(nt,at){var lt=yo(Lo,at).tolerance;return Io(nt,lt)};!function(nt){nt.DSV="dsv",nt.TREE="tree",nt.GEO="geo",nt.BYTE="bytejson",nt.HEX="hex",nt.GRAPH="graph",nt.TABLE="table",nt.GEO_GRATICULE="geo-graticule"}(Do||(Do={}));var Ao=function(nt,at){for(var lt=at.fields,Rt=at.key,Bt=at.value,Lt=at.retains,Ht=[],s=function(at){lt.forEach((function(jt){var $t={};if($t[Rt]=jt,$t[Bt]=nt[at][jt],Lt)Lt.forEach((function(lt){$t[lt]=nt[at][lt]}));else for(var Kt in nt[at])-1===lt.indexOf(Kt)&&($t[Kt]=nt[at][Kt]);Ht.push($t)}))},jt=0;jt<nt.length;jt++)s(jt);return Ht},wo=function(nt,at){var lt,Rt;if(!(null==at?void 0:at.fields))return nt;if(0===nt.length)return nt;var Bt=at.fields,Lt=nt[0],Ht={},jt=[],l=function(at){if(Object.prototype.hasOwnProperty.call(Bt,at)){var $t,Kt=Bt[at];if(!Kt.type){var te=Lt;at in Lt||(te=null!==(lt=nt.find((function(nt){return at in nt})))&&void 0!==lt?lt:Lt),Kt.type="number"==typeof te[at]?"linear":"ordinal"}if("number"==typeof Kt.sortIndex&&($t={"key":at,"type":Kt.type,"index":Kt.sortIndex,"sortIndex":{},"sortIndexCount":0,"sortReverse":!0===Kt.sortReverse},jt.push($t)),(null===(Rt=Kt.domain)||void 0===Rt?void 0:Rt.length)>0)if("ordinal"===Kt.type){Kt._domainCache={},Ht[at]=Kt;var ne={};Kt.domain.forEach((function(nt,at){ne[nt]=at,Kt._domainCache[nt]=at})),$t&&($t.sortIndex=ne,$t.sortIndexCount=Kt.domain.length)}else Kt.domain.length>=2&&(Ht[at]=Kt)}};for(var $t in Bt)l($t);return Object.keys(Ht).length>0&&(nt=nt.filter((function(nt){for(var at in Ht){var lt=Ht[at];if("ordinal"===lt.type){if(!(nt[at]in lt._domainCache))return!1}else if(lt.domain[0]>nt[at]||lt.domain[1]<nt[at])return!1}return!0}))),jt.sort((function(nt,at){return nt.index-at.index})),nt.sort((function(nt,at){return function(nt,at,lt){for(var Rt=0;Rt<lt.length;Rt++){var Bt=lt[Rt],Lt=0;if("ordinal"===Bt.type?(void 0===Bt.sortIndex[at[Bt.key]]&&(Bt.sortIndex[at[Bt.key]]=Bt.sortIndexCount++),void 0===Bt.sortIndex[nt[Bt.key]]&&(Bt.sortIndex[nt[Bt.key]]=Bt.sortIndexCount++),Lt=Bt.sortIndex[nt[Bt.key]]-Bt.sortIndex[at[Bt.key]]):"linear"===Bt.type&&(Lt=nt[Bt.key]-at[Bt.key]),Bt.sortReverse&&(Lt=-Lt),0!==Lt)return Lt}return 0}(nt,at,jt)})),nt},$o={},ts={};function Co(nt){return new Function("d","return {"+nt.map((function(nt,at){return JSON.stringify(nt)+": d["+at+'] || ""'})).join(",")+"}")}function Eo(nt){var at=Object.create(null),lt=[];return nt.forEach((function(nt){for(var Rt in nt)Rt in at||lt.push(at[Rt]=Rt)})),lt}function Po(nt,at){var lt=nt+"",Rt=lt.length;return Rt<at?new Array(at-Rt+1).join(0)+lt:lt}function Ro(nt){var at,lt=nt.getUTCHours(),Rt=nt.getUTCMinutes(),Bt=nt.getUTCSeconds(),Lt=nt.getUTCMilliseconds();return isNaN(nt)?"Invalid Date":((at=nt.getUTCFullYear())<0?"-"+Po(-at,6):at>9999?"+"+Po(at,6):Po(at,4))+"-"+Po(nt.getUTCMonth()+1,2)+"-"+Po(nt.getUTCDate(),2)+(Lt?"T"+Po(lt,2)+":"+Po(Rt,2)+":"+Po(Bt,2)+"."+Po(Lt,3)+"Z":Bt?"T"+Po(lt,2)+":"+Po(Rt,2)+":"+Po(Bt,2)+"Z":Rt||lt?"T"+Po(lt,2)+":"+Po(Rt,2)+"Z":"")}function Bo(nt){var at=new RegExp('["'+nt+"\n\r]"),lt=nt.charCodeAt(0);function n(nt,at){var Rt,Bt=[],Lt=nt.length,Ht=0,jt=0,$t=Lt<=0,Kt=!1;function c(){if($t)return ts;if(Kt)return Kt=!1,$o;var at,Rt,Bt=Ht;if(34===nt.charCodeAt(Bt)){for(;Ht++<Lt&&34!==nt.charCodeAt(Ht)||34===nt.charCodeAt(++Ht););return(at=Ht)>=Lt?$t=!0:10===(Rt=nt.charCodeAt(Ht++))?Kt=!0:13===Rt&&(Kt=!0,10===nt.charCodeAt(Ht)&&++Ht),nt.slice(Bt+1,at-1).replace(/""/g,'"')}for(;Ht<Lt;){if(10===(Rt=nt.charCodeAt(at=Ht++)))Kt=!0;else if(13===Rt)Kt=!0,10===nt.charCodeAt(Ht)&&++Ht;else if(Rt!==lt)continue;return nt.slice(Bt,at)}return $t=!0,nt.slice(Bt,Lt)}for(10===nt.charCodeAt(Lt-1)&&--Lt,13===nt.charCodeAt(Lt-1)&&--Lt;(Rt=c())!==ts;){for(var te=[];Rt!==$o&&Rt!==ts;)te.push(Rt),Rt=c();at&&null==(te=at(te,jt++))||Bt.push(te)}return Bt}function r(at,lt){return at.map((function(at){return lt.map((function(nt){return o(at[nt])})).join(nt)}))}function a(at){return at.map(o).join(nt)}function o(nt){return null==nt?"":nt instanceof Date?Ro(nt):at.test(nt+="")?'"'+nt.replace(/"/g,'""')+'"':nt}return{"parse":function(nt,at){var lt,Rt,Bt=n(nt,(function(nt,Bt){if(lt)return lt(nt,Bt-1);Rt=nt,lt=at?function(nt,at){var lt=Co(nt);return function(Rt,Bt){return at(lt(Rt),Bt,nt)}}(nt,at):Co(nt)}));return Bt.columns=Rt||[],Bt},"parseRows":n,"format":function(at,lt){return null==lt&&(lt=Eo(at)),[lt.map(o).join(nt)].concat(r(at,lt)).join("\n")},"formatBody":function(nt,at){return null==at&&(at=Eo(nt)),r(nt,at).join("\n")},"formatRows":function(nt){return nt.map(a).join("\n")},"formatRow":a,"formatValue":o}}var ns=Bo(",").parse,os=Bo("\t").parse,ss={"delimiter":","},Oo=function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(arguments.length>2?arguments[2]:void 0).type=Do.DSV;var lt=yo(ss,at).delimiter;if(!Y(lt))throw new TypeError("Invalid delimiter: must be a string!");return Bo(lt).parse(nt)},Fo=function(nt){return(arguments.length>2?arguments[2]:void 0).type=Do.DSV,ns(nt)},zo=function(nt){return(arguments.length>2?arguments[2]:void 0).type=Do.DSV,os(nt)};function Ho(nt){if(!nt)throw new Error("geojson is required");switch(nt.type){case"Feature":return jo(nt);case"FeatureCollection":return function(nt){var at={"type":"FeatureCollection"};return Object.keys(nt).forEach((function(lt){switch(lt){case"type":case"features":return;default:at[lt]=nt[lt]}})),at.features=nt.features.map((function(nt){return jo(nt)})),at}(nt);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Vo(nt);default:throw new Error("unknown GeoJSON type")}}function jo(nt){var at={"type":"Feature"};return Object.keys(nt).forEach((function(lt){switch(lt){case"type":case"properties":case"geometry":return;default:at[lt]=nt[lt]}})),at.properties=No(nt.properties),at.geometry=Vo(nt.geometry),at}function No(nt){var at={};return nt?(Object.keys(nt).forEach((function(lt){var Rt=nt[lt];"object"===b(Rt)?null===Rt?at[lt]=null:Array.isArray(Rt)?at[lt]=Rt.map((function(nt){return nt})):at[lt]=No(Rt):at[lt]=Rt})),at):at}function Vo(nt){var at={"type":nt.type};return nt.bbox&&(at.bbox=nt.bbox),"GeometryCollection"===nt.type?(at.geometries=nt.geometries.map((function(nt){return Vo(nt)})),at):(at.coordinates=Go(nt.coordinates),at)}function Go(nt){var at=nt;return"object"!==b(at[0])?at.slice():at.map((function(nt){return Go(nt)}))}function Wo(nt){if(Array.isArray(nt))return nt;if("Feature"===nt.type){if(null!==nt.geometry)return nt.geometry.coordinates}else if(nt.coordinates)return nt.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Uo(nt){for(var at,lt,Rt=Wo(nt),Bt=0,Lt=1;Lt<Rt.length;)at=lt||Rt[0],Bt+=((lt=Rt[Lt])[0]-at[0])*(lt[1]+at[1]),Lt++;return Bt>0}function Yo(nt,at){if("Feature"===nt.type)at(nt,0);else if("FeatureCollection"===nt.type)for(var lt=0;lt<nt.features.length&&!1!==at(nt.features[lt],lt);lt++);}function Xo(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re=0,ae="FeatureCollection"===nt.type,oe="Feature"===nt.type,se=ae?nt.features.length:1;for(lt=0;lt<se;lt++){for(jt=ae?nt.features[lt].geometry:oe?nt.geometry:nt,Kt=ae?nt.features[lt].properties:oe?nt.properties:{},te=ae?nt.features[lt].bbox:oe?nt.bbox:void 0,ne=ae?nt.features[lt].id:oe?nt.id:void 0,Ht=($t=!!jt&&"GeometryCollection"===jt.type)?jt.geometries.length:1,Bt=0;Bt<Ht;Bt++)if(null!==(Lt=$t?jt.geometries[Bt]:jt))switch(Lt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===at(Lt,re,Kt,te,ne))return!1;break;case"GeometryCollection":for(Rt=0;Rt<Lt.geometries.length;Rt++)if(!1===at(Lt.geometries[Rt],re,Kt,te,ne))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===at(null,re,Kt,te,ne))return!1;re++}}function Ko(nt,at){if(!(lt=at=at||{})||lt.constructor!==Object)throw new Error("options is invalid");var lt,Rt=at.reverse||!1,Bt=at.mutate||!1;if(!nt)throw new Error("<geojson> is required");if("boolean"!=typeof Rt)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof Bt)throw new Error("<mutate> must be a boolean");!1===Bt&&(nt=Ho(nt));var Lt=[];switch(nt.type){case"GeometryCollection":return Xo(nt,(function(nt){qo(nt,Rt)})),nt;case"FeatureCollection":return Yo(nt,(function(nt){Yo(qo(nt,Rt),(function(nt){Lt.push(nt)}))})),Di(Lt)}return qo(nt,Rt)}function qo(nt,at){switch("Feature"===nt.type?nt.geometry.type:nt.type){case"GeometryCollection":return Xo(nt,(function(nt){qo(nt,at)})),nt;case"LineString":return Zo(Wo(nt),at),nt;case"Polygon":return Jo(Wo(nt),at),nt;case"MultiLineString":return Wo(nt).forEach((function(nt){Zo(nt,at)})),nt;case"MultiPolygon":return Wo(nt).forEach((function(nt){Jo(nt,at)})),nt;case"Point":case"MultiPoint":return nt}}function Zo(nt,at){Uo(nt)===at&&nt.reverse()}function Jo(nt,at){Uo(nt[0])!==at&&nt[0].reverse();for(var lt=1;lt<nt.length;lt++)Uo(nt[lt])===at&&nt[lt].reverse()}function Qo(nt){if(!nt)throw new Error("geojson is required");var at=[];return function(nt,at){Xo(nt,(function(nt,lt,Rt,Bt,Lt){var Ht,jt=null===nt?null:nt.type;switch(jt){case null:case"Point":case"LineString":case"Polygon":return!1!==at(Li(nt,Rt,{"bbox":Bt,"id":Lt}),lt,0)&&void 0}switch(jt){case"MultiPoint":Ht="Point";break;case"MultiLineString":Ht="LineString";break;case"MultiPolygon":Ht="Polygon"}for(var $t=0;$t<nt.coordinates.length;$t++){var Kt=nt.coordinates[$t];if(!1===at(Li({"type":Ht,"coordinates":Kt},Rt),lt,$t))return!1}}))}(nt,(function(nt){at.push(nt)})),Di(at)}var ls=xa(),us={"centroid":!1,"name":!1,"bbox":!1,"rewind":!1},es=function(nt){if(nt.geometry.type.startsWith("Multi")){var at=Qo(nt).features[0];return Object.assign(Object.assign({},at),at.properties)}return Object.assign(Object.assign({},nt),nt.properties)},is=function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(arguments.length>2?arguments[2]:void 0).type=Do.GEO;var lt=yo(us,at),Rt=lt.centroid,Bt=lt.name,Lt=lt.bbox,Ht=lt.rewind;if(Array.isArray(nt))return function(nt){var at=[];return nt.forEach((function(nt){"FeatureCollection"===nt.type?nt.features.forEach((function(nt){at.push(es(nt))})):at.push(es(nt))})),at}(nt);var jt=nt.features;return Ht&&(jt=Ko(nt,{"reverse":!V(Ht)||Ht.reverse}).features),jt.forEach((function(nt){if(Rt){var at=ls.centroid(nt);nt.centroidX=at[0],nt.centroidY=at[1]}if(Bt&&(nt.name=nt.properties.name),Lt){var lt=ls.bounds(nt);nt.bbox=lt}})),nt.features=jt,nt},cs={},rs=function(nt,at,lt){lt.type=Do.GEO;var Rt=yo(us,cs,at),Bt=Rt.object;if(!Y(Bt))throw new TypeError("Invalid object: must be a string!");var Lt,Ht,jt=(Lt=nt,"string"==typeof(Ht=nt.objects[Bt])&&(Ht=Lt.objects[Ht]),"GeometryCollection"===Ht.type?{"type":"FeatureCollection","features":Ht.geometries.map((function(nt){return uo(Lt,nt)}))}:uo(Lt,Ht));return is(jt,Rt,lt)},as=function(nt,at,lt){var Rt=!z(null==at?void 0:at.dependencyUpdate)||(null==at?void 0:at.dependencyUpdate);if(!nt||!X(nt))throw new TypeError("Invalid data: must be DataView array!");return X(lt.rawData)&&lt.rawData.forEach((function(nt){nt.target&&(nt.target.removeListener("change",lt.reRunAllTransform),nt.target.removeListener("markRunning",lt.markRunning))})),Rt&&nt.forEach((function(nt){nt.target.addListener("change",lt.reRunAllTransform),nt.target.addListener("markRunning",lt.markRunning)})),nt},hs={"svg":"group","rect":"rect","line":"rule","polygon":"polygon","path":"path","polyline":"line","g":"group","circle":"arc","ellipse":"arc"},ds=Object.keys(hs),fs=["g","svg","text","tspan","switch"],bs=["font-size","font-family","font-weight","font-style","text-align","text-anchor"],ks=["visibility","x","y","width","height","d","points","stroke","stroke-width","fill","fill-opacity","stroke-opacity"].concat(bs,["cx","cy","r"],["cx","cy","rx","ry"],["x1","x2","y1","y2"]),Ss=["visible","fill","stroke","stroke-width","fill-opacity","stroke-opacity"].concat(bs),As=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,ps=function(nt){var at=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).customDOMParser;if(at||(null===window||void 0===window?void 0:window.DOMParser)&&(at=function(nt){return(new DOMParser).parseFromString(nt,"text/xml")}),!at)throw new Error("No Available DOMParser!");for(var lt=at(nt),Rt=9===lt.nodeType?lt.firstChild:lt;Rt&&("svg"!==Rt.nodeName.toLowerCase()||1!==Rt.nodeType);)Rt=Rt.nextSibling;return Rt?function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=[],Rt=ys(nt,null),Bt=parseFloat(nt.getAttribute("width")||at.width),Lt=parseFloat(nt.getAttribute("height")||at.height);!Q(Bt)&&(Bt=null),!Q(Lt)&&(Lt=null);var Ht,jt=nt.getAttribute("viewBox");if(jt){var $t=jt.match(As)||[];if($t.length>=4&&(Ht={"x":parseFloat($t[0]||0),"y":parseFloat($t[1]||0),"width":parseFloat($t[2]),"height":parseFloat($t[3])},Bt||Lt)){var Kt={"x":0,"y":0,"width":Bt,"height":Lt},te=Kt.width/Ht.width,ne=Kt.height/Ht.height,re=Math.min(te,ne),ae=-(Ht.x+Ht.width/2)*re+(Kt.x+Kt.width/2),oe=-(Ht.y+Ht.height/2)*re+(Kt.y+Kt.height/2),se=(new Mi).translate(ae,oe).scale(re,re);Rt.transform=se}}return _s(nt,Rt,lt),{"root":Rt,"width":Bt,"height":Lt,"elements":lt,"viewBoxRect":Ht}}(Rt):null},ws=0;function vs(nt){var at,lt=nt.parent,Rt=nt.attributes,r=function(nt){return nt?Ss.reduce((function(at,lt){var Rt=Ri(lt);return N(nt[Rt])&&(at[Rt]=nt[Rt]),at}),{}):{}};return lt?(lt._inheritStyle||(lt._inheritStyle=r(lt.attributes)),at=ft({},lt._inheritStyle,r(Rt))):at=r(Rt),at}function gs(nt){for(var at,lt,Rt,Bt={},Lt=null!==(at=nt.attributes)&&void 0!==at?at:{},Ht=null!==(lt=nt.style)&&void 0!==lt?lt:{},jt=0;jt<ks.length;jt++){var $t=ks[jt],Kt=N(Ht[$t])&&""!==Ht[$t]?Ht[$t]:null===(Rt=Lt[$t])||void 0===Rt?void 0:Rt.value;N(Kt)&&(Bt[Ri($t)]=isNaN(+Kt)?Kt:parseFloat(Kt))}return"none"===Ht.display&&(Bt.visible=!1),["fontSize","strokeWidth","width","height"].forEach((function(nt){var at=Bt[nt];Y(Bt[nt])&&(Bt[nt]=parseFloat(at))})),Bt}function ys(nt,at){var lt,Rt,Bt,Lt,Ht,jt=null===(lt=nt.tagName)||void 0===lt?void 0:lt.toLowerCase();if(3===nt.nodeType||"text"===jt||"tspan"===jt)return function(nt,at){var lt,Rt,Bt,Lt,Ht,jt;if(!at)return null;var $t=null===(lt=nt.tagName)||void 0===lt?void 0:lt.toLowerCase();if(!$t&&"group"!==at.graphicType)return null;var Kt,te="text"===$t||"tspan"===$t,ne=te?"group":"text",re=te||null===(Rt=nt.textContent)||void 0===Rt?void 0:Rt.replace(/\n/g," ").replace(/\s+/g," ");return" "===re?null:((Kt=te?{"tagName":$t,"graphicType":ne,"attributes":gs(nt),"parent":at,"name":nt.getAttribute("name"),"id":null!==(Bt=nt.getAttribute("id"))&&void 0!==Bt?Bt:"".concat($t,"-").concat(ws++),"transform":ms(nt),"value":re}:{"tagName":$t,"graphicType":"text","attributes":gs(nt),"parent":at,"name":null==at?void 0:at.name,"id":null!==(Ht=null===(Lt=nt.getAttribute)||void 0===Lt?void 0:Lt.call(nt,"id"))&&void 0!==Ht?Ht:"".concat($t,"-").concat(ws++),"value":re})._inheritStyle=vs(Kt),N(Kt.name)||(Kt._nameFromParent=null!==(jt=at.name)&&void 0!==jt?jt:at._nameFromParent),te?at._textGroupStyle?Kt._textGroupStyle=ft({},at._textGroupStyle,gs(nt)):Kt._textGroupStyle=gs(nt):Kt.attributes=Kt._inheritStyle,Kt)}(nt,at);if(!ds.includes(jt))return null;var $t={"tagName":jt,"graphicType":hs[jt],"attributes":gs(nt),"parent":at,"name":null!==(Rt=nt.getAttribute("name"))&&void 0!==Rt?Rt:null===(Bt=null==at?void 0:at.attributes)||void 0===Bt?void 0:Bt.name,"id":null!==(Lt=nt.getAttribute("id"))&&void 0!==Lt?Lt:"".concat(jt,"-").concat(ws++),"transform":ms(nt)};return $t._inheritStyle=vs($t),at&&!N($t.name)&&($t._nameFromParent=null!==(Ht=at.name)&&void 0!==Ht?Ht:at._nameFromParent),$t}function ms(nt){var at,lt,Rt=null===(at=nt.transform)||void 0===at?void 0:at.baseVal;if(!Rt)return null;var Bt=null===(lt=Rt.consolidate())||void 0===lt?void 0:lt.matrix;if(!Bt)return null;var Lt=Bt.a,Ht=Bt.b,jt=Bt.c,$t=Bt.d,Kt=Bt.e,te=Bt.f;return new Mi(Lt,Ht,jt,$t,Kt,te)}function _s(nt,at){var lt,Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(nt){var Bt;"svg"!==nt.nodeName&&(Bt=ys(nt,at)),Bt&&Rt.push(Bt);for(var Lt=fs.includes(null===(lt=nt.tagName)||void 0===lt?void 0:lt.toLocaleLowerCase())?nt.firstChild:null;Lt;)_s(Lt,null!=Bt?Bt:at,Rt),Lt=Lt.nextSibling}}var Cs=0;function xs(){return Cs>1e8&&(Cs=0),(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dataset")+"_"+Cs++}var Ms=o((function t(nt){var at,lt;r(this,t),this.options=nt,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new Bt,lt=(null==nt?void 0:nt.name)?nt.name:xs("dataset"),this.name=lt,this._logger=null!==(at=null==nt?void 0:nt.logger)&&void 0!==at?at:te.getInstance()}),[{"key":"setLogger","value":function(nt){this._logger=nt}},{"key":"getDataView","value":function(nt){return this.dataViewMap[nt]}},{"key":"setDataView","value":function(nt,at){var lt;this.dataViewMap[nt]&&(null===(lt=this._logger)||void 0===lt||lt.error("Error: dataView ".concat(nt," "))),this.dataViewMap[nt]=at}},{"key":"removeDataView","value":function(nt){this.dataViewMap[nt]=null,delete this.dataViewMap[nt]}},{"key":"registerParser","value":function(nt,at){var lt;this.parserMap[nt]&&(null===(lt=this._logger)||void 0===lt||lt.warn("Warn: transform ".concat(nt," "))),this.parserMap[nt]=at}},{"key":"removeParser","value":function(nt){this.parserMap[nt]=null,delete this.parserMap[nt]}},{"key":"getParser","value":function(nt){return this.parserMap[nt]||this.parserMap.default}},{"key":"registerTransform","value":function(nt,at){var lt;this.transformMap[nt]&&(null===(lt=this._logger)||void 0===lt||lt.warn("Warn: transform ".concat(nt," "))),this.transformMap[nt]=at}},{"key":"removeTransform","value":function(nt){this.transformMap[nt]=null,delete this.transformMap[nt]}},{"key":"getTransform","value":function(nt){return this.transformMap[nt]}},{"key":"multipleDataViewAddListener","value":function(nt,at,lt){this._callMap||(this._callMap=new Map);var Rt=this._callMap.get(lt);Rt||(Rt=function(){nt.some((function(nt){return nt.isRunning}))||lt()}),nt.forEach((function(nt){nt.target.addListener(at,Rt)})),this._callMap.set(lt,Rt)}},{"key":"allDataViewAddListener","value":function(nt,at){this.multipleDataViewAddListener(Object.values(this.dataViewMap),nt,at)}},{"key":"multipleDataViewRemoveListener","value":function(nt,at,lt){if(this._callMap){var Rt=this._callMap.get(lt);Rt&&nt.forEach((function(nt){nt.target.removeListener(at,Rt)})),this._callMap.delete(lt)}}},{"key":"multipleDataViewUpdateInParse","value":function(nt){var at=this;nt.forEach((function(nt){var lt;return null===(lt=at.getDataView(nt.name))||void 0===lt?void 0:lt.markRunning()})),nt.forEach((function(nt){var lt;return null===(lt=at.getDataView(nt.name))||void 0===lt?void 0:lt.parseNewData(nt.data,nt.options)}))}},{"key":"multipleDataViewUpdateInRawData","value":function(nt){var at=this;nt.forEach((function(nt){var lt;return null===(lt=at.getDataView(nt.name))||void 0===lt?void 0:lt.markRunning()})),nt.forEach((function(nt){var lt;return null===(lt=at.getDataView(nt.name))||void 0===lt?void 0:lt.updateRawData(nt.data,nt.options)}))}},{"key":"destroy","value":function(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}]),Ts="_data-view-diff-rank",Es=function(){function t(nt,at){var lt,Rt=this;r(this,t),this.dataSet=nt,this.options=at,this.isDataView=!0,this.target=new Bt,this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"pushHistory":!0,"emitMessage":!0};return Rt.isRunning=!0,Rt.resetTransformData(),Rt.transformsArr.forEach((function(at){Rt.executeTransform(at,{"pushHistory":nt.pushHistory,"emitMessage":!1}),Rt.isLastTransform(at)&&Rt.diffLastData()})),Rt.isRunning=!1,!1!==nt.emitMessage&&Rt.target.emit("change",[]),Rt},this.markRunning=function(){Rt.isRunning=!0,Rt.target.emit("markRunning",[])},lt=(null==at?void 0:at.name)?at.name:xs("dataview"),this.name=lt,(null==at?void 0:at.history)&&(this.history=at.history,this.historyData=[]),this.dataSet.setDataView(lt,this),this.setFields(null==at?void 0:at.fields)}return o(t,[{"key":"parse","value":function(nt,at){var lt,Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isRunning=!0,Rt&&this.target.emit("beforeParse",[]),at&&(this.parseOption=at);var Bt=this.cloneParseData(nt,at);if(null==at?void 0:at.type){var Lt=(null!==(lt=this.dataSet.getParser(at.type))&&void 0!==lt?lt:this.dataSet.getParser("bytejson"))(Bt,at.options,this);this.rawData=Bt,this.parserData=Lt,this.history&&this.historyData.push(Bt,Lt),this.latestData=Lt}else this.parserData=Bt,this.rawData=Bt,this.history&&this.historyData.push(Bt),this.latestData=Bt;return this.isRunning=!1,Rt&&this.target.emit("afterParse",[]),this}},{"key":"transform","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isRunning=!0,nt&&nt.type){var lt=!0;if("fields"===nt.type){this._fields=nt.options.fields;var Rt=this.transformsArr.findIndex((function(at){return at.type===nt.type}));Rt>=0&&(lt=!1,this.transformsArr[Rt].options.fields=this._fields)}if(lt&&this.transformsArr.push(nt),at){var Bt=this.isLastTransform(nt);this.executeTransform(nt),Bt&&this.diffLastData()}}return this.sortTransform(),this.isRunning=!1,this}},{"key":"isLastTransform","value":function(nt){return this.transformsArr[this.transformsArr.length-1]===nt}},{"key":"sortTransform","value":function(){this.transformsArr.length>=2&&this.transformsArr.sort((function(nt,at){var lt,Rt;return(null!==(lt=nt.level)&&void 0!==lt?lt:0)-(null!==(Rt=at.level)&&void 0!==Rt?Rt:0)}))}},{"key":"executeTransform","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"pushHistory":!0,"emitMessage":!0},lt=at.pushHistory,Rt=at.emitMessage,Bt=this.dataSet.getTransform(nt.type)(this.latestData,nt.options);this.history&&!1!==lt&&this.historyData.push(Bt),this.latestData=Bt,!1!==Rt&&this.target.emit("change",[])}},{"key":"resetTransformData","value":function(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}},{"key":"enableDiff","value":function(nt){this._diffData=!0,this._diffKeys=nt,this._diffMap=new Map,this._diffRank=0}},{"key":"disableDiff","value":function(){this._diffData=!1,this._diffMap=null,this._diffRank=null}},{"key":"resetDiff","value":function(){this._diffMap=new Map,this._diffRank=0}},{"key":"diffLastData","value":function(){var nt,at=this;if(this._diffData&&this.latestData.forEach&&(null===(nt=this._diffKeys)||void 0===nt?void 0:nt.length)){var lt,Rt=this._diffRank+1;0===this._diffRank?(this.latestData.forEach((function(nt){nt[Ts]=Rt,at._diffMap.set(at._diffKeys.reduce((function(at,lt){return at+nt[lt]}),""),nt)})),this.latestDataAUD={"add":Array.from(this.latestData),"del":[],"update":[]}):(this.latestDataAUD={"add":[],"del":[],"update":[]},this.latestData.forEach((function(nt){nt[Ts]=Rt,lt=at._diffKeys.reduce((function(at,lt){return at+nt[lt]}),""),at._diffMap.get(lt)?at.latestDataAUD.update.push(nt):at.latestDataAUD.add.push(nt),at._diffMap.set(lt,nt)})),this._diffMap.forEach((function(nt,lt){nt[Ts]<Rt&&(at.latestDataAUD.del.push(nt),at._diffMap.delete(lt))}))),this._diffRank=Rt}}},{"key":"cloneParseData","value":function(nt,at){var lt=!1;return nt instanceof t||!0!==(null==at?void 0:at.clone)||(lt=!0),lt?ct(nt):nt}},{"key":"parseNewData","value":function(nt,at){this.parse(nt,at||this.parseOption),this.reRunAllTransform()}},{"key":"updateRawData","value":function(nt,at){var lt=this.cloneParseData(nt,at);this.rawData=lt,this.parserData=lt,this.latestData=lt,this.reRunAllTransform()}},{"key":"getFields","value":function(){var nt;return this._fields?this._fields:"dataview"===(null===(nt=this.parseOption)||void 0===nt?void 0:nt.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null}},{"key":"setFields","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._fields=nt&&at?ft({},this._fields,nt):nt;var lt=this.transformsArr.find((function(nt){return"fields"===nt.type}));!j(this._fields)&&j(lt)?(this.dataSet.registerTransform("fields",wo),this.transform({"type":"fields","options":{"fields":this._fields}},!1)):lt&&(lt.options.fields=this._fields)}},{"key":"destroy","value":function(){this.dataSet.removeDataView(this.name),this._diffMap=null,this._diffRank=null,this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}])}(),Ps=function(){function t(){r(this,t)}return o(t,null,[{"key":"GenAutoIncrementId","value":function(){return t.auto_increment_id++}}])}();Ps.auto_increment_id=0;var Rs=o((function t(nt){r(this,t),this.id=Ps.GenAutoIncrementId(),this.registry=nt})),Is="named",Bs="inject",Fs="multi_inject",zs="inversify:tagged",Ns="inversify:paramtypes",Vs=o((function t(nt,at){r(this,t),this.key=nt,this.value=at}),[{"key":"toString","value":function(){return this.key===Is?"named: ".concat(String(this.value).toString()," "):"tagged: { key:".concat(this.key.toString(),", value: ").concat(String(this.value)," }")}}]),Ws=function(nt){var at;return function(nt){var at="function"==typeof Symbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",lt=Object.getPrototypeOf(Function),Rt=("object"==("undefined"==typeof process?"undefined":b(process))&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),Bt=new WeakMap;function a(nt,at,lt){var Lt=Bt.get(nt);if(u(Lt)){if(!lt)return;Lt=new Rt,Bt.set(nt,Lt)}var Ht=Lt.get(at);if(u(Ht)){if(!lt)return;Ht=new Rt,Lt.set(at,Ht)}return Ht}function o(nt,at,lt){if(s(nt,at,lt))return!0;var Rt=v(at);return!c(Rt)&&o(nt,Rt,lt)}function s(nt,at,lt){var Rt=a(at,lt,!1);return!u(Rt)&&!!Rt.has(nt)}function l(nt,at,lt){if(s(nt,at,lt))return function(nt,at,lt){var Rt=a(at,lt,!1);if(!u(Rt))return Rt.get(nt)}(nt,at,lt);var Rt=v(at);return c(Rt)?void 0:l(nt,Rt,lt)}function u(nt){return void 0===nt}function c(nt){return null===nt}function h(nt){return"object"==b(nt)?null!==nt:"function"==typeof nt}function d(nt,lt){switch(function(nt){if(null===nt)return 1;switch(b(nt)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===nt?1:6;default:return 6}}(nt)){case 0:case 1:case 2:case 3:case 4:case 5:return nt}var Rt=3===lt?"string":5===lt?"number":"default",Bt=function(nt,at){var lt=nt[at];if(null!=lt){if(!f(lt))throw new TypeError;return lt}}(nt,at);if(void 0!==Bt){var Lt=Bt.call(nt,Rt);if(h(Lt))throw new TypeError;return Lt}return function(nt,at){if("string"===at){var lt=nt.toString;if(f(lt)){var Rt=lt.call(nt);if(!h(Rt))return Rt}var Bt=nt.valueOf;if(f(Bt)){var Lt=Bt.call(nt);if(!h(Lt))return Lt}}else{var Ht=nt.valueOf;if(f(Ht)){var jt=Ht.call(nt);if(!h(jt))return jt}var $t=nt.toString;if(f($t)){var Kt=$t.call(nt);if(!h(Kt))return Kt}}throw new TypeError}(nt,"default"===Rt?"number":Rt)}function p(nt){var at=d(nt,3);return"symbol"==b(at)?at:function(nt){return""+nt}(at)}function f(nt){return"function"==typeof nt}function v(nt){var at=Object.getPrototypeOf(nt);if("function"!=typeof nt||nt===lt)return at;if(at!==lt)return at;var Rt=nt.prototype,Bt=Rt&&Object.getPrototypeOf(Rt);if(null==Bt||Bt===Object.prototype)return at;var Lt=Bt.constructor;return"function"!=typeof Lt||Lt===nt?at:Lt}nt("defineMetadata",(function(nt,at,lt,Rt){if(!h(lt))throw new TypeError;return Bt=nt,Lt=at,void a(lt,Rt,!0).set(Bt,Lt);var Bt,Lt})),nt("hasMetadata",(function(nt,at,lt){if(!h(at))throw new TypeError;return u(lt)||(lt=p(lt)),o(nt,at,lt)})),nt("hasOwnMetadata",(function(nt,at,lt){if(!h(at))throw new TypeError;return u(lt)||(lt=p(lt)),s(nt,at,lt)})),nt("getMetadata",(function(nt,at,lt){if(!h(at))throw new TypeError;return u(lt)||(lt=p(lt)),l(nt,at,lt)}))}((at=nt,function(nt,lt){"function"!=typeof at[nt]&&Object.defineProperty(at,nt,{"configurable":!0,"writable":!0,"value":lt})})),nt}({});function Ls(nt,at,lt,Rt){!function(nt,at,lt,Rt){var Bt,Lt=[Rt],Ht={};Ws.hasOwnMetadata(nt,at)&&(Ht=Ws.getMetadata(nt,at));var jt=Ht[lt];void 0===jt&&(jt=[]),(Bt=jt).push.apply(Bt,Lt),Ht[lt]=jt,Ws.defineMetadata(nt,Ht,at)}(zs,nt,lt.toString(),Rt)}function Ds(nt){return function(at,lt,Rt){Ls(at,0,Rt,nt)}}function Os(nt){return function(at){return function(lt,Rt,Bt){return Ds(new Vs(nt,at))(lt,Rt,Bt)}}}var Gs=Os(Bs),Us=Os(Fs);function Hs(){return function(nt){return Ws.defineMetadata(Ns,null,nt),nt}}function js(nt){return Ds(new Vs(Is,nt))}var Ys,Xs="Singleton",$s="Transient",qs="ConstantValue",Ks="DynamicValue",Zs="Factory",Qs="Function",Js="Instance",tl="Invalid",el=function(){function t(nt,at){r(this,t),this.id=Ps.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=nt,this.scope=at,this.type=tl,this.constraint=function(nt){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}return o(t,[{"key":"clone","value":function(){var nt=new t(this.serviceIdentifier,this.scope);return nt.activated=nt.scope===Xs&&this.activated,nt.implementationType=this.implementationType,nt.dynamicValue=this.dynamicValue,nt.scope=this.scope,nt.type=this.type,nt.provider=this.provider,nt.constraint=this.constraint,nt.cache=this.cache,nt}}])}(),il=o((function t(){r(this,t)}),[{"key":"getConstructorMetadata","value":function(nt){return{"compilerGeneratedMetadata":Ws.getMetadata(Ns,nt),"userGeneratedMetadata":Ws.getMetadata(zs,nt)||{}}}},{"key":"getPropertiesMetadata","value":function(nt){throw new Error("")}}]),nl=(Ys=Is,function(nt){var e=function(at){if(null==at)return!1;if(at.key===Ys&&at.value===nt)return!0;if(null==at.constructorArgsMetadata)return!1;for(var lt=at.constructorArgsMetadata,Rt=0;Rt<lt.length;Rt++)if(lt[Rt].key===Ys&&lt[Rt].value===nt)return!0;return!1};return e.metaData=new Vs(Ys,nt),e}),al=o((function t(nt){r(this,t),this._binding=nt}),[{"key":"inRequestScope","value":function(){throw new Error("")}},{"key":"inSingletonScope","value":function(){return this._binding.scope=Xs,this}},{"key":"inTransientScope","value":function(){return this._binding.scope=$s,this}},{"key":"whenTargetNamed","value":function(nt){return this._binding.constraint=nl(nt),this}}]),ol=o((function t(nt){r(this,t),this._binding=nt}),[{"key":"to","value":function(nt){return this._binding.type=Js,this._binding.implementationType=nt,new al(this._binding)}},{"key":"toSelf","value":function(){var nt=this._binding.serviceIdentifier;return this.to(nt)}},{"key":"toDynamicValue","value":function(nt){return this._binding.type=Ks,this._binding.cache=null,this._binding.dynamicValue=nt,this._binding.implementationType=null,new al(this._binding)}},{"key":"toConstantValue","value":function(nt){return this._binding.type=qs,this._binding.cache=nt,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Xs,new al(this._binding)}},{"key":"toFactory","value":function(nt){return this._binding.type=Zs,this._binding.factory=nt,this._binding.scope=Xs,new al(this._binding)}},{"key":"toService","value":function(nt){this.toDynamicValue((function(at){return at.container.get(nt)}))}}]),sl=o((function t(nt){r(this,t);var at=nt||{};at.defaultScope=at.defaultScope||$s,this.options=at,this.id=Ps.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new il}),[{"key":"load","value":function(nt){var at=this._getContainerModuleHelpersFactory()(nt.id);nt.registry(at.bindFunction,at.unbindFunction,at.isboundFunction,at.rebindFunction)}},{"key":"get","value":function(nt){var at=this._getNotAllArgs(nt,!1);return this._get(at)}},{"key":"getAll","value":function(nt){var at=this._getAllArgs(nt);return this._get(at)}},{"key":"getTagged","value":function(nt,at,lt){var Rt=this._getNotAllArgs(nt,!1,at,lt);return this._get(Rt)}},{"key":"getNamed","value":function(nt,at){return this.getTagged(nt,Is,at)}},{"key":"isBound","value":function(nt){return this._bindingDictionary.has(nt)}},{"key":"bind","value":function(nt){var at=this.options.defaultScope,lt=new el(nt,at),Rt=this._bindingDictionary.get(nt)||[];return Rt.push(lt),this._bindingDictionary.set(nt,Rt),new ol(lt)}},{"key":"unbind","value":function(nt){this._bindingDictionary.delete(nt)}},{"key":"rebind","value":function(nt){return this.unbind(nt),this.bind(nt)}},{"key":"_getContainerModuleHelpersFactory","value":function(){var nt=this,e=function(nt,at){nt._binding.moduleId=at},i=function(at){return function(lt){var Rt=nt.rebind(lt);return e(Rt,at),Rt}};return function(at){return{"bindFunction":(lt=at,function(at){var Rt=nt.bind(at);return e(Rt,lt),Rt}),"isboundFunction":function(at){return nt.isBound(at)},"rebindFunction":i(at),"unbindFunction":function(at){return nt.unbind(at)},"unbindAsyncFunction":function(nt){return null}};var lt}}},{"key":"_getNotAllArgs","value":function(nt,at,lt,Rt){return{"avoidConstraints":!1,"isMultiInject":at,"serviceIdentifier":nt,"key":lt,"value":Rt}}},{"key":"_getAllArgs","value":function(nt){return{"avoidConstraints":!0,"isMultiInject":!0,"serviceIdentifier":nt}}},{"key":"_get","value":function(nt){var at=this,lt=[];return this._bindingDictionary.get(nt.serviceIdentifier).filter((function(at){return at.constraint(nt)})).forEach((function(nt){lt.push(at._resolveFromBinding(nt))})),nt.isMultiInject||1!==lt.length?lt:lt[0]}},{"key":"_getChildRequest","value":function(nt){for(var at=this,lt=nt.implementationType,Rt=this._metadataReader.getConstructorMetadata(lt).userGeneratedMetadata,Bt=Object.keys(Rt),Lt=[],o=function(){var nt=Rt[Ht],lt={};nt.forEach((function(nt){lt[nt.key]=nt.value}));var Bt={"inject":lt[Bs],"multiInject":lt[Fs]},jt=Bt.inject||Bt.multiInject,$t={"serviceIdentifier":jt,"constructorArgsMetadata":nt},Kt=(at._bindingDictionary.get(jt)||[]).filter((function(nt){return nt.constraint($t)}));if(Kt.length){var te={"injectIdentifier":jt,"metadata":nt,"bindings":Kt};Lt.push(te)}},Ht=0;Ht<Bt.length;Ht++)o();return Lt}},{"key":"_resolveFromBinding","value":function(nt){var at=this._getResolvedFromBinding(nt);return this._saveToScope(nt,at),at}},{"key":"_getResolvedFromBinding","value":function(nt){var at;switch(nt.type){case qs:case Qs:at=nt.cache;break;case Js:at=this._resolveInstance(nt,nt.implementationType);break;default:at=nt.dynamicValue({"container":this})}return at}},{"key":"_resolveInstance","value":function(nt,at){if(nt.activated)return nt.cache;var lt=this._getChildRequest(nt);return this._createInstance(at,lt)}},{"key":"_createInstance","value":function(nt,at){return at.length?function(nt,at,lt){if(d())return Reflect.construct.apply(null,arguments);var Rt=[null];Rt.push.apply(Rt,at);var Bt=new(nt.bind.apply(nt,Rt));return lt&&v(Bt,lt.prototype),Bt}(nt,m(this._resolveRequests(at))):new nt}},{"key":"_resolveRequests","value":function(nt){var at=this;return nt.map((function(nt){return nt.bindings.length>1?nt.bindings.map((function(nt){return at._resolveFromBinding(nt)})):at._resolveFromBinding(nt.bindings[0])}))}},{"key":"_saveToScope","value":function(nt,at){nt.scope===Xs&&(nt.cache=at,nt.activated=!0)}}]),ll=Symbol("ContributionProvider"),ul=o((function t(nt,at){r(this,t),this.serviceIdentifier=nt,this.container=at}),[{"key":"getContributions","value":function(){var nt;return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&(nt=this.caches).push.apply(nt,m(this.container.getAll(this.serviceIdentifier)))),this.caches}}]);function rl(nt,at){nt(ll).toDynamicValue((function(nt){var lt=nt.container;return new ul(at,lt)})).inSingletonScope().whenTargetNamed(at)}var fl,vl=o((function t(nt,at){r(this,t),this._args=nt,this.name=at,this.taps=[]}),[{"key":"tap","value":function(nt,at){this._tap("sync",nt,at)}},{"key":"unTap","value":function(nt,at){var lt="string"==typeof nt?nt.trim():nt.name;lt&&(this.taps=this.taps.filter((function(nt){return!(nt.name===lt&&(!at||nt.fn===at))})))}},{"key":"_parseOptions","value":function(nt,at,lt){var Rt;if("string"==typeof at)Rt={"name":at.trim()};else if("object"!=b(at)||null===at)throw new Error("Invalid tap options");if("string"!=typeof Rt.name||""===Rt.name)throw new Error("Missing name for tap");return Object.assign({"type":nt,"fn":lt},Rt)}},{"key":"_tap","value":function(nt,at,lt){this._insert(this._parseOptions(nt,at,lt))}},{"key":"_insert","value":function(nt){var at;"string"==typeof nt.before?at=new Set([nt.before]):Array.isArray(nt.before)&&(at=new Set(nt.before));var lt=0;"number"==typeof nt.stage&&(lt=nt.stage);for(var Rt=this.taps.length;Rt>0;){Rt--;var Bt=this.taps[Rt];this.taps[Rt+1]=Bt;var Lt=Bt.stage||0;if(at){if(at.has(Bt.name)){at.delete(Bt.name);continue}if(at.size>0)continue}if(!(Lt>lt)){Rt++;break}}this.taps[Rt]=nt}}]),gl=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"call","value":function(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];this.taps.map((function(nt){return nt.fn})).forEach((function(nt){return nt.apply(void 0,at)}))}}])}(vl),yl=Symbol.for("EnvContribution"),ml=Symbol.for("VGlobal"),cl=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},hl=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},dl=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},pl=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},_l=o((function t(nt){r(this,t),this.contributions=nt,this._isImageAnonymous=!0,this.id=Ps.GenAutoIncrementId(),this.hooks={"onSetEnv":new gl(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}),[{"key":"env","get":function(){return this._env}},{"key":"isImageAnonymous","get":function(){return this._isImageAnonymous},"set":function(nt){this._isImageAnonymous=nt}},{"key":"devicePixelRatio","get":function(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}},{"key":"supportEvent","get":function(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent},"set":function(nt){this._env||this.setEnv("browser"),this.envContribution.supportEvent=nt}},{"key":"supportsTouchEvents","get":function(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents},"set":function(nt){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=nt}},{"key":"supportsPointerEvents","get":function(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents},"set":function(nt){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=nt}},{"key":"supportsMouseEvents","get":function(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents},"set":function(nt){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=nt}},{"key":"applyStyles","get":function(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles},"set":function(nt){this._env||this.setEnv("browser"),this.envContribution.applyStyles=nt}},{"key":"bindContribution","value":function(nt){var at=this,lt=[];if(this.contributions.getContributions().forEach((function(Rt){var Bt=Rt.configure(at,nt);Bt&&Bt.then&&lt.push(Bt)})),lt.length)return Promise.all(lt)}},{"key":"getDynamicCanvasCount","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}},{"key":"getStaticCanvasCount","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}},{"key":"setEnv","value":function(nt,at){if(at&&!0===at.force||this._env!==nt)return this.deactiveCurrentEnv(),this.activeEnv(nt,at)}},{"key":"deactiveCurrentEnv","value":function(){this.envContribution&&this.envContribution.release()}},{"key":"activeEnv","value":function(nt,at){var lt=this,Rt=this._env;this._env=nt;var Bt=this.bindContribution(at);if(Bt&&Bt.then)return Bt.then((function(){lt.envParams=at,lt.hooks.onSetEnv.call(Rt,nt,lt)}));this.envParams=at,this.hooks.onSetEnv.call(Rt,nt,this)}},{"key":"setActiveEnvContribution","value":function(nt){this.envContribution=nt}},{"key":"createCanvas","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(nt)}},{"key":"createOffscreenCanvas","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(nt)}},{"key":"releaseCanvas","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(nt)}},{"key":"addEventListener","value":function(nt,at,lt){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(nt,at,lt)}},{"key":"removeEventListener","value":function(nt,at,lt){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(nt,at,lt)}},{"key":"dispatchEvent","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(nt)}},{"key":"getRequestAnimationFrame","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}},{"key":"getCancelAnimationFrame","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}},{"key":"getElementById","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(nt):null}},{"key":"getRootElement","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}},{"key":"getDocument","value":function(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}},{"key":"mapToCanvasPoint","value":function(nt,at){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(nt,at):null}},{"key":"loadImage","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.loadImage(nt)}},{"key":"loadSvg","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(nt)}},{"key":"loadJson","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.loadJson(nt)}},{"key":"loadArrayBuffer","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(nt)}},{"key":"loadBlob","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(nt)}},{"key":"loadFont","value":function(nt,at,lt){return pl(this,void 0,void 0,f().mark((function n(){return f().wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",(this._env||this.setEnv("browser"),this.envContribution.loadFont(nt,at,lt)));case 1:case"end":return Rt.stop()}}),n,this)})))}},{"key":"isChrome","value":function(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}},{"key":"isSafari","value":function(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}},{"key":"getNativeAABBBounds","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(nt)}},{"key":"removeDom","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.removeDom(nt)}},{"key":"createDom","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.createDom(nt)}},{"key":"updateDom","value":function(nt,at){return this._env||this.setEnv("browser"),this.envContribution.updateDom(nt,at)}},{"key":"getElementTop","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementTop(nt,at)}},{"key":"getElementLeft","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(nt,at)}},{"key":"getElementTopLeft","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(nt,at)}},{"key":"isMacOS","value":function(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}},{"key":"copyToClipBoard","value":function(nt){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(nt)}}]);_l=cl([Hs(),dl(0,Gs(ll)),dl(0,js(yl)),hl("design:paramtypes",[Object])],_l),function(nt){nt[nt.estimate=0]="estimate",nt[nt.actualBounding=1]="actualBounding",nt[nt.fontBounding=2]="fontBounding"}(fl||(fl={}));var bl,xl,kl,Sl,Al,wl,Cl,Ml,Tl,El,Pl,Rl,Il,Bl,Dl,Ll=he-1e-8,Hl=o((function t(nt){r(this,t),this.init(nt)}),[{"key":"init","value":function(nt){this.bounds=nt}},{"key":"arc","value":function(nt,at,lt,Rt,Bt,Lt){if(Math.abs(Bt-Rt)>Ll)return this.bounds.add(nt-lt,at-lt),void this.bounds.add(nt+lt,at+lt);var Ht,jt,$t,Kt,te=1/0,ne=-1/0,re=1/0,ae=-1/0;function f(nt){$t=lt*Math.cos(nt),Kt=lt*Math.sin(nt),$t<te&&(te=$t),$t>ne&&(ne=$t),Kt<re&&(re=Kt),Kt>ae&&(ae=Kt)}if(f(Rt),f(Bt),Bt!==Rt)if((Rt%=he)<0&&(Rt+=he),(Bt%=he)<0&&(Bt+=he),Bt<Rt&&(Lt=!Lt,Ht=Rt,Rt=Bt,Bt=Ht),Lt)for(Bt-=he,Ht=Rt-Rt%ce,jt=0;jt<4&&Ht>Bt;++jt,Ht-=ce)f(Ht);else for(Ht=Rt-Rt%ce+ce,jt=0;jt<4&&Ht<Bt;++jt,Ht+=ce)f(Ht);this.bounds.add(nt+te,at+re),this.bounds.add(nt+ne,at+ae)}},{"key":"arcTo","value":function(nt,at,lt,Rt,Bt){this.bounds.add(nt,at)}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt){this.bounds.add(nt,at),this.bounds.add(lt,Rt),this.bounds.add(Bt,Lt)}},{"key":"closePath","value":function(){}},{"key":"ellipse","value":function(){throw new Error("ellipse")}},{"key":"lineTo","value":function(nt,at){this.bounds.add(nt,at)}},{"key":"moveTo","value":function(nt,at){this.bounds.add(nt,at)}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt){this.bounds.add(nt,at),this.bounds.add(lt,Rt)}},{"key":"rect","value":function(nt,at,lt,Rt){this.bounds.add(nt,at),this.bounds.add(nt+lt,at+Rt)}},{"key":"clear","value":function(){this.bounds.clear()}},{"key":"release","value":function(){}}]),Nl=o((function t(){r(this,t),this._curves=[],this.bounds=new _i}),[{"key":"curves","get":function(){return this._curves}},{"key":"getCurveLengths","value":function(){return this._curves.map((function(nt){return nt.getLength()}))}},{"key":"getPointAt","value":function(nt){return{"x":0,"y":0}}},{"key":"getLength","value":function(){return 0}},{"key":"getBounds","value":function(){return this.bounds}}]),Xl=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,$l={"m":2,"l":2,"h":1,"v":1,"c":6,"s":4,"q":4,"t":2,"a":7,"M":2,"L":2,"H":1,"V":1,"C":6,"S":4,"Q":4,"T":2,"A":7},Zl={"A":0,"AT":1,"C":2,"Z":3,"E":4,"L":5,"M":6,"Q":7,"R":8};function Ol(nt){var at=nt[0],lt=nt[1],Rt=nt[2],Bt=nt[3],Lt=nt[4],Ht=nt[5],jt=nt[6],$t=nt[7],Kt=$t*Lt,te=-jt*Ht,ne=jt*Lt,re=$t*Ht,ae=Math.cos(Rt),oe=Math.sin(Rt),se=Math.cos(Bt),le=Math.sin(Bt),ue=.5*(Bt-Rt),ce=Math.sin(.5*ue),he=8/3*ce*ce/Math.sin(ue),de=at+ae-he*oe,fe=lt+oe+he*ae,pe=at+se,ve=lt+le,Ae=pe+he*le,we=ve-he*se;return[Kt*de+te*fe,ne*de+re*fe,Kt*Ae+te*we,ne*Ae+re*we,Kt*pe+te*ve,ne*pe+re*ve]}function Fl(nt,at,lt,Rt){for(var Bt=function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){var Kt=Me(Ht),te=Math.sin(Kt),ne=Math.cos(Kt),re=ne*(jt-nt)*.5+te*($t-at)*.5,ae=ne*($t-at)*.5-te*(jt-nt)*.5,oe=re*re/((lt=Math.abs(lt))*lt)+ae*ae/((Rt=Math.abs(Rt))*Rt);oe>1&&(lt*=oe=Math.sqrt(oe),Rt*=oe);var se=ne/lt,le=te/lt,ue=-te/Rt,de=ne/Rt,fe=se*jt+le*$t,pe=ue*jt+de*$t,ve=se*nt+le*at,Ae=ue*nt+de*at,we=1/((ve-fe)*(ve-fe)+(Ae-pe)*(Ae-pe))-.25;we<0&&(we=0);var Ce=Math.sqrt(we);Lt===Bt&&(Ce=-Ce);var je=.5*(fe+ve)-Ce*(Ae-pe),Ne=.5*(pe+Ae)+Ce*(ve-fe),Ve=Math.atan2(pe-Ne,fe-je),Ge=Math.atan2(Ae-Ne,ve-je)-Ve;Ge<0&&1===Lt?Ge+=he:Ge>0&&0===Lt&&(Ge-=he);for(var ti=Math.ceil(Math.abs(Ge/(ce+.001))),li=[],hi=0;hi<ti;++hi){var di=Ve+hi*Ge/ti,fi=Ve+(hi+1)*Ge/ti;li[hi]=[je,Ne,di,fi,lt,Rt,te,ne]}return li}(Rt[5],Rt[6],Rt[0],Rt[1],Rt[3],Rt[4],Rt[2],at,lt),Lt=0;Lt<Bt.length;++Lt){var Ht=Ol(Bt[Lt]);nt.bezierCurveTo(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5])}}!function(nt){nt[nt.NONE=0]="NONE",nt[nt.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",nt[nt.UPDATE_SHAPE=2]="UPDATE_SHAPE",nt[nt.CLEAR_SHAPE=253]="CLEAR_SHAPE",nt[nt.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",nt[nt.INIT=179]="INIT",nt[nt.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",nt[nt.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",nt[nt.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",nt[nt.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",nt[nt.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",nt[nt.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",nt[nt.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",nt[nt.CLEAR_LAYOUT=127]="CLEAR_LAYOUT"}(Cl||(Cl={})),function(nt){nt[nt.GLOBAL=1]="GLOBAL",nt[nt.LOCAL=16]="LOCAL",nt[nt.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",nt[nt.LOCAL_ACCURATE=48]="LOCAL_ACCURATE"}(Ml||(Ml={})),function(nt){nt[nt.INIT=0]="INIT",nt[nt.DEFAULT=1]="DEFAULT",nt[nt.STATE=2]="STATE",nt[nt.ANIMATE_BIND=10]="ANIMATE_BIND",nt[nt.ANIMATE_PLAY=11]="ANIMATE_PLAY",nt[nt.ANIMATE_START=12]="ANIMATE_START",nt[nt.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",nt[nt.ANIMATE_END=14]="ANIMATE_END",nt[nt.TRANSLATE=20]="TRANSLATE",nt[nt.TRANSLATE_TO=21]="TRANSLATE_TO",nt[nt.SCALE=22]="SCALE",nt[nt.SCALE_TO=23]="SCALE_TO",nt[nt.ROTATE=24]="ROTATE",nt[nt.ROTATE_TO=25]="ROTATE_TO"}(Tl||(Tl={})),function(nt){nt[nt.INITIAL=0]="INITIAL",nt[nt.RUNNING=1]="RUNNING",nt[nt.PAUSED=2]="PAUSED",nt[nt.END=3]="END"}(El||(El={})),function(nt){nt[nt.NORMAL=0]="NORMAL",nt[nt.SET_ATTR_IMMEDIATELY=1]="SET_ATTR_IMMEDIATELY"}(Pl||(Pl={})),function(nt){nt.wait="wait",nt.from="from",nt.to="to",nt.customAnimate="customAnimate"}(Rl||(Rl={})),function(nt){nt[nt.ROW=1]="ROW",nt[nt.COLUMN=2]="COLUMN"}(Il||(Il={})),function(nt){nt[nt.CubicBezierCurve=0]="CubicBezierCurve",nt[nt.QuadraticBezierCurve=1]="QuadraticBezierCurve",nt[nt.ArcCurve=2]="ArcCurve",nt[nt.LineCurve=3]="LineCurve",nt[nt.EllipseCurve=4]="EllipseCurve",nt[nt.MoveCurve=5]="MoveCurve"}(Bl||(Bl={})),function(nt){nt[nt.beforeFillStroke=0]="beforeFillStroke",nt[nt.afterFillStroke=1]="afterFillStroke"}(Dl||(Dl={}));var zl=function(nt,at,lt,Rt,Bt,Lt,Ht){for(var jt=Math.abs(lt-at),$t=jt>.5*Math.PI?Math.ceil(2*jt/Math.PI):1,Kt=(lt-at)/$t,te=0;te<$t;te++){var ne=at+Kt*te,re=at+Kt*(te+1),ae=4*Math.tan(Math.abs(Kt)/4)/3,oe=re<ne?-1:1,se=Math.cos(ne),le=Math.sin(ne),ue=Math.cos(re),ce=Math.sin(re),he=se*Lt+Rt,de=le*Ht+Bt,fe=ue*Lt+Rt,pe=ce*Ht+Bt,ve=Lt*ae*oe,Ae=Ht*ae*oe;nt.push(he-ve*le,de+Ae*se,fe+ve*ce,pe-Ae*ue,fe,pe)}},Ql=[function(nt,at,lt,Rt,Bt,Lt,Ht){return at.arc(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*(Bt+Lt)/2,nt[4],nt[5],nt[6],Ht)},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.arcTo(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*Bt+lt,nt[4]*Lt+Rt,nt[5]*(Bt+Lt)/2,Ht)},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.bezierCurveTo(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*Bt+lt,nt[4]*Lt+Rt,nt[5]*Bt+lt,nt[6]*Lt+Rt,Ht)},function(nt,at,lt,Rt){return at.closePath()},function(nt,at,lt,Rt,Bt,Lt){return at.ellipse(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*Bt,nt[4]*Lt,nt[5],nt[6],nt[7],nt[8])},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.lineTo(nt[1]*Bt+lt,nt[2]*Lt+Rt,Ht)},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.moveTo(nt[1]*Bt+lt,nt[2]*Lt+Rt,Ht)},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.quadraticCurveTo(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*Bt+lt,nt[4]*Lt+Rt,Ht)},function(nt,at,lt,Rt,Bt,Lt,Ht){return at.rect(nt[1]*Bt+lt,nt[2]*Lt+Rt,nt[3]*Bt,nt[4]*Lt,Ht)}];function jl(nt,at){for(var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,Lt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,Ht=arguments.length>6?arguments[6]:void 0,jt=0;jt<nt.length;jt++){var $t=nt[jt];Ql[$t[0]]($t,at,lt,Rt,Bt,Lt,Ht)}}var tu=o((function t(){r(this,t)}),[{"key":"getLength","value":function(nt){return null!=nt?this.calcProjLength(nt):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}]);function Vl(nt,at){for(var lt=0,Rt=nt.length,Bt=0;Bt<Rt;Bt++){var Lt=nt[Bt],Ht=at[Bt],jt=nt[(Bt+1)%Rt],$t=at[(Bt+1)%Rt];lt+=Ge.distanceNN(Lt,Ht,jt,$t)}return lt/2}function Gl(nt,at,lt,Rt,Bt){var Lt=1-Bt;return Lt*Lt*Lt*nt+3*at*Bt*Lt*Lt+3*lt*Bt*Bt*Lt+Rt*Bt*Bt*Bt}function Wl(nt,at,lt,Rt,Bt){var Lt=Gl(nt.x,at.x,lt.x,Rt.x,Bt),Ht=Gl(nt.y,at.y,lt.y,Rt.y,Bt);return new Ve(Lt,Ht)}function Ul(nt,at,lt,Rt){var Bt=1-Rt;return Bt*Bt*nt+2*Bt*Rt*at+Rt*Rt*lt}function Yl(nt,at,lt,Rt){var Bt=Ul(nt.x,at.x,lt.x,Rt),Lt=Ul(nt.y,at.y,lt.y,Rt);return new Ve(Bt,Lt)}var nu=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e)).type=Bl.QuadraticBezierCurve,Rt.p0=nt,Rt.p1=at,Rt.p2=lt,Rt}return h(e,nt),o(e,[{"key":"_validPoint","value":function(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}},{"key":"getPointAt","value":function(nt){if(!1!==this.defined)return Yl(this.p0,this.p1,this.p2,nt);throw new Error("definedfalsegetPointAt")}},{"key":"calcLength","value":function(){return this._validPoint()?(nt=this.p0,at=this.p1,lt=this.p2,Vl([nt.x,at.x,lt.x],[nt.y,at.y,lt.y])):60;var nt,at,lt}},{"key":"calcProjLength","value":function(nt){return nt===Il.ROW?fe(this.p0.x-this.p2.x):nt===Il.COLUMN?fe(this.p0.y-this.p2.y):0}},{"key":"getAngleAt","value":function(nt){var at=Ae(nt-.01,0),lt=we(nt+.01,1),Rt=this.getPointAt(at),Bt=this.getPointAt(lt);return pe(Bt.y-Rt.y,Bt.x-Rt.x)}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt){if(nt.moveTo(this.p0.x*Rt+at,this.p0.y*Bt+lt),Lt>=1)nt.quadraticCurveTo(this.p1.x*Rt+at,this.p1.y*Bt+lt,this.p2.x*Rt+at,this.p2.y*Bt+lt);else if(Lt>0){var Ht=g(ql(this,Lt),1)[0];nt.quadraticCurveTo(Ht.p1.x*Rt+at,Ht.p1.y*Bt+lt,Ht.p2.x*Rt+at,Ht.p2.y*Bt+lt)}}},{"key":"getYAt","value":function(nt){throw new Error("QuadraticBezierCurvegetYAt")}},{"key":"includeX","value":function(nt){throw new Error("QuadraticBezierCurveincludeX")}}])}(tu);function Kl(nt,at){var lt=nt.p0,Rt=nt.p1,Bt=nt.p2,Lt=nt.p3,Ht=Wl(lt,Rt,Bt,Lt,at),jt=Ge.pointAtPP(lt,Rt,at),$t=Ge.pointAtPP(Rt,Bt,at),Kt=Ge.pointAtPP(Bt,Lt,at),te=Ge.pointAtPP(jt,$t,at),ne=Ge.pointAtPP($t,Kt,at);return[new ou(lt,jt,te,Ht),new ou(Ht,ne,Kt,Lt)]}function ql(nt,at){var lt=nt.p0,Rt=nt.p1,Bt=nt.p2,Lt=Yl(lt,Rt,Bt,at),Ht=Ge.pointAtPP(lt,Rt,at),jt=Ge.pointAtPP(Rt,Bt,at);return[new nu(lt,Ht,Lt),new nu(Lt,jt,Bt)]}var ou=function(nt){function e(nt,at,lt,Rt){var Bt;return r(this,e),(Bt=n(this,e)).type=Bl.CubicBezierCurve,Bt.p0=nt,Bt.p1=at,Bt.p2=lt,Bt.p3=Rt,Bt}return h(e,nt),o(e,[{"key":"_validPoint","value":function(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}},{"key":"getPointAt","value":function(nt){if(!1!==this.defined)return Wl(this.p0,this.p1,this.p2,this.p3,nt);throw new Error("definedfalsegetPointAt")}},{"key":"calcLength","value":function(){return this._validPoint()?(nt=this.p0,at=this.p1,lt=this.p2,Rt=this.p3,Vl([nt.x,at.x,lt.x,Rt.x],[nt.y,at.y,lt.y,Rt.y])):60;var nt,at,lt,Rt}},{"key":"calcProjLength","value":function(nt){return nt===Il.ROW?fe(this.p0.x-this.p3.x):nt===Il.COLUMN?fe(this.p0.y-this.p3.y):0}},{"key":"getAngleAt","value":function(nt){var at=Ae(nt-.01,0),lt=we(nt+.01,1),Rt=this.getPointAt(at),Bt=this.getPointAt(lt);return pe(Bt.y-Rt.y,Bt.x-Rt.x)}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt){if(nt.moveTo(this.p0.x*Rt+at,this.p0.y*Bt+lt),Lt>=1)nt.bezierCurveTo(this.p1.x*Rt+at,this.p1.y*Bt+lt,this.p2.x*Rt+at,this.p2.y*Bt+lt,this.p3.x*Rt+at,this.p3.y*Bt+lt);else if(Lt>0){var Ht=g(Kl(this,Lt),1)[0];nt.bezierCurveTo(Ht.p1.x*Rt+at,Ht.p1.y*Bt+lt,Ht.p2.x*Rt+at,Ht.p2.y*Bt+lt,Ht.p3.x*Rt+at,Ht.p3.y*Bt+lt)}}},{"key":"includeX","value":function(nt){var at=we(this.p0.x,this.p1.x,this.p2.x,this.p3.x),lt=Ae(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return nt>=at&&nt<=lt}},{"key":"getYAt","value":function(nt){var at=we(this.p0.x,this.p1.x,this.p2.x,this.p3.x),lt=(nt-at)/(Ae(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-at);return this.getPointAt(lt).y}}])}(tu);function Jl(nt,at){var lt=nt.p0,Rt=nt.p1,Bt=Ge.pointAtPP(lt,Rt,at);return[new du(lt,Bt),new du(Bt,Rt)]}var du=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e)).type=Bl.LineCurve,lt.p0=nt,lt.p1=at,lt}return h(e,nt),o(e,[{"key":"getPointAt","value":function(nt){if(!1!==this.defined)return Ge.pointAtPP(this.p0,this.p1,nt);throw new Error("definedfalsegetPointAt")}},{"key":"getAngleAt","value":function(nt){return null==this.angle&&(this.angle=pe(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}},{"key":"_validPoint","value":function(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}},{"key":"calcLength","value":function(){return this._validPoint()?Ge.distancePP(this.p0,this.p1):60}},{"key":"calcProjLength","value":function(nt){return nt===Il.ROW?fe(this.p0.x-this.p1.x):nt===Il.COLUMN?fe(this.p0.y-this.p1.y):0}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt){if(nt.moveTo(this.p0.x*Rt+at,this.p0.y*Bt+lt),Lt>=1)nt.lineTo(this.p1.x*Rt+at,this.p1.y*Bt+lt);else if(Lt>0){var Ht=this.getPointAt(Lt);nt.lineTo(Ht.x*Rt+at,Ht.y*Bt+lt)}}},{"key":"includeX","value":function(nt){return nt>=this.p0.x&&nt<=this.p1.x||nt>=this.p1.x&&nt<=this.p0.x}},{"key":"getYAt","value":function(nt){if(this.includeX(nt)){var at=this.p0,lt=this.p1;this.p0.x>this.p1.x&&(at=this.p1,lt=this.p0);var Rt=(nt-at.x)/(lt.x-at.x);return at.y+Rt*(lt.y-at.y)}return 1/0}}])}(tu),pu=o((function t(nt,at){r(this,t),this.init(nt,at)}),[{"key":"endX","get":function(){return this._lastX}},{"key":"endY","get":function(){return this._lastY}},{"key":"init","value":function(nt,at){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=nt,this.direction=at,this.curves=[]}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=new ou(new Ve(this._lastX,this._lastY),new Ve(nt,at),new Ve(lt,Rt),new Ve(Bt,Lt));$t.originP1=this._lastOriginP,$t.originP2=jt,$t.defined=Ht,this.curves.push($t),this._lastX=Bt,this._lastY=Lt,this._lastOriginP=jt}},{"key":"closePath","value":function(){if(!(this.curves.length<2)){var nt=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,nt.defined,this._startOriginP)}}},{"key":"ellipse","value":function(){throw new Error("SegContextellipse")}},{"key":"lineTo","value":function(nt,at,lt,Rt){var Bt=this.addLinearCurve(nt,at,lt,this._lastOriginP,Rt);this.curves.push(Bt),this._lastX=nt,this._lastY=at,this._lastOriginP=Rt}},{"key":"moveTo","value":function(nt,at,lt){return this._lastX=this._startX=nt,this._lastY=this._startY=at,this._lastOriginP=lt,this._startOriginP=lt,this}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt){throw new Error("SegContextquadraticCurveTo")}},{"key":"clear","value":function(){this.curves=[],this.length=NaN}},{"key":"tryUpdateLength","value":function(nt){return this.getLength(nt)}},{"key":"addLinearCurve","value":function(nt,at,lt,Rt,Bt){var Lt=new du(new Ve(this._lastX,this._lastY),new Ve(nt,at));return Lt.originP1=Rt,Lt.originP2=Bt,Lt.defined=lt,Lt}},{"key":"getPointAt","value":function(nt){throw new Error("")}},{"key":"getCurveLengths","value":function(){return[]}},{"key":"getLength","value":function(nt){var at,lt;if(nt===Il.COLUMN){if(!this.curves.length)return 0;var Rt=this.curves[0],Bt=this.curves[this.curves.length-1],Lt=null!==(at=Bt.p3)&&void 0!==at?at:Bt.p1;return fe(Rt.p0.y-Lt.y)}if(nt===Il.ROW){if(!this.curves.length)return 0;var Ht=this.curves[0],jt=this.curves[this.curves.length-1],$t=null!==(lt=jt.p3)&&void 0!==lt?lt:jt.p1;return fe(Ht.p0.x-$t.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((function(nt,at){return nt+at.getLength()}),0)),this.length}}]),gu=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){return y(e,"bezierCurveTo",this,3)([at,nt,Rt,lt,Lt,Bt,Ht,jt])}},{"key":"lineTo","value":function(nt,at,lt,Rt){return y(e,"lineTo",this,3)([at,nt,lt,Rt])}},{"key":"moveTo","value":function(nt,at,lt){return y(e,"moveTo",this,3)([at,nt,lt])}},{"key":"clear","value":function(){return y(e,"clear",this,3)([])}}])}(pu);function eu(nt,at){for(var lt=!1,Rt=0,Bt=at.length;Rt<=Bt;Rt++)Rt>=Bt===lt&&((lt=!lt)?nt.lineStart():nt.lineEnd()),lt&&nt.point(at[Rt])}function iu(nt,at,lt){var Rt=null!=at?at:fe(lt[lt.length-1].x-lt[0].x)>fe(lt[lt.length-1].y-lt[0].y)?Il.ROW:Il.COLUMN;return"monotoneY"===nt?new gu(nt,Rt):new pu(nt,Rt)}var mu=o((function t(nt,at){r(this,t),this.context=nt,at&&(this.startPoint=at)}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._point=0,this.startPoint&&this.point(this.startPoint)}},{"key":"lineEnd","value":function(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}},{"key":"point","value":function(nt){var at=nt.x,lt=nt.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(at,lt,!1!==this._lastDefined&&!1!==nt.defined,nt):this.context.moveTo(at,lt,nt);break;case 1:this._point=2;default:this.context.lineTo(at,lt,!1!==this._lastDefined&&!1!==nt.defined,nt)}this._lastDefined=nt.defined}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]);function ru(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=at.direction,Rt=at.startPoint;if(nt.length<2-Number(!!Rt))return null;var Bt=iu("linear",lt,nt);return function(nt,at){eu(nt,at)}(new mu(Bt,Rt),nt),Bt}function au(nt,at,lt,Rt,Bt){nt.context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+at)/6,(nt._y0+4*nt._y1+lt)/6,Rt,nt.lastPoint1)}var xu=o((function t(nt,at){r(this,t),this.context=nt,this.startPoint=at}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}},{"key":"lineEnd","value":function(){2===this._point&&au(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}},{"key":"point","value":function(nt){var at=nt.x,lt=nt.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(at,lt,!1!==this._lastDefined1&&!1!==this._lastDefined2,nt):this.context.moveTo(at,lt,nt);break;case 1:this._point=2;break;default:au(this,at,lt,!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=lt,this._lastDefined1=this._lastDefined2,this._lastDefined2=nt.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=nt}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]);function su(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=at.direction,Rt=at.startPoint;if(nt.length<2-Number(!!Rt))return null;if(nt.length<3-Number(!!Rt))return ru(nt,at);var Bt=iu("basis",lt,nt);return function(nt,at){eu(nt,at)}(new xu(Bt,Rt),nt),Bt}function lu(nt){return nt<0?-1:1}function uu(nt,at,lt){var Rt=nt._x1-nt._x0,Bt=at-nt._x1,Lt=(nt._y1-nt._y0)/(Rt||Number(Bt<0&&-0)),Ht=(lt-nt._y1)/(Bt||Number(Rt<0&&-0)),jt=(Lt*Bt+Ht*Rt)/(Rt+Bt);return(lu(Lt)+lu(Ht))*Math.min(Math.abs(Lt),Math.abs(Ht),.5*Math.abs(jt))||0}function cu(nt,at){var lt=nt._x1-nt._x0;return lt?(3*(nt._y1-nt._y0)/lt-at)/2:at}function hu(nt,at,lt,Rt,Bt){var Lt=nt._x0,Ht=nt._y0,jt=nt._x1,$t=nt._y1,Kt=(jt-Lt)/3;nt.context.bezierCurveTo(Lt+Kt,Ht+Kt*at,jt-Kt,$t-Kt*lt,jt,$t,Rt,nt.lastPoint1)}var Su=o((function t(nt,at){r(this,t),this.context=nt,this.startPoint=at}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}},{"key":"lineEnd","value":function(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:hu(this,this._t0,cu(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}},{"key":"point","value":function(nt){var at=NaN,lt=nt.x,Rt=nt.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(lt,Rt,!1!==this._lastDefined1&&!1!==this._lastDefined2,nt):this.context.moveTo(lt,Rt,nt);break;case 1:this._point=2;break;case 2:this._point=3,hu(this,cu(this,at=uu(this,lt,Rt)),at,!1!==this._lastDefined1&&!1!==this._lastDefined2);break;default:hu(this,this._t0,at=uu(this,lt,Rt),!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._x0=this._x1,this._x1=lt,this._y0=this._y1,this._y1=Rt,this._t0=at,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==nt.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=nt}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]),Au=function(nt){function e(nt,at){return r(this,e),n(this,e,[nt,at])}return h(e,nt),o(e,[{"key":"point","value":function(nt){return y(e,"point",this,3)([{"y":nt.x,"x":nt.y,"defined":nt.defined}])}}])}(Su);function fu(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=at.direction,Rt=at.startPoint;if(nt.length<2-Number(!!Rt))return null;if(nt.length<3-Number(!!Rt))return ru(nt,at);var Bt=iu("monotoneX",lt,nt);return function(nt,at){eu(nt,at)}(new Su(Bt,Rt),nt),Bt}function vu(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=at.direction,Rt=at.startPoint;if(nt.length<2-Number(!!Rt))return null;if(nt.length<3-Number(!!Rt))return ru(nt,at);var Bt=iu("monotoneY",lt,nt);return function(nt,at){eu(nt,at)}(new Au(Bt,Rt),nt),Bt}var wu=o((function t(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,lt=arguments.length>2?arguments[2]:void 0;r(this,t),this.context=nt,this._t=at,this.startPoint=lt}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}},{"key":"lineEnd","value":function(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}},{"key":"point","value":function(nt){var at=nt.x,lt=nt.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(at,lt,!1!==this._lastDefined&&!1!==nt.defined,nt):this.context.moveTo(at,lt,nt);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,lt,!1!==this._lastDefined&&!1!==nt.defined,this.lastPoint),this.context.lineTo(at,lt,!1!==this._lastDefined&&!1!==nt.defined,nt);else{var Rt=this._x*(1-this._t)+at*this._t;.5===this._t?this.context.lineTo(Rt,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(Rt,this._y,!1!==this._lastDefined&&!1!==nt.defined,this.lastPoint),this.context.lineTo(Rt,lt,!1!==this._lastDefined&&!1!==nt.defined,nt)}}this._lastDefined=nt.defined,this._x=at,this._y=lt,this.lastPoint=nt}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]);function yu(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Rt=lt.direction,Bt=lt.startPoint;if(nt.length<2-Number(!!Bt))return null;var Lt=new pu("step",null!=Rt?Rt:fe(nt[nt.length-1].x-nt[0].x)>fe(nt[nt.length-1].y-nt[0].y)?Il.ROW:Il.COLUMN);return function(nt,at){eu(nt,at)}(new wu(Lt,at,Bt),nt),Lt}var Cu=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"lineEnd","value":function(){this.context.closePath()}}])}(mu);function _u(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=at.direction,Rt=at.startPoint;if(nt.length<2-Number(!!Rt))return null;var Bt=iu("linear",lt,nt);return function(nt,at){eu(nt,at)}(new Cu(Bt,Rt),nt),Bt}function bu(nt,at,lt,Rt,Bt){var Lt=nt._x1,Ht=nt._y1,jt=nt._x2,$t=nt._y2;if(nt._l01_a>le){var Kt=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,te=3*nt._l01_a*(nt._l01_a+nt._l12_a);Lt=(Lt*Kt-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/te,Ht=(Ht*Kt-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/te}if(nt._l23_a>le){var ne=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,re=3*nt._l23_a*(nt._l23_a+nt._l12_a);jt=(jt*ne+nt._x1*nt._l23_2a-at*nt._l12_2a)/re,$t=($t*ne+nt._y1*nt._l23_2a-lt*nt._l12_2a)/re}nt.context.bezierCurveTo(Lt,Ht,jt,$t,nt._x2,nt._y2,Rt,nt.lastPoint1)}var Mu=o((function t(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,lt=arguments.length>2?arguments[2]:void 0;r(this,t),this.context=nt,this.startPoint=lt,this._alpha=at}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}},{"key":"lineEnd","value":function(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({"x":this._x2,"y":this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}},{"key":"point","value":function(nt){var at=nt.x,lt=nt.y;if(this._point){var Rt=this._x2-at,Bt=this._y2-lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Rt*Rt+Bt*Bt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(at,lt,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(at,lt);break;case 1:this._point=2;break;case 2:this._point=3;default:bu(this,at,lt,!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=lt,this._lastDefined1=this._lastDefined2,this._lastDefined2=nt.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=nt}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]);function ku(nt,at){return function(lt,Rt){var Bt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Lt=Bt.direction,Ht=Bt.startPoint;if(lt.length<2-Number(!!Ht))return null;if(lt.length<3-Number(!!Ht))return ru(lt,Bt);var jt=iu(nt,Lt,lt);return eu(new at(jt,Rt,Ht),lt),jt}}var Eu=ku("catmullRom",Mu),Ru=o((function t(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,lt=arguments.length>2?arguments[2]:void 0;r(this,t),this.context=nt,this.startPoint=lt,this._alpha=at}),[{"key":"areaStart","value":function(){this._line=0}},{"key":"areaEnd","value":function(){this._line=NaN}},{"key":"lineStart","value":function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}},{"key":"lineEnd","value":function(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({"x":this._x3,"y":this._y3}),this.point({"x":this._x4,"y":this._y4}),this.point({"x":this._x5,"y":this._y5})}}},{"key":"point","value":function(nt){var at=nt.x,lt=nt.y;if(this._point){var Rt=this._x2-at,Bt=this._y2-lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Rt*Rt+Bt*Bt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=lt;break;case 1:this._point=2,this.context.moveTo(this._x4=at,this._y4=lt,nt);break;case 2:this._point=3,this._x5=at,this._y5=lt;break;default:bu(this,at,lt,!1!==this._lastDefined1&&!1!==this._lastDefined2)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=lt,this._lastDefined1=this._lastDefined2,this._lastDefined2=nt.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=nt}},{"key":"tryUpdateLength","value":function(){return this.context.tryUpdateLength()}}]),Iu=ku("catmullRomClosed",Ru),Bu=o((function t(nt){r(this,t),this.path=nt,this._lastX=this._lastY=this._startX=this._startY=0}),[{"key":"moveTo","value":function(nt,at){return this._lastX=this._startX=nt,this._lastY=this._startY=at,this}},{"key":"lineTo","value":function(nt,at){var lt=this.addLinearCurve(nt,at);this.path.addCurve(lt),this._lastX=nt,this._lastY=at}},{"key":"addLinearCurve","value":function(nt,at){return new du(new Ve(this._lastX,this._lastY),new Ve(nt,at))}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt){var Bt=new nu(new Ve(this._lastX,this._lastY),new Ve(nt,at),new Ve(lt,Rt));this.path.addCurve(Bt),this._lastX=lt,this._lastY=Rt}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=new ou(new Ve(this._lastX,this._lastY),new Ve(nt,at),new Ve(lt,Rt),new Ve(Bt,Lt));this.path.addCurve(Ht),this._lastX=Bt,this._lastY=Lt}},{"key":"arcTo","value":function(nt,at,lt,Rt,Bt){throw new Error("CurveContextarcTo")}},{"key":"ellipse","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){throw new Error("CurveContextellipse")}},{"key":"rect","value":function(nt,at,lt,Rt){throw new Error("CurveContextrect")}},{"key":"arc","value":function(nt,at,lt,Rt,Bt,Lt){throw new Error("CurveContextarc")}},{"key":"closePath","value":function(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}]);function Tu(nt,at,lt){var Rt,Bt;switch(at){case"linear":default:return ru(nt,lt);case"basis":return su(nt,lt);case"monotoneX":return fu(nt,lt);case"monotoneY":return vu(nt,lt);case"step":return yu(nt,.5,lt);case"stepBefore":return yu(nt,0,lt);case"stepAfter":return yu(nt,1,lt);case"catmullRom":return Eu(nt,null!==(Rt=null==lt?void 0:lt.curveTension)&&void 0!==Rt?Rt:.5,lt);case"catmullRomClosed":return Iu(nt,null!==(Bt=null==lt?void 0:lt.curveTension)&&void 0!==Bt?Bt:.5,lt);case"linearClosed":return _u(nt,lt)}}var Ou=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).commandList=[],nt&&(at._ctx=nt),at._boundsContext=new Hl(at.bounds),at}return h(e,nt),o(e,[{"key":"curves","get":function(){return this.tryBuildCurves()}},{"key":"setCtx","value":function(nt){this._ctx=nt}},{"key":"moveTo","value":function(nt,at){return this.commandList.push([Zl.M,nt,at]),this._ctx&&this._ctx.moveTo(nt,at),this}},{"key":"lineTo","value":function(nt,at){return this.commandList.push([Zl.L,nt,at]),this._ctx&&this._ctx.lineTo(nt,at),this}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt){return this.commandList.push([Zl.Q,nt,at,lt,Rt]),this._ctx&&this._ctx.quadraticCurveTo(nt,at,lt,Rt),this}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt){return this.commandList.push([Zl.C,nt,at,lt,Rt,Bt,Lt]),this._ctx&&this._ctx.bezierCurveTo(nt,at,lt,Rt,Bt,Lt),this}},{"key":"arcTo","value":function(nt,at,lt,Rt,Bt){return this.commandList.push([Zl.AT,nt,at,lt,Rt,Bt]),this._ctx&&this._ctx.arcTo(nt,at,lt,Rt,Bt),this}},{"key":"ellipse","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){return this.commandList.push([Zl.E,nt,at,lt,Rt,Bt,Lt,Ht,jt]),this._ctx&&this._ctx.ellipse(nt,at,lt,Rt,Bt,Lt,Ht,jt),this}},{"key":"rect","value":function(nt,at,lt,Rt){return this.commandList.push([Zl.R,nt,at,lt,Rt]),this._ctx&&this._ctx.rect(nt,at,lt,Rt),this}},{"key":"arc","value":function(nt,at,lt,Rt,Bt,Lt){return this.commandList.push([Zl.A,nt,at,lt,Rt,Bt,Lt]),this._ctx&&this._ctx.arc(nt,at,lt,Rt,Bt,Lt),this}},{"key":"closePath","value":function(){return this.commandList.push([Zl.Z]),this._ctx&&this._ctx.closePath(),this}},{"key":"addCurve","value":function(nt){this._curves.push(nt)}},{"key":"clear","value":function(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}},{"key":"beginPath","value":function(){this.clear()}},{"key":"tryBuildCurves","value":function(){if(!this._curves||!this._curves.length){var nt=new Bu(this);jl(this.commandList,nt,0,0,1,1)}return this._curves}},{"key":"toString","value":function(){if(!this.toStringCbList){var nt=[];nt[Zl.M]=function(nt){return"M".concat(nt[1]," ").concat(nt[2])},nt[Zl.L]=function(nt){return"L".concat(nt[1]," ").concat(nt[2])},nt[Zl.Q]=function(nt){return"Q".concat(nt[1]," ").concat(nt[2]," ").concat(nt[3]," ").concat(nt[4])},nt[Zl.C]=function(nt){return"C".concat(nt[1]," ").concat(nt[2]," ").concat(nt[3]," ").concat(nt[4]," ").concat(nt[5]," ").concat(nt[6])},nt[Zl.A]=function(nt){var at=[];zl(at,nt[4],nt[5],nt[1],nt[2],nt[3],nt[3]);for(var lt="",Rt=0;Rt<at.length;Rt+=6)lt+="C".concat(at[Rt]," ").concat(at[Rt+1]," ").concat(at[Rt+2]," ").concat(at[Rt+3]," ").concat(at[Rt+4]," ").concat(at[Rt+5]);return lt},nt[Zl.R]=function(nt){return"M".concat(nt[1]," ").concat(nt[2]," h").concat(nt[3]," v").concat(nt[4]," H").concat(nt[1],"Z")},nt[Zl.Z]=function(nt){return"Z"},this.toStringCbList=nt}var at=this.toStringCbList,lt="";return this.commandList.forEach((function(nt){lt+=at[nt[0]](nt)})),lt}},{"key":"fromString","value":function(nt,at,lt,Rt,Bt){this.clear();var Lt=function(nt){if(!nt)return[];var at,lt,Rt=nt.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===Rt)return[];for(var Bt=[],Lt=0,Ht=Rt.length;Lt<Ht;Lt++)if(bl=Rt[Lt],xl=bl.slice(1),at=[kl=bl[0]],null!==(lt=xl.match(Xl))){for(var jt=0,$t=lt.length;jt<$t;jt++)Sl=lt[jt],Al=parseFloat(Sl),Number.isNaN(Al)||at.push(Al);if(wl=$l[kl],at.length-1>wl)for(var Kt=void 0,te=kl,ne=1,re=at.length;ne<re;ne+=wl){Kt=[te];for(var ae=ne,oe=ne+wl;ae<oe;ae++)Kt.push(at[ae]);Bt.push(Kt),"m"===te?te="l":"M"===te&&(te="L")}else Bt.push(at)}else Bt.push(at);return Bt}(nt);return this._runCommandStrList(Lt,at,lt,Rt,Bt),this._updateBounds(),this}},{"key":"fromLine","value":function(nt){var at=nt.attribute,lt=at.points,Rt=at.curveType,Bt=at.clipRangeByDimension;if(lt){var Lt=Tu(lt,Rt);"x"===Bt?this.direction=Il.ROW:"y"===Bt?this.direction=Il.COLUMN:"auto"===Bt&&(this.direction=Lt.direction),this._curves=Lt.curves}}},{"key":"fromCustomPath2D","value":function(nt,at,lt,Rt,Bt){return this.clear(),this._runCommandList(nt.commandList,at,lt,Rt,Bt),this._updateBounds(),this}},{"key":"transform","value":function(nt,at,lt,Rt){var Bt=this,Lt=this.commandList;if(!this.transformCbList){var Ht=[];Ht[Zl.M]=this.moveToTransform,Ht[Zl.L]=this.lineToTransform,Ht[Zl.Q]=this.quadraticCurveToTransform,Ht[Zl.C]=this.bezierCurveToTransform,Ht[Zl.AT]=this.arcToTransform,Ht[Zl.E]=this.ellipseTransform,Ht[Zl.R]=this.rectTransform,Ht[Zl.A]=this.arcTransform,Ht[Zl.Z]=this.closePathTransform,this.transformCbList=Ht}Lt.forEach((function(Lt){Bt.transformCbList[Lt[0]](Lt,nt,at,lt,Rt)})),this._updateBounds()}},{"key":"moveToTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt}},{"key":"lineToTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt}},{"key":"quadraticCurveToTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*Rt+at,nt[4]=nt[4]*Bt+lt}},{"key":"bezierCurveToTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*Rt+at,nt[4]=nt[4]*Bt+lt,nt[5]=nt[5]*Rt+at,nt[6]=nt[6]*Bt+lt}},{"key":"arcToTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*Rt+at,nt[4]=nt[4]*Bt+lt,nt[5]=nt[5]*(Rt+Bt)/2}},{"key":"ellipseTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*Rt,nt[4]=nt[4]*Bt}},{"key":"rectTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*Rt,nt[4]=nt[4]*Bt}},{"key":"arcTransform","value":function(nt,at,lt,Rt,Bt){nt[1]=nt[1]*Rt+at,nt[2]=nt[2]*Bt+lt,nt[3]=nt[3]*(Rt+Bt)/2}},{"key":"closePathTransform","value":function(){}},{"key":"_runCommandStrList","value":function(nt){for(var at,lt,Rt,Bt,Lt,Ht=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,jt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,$t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Kt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,te=null,ne=0,re=0,ae=0,oe=0,se=0,le=nt.length;se<le;++se){switch(at=nt[se],1===$t&&1===Kt||(at=Pu(at,$t,Kt)),at[0]){case"l":ne+=at[1],re+=at[2],this.lineTo(ne+Ht,re+jt);break;case"L":ne=at[1],re=at[2],this.lineTo(ne+Ht,re+jt);break;case"h":ne+=at[1],this.lineTo(ne+Ht,re+jt);break;case"H":ne=at[1],this.lineTo(ne+Ht,re+jt);break;case"v":re+=at[1],this.lineTo(ne+Ht,re+jt);break;case"V":re=at[1],this.lineTo(ne+Ht,re+jt);break;case"m":ne+=at[1],re+=at[2],this.moveTo(ne+Ht,re+jt);break;case"M":ne=at[1],re=at[2],this.moveTo(ne+Ht,re+jt);break;case"c":lt=ne+at[5],Rt=re+at[6],ae=ne+at[3],oe=re+at[4],this.bezierCurveTo(ne+at[1]+Ht,re+at[2]+jt,ae+Ht,oe+jt,lt+Ht,Rt+jt),ne=lt,re=Rt;break;case"C":ne=at[5],re=at[6],ae=at[3],oe=at[4],this.bezierCurveTo(at[1]+Ht,at[2]+jt,ae+Ht,oe+jt,ne+Ht,re+jt);break;case"s":lt=ne+at[3],Rt=re+at[4],null===te[0].match(/[CcSs]/)?(ae=ne,oe=re):(ae=2*ne-ae,oe=2*re-oe),Bt=ne+at[1],Lt=re+at[2],this.bezierCurveTo(ae+Ht,oe+jt,Bt+Ht,Lt+jt,lt+Ht,Rt+jt),ae=Bt,oe=Lt,ne=lt,re=Rt;break;case"S":lt=at[3],Rt=at[4],null===te[0].match(/[CcSs]/)?(ae=ne,oe=re):(ae=2*ne-ae,oe=2*re-oe),Bt=at[1],Lt=at[2],this.bezierCurveTo(ae+Ht,oe+jt,Bt+Ht,Lt+jt,lt+Ht,Rt+jt),ae=Bt,oe=Lt,ne=lt,re=Rt;break;case"q":lt=ne+at[3],Rt=re+at[4],ae=ne+at[1],oe=re+at[2],this.quadraticCurveTo(ae+Ht,oe+jt,lt+Ht,Rt+jt),ne=lt,re=Rt;break;case"Q":lt=at[3],Rt=at[4],this.quadraticCurveTo(at[1]+Ht,at[2]+jt,lt+Ht,Rt+jt),ne=lt,re=Rt,ae=at[1],oe=at[2];break;case"t":lt=ne+at[1],Rt=re+at[2],null===te[0].match(/[QqTt]/)?(ae=ne,oe=re):"t"===te[0]?(ae=2*ne-Bt,oe=2*re-Lt):"q"===te[0]&&(ae=2*ne-ae,oe=2*re-oe),Bt=ae,Lt=oe,this.quadraticCurveTo(ae+Ht,oe+jt,lt+Ht,Rt+jt),re=Rt,ae=(ne=lt)+at[1],oe=re+at[2];break;case"T":lt=at[1],Rt=at[2],ae=2*ne-ae,oe=2*re-oe,this.quadraticCurveTo(ae+Ht,oe+jt,lt+Ht,Rt+jt),ne=lt,re=Rt;break;case"a":Fl(this,ne+Ht,re+jt,[at[1],at[2],at[3],at[4],at[5],at[6]+ne+Ht,at[7]+re+jt]),ne+=at[6],re+=at[7];break;case"A":Fl(this,ne+Ht,re+jt,[at[1],at[2],at[3],at[4],at[5],at[6]+Ht,at[7]+jt]),ne=at[6],re=at[7];break;case"z":case"Z":this.closePath()}te=at}}},{"key":"_runCommandList","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(0!==at||0!==lt||1!==Rt||1!==Bt)for(var Lt=0,Ht=nt.length;Lt<Ht;++Lt){var jt=nt[Lt].slice();switch(jt[0]){case Zl.L:this.lineToTransform(jt,at,lt,Rt,Bt);break;case Zl.M:this.moveToTransform(jt,at,lt,Rt,Bt);break;case Zl.C:this.bezierCurveToTransform(jt,at,lt,Rt,Bt);break;case Zl.Q:this.quadraticCurveToTransform(jt,at,lt,Rt,Bt);break;case Zl.A:this.arcToTransform(jt,at,lt,Rt,Bt);break;case Zl.E:this.ellipseTransform(jt,at,lt,Rt,Bt);break;case Zl.R:this.rectTransform(jt,at,lt,Rt,Bt);break;case Zl.AT:this.arcToTransform(jt,at,lt,Rt,Bt);break;case Zl.Z:this.closePath()}}else this.commandList=nt.map((function(nt){return nt.slice()}))}},{"key":"_updateBounds","value":function(){this.bounds.clear(),jl(this.commandList,this._boundsContext)}},{"key":"release","value":function(){this.commandList=[],this._boundsContext=null,this._ctx=null}},{"key":"getLength","value":function(){if(this.direction===Il.COLUMN){if(!this._curves.length)return 0;var nt=this._curves[0],at=this._curves[this._curves.length-1];return fe(nt.p0.y-at.p1.y)}if(this.direction===Il.ROW){if(!this._curves.length)return 0;var lt=this._curves[0],Rt=this._curves[this._curves.length-1];return fe(lt.p0.x-Rt.p1.x)}return this._curves.reduce((function(nt,at){return nt+at.getLength()}),0)}},{"key":"getYAt","value":function(nt){if(!this.curves)return 1/0;for(var at=0;at<this.curves.length;at++){var lt=this.curves[at];if(lt.includeX(nt))return lt.getYAt(nt)}return 1/0}},{"key":"getAttrAt","value":function(nt){if(!this._curves)return{"pos":{"x":0,"y":0},"angle":0};for(var at,lt=0,Rt=0;Rt<this._curves.length;Rt++){var Bt=(at=this._curves[Rt]).getLength(this.direction);if(lt+Bt>=nt)break;lt+=Bt}var Lt=(nt-lt)/at.getLength(this.direction);return{"pos":at.getPointAt(Lt),"angle":at.getAngleAt(Lt)}}},{"key":"drawWithClipRange","value":function(nt,at,lt,Rt,Bt){this.tryBuildCurves();for(var Lt=this.getLength()*Bt,Ht=0,jt=0;jt<this._curves.length;jt++){var $t=this._curves[jt],Kt=$t.getLength(this.direction);if(!(Ht+Kt<=Lt)){var te=1-(Ht+Kt-Lt)/Kt;$t.draw(nt,lt,Rt,at,at,te);break}$t.draw(nt,lt,Rt,at,at,1),Ht+=Kt}}}])}(Nl),Du=["l",0,0,0,0,0,0,0];function Pu(nt,at,lt){var Rt=Du[0]=nt[0];if("a"===Rt||"A"===Rt)Du[1]=at*nt[1],Du[2]=lt*nt[2],Du[3]=nt[3],Du[4]=nt[4],Du[5]=nt[5],Du[6]=at*nt[6],Du[7]=lt*nt[7];else if("h"===Rt||"H"===Rt)Du[1]=at*nt[1];else if("v"===Rt||"V"===Rt)Du[1]=lt*nt[1];else for(var Bt=1,Lt=nt.length;Bt<Lt;++Bt)Du[Bt]=(Bt%2==1?at:lt)*nt[Bt];return Du}var Lu={"x":0,"y":0,"z":0,"dx":0,"dy":0,"dz":0,"scrollX":0,"scrollY":0,"scaleX":1,"scaleY":1,"scaleZ":1,"angle":0,"alpha":0,"beta":0,"scaleCenter":[0,0],"anchor":[0,0],"anchor3d":[0,0],"postMatrix":new Mi},Fu={"fillOpacity":1,"fill":!1,"shadowBlur":0,"shadowColor":"black","shadowOffsetX":0,"shadowOffsetY":0},zu={"strokeOpacity":1,"lineDash":[],"lineDashOffset":0,"lineWidth":1,"lineCap":"butt","lineJoin":"miter","miterLimit":10,"strokeBoundsBuffer":2,"stroke":!1},Hu=Object.assign({"outerBorder":Object.assign(Object.assign({},zu),{"distance":0}),"innerBorder":Object.assign(Object.assign({},zu),{"distance":0})},zu),ju={"text":"","maxLineWidth":1/0,"maxWidth":1/0,"textAlign":"left","textBaseline":"alphabetic","fontSize":16,"fontFamily":"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol","fontWeight":"","ellipsis":"","fontVariant":"","fontStyle":"","lineHeight":void 0,"underline":0,"lineThrough":0,"scaleIn3d":!1,"direction":"horizontal","wordBreak":"break-all","ignoreBuf":!1,"verticalMode":0,"wrap":!1,"whiteSpace":"no-wrap","heightLimit":1/0,"lineClamp":1/0,"suffixPosition":"end","underlineDash":[],"underlineOffset":0,"disableAutoClipedPoptip":void 0,"measureMode":fl.fontBounding,"keepCenterInLine":!1},Nu=Object.assign(Object.assign(Object.assign(Object.assign({"forceBoundsWidth":void 0,"forceBoundsHeight":void 0,"opacity":1,"background":null,"autoAnimateTexture":!1,"textureRatio":1,"textureOptions":null,"backgroundOpacity":1,"backgroundCornerRadius":0,"texture":null,"textureColor":"black","textureSize":10,"texturePadding":2,"backgroundMode":"no-repeat","backgroundFit":!0,"backgroundKeepAspectRatio":!1,"backgroundClip":!0,"backgroundScale":1,"backgroundOffsetX":0,"backgroundOffsetY":0,"blur":0,"filter":"","cursor":null,"html":null,"react":null},Fu),Hu),{"alignSelf":"auto"}),{"pickStrokeBuffer":0}),Vu={"connectedType":"none","connectedStyle":{},"connectedX":NaN,"connectedY":NaN},Wu=Object.assign(Object.assign(Object.assign({"strokeSeg":null,"renderable":!0,"pickable":!0,"shadowGraphic":void 0,"childrenPickable":!0,"fillPickable":!0,"strokePickable":!0,"visible":!0,"zIndex":0,"layout":null,"boundsPadding":0,"fillStrokeOrder":0,"renderStyle":"default","pickMode":"accurate","customPickShape":null,"boundsMode":"accurate","keepDirIn3d":!0,"shadowRootIdx":1,"globalZIndex":1,"globalCompositeOperation":"","overflow":"hidden","shadowPickMode":"graphic","keepStrokeScale":!1,"clipConfig":null},{"_debug_bounds":!1}),Nu),Lu),Gu=Object.assign(Object.assign({},Wu),{"startAngle":0,"endAngle":de,"innerRadius":0,"outerRadius":1,"innerPadding":0,"outerPadding":0,"cornerRadius":0,"padRadius":0,"padAngle":0,"cap":!1,"forceShowCap":!1}),Uu=Object.assign(Object.assign(Object.assign({},Wu),Vu),{"points":[],"segments":[],"curveType":"linear","clipRange":1,"closePath":!1,"curveTension":1}),Yu=Object.assign(Object.assign({},Wu),{"radius":1,"startAngle":0,"endAngle":de}),Xu=Object.assign(Object.assign({},Wu),{"width":0,"height":0,"cornerRadius":0,"path":[],"clip":!1,"visibleAll":!0,"display":"relative","flexDirection":"row","flexWrap":"wrap","justifyContent":"flex-start","alignItems":"flex-start","alignContent":"flex-start","baseOpacity":1,"cornerType":"round"}),$u=Object.assign(Object.assign({},Wu),{"path":"","width":0,"height":0,"cornerRadius":0,"clip":!1}),qu=Object.assign(Object.assign(Object.assign({},Wu),Vu),{"points":[],"segments":[],"curveType":"linear","clipRange":1,"clipRangeByDimension":"default","closePath":!1,"curveTension":1}),Ku=Object.assign(Object.assign({},Wu),{"path":new Ou,"fillStrokeOrder":1,"clipRange":1,"customPath":function(){te.getInstance().warn("")}}),Zu=Object.assign(Object.assign({},Wu),{"points":[],"cornerRadius":0,"closePath":!0}),Qu=Object.assign(Object.assign({},Wu),{"width":0,"height":0,"x1":0,"y1":0,"strokeBoundsBuffer":0,"cornerRadius":0,"cornerType":"round"});Object.assign(Object.assign({},Wu),{"width":0,"height":0,"x1":0,"y1":0,"cornerRadius":0,"length":0,"cornerType":"round"});var Ju=Object.assign(Object.assign({},Wu),{"symbolType":"circle","size":10,"keepDirIn3d":!0,"clipRange":1}),tc=Object.assign(Object.assign(Object.assign({},Wu),ju),{"strokeBoundsBuffer":0,"keepDirIn3d":!0}),ec=Object.assign(Object.assign(Object.assign({},Wu),ju),{"upgradeAttrs":null,"editable":!1,"editOptions":null,"ascentDescentMode":"actual","width":300,"height":300,"ellipsis":!0,"wordBreak":"break-word","verticalDirection":"top","textAlign":"left","textBaseline":"top","layoutDirection":"horizontal","textConfig":[],"disableAutoWrapLine":!1,"maxHeight":void 0,"maxWidth":void 0,"singleLine":!1}),rc=Object.assign(Object.assign({"repeatX":"no-repeat","repeatY":"no-repeat","image":"","width":0,"height":0,"maxWidth":500,"maxHeight":500},Wu),{"fill":!0,"cornerRadius":0,"cornerType":"round"}),ac=Object.assign(Object.assign({},rc),{"backgroundShowMode":"never","backgroundWidth":0,"backgroundHeight":0,"textAlign":"left","textBaseline":"middle","direction":"horizontal","margin":0,"id":"","width":20,"height":20,"backgroundFill":"rgba(101, 117, 168, 0.1)","backgroundFillOpacity":1,"backgroundStroke":!1,"backgroundStrokeOpacity":1,"backgroundRadius":4,"opacity":1}),oc=new(o((function t(){r(this,t)}))),sc=function(){var nt={"linearGradient":/^(linear\-gradient)/i,"radialGradient":/^(radial\-gradient)/i,"conicGradient":/^(conic\-gradient)/i,"sideOrCorner":/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,"extentKeywords":/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,"positionKeywords":/^(left|center|right|top|bottom)/i,"pixelValue":/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,"percentageValue":/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,"emValue":/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,"angleValue":/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,"fromAngleValue":/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,"startCall":/^\(/,"endCall":/^\)/,"comma":/^,/,"hexColor":/(^\#[0-9a-fA-F]+)/,"literalColor":/^([a-zA-Z]+)/,"rgbColor":/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,"rgbaColor":/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i,"number":/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},at="";function i(nt){var lt=new Error(at+": "+nt);throw lt.source=at,lt}function n(){return r("linear",nt.linearGradient,a)||r("radial",nt.radialGradient,s)||r("conic",nt.conicGradient,o)}function r(at,lt,Rt){return function(lt){var Bt;if(y(lt)){y(nt.startCall)||i("Missing (");var Lt=((Bt=Rt())&&(y(nt.comma)||i("Missing comma before color stops")),{"type":at,"orientation":Bt,"colorStops":d(p)});return y(nt.endCall)||i("Missing )"),Lt}}(lt)}function a(){return g("directional",nt.sideOrCorner,1)||g("angular",nt.angleValue,1)}function o(){return g("angular",nt.fromAngleValue,1)}function s(){var lt,Rt,Bt=l();return Bt&&((lt=[]).push(Bt),Rt=at,y(nt.comma)&&((Bt=l())?lt.push(Bt):at=Rt)),lt}function l(){var nt,at=function(){var nt=g("shape",/^(circle)/i,0);return nt&&(nt.style=v()||u()),nt}()||((nt=g("shape",/^(ellipse)/i,0))&&(nt.style=f()||u()),nt);if(at)at.at=c();else{var lt=u();if(lt){at=lt;var Rt=c();Rt&&(at.at=Rt)}else{var Bt=h();Bt&&(at={"type":"default-radial","at":Bt})}}return at}function u(){return g("extent-keyword",nt.extentKeywords,1)}function c(){if(g("position",/^at/,0)){var nt=h();return nt||i("Missing positioning value"),nt}}function h(){var nt={"x":f(),"y":f()};if(nt.x||nt.y)return{"type":"position","value":nt}}function d(at){var lt=at(),Rt=[];if(lt)for(Rt.push(lt);y(nt.comma);)(lt=at())?Rt.push(lt):i("One extra comma");return Rt}function p(){var at=g("hex",nt.hexColor,1)||g("rgba",nt.rgbaColor,1)||g("rgb",nt.rgbColor,1)||g("literal",nt.literalColor,0);return at||i("Expected color definition"),at.length=f(),at}function f(){return g("%",nt.percentageValue,1)||g("position-keyword",nt.positionKeywords,1)||v()}function v(){return g("px",nt.pixelValue,1)||g("em",nt.emValue,1)}function g(nt,at,lt){var Rt=y(at);if(Rt)return{"type":nt,"value":Rt[lt]}}function y(nt){var lt=/^[\n\r\t\s]+/.exec(at);lt&&m(lt[0].length);var Rt=nt.exec(at);return Rt&&m(Rt[0].length),Rt}function m(nt){at=at.substr(nt)}return function(nt){return at=nt.toString(),lt=d(n),at.length>0&&i("Invalid input not EOF"),lt;var lt}}(),lc=function(){function t(){r(this,t)}return o(t,null,[{"key":"IsGradient","value":function(nt){return!("string"==typeof nt&&!nt.includes("gradient"))}},{"key":"IsGradientStr","value":function(nt){return"string"==typeof nt&&nt.includes("gradient")}},{"key":"Parse","value":function(nt){if(t.IsGradientStr(nt))try{var at=sc(nt)[0];if(at){if("linear"===at.type)return t.ParseLinear(at);if("radial"===at.type)return t.ParseRadial(at);if("conic"===at.type)return t.ParseConic(at)}}catch(at){return nt}return nt}},{"key":"ParseConic","value":function(nt){var at=nt.orientation,lt=nt.colorStops,Rt=void 0===lt?[]:lt,Bt=ue/2,Lt=parseFloat(at.value)/180*ue-Bt;return{"gradient":"conical","x":.5,"y":.5,"startAngle":Lt,"endAngle":Lt+de,"stops":Rt.map((function(nt){return{"color":nt.value,"offset":parseFloat(nt.length.value)/100}}))}}},{"key":"ParseRadial","value":function(nt){var at=nt.colorStops;return{"gradient":"radial","x0":.5,"y0":.5,"x1":.5,"y1":.5,"r0":0,"r1":1,"stops":(void 0===at?[]:at).map((function(nt){return{"color":nt.value,"offset":parseFloat(nt.length.value)/100}}))}}},{"key":"ParseLinear","value":function(nt){for(var at=nt.orientation,lt=nt.colorStops,Rt=void 0===lt?[]:lt,Bt=ue/2,Lt="angular"===at.type?parseFloat(at.value)/180*ue:0;Lt<0;)Lt+=de;for(;Lt>=de;)Lt-=de;var Ht=0,jt=0,$t=0,Kt=0;return Lt<Bt?(Ht=0,jt=1,$t=Math.sin(Lt),Kt=jt-Math.cos(Lt)):Lt<ue?(Ht=0,jt=0,$t=Math.cos(Lt-Bt),Kt=Math.sin(Lt-Bt)):Lt<ue+Bt?(jt=0,$t=(Ht=1)-Math.sin(Lt-ue),Kt=Math.cos(Lt-ue)):($t=(Ht=1)-Math.cos(Lt-Bt-ue),Kt-=Math.sin(Lt-Bt-ue)),{"gradient":"linear","x0":Ht,"y0":jt,"x1":$t,"y1":Kt,"stops":Rt.map((function(nt){return{"color":nt.value,"offset":parseFloat(nt.length.value)/100}}))}}}])}();function ic(nt,at,lt){var Rt=at,Bt=nt.currentMatrix,Lt=Bt.a,Ht=Bt.b,jt=Bt.c,$t=Bt.d,Kt=Math.sign(Lt)*Math.sqrt(Lt*Lt+Ht*Ht),te=Math.sign($t)*Math.sqrt(jt*jt+$t*$t);return Kt+te===0?0:Rt=Rt/Math.abs(Kt+te)*2*lt}function nc(nt,at,lt){var Rt,Bt,Lt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Ht=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!at||!0===at)return"black";if(X(at))for(var jt=0;jt<at.length&&!(Bt=at[jt]);jt++);else Bt=at;if("string"==typeof(Bt=lc.Parse(Bt)))return Bt;if(lt.AABBBounds&&(!lt.attribute||0!==lt.attribute.scaleX||0!==lt.attribute.scaleY)){var $t=lt.AABBBounds,Kt=$t.x2-$t.x1,te=$t.y2-$t.y1,ne=$t.x1-Lt,re=$t.y1-Ht;if(lt.attribute){var ae=lt.attribute,oe=ae.scaleX,se=void 0===oe?1:oe,le=ae.scaleY,ue=void 0===le?1:le;Kt/=se,te/=ue,ne/=se,re/=ue}"linear"===Bt.gradient?Rt=function(nt,at,lt,Rt,Bt,Lt){var Ht,jt,$t,Kt,te=nt.createLinearGradient(lt+(null!==(Ht=at.x0)&&void 0!==Ht?Ht:0)*Bt,Rt+(null!==(jt=at.y0)&&void 0!==jt?jt:0)*Lt,lt+(null!==($t=at.x1)&&void 0!==$t?$t:1)*Bt,Rt+(null!==(Kt=at.y1)&&void 0!==Kt?Kt:0)*Lt);return at.stops.forEach((function(nt){te.addColorStop(nt.offset,nt.color)})),te}(nt,Bt,ne,re,Kt,te):"conical"===Bt.gradient?Rt=function(nt,at,lt,Rt,Bt,Lt){var Ht,jt,$t=nt.createConicGradient(lt+(null!==(Ht=at.x)&&void 0!==Ht?Ht:0)*Bt,Rt+(null!==(jt=at.y)&&void 0!==jt?jt:0)*Lt,at.startAngle,at.endAngle);return at.stops.forEach((function(nt){$t.addColorStop(nt.offset,nt.color)})),$t.GetPattern(Bt+lt,Lt+Rt,void 0)}(nt,Bt,ne,re,Kt,te):"radial"===Bt.gradient&&(Rt=function(nt,at,lt,Rt,Bt,Lt){var Ht,jt,$t,Kt,te,ne,re=nt.createRadialGradient(lt+(null!==(Ht=at.x0)&&void 0!==Ht?Ht:.5)*Bt,Rt+(null!==(jt=at.y0)&&void 0!==jt?jt:.5)*Lt,Math.max(Bt,Lt)*(null!==($t=at.r0)&&void 0!==$t?$t:0),lt+(null!==(Kt=at.x1)&&void 0!==Kt?Kt:.5)*Bt,Rt+(null!==(te=at.y1)&&void 0!==te?te:.5)*Lt,Math.max(Bt,Lt)*(null!==(ne=at.r1)&&void 0!==ne?ne:.5));return at.stops.forEach((function(nt){re.addColorStop(nt.offset,nt.color)})),re}(nt,Bt,ne,re,Kt,te))}return Rt||"orange"}var uc={"horizontal":{"width":"width","height":"height","left":"left","top":"top","x":"x","y":"y","bottom":"bottom"},"vertical":{"width":"height","height":"width","left":"top","top":"left","x":"y","y":"x","bottom":"right"}},gc=!0,mc=!1,_c=/\w|\(|\)|-/,bc=/[.?!,;:/]/,xc=/\S/,cc=function(nt,at){var lt=at.fontSize||16;switch(at.script){case"super":case"sub":lt*=.8}nt.setTextStyle({"textAlign":"left","textBaseline":at.textBaseline||"alphabetic","fontStyle":at.fontStyle||"","fontWeight":at.fontWeight||"","fontSize":lt,"fontFamily":at.fontFamily})};function hc(nt,at,lt,Rt,Bt){if(!at||at<=0)return 0;for(var Lt=oc.graphicUtil.textMeasure,Ht=Rt,jt=nt.slice(0,Ht),$t=Math.floor(Lt.measureText(jt,lt).width),Kt=nt.slice(0,Ht+1),te=Math.floor(Lt.measureText(Kt,lt).width);$t>at||te<=at;){if($t>at?Ht--:Ht++,Ht>nt.length){Ht=nt.length;break}if(Ht<0){Ht=0;break}jt=nt.slice(0,Ht),$t=Math.floor(Lt.measureText(jt,lt).width),Kt=nt.slice(0,Ht+1),te=Math.floor(Lt.measureText(Kt,lt).width)}return Bt&&(Ht=dc(nt,Ht)),Ht}function dc(nt,at){for(var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Rt=at;_c.test(nt[Rt-1])&&_c.test(nt[Rt])||bc.test(nt[Rt]);)if(--Rt<=0)return lt?pc(nt,at):at;return Rt}function pc(nt,at){for(var lt=at;_c.test(nt[lt+1])&&_c.test(nt[lt])||bc.test(nt[lt]);)if(++lt>=nt.length)return lt;return lt+1}function fc(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"actual",Rt=oc.graphicUtil.textMeasure.measureText(nt,at),Bt={"ascent":0,"height":0,"descent":0,"width":0},Lt="actual"===lt?Rt.actualBoundingBoxAscent:Rt.fontBoundingBoxAscent,Ht="actual"===lt?Rt.actualBoundingBoxDescent:Rt.fontBoundingBoxDescent;return"number"!=typeof Lt||"number"!=typeof Ht?(Bt.width=Math.floor(Rt.width),Bt.height=at.fontSize||0,Bt.ascent=Bt.height,Bt.descent=0):(Bt.width=Math.floor(Rt.width),Bt.height=Math.floor(Lt+Ht),Bt.ascent=Math.floor(Lt),Bt.descent=Bt.height-Bt.ascent),Bt}var vc=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},kc=o((function t(){r(this,t)}),[{"key":"configure","value":function(nt,at){this.canvas=nt.canvas,this.context=nt.context,nt.bindTextMeasure(this)}},{"key":"_measureTextWithoutAlignBaseline","value":function(nt,at,lt){this.context.setTextStyleWithoutAlignBaseline(at);var Rt=this.context.measureText(nt);return lt?this.compatibleMetrics(Rt,at):Rt}},{"key":"_measureTextWithAlignBaseline","value":function(nt,at,lt){this.context.setTextStyle(at);var Rt=this.context.measureText(nt);return lt?this.compatibleMetrics(Rt,at):Rt}},{"key":"compatibleMetrics","value":function(nt,at){if(null==nt.actualBoundingBoxAscent||null==nt.actualBoundingBoxDescent||null==nt.fontBoundingBoxAscent||null==nt.fontBoundingBoxDescent){nt={"width":nt.width};var lt=this.measureTextBoundADscentEstimate(at),Rt=lt.ascent,Bt=lt.descent;nt.actualBoundingBoxAscent=Rt,nt.actualBoundingBoxDescent=Bt,nt.fontBoundingBoxAscent=Rt,nt.fontBoundingBoxDescent=Bt}if(null==nt.actualBoundingBoxLeft||null==nt.actualBoundingBoxRight){nt={"width":nt.width,"actualBoundingBoxAscent":nt.actualBoundingBoxAscent,"actualBoundingBoxDescent":nt.actualBoundingBoxDescent,"fontBoundingBoxAscent":nt.fontBoundingBoxAscent,"fontBoundingBoxDescent":nt.fontBoundingBoxDescent};var Lt=this.measureTextBoundLeftRightEstimate(at),Ht=Lt.left,jt=Lt.right;nt.actualBoundingBoxLeft=Ht,nt.actualBoundingBoxRight=jt}return nt}},{"key":"estimate","value":function(nt,at){for(var lt=at.fontSize,Rt=void 0===lt?tc.fontSize:lt,Bt=0,Lt=0,Ht=0;Ht<nt.length;Ht++)nt.charCodeAt(Ht)<128?Bt++:Lt++;return{"width":~~(.8*Bt*Rt+Lt*Rt),"height":Rt}}},{"key":"measureTextWidth","value":function(nt,at,lt){return this.context?(lt=null!=lt?lt:this._measureTextWithoutAlignBaseline(nt,at)).width:this.estimate(nt,at).width}},{"key":"measureTextBoundsWidth","value":function(nt,at,lt){return this.context?(lt=null!=lt?lt:this._measureTextWithoutAlignBaseline(nt,at)).width:this.estimate(nt,at).width}},{"key":"measureTextBoundsLeftRight","value":function(nt,at,lt){return this.context?{"left":(lt=null!=lt?lt:this._measureTextWithAlignBaseline(nt,at,!0)).actualBoundingBoxLeft,"right":lt.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(at)}},{"key":"measureTextPixelHeight","value":function(nt,at,lt){var Rt;return this.context?(lt=null!=lt?lt:this._measureTextWithoutAlignBaseline(nt,at,!0),Math.abs(lt.actualBoundingBoxAscent-lt.actualBoundingBoxDescent)):null!==(Rt=at.fontSize)&&void 0!==Rt?Rt:ju.fontSize}},{"key":"measureTextPixelADscent","value":function(nt,at,lt){return this.context?{"ascent":(lt=null!=lt?lt:this._measureTextWithAlignBaseline(nt,at,!0)).actualBoundingBoxAscent,"descent":lt.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(at)}},{"key":"measureTextBoundHieght","value":function(nt,at,lt){var Rt;return this.context?(lt=null!=lt?lt:this._measureTextWithoutAlignBaseline(nt,at,!0),Math.abs(lt.fontBoundingBoxAscent-lt.fontBoundingBoxDescent)):null!==(Rt=at.fontSize)&&void 0!==Rt?Rt:ju.fontSize}},{"key":"measureTextBoundADscent","value":function(nt,at,lt){return this.context?{"ascent":(lt=null!=lt?lt:this._measureTextWithAlignBaseline(nt,at,!0)).fontBoundingBoxAscent,"descent":lt.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(at)}},{"key":"measureTextBoundADscentEstimate","value":function(nt){var at,lt=null!==(at=nt.fontSize)&&void 0!==at?at:ju.fontSize;return{"ascent":.79*lt,"descent":.21*lt}}},{"key":"measureTextBoundLeftRightEstimate","value":function(nt){var at,lt=null!==(at=nt.fontSize)&&void 0!==at?at:ju.fontSize,Rt=nt.textAlign;return"center"===Rt?{"left":lt/2,"right":lt/2}:"right"===Rt||"end"===Rt?{"left":lt,"right":0}:{"left":0,"right":lt}}},{"key":"measureTextPixelADscentAndWidth","value":function(nt,at,lt){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(at)),{"width":this.estimate(nt,at).width});var Rt=this._measureTextWithoutAlignBaseline(nt,at,!0);if(lt===fl.actualBounding)return{"ascent":Rt.actualBoundingBoxAscent,"descent":Rt.actualBoundingBoxDescent,"width":Rt.width};if(lt===fl.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(at)),{"width":Rt.width});if(lt===fl.fontBounding){var Bt=Rt.fontBoundingBoxAscent,Lt=Rt.fontBoundingBoxDescent;if(Rt.actualBoundingBoxDescent&&Lt<Rt.actualBoundingBoxDescent){var Ht=Rt.actualBoundingBoxDescent-Lt;Lt+=Ht,Bt-=Ht}else if(Rt.actualBoundingBoxAscent&&Bt<Rt.actualBoundingBoxAscent){var jt=Rt.actualBoundingBoxAscent-Bt;Bt+=jt,Lt-=jt}return{"ascent":Bt,"descent":Lt,"width":Rt.width}}return{"ascent":Rt.actualBoundingBoxAscent,"descent":Rt.actualBoundingBoxDescent,"width":Rt.width}}},{"key":"measureText","value":function(nt,at){return this.context?(this.context.setTextStyleWithoutAlignBaseline(at),this.context.measureText(nt)):this.estimate(nt,at)}},{"key":"clipTextVertical","value":function(nt,at,lt,Rt){var Bt=this;if(0===nt.length)return{"verticalList":nt,"width":0};var Lt=at.fontSize,Ht=void 0===Lt?12:Lt;nt.forEach((function(nt){nt.width=0===nt.direction?Ht:Bt.measureTextWidth(nt.text,at)}));for(var jt=[],$t=0,Kt=0;Kt<nt.length&&$t+nt[Kt].width<lt;Kt++)$t+=nt[Kt].width,jt.push(nt[Kt]);if(nt[Kt]&&nt[Kt].text.length>1){var te=this._clipText(nt[Kt].text,at,lt-$t,0,nt[Kt].text.length-1,"end",!1);if(Rt&&te.str!==nt[Kt].text){for(var ne="",re=0,ae=0;ae<Kt;ae++){var oe=nt[ae];ne+=oe.text,re+=oe.text.length}var se=dc(ne+=nt[Kt].text,re+te.str.length);(se-=re)!=te.str.length-1&&(te.str=te.str.substring(0,se),te.width=this.measureTextWidth(te.str,at))}jt.push(Object.assign(Object.assign({},nt[Kt]),{"text":te.str,"width":te.width})),$t+=te.width}return{"verticalList":jt,"width":$t}}},{"key":"clipText","value":function(nt,at,lt,Rt,Bt){if(0===nt.length)return{"str":"","width":0};var Lt=this.measureTextWidth(nt,at);if(Lt<=lt)return{"str":nt,"width":Lt};if((Lt=this.measureTextWidth(nt[0],at))>lt)return{"str":"","width":0};var Ht=this._clipText(nt,at,lt,0,nt.length-1,"end",!1);if(Rt&&Ht.str!==nt){var jt=dc(nt,Ht.str.length,Bt);jt!==Ht.str.length&&(jt>Ht.str.length&&(Ht.wordBreaked=jt,jt=Ht.str.length),Ht.str=nt.substring(0,jt),Ht.width=this.measureTextWidth(Ht.str,at))}return Ht}},{"key":"_clipText","value":function(nt,at,lt,Rt,Bt,Lt,Ht){var jt;if("start"===Lt)jt=this._clipTextStart(nt,at,lt,Rt,Bt),Ht&&(jt.result=Ht+jt.str);else if("middle"===Lt){var $t=this._clipTextMiddle(nt,at,lt,"","",0,0,1);jt={"str":"none","width":$t.width,"result":$t.left+Ht+$t.right}}else jt=this._clipTextEnd(nt,at,lt,Rt,Bt),Ht&&(jt.result=jt.str+Ht);return jt}},{"key":"_clipTextEnd","value":function(nt,at,lt,Rt,Bt){if(Rt===Bt){te.getInstance().warn("_clipTextEnd".concat(nt,", ").concat(Rt,", ").concat(Bt));var Lt=nt.substring(0,Bt+1);return{"str":Lt,"width":this.measureTextWidth(Lt,at)}}var Ht,jt=Math.floor((Rt+Bt)/2),$t=nt.substring(0,jt+1),Kt=this.measureTextWidth($t,at);if(Kt>lt){if($t.length<=1)return{"str":"","width":0};var ne=nt.substring(0,jt);return(Ht=this.measureTextWidth(ne,at))<=lt?{"str":ne,"width":Ht}:this._clipTextEnd(nt,at,lt,Rt,jt)}if(Kt<lt){if(jt>=nt.length-1)return{"str":nt,"width":this.measureTextWidth(nt,at)};var re=nt.substring(0,jt+2);return(Ht=this.measureTextWidth(re,at))>=lt?{"str":$t,"width":Kt}:this._clipTextEnd(nt,at,lt,jt,Bt)}return{"str":$t,"width":Kt}}},{"key":"_clipTextStart","value":function(nt,at,lt,Rt,Bt){var Lt,Ht=Math.ceil((Rt+Bt)/2),jt=nt.substring(Ht-1,nt.length),$t=this.measureTextWidth(jt,at);if($t>lt){if(jt.length<=1)return{"str":"","width":0};var Kt=nt.substring(Ht,nt.length);return(Lt=this.measureTextWidth(Kt,at))<=lt?{"str":Kt,"width":Lt}:this._clipTextStart(nt,at,lt,Ht,nt.length)}if($t<lt){if(Ht<=0)return{"str":nt,"width":this.measureTextWidth(nt,at)};var te=nt.substring(Ht-2,nt.length);return(Lt=this.measureTextWidth(te,at))>=lt?{"str":jt,"width":$t}:this._clipTextStart(nt,at,lt,Rt,Ht)}return{"str":jt,"width":$t}}},{"key":"_clipTextMiddle","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=nt.substring(0,jt),Kt=this.measureTextWidth($t,at);if(Kt+Ht>lt)return{"left":Rt,"right":Bt,"width":Lt+Ht};var te=nt.substring(nt.length-jt,nt.length),ne=this.measureTextWidth(te,at);return Kt+ne>lt?{"left":$t,"right":Bt,"width":Kt+Ht}:this._clipTextMiddle(nt,at,lt,$t,te,Kt,ne,jt+1)}},{"key":"clipTextWithSuffixVertical","value":function(nt,at,lt,Rt,Bt,Lt){if(""===Rt)return this.clipTextVertical(nt,at,lt,Bt);if(0===nt.length)return{"verticalList":nt,"width":0};var Ht=this.clipTextVertical(nt,at,lt,Bt);if(Ht.verticalList.length===nt.length&&Ht.verticalList[Ht.verticalList.length-1].width===nt[nt.length-1].width)return Ht;var jt,$t=this.measureTextWidth(Rt,at);if($t>lt)return Ht;if(lt-=$t,"start"===Lt){var Kt=this.revertVerticalList(nt);jt=this.clipTextVertical(Kt,at,lt,Bt);var te=this.revertVerticalList(jt.verticalList);te.unshift({"text":Rt,"direction":1,"width":$t}),jt.verticalList=te}else if("middle"===Lt){var ne=this.clipTextVertical(nt,at,lt/2,Bt),re=this.revertVerticalList(nt),ae=this.clipTextVertical(re,at,lt/2,Bt);ne.verticalList.push({"text":Rt,"direction":1,"width":$t}),this.revertVerticalList(ae.verticalList).forEach((function(nt){return ne.verticalList.push(nt)})),jt={"verticalList":ne.verticalList,"width":ne.width+ae.width}}else(jt=this.clipTextVertical(nt,at,lt,Bt)).verticalList.push({"text":Rt,"direction":1,"width":$t});return jt.width+=$t,jt}},{"key":"revertVerticalList","value":function(nt){return nt.reverse().map((function(nt){var at=nt.text.split("").reverse().join("");return Object.assign(Object.assign({},nt),{"text":at})}))}},{"key":"clipTextWithSuffix","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(""===Rt)return this.clipText(nt,at,lt,Bt);if(0===nt.length)return{"str":"","width":0};var jt=this.measureTextWidth(nt,at);if(!Ht&&jt<=lt)return{"str":nt,"width":jt};var $t=this.measureTextWidth(Rt,at);if($t>lt)return{"str":"","width":0};if(Ht&&jt+$t<=lt)return{"str":nt+Rt,"width":jt+$t};lt-=$t;var Kt=this._clipText(nt,at,lt,0,nt.length-1,Lt,Rt);if(Bt&&Kt.str!==nt){var te=dc(nt,Kt.str.length);te!==Kt.str.length&&(Kt.result=nt.substring(0,te),Kt.width=this.measureTextWidth(Kt.str,at))}else Ht&&Kt.str===nt&&(Kt.result=nt+Rt);return Kt.str=Kt.result,Kt.width+=$t,Kt}}]);kc=vc([Hs()],kc);var yc=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Ac=Symbol.for("TextMeasureContribution"),wc=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e)}(kc);wc=yc([Hs()],wc);var Mc=new sl,Ec=Symbol.for("CanvasFactory"),Pc=Symbol.for("Context2dFactory");function Sc(nt){return Mc.getNamed(Ec,oc.global.env)(nt)}var Rc=1e-4,jc=Math.sqrt(3),Vc=1/3;function Tc(nt){return nt>-Jc&&nt<Jc}function Cc(nt){return nt>Jc||nt<-Jc}var Gc=[0,0],qc=[0,0],Qc=[0,0];function Bc(nt,at){return(nt[0]-at[0])*(nt[0]-at[0])+(nt[1]-at[1])*(nt[1]-at[1])}function Ic(nt,at,lt,Rt){var Bt=1-Rt;return Bt*(Bt*nt+2*Rt*at)+Rt*Rt*lt}function Lc(nt,at,lt,Rt,Bt){var Lt=1-Bt;return Lt*Lt*(Lt*nt+3*Bt*at)+Bt*Bt*(Bt*Rt+3*Lt*lt)}function Dc(nt){return(nt%=de)<0&&(nt+=de),nt}function Oc(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){if(0===Ht)return!1;var Kt=Ht;return!($t>at+Kt&&$t>Rt+Kt&&$t>Lt+Kt||$t<at-Kt&&$t<Rt-Kt&&$t<Lt-Kt||jt>nt+Kt&&jt>lt+Kt&&jt>Bt+Kt||jt<nt-Kt&&jt<lt-Kt&&jt<Bt-Kt)&&function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){var Kt=0,te=.005,ne=1/0;Gc[0]=Ht,Gc[1]=jt;for(var re=0;re<1;re+=.05){qc[0]=Ic(nt,lt,Bt,re),qc[1]=Ic(at,Rt,Lt,re);var ae=Bc(Gc,qc);ae<ne&&(Kt=re,ne=ae)}ne=1/0;for(var oe=0;oe<32&&!(te<Rc);oe++){var se=Kt-te,le=Kt+te;qc[0]=Ic(nt,lt,Bt,se),qc[1]=Ic(at,Rt,Lt,se);var ue=Bc(qc,Gc);if(se>=0&&ue<ne)Kt=se,ne=ue;else{Qc[0]=Ic(nt,lt,Bt,le),Qc[1]=Ic(at,Rt,Lt,le);var ce=Bc(Qc,Gc);le<=1&&ce<ne?(Kt=le,ne=ce):te*=.5}}return $t&&($t[0]=Ic(nt,lt,Bt,Kt),$t[1]=Ic(at,Rt,Lt,Kt)),Math.sqrt(ne)}(nt,at,lt,Rt,Bt,Lt,jt,$t,null)<=Kt/2}function Fc(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te){if(0===$t)return!1;var ne=$t;return!(te>at+ne&&te>Rt+ne&&te>Lt+ne&&te>jt+ne||te<at-ne&&te<Rt-ne&&te<Lt-ne&&te<jt-ne||Kt>nt+ne&&Kt>lt+ne&&Kt>Bt+ne&&Kt>Ht+ne||Kt<nt-ne&&Kt<lt-ne&&Kt<Bt-ne&&Kt<Ht-ne)&&function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te){var ne,re,ae,oe,se=0,le=.005,ue=1/0;Gc[0]=$t,Gc[1]=Kt;for(var ce=0;ce<1;ce+=.05)qc[0]=Lc(nt,lt,Bt,Ht,ce),qc[1]=Lc(at,Rt,Lt,jt,ce),(ae=Bc(Gc,qc))<ue&&(se=ce,ue=ae);ue=1/0;for(var he=0;he<32&&!(le<Rc);he++)ne=se-le,re=se+le,qc[0]=Lc(nt,lt,Bt,Ht,ne),qc[1]=Lc(at,Rt,Lt,jt,ne),ae=Bc(qc,Gc),ne>=0&&ae<ue?(se=ne,ue=ae):(Qc[0]=Lc(nt,lt,Bt,Ht,re),Qc[1]=Lc(at,Rt,Lt,jt,re),oe=Bc(Qc,Gc),re<=1&&oe<ue?(se=re,ue=oe):le*=.5);return te&&(te[0]=Lc(nt,lt,Bt,Ht,se),te[1]=Lc(at,Rt,Lt,jt,se)),Math.sqrt(ue)}(nt,at,lt,Rt,Bt,Lt,Ht,jt,Kt,te,null)<=ne/2}function zc(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){if(0===Ht)return!1;var Kt=Ht;jt-=nt,$t-=at;var te=Math.sqrt(jt*jt+$t*$t);if(te-Kt>lt||te+Kt<lt)return!1;if(Math.abs(Rt-Bt)%de<1e-4)return!0;if(Lt){var ne=Rt;Rt=Dc(Bt),Bt=Dc(ne)}else Rt=Dc(Rt),Bt=Dc(Bt);Rt>Bt&&(Bt+=de);var re=Math.atan2($t,jt);return re<0&&(re+=de),re>=Rt&&re<=Bt||re+de>=Rt&&re+de<=Bt}function Hc(nt,at,lt,Rt,Bt,Lt,Ht){if(0===Bt)return!1;var jt,$t=Bt,Kt=Bt/2;if(Ht>at+Kt&&Ht>Rt+Kt||Ht<at-Kt&&Ht<Rt-Kt||Lt>nt+Kt&&Lt>lt+Kt||Lt<nt-Kt&&Lt<lt-Kt)return!1;if(nt===lt)return Math.abs(Lt-nt)<=$t/2;var te=(jt=(at-Rt)/(nt-lt))*Lt-Ht+(nt*Rt-lt*at)/(nt-lt);return te*te/(jt*jt+1)<=$t/2*$t/2}var Jc=1e-4;function Nc(nt,at,lt,Rt,Bt){var Lt=6*lt-12*at+6*nt,Ht=9*at+3*Rt-3*nt-9*lt,jt=3*at-3*nt,$t=0;if(Tc(Ht)){if(Cc(Lt)){var Kt=-jt/Lt;Kt>=0&&Kt<=1&&(Bt[$t++]=Kt)}}else{var te=Lt*Lt-4*Ht*jt;if(Tc(te))Bt[0]=-Lt/(2*Ht);else if(te>0){var ne=Math.sqrt(te),re=(-Lt+ne)/(2*Ht),ae=(-Lt-ne)/(2*Ht);re>=0&&re<=1&&(Bt[$t++]=re),ae>=0&&ae<=1&&(Bt[$t++]=ae)}}return $t}var eh=[-1,-1,-1],ih=[-1,-1];function Wc(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt){if(Kt>at&&Kt>Rt&&Kt>Lt&&Kt>jt||Kt<at&&Kt<Rt&&Kt<Lt&&Kt<jt)return 0;var te=function(nt,at,lt,Rt,Bt,Lt){var Ht=Rt+3*(at-lt)-nt,jt=3*(lt-2*at+nt),$t=3*(at-nt),Kt=nt-Bt,te=jt*jt-3*Ht*$t,ne=jt*$t-9*Ht*Kt,re=$t*$t-3*jt*Kt,ae=0;if(Tc(te)&&Tc(ne))if(Tc(jt))Lt[0]=0;else{var oe=-$t/jt;oe>=0&&oe<=1&&(Lt[ae++]=oe)}else{var se=ne*ne-4*te*re;if(Tc(se)){var le=ne/te,ue=-jt/Ht+le,ce=-le/2;ue>=0&&ue<=1&&(Lt[ae++]=ue),ce>=0&&ce<=1&&(Lt[ae++]=ce)}else if(se>0){var he=Math.sqrt(se),de=te*jt+1.5*Ht*(-ne+he),fe=te*jt+1.5*Ht*(-ne-he),pe=(-jt-((de=de<0?-Math.pow(-de,Vc):Math.pow(de,Vc))+(fe=fe<0?-Math.pow(-fe,Vc):Math.pow(fe,Vc))))/(3*Ht);pe>=0&&pe<=1&&(Lt[ae++]=pe)}else{var ve=(2*te*jt-3*Ht*ne)/(2*Math.sqrt(te*te*te)),Ae=Math.acos(ve)/3,we=Math.sqrt(te),Ce=Math.cos(Ae),je=(-jt-2*we*Ce)/(3*Ht),Ne=(-jt+we*(Ce+jc*Math.sin(Ae)))/(3*Ht),Ve=(-jt+we*(Ce-jc*Math.sin(Ae)))/(3*Ht);je>=0&&je<=1&&(Lt[ae++]=je),Ne>=0&&Ne<=1&&(Lt[ae++]=Ne),Ve>=0&&Ve<=1&&(Lt[ae++]=Ve)}}return ae}(at,Rt,Lt,jt,Kt,eh);if(0===te)return 0;for(var ne,re=0,ae=-1,oe=0,se=0,le=0;le<te;le++){var ue=eh[le],ce=0===ue||1===ue?.5:1;Lc(nt,lt,Bt,Ht,ue)<$t||(ae<0&&(ae=Nc(at,Rt,Lt,jt,ih),ih[1]<ih[0]&&ae>1&&(ne=void 0,ne=ih[0],ih[0]=ih[1],ih[1]=ne),oe=Lc(at,Rt,Lt,jt,ih[0]),ae>1&&(se=Lc(at,Rt,Lt,jt,ih[1]))),2===ae?ue<ih[0]?re+=oe<at?ce:-ce:ue<ih[1]?re+=se<oe?ce:-ce:re+=jt<se?ce:-ce:ue<ih[0]?re+=oe<at?ce:-ce:re+=jt<oe?ce:-ce)}return re}function Uc(nt,at,lt,Rt,Bt,Lt,Ht,jt){if(jt>at&&jt>Rt&&jt>Lt||jt<at&&jt<Rt&&jt<Lt)return 0;var $t=function(nt,at,lt,Rt,Bt){var Lt=nt-2*at+lt,Ht=2*(at-nt),jt=nt-Rt,$t=0;if(Tc(Lt)){if(Cc(Ht)){var Kt=-jt/Ht;Kt>=0&&Kt<=1&&(Bt[$t++]=Kt)}}else{var te=Ht*Ht-4*Lt*jt;if(Tc(te)){var ne=-Ht/(2*Lt);ne>=0&&ne<=1&&(Bt[$t++]=ne)}else if(te>0){var re=Math.sqrt(te),ae=(-Ht+re)/(2*Lt),oe=(-Ht-re)/(2*Lt);ae>=0&&ae<=1&&(Bt[$t++]=ae),oe>=0&&oe<=1&&(Bt[$t++]=oe)}}return $t}(at,Rt,Lt,jt,eh);if(0===$t)return 0;var Kt,te,ne,re=0==(ne=(Kt=at)+Lt-2*(te=Rt))?.5:(Kt-te)/ne;if(re>=0&&re<=1){for(var ae=0,oe=Ic(at,Rt,Lt,re),se=0;se<$t;se++){var le=0===eh[se]||1===eh[se]?.5:1;Ic(nt,lt,Bt,eh[se])<Ht||(eh[se]<re?ae+=oe<at?le:-le:ae+=Lt<oe?le:-le)}return ae}var ue=0===eh[0]||1===eh[0]?.5:1;return Ic(nt,lt,Bt,eh[0])<Ht?0:Lt<at?ue:-ue}function Yc(nt,at,lt,Rt,Bt,Lt,Ht,jt){if((jt-=at)>lt||jt<-lt)return 0;var $t=Math.sqrt(lt*lt-jt*jt);eh[0]=-$t,eh[1]=$t;var Kt=Math.abs(Rt-Bt);if(Kt<1e-4)return 0;if(Kt>=de-1e-4){Rt=0,Bt=de;var te=Lt?1:-1;return Ht>=eh[0]+nt&&Ht<=eh[1]+nt?te:0}if(Rt>Bt){var ne=Rt;Rt=Bt,Bt=ne}Rt<0&&(Rt+=de,Bt+=de);for(var re=0,ae=0;ae<2;ae++){var oe=eh[ae];if(oe+nt>Ht){var se=Math.atan2(jt,oe),le=Lt?1:-1;se<0&&(se=de+se),(se>=Rt&&se<=Bt||se+de>=Rt&&se+de<=Bt)&&(se>ue/2&&se<1.5*ue&&(le=-le),re+=le)}}return re}function Xc(nt){return Math.round(nt/ue*1e8)/1e8%2*ue}function Kc(nt,at){var lt=Xc(nt[0]);lt<0&&(lt+=de);var Rt=lt-nt[0],Bt=nt[1];Bt+=Rt,!at&&Bt-lt>=de?Bt=lt+de:at&&lt-Bt>=de?Bt=lt-de:!at&&lt>Bt?Bt=lt+(de-Xc(lt-Bt)):at&&lt<Bt&&(Bt=lt-(de-Xc(Bt-lt))),nt[0]=lt,nt[1]=Bt}var nh=[0,0];function Zc(nt,at,lt,Rt,Bt){for(var Lt,Ht,jt=nt,$t=nt.length,Kt=0,te=0,ne=0,re=0,ae=0,oe=0;oe<$t;oe++){var se=jt[oe],le=0===oe;se[0]===Zl.M&&oe>1&&(lt||(Kt+=ni(te,ne,re,ae,Rt,Bt))),le&&(re=te=se[1],ae=ne=se[2]);var ue=se[0],ce=se[1],he=se[2],de=se[3],fe=se[4],pe=se[5],ve=se[6],Ae=fe,we=pe;nh[0]=Ae,nh[1]=we,Kc(nh,Boolean(se[6]));var Ce=Ae=nh[0],je=(we=nh[1])-Ae,Ne=!!(1-(se[6]?0:1)),Ve=(Rt-ce)*de/de+ce;switch(ue){case Zl.M:te=re=ce,ne=ae=he;break;case Zl.L:if(lt){if(Hc(te,ne,ce,he,at,Rt,Bt))return!0}else Kt+=ni(te,ne,ce,he,Rt,Bt)||0;te=ce,ne=he;break;case Zl.C:if(lt){if(Fc(te,ne,ce,he,de,fe,pe,ve,at,Rt,Bt))return!0}else Kt+=Wc(te,ne,ce,he,de,fe,pe,ve,Rt,Bt)||0;te=pe,ne=ve;break;case Zl.Q:if(lt){if(Oc(te,ne,ce,he,de,fe,at,Rt,Bt))return!0}else Kt+=Uc(te,ne,ce,he,de,fe,Rt,Bt)||0;te=de,ne=fe;break;case Zl.A:if(Lt=Math.cos(Ce)*de+ce,Ht=Math.sin(Ce)*de+he,le?(re=Lt,ae=Ht):Kt+=ni(te,ne,Lt,Ht,Rt,Bt),lt){if(zc(ce,he,de,Ce,Ce+je,Ne,at,Ve,Bt))return!0}else Kt+=Yc(ce,he,de,Ce,Ce+je,Ne,Ve,Bt);te=Math.cos(Ce+je)*de+ce,ne=Math.sin(Ce+je)*de+he;break;case Zl.R:if(Lt=(re=te=ce)+de,Ht=(ae=ne=he)+fe,lt){if(Hc(re,ae,Lt,ae,at,Rt,Bt)||Hc(Lt,ae,Lt,Ht,at,Rt,Bt)||Hc(Lt,Ht,re,Ht,at,Rt,Bt)||Hc(re,Ht,re,ae,at,Rt,Bt))return!0}else Kt+=ni(Lt,ae,Lt,Ht,Rt,Bt),Kt+=ni(re,Ht,re,ae,Rt,Bt);break;case Zl.Z:if(lt){if(Hc(te,ne,re,ae,at,Rt,Bt))return!0}else Kt+=ni(te,ne,re,ae,Rt,Bt);te=re,ne=ae}}return lt||function(nt,at){return Math.abs(nt-at)<Jc}(ne,ae)||(Kt+=ni(te,ne,re,ae,Rt,Bt)||0),0!==Kt}var rh=o((function t(){r(this,t),this.pools=[],this.allocatedCanvas=[]}),[{"key":"shareCanvas","value":function(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}},{"key":"getCommonCanvas","value":function(){return this._commonCanvas||(this._commonCanvas=this.allocate({"width":100,"height":100,"dpr":2})),this._commonCanvas}},{"key":"allocate","value":function(nt){if(!this.pools.length){var at=Sc(Object.assign({"nativeCanvas":oc.global.createCanvas(nt)},nt));return this.allocatedCanvas.push(at),at}var lt=this.pools.pop();return lt.resize(nt.width,nt.height),lt.dpr=nt.dpr,lt}},{"key":"allocateByObj","value":function(nt){if(!this.pools.length){var at={"width":nt.width/nt.dpr,"height":nt.height/nt.dpr,"dpr":nt.dpr},lt=Sc(Object.assign({"nativeCanvas":oc.global.createCanvas(at)},at));return this.allocatedCanvas.push(lt),lt}var Rt=this.pools.pop();return Rt.width=nt.width,Rt.height=nt.height,Rt}},{"key":"free","value":function(nt){this.pools.push(nt)}},{"key":"length","get":function(){return this.pools.length}},{"key":"release","value":function(){this.pools=[]}}]),lh=new rh,$c=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},th=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},uh=Symbol.for("VWindow"),ch=Symbol.for("WindowHandlerContribution"),hh=o((function t(){var nt=this;r(this,t),this.hooks={"onChange":new gl(["x","y","width","height"])},this.active=function(){var at=nt.global;at.env&&!nt.actived&&(Mc.getNamed(ch,at.env).configure(nt,at),nt.actived=!0)},this._uid=Ps.GenAutoIncrementId(),this.global=oc.global,this.postInit()}),[{"key":"width","get":function(){if(this._handler){var nt=this._handler.getWH();return this._width=nt.width}return this._width}},{"key":"height","get":function(){if(this._handler){var nt=this._handler.getWH();return this._height=nt.height}return this._height}},{"key":"dpr","get":function(){return this._handler.getDpr()}},{"key":"postInit","value":function(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}},{"key":"style","get":function(){var nt;return null!==(nt=this._handler.getStyle())&&void 0!==nt?nt:{}},"set":function(nt){this._handler.setStyle(nt)}},{"key":"create","value":function(nt){var at,lt;this._handler.createWindow(nt);var Rt=this._handler.getWH();this._width=Rt.width,this._height=Rt.height,nt.viewBox?this.setViewBox(nt.viewBox):!1!==nt.canvasControled?this.setViewBox({"x1":0,"y1":0,"x2":this._width,"y2":this._height}):this.setViewBox({"x1":0,"y1":0,"x2":null!==(at=nt.width)&&void 0!==at?at:this._width,"y2":null!==(lt=nt.height)&&void 0!==lt?lt:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}},{"key":"setWindowHandler","value":function(nt){this._handler=nt}},{"key":"setDpr","value":function(nt){return this._handler.setDpr(nt)}},{"key":"resize","value":function(nt,at){return this._handler.resizeWindow(nt,at)}},{"key":"configure","value":function(){throw new Error("")}},{"key":"release","value":function(){return this.global.hooks.onSetEnv.unTap("window",this.active),this._handler.releaseWindow()}},{"key":"getContext","value":function(){return this._handler.getContext()}},{"key":"getNativeHandler","value":function(){return this._handler.getNativeHandler()}},{"key":"getImageBuffer","value":function(nt){return this._handler.getImageBuffer?this._handler.getImageBuffer(nt):null}},{"key":"addEventListener","value":function(nt,at,lt){return this._handler.addEventListener(nt,at,lt)}},{"key":"removeEventListener","value":function(nt,at,lt){return this._handler.removeEventListener(nt,at,lt)}},{"key":"dispatchEvent","value":function(nt){return this._handler.dispatchEvent(nt)}},{"key":"getBoundingClientRect","value":function(){return this._handler.getBoundingClientRect()}},{"key":"getContainer","value":function(){return this._handler.container}},{"key":"clearViewBox","value":function(nt){this._handler.clearViewBox(nt)}},{"key":"setViewBox","value":function(nt){this._handler.setViewBox(nt)}},{"key":"setViewBoxTransform","value":function(nt,at,lt,Rt,Bt,Lt){this._handler.setViewBoxTransform(nt,at,lt,Rt,Bt,Lt)}},{"key":"getViewBox","value":function(){return this._handler.getViewBox()}},{"key":"getViewBoxTransform","value":function(){return this._handler.getViewBoxTransform()}},{"key":"pointTransform","value":function(nt,at){var lt=this._handler.getViewBox(),Rt={"x":nt,"y":at};return this._handler.getViewBoxTransform().transformPoint({"x":nt,"y":at},Rt),Rt.x-=lt.x1,Rt.y-=lt.y1,Rt}},{"key":"hasSubView","value":function(){var nt=this._handler.getViewBox();return!(0===nt.x1&&0===nt.y1&&Nt(this.width,nt.width())&&Nt(this.height,nt.height()))}},{"key":"isVisible","value":function(nt){return this._handler.isVisible(nt)}},{"key":"onVisibleChange","value":function(nt){return this._handler.onVisibleChange(nt)}},{"key":"getTopLeft","value":function(nt){return this._handler.getTopLeft(nt)}}]);hh=$c([Hs(),th("design:paramtypes",[])],hh);var dh,ah=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},oh=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},sh=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},fh=o((function t(nt){var at=this;r(this,t),this.contributions=nt,this.configured=!1,this.global=oc.global,this.global.hooks.onSetEnv.tap("graphic-util",(function(nt,lt,Rt){at.configured=!1,at.configure(Rt,lt)}))}),[{"key":"canvas","get":function(){return this.tryInitCanvas(),this._canvas}},{"key":"context","get":function(){return this.tryInitCanvas(),this._context}},{"key":"textMeasure","get":function(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}},{"key":"configure","value":function(nt,at){var lt=this;this.configured||(this.contributions.getContributions().forEach((function(nt){nt.configure(lt,at)})),this.configured=!0)}},{"key":"tryInitCanvas","value":function(){if(!this._canvas){var nt=lh.shareCanvas();this._canvas=nt,this._context=nt.getContext("2d")}}},{"key":"bindTextMeasure","value":function(nt){this._textMeasure=nt}},{"key":"measureText","value":function(nt,at){var lt,Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"native";this.configure(this.global,this.global.env);var Bt=this.global.measureTextMethod;this.global.measureTextMethod=Rt;var Lt={"width":this._textMeasure.measureTextWidth(nt,at),"height":null!==(lt=at.fontSize)&&void 0!==lt?lt:ju.fontSize};return this.global.measureTextMethod=Bt,Lt}},{"key":"createTextMeasureInstance","value":function(nt,at,lt){var Rt=this;return this.configure(this.global,this.global.env),new vi(Object.assign({"defaultFontParams":{"fontFamily":ju.fontFamily,"fontSize":ju.fontSize},"getCanvasForMeasure":lt||function(){return Rt.canvas},"getTextBounds":void 0,"specialCharSet":"-/: .,@%'\"~"+vi.ALPHABET_CHAR_SET+vi.ALPHABET_CHAR_SET.toUpperCase()},null!=at?at:{}),nt)}},{"key":"drawGraphicToCanvas","value":function(nt,at,lt){if(!at.defaultLayer)return null;var Rt=Mc.get(uh),Bt=nt.AABBBounds,Lt=Bt.width(),Ht=Bt.height(),jt=-Bt.x1,$t=-Bt.y1;Rt.create({"viewBox":{"x1":jt,"y1":$t,"x2":Bt.x2,"y2":Bt.y2},"width":Lt,"height":Ht,"canvas":lt,"dpr":at.window.dpr,"canvasControled":!0,"offscreen":!0,"title":""});var Kt=at.params.optimize.disableCheckGraphicWidthOutRange;at.params.optimize.disableCheckGraphicWidthOutRange=!0,at.defaultLayer.getNativeHandler().drawTo(Rt,[nt],{"transMatrix":Rt.getViewBoxTransform(),"viewBox":Rt.getViewBox(),"stage":at,"layer":at.defaultLayer,"renderService":at.renderService,"background":"transparent","clear":!0,"updateBounds":!1}),at.params.optimize.disableCheckGraphicWidthOutRange=Kt;var te=Rt.getNativeHandler();return te.nativeCanvas?te.nativeCanvas:null}}]);fh=ah([Hs(),sh(0,Gs(ll)),sh(0,js(Ac)),oh("design:paramtypes",[Object])],fh),function(nt){nt[nt.transform=0]="transform",nt[nt.matrix=1]="matrix"}(dh||(dh={}));var vh=new Mi,gh=o((function t(){r(this,t),this.matrix=new Mi}),[{"key":"init","value":function(nt){return this.mode=dh.transform,this.originTransform=nt,this.matrix.reset(),this}},{"key":"fromMatrix","value":function(nt,at){return this.mode=dh.matrix,this.outSourceMatrix=nt,this.outTargetMatrix=at,this}},{"key":"scaleMatrix","value":function(nt,at,lt){var Rt=this.outSourceMatrix;if(vh.setValue(Rt.a,Rt.b,Rt.c,Rt.d,Rt.e,Rt.f),this.outTargetMatrix.reset(),lt){var Bt=lt.x,Lt=lt.y;this.outTargetMatrix.translate(Bt,Lt),this.outTargetMatrix.scale(nt,at),this.outTargetMatrix.translate(-Bt,-Lt)}else this.outTargetMatrix.scale(nt,at);return this.outTargetMatrix.multiply(vh.a,vh.b,vh.c,vh.d,vh.e,vh.f),this}},{"key":"rotateMatrix","value":function(nt,at){var lt=this.outSourceMatrix;if(vh.setValue(lt.a,lt.b,lt.c,lt.d,lt.e,lt.f),this.outTargetMatrix.reset(),at){var Rt=at.x,Bt=at.y;this.outTargetMatrix.translate(Rt,Bt),this.outTargetMatrix.rotate(nt),this.outTargetMatrix.translate(-Rt,-Bt)}else this.outTargetMatrix.rotate(nt);return this.outTargetMatrix.multiply(vh.a,vh.b,vh.c,vh.d,vh.e,vh.f),this}},{"key":"scale","value":function(nt,at,lt){return this.mode===dh.matrix?this.scaleMatrix(nt,at,lt):this}},{"key":"rotate","value":function(nt,at){return this.mode===dh.matrix?this.rotateMatrix(nt,at):this}},{"key":"translateMatrix","value":function(nt,at){var lt=this.outSourceMatrix;return vh.setValue(lt.a,lt.b,lt.c,lt.d,lt.e,lt.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(nt,at),this.outTargetMatrix.multiply(vh.a,vh.b,vh.c,vh.d,vh.e,vh.f),this}},{"key":"translate","value":function(nt,at){return this.mode===dh.matrix?this.translateMatrix(nt,at):this}},{"key":"simplify","value":function(nt){return this.mode===dh.matrix?this.simplifyMatrix(nt):this}},{"key":"simplifyMatrix","value":function(nt){return this}}]);gh=ah([Hs(),oh("design:paramtypes",[])],gh);var _h={"arc":Gu,"area":Uu,"circle":Yu,"line":qu,"path":Ku,"symbol":Ju,"text":tc,"rect":Qu,"polygon":Zu,"richtext":ec,"richtextIcon":ac,"image":rc,"group":Xu,"glyph":$u},bh=Object.keys(_h);function ph(nt,at){Object.keys(at).forEach((function(lt){nt[lt]=at[lt]}))}var xh={"arc":Object.assign({},_h.arc),"area":Object.assign({},_h.area),"circle":Object.assign({},_h.circle),"line":Object.assign({},_h.line),"path":Object.assign({},_h.path),"symbol":Object.assign({},_h.symbol),"text":Object.assign({},_h.text),"rect":Object.assign({},_h.rect),"polygon":Object.assign({},_h.polygon),"richtext":Object.assign({},_h.richtext),"richtextIcon":Object.assign({},_h.richtextIcon),"image":Object.assign({},_h.image),"group":Object.assign({},_h.group),"glyph":Object.assign({},_h.glyph)},kh=o((function t(){r(this,t),this.initTheme(),this.dirty=!1}),[{"key":"initTheme","value":function(){var nt=this;this._defaultTheme={},bh.forEach((function(at){nt._defaultTheme[at]=Object.create(xh[at])})),this.combinedTheme=this._defaultTheme}},{"key":"getTheme","value":function(nt){if(!nt)return this.combinedTheme;if(!this.dirty)return this.combinedTheme;var at={},lt=this.getParentWithTheme(nt);return lt&&(at=lt.theme),this.applyTheme(nt,at),this.combinedTheme}},{"key":"getParentWithTheme","value":function(nt){for(;nt.parent;)if((nt=nt.parent).theme)return nt;return null}},{"key":"applyTheme","value":function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.dirty){var Rt=this.getParentWithTheme(nt);if(Rt){var Bt=Rt.theme;(Bt.dirty||lt)&&Bt.applyTheme(Rt,at,!0)}this.userTheme?this.doCombine(Rt&&Rt.theme.combinedTheme):(Rt?this.combinedTheme=Rt.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,te.getInstance().warn("")),this.dirty=!1)}return this.combinedTheme}},{"key":"doCombine","value":function(nt){var at=this,lt=this.userTheme,Rt=this.combinedTheme;bh.forEach((function(Bt){var Lt=Object.create(xh[Bt]);nt&&nt[Bt]&&ph(Lt,nt[Bt]),Rt[Bt]&&ph(Lt,Rt[Bt]),lt[Bt]&&ph(Lt,lt[Bt]),at.combinedTheme[Bt]=Lt})),lt.common&&bh.forEach((function(nt){ph(at.combinedTheme[nt],lt.common)})),this.dirty=!1}},{"key":"setTheme","value":function(nt,at){var lt=this.userTheme;lt?Object.keys(nt).forEach((function(at){lt[at]?Object.assign(lt[at],nt[at]):lt[at]=Object.assign({},nt[at])})):lt=nt,this.userTheme=lt,this.dirty=!0,this.dirtyChildren(at)}},{"key":"resetTheme","value":function(nt,at){this.userTheme=nt,this.dirty=!0,this.dirtyChildren(at)}},{"key":"dirtyChildren","value":function(nt){var at=this;nt.forEachChildren((function(nt){nt.isContainer&&(nt.theme&&(nt.theme.dirty=!0),at.dirtyChildren(nt))}))}}]),Sh=new kh;function yh(nt,at){return nt.glyphHost?yh(nt.glyphHost):at?(nt.isContainer,at):function(nt){var at;if(at=nt.isContainer?nt:nt.parent){for(;at&&!at.theme;)at=at.parent;return at?(at.theme||at.createTheme(),at.theme.getTheme(at)):Sh.getTheme()}return null}(nt)||nt.attachedThemeGraphic&&yh(nt.attachedThemeGraphic)||Sh.getTheme()}var mh=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},Ah=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e))._uid=Ps.GenAutoIncrementId(),nt._firstChild=null,nt._lastChild=null,nt.parent=null,nt._count=1,nt}return h(e,nt),o(e,[{"key":"previousSibling","get":function(){return this._prev}},{"key":"nextSibling","get":function(){return this._next}},{"key":"children","get":function(){return this.getChildren()}},{"key":"firstChild","get":function(){return this._firstChild}},{"key":"lastChild","get":function(){return this._lastChild}},{"key":"count","get":function(){return this._count}},{"key":"childrenCount","get":function(){return this._idMap?this._idMap.size:0}},{"key":"forEachChildren","value":function(nt){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])for(var at=this._lastChild,lt=0;at;){if(nt(at,lt++))return;at=at._prev}else for(var Rt=this._firstChild,Bt=0;Rt;){if(nt(Rt,Bt++))return;Rt=Rt._next}}},{"key":"forEachChildrenAsync","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return mh(this,void 0,void 0,f().mark((function i(){var lt,Rt,Bt,Lt,Ht,jt;return f().wrap((function($t){for(;;)switch($t.prev=$t.next){case 0:if(!at){$t.next=16;break}lt=this._lastChild,Rt=0;case 2:if(!lt){$t.next=14;break}if(Bt=nt(lt,Rt++),$t.t0=Bt.then,!$t.t0){$t.next=9;break}return $t.next=8,Bt;case 8:Bt=$t.sent;case 9:if(!Bt){$t.next=11;break}return $t.abrupt("return");case 11:lt=lt._prev;case 12:$t.next=2;break;case 14:$t.next=29;break;case 16:Lt=this._firstChild,Ht=0;case 17:if(!Lt){$t.next=29;break}if(jt=nt(Lt,Ht++),$t.t1=jt.then,!$t.t1){$t.next=24;break}return $t.next=23,jt;case 23:jt=$t.sent;case 24:if(!jt){$t.next=26;break}return $t.abrupt("return");case 26:Lt=Lt._next;case 27:$t.next=17;break;case 29:case"end":return $t.stop()}}),i,this)})))}},{"key":"forEach","value":function(nt){return this.forEachChildren(nt)}},{"key":"appendChild","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._uid===nt._uid)return null;if(!at&&nt.isAncestorsOf(this))throw new Error("Node::appendChildappend");return nt.parent&&nt.parent.removeChild(nt),nt.parent=this,this._lastChild?(this._lastChild._next=nt,nt._prev=this._lastChild,this._lastChild=nt):(this._firstChild=this._lastChild=nt,nt._prev=nt._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(nt._uid,nt),this.setCount(nt.count),this._structEdit=!0,nt}},{"key":"appendChildArrHighPerformance","value":function(nt){return console.error(""),nt}},{"key":"insertBefore","value":function(nt,at){if(!at)return this.appendChild(nt);if(this===nt||nt===at)return null;if(nt.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");return at.parent!==this?null:(nt.parent&&nt.parent.removeChild(nt),nt.parent=this,nt._prev=at._prev,at._prev?at._prev._next=nt:this._firstChild=nt,at._prev=nt,nt._next=at,this._idMap||(this._idMap=new Map),this._idMap.set(nt._uid,nt),this._structEdit=!0,this.setCount(nt.count),nt)}},{"key":"insertAfter","value":function(nt,at){if(!at)return this.appendChild(nt);if(this===nt||nt===at)return null;if(nt.isAncestorsOf(this))throw new Error("Node::insertAfterinsert");return at.parent!==this?null:(nt.parent&&nt.parent.removeChild(nt),nt.parent=this,at._next?(at._next._prev=nt,nt._next=at._next):this._lastChild=nt,at._next=nt,nt._prev=at,this._idMap||(this._idMap=new Map),this._idMap.set(nt._uid,nt),this._structEdit=!0,this.setCount(nt.count),nt)}},{"key":"insertInto","value":function(nt,at){if(!this._ignoreWarn&&this._nodeList&&te.getInstance().warn("insertIntoKeepIdxinsertInto"),at>=this.childrenCount)return this.appendChild(nt);if(this===nt)return null;if(nt.isAncestorsOf(this))throw new Error("Node::insertBeforeinsert");if(nt.parent&&nt.parent.removeChild(nt),nt.parent=this,0===at)nt._next=this._firstChild,this._firstChild&&(this._firstChild._prev=nt),nt._prev=null,this._firstChild=nt;else{for(var lt=this._firstChild,Rt=0;Rt<at;Rt++){if(!lt)return null;Rt>0&&(lt=lt._next)}if(!lt)return null;nt._next=lt._next,nt._prev=lt,lt._next=nt,nt._next&&(nt._next._prev=nt)}return this._idMap||(this._idMap=new Map),this._idMap.set(nt._uid,nt),this._structEdit=!0,this.setCount(nt.count),nt}},{"key":"insertIntoKeepIdx","value":function(nt,at){if(this._nodeList||(this._nodeList=this.children),this._nodeList[at]){var lt=this._nodeList[at];return this._nodeList.splice(at,0,nt),this.insertBefore(nt,lt)}var Rt;this._nodeList[at]=nt;for(var Bt=at-1;Bt>=0&&!(Rt=this._nodeList[Bt]);Bt--);if(Rt)return Rt._next?this.insertBefore(nt,Rt._next):this.appendChild(nt);this._ignoreWarn=!0;var Lt=this.insertInto(nt,0);return this._ignoreWarn=!1,Lt}},{"key":"removeChild","value":function(nt){if(!this._idMap)return null;if(!this._idMap.has(nt._uid))return null;if(this._idMap.delete(nt._uid),this._nodeList){var at=this._nodeList.findIndex((function(at){return at===nt}));at>=0&&this._nodeList.splice(at,1)}return nt._prev?nt._prev._next=nt._next:this._firstChild=nt._next,nt._next?nt._next._prev=nt._prev:this._lastChild=nt._prev,nt.parent=null,nt._prev=null,nt._next=null,this._structEdit=!0,this.setCount(-nt.count),nt}},{"key":"delete","value":function(){this.parent&&this.parent.removeChild(this)}},{"key":"removeAllChild","value":function(nt){if(this._idMap){this._nodeList&&(this._nodeList.length=0);for(var at=this._firstChild;at;){var lt=at._next;at.parent=null,at._prev=null,at._next=null,at=at._next,at=lt}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}}},{"key":"replaceChild","value":function(nt,at){throw new Error("")}},{"key":"find","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=null;return this.forEachChildren((function(lt,Bt){return!(lt===at||!nt(lt,Bt)||(Rt=lt,0))})),lt&&this.forEachChildren((function(at){if(at.isContainer){var lt=at.find(nt,!0);if(lt)return Rt=lt,!0}return!1})),Rt}},{"key":"findAll","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=[];return this.forEachChildren((function(lt,Bt){lt!==at&&nt(lt,Bt)&&Rt.push(lt)})),lt&&this.forEachChildren((function(at){if(at.isContainer){var lt=at.findAll(nt,!0);lt.length&&(Rt=Rt.concat(lt))}})),Rt}},{"key":"getElementById","value":function(nt){return this.find((function(at){return at.id===nt}),!0)}},{"key":"findChildById","value":function(nt){return this.getElementById(nt)}},{"key":"findChildByUid","value":function(nt){return this._idMap&&this._idMap.get(nt)||null}},{"key":"getElementsByName","value":function(nt){return this.findAll((function(at){return at.name===nt}),!0)}},{"key":"findChildrenByName","value":function(nt){return this.getElementsByName(nt)}},{"key":"getElementsByType","value":function(nt){return this.findAll((function(at){return at.type===nt}),!0)}},{"key":"getChildByName","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.find((function(at){return at.name===nt}),at)}},{"key":"getChildAt","value":function(nt){var at=this._firstChild;if(!at)return null;for(var lt=0;lt<nt;lt++){if(!at._next)return null;at=at._next}return at}},{"key":"at","value":function(nt){return this.getChildAt(nt)}},{"key":"containNode","value":function(nt){if(!this._idMap)return!1;if(this._idMap.has(nt._uid))return!0;for(var at=this._firstChild;at;){if(at.containNode(nt))return!0;at=at._next}return!1}},{"key":"getRootNode","value":function(){for(var nt=this.parent;null==nt?void 0:nt.parent;)nt=nt.parent;return nt||this}},{"key":"hasChildNodes","value":function(){return null!==this._firstChild}},{"key":"addChild","value":function(nt){return this.appendChild(nt)}},{"key":"add","value":function(nt){return this.appendChild(nt)}},{"key":"getChildren","value":function(){for(var nt=[],at=this._firstChild;at;)nt.push(at),at=at._next;return nt}},{"key":"isChildOf","value":function(nt){return!!this.parent&&this.parent._uid===nt._uid}},{"key":"isParentOf","value":function(nt){return nt.isChildOf(this)}},{"key":"isDescendantsOf","value":function(nt){var at=this.parent;if(!at)return!1;do{if(at._uid===nt._uid)return!0;at=at.parent}while(null!==at);return!1}},{"key":"isAncestorsOf","value":function(nt){return nt.isDescendantsOf(this)}},{"key":"getAncestor","value":function(nt){throw new Error("")}},{"key":"setAllDescendantsProps","value":function(nt,at){for(var lt=this._firstChild;lt;)lt[nt]=at,lt.setAllDescendantsProps(nt,at),lt=lt._next}},{"key":"setCount","value":function(nt){this._count+=nt;var at=this.parent;if(at)do{at._count+=nt,at=at.parent}while(null!==at)}},{"key":"clone","value":function(){throw new Error("")}},{"key":"cloneTo","value":function(nt){throw new Error("")}},{"key":"getParent","value":function(){return this.parent}},{"key":"del","value":function(nt){return this.removeChild(nt)}},{"key":"addEventListener","value":function(nt,at,lt){var Rt=z(lt,!0)&&lt||V(lt)&&lt.capture,Bt=V(lt)&&lt.once,Lt=H(at)?void 0:at;return nt=Rt?"".concat(nt,"capture"):nt,at=H(at)?at:at.handleEvent,Bt?y(e,"once",this,3)([nt,at,Lt]):y(e,"on",this,3)([nt,at,Lt]),this}},{"key":"on","value":function(nt,at,lt){return this.addEventListener(nt,at,lt)}},{"key":"removeEventListener","value":function(nt,at,lt){var Rt=z(lt,!0)&&lt||V(lt)&&lt.capture,Bt=H(at)?void 0:at;nt=Rt?"".concat(nt,"capture"):nt,at=H(at)?at:at.handleEvent;var Lt=V(lt)&&lt.once;return y(e,"off",this,3)([nt,at,Bt,Lt]),this}},{"key":"off","value":function(nt,at,lt){return this.removeEventListener(nt,at,lt)}},{"key":"once","value":function(nt,at,lt){return V(lt)?(lt.once=!0,this.addEventListener(nt,at,lt)):this.addEventListener(nt,at,{"once":!0})}},{"key":"removeAllEventListeners","value":function(){return y(e,"removeAllListeners",this,3)([]),this}},{"key":"removeAllListeners","value":function(){return this.removeAllEventListeners()}},{"key":"dispatchEvent","value":function(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];return y(e,"emit",this,3)([nt.type,nt].concat(lt)),!nt.defaultPrevented}},{"key":"emit","value":function(nt,at){return this.dispatchEvent(nt,at)}},{"key":"release","value":function(){this.removeAllListeners()}}])}(Bt),wh=o((function t(nt){r(this,t),this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=t.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={"x":0,"y":0},this.page={"x":0,"y":0},this.canvas={"x":0,"y":0},this.viewport={"x":0,"y":0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=nt}),[{"key":"layerX","get":function(){return this.layer.x}},{"key":"layerY","get":function(){return this.layer.y}},{"key":"pageX","get":function(){return this.page.x}},{"key":"pageY","get":function(){return this.page.y}},{"key":"x","get":function(){return this.canvas.x}},{"key":"y","get":function(){return this.canvas.y}},{"key":"canvasX","get":function(){return this.canvas.x}},{"key":"canvasY","get":function(){return this.canvas.y}},{"key":"viewX","get":function(){return this.viewport.x}},{"key":"viewY","get":function(){return this.viewport.y}},{"key":"composedPath","value":function(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}},{"key":"composedDetailPath","value":function(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}},{"key":"_composedDetailPath","value":function(nt){if(nt&&nt.graphic){var at=this.pickParams.graphic;if(at.stage){var lt=at.stage.eventSystem.manager.propagationPath(at);this.detailPath.push(lt),this._composedDetailPath(nt.params)}}}},{"key":"preventDefault","value":function(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(nt){this.nativeEvent.preventDefault&&H(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}},{"key":"stopImmediatePropagation","value":function(){this.propagationImmediatelyStopped=!0}},{"key":"stopPropagation","value":function(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(nt){this.nativeEvent.stopPropagation&&H(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}},{"key":"initEvent","value":function(){}},{"key":"initUIEvent","value":function(){}},{"key":"clone","value":function(){throw new Error("Method not implemented.")}}]),Ch=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).client={"x":0,"y":0},nt.movement={"x":0,"y":0},nt.offset={"x":0,"y":0},nt.global={"x":0,"y":0},nt.screen={"x":0,"y":0},nt}return h(e,nt),o(e,[{"key":"clientX","get":function(){return this.client.x}},{"key":"clientY","get":function(){return this.client.y}},{"key":"movementX","get":function(){return this.movement.x}},{"key":"movementY","get":function(){return this.movement.y}},{"key":"offsetX","get":function(){return this.offset.x}},{"key":"offsetY","get":function(){return this.offset.y}},{"key":"globalX","get":function(){return this.global.x}},{"key":"globalY","get":function(){return this.global.y}},{"key":"screenX","get":function(){return this.screen.x}},{"key":"screenY","get":function(){return this.screen.y}},{"key":"getModifierState","value":function(nt){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(nt)}},{"key":"initMouseEvent","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe){throw new Error("Method not implemented.")}}])}(wh),Th=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).width=0,nt.height=0,nt.isPrimary=!1,nt}return h(e,nt),o(e,[{"key":"getCoalescedEvents","value":function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{"key":"getPredictedEvents","value":function(){throw new Error("getPredictedEvents is not supported!")}},{"key":"clone","value":function(){var nt,at,lt,Rt=new e(this.manager);Rt.eventPhase=Rt.NONE,Rt.currentTarget=null,Rt.path=[],Rt.detailPath=[],Rt.target=null,Rt.nativeEvent=this.nativeEvent,Rt.originalEvent=this.originalEvent,null===(nt=this.manager)||void 0===nt||nt.copyPointerData(this,Rt),null===(at=this.manager)||void 0===at||at.copyMouseData(this,Rt),null===(lt=this.manager)||void 0===lt||lt.copyData(this,Rt),Rt.target=this.target,Rt.path=this.composedPath().slice();var Bt=this.composedDetailPath();return Rt.detailPath=Bt&&Bt.slice(),Rt.type=this.type,Rt}}])}(Ch),Eh=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).DOM_DELTA_PIXEL=0,nt.DOM_DELTA_LINE=1,nt.DOM_DELTA_PAGE=2,nt}return h(e,nt),o(e,[{"key":"clone","value":function(){var nt,at,lt,Rt=new e(this.manager);Rt.eventPhase=Rt.NONE,Rt.currentTarget=null,Rt.path=[],Rt.detailPath=[],Rt.target=null,Rt.nativeEvent=this.nativeEvent,Rt.originalEvent=this.originalEvent,null===(nt=this.manager)||void 0===nt||nt.copyWheelData(this,Rt),null===(at=this.manager)||void 0===at||at.copyMouseData(this,Rt),null===(lt=this.manager)||void 0===lt||lt.copyData(this,Rt),Rt.target=this.target,Rt.path=this.composedPath().slice();var Bt=this.composedDetailPath();return Rt.detailPath=Bt&&Bt.slice(),Rt.type=this.type,Rt}}])}(Ch);Eh.DOM_DELTA_PIXEL=0,Eh.DOM_DELTA_LINE=1,Eh.DOM_DELTA_PAGE=2;var Ph=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e)).type=nt,lt.detail=at,lt}return h(e,nt),o(e)}(wh),Rh="object"==("undefined"==typeof performance?"undefined":b(performance))&&performance.now?performance:Date;function Mh(nt){return"mouse"===nt||"pen"===nt}var Ih,Bh=o((function t(nt,at){var lt=this;r(this,t),this.dispatch=new Bt,this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={"trackingData":{}},this.eventPool=new Map,this.onPointerDown=function(nt,at){if(nt instanceof Th){var Rt=lt.createPointerEvent(nt,nt.type,at);if(lt.dispatchEvent(Rt,"pointerdown"),"touch"===Rt.pointerType)lt.dispatchEvent(Rt,"touchstart");else if(Mh(Rt.pointerType)){var Bt=2===Rt.button;lt.dispatchEvent(Rt,Bt?"rightdown":"mousedown")}lt.trackingData(nt.pointerId).pressTargetsByButton[nt.button]=Rt.composedPath(),lt.freeEvent(Rt)}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onPointerMove=function(nt,at){var Rt,Bt;if(nt instanceof Th){var Lt=lt.createPointerEvent(nt,nt.type,at),Ht=Mh(Lt.pointerType),jt=lt.trackingData(nt.pointerId),$t=lt.findMountedTarget(jt.overTargets);if(jt.overTargets&&$t&&$t!==lt.rootTarget&&$t!==Lt.target){var Kt="mousemove"===nt.type?"mouseout":"pointerout",ne=lt.createPointerEvent(nt,Kt,$t||void 0);if(lt.dispatchEvent(ne,"pointerout"),Ht&&lt.dispatchEvent(ne,"mouseout"),!Lt.composedPath().includes($t)){var re=lt.createPointerEvent(nt,"pointerleave",$t||void 0);for(re.eventPhase=re.AT_TARGET;re.target&&!Lt.composedPath().includes(re.target);)re.currentTarget=re.target,lt.notifyTarget(re),Ht&&lt.notifyTarget(re,"mouseleave"),re.target=re.target.parent;lt.freeEvent(re)}lt.freeEvent(ne)}if($t!==Lt.target){var ae="mousemove"===nt.type?"mouseover":"pointerover",oe=lt.clonePointerEvent(Lt,ae);lt.dispatchEvent(oe,"pointerover"),Ht&&lt.dispatchEvent(oe,"mouseover");for(var se=null==$t?void 0:$t.parent;se&&se!==lt.rootTarget.parent&&se!==Lt.target;)se=se.parent;if(!se||se===lt.rootTarget.parent){var le=lt.clonePointerEvent(Lt,"pointerenter");le.eventPhase=le.AT_TARGET;for(var ue=le.target,ce=new Set,he=$t;he&&he!==lt.rootTarget;)ce.add(he),he=he.parent;for(;ue&&ue!==$t&&ue!==lt.rootTarget.parent;)ce.has(ue)||(le.currentTarget=ue,lt.notifyTarget(le),Ht&&lt.notifyTarget(le,"mouseenter")),ue=ue.parent;lt.freeEvent(le)}lt.freeEvent(oe)}lt.dispatchEvent(Lt,"pointermove"),"touch"===Lt.pointerType&&lt.dispatchEvent(Lt,"touchmove"),Ht&&(lt.dispatchEvent(Lt,"mousemove"),lt.cursorTarget=Lt.target,lt.cursor=(null===(Bt=null===(Rt=Lt.target)||void 0===Rt?void 0:Rt.attribute)||void 0===Bt?void 0:Bt.cursor)||lt.rootTarget.getCursor()),jt.overTargets=Lt.composedPath(),lt.freeEvent(Lt)}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onPointerOver=function(nt,at){var Rt,Bt;if(nt instanceof Th){var Lt=lt.trackingData(nt.pointerId),Ht=lt.createPointerEvent(nt,nt.type,at),jt=Mh(Ht.pointerType);lt.dispatchEvent(Ht,"pointerover"),jt&&lt.dispatchEvent(Ht,"mouseover"),"mouse"===Ht.pointerType&&(lt.cursorTarget=Ht.target,lt.cursor=(null===(Bt=null===(Rt=Ht.target)||void 0===Rt?void 0:Rt.attribute)||void 0===Bt?void 0:Bt.cursor)||lt.rootTarget.getCursor());var $t=lt.clonePointerEvent(Ht,"pointerenter");for($t.eventPhase=$t.AT_TARGET;$t.target&&$t.target!==lt.rootTarget.parent;)$t.currentTarget=$t.target,lt.notifyTarget($t),jt&&lt.notifyTarget($t,"mouseenter"),$t.target=$t.target.parent;Lt.overTargets=Ht.composedPath(),lt.freeEvent(Ht),lt.freeEvent($t)}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onPointerOut=function(nt,at){if(nt instanceof Th){var Rt=lt.trackingData(nt.pointerId);if(Rt.overTargets){var Bt=Mh(nt.pointerType),Lt=lt.findMountedTarget(Rt.overTargets),Ht=lt.createPointerEvent(nt,"pointerout",Lt||void 0);lt.dispatchEvent(Ht),Bt&&lt.dispatchEvent(Ht,"mouseout");var jt=lt.createPointerEvent(nt,"pointerleave",Lt||void 0);for(jt.eventPhase=jt.AT_TARGET;jt.target&&jt.target!==lt.rootTarget.parent;)jt.currentTarget=jt.target,lt.notifyTarget(jt),Bt&&lt.notifyTarget(jt,"mouseleave"),jt.target=jt.target.parent;Rt.overTargets=[],lt.freeEvent(Ht),lt.freeEvent(jt)}lt.cursorTarget=null,lt.cursor=""}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onPointerUp=function(nt,at){var Rt;if(nt instanceof Th){var Bt=Rh.now(),Lt=lt.createPointerEvent(nt,nt.type,at);if(lt.dispatchEvent(Lt,"pointerup"),"touch"===Lt.pointerType)lt.dispatchEvent(Lt,"touchend");else if(Mh(Lt.pointerType)){var Ht=2===Lt.button;lt.dispatchEvent(Lt,Ht?"rightup":"mouseup")}var jt=lt.trackingData(nt.pointerId),$t=lt.findMountedTarget(jt.pressTargetsByButton[nt.button]),Kt=$t;if($t&&!Lt.composedPath().includes($t)){for(var ne=$t;ne&&!Lt.composedPath().includes(ne);){if(Lt.currentTarget=ne,lt.notifyTarget(Lt,"pointerupoutside"),"touch"===Lt.pointerType)lt.notifyTarget(Lt,"touchendoutside");else if(Mh(Lt.pointerType)){var re=2===Lt.button;lt.notifyTarget(Lt,re?"rightupoutside":"mouseupoutside")}ne=ne.parent}delete jt.pressTargetsByButton[nt.button],Kt=ne}if(Kt){var ae=lt.clonePointerEvent(Lt,"click");ae.target=Kt,ae.path=[],ae.detailPath=[],jt.clicksByButton[nt.button]||(jt.clicksByButton[nt.button]={"clickCount":0,"target":ae.target,"timeStamp":Bt});var oe=jt.clicksByButton[nt.button];oe.target===ae.target&&Bt-oe.timeStamp<(null!==(Rt=lt._config.clickInterval)&&void 0!==Rt?Rt:200)?++oe.clickCount:oe.clickCount=1,oe.target=ae.target,oe.timeStamp=Bt,ae.detail=oe.clickCount,Mh(ae.pointerType)?(lt.dispatchEvent(ae,"click"),2===oe.clickCount&&lt.dispatchEvent(ae,"dblclick")):"touch"===ae.pointerType&&lt._config.supportsTouchEvents&&(lt.dispatchEvent(ae,"tap"),2===oe.clickCount&&lt.dispatchEvent(ae,"dbltap")),lt.dispatchEvent(ae,"pointertap"),lt.freeEvent(ae)}lt.freeEvent(Lt)}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onPointerUpOutside=function(nt,at){if(nt instanceof Th){var Rt=lt.trackingData(nt.pointerId),Bt=lt.findMountedTarget(Rt.pressTargetsByButton[nt.button]),Lt=lt.createPointerEvent(nt,nt.type,at);if(Bt){for(var Ht=Bt;Ht;)Lt.currentTarget=Ht,lt.notifyTarget(Lt,"pointerupoutside"),"touch"===Lt.pointerType?lt.notifyTarget(Lt,"touchendoutside"):Mh(Lt.pointerType)&&lt.notifyTarget(Lt,2===Lt.button?"rightupoutside":"mouseupoutside"),Ht=Ht.parent;delete Rt.pressTargetsByButton[nt.button]}lt.freeEvent(Lt)}else te.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event")},this.onWheel=function(nt,at){if(nt instanceof Eh){var Rt=lt.createWheelEvent(nt,at);lt.dispatchEvent(Rt),lt.freeEvent(Rt)}else te.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event")},this.rootTarget=nt,this.mappingTable={},this._config=Object.assign({"clickInterval":200},at),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}),[{"key":"addEventMapping","value":function(nt,at){this.mappingTable[nt]||(this.mappingTable[nt]=[]),this.mappingTable[nt].push({"fn":at,"priority":0}),this.mappingTable[nt].sort((function(nt,at){return nt.priority-at.priority}))}},{"key":"dispatchEvent","value":function(nt,at){nt.propagationStopped=!1,nt.propagationImmediatelyStopped=!1,this.propagate(nt,at),this.dispatch.emit(at||nt.type,nt)}},{"key":"mapEvent","value":function(nt){var at,lt,Rt,Bt,Lt,Ht,jt;if(this.rootTarget){var $t,Kt=this.mappingTable[nt.type],ne="".concat(nt.canvasX,"-").concat(nt.canvasY);if((null===(at=this._prePointTargetCache)||void 0===at?void 0:at[ne])&&(null===(Rt=null===(lt=this._prePointTargetCache)||void 0===lt?void 0:lt[ne])||void 0===Rt?void 0:Rt.stage)&&(null===(Lt=null===(Bt=this._prePointTargetCache)||void 0===Bt?void 0:Bt[ne])||void 0===Lt?void 0:Lt.stage.renderCount)===(null===(Ht=this._prePointTargetCache)||void 0===Ht?void 0:Ht.stageRenderCount)?$t=this._prePointTargetCache[ne]:($t=this.pickTarget(nt.viewX,nt.viewY,nt),nt.pickParams||(this._prePointTargetCache=l(l({},ne,$t),"stageRenderCount",null!==(jt=null==$t?void 0:$t.stage.renderCount)&&void 0!==jt?jt:-1))),Kt)for(var re=0,ae=Kt.length;re<ae;re++)Kt[re].fn(nt,$t);else te.getInstance().warn("[EventManager]: Event mapping not defined for ".concat(nt.type))}}},{"key":"propagate","value":function(nt,at){if(nt.target){var lt=nt.composedPath();nt.eventPhase=nt.CAPTURING_PHASE;for(var Rt=0,Bt=lt.length-1;Rt<Bt;Rt++)if(nt.currentTarget=lt[Rt],this.notifyTarget(nt,at),nt.propagationStopped||nt.propagationImmediatelyStopped)return;if(nt.eventPhase=nt.AT_TARGET,nt.currentTarget=nt.target,this.notifyTarget(nt,at),!nt.propagationStopped&&!nt.propagationImmediatelyStopped){nt.eventPhase=nt.BUBBLING_PHASE;for(var Lt=lt.length-2;Lt>=0;Lt--)if(nt.currentTarget=lt[Lt],this.notifyTarget(nt,at),nt.propagationStopped||nt.propagationImmediatelyStopped)return}}}},{"key":"propagationPath","value":function(nt){for(var at=[nt],lt=0;lt<2048&&nt!==this.rootTarget&&nt.parent;lt++){if(!nt.parent)throw new Error("Cannot find propagation path to disconnected target");at.push(nt.parent),nt=nt.parent}return at.reverse(),at}},{"key":"notifyTarget","value":function(nt,at){if(!this.pauseNotify){at=null!=at?at:nt.type;var lt=nt.eventPhase===nt.CAPTURING_PHASE||nt.eventPhase===nt.AT_TARGET?"".concat(at,"capture"):at;this.notifyListeners(nt,lt),nt.eventPhase===nt.AT_TARGET&&this.notifyListeners(nt,at)}}},{"key":"findMountedTarget","value":function(nt){if(!nt)return null;for(var at=nt[0],lt=1;lt<nt.length&&nt[lt].parent===at;lt++)at=nt[lt];return at}},{"key":"createPointerEvent","value":function(nt,at,lt){var Rt,Bt,Lt=this.allocateEvent(Th);return this.copyPointerData(nt,Lt),this.copyMouseData(nt,Lt),this.copyData(nt,Lt),Lt.nativeEvent=nt.nativeEvent,Lt.originalEvent=nt,Lt.target=lt||this.pickTarget(null!==(Rt=Lt.viewX)&&void 0!==Rt?Rt:Lt.global.x,null!==(Bt=Lt.viewY)&&void 0!==Bt?Bt:Lt.global.y,Lt),"string"==typeof at&&(Lt.type=at),Lt}},{"key":"createWheelEvent","value":function(nt,at){var lt,Rt,Bt=this.allocateEvent(Eh);return this.copyWheelData(nt,Bt),this.copyMouseData(nt,Bt),this.copyData(nt,Bt),Bt.nativeEvent=nt.nativeEvent,Bt.originalEvent=nt,Bt.target=at||this.pickTarget(null!==(lt=Bt.viewX)&&void 0!==lt?lt:Bt.global.x,null!==(Rt=Bt.viewY)&&void 0!==Rt?Rt:Bt.global.y,Bt),Bt}},{"key":"clonePointerEvent","value":function(nt,at){var lt=this.allocateEvent(Th);lt.nativeEvent=nt.nativeEvent,lt.originalEvent=nt.originalEvent,this.copyPointerData(nt,lt),this.copyMouseData(nt,lt),this.copyData(nt,lt),lt.target=nt.target,lt.path=nt.composedPath().slice();var Rt=nt.composedDetailPath();return lt.detailPath=Rt&&Rt.slice(),lt.type=null!=at?at:lt.type,lt}},{"key":"copyWheelData","value":function(nt,at){at.deltaMode=nt.deltaMode,at.deltaX=nt.deltaX,at.deltaY=nt.deltaY,at.deltaZ=nt.deltaZ}},{"key":"copyPointerData","value":function(nt,at){nt instanceof Th&&at instanceof Th&&(at.pointerId=nt.pointerId,at.width=nt.width,at.height=nt.height,at.isPrimary=nt.isPrimary,at.pointerType=nt.pointerType,at.pressure=nt.pressure,at.tangentialPressure=nt.tangentialPressure,at.tiltX=nt.tiltX,at.tiltY=nt.tiltY,at.twist=nt.twist)}},{"key":"copyMouseData","value":function(nt,at){nt instanceof Ch&&at instanceof Ch&&(at.altKey=nt.altKey,at.button=nt.button,at.buttons=nt.buttons,at.ctrlKey=nt.ctrlKey,at.shiftKey=nt.shiftKey,at.metaKey=nt.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach((function(lt){at[lt].x=nt[lt].x,at[lt].y=nt[lt].y})))}},{"key":"copyData","value":function(nt,at){at.isTrusted=nt.isTrusted,at.srcElement=nt.srcElement,at.timeStamp=Rh.now(),at.type=nt.type,at.detail=nt.detail,at.view=nt.view,at.which=nt.which,at.layer.x=nt.layer.x,at.layer.y=nt.layer.y,at.page.x=nt.page.x,at.page.y=nt.page.y,at.pickParams=nt.pickParams}},{"key":"trackingData","value":function(nt){return this.mappingState.trackingData[nt]||(this.mappingState.trackingData[nt]={"pressTargetsByButton":{},"clicksByButton":{},"overTarget":null}),this.mappingState.trackingData[nt]}},{"key":"allocateEvent","value":function(nt){var at;this.eventPool.has(nt)||this.eventPool.set(nt,[]);var lt=(null===(at=this.eventPool.get(nt))||void 0===at?void 0:at.pop())||new nt(this);return lt.eventPhase=lt.NONE,lt.currentTarget=null,lt.path=[],lt.detailPath=[],lt.target=null,lt}},{"key":"freeEvent","value":function(nt){var at;if(nt.manager!==this)throw new Error("It is illegal to free an event not managed by this EventManager!");var lt=nt.constructor;this.eventPool.has(lt)||this.eventPool.set(lt,[]),null===(at=this.eventPool.get(lt))||void 0===at||at.push(nt)}},{"key":"notifyListeners","value":function(nt,at){var lt=nt.currentTarget._events[at];if(lt)if("fn"in lt)lt.once&&nt.currentTarget.removeEventListener(at,lt.fn,{"once":!0}),lt.fn.call(lt.context,nt);else for(var Rt=0,Bt=lt.length;Rt<Bt&&!nt.propagationImmediatelyStopped;Rt++)lt[Rt].once&&nt.currentTarget.removeEventListener(at,lt[Rt].fn,{"once":!0}),lt[Rt].fn.call(lt[Rt].context,nt);this.emitDelegation(nt,at)}},{"key":"emitDelegation","value":function(nt,at){var lt=nt.currentTarget._events["*"];if(lt)if("fn"in lt)lt.fn.call(lt.context,nt,at);else for(var Rt=0,Bt=lt.length;Rt<Bt&&!nt.propagationImmediatelyStopped;Rt++)lt[Rt].fn.call(lt[Rt].context,nt,at)}},{"key":"pickTarget","value":function(nt,at,lt){var Rt,Bt=this.rootTarget.pick(nt,at);return Rt=Bt&&Bt.graphic?Bt.graphic:Bt&&Bt.group?Bt.group:this.rootTarget.AABBBounds.contains(nt,at)?this.rootTarget:null,lt&&(lt.pickParams=Bt.params),Rt}},{"key":"release","value":function(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}]),Dh={"dispatchEvent":function(nt){var at;if(!(nt instanceof wh))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return nt.defaultPrevented=!1,nt.path=[],nt.detailPath&&(nt.detailPath=[]),nt.target=this,null===(at=null==nt?void 0:nt.manager)||void 0===at||at.dispatchEvent(nt),!nt.defaultPrevented},"emit":function(nt,at){return this.dispatchEvent(new Ph(nt,at))}},Lh={"touchstart":"pointerdown","touchend":"pointerup","touchendoutside":"pointerupoutside","touchmove":"pointermove","touchcancel":"pointercancel"},Fh=o((function t(nt){var at=this;r(this,t),this.resolution=1,this.onPointerDown=function(nt){if(!at.supportsTouchEvents||"touch"!==nt.pointerType){var lt=at.normalizeToPointerData(nt);at.autoPreventDefault&&lt[0].isNormalized&&(nt.cancelable||!("cancelable"in nt))&&nt.preventDefault();for(var Rt=0,Bt=lt.length;Rt<Bt;Rt++){var Lt=lt[Rt],Ht=at.bootstrapEvent(at.rootPointerEvent,Lt);at.manager.mapEvent(Ht)}at.setCursor(at.manager.cursor,at.manager.cursorTarget),at.rootPointerEvent.nativeEvent=null}},this.onPointerMove=function(nt){if(!(at.supportsTouchEvents&&"touch"===nt.pointerType||at.isEventOutsideOfTargetElement(nt))){for(var lt=at.normalizeToPointerData(nt),Rt=0,Bt=lt.length;Rt<Bt;Rt++){var Lt=at.bootstrapEvent(at.rootPointerEvent,lt[Rt]);at.manager.mapEvent(Lt)}at.setCursor(at.manager.cursor,at.manager.cursorTarget),at.rootPointerEvent.nativeEvent=null}},this.onPointerUp=function(nt){if(!at.supportsTouchEvents||"touch"!==nt.pointerType){for(var lt=at.isEventOutsideOfTargetViewPort(nt)?"outside":"",Rt=at.normalizeToPointerData(nt),Bt=0,Lt=Rt.length;Bt<Lt;Bt++){var Ht=at.bootstrapEvent(at.rootPointerEvent,Rt[Bt]);Ht.type+=lt,at.manager.mapEvent(Ht)}at.setCursor(at.manager.cursor,at.manager.cursorTarget),at.rootPointerEvent.nativeEvent=null}},this.onPointerOverOut=function(nt){if(!at.supportsTouchEvents||"touch"!==nt.pointerType){for(var lt=at.normalizeToPointerData(nt),Rt=0,Bt=lt.length;Rt<Bt;Rt++){var Lt=at.bootstrapEvent(at.rootPointerEvent,lt[Rt]);at.manager.mapEvent(Lt)}at.setCursor(at.manager.cursor,at.manager.cursorTarget),at.rootPointerEvent.nativeEvent=null}},this.onWheel=function(nt){var lt=at.normalizeWheelEvent(nt);at.manager.mapEvent(lt)};var lt=nt.targetElement,Rt=nt.resolution,Bt=nt.rootNode,Lt=nt.global,Ht=nt.autoPreventDefault,jt=void 0!==Ht&&Ht,$t=nt.clickInterval,Kt=nt.supportsTouchEvents,te=void 0===Kt?Lt.supportsTouchEvents:Kt,ne=nt.supportsPointerEvents,re=void 0===ne?Lt.supportsPointerEvents:ne;this.manager=new Bh(Bt,{"clickInterval":$t,"supportsTouchEvents":te}),this.globalObj=Lt,this.supportsPointerEvents=re,this.supportsTouchEvents=te,this.supportsMouseEvents=Lt.supportsMouseEvents,this.applyStyles=Lt.applyStyles,this.autoPreventDefault=jt,this.eventsAdded=!1,this.rootPointerEvent=new Th,this.rootWheelEvent=new Eh,this.cursorStyles={"default":"inherit","pointer":"pointer"},this.resolution=Rt,this.setTargetElement(lt)}),[{"key":"release","value":function(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}},{"key":"setCursor","value":function(nt,at){if(at||this.manager.rootTarget.window._handler.canvas.controled){nt||(nt="default");var lt=this.applyStyles,Rt=this.domElement;if(this.currentCursor!==nt){this.currentCursor=nt;var Bt=this.cursorStyles[nt];Bt?"string"==typeof Bt&&lt?Rt.style.cursor=Bt:"function"==typeof Bt?Bt(nt):"object"==b(Bt)&&lt&&Object.assign(Rt.style,Bt):lt&&Y(nt)&&!ut(this.cursorStyles,nt)&&(Rt.style.cursor=nt)}}}},{"key":"setTargetElement","value":function(nt){this.removeEvents(),this.domElement=nt,this.addEvents()}},{"key":"addEvents","value":function(){if(!this.eventsAdded&&this.domElement){var nt=this.globalObj,at=this.domElement;this.supportsPointerEvents?(nt.getDocument()?(nt.getDocument().addEventListener("pointermove",this.onPointerMove,!0),nt.getDocument().addEventListener("pointerup",this.onPointerUp,!0)):(at.addEventListener("pointermove",this.onPointerMove,!0),at.addEventListener("pointerup",this.onPointerUp,!0)),at.addEventListener("pointerdown",this.onPointerDown,!0),at.addEventListener("pointerleave",this.onPointerOverOut,!0),at.addEventListener("pointerover",this.onPointerOverOut,!0)):(nt.getDocument()?(nt.getDocument().addEventListener("mousemove",this.onPointerMove,!0),nt.getDocument().addEventListener("mouseup",this.onPointerUp,!0)):(at.addEventListener("mousemove",this.onPointerMove,!0),at.addEventListener("mouseup",this.onPointerUp,!0)),at.addEventListener("mousedown",this.onPointerDown,!0),at.addEventListener("mouseout",this.onPointerOverOut,!0),at.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(at.addEventListener("touchstart",this.onPointerDown,!0),at.addEventListener("touchend",this.onPointerUp,!0),at.addEventListener("touchmove",this.onPointerMove,!0)),at.addEventListener("wheel",this.onWheel,{"capture":!0}),this.eventsAdded=!0}}},{"key":"removeEvents","value":function(){if(this.eventsAdded&&this.domElement){var nt=this.globalObj,at=this.domElement;this.supportsPointerEvents?(nt.getDocument()?(nt.getDocument().removeEventListener("pointermove",this.onPointerMove,!0),nt.getDocument().removeEventListener("pointerup",this.onPointerUp,!0)):(at.removeEventListener("pointermove",this.onPointerMove,!0),at.removeEventListener("pointerup",this.onPointerUp,!0)),at.removeEventListener("pointerdown",this.onPointerDown,!0),at.removeEventListener("pointerleave",this.onPointerOverOut,!0),at.removeEventListener("pointerover",this.onPointerOverOut,!0)):(nt.getDocument()?(nt.getDocument().removeEventListener("mousemove",this.onPointerMove,!0),nt.getDocument().removeEventListener("mouseup",this.onPointerUp,!0)):(at.removeEventListener("mousemove",this.onPointerMove,!0),at.removeEventListener("mouseup",this.onPointerUp,!0)),at.removeEventListener("mousedown",this.onPointerDown,!0),at.removeEventListener("mouseout",this.onPointerOverOut,!0),at.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(at.removeEventListener("touchstart",this.onPointerDown,!0),at.removeEventListener("touchend",this.onPointerUp,!0),at.removeEventListener("touchmove",this.onPointerMove,!0)),at.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}}},{"key":"mapToViewportPoint","value":function(nt){return this.domElement.pointTransform?this.domElement.pointTransform(nt.x,nt.y):nt}},{"key":"mapToCanvasPoint","value":function(nt){var at,lt,Rt=null===(at=this.globalObj)||void 0===at?void 0:at.mapToCanvasPoint(nt,this.domElement);if(Rt)return Rt;var Bt=0,Lt=0;if(nt.changedTouches){var Ht=null!==(lt=nt.changedTouches[0])&&void 0!==lt?lt:{};Bt=Ht.clientX||0,Lt=Ht.clientY||0}else Bt=nt.clientX||0,Lt=nt.clientY||0;var jt=this.domElement.getBoundingClientRect();return{"x":Bt-jt.left,"y":Lt-jt.top}}},{"key":"normalizeToPointerData","value":function(nt){var at=[];if(this.supportsTouchEvents&&nt.changedTouches&&nt.changedTouches.length)for(var lt=0,Rt=nt.changedTouches.length;lt<Rt;lt++){var Bt=nt.changedTouches[lt];U(Bt.button)&&(Bt.button=0),U(Bt.buttons)&&(Bt.buttons=1),U(Bt.isPrimary)&&(Bt.isPrimary=1===nt.touches.length&&"touchstart"===nt.type),U(Bt.width)&&(Bt.width=Bt.radiusX||1),U(Bt.height)&&(Bt.height=Bt.radiusY||1),U(Bt.tiltX)&&(Bt.tiltX=0),U(Bt.tiltY)&&(Bt.tiltY=0),U(Bt.pointerType)&&(Bt.pointerType="touch"),U(Bt.pointerId)&&(Bt.pointerId=Bt.identifier||0),U(Bt.pressure)&&(Bt.pressure=Bt.force||.5),U(Bt.twist)&&(Bt.twist=0),U(Bt.tangentialPressure)&&(Bt.tangentialPressure=0),U(Bt.layerX)&&(Bt.layerX=Bt.offsetX=Bt.clientX),U(Bt.layerY)&&(Bt.layerY=Bt.offsetY=Bt.clientY),Bt.isNormalized=!0,Bt.type=nt.type,at.push(Bt)}else if(!this.globalObj.supportsMouseEvents||nt instanceof MouseEvent&&!(this.supportsPointerEvents&&nt instanceof PointerEvent)){var Lt=nt;U(Lt.isPrimary)&&(Lt.isPrimary=!0),U(Lt.width)&&(Lt.width=1),U(Lt.height)&&(Lt.height=1),U(Lt.tiltX)&&(Lt.tiltX=0),U(Lt.tiltY)&&(Lt.tiltY=0),U(Lt.pointerType)&&(Lt.pointerType="mouse"),U(Lt.pointerId)&&(Lt.pointerId=1),U(Lt.pressure)&&(Lt.pressure=.5),U(Lt.twist)&&(Lt.twist=0),U(Lt.tangentialPressure)&&(Lt.tangentialPressure=0),Lt.isNormalized=!0,at.push(Lt)}else at.push(nt);return at}},{"key":"normalizeWheelEvent","value":function(nt){var at=this.rootWheelEvent;this.transferMouseData(at,nt),at.deltaMode=nt.deltaMode,at.deltaX=nt.deltaX,at.deltaY=nt.deltaY,at.deltaZ=nt.deltaZ;var lt=this.mapToCanvasPoint(nt),Rt=lt.x,Bt=lt.y;at.canvas.x=Rt,at.canvas.y=Bt,at.global.x=Rt,at.global.y=Bt,at.offset.x=Rt,at.offset.y=Bt;var Lt=this.mapToViewportPoint(at),Ht=Lt.x,jt=Lt.y;return at.viewport.x=Ht,at.viewport.y=jt,at.nativeEvent=nt,at.type=nt.type,at}},{"key":"bootstrapEvent","value":function(nt,at){nt.originalEvent=null,nt.nativeEvent=at,nt.pointerId=at.pointerId,nt.width=at.width,nt.height=at.height,nt.isPrimary=at.isPrimary,nt.pointerType=at.pointerType,nt.pressure=at.pressure,nt.tangentialPressure=at.tangentialPressure,nt.tiltX=at.tiltX,nt.tiltY=at.tiltY,nt.twist=at.twist,this.transferMouseData(nt,at);var lt=this.mapToCanvasPoint(at),Rt=lt.x,Bt=lt.y;nt.canvas.x=Rt,nt.canvas.y=Bt,nt.global.x=Rt,nt.global.y=Bt,nt.offset.x=Rt,nt.offset.y=Bt;var Lt=this.mapToViewportPoint(nt),Ht=Lt.x,jt=Lt.y;return nt.viewport.x=Ht,nt.viewport.y=jt,nt.isTrusted=at.isTrusted,"pointerleave"===nt.type&&(nt.type="pointerout"),nt.type.startsWith("mouse")&&(nt.type=nt.type.replace("mouse","pointer")),nt.type.startsWith("touch")&&(nt.type=Lh[nt.type]||nt.type),nt}},{"key":"transferMouseData","value":function(nt,at){nt.isTrusted=at.isTrusted,nt.srcElement=at.srcElement,nt.timeStamp=Rh.now(),nt.type=at.type,nt.altKey=at.altKey,nt.button=at.button,nt.buttons=at.buttons,nt.client.x=at.clientX,nt.client.y=at.clientY,nt.ctrlKey=at.ctrlKey,nt.shiftKey=at.shiftKey,nt.metaKey=at.metaKey,nt.movement.x=at.movementX,nt.movement.y=at.movementY,nt.page.x=at.pageX,nt.page.y=at.pageY,nt.relatedTarget=null}},{"key":"isEventOutsideOfTargetViewPort","value":function(nt){if(this.isEventOutsideOfTargetElement(nt))return!0;if(this.domElement.getViewBox){var at=this.mapToViewportPoint(this.mapToCanvasPoint(nt)),lt=this.domElement.getViewBox(),Rt=lt.width(),Bt=lt.height();return!(at.x<Rt&&at.y<Bt&&at.x>0&&at.y>0)}return!1}},{"key":"isEventOutsideOfTargetElement","value":function(nt){var at=nt.target;return nt.composedPath&&nt.composedPath().length>0&&(at=nt.composedPath()[0]),at!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}},{"key":"pauseTriggerEvent","value":function(){this.manager.pauseNotify=!0}},{"key":"resumeTriggerEvent","value":function(){this.manager.pauseNotify=!1}}]);!function(nt){nt[nt.INITIAL=0]="INITIAL",nt[nt.RUNNING=1]="RUNNING",nt[nt.PAUSE=2]="PAUSE"}(Ih||(Ih={}));var Hh=function(){function t(){r(this,t)}return o(t,[{"key":"avaliable","value":function(){return t.Avaliable()}},{"key":"tick","value":function(nt,at){var lt=this;oc.global.getRequestAnimationFrame()((function(){lt.released||at(lt)}))}},{"key":"release","value":function(){this.released=!0}},{"key":"getTime","value":function(){return Date.now()}}],[{"key":"Avaliable","value":function(){return!!oc.global.getRequestAnimationFrame()}}])}(),jh=function(){function t(){r(this,t)}return o(t,[{"key":"avaliable","value":function(){return t.Avaliable()}},{"key":"tick","value":function(nt,at){var lt=this;this.timerId=setTimeout((function(){at(lt)}),nt)}},{"key":"release","value":function(){this.timerId>0&&(clearTimeout(this.timerId),this.timerId=-1)}},{"key":"getTime","value":function(){return Date.now()}}],[{"key":"Avaliable","value":function(){return!0}}])}(),Nh=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r(this,e),(nt=n(this,e)).handleTick=function(at,lt){var Rt=(null!=lt?lt:{}).once,Bt=void 0!==Rt&&Rt;nt.ifCanStop()?nt.stop():(nt._handlerTick(),Bt||at.tick(nt.interval,nt.handleTick))},nt._handlerTick=function(){var at=nt.tickerHandler.getTime(),lt=0;nt.lastFrameTime>=0&&(lt=at-nt.lastFrameTime),nt.lastFrameTime=at,nt.status===Ih.RUNNING&&(nt.tickCounts++,nt.timelines.forEach((function(nt){nt.tick(lt)})),nt.emit("tick"))},nt.init(),nt.lastFrameTime=-1,nt.tickCounts=0,nt.timelines=at,nt.autoStop=!0,nt}return h(e,nt),o(e,[{"key":"mode","get":function(){return this._mode},"set":function(nt){this._mode!==nt&&(this._mode=nt,this.setupTickHandler())}},{"key":"init","value":function(){var nt=this;this.interval=NaN,this.status=Ih.INITIAL,oc.global.hooks.onSetEnv.tap("default-ticker",(function(){nt.initHandler()})),oc.global.env&&this.initHandler()}},{"key":"addTimeline","value":function(nt){this.timelines.push(nt)}},{"key":"remTimeline","value":function(nt){this.timelines=this.timelines.filter((function(at){return at!==nt}))}},{"key":"getTimelines","value":function(){return this.timelines}},{"key":"initHandler","value":function(){if(this._mode)return null;for(var nt=[{"mode":"raf","cons":Hh},{"mode":"timeout","cons":jh}],at=0;at<nt.length;at++)if(nt[at].cons.Avaliable()){this.mode=nt[at].mode;break}return null}},{"key":"setupTickHandler","value":function(){var nt;switch(this._mode){case"raf":nt=new Hh;break;case"timeout":nt=new jh;break;default:te.getInstance().warn(""),nt=new Hh}return!!nt.avaliable()&&(this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=nt,!0)}},{"key":"setInterval","value":function(nt){this.interval=nt}},{"key":"getInterval","value":function(){return this.interval}},{"key":"setFPS","value":function(nt){this.setInterval(1e3/nt)}},{"key":"getFPS","value":function(){return 1e3/this.interval}},{"key":"tick","value":function(nt){var at=this;this.tickerHandler.tick(nt,(function(nt){at.handleTick(nt,{"once":!0})}))}},{"key":"tickTo","value":function(nt){var at=this;this.tickerHandler.tickTo&&this.tickerHandler.tickTo(nt,(function(nt){at.handleTick(nt,{"once":!0})}))}},{"key":"pause","value":function(){return this.status!==Ih.INITIAL&&(this.status=Ih.PAUSE,!0)}},{"key":"resume","value":function(){return this.status!==Ih.INITIAL&&(this.status=Ih.RUNNING,!0)}},{"key":"ifCanStop","value":function(){if(this.autoStop){if(!this.timelines.length)return!0;if(0===this.timelines.reduce((function(nt,at){return nt+at.animateCount}),0))return!0}return!1}},{"key":"start","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.status===Ih.RUNNING)return!1;if(!this.tickerHandler)return!1;if(!nt){if(this.status===Ih.PAUSE)return!1;if(!this.timelines.length)return!1;if(0===this.timelines.reduce((function(nt,at){return nt+at.animateCount}),0))return!1}return this.status=Ih.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0}},{"key":"stop","value":function(){this.status=Ih.INITIAL,this.setupTickHandler(),this.lastFrameTime=-1}},{"key":"release","value":function(){this.stop(),this.timelines=[],this.tickerHandler.release(),this.emit("afterTick")}},{"key":"trySyncTickStatus","value":function(){this.status===Ih.RUNNING&&this._handlerTick()}}])}(Bt),Vh=function(){function t(){r(this,t)}return o(t,null,[{"key":"linear","value":function(nt){return nt}},{"key":"none","value":function(){return this.linear}},{"key":"get","value":function(nt){return nt<-1?nt=-1:nt>1&&(nt=1),function(at){return 0===nt?at:nt<0?at*(at*-nt+1+nt):at*((2-at)*nt+(1-nt))}}},{"key":"getPowIn","value":function(nt){return function(at){return Math.pow(at,nt)}}},{"key":"getPowOut","value":function(nt){return function(at){return 1-Math.pow(1-at,nt)}}},{"key":"getPowInOut","value":function(nt){return function(at){return(at*=2)<1?.5*Math.pow(at,nt):1-.5*Math.abs(Math.pow(2-at,nt))}}},{"key":"getBackIn","value":function(nt){return function(at){return at*at*((nt+1)*at-nt)}}},{"key":"getBackOut","value":function(nt){return function(at){return--at*at*((nt+1)*at+nt)+1}}},{"key":"getBackInOut","value":function(nt){return nt*=1.525,function(at){return(at*=2)<1?at*at*((nt+1)*at-nt)*.5:.5*((at-=2)*at*((nt+1)*at+nt)+2)}}},{"key":"sineIn","value":function(nt){return 1-Math.cos(nt*Math.PI/2)}},{"key":"sineOut","value":function(nt){return Math.sin(nt*Math.PI/2)}},{"key":"sineInOut","value":function(nt){return-(Math.cos(Math.PI*nt)-1)/2}},{"key":"expoIn","value":function(nt){return 0===nt?0:Math.pow(2,10*nt-10)}},{"key":"expoOut","value":function(nt){return 1===nt?1:1-Math.pow(2,-10*nt)}},{"key":"expoInOut","value":function(nt){return 0===nt?0:1===nt?1:nt<.5?Math.pow(2,20*nt-10)/2:(2-Math.pow(2,-20*nt+10))/2}},{"key":"circIn","value":function(nt){return-(Math.sqrt(1-nt*nt)-1)}},{"key":"circOut","value":function(nt){return Math.sqrt(1- --nt*nt)}},{"key":"circInOut","value":function(nt){return(nt*=2)<1?-.5*(Math.sqrt(1-nt*nt)-1):.5*(Math.sqrt(1-(nt-=2)*nt)+1)}},{"key":"bounceOut","value":function(nt){return nt<1/2.75?7.5625*nt*nt:nt<2/2.75?7.5625*(nt-=1.5/2.75)*nt+.75:nt<2.5/2.75?7.5625*(nt-=2.25/2.75)*nt+.9375:7.5625*(nt-=2.625/2.75)*nt+.984375}},{"key":"bounceIn","value":function(nt){return 1-t.bounceOut(1-nt)}},{"key":"bounceInOut","value":function(nt){return nt<.5?.5*t.bounceIn(2*nt):.5*t.bounceOut(2*nt-1)+.5}},{"key":"getElasticIn","value":function(nt,at){return function(lt){if(0===lt||1===lt)return lt;var Rt=at/de*Math.asin(1/nt);return-nt*Math.pow(2,10*(lt-=1))*Math.sin((lt-Rt)*de/at)}}},{"key":"getElasticOut","value":function(nt,at){return function(lt){if(0===lt||1===lt)return lt;var Rt=at/de*Math.asin(1/nt);return nt*Math.pow(2,-10*lt)*Math.sin((lt-Rt)*de/at)+1}}},{"key":"getElasticInOut","value":function(nt,at){return function(lt){var Rt=at/de*Math.asin(1/nt);return(lt*=2)<1?nt*Math.pow(2,10*(lt-=1))*Math.sin((lt-Rt)*de/at)*-.5:nt*Math.pow(2,-10*(lt-=1))*Math.sin((lt-Rt)*de/at)*.5+1}}},{"key":"registerFunc","value":function(nt,at){t[nt]=at}}])}();Vh.quadIn=Vh.getPowIn(2),Vh.quadOut=Vh.getPowOut(2),Vh.quadInOut=Vh.getPowInOut(2),Vh.cubicIn=Vh.getPowIn(3),Vh.cubicOut=Vh.getPowOut(3),Vh.cubicInOut=Vh.getPowInOut(3),Vh.quartIn=Vh.getPowIn(4),Vh.quartOut=Vh.getPowOut(4),Vh.quartInOut=Vh.getPowInOut(4),Vh.quintIn=Vh.getPowIn(5),Vh.quintOut=Vh.getPowOut(5),Vh.quintInOut=Vh.getPowInOut(5),Vh.backIn=Vh.getBackIn(1.7),Vh.backOut=Vh.getBackOut(1.7),Vh.backInOut=Vh.getBackInOut(1.7),Vh.elasticIn=Vh.getElasticIn(1,.3),Vh.elasticOut=Vh.getElasticOut(1,.3),Vh.elasticInOut=Vh.getElasticInOut(1,.3*1.5),Vh.easeInOutQuad=function(nt){return(nt/=.5)<1?.5*Math.pow(nt,2):-.5*((nt-=2)*nt-2)},Vh.easeOutElastic=function(nt){var at=2*Math.PI/3;return 0===nt?0:1===nt?1:Math.pow(2,-10*nt)*Math.sin((10*nt-.75)*at)+1},Vh.easeInOutElastic=function(nt){var at=2*Math.PI/4.5;return 0===nt?0:1===nt?1:nt<.5?-Math.pow(2,20*nt-10)*Math.sin((20*nt-11.125)*at)/2:Math.pow(2,-20*nt+10)*Math.sin((20*nt-11.125)*at)/2+1};for(var Oh=function(nt){Vh["flicker".concat(nt)]=function(at){return function(nt,at){for(var lt=1/at,Rt=1;nt>lt;)nt-=lt,Rt*=-1;var Bt=Rt*nt/lt;return Bt>0?Bt:1+Bt}(at,nt)}},Wh=0;Wh<10;Wh++)Oh(Wh);for(var zh=function(nt){Vh["aIn".concat(nt)]=function(at){return nt*at*at+(1-nt)*at}},Gh=2;Gh<10;Gh++)zh(Gh);var Uh=o((function t(){r(this,t),this.id=Ps.GenAutoIncrementId(),this.animateHead=null,this.animateTail=null,this.animateCount=0,this.paused=!1}),[{"key":"addAnimate","value":function(nt){this.animateTail?(this.animateTail.nextAnimate=nt,nt.prevAnimate=this.animateTail,this.animateTail=nt,nt.nextAnimate=null):(this.animateHead=nt,this.animateTail=nt),this.animateCount++}},{"key":"pause","value":function(){this.paused=!0}},{"key":"resume","value":function(){this.paused=!1}},{"key":"tick","value":function(nt){if(!this.paused){var at=this.animateHead;for(this.animateCount=0;at;)at.status===El.END?this.removeAnimate(at):at.status===El.RUNNING||at.status===El.INITIAL?(this.animateCount++,at.advance(nt)):at.status===El.PAUSED&&this.animateCount++,at=at.nextAnimate}}},{"key":"clear","value":function(){for(var nt=this.animateHead;nt;)nt.release(),nt=nt.nextAnimate;this.animateHead=null,this.animateTail=null,this.animateCount=0}},{"key":"removeAnimate","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];nt._onRemove&&nt._onRemove.forEach((function(nt){return nt()})),nt===this.animateHead?(this.animateHead=nt.nextAnimate,nt===this.animateTail?this.animateTail=null:this.animateHead.prevAnimate=null):nt===this.animateTail?(this.animateTail=nt.prevAnimate,this.animateTail.nextAnimate=null):(nt.prevAnimate.nextAnimate=nt.nextAnimate,nt.nextAnimate.prevAnimate=nt.prevAnimate),at&&nt.release()}}]),Yh=new Uh,Xh=o((function t(nt,at,lt,Rt,Bt){r(this,t),this.from=nt,this.to=at,this.duration=lt,this.easing=Rt,this.params=Bt,this.updateCount=0}),[{"key":"bind","value":function(nt,at){this.target=nt,this.subAnimate=at,this.onBind()}},{"key":"onBind","value":function(){}},{"key":"onFirstRun","value":function(){}},{"key":"onStart","value":function(){}},{"key":"onEnd","value":function(){}},{"key":"getEndProps","value":function(){return this.to}},{"key":"getFromProps","value":function(){return this.from}},{"key":"getMergedEndProps","value":function(){var nt,at=this.getEndProps();return at?this._endProps===at?this._mergedEndProps:(this._endProps=at,void(this._mergedEndProps=Object.assign({},null!==(nt=this.step.prev.getLastProps())&&void 0!==nt?nt:{},at))):this.step.prev?this.step.prev.getLastProps():at}},{"key":"update","value":function(nt,at,lt){var Rt=this;if(0===this.updateCount){this.onFirstRun();var Bt=this.step.getLastProps();Object.keys(Bt).forEach((function(nt){Rt.subAnimate.animate.validAttr(nt)&&(lt[nt]=Bt[nt])}))}this.updateCount+=1,this.onUpdate(nt,at,lt),nt&&this.onEnd()}}]),$h=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[null,null,0,"linear"])).cb=nt,at}return h(e,nt),o(e,[{"key":"onUpdate","value":function(nt,at,lt){}},{"key":"onStart","value":function(){this.cb()}}])}(Xh),qh=function(){function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps.GenAutoIncrementId(),at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yh,lt=arguments.length>2?arguments[2]:void 0;r(this,t),this.id=nt,this.timeline=at||Yh,this.status=El.INITIAL,this.tailAnimate=new Zh(this),this.subAnimates=[this.tailAnimate],this.timeScale=1,this.rawPosition=-1,this._startTime=0,this._duringTime=0,this.timeline.addAnimate(this),this.slience=lt}return o(t,[{"key":"setTimeline","value":function(nt){nt!==this.timeline&&(this.timeline.removeAnimate(this,!1),nt.addAnimate(this))}},{"key":"getStartTime","value":function(){return this._startTime}},{"key":"getDuration","value":function(){return this.subAnimates.reduce((function(nt,at){return nt+at.totalDuration}),0)}},{"key":"after","value":function(nt){var at=nt.getDuration();return this._startTime=at,this}},{"key":"afterAll","value":function(nt){var at=-1/0;return nt.forEach((function(nt){at=Ae(nt.getDuration(),at)})),this._startTime=at,this}},{"key":"parallel","value":function(nt){return this._startTime=nt.getStartTime(),this}},{"key":"play","value":function(nt){if(this.tailAnimate.play(nt),this.target){var at=this.target.stage;at&&at.renderNextFrame()}return 1===this.subAnimates.length&&this.tailAnimate.totalDuration===nt.duration&&this.trySetAttribute(nt.getFromProps(),nt.mode),this}},{"key":"trySetAttribute","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.mode;nt&&at&Pl.SET_ATTR_IMMEDIATELY&&this.target.setAttributes&&this.target.setAttributes(nt,!1,{"type":Tl.ANIMATE_PLAY})}},{"key":"runCb","value":function(nt){var at=this,lt=new $h((function(){nt(at,lt.step.prev)}));return this.tailAnimate.play(lt),this}},{"key":"customInterpolate","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=t.interpolateMap.get(nt)||t.interpolateMap.get("");return!!Ht&&Ht(nt,at,lt,Rt,Bt,Lt)}},{"key":"pause","value":function(){this.status===El.RUNNING&&(this.status=El.PAUSED)}},{"key":"resume","value":function(){this.status===El.PAUSED&&(this.status=El.RUNNING)}},{"key":"to","value":function(nt,at,lt,Rt){if(this.tailAnimate.to(nt,at,lt,Rt),this.target){var Bt=this.target.stage;Bt&&Bt.renderNextFrame()}return this}},{"key":"from","value":function(nt,at,lt,Rt){if(this.tailAnimate.from(nt,at,lt,Rt),this.target){var Bt=this.target.stage;Bt&&Bt.renderNextFrame()}return this}},{"key":"wait","value":function(nt){if(this.tailAnimate.wait(nt),this.target){var at=this.target.stage;at&&at.renderNextFrame()}return this}},{"key":"startAt","value":function(nt){if(this.tailAnimate.startAt(nt),this.target){var at=this.target.stage;at&&at.renderNextFrame()}return this}},{"key":"loop","value":function(nt){if(this.tailAnimate.loop=nt,this.target){var at=this.target.stage;at&&at.renderNextFrame()}return this}},{"key":"reversed","value":function(nt){if(this.tailAnimate.reversed=nt,this.target){var at=this.target.stage;at&&at.renderNextFrame()}return this}},{"key":"bounce","value":function(nt){if(this.tailAnimate.bounce=nt,this.target){var at=this.target.stage;at&&at.renderNextFrame()}return this}},{"key":"subAnimate","value":function(){var nt=new Zh(this,this.tailAnimate);return this.tailAnimate=nt,this.subAnimates.push(nt),nt.bind(this.target),this}},{"key":"getStartProps","value":function(){return this.subAnimates[0].getStartProps()}},{"key":"getEndProps","value":function(){return this.tailAnimate.getEndProps()}},{"key":"depreventAttr","value":function(nt){this._preventAttrs&&this._preventAttrs.delete(nt)}},{"key":"preventAttr","value":function(nt){this._preventAttrs||(this._preventAttrs=new Set),this._preventAttrs.add(nt)}},{"key":"preventAttrs","value":function(nt){var at=this;nt.forEach((function(nt){return at.preventAttr(nt)}))}},{"key":"validAttr","value":function(nt){return!this._preventAttrs||!this._preventAttrs.has(nt)}},{"key":"bind","value":function(nt){return this.target=nt,this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.subAnimates.forEach((function(at){at.bind(nt)})),this}},{"key":"advance","value":function(nt){if(this._duringTime<this._startTime){if(this._duringTime+nt*this.timeScale<this._startTime)return void(this._duringTime+=nt*this.timeScale);nt=this._duringTime+nt*this.timeScale-this._startTime,this._duringTime=this._startTime}this.status===El.INITIAL&&(this.status=El.RUNNING,this._onStart&&this._onStart.forEach((function(nt){return nt()}))),this.setPosition(Math.max(this.rawPosition,0)+nt*this.timeScale)&&this.status===El.RUNNING&&(this.status=El.END,this._onEnd&&this._onEnd.forEach((function(nt){return nt()})))}},{"key":"setPosition","value":function(nt){var at,lt=0,Rt=this.rawPosition,Bt=this.subAnimates.reduce((function(nt,at){return nt+at.totalDuration}),0);nt<0&&(nt=0);var Lt=nt>=Bt;if(Lt&&(nt=Bt),nt===Rt)return Lt;for(var Ht=0;Ht<this.subAnimates.length&&!(lt+(at=this.subAnimates[Ht]).totalDuration>=nt);Ht++)lt+=at.totalDuration,at=void 0;return this.rawPosition=nt,at.setPosition(nt-lt),Lt}},{"key":"onStart","value":function(nt){this._onStart||(this._onStart=[]),this._onStart.push(nt)}},{"key":"onEnd","value":function(nt){this._onEnd||(this._onEnd=[]),this._onEnd.push(nt)}},{"key":"onRemove","value":function(nt){this._onRemove||(this._onRemove=[]),this._onRemove.push(nt)}},{"key":"onFrame","value":function(nt){this._onFrame||(this._onFrame=[]),this._onFrame.push(nt)}},{"key":"release","value":function(){this.status=El.END}},{"key":"stop","value":function(nt){nt||this.target.onStop(),"start"===nt?this.target.onStop(this.getStartProps()):"end"===nt?this.target.onStop(this.getEndProps()):this.target.onStop(nt),this.release()}}],[{"key":"AddInterpolate","value":function(nt,at){t.interpolateMap.set(nt,at)}}])}();qh.mode=Pl.NORMAL,qh.interpolateMap=new Map;var Kh,Zh=o((function t(nt,at){r(this,t),this.rawPosition=-1,this.position=0,this.loop=0,this.duration=0,this.animate=nt,this.stepHead=new Qh(0,0,at?Object.assign({},at.stepTail.props):{}),this.stepTail=this.stepHead,this.dirty=!0,this._startAt=0}),[{"key":"totalDuration","get":function(){return this.calcAttr(),this._totalDuration+this._startAt}},{"key":"calcAttr","value":function(){this.dirty&&(this._totalDuration=this.duration*(this.loop+1))}},{"key":"bind","value":function(nt){return this.target=nt,this}},{"key":"play","value":function(nt){var at=nt.duration;(null==at||at<0)&&(at=0);var lt=nt.easing,Rt="string"==typeof lt?Vh[lt]:lt,Bt=this._addStep(at,null,Rt);return Bt.type=Rl.customAnimate,this._appendProps(nt.getEndProps(),Bt,!1),this._appendCustomAnimate(nt,Bt),this}},{"key":"to","value":function(nt,at,lt,Rt){var Bt=this;(null==at||at<0)&&(at=0);var Lt="string"==typeof lt?Vh[lt]:lt,Ht=this._addStep(at,null,Lt);return Ht.type=Rl.to,this._appendProps(nt,Ht,!!Rt&&Rt.tempProps),Ht.propKeys||(Ht.propKeys=Object.keys(Ht.props)),Rt&&Rt.noPreventAttrs||this.target.animates&&this.target.animates.forEach((function(nt){nt.id!==Bt.animate.id&&nt.preventAttrs(Ht.propKeys)})),this}},{"key":"from","value":function(nt,at,lt,Rt){var Bt=this;this.to(nt,0,lt,Rt);var Lt={};this.stepTail.propKeys||(this.stepTail.propKeys=Object.keys(this.stepTail.props)),this.stepTail.propKeys.forEach((function(nt){Lt[nt]=Bt.getLastPropByName(nt,Bt.stepTail)})),this.to(Lt,at,lt,Rt),this.stepTail.type=Rl.from}},{"key":"startAt","value":function(nt){return nt<0&&(nt=0),this._startAt=nt,this}},{"key":"getStartProps","value":function(){var nt;return null===(nt=this.stepHead)||void 0===nt?void 0:nt.props}},{"key":"getEndProps","value":function(){return this.stepTail.props}},{"key":"getLastStep","value":function(){return this._lastStep}},{"key":"wait","value":function(nt){if(nt>0){var at=this._addStep(+nt,null);at.type=Rl.wait,at.prev.customAnimate?at.props=at.prev.customAnimate.getEndProps():at.props=at.prev.props,this.target.onAddStep&&this.target.onAddStep(at)}return this}},{"key":"_addStep","value":function(nt,at,lt){var Rt=new Qh(this.duration,nt,at,lt);return this.duration+=nt,this.stepTail.append(Rt),this.stepTail=Rt,Rt}},{"key":"_appendProps","value":function(nt,at,lt){var Rt=this;at.props=lt?nt:Object.assign({},nt);var Bt=at.prev,Lt=at.props;for(at.propKeys||(at.propKeys=Object.keys(at.props)),at.propKeys.forEach((function(nt){void 0===at.props[nt]&&(at.props[nt]=Rt.target.getDefaultAttribute(nt))}));Bt.prev;)Bt.props&&(Bt.propKeys||(Bt.propKeys=Object.keys(Bt.props)),Bt.propKeys.forEach((function(nt){void 0===Lt[nt]&&(Lt[nt]=Bt.props[nt])}))),at.propKeys=Object.keys(at.props),Bt=Bt.prev;var Ht=this.stepHead.props;at.propKeys||(at.propKeys=Object.keys(Lt)),at.propKeys.forEach((function(nt){if(void 0===Ht[nt]){var at=Rt.animate.getStartProps();Ht[nt]=at[nt]=Rt.target.getComputedAttribute(nt)}})),this.target.onAddStep&&this.target.onAddStep(at)}},{"key":"_appendCustomAnimate","value":function(nt,at){at.customAnimate=nt,nt.step=at,nt.bind(this.target,this)}},{"key":"setPosition","value":function(nt){var at,lt,Rt,Bt=this.duration,Lt=this.loop,Ht=this.rawPosition,jt=!1,$t=null!==(at=this._startAt)&&void 0!==at?at:0;if(nt<0&&(nt=0),nt<$t)return this.rawPosition=nt,!1;if(Bt<=0&&(jt=!0,Bt<0))return jt;if(Rt=(nt-=$t)-(lt=Math.floor(nt/Bt))*Bt,(jt=nt>=Lt*Bt+Bt)&&(nt=(Rt=Bt)*(lt=Lt)+Bt),nt===Ht)return jt;var Kt=!this.reversed!=!(this.bounce&&lt%2);return Kt&&(Rt=Bt-Rt),this._deltaPosition=Rt-this.position,this.position=Rt,this.rawPosition=nt+$t,this.updatePosition(jt,Kt),jt}},{"key":"updatePosition","value":function(nt,at){if(this.stepHead){var lt=this.stepHead.next,Rt=this.position,Bt=this.duration;if(this.target&&lt){for(var Lt=lt.next;Lt&&Lt.position<=Rt;)Lt=(lt=Lt).next;var Ht=nt?0===Bt?1:Rt/Bt:(Rt-lt.position)/lt.duration;lt.easing&&(Ht=lt.easing(Ht)),this.tryCallCustomAnimateLifeCycle(lt,this._lastStep||(at?this.stepTail:this.stepHead),at),this.updateTarget(lt,Ht,nt),this._lastStep=lt,this.animate._onFrame&&this.animate._onFrame.forEach((function(nt){return nt(lt,Ht)}))}}}},{"key":"tryCallCustomAnimateLifeCycle","value":function(nt,at,lt){if(nt!==at)if(lt){for(var Rt=at.prev;Rt&&Rt!==nt;)Rt.customAnimate&&(Rt.customAnimate.onStart&&Rt.customAnimate.onStart(),Rt.customAnimate.onEnd&&Rt.customAnimate.onEnd()),Rt=nt.prev;at&&at.customAnimate&&at.customAnimate.onEnd&&at.customAnimate.onEnd(),nt&&nt.customAnimate&&nt.customAnimate.onStart&&nt.customAnimate.onStart()}else{for(var Bt=at.next;Bt&&Bt!==nt;)Bt.customAnimate&&(Bt.customAnimate.onStart&&Bt.customAnimate.onStart(),Bt.customAnimate.onEnd&&Bt.customAnimate.onEnd()),Bt=Bt.next;at&&at.customAnimate&&at.customAnimate.onEnd&&at.customAnimate.onEnd(),nt&&nt.customAnimate&&nt.customAnimate.onStart&&nt.customAnimate.onStart()}}},{"key":"getLastPropByName","value":function(nt,at){for(var lt=at.prev;lt;){if(lt.props&&void 0!==lt.props[nt])return lt.props[nt];if(lt.customAnimate){var Rt=lt.customAnimate.getEndProps()[nt];if(void 0!==Rt)return Rt}lt=lt.prev}return te.getInstance().warn("step"),at.props[nt]}},{"key":"updateTarget","value":function(nt,at,lt){null==nt.props&&null==nt.customAnimate||this.target.onStep(this,this.animate,nt,at,lt)}}]),Qh=o((function t(nt,at,lt,Rt){r(this,t),this.duration=at,this.position=nt,this.props=lt,this.easing=Rt}),[{"key":"append","value":function(nt){nt.prev=this,nt.next=this.next,this.next=nt}},{"key":"getLastProps","value":function(){for(var nt=this.prev;nt;){if(nt.props)return nt.props;if(nt.customAnimate)return nt.customAnimate.getMergedEndProps();nt=nt.prev}return null}}]),Jh=200,ed="cubicOut",id=1e3,od="quadInOut";!function(nt){nt[nt.Top=1]="Top",nt[nt.Right=2]="Right",nt[nt.Bottom=4]="Bottom",nt[nt.Left=8]="Left",nt[nt.ALL=15]="ALL"}(Kh||(Kh={}));var ld=[!1,!1,!1,!1],ud=[0,0,0,0],td=function(nt){return nt?X(nt)?0===nt.length?0:1===nt.length?nt[0]:2===nt.length?(ud[0]=nt[0],ud[2]=nt[0],ud[1]=nt[1],ud[3]=nt[1],ud):nt:nt:0},cd=[{"x":0,"y":0},{"x":0,"y":0},{"x":0,"y":0},{"x":0,"y":0}],dd=[1,2,3,0,1,2,3,0];function nd(nt,at,lt,Rt){for(;nt>=de;)nt-=de;for(;nt<0;)nt+=de;for(;nt>at;)at+=de;cd[0].x=lt,cd[1].y=lt,cd[2].x=-lt,cd[3].y=-lt;var Bt=Math.ceil(nt/ce)%4,Lt=Math.ceil(at/ce)%4;if(Rt.add(ve(nt)*lt,Ce(nt)*lt),Rt.add(ve(at)*lt,Ce(at)*lt),Bt!==Lt||at-nt>ue)for(var Ht=!1,jt=0;jt<dd.length;jt++)if(Ht||Bt!==dd[jt]){if(Ht&&Lt===dd[jt])break;if(Ht){var $t=cd[dd[jt]];Rt.add($t.x,$t.y)}}else{Ht=!0;var Kt=cd[Bt];Rt.add(Kt.x,Kt.y)}}function rd(nt,at,lt){var Rt=ye(nt.x,nt.y,at.x,at.y,lt),Bt=Rt.x,Lt=Rt.y,Ht=ye(nt.x1,nt.y1,at.x1,at.y1,lt),jt=Ht.x,$t=Ht.y,Kt=new Ve(Bt,Lt,jt,$t);return Kt.defined=at.defined,Kt}function ad(nt,at,lt){if(!nt||!at)return[];Array.isArray(nt)||(nt=[nt]),Array.isArray(at)||(at=[at]);var Rt=[];if(nt.length>at.length){Rt=at.map((function(nt){var at=new Ve(nt.x,nt.y,nt.x1,nt.y1);return at.defined=nt.defined,at}));for(var Bt=0;Bt<at.length;Bt++)Rt[Bt]=rd(nt[Bt],at[Bt],lt)}else{Rt=at.map((function(nt){var at=new Ve(nt.x,nt.y,nt.x1,nt.y1);return at.defined=nt.defined,at}));for(var Lt=0;Lt<nt.length;Lt++)Rt[Lt]=rd(nt[Lt],at[Lt],lt)}return Rt}var fd=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"];function sd(nt,at){if(X(nt)){for(var lt,Rt=0;Rt<nt.length&&void 0===lt;Rt++)lt=nt[Rt][at];return lt}return nt[at]}var pd=o((function t(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.TimeOut;r(this,t),this.durations=[],this.timeout=nt,this.lastDate=0,this.durationsListThreshold=30}),[{"key":"call","value":function(nt){var at=this;return this.lastDate=Date.now(),setTimeout((function(){at.appendDuration(Date.now()-at.lastDate),nt(0)}),this.timeout,!0)}},{"key":"clear","value":function(nt){clearTimeout(nt)}},{"key":"appendDuration","value":function(nt){this.durations.push(nt),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((function(nt,at){return nt+at}),0)/this.durations.length,1e3/60),1e3/30)}}]);pd.TimeOut=1e3/60;var vd,gd=new pd,hd=function(nt,at){var lt=function(nt,at){return Y(nt)&&"%"===nt[nt.length-1]?at*(Number.parseFloat(nt.substring(0,nt.length-1))/100):nt}(nt,at);return isNaN(lt)?lt:Math.max(at,lt)},yd=function(nt){function e(nt,at,lt,Rt,Bt){return r(this,e),n(this,e,[nt,at,lt,Rt,Bt])}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return!1===this.valid?{}:{"text":this.to}}},{"key":"onBind","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt;this.fromNumber=Z(null===(nt=this.from)||void 0===nt?void 0:nt.text)?null===(at=this.from)||void 0===at?void 0:at.text:Number.parseFloat(null===(lt=this.from)||void 0===lt?void 0:lt.text),this.toNumber=Z(null===(Rt=this.to)||void 0===Rt?void 0:Rt.text)?null===(Bt=this.to)||void 0===Bt?void 0:Bt.text:Number.parseFloat(null===(Lt=this.to)||void 0===Lt?void 0:Lt.text),Number.isFinite(this.toNumber)||(this.fromNumber=0),Number.isFinite(this.toNumber)||(this.valid=!1),!1!==this.valid&&(this.decimalLength=null!==(jt=null===(Ht=this.params)||void 0===Ht?void 0:Ht.fixed)&&void 0!==jt?jt:Math.max(xe(this.fromNumber),xe(this.toNumber)))}},{"key":"onEnd","value":function(){}},{"key":"onUpdate","value":function(nt,at,lt){var Rt;!1!==this.valid&&(lt.text=nt?null===(Rt=this.to)||void 0===Rt?void 0:Rt.text:(this.fromNumber+(this.toNumber-this.fromNumber)*at).toFixed(this.decimalLength))}}])}(Xh);!function(nt){nt[nt.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",nt[nt.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",nt[nt.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",nt[nt.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP",nt[nt.STROKE=4]="STROKE"}(vd||(vd={}));var md=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).fromText="",nt.toText="",nt}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return!1===this.valid?{}:{"text":this.to}}},{"key":"onBind","value":function(){var nt,at,lt;this.fromText=null!==(at=null===(nt=this.from)||void 0===nt?void 0:nt.text)&&void 0!==at?at:"",this.toText=(null===(lt=this.to)||void 0===lt?void 0:lt.text)||"",(!this.toText||X(this.toText)&&0===this.toText.length)&&(this.valid=!1),X(this.toText)&&(this.toText=this.toText.map((function(nt){return(nt||"").toString()})))}},{"key":"onEnd","value":function(){this.target.detachShadow()}},{"key":"onUpdate","value":function(nt,at,lt){if(!1!==this.valid){var Rt=this.fromText.length,Bt=X(this.toText),Lt=Bt?this.toText.reduce((function(nt,at){return nt+(at||"").length}),0):this.toText.length,Ht=Math.ceil(Rt+(Lt-Rt)*at);if(Bt){lt.text=[];var jt=0;this.toText.forEach((function(nt){jt+nt.length>Ht?(lt.text.push(nt.substr(0,Ht-jt)),jt=Ht):(lt.text.push(nt),jt+=nt.length)}))}else lt.text=this.toText.substr(0,Ht)}}}])}(Xh),_d=function(nt){function e(nt,at,lt,Rt,Bt){var Lt,Ht,jt;return r(this,e),(Lt=n(this,e,[nt,at,lt,Rt,Bt])).newPointAnimateType=null!==(Ht=null==Bt?void 0:Bt.newPointAnimateType)&&void 0!==Ht?Ht:"grow",Lt.clipRangeByDimension=null!==(jt=null==Bt?void 0:Bt.clipRangeByDimension)&&void 0!==jt?jt:"x",Lt}return h(e,nt),o(e,[{"key":"getPoints","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(nt.points)return nt.points;if(nt.segments){var Rt=[];return this.segmentsCache||(this.segmentsCache=[]),nt.segments.map((function(nt){var Bt,Lt;nt.points&&Rt.push.apply(Rt,m(nt.points)),lt&&at.segmentsCache.push(null!==(Lt=null===(Bt=nt.points)||void 0===Bt?void 0:Bt.length)&&void 0!==Lt?Lt:0)})),Rt}return[]}},{"key":"onBind","value":function(){var nt=this,at=this.getPoints(this.from),lt=this.getPoints(this.to,!0);this.fromPoints=at?Array.isArray(at)?at:[at]:[],this.toPoints=lt?Array.isArray(lt)?lt:[lt]:[];var Rt=new Map;this.fromPoints.forEach((function(nt){nt.context&&Rt.set(nt.context,nt)}));for(var Bt,Lt,Ht=1/0,jt=-1/0,$t=0;$t<this.toPoints.length;$t+=1)if(Rt.has(this.toPoints[$t].context)){Ht=$t,Bt=Rt.get(this.toPoints[$t].context);break}for(var Kt=this.toPoints.length-1;Kt>=0;Kt-=1)if(Rt.has(this.toPoints[Kt].context)){jt=Kt,Lt=Rt.get(this.toPoints[Kt].context);break}"clip"===this.newPointAnimateType&&0!==this.toPoints.length&&(Number.isFinite(jt)?(this.clipRange=this.toPoints[jt][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],1===this.clipRange&&(this.shrinkClipRange=this.toPoints[jt][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),Q(this.clipRange)?this.clipRange=Ut(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);var te=this.toPoints[0];this.interpolatePoints=this.toPoints.map((function(at,lt){var $t=Rt.get(at.context);return $t?(te=$t,[$t,at]):"appear"===nt.newPointAnimateType||"clip"===nt.newPointAnimateType?[at,at]:lt<Ht&&Bt?[Bt,at]:lt>jt&&Lt?[Lt,at]:[te,at]})),this.points=this.interpolatePoints.map((function(nt){var at=nt[0],lt=nt[1],Rt=new Ve(at.x,at.y,at.x1,at.y1);return Rt.defined=lt.defined,Rt.context=lt.context,Rt}))}},{"key":"onFirstRun","value":function(){var nt=this.target.attribute.clipRange;Q(nt*this.clipRange)&&(this.clipRange*=nt)}},{"key":"onUpdate","value":function(nt,at,lt){var Rt=this;if(this.points=this.points.map((function(nt,lt){var Bt=rd(Rt.interpolatePoints[lt][0],Rt.interpolatePoints[lt][1],at);return Bt.context=nt.context,Bt})),this.clipRange){if(this.shrinkClipRange)return void(nt?(lt.points=this.toPoints,lt.clipRange=1):(lt.points=this.fromPoints,lt.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*at));lt.clipRange=this.clipRange+(1-this.clipRange)*at}if(this.segmentsCache&&this.to.segments){var Bt=0;lt.segments=this.to.segments.map((function(nt,at){var lt=Bt+Rt.segmentsCache[at],Lt=Rt.points.slice(Bt,lt);return Bt=lt,Object.assign(Object.assign({},nt),{"points":Lt})}))}else lt.points=this.points}}])}(Xh),Id=function(nt){function e(nt,at,lt,Rt,Bt){var Lt;return r(this,e),(Lt=n(this,e,[null,null,lt,Rt,Bt])).clipFromAttribute=nt,Lt.clipToAttribute=at,Lt._group=null==Bt?void 0:Bt.group,Lt._clipGraphic=null==Bt?void 0:Bt.clipGraphic,Lt}return h(e,nt),o(e,[{"key":"onBind","value":function(){this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({"clip":!0,"path":[this._clipGraphic]},!1,{"type":Tl.ANIMATE_BIND}))}},{"key":"onEnd","value":function(){this._group&&this._group.setAttributes({"clip":this._lastClip,"path":this._lastPath},!1,{"type":Tl.ANIMATE_END})}},{"key":"onUpdate","value":function(nt,at,lt){var Rt=this;if(this._clipGraphic){var Bt={};Object.keys(this.clipFromAttribute).forEach((function(nt){Bt[nt]=Rt.clipFromAttribute[nt]+(Rt.clipToAttribute[nt]-Rt.clipFromAttribute[nt])*at})),this._clipGraphic.setAttributes(Bt,!1,{"type":Tl.ANIMATE_UPDATE,"animationState":{"ratio":at,"end":nt}})}}}])}(Xh),Fd=function(nt){function e(nt,at,lt,Rt,Bt){var Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le;r(this,e);var ue=null!==(Ht=null===(Lt=null==Bt?void 0:Bt.group)||void 0===Lt?void 0:Lt.attribute)&&void 0!==Ht?Ht:{},ce=null!==(jt=ue.width)&&void 0!==jt?jt:0,he=null!==($t=ue.height)&&void 0!==$t?$t:0,de=null!==(Kt=null==Bt?void 0:Bt.animationType)&&void 0!==Kt?Kt:"in",fe=null!==(te=null==Bt?void 0:Bt.startAngle)&&void 0!==te?te:0,pe=null!==(ne=null==Bt?void 0:Bt.orient)&&void 0!==ne?ne:"clockwise",ve=0,Ae=0;"anticlockwise"===pe?(Ae="in"===de?fe+2*Math.PI:fe,Ae=fe+2*Math.PI):(ve=fe,Ae="out"===de?fe+2*Math.PI:fe);var we,Ce,je=oc.graphicService.creator.arc({"x":null!==(ae=null===(re=null==Bt?void 0:Bt.center)||void 0===re?void 0:re.x)&&void 0!==ae?ae:ce/2,"y":null!==(se=null===(oe=null==Bt?void 0:Bt.center)||void 0===oe?void 0:oe.y)&&void 0!==se?se:he/2,"outerRadius":null!==(le=null==Bt?void 0:Bt.radius)&&void 0!==le?le:(ce+he)/2,"innerRadius":0,"startAngle":ve,"endAngle":Ae,"fill":!0});return"anticlockwise"===pe?(we={"startAngle":fe+2*Math.PI},Ce={"startAngle":fe}):(we={"endAngle":fe},Ce={"endAngle":fe+2*Math.PI}),n(this,e,["in"===de?we:Ce,"in"===de?Ce:we,lt,Rt,{"group":null==Bt?void 0:Bt.group,"clipGraphic":je}])}return h(e,nt),o(e)}(Id),Nd=function(nt){function e(nt,at,lt,Rt,Bt){var Lt,Ht,jt,$t,Kt,te,ne,re,ae;r(this,e);var oe=null!==(Ht=null===(Lt=null==Bt?void 0:Bt.group)||void 0===Lt?void 0:Lt.attribute)&&void 0!==Ht?Ht:{},se=null!==($t=null!==(jt=null==Bt?void 0:Bt.width)&&void 0!==jt?jt:oe.width)&&void 0!==$t?$t:0,le=null!==(te=null!==(Kt=null==Bt?void 0:Bt.height)&&void 0!==Kt?Kt:oe.height)&&void 0!==te?te:0,ue=null!==(ne=null==Bt?void 0:Bt.animationType)&&void 0!==ne?ne:"in",ce=null!==(re=null==Bt?void 0:Bt.direction)&&void 0!==re?re:"x",he=null!==(ae=null==Bt?void 0:Bt.orient)&&void 0!==ae?ae:"positive",de=oc.graphicService.creator.rect({"x":0,"y":0,"width":"in"===ue&&"x"===ce?0:se,"height":"in"===ue&&"y"===ce?0:le,"fill":!0}),fe={},pe={};return"y"===ce?"negative"===he?(fe={"y":le,"height":0},pe={"y":0,"height":le}):(fe={"height":0},pe={"height":le}):"negative"===he?(fe={"x":se,"width":0},pe={"x":0,"width":se}):(fe={"width":0},pe={"width":se}),n(this,e,["in"===ue?fe:pe,"in"===ue?pe:fe,lt,Rt,{"group":null==Bt?void 0:Bt.group,"clipGraphic":de}])}return h(e,nt),o(e)}(Id),Vd=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"onStart","value":function(){var nt="function"==typeof this.params?this.params():this.params,at=nt.center,lt=nt.r,Rt=this.target.getComputedAttribute("x"),Bt=this.target.getComputedAttribute("y"),Lt=this.target.getComputedAttribute("z"),Ht=Math.acos((Bt-at.y)/lt),jt=Math.acos((Rt-at.x)/lt/Math.sin(Ht));Lt-at.z<0&&(jt=de-jt),this.theta=jt,this.phi=Ht}},{"key":"onBind","value":function(){}},{"key":"onEnd","value":function(){}},{"key":"onUpdate","value":function(nt,at,lt){if(null!=this.phi&&null!=this.theta){var Rt="function"==typeof this.params?this.params():this.params,Bt=Rt.center,Lt=Rt.r,Ht=Rt.cb,jt=2*Math.PI*at,$t=this.theta+jt,Kt=this.phi,te=Lt*Math.sin(Kt)*Math.cos($t)+Bt.x,ne=Lt*Math.cos(Kt)+Bt.y,re=Lt*Math.sin(Kt)*Math.sin($t)+Bt.z;for(lt.x=te,lt.y=ne,lt.z=re,lt.alpha=$t+ue/2;lt.alpha>de;)lt.alpha-=de;lt.alpha=de-lt.alpha,lt.zIndex=-1e4*lt.z,Ht&&Ht(lt)}}}])}(Xh),Xd=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[null,null,nt,"linear"])).customAnimates=at,lt}return h(e,nt),o(e,[{"key":"initAnimates","value":function(){var nt=this;this.customAnimates.forEach((function(at){at.step=nt.step,at.subAnimate=nt.subAnimate,at.target=nt.target}))}},{"key":"getEndProps","value":function(){var nt={};return this.customAnimates.forEach((function(at){Object.assign(nt,at.getEndProps())})),nt}},{"key":"onBind","value":function(){this.initAnimates(),this.customAnimates.forEach((function(nt){nt.onBind()}))}},{"key":"onEnd","value":function(){this.customAnimates.forEach((function(nt){nt.onEnd()}))}},{"key":"onStart","value":function(){this.customAnimates.forEach((function(nt){nt.onStart()}))}},{"key":"onUpdate","value":function(nt,at,lt){this.updating||(this.updating=!0,this.customAnimates.forEach((function(Rt){var Bt=Rt.easing,Lt="string"==typeof Bt?Vh[Bt]:Bt;at=Lt(at),Rt.onUpdate(nt,at,lt)})),this.updating=!1)}}])}(Xh);function bd(nt,at,lt,Rt,Bt,Lt){var Ht=(at-nt)*Bt+nt,jt=(lt-at)*Bt+at,$t=(Rt-lt)*Bt+lt,Kt=(jt-Ht)*Bt+Ht,te=($t-jt)*Bt+jt,ne=(te-Kt)*Bt+Kt;Lt[0]=nt,Lt[1]=Ht,Lt[2]=Kt,Lt[3]=ne,Lt[4]=ne,Lt[5]=te,Lt[6]=$t,Lt[7]=Rt}function xd(nt,at){var lt=nt.length,Rt=at.length;if(lt===Rt)return[nt,at];for(var Bt=[],Lt=[],Ht=lt<Rt?nt:at,jt=Math.min(lt,Rt),$t=Math.abs(Rt-lt)/6,Kt=(jt-2)/6,te=Math.ceil($t/Kt),ne=[Ht[0],Ht[1]],re=$t,ae=2;ae<jt;ae+=6){var oe=Ht[ae-2],se=Ht[ae-1],le=Ht[ae],ue=Ht[ae+1],ce=Ht[ae+2],he=Ht[ae+3],de=Ht[ae+4],fe=Ht[ae+5];if(re<=0)ne.push(le,ue,ce,he,de,fe);else{for(var pe=Math.min(re,te)+1,ve=1;ve<=pe;ve++){var Ae=ve/pe;bd(oe,le,ce,de,Ae,Bt),bd(se,ue,he,fe,Ae,Lt),oe=Bt[3],se=Lt[3],ne.push(Bt[1],Lt[1],Bt[2],Lt[2],oe,se),le=Bt[5],ue=Lt[5],ce=Bt[6],he=Lt[6]}re-=pe-1}}return Ht===nt?[ne,at]:[nt,ne]}function kd(nt,at){for(var lt=nt||at,Rt=lt.length,Bt=lt[Rt-2],Lt=lt[Rt-1],Ht=[],jt=0;jt<at.length;jt+=2)Ht[jt]=Bt,Ht[jt+1]=Lt;return Ht}function Sd(nt){for(var at=[],lt=nt.length,Rt=0;Rt<lt;Rt+=2)at[Rt]=nt[lt-Rt-2],at[Rt+1]=nt[lt-Rt-1];return at}function Ad(nt){for(var at=0,lt=0,Rt=0,Bt=nt.length,Lt=0,Ht=Bt-2;Lt<Bt;Ht=Lt,Lt+=2){var jt=nt[Ht],$t=nt[Ht+1],Kt=nt[Lt],te=nt[Lt+1],ne=jt*te-Kt*$t;at+=ne,lt+=(jt+Kt)*ne,Rt+=($t+te)*ne}return 0===at?[nt[0]||0,nt[1]||0,0]:[lt/at/3,Rt/at/3,at]}function wd(nt,at,lt,Rt){for(var Bt=(nt.length-2)/6,Lt=1/0,Ht=0,jt=nt.length,$t=jt-2,Kt=0;Kt<Bt;Kt++){for(var te=6*Kt,ne=0,re=0;re<jt;re+=2){var ae=0===re?te:(te+re-2)%$t+2,oe=nt[ae]-lt[0],se=nt[ae+1]-lt[1],le=at[re]-Rt[0]-oe,ue=at[re+1]-Rt[1]-se;ne+=le*le+ue*ue}ne<Lt&&(Lt=ne,Ht=Kt)}return Ht}var Md=function(nt,at,lt,Rt,Bt){Nt(at,Rt)&&Nt(lt,Bt)||nt.push(at,lt,Rt,Bt,Rt,Bt)};function Td(nt){for(var at,lt,Rt,Bt,Lt,Ht=nt.commandList,jt=[],$t=0,Kt=0,te=0,ne=0,d=function(nt,lt){at&&at.length>2&&jt.push(at),at=[nt,lt]},re=0,ae=Ht.length;re<ae;re++){var oe=Ht[re],se=0===re;switch(se&&(te=$t=oe[1],ne=Kt=oe[2],[Zl.L,Zl.C,Zl.Q].includes(oe[0])&&(at=[te,ne])),oe[0]){case Zl.M:$t=te=oe[1],Kt=ne=oe[2],d(te,ne);break;case Zl.L:lt=oe[1],Rt=oe[2],Md(at,$t,Kt,lt,Rt),$t=lt,Kt=Rt;break;case Zl.C:at.push(oe[1],oe[2],oe[3],oe[4],$t=oe[5],Kt=oe[6]);break;case Zl.Q:lt=oe[1],Rt=oe[2],Bt=oe[3],Lt=oe[4],at.push($t+2/3*(lt-$t),Kt+2/3*(Rt-Kt),Bt+2/3*(lt-Bt),Lt+2/3*(Rt-Lt),Bt,Lt),$t=Bt,Kt=Lt;break;case Zl.A:var le=oe[1],ue=oe[2],ce=oe[3],he=ce,de=oe[4],fe=oe[5],pe=!!oe[6];lt=Math.cos(de)*ce+le,Rt=Math.sin(de)*ce+ue,se?d(te=lt,ne=Rt):Md(at,$t,Kt,lt,Rt),$t=Math.cos(fe)*ce+le,Kt=Math.sin(fe)*ce+ue;for(var ve=(pe?-1:1)*Math.PI/2,Ae=de;pe?Ae>fe:Ae<fe;Ae+=ve){var we=pe?Math.max(Ae+ve,fe):Math.min(Ae+ve,fe);zl(at,Ae,we,le,ue,ce,he)}break;case Zl.E:var Ce=oe[1],je=oe[2],Ne=oe[3],Ve=oe[4],ti=oe[5],li=oe[6],hi=oe[7]+li,di=!!oe[8],fi=!Nt(ti,0),pi=Math.cos(ti),vi=Math.sin(ti),mi=Math.cos(li)*Ne,_i=Math.sin(li)*Ve;fi?(lt=mi*pi-_i*vi+Ce,Rt=mi*vi+_i*pi+je):(lt=mi+Ce,Rt=_i+je),se?d(te=lt,ne=Rt):Md(at,$t,Kt,lt,Rt),mi=Math.cos(hi)*Ne,_i=Math.sin(hi)*Ve,fi?($t=mi*pi-_i*vi+Ce,Kt=mi*vi+_i*pi+je):($t=mi+Ce,Kt=_i+je);for(var bi=(di?-1:1)*Math.PI/2,Mi=li;di?Mi>hi:Mi<hi;Mi+=bi){var Ti=di?Math.max(Mi+bi,hi):Math.min(Mi+bi,hi);if(zl(at,Mi,Ti,Ce,je,Ne,Ve),fi)for(var Ii=at.length,Bi=Ii-6;Bi<=Ii-1;Bi+=2)mi=at[Bi],_i=at[Bi+1],at[Bi]=(mi-Ce)*pi-(_i-je)*vi+Ce,at[Bi+1]=(mi-Ce)*vi+(_i-je)*pi+je}break;case Zl.R:te=$t=oe[1],ne=Kt=oe[2],lt=te+oe[3],Rt=ne+oe[4],d(lt,ne),Md(at,lt,ne,lt,Rt),Md(at,lt,Rt,te,Rt),Md(at,te,Rt,te,ne),Md(at,te,ne,lt,ne);break;case Zl.AT:var zi=oe[1],Wi=oe[2],Ui=oe[3],$i=oe[4],qi=oe[5],Ki=Ge.distancePP({"x":$t,"y":Kt},{"x":zi,"y":Wi}),Qi=Ge.distancePP({"x":Ui,"y":$i},{"x":zi,"y":Wi}),Ji=(($t-zi)*(Ui-zi)+(Kt-Wi)*($i-Wi))/(Ki*Qi),dn=qi/Math.sin(Ji/2),fn=($t+Ui-2*zi)/2,vn=(Kt+$i-2*Wi)/2,gn=Ge.distancePP({"x":fn,"y":vn},{"x":0,"y":0}),yn=zi+dn*fn/gn,mn=Ui+dn*vn/gn,_n=Math.sqrt(dn*dn-qi*qi);Md(at,$t,Kt,te=zi+_n*($t-zi)/Ki,ne=Wi+_n*(Kt-Wi)/Ki),$t=zi+_n*(Ui-zi)/Qi,Kt=Wi+_n*($i-Wi)/Qi;var bn=Be({"x":yn,"y":mn},{"x":te,"y":ne}),xn=Be({"x":yn,"y":mn},{"x":$t,"y":Kt});zl(at,bn,xn,yn,mn,qi,qi);break;case Zl.Z:at&&Md(at,$t,Kt,te,ne),$t=te,Kt=ne}}return at&&at.length>2&&jt.push(at),jt}function Cd(nt,at){for(var lt=0;lt<nt.length;lt++)for(var Rt=nt[lt],Bt=0;Bt<Rt.length;Bt+=2){var Lt=Rt[Bt],Ht=Rt[Bt+1],jt={"x":Lt,"y":Ht};at.transformPoint({"x":Lt,"y":Ht},jt),Rt[Bt]=jt.x,Rt[Bt+1]=jt.y}}function Ed(nt){for(var at=new Ou,lt=0;lt<nt.length;lt++){var Rt=nt[lt];if(Rt.length>2){at.moveTo(Rt[0],Rt[1]);for(var Bt=2;Bt<Rt.length;Bt+=6)at.bezierCurveTo(Rt[Bt],Rt[Bt+1],Rt[Bt+2],Rt[Bt+3],Rt[Bt+4],Rt[Bt+5])}}return at}var Pd=function(nt){if(!nt)return{"x":0,"y":0,"width":0,"height":0};var at=j(nt.width)?nt.x1-nt.x:nt.width,lt=j(nt.height)?nt.y1-nt.y:nt.height,Rt=0,Bt=0;return at<0?(Rt=at,at=-at):Number.isNaN(at)&&(at=0),lt<0?(Bt=lt,lt=-lt):Number.isNaN(lt)&&(lt=0),{"x":Rt,"y":Bt,"width":at,"height":lt}};function Rd(nt,at,lt){var Rt,Bt,Lt=nt/at;nt>=at?(Bt=Math.ceil(Math.sqrt(lt*Lt)),0===(Rt=Math.floor(lt/Bt))&&(Rt=1,Bt=lt)):(Rt=Math.ceil(Math.sqrt(lt/Lt)),0===(Bt=Math.floor(lt/Rt))&&(Bt=1,Rt=lt));for(var Ht=[],jt=0;jt<Rt;jt++)Ht.push(Bt);var $t=lt-Rt*Bt;if($t>0)for(var Kt=0;Kt<$t;Kt+=Bt)Kt+Bt<$t?Ht.push(Bt):Ht.push($t-Kt);return Ht}var qd,Bd=function(nt,at){var lt=nt.filter((function(nt){return!1!==nt.defined&&Z(nt.x)&&Z(nt.y)}));if(0===lt.length)return[];if(1===lt.length)return new Array(at).fill(0).map((function(nt){return lt[0]}));var Rt=[];if(at<=lt.length){for(var Bt=lt.length/at,Lt=0,Ht=0;Lt<at;)Rt.push(lt[Math.floor(Ht)]),Ht+=Bt,Lt++;return Rt}for(var jt=at-lt.length,$t=1/(jt/(lt.length-1)+1),Kt=0,te=0,ne=nt.length;te<ne;te++)if(Rt.push(nt[te]),te<ne-1)for(var re=$t,ae=nt[te].x,oe=nt[te].y,se=nt[te+1].x,le=nt[te+1].y;re<1&&Kt<jt;)Rt.push({"x":ae+(se-ae)*re,"y":oe+(le-oe)*re}),re+=$t,Kt+=1;return Rt},Ld=function(nt){return nt.map((function(nt){return{"x":nt.x,"y":nt.y}}))},Dd=function(nt,at,lt){for(var Rt,Bt,Lt,Ht=nt.length,jt=[],$t=0;$t<Ht;$t++){var Kt=nt[$t],te=$t===Ht-1?nt[0]:nt[$t+1],ne=ze([at.x,at.y],[lt.x,lt.y],[Kt.x,Kt.y],[te.x,te.y]);ne&&"boolean"!=typeof ne&&jt.push({"dot":(Bt=[ne[0]-at.x,ne[1]-at.x],Lt=[lt.x-at.x,lt.y-at.x],Bt[0]*Lt[1]-Bt[1]*Lt[0]),"point":{"x":ne[0],"y":ne[1]},"edgeIndex":$t})}if(jt.length<2)return[Ld(nt),Ld(nt)];jt.sort((function(nt,at){return nt.dot-at.dot}));var re=jt[0],ae=jt[jt.length-1];re.edgeIndex>ae.edgeIndex&&(re=(Rt=[ae,re])[0],ae=Rt[1]);for(var oe=re.point,se=ae.point,le=[{"x":oe.x,"y":oe.y}],ue=re.edgeIndex+1;ue<=ae.edgeIndex;ue++)le.push({"x":nt[ue].x,"y":nt[ue].y});le.push({"x":se.x,"y":se.y});for(var ce=[{"x":se.x,"y":se.y}],he=ae.edgeIndex+1,de=re.edgeIndex+Ht;he<=de;he++){var fe=nt[he%Ht];ce.push({"x":fe.x,"y":fe.y})}return ce.push({"x":oe.x,"y":oe.y}),[le,ce]},Od=function(nt,at,lt){if(1===at)lt.push({"points":nt});else{var Rt=Math.floor(at/2),Bt=function(nt){var at=new mi;nt.forEach((function(nt){at.add(nt.x,nt.y)}));var lt=at.width(),Rt=at.height();if(lt>=Rt){var Bt=at.x1+lt/2;return Dd(nt,{"x":Bt,"y":at.y1},{"x":Bt,"y":at.y2})}var Lt=at.y1+Rt/2;return Dd(nt,{"x":at.x1,"y":Lt},{"x":at.x2,"y":Lt})}(nt);Od(Bt[0],Rt,lt),Od(Bt[1],at-Rt,lt)}};!function(nt){nt[nt.Color255=0]="Color255",nt[nt.Color1=1]="Color1"}(qd||(qd={}));var Jd=function(){function t(){r(this,t)}return o(t,null,[{"key":"Get","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qd.Color1,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,1];if(at===qd.Color1){var Rt=t.store1[nt];if(Rt)return lt[0]=Rt[0],lt[1]=Rt[1],lt[2]=Rt[2],lt[3]=Rt[3],lt;var Bt=Wi.parseColorString(nt);if(Bt){var Lt=[Bt.r/255,Bt.g/255,Bt.b/255,Bt.opacity];t.store1[nt]=Lt,t.store255[nt]=[Bt.r,Bt.g,Bt.b,Bt.opacity],lt[0]=Lt[0],lt[1]=Lt[1],lt[2]=Lt[2],lt[3]=Lt[3]}return lt}var Ht=t.store255[nt];if(Ht)return lt[0]=Ht[0],lt[1]=Ht[1],lt[2]=Ht[2],lt[3]=Ht[3],lt;var jt=Wi.parseColorString(nt);return jt&&(t.store1[nt]=[jt.r/255,jt.g/255,jt.b/255,jt.opacity],t.store255[nt]=[jt.r,jt.g,jt.b,jt.opacity],lt[0]=jt.r,lt[1]=jt.g,lt[2]=jt.b,lt[3]=jt.opacity),lt}},{"key":"Set","value":function(nt,at,lt){if(at===qd.Color1){if(t.store1[nt])return;t.store1[nt]=lt,t.store255[nt]=[Math.floor(255*lt[0]),Math.floor(255*lt[1]),Math.floor(255*lt[2]),Math.floor(255*lt[3])]}else{if(t.store255[nt])return;t.store255[nt]=lt,t.store1[nt]=[lt[0]/255,lt[1]/255,lt[2]/255,lt[3]]}}}])}();function zd(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(nt)&&Z(nt[0])?at?"rgb(".concat(Math.round(nt[0]),",").concat(Math.round(nt[1]),",").concat(Math.round(nt[2]),",").concat(nt[3].toFixed(2),")"):"rgb(".concat(Math.round(nt[0]),",").concat(Math.round(nt[1]),",").concat(Math.round(nt[2]),")"):nt}function Hd(nt,at,lt,Rt,Bt){return Array.isArray(nt)&&!Z(nt[0])||Array.isArray(at)&&!Z(at[0])?new Array(4).fill(0).map((function(Bt,Lt){return jd(X(nt)?nt[Lt]:nt,X(at)?at[Lt]:at,lt,Rt)})):jd(nt,at,lt,Rt,Bt)}function jd(nt,at,lt,Rt,Bt){if(!nt||!at)return nt&&zd(nt)||at&&zd(at)||!1;var Lt,Ht,jt=!1,$t=!1;if(Array.isArray(nt)?Lt=nt:"string"==typeof nt?Lt=Jd.Get(nt,qd.Color255):jt=!0,Array.isArray(at)?Ht=at:"string"==typeof at?Ht=Jd.Get(at,qd.Color255):$t=!0,jt!==$t){var Kt=jt?nt:at,te=jt?at:nt,ne=Object.assign(Object.assign({},Kt),{"stops":Kt.stops.map((function(nt){return Object.assign(Object.assign({},nt),{"color":zd(te)})}))});return jt?Hd(Kt,ne,lt,Rt,Bt):Hd(ne,Kt,lt,Rt,Bt)}if(jt){if(nt.gradient===at.gradient){var re=nt,ae=at,oe=re.stops,se=ae.stops;if(oe.length!==se.length)return!1;if("linear"===re.gradient)return function(nt,at,lt){var Rt=nt.stops,Bt=at.stops;return{"gradient":"linear","x0":nt.x0+(at.x0-nt.x0)*lt,"x1":nt.x1+(at.x1-nt.x1)*lt,"y0":nt.y0+(at.y0-nt.y0)*lt,"y1":nt.y1+(at.y1-nt.y1)*lt,"stops":new Array(Rt.length).fill(0).map((function(nt,at){return{"color":Gd(Rt[at].color,Bt[at].color,lt),"offset":Rt[at].offset+(Bt[at].offset-Rt[at].offset)*lt}}))}}(re,ae,lt);if("radial"===re.gradient)return function(nt,at,lt){var Rt=nt.stops,Bt=at.stops;return{"gradient":"radial","x0":nt.x0+(at.x0-nt.x0)*lt,"x1":nt.x1+(at.x1-nt.x1)*lt,"y0":nt.y0+(at.y0-nt.y0)*lt,"y1":nt.y1+(at.y1-nt.y1)*lt,"r0":nt.r0+(at.r0-nt.r0)*lt,"r1":nt.r1+(at.r1-nt.r1)*lt,"stops":new Array(Rt.length).fill(0).map((function(nt,at){return{"color":Gd(Rt[at].color,Bt[at].color,lt),"offset":Rt[at].offset+(Bt[at].offset-Rt[at].offset)*lt}}))}}(re,ae,lt);if("conical"===re.gradient)return function(nt,at,lt){var Rt=nt.stops,Bt=at.stops;return{"gradient":"conical","startAngle":nt.startAngle+(at.startAngle-nt.startAngle)*lt,"endAngle":nt.endAngle+(at.endAngle-nt.endAngle)*lt,"x":nt.x+(at.x-nt.x)*lt,"y":nt.y+(at.y-nt.y)*lt,"stops":new Array(Rt.length).fill(0).map((function(nt,at){return{"color":Gd(Rt[at].color,Bt[at].color,lt),"offset":Rt[at].offset+(Bt[at].offset-Rt[at].offset)*lt}}))}}(re,ae,lt)}return!1}return Bt&&Bt(Lt,Ht),zd(function(nt,at,lt){return[nt[0]+(at[0]-nt[0])*lt,nt[1]+(at[1]-nt[1])*lt,nt[2]+(at[2]-nt[2])*lt,nt[3]+(at[3]-nt[3])*lt]}(Lt,Ht,lt),Rt)}Jd.store255={},Jd.store1={};var tf=[0,0,0,0],nf=[0,0,0,0];function Gd(nt,at,lt){return Jd.Get(nt,qd.Color255,tf),Jd.Get(at,qd.Color255,nf),"rgba(".concat(Math.round(tf[0]+(nf[0]-tf[0])*lt),",").concat(Math.round(tf[1]+(nf[1]-tf[1])*lt),",").concat(Math.round(tf[2]+(nf[2]-tf[2])*lt),",").concat(tf[3]+(nf[3]-tf[3])*lt,")")}var Wd=function(nt,at,lt){nt.forEach((function(nt){if(Number.isFinite(nt.to))at[nt.key]=nt.from+(nt.to-nt.from)*lt;else if("fill"===nt.key||"stroke"===nt.key){var Rt=Hd(nt.from,nt.to,lt,!1);Rt&&(at[nt.key]=Rt)}}))},Ud=function(nt,at,lt){var Rt=[],Bt=[];at.clear();for(var Lt=0;Lt<nt.length;Lt++){var Ht=nt[Lt],jt=Ht.from,$t=Ht.to,Kt=Ht.rotation*lt,te=Ht.fromCp,ne=Ht.toCp,re=Math.sin(Kt),ae=Math.cos(Kt);Bt[0]=te[0]+(ne[0]-te[0])*lt,Bt[1]=te[1]+(ne[1]-te[1])*lt;for(var oe=0;oe<jt.length;oe+=2){var se=jt[oe],le=jt[oe+1],ue=se*(1-lt)+$t[oe]*lt,ce=le*(1-lt)+$t[oe+1]*lt;Rt[oe]=ue*ae-ce*re+Bt[0],Rt[oe+1]=ue*re+ce*ae+Bt[1]}var he=Rt[0],de=Rt[1];at.moveTo(he,de);for(var fe=2;fe<jt.length;fe+=6){var pe=Rt[fe],ve=Rt[fe+1],Ae=Rt[fe+2],we=Rt[fe+3],Ce=Rt[fe+4],je=Rt[fe+5];he===pe&&de===ve&&Ae===Ce&&we===je?at.lineTo(Ce,je):at.bezierCurveTo(pe,ve,Ae,we,Ce,je),he=Ce,de=je}}},Yd=function(nt,at,lt){var Rt=nt?Td(nt):[],Bt=Td(at);lt&&Rt&&(lt.fromTransform&&Cd(Rt,lt.fromTransform.clone().getInverse()),Cd(Rt,lt.toTransfrom));var Lt=function(nt,at){for(var lt,Rt,Bt=[],Lt=[],Ht=0;Ht<Math.max(nt.length,at.length);Ht++){var jt,$t=nt[Ht],Kt=at[Ht],te=void 0,ne=void 0;$t?Kt?(lt=te=(jt=g(xd($t,Kt),2))[0],Rt=ne=jt[1]):(ne=kd(Rt,$t),te=$t):(te=kd(lt,Kt),ne=Kt),Bt.push(te),Lt.push(ne)}return[Bt,Lt]}(Rt,Bt),Ht=g(Lt,2),jt=Ht[0],$t=Ht[1];return nt?function(nt,at,lt,Rt){for(var Bt,Lt=[],Ht=0;Ht<nt.length;Ht++){var jt=nt[Ht],$t=at[Ht],Kt=Ad(jt),te=Ad($t);null==Bt&&(Bt=Kt[2]<0!=te[2]<0);var ne=[],re=[],ae=0,oe=1/0,se=[],le=jt.length;Bt&&(jt=Sd(jt));for(var ue=6*wd(jt,$t,Kt,te),ce=le-2,he=0;he<ce;he+=2){var de=(ue+he)%ce+2;ne[he+2]=jt[de]-Kt[0],ne[he+3]=jt[de+1]-Kt[1]}if(ne[0]=jt[ue]-Kt[0],ne[1]=jt[ue+1]-Kt[1],lt>0)for(var fe=Rt/lt,pe=-Rt/2;pe<=Rt/2;pe+=fe){for(var ve=Math.sin(pe),Ae=Math.cos(pe),we=0,Ce=0;Ce<jt.length;Ce+=2){var je=ne[Ce],Ne=ne[Ce+1],Ve=$t[Ce]-te[0],Ge=$t[Ce+1]-te[1],ti=Ve*Ae-Ge*ve,li=Ve*ve+Ge*Ae;se[Ce]=ti,se[Ce+1]=li;var hi=ti-je,di=li-Ne;we+=hi*hi+di*di}if(we<oe){oe=we,ae=pe;for(var fi=0;fi<se.length;fi++)re[fi]=se[fi]}}else for(var pi=0;pi<le;pi+=2)re[pi]=$t[pi]-te[0],re[pi+1]=$t[pi+1]-te[1];Lt.push({"from":ne,"to":re,"fromCp":Kt,"toCp":te,"rotation":-ae})}return Lt}(jt,$t,10,Math.PI):$t.map((function(nt,at){return{"from":jt[at],"to":nt,"fromCp":[0,0],"toCp":[0,0],"rotation":0}}))},rf=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],Kd=function(nt,at){if(!nt||!at)return null;var lt=[],Rt=!1;return Object.keys(nt).forEach((function(Bt){if(rf.includes(Bt)){var Lt=at[Bt];j(Lt)||j(nt[Bt])||Lt===nt[Bt]||("fill"===Bt||"stroke"===Bt?lt.push({"from":"string"==typeof nt[Bt]?Jd.Get(nt[Bt],qd.Color255):nt[Bt],"to":"string"==typeof Lt?Jd.Get(Lt,qd.Color255):Lt,"key":Bt}):lt.push({"from":nt[Bt],"to":Lt,"key":Bt}),Rt=!0)}})),Rt?lt:null},of=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[0,1,at,lt])).morphingData=nt.morphingData,Rt.otherAttrs=nt.otherAttrs,Rt.saveOnEnd=nt.saveOnEnd,Rt}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return{}}},{"key":"onBind","value":function(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}},{"key":"onEnd","value":function(){}},{"key":"onUpdate","value":function(nt,at,lt){var Rt=this.target,Bt="function"==typeof Rt.pathProxy?Rt.pathProxy(Rt.attribute):Rt.pathProxy;Ud(this.morphingData,Bt,at),this.otherAttrs&&this.otherAttrs.length&&Wd(this.otherAttrs,lt,at),nt&&!this.saveOnEnd&&(this.target.pathProxy=null)}}])}(Xh),Zd=function(nt,at,lt,Rt){var Bt,Lt,Ht;if(nt&&(!nt.valid||!nt.toCustomPath))return __DEV__&&console.error(nt," is not validate"),null;if(!at.valid||!at.toCustomPath)return __DEV__&&console.error(at," is not validate"),null;var jt=null==nt?void 0:nt.globalTransMatrix;Rt&&jt&&(jt=Rt.clone().multiply(jt.a,jt.b,jt.c,jt.d,jt.e,jt.f));var $t=Yd(null===(Bt=null==nt?void 0:nt.toCustomPath)||void 0===Bt?void 0:Bt.call(nt),at.toCustomPath(),{"fromTransform":jt,"toTransfrom":at.globalTransMatrix}),Kt=Kd(null==nt?void 0:nt.attribute,at.attribute),te=at.animate(lt);return(null==lt?void 0:lt.delay)&&te.wait(lt.delay),te.play(new of({"morphingData":$t,"otherAttrs":Kt},null!==(Lt=null==lt?void 0:lt.duration)&&void 0!==Lt?Lt:id,null!==(Ht=null==lt?void 0:lt.easing)&&void 0!==Ht?Ht:od)),te},sf=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[0,1,at,lt])).morphingData=nt.morphingData,Rt.otherAttrs=nt.otherAttrs,Rt}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return{}}},{"key":"onBind","value":function(){this.addPathProxy()}},{"key":"addPathProxy","value":function(){this.target.shadowRoot.forEachChildren((function(nt){nt.createPathProxy()})),this.onUpdate(!1,0,this.target.attribute)}},{"key":"clearPathProxy","value":function(){this.target.shadowRoot.forEachChildren((function(nt){nt.pathProxy=null}))}},{"key":"onEnd","value":function(){}},{"key":"onUpdate","value":function(nt,at,lt){var Rt=this;this.target.shadowRoot.forEachChildren((function(nt,lt){var Bt;Ud(Rt.morphingData[lt],"function"==typeof nt.pathProxy?nt.pathProxy(nt.attribute):nt.pathProxy,at),(null===(Bt=Rt.otherAttrs)||void 0===Bt?void 0:Bt[lt])&&Rt.otherAttrs[lt].length&&Wd(Rt.otherAttrs[lt],nt.attribute,at)})),nt&&(this.clearPathProxy(),this.morphingData=null)}}])}(Xh),Qd=function(nt){var at={};return Object.keys(nt).forEach((function(lt){(function(nt){return fd.includes(nt)})(lt)||(at[lt]=nt[lt])})),at},$d=function(nt,at,lt){var Rt=Qd(nt.attribute),Bt=nt.attachShadow();if(at.length)Bt.setTheme(l({},at[0].type,Rt)),at.forEach((function(nt){nt.setAttributes({"pickable":!1}),Bt.appendChild(nt)}));else{var Lt=nt.AABBBounds,Ht=Lt.width(),jt=Lt.height();Bt.setTheme({"rect":Rt}),new Array(lt).fill(0).forEach((function(nt){var lt=oc.graphicService.creator.rect({"x":0,"y":0,"width":Ht,"height":jt,"pickable":!1});Bt.appendChild(lt),at.push(lt)}))}},tp=function(nt,at,lt){for(var Rt=[],Bt=lt?null:Qd(nt.attribute),Lt=nt.toCustomPath(),Ht=0;Ht<at;Ht++){var jt={"path":(new Ou).fromCustomPath2D(Lt)};Rt.push(oc.graphicService.creator.path(lt?jt:Object.assign({},Bt,jt)))}return lt&&$d(nt,Rt,at),Rt},ep=function(nt,at,lt){var Rt=[],Bt=lt?null:Qd(nt.attribute);if("rect"===nt.type)(function(nt,at){for(var lt=Pd(nt.attribute),Rt=lt.width,Bt=lt.height,Lt=Rd(Rt,Bt,at),Ht=[],jt=Bt/Lt.length,$t=0,Kt=Lt.length;$t<Kt;$t++)for(var te=Lt[$t],ne=Rt/te,re=0;re<te;re++)Ht.push({"x":0+re*ne,"y":0+$t*jt,"width":ne,"height":jt});return Ht})(nt,at).forEach((function(nt){Rt.push(oc.graphicService.creator.rect(lt?nt:Object.assign({},Bt,nt)))}));else if("arc"===nt.type)(function(nt,at){for(var lt=nt.getParsedAngle(),Rt=lt.startAngle,Bt=lt.endAngle,Lt=nt.getComputedAttribute("innerRadius"),Ht=nt.getComputedAttribute("outerRadius"),jt=Math.abs(Rt-Bt),$t=Math.abs(Ht-Lt),Kt=Rd(jt*(Lt+Ht)/2,$t,at),te=[],ne=$t/Kt.length,re=Ht>=Lt?1:-1,ae=Bt>=Rt?1:-1,oe=0,se=Kt.length;oe<se;oe++)for(var le=Kt[oe],ue=jt/le,ce=0;ce<le;ce++)te.push({"innerRadius":Ht-ne*oe*re,"outerRadius":Ht-ne*(oe+1)*re,"startAngle":Rt+ue*ce*ae,"endAngle":Rt+ue*(ce+1)*ae});return te})(nt,at).forEach((function(nt){Rt.push(oc.graphicService.creator.arc(lt?nt:Object.assign({},Bt,nt)))}));else if("circle"===nt.type)(function(nt,at){for(var lt=nt.getComputedAttribute("startAngle"),Rt=nt.getComputedAttribute("endAngle"),Bt=nt.getComputedAttribute("radius"),Lt=Math.abs(lt-Rt),Ht=Rd(Lt*Bt,Bt,at),jt=[],$t=Lt/Ht[0],Kt=Bt/Ht.length,te=Rt>=lt?1:-1,ne=0,re=Ht.length;ne<re;ne++)for(var ae=0,oe=Ht[ne];ae<oe;ae++)jt.push({"innerRadius":Kt*ne,"outerRadius":Kt*(ne+1),"startAngle":lt+$t*ae*te,"endAngle":lt+$t*(ae+1)*te});return jt})(nt,at).forEach((function(nt){Rt.push(oc.graphicService.creator.arc(lt?nt:Object.assign({},Bt,nt)))}));else if("line"===nt.type){var Lt=function(nt,at){var lt=nt.attribute,Rt=lt.points;if(Rt)return Bd(Rt,at);if(lt.segments){var Bt=lt.segments.reduce((function(nt,at){var lt;return nt.concat(null!==(lt=at.points)&&void 0!==lt?lt:[])}),[]);return Bd(Bt,at)}return[]}(nt,at),Ht={"size":10,"symbolType":"circle"};Lt.forEach((function(nt){Rt.push(oc.graphicService.creator.symbol(lt?Object.assign({},nt,Ht):Object.assign({},Bt,nt,Ht)))}))}else"polygon"===nt.type?function(nt,at){var lt=nt.attribute.points;if(!lt||!lt.length)return[];if(1===at)return[{"points":Ld(lt)}];var Rt=[];return Od(lt,at,Rt),Rt}(nt,at).forEach((function(nt){Rt.push(oc.graphicService.creator.polygon(lt?nt:Object.assign({},Bt,nt)))})):"area"===nt.type?function(nt,at){var lt,Rt,Bt=nt.attribute,Lt=Bt.points,Ht=Bt.segments;Lt||(Lt=Ht.reduce((function(nt,at){var lt;return nt.concat(null!==(lt=at.points)&&void 0!==lt?lt:[])}),[]));var jt=Lt.filter((function(nt){return!1!==nt.defined&&Z(nt.x)&&Z(nt.y)}));if(!jt.length)return[];var $t=[];jt.forEach((function(nt){$t.push({"x":nt.x,"y":nt.y})}));for(var Kt=jt.length-1;Kt>=0;Kt--){var te=jt[Kt];$t.push({"x":null!==(lt=te.x1)&&void 0!==lt?lt:te.x,"y":null!==(Rt=te.y1)&&void 0!==Rt?Rt:te.y})}var ne=[];return Od(Lt,at,ne),ne}(nt,at).forEach((function(nt){Rt.push(oc.graphicService.creator.polygon(lt?nt:Object.assign({},Bt,nt)))})):"path"===nt.type&&function(nt,at){var lt=Td(nt.getParsedPathShape());if(!lt.length||at<0)return[];var Rt=lt.length;if(lt.length>=at){for(var Bt=[],Lt=Math.floor(lt.length/at),Ht=0;Ht<at;Ht++){var jt=lt.slice(Ht*Lt,Ht===at-1?Rt:(Ht+1)*Lt);Bt.push({"path":Ed(jt)})}return Bt}for(var $t=[],Kt=Math.floor(at/Rt),te=at,ne=0;ne<Rt;ne++){for(var re=[],ae=2,oe=lt[ne].length;ae<oe;ae+=2)re.push({"x":lt[0][ae],"y":lt[0][ae+1]});Od(re,ne===Rt-1?te:Kt,$t),te-=Kt}return $t}(nt,at).forEach((function(nt){"path"in nt?Rt.push(oc.graphicService.creator.path(lt?nt:Object.assign({},Bt,nt))):Rt.push(oc.graphicService.creator.polygon(lt?nt:Object.assign({},Bt,nt)))}));return lt&&$d(nt,Rt,at),Rt},uf=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return{}}},{"key":"onBind","value":function(){this.target.setTheme({"common":{"opacity":0}})}},{"key":"onEnd","value":function(){this.target.setTheme({"common":{"opacity":1}})}},{"key":"onUpdate","value":function(nt,at,lt){this.target.setTheme({"common":{"opacity":at}})}}])}(Xh),cf=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return{}}},{"key":"onBind","value":function(){this.target.setTheme({"common":{"opacity":1}})}},{"key":"onEnd","value":function(){this.target.setTheme({"common":{"opacity":0}})}},{"key":"onUpdate","value":function(nt,at,lt){this.target.setTheme({"common":{"opacity":1-at}})}}])}(Xh),df=function(){function t(){r(this,t)}return o(t,null,[{"key":"GetImage","value":function(nt,at){var lt,Rt=t.cache.get(nt);Rt?"fail"===Rt.loadState?oc.global.getRequestAnimationFrame()((function(){at.imageLoadFail(nt)})):"init"===Rt.loadState||"loading"===Rt.loadState?null===(lt=Rt.waitingMark)||void 0===lt||lt.push(at):at&&at.imageLoadSuccess(nt,Rt.data):t.loadImage(nt,at)}},{"key":"GetSvg","value":function(nt,at){var lt,Rt=t.cache.get(nt);Rt?"fail"===Rt.loadState?oc.global.getRequestAnimationFrame()((function(){at.imageLoadFail(nt)})):"init"===Rt.loadState||"loading"===Rt.loadState?null===(lt=Rt.waitingMark)||void 0===lt||lt.push(at):at&&at.imageLoadSuccess(nt,Rt.data):(Rt={"type":"image","loadState":"init"},t.cache.set(nt,Rt),Rt.dataPromise=oc.global.loadSvg(nt),Rt.dataPromise?(Rt.waitingMark=[at],Rt.dataPromise.then((function(at){var lt;Rt.loadState=(null==at?void 0:at.data)?"success":"fail",Rt.data=null==at?void 0:at.data,null===(lt=Rt.waitingMark)||void 0===lt||lt.map((function(lt,Bt){(null==at?void 0:at.data)?(Rt.loadState="success",Rt.data=at.data,lt.imageLoadSuccess(nt,at.data)):(Rt.loadState="fail",lt.imageLoadFail(nt))})),Rt.waitingMark&&(Rt.waitingMark=[])}))):(Rt.loadState="fail",at.imageLoadFail(nt)))}},{"key":"GetFile","value":function(nt,at){var lt=t.cache.get(nt);return lt?"fail"===lt.loadState?Promise.reject():"init"===lt.loadState||"loading"===lt.loadState?lt.dataPromise.then((function(nt){return nt.data})):Promise.resolve(lt.data):(lt={"type":at,"loadState":"init"},t.cache.set(nt,lt),"arrayBuffer"===at?lt.dataPromise=oc.global.loadArrayBuffer(nt):"blob"===at?lt.dataPromise=oc.global.loadBlob(nt):"json"===at&&(lt.dataPromise=oc.global.loadJson(nt)),lt.dataPromise.then((function(nt){return nt.data})))}},{"key":"loading","value":function(){var nt=this;setTimeout((function(){if(!t.isLoading&&t.toLoadAueue.length){t.isLoading=!0;var at=t.toLoadAueue.splice(0,10),lt=[];at.forEach((function(nt){var at=nt.url,Rt=nt.marks,Bt={"type":"image","loadState":"init"};if(t.cache.set(at,Bt),Bt.dataPromise=oc.global.loadImage(at),Bt.dataPromise){Bt.waitingMark=Rt;var Lt=Bt.dataPromise.then((function(nt){var lt;Bt.loadState=(null==nt?void 0:nt.data)?"success":"fail",Bt.data=null==nt?void 0:nt.data,null===(lt=Bt.waitingMark)||void 0===lt||lt.map((function(lt,Rt){(null==nt?void 0:nt.data)?(Bt.loadState="success",Bt.data=nt.data,lt.imageLoadSuccess(at,nt.data)):(Bt.loadState="fail",lt.imageLoadFail(at))})),Bt.waitingMark&&(Bt.waitingMark=[])}));lt.push(Lt)}else Bt.loadState="fail",Rt.forEach((function(nt){return nt.imageLoadFail(at)}))})),Promise.all(lt).then((function(){t.isLoading=!1,nt.onLoadSuccessCb.forEach((function(nt){return nt()})),t.loading()})).catch((function(at){console.error(at),t.isLoading=!1,nt.onLoadSuccessCb.forEach((function(nt){return nt()})),t.loading()}))}}),0)}},{"key":"loadImage","value":function(nt,at){var lt=ap(nt,t.toLoadAueue);if(-1!==lt)return t.toLoadAueue[lt].marks.push(at),void t.loading();t.toLoadAueue.push({"url":nt,"marks":[at]}),t.loading()}},{"key":"improveImageLoading","value":function(nt){var at=ap(nt,t.toLoadAueue);if(-1!==at){var lt=t.toLoadAueue.splice(at,1);t.toLoadAueue.unshift(lt[0])}}},{"key":"onLoadSuccess","value":function(nt){this.onLoadSuccessCb.push(nt)}}])}();function ap(nt,at){for(var lt=0;lt<at.length;lt++)if(at[lt].url===nt)return lt;return-1}df.cache=new Map,df.isLoading=!1,df.toLoadAueue=[],df.onLoadSuccessCb=[];var pf=o((function t(){r(this,t)}),[{"key":"bounds","value":function(nt,at){if(Z(nt)){var lt=nt/2;at.x1=-lt,at.x2=lt,at.y1=-lt,at.y2=lt}else at.x1=-nt[0]/2,at.x2=nt[0]/2,at.y1=-nt[1]/2,at.y2=nt[1]/2}},{"key":"parseSize","value":function(nt){return Z(nt)?nt:Math.min(nt[0],nt[1])}}]);function sp(nt,at,lt,Rt,Bt){return Bt?nt.arc(lt,Rt,at,0,he,!1,Bt):nt.arc(lt,Rt,at,0,he),!1}var vf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="circle",nt.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return sp(nt,this.parseSize(at)/2,lt,Rt,Bt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return sp(nt,this.parseSize(at)/2+Bt,lt,Rt,Lt)}},{"key":"drawToSvgPath","value":function(nt,at,lt,Rt){var Bt=this.parseSize(nt)/2;return"M ".concat(at-Bt,", ").concat(lt," a ").concat(Bt,",").concat(Bt," 0 1,0 ").concat(2*Bt,",0 a ").concat(Bt,",").concat(Bt," 0 1,0 -").concat(2*Bt,",0")}}])}(pf),gf=new vf,mf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="cross",nt.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return function(nt,at,lt,Rt,Bt){return nt.moveTo(-3*at+lt,-at+Rt,Bt),nt.lineTo(-at+lt,-at+Rt,Bt),nt.lineTo(-at+lt,-3*at+Rt,Bt),nt.lineTo(at+lt,-3*at+Rt,Bt),nt.lineTo(at+lt,-at+Rt,Bt),nt.lineTo(3*at+lt,-at+Rt,Bt),nt.lineTo(3*at+lt,at+Rt,Bt),nt.lineTo(at+lt,at+Rt,Bt),nt.lineTo(at+lt,3*at+Rt,Bt),nt.lineTo(-at+lt,3*at+Rt,Bt),nt.lineTo(-at+lt,at+Rt,Bt),nt.lineTo(-3*at+lt,at+Rt,Bt),nt.closePath(),!0}(nt,this.parseSize(at)/6,lt,Rt,Bt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return function(nt,at,lt,Rt,Bt,Lt){return nt.moveTo(-3*at+lt-Bt,-at+Rt-Bt,Lt),nt.lineTo(-at+lt-Bt,-at+Rt-Bt,Lt),nt.lineTo(-at+lt-Bt,-3*at+Rt-Bt,Lt),nt.lineTo(at+lt+Bt,-3*at+Rt-Bt,Lt),nt.lineTo(at+lt+Bt,-at+Rt-Bt,Lt),nt.lineTo(3*at+lt+Bt,-at+Rt-Bt,Lt),nt.lineTo(3*at+lt+Bt,at+Rt+Bt,Lt),nt.lineTo(at+lt+Bt,at+Rt+Bt,Lt),nt.lineTo(at+lt+Bt,3*at+Rt+Bt,Lt),nt.lineTo(-at+lt-Bt,3*at+Rt+Bt,Lt),nt.lineTo(-at+lt-Bt,at+Rt+Bt,Lt),nt.lineTo(-3*at+lt-Bt,at+Rt+Bt,Lt),nt.closePath(),!0}(nt,this.parseSize(at)/6,lt,Rt,Bt,Lt)}}])}(pf),_f=new mf;function dp(nt,at,lt,Rt,Bt){return nt.moveTo(lt,Rt-at,Bt),nt.lineTo(at+lt,Rt,Bt),nt.lineTo(lt,Rt+at,Bt),nt.lineTo(lt-at,Rt,Bt),nt.closePath(),!0}var xf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="diamond",nt.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return dp(nt,this.parseSize(at)/2,lt,Rt,Bt)}},{"key":"drawFitDir","value":function(nt,at,lt,Rt,Bt){return dp(nt,this.parseSize(at)/2,lt,Rt,Bt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return dp(nt,this.parseSize(at)/2+Bt,lt,Rt,Lt)}}])}(pf),kf=new xf;function vp(nt,at,lt,Rt){var Bt=2*at;return nt.rect(lt-at,Rt-at,Bt,Bt),!1}var Af=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="square",nt.pathStr="M-0.5,-0.5h1v1h-1Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return vp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return vp(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),wf=new Af;function mp(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return nt.moveTo(lt+at+2*Bt,at+Rt+Bt),nt.lineTo(lt-at-2*Bt,at+Rt+Bt),nt.lineTo(lt,Rt-at-2*Bt),nt.closePath(),!0}var Cf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="triangleUp",nt.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return mp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return mp(nt,this.parseSize(at)/2,lt,Rt,Bt)}}])}(pf),Ef=new Cf,Pf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="triangle",nt}return h(e,nt),o(e)}(Cf),Rf=new Pf,If=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),Bf=Math.sin(he/10)*If,Lf=-Math.cos(he/10)*If;function Mp(nt,at,lt,Rt){var Bt=Bf*at,Lt=Lf*at;nt.moveTo(lt,-at+Rt),nt.lineTo(Bt+lt,Lt+Rt);for(var Ht=1;Ht<5;++Ht){var jt=he*Ht/5,$t=Math.cos(jt),Kt=Math.sin(jt);nt.lineTo(Kt*at+lt,-$t*at+Rt),nt.lineTo($t*Bt-Kt*Lt+lt,Kt*Bt+$t*Lt+Rt)}return nt.closePath(),!0}var Ff=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="star",nt.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Mp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Mp(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),zf=new Ff,Gf=je(3);function Pp(nt,at,lt,Rt){var Bt=at,Lt=Bt/Gf,Ht=Lt/5,jt=at;return nt.moveTo(0+lt,-Bt+Rt),nt.lineTo(Lt/2+lt,Rt),nt.lineTo(Ht/2+lt,Rt),nt.lineTo(Ht/2+lt,jt+Rt),nt.lineTo(-Ht/2+lt,jt+Rt),nt.lineTo(-Ht/2+lt,Rt),nt.lineTo(-Lt/2+lt,Rt),nt.closePath(),!0}var Yf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="arrow",nt.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Pp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Pp(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),Xf=new Yf;function Ip(nt,at,lt,Rt){var Bt=2*at;return nt.moveTo(lt,-at+Rt),nt.lineTo(Bt/3/2+lt,at+Rt),nt.lineTo(-Bt/3/2+lt,at+Rt),nt.closePath(),!0}var $f=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="wedge",nt.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Ip(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Ip(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),qf=new $f;function Op(nt,at,lt,Rt){return nt.moveTo(-at+lt,Rt),nt.lineTo(lt,at+Rt),!1}var Zf=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="stroke",nt.pathStr="",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Op(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Op(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),Qf=new Zf,np=-.5,rp=je(3)/2,op=1/je(12);function Vp(nt,at,lt,Rt){var Bt=at/2,Lt=at*op,Ht=Bt,jt=at*op+at,$t=-Ht,Kt=jt;return nt.moveTo(Bt+lt,Lt+Rt),nt.lineTo(Ht+lt,jt+Rt),nt.lineTo($t+lt,Kt+Rt),nt.lineTo(np*Bt-rp*Lt+lt,rp*Bt+np*Lt+Rt),nt.lineTo(np*Ht-rp*jt+lt,rp*Ht+np*jt+Rt),nt.lineTo(np*$t-rp*Kt+lt,rp*$t+np*Kt+Rt),nt.lineTo(np*Bt+rp*Lt+lt,np*Lt-rp*Bt+Rt),nt.lineTo(np*Ht+rp*jt+lt,np*jt-rp*Ht+Rt),nt.lineTo(np*$t+rp*Kt+lt,np*Kt-rp*$t+Rt),nt.closePath(),!1}var lp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="wye",nt.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Vp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Vp(nt,this.parseSize(at)/2+Bt,lt,Rt)}}])}(pf),up=new lp;function Up(nt,at,lt,Rt,Bt){return nt.moveTo(-at+lt-2*Bt,Rt),nt.lineTo(at+lt+Bt,at+Rt+2*Bt),nt.lineTo(at+lt+Bt,Rt-at-2*Bt),nt.closePath(),!0}var cp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="triangleLeft",nt.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Up(nt,this.parseSize(at)/2,lt,Rt,0)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Up(nt,this.parseSize(at)/2,lt,Rt,Bt)}}])}(pf),hp=new cp;function Kp(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return nt.moveTo(lt-at-Bt,at+Rt+2*Bt),nt.lineTo(at+lt+2*Bt,Rt),nt.lineTo(lt-at-Bt,Rt-at-2*Bt),nt.closePath(),!0}var fp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="triangleRight",nt.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Kp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Kp(nt,this.parseSize(at)/2,lt,Rt,Bt)}}])}(pf),pp=new fp;function Jp(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return nt.moveTo(lt-at-2*Bt,Rt-at-Bt),nt.lineTo(lt+at+2*Bt,Rt-at-Bt),nt.lineTo(lt,Rt+at+2*Bt),nt.closePath(),!0}var gp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="triangleDown",nt.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Jp(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Jp(nt,this.parseSize(at)/2,lt,Rt,Bt)}}])}(pf),yp=new gp,_p=je(3);function ef(nt,at,lt,Rt){var Bt=at*_p;return nt.moveTo(lt,Rt+-Bt/3*2),nt.lineTo(at+lt,Rt+Bt),nt.lineTo(lt-at,Rt+Bt),nt.closePath(),!0}var bp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="thinTriangle",nt.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return ef(nt,this.parseSize(at)/2/_p,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return ef(nt,this.parseSize(at)/2/_p+Bt,lt,Rt)}}])}(pf),xp=new bp;function af(nt,at,lt,Rt){var Bt=2*at;return nt.moveTo(at+lt,Rt-Bt),nt.lineTo(lt-at,Rt),nt.lineTo(at+lt,Bt+Rt),!0}var kp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="arrow2Left",nt.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return af(nt,this.parseSize(at)/4,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return af(nt,this.parseSize(at)/4+Bt,lt,Rt)}}])}(pf),Sp=new kp;function lf(nt,at,lt,Rt){var Bt=2*at;return nt.moveTo(lt-at,Rt-Bt),nt.lineTo(lt+at,Rt),nt.lineTo(lt-at,Bt+Rt),!0}var Ap=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="arrow2Right",nt.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return lf(nt,this.parseSize(at)/4,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return lf(nt,this.parseSize(at)/4+Bt,lt,Rt)}}])}(pf),wp=new Ap;function hf(nt,at,lt,Rt){var Bt=2*at;return nt.moveTo(lt-Bt,Rt+at),nt.lineTo(lt,Rt-at),nt.lineTo(lt+Bt,Rt+at),!0}var Cp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="arrow2Up",nt.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return hf(nt,this.parseSize(at)/4,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return hf(nt,this.parseSize(at)/4+Bt,lt,Rt)}}])}(pf),Tp=new Cp;function ff(nt,at,lt,Rt){var Bt=2*at;return nt.moveTo(lt-Bt,Rt-at),nt.lineTo(lt,Rt+at),nt.lineTo(lt+Bt,Rt-at),!0}var Ep=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="arrow2Down",nt.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return ff(nt,this.parseSize(at)/4,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return ff(nt,this.parseSize(at)/4+Bt,lt,Rt)}}])}(pf),Rp=new Ep;function yf(nt,at,lt,Rt,Bt){return nt.moveTo(lt,Rt-at),nt.lineTo(lt,Rt+at),!0}var Bp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="lineV",nt.pathStr="M0,-0.5L0,0.5",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return yf(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return yf(nt,this.parseSize(at)/2+Bt,lt,Rt)}},{"key":"drawToSvgPath","value":function(nt,at,lt,Rt){var Bt=this.parseSize(nt)/2;return"M ".concat(at,", ").concat(lt-Bt," L ").concat(at,",").concat(lt+Bt)}}])}(pf),Dp=new Bp;function bf(nt,at,lt,Rt,Bt){return nt.moveTo(lt-at,Rt),nt.lineTo(lt+at,Rt),!0}var Lp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="lineH",nt.pathStr="M-0.5,0L0.5,0",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return bf(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return bf(nt,this.parseSize(at)/2+Bt,lt,Rt)}},{"key":"drawToSvgPath","value":function(nt,at,lt,Rt){var Bt=this.parseSize(nt)/2;return"M ".concat(at-Bt,", ").concat(lt," L ").concat(at+Bt,",").concat(lt)}}])}(pf),Fp=new Lp;function Sf(nt,at,lt,Rt,Bt){return nt.moveTo(lt-at,Rt-at),nt.lineTo(lt+at,Rt+at),nt.moveTo(lt+at,Rt-at),nt.lineTo(lt-at,Rt+at),!0}var zp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="close",nt.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt,Bt){return Sf(nt,this.parseSize(at)/2,lt,Rt)}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt){return Sf(nt,this.parseSize(at)/2+Bt,lt,Rt)}},{"key":"drawToSvgPath","value":function(nt,at,lt,Rt){var Bt=this.parseSize(nt)/2;return"M ".concat(at-Bt,", ").concat(lt-Bt," L ").concat(at+Bt,",").concat(lt+Bt," M ").concat(at+Bt,", ").concat(lt-Bt," L ").concat(at-Bt,",").concat(lt+Bt)}}])}(pf),Hp=new zp;function Mf(nt,at,lt,Rt){return nt.rect(lt-at[0]/2,Rt-at[1]/2,at[0],at[1]),!1}function Tf(nt,at,lt,Rt){var Bt=at,Lt=at/2;return nt.rect(lt-Bt/2,Rt-Lt/2,Bt,Lt),!1}var jp=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="rect",nt.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z",nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){return Z(at)?Tf(nt,at,lt,Rt):Mf(nt,at,lt,Rt)}},{"key":"drawWithClipRange","value":function(nt,at,lt,Rt,Bt,Lt,Ht){Z(at)&&(at=[at,at/2]);var jt=2*(at[0]+at[1])*Bt,$t=[{"x":lt+at[0]/2,"y":Rt-at[1]/2},{"x":lt+at[0]/2,"y":Rt+at[1]/2},{"x":lt-at[0]/2,"y":Rt+at[1]/2},{"x":lt-at[0]/2,"y":Rt-at[1]/2}],Kt=0,te=$t[3];nt.moveTo(te.x,te.y);for(var ne=0;ne<$t.length;ne++){var re=$t[ne],ae=Math.sqrt((re.x-te.x)*(re.x-te.x)+(re.y-te.y)*(re.y-te.y));if(Kt+ae>jt){var oe=(re.x-te.x)*(jt-Kt)/ae,se=(re.y-te.y)*(jt-Kt)/ae;nt.lineTo(te.x+oe,te.y+se);break}nt.lineTo(re.x,re.y),te=re,Kt+=ae}return!1}},{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt){return Z(at)?Tf(nt,at+2*Bt,lt,Rt):Mf(nt,[at[0]+2*Bt,at[1]+2*Bt],lt,Rt)}}])}(pf),Np=new jp,Wp=new _i,Gp=o((function t(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,t),this.pathStr="",this.type=nt,X(at)?this.svgCache=at:this.path=at,this.isSvg=lt}),[{"key":"drawOffset","value":function(nt,at,lt,Rt,Bt,Lt,Ht){return at=this.parseSize(at),this.isSvg?!!this.svgCache&&(this.svgCache.forEach((function(Bt){nt.beginPath(),jl(Bt.path.commandList,nt,lt,Rt,at,at),Ht&&Ht(Bt.path,Bt.attribute)})),!1):(jl(this.path.commandList,nt,lt,Rt,at+Bt,at+Bt),!1)}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt){return at=this.parseSize(at),this.drawOffset(nt,at,lt,Rt,0,Bt,Lt)}},{"key":"parseSize","value":function(nt){return Z(nt)?nt:Math.min(nt[0],nt[1])}},{"key":"drawWithClipRange","value":function(nt,at,lt,Rt,Bt,Lt,Ht){return at=this.parseSize(at),this.isSvg?!!this.svgCache&&(this.svgCache.forEach((function(Lt){Lt.path.drawWithClipRange(nt,at,lt,Rt,Bt),Ht&&Ht(Lt.path,Lt.attribute)})),!1):(this.path.drawWithClipRange(nt,at,lt,Rt,Bt),!1)}},{"key":"bounds","value":function(nt,at){if(nt=this.parseSize(nt),this.isSvg){if(!this.svgCache)return;return at.clear(),void this.svgCache.forEach((function(lt){var Rt=lt.path;Wp.x1=Rt.bounds.x1*nt,Wp.y1=Rt.bounds.y1*nt,Wp.x2=Rt.bounds.x2*nt,Wp.y2=Rt.bounds.y2*nt,at.union(Wp)}))}this.path.bounds&&(at.x1=this.path.bounds.x1*nt,at.y1=this.path.bounds.y1*nt,at.x2=this.path.bounds.x2*nt,at.y2=this.path.bounds.y2*nt)}}]),Yp={};[gf,_f,kf,wf,xp,Rf,zf,Xf,qf,Qf,up,hp,pp,Ef,yp,Sp,wp,Tp,Rp,Np,Dp,Fp,Hp].forEach((function(nt){Yp[nt.type]=nt}));var Xp={"arrowLeft":"M 0.25 -0.5 L -0.25 0 l 0.5 0.5","arrowRight":"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5","rectRound":"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z","roundLine":"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},$p=o((function t(nt){r(this,t),this.tagname=nt,this.child=[],this[":@"]={}}),[{"key":"add","value":function(nt,at){"__proto__"===nt&&(nt="#__proto__"),this.child.push(l({},nt,at))}},{"key":"addChild","value":function(nt){"__proto__"===nt.tagname&&(nt.tagname="#__proto__"),nt[":@"]&&Object.keys(nt[":@"]).length>0?this.child.push(l(l({},nt.tagname,nt.child),":@",nt[":@"])):this.child.push(l({},nt.tagname,nt.child))}}]);function Df(nt,at,lt,Rt){var Bt=nt.indexOf(at,lt);if(-1===Bt)throw new Error(Rt);return Bt+at.length-1}function Of(nt,at,lt){var Rt=function(nt,at){for(var lt,Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",Bt="",Lt=at;Lt<nt.length;Lt++){var Ht=nt[Lt];if(lt)Ht===lt&&(lt="");else if('"'===Ht||"'"===Ht)lt=Ht;else if(Ht===Rt[0]){if(!Rt[1])return{"data":Bt,"index":Lt};if(nt[Lt+1]===Rt[1])return{"data":Bt,"index":Lt}}else"\t"===Ht&&(Ht=" ");Bt+=Ht}}(nt,at+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(Rt){var Bt=Rt.data,Lt=Rt.index,Ht=Bt.search(/\s/),jt=Bt,$t=!0;-1!==Ht&&(jt=Bt.substr(0,Ht).replace(/\s\s*$/,""),Bt=Bt.substr(Ht+1));var Kt=jt;if(lt){var te=jt.indexOf(":");-1!==te&&($t=(jt=jt.substr(te+1))!==Rt.data.substr(te+1))}return{"tagName":jt,"tagExp":Bt,"closeIndex":Lt,"attrExpPresent":$t,"rawTagName":Kt}}}var qp=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm"),Zp=o((function t(nt){r(this,t),this.currentNode=null,this.options=nt,this.tagsNodeStack=[],this.docTypeEntities={}}),[{"key":"addChild","value":function(nt,at,lt){var Rt=at.tagname;"string"==typeof Rt?(at.tagname=Rt,nt.addChild(at)):nt.addChild(at)}},{"key":"buildAttributesMap","value":function(nt,at,lt){var Rt={};if(nt){for(var Bt=function(nt,at){for(var lt=[],Rt=at.exec(nt);Rt;){var Bt=[];Bt.startIndex=at.lastIndex-Rt[0].length;for(var Lt=Rt.length,Ht=0;Ht<Lt;Ht++)Bt.push(Rt[Ht]);lt.push(Bt),Rt=at.exec(nt)}return lt}(nt,qp),Lt=Bt.length,Ht=0;Ht<Lt;Ht++){var jt=Bt[Ht][1],$t=Bt[Ht][4];jt&&(Rt[jt]=void 0===$t||(isNaN($t)?$t:Number($t)))}return Rt}}},{"key":"parseXml","value":function(nt){nt=nt.replace(/\r\n?/g,"\n");for(var at=new $p("!xml"),lt=at,Rt="",Bt="",Lt=0;Lt<nt.length;Lt++)if("<"===nt[Lt])if("/"===nt[Lt+1]){var Ht=Df(nt,">",Lt,"Closing Tag is not closed."),jt=Bt.lastIndexOf(".");Bt=Bt.substring(0,jt),(lt=this.tagsNodeStack.pop())&&lt.child&&Rt&&lt.child[lt.child.length-1][":@"]&&(lt.child[lt.child.length-1][":@"].text=Rt),Rt="",Lt=Ht}else if("?"===nt[Lt+1])Lt=Of(nt,Lt,!1,"?>").closeIndex+1;else if("!--"===nt.substr(Lt+1,3))Lt=Df(nt,"--\x3e",Lt+4,"Comment is not closed.");else{var $t=Of(nt,Lt,!1),Kt=$t.tagName,te=$t.tagExp,ne=$t.attrExpPresent,re=$t.closeIndex;if(Kt!==at.tagname&&(Bt+=Bt?"."+Kt:Kt),te.length>0&&te.lastIndexOf("/")===te.length-1){"/"===Kt[Kt.length-1]?(Kt=Kt.substr(0,Kt.length-1),Bt=Bt.substr(0,Bt.length-1),te=Kt):te=te.substr(0,te.length-1);var ae=new $p(Kt);Kt!==te&&ne&&(ae[":@"]=this.buildAttributesMap(te,Bt,Kt)),this.addChild(lt,ae,Bt),Bt=Bt.substr(0,Bt.lastIndexOf("."))}else{var oe=new $p(Kt);this.tagsNodeStack.push(lt),Kt!==te&&ne&&(oe[":@"]=this.buildAttributesMap(te,Bt,Kt)),this.addChild(lt,oe,Bt),lt=oe}Rt="",Lt=re}else Rt+=nt[Lt];return at.child}}]);function Hf(nt,at){return jf(nt)}function jf(nt,at){for(var lt,Rt={},Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt],Ht=Nf(Lt);if(void 0!==Ht&&Lt[Ht]){var jt=jf(Lt[Ht]);lt=jt,Object.keys(lt).length,Lt[":@"]&&Vf(jt,Lt[":@"]),void 0!==Rt[Ht]&&Rt.hasOwnProperty(Ht)?(Array.isArray(Rt[Ht])||(Rt[Ht]=[Rt[Ht]]),Rt[Ht].push(jt)):Rt[Ht]=jt}}return Rt}function Nf(nt){for(var at=Object.keys(nt),lt=0;lt<at.length;lt++){var Rt=at[lt];if(":@"!==Rt)return Rt}}function Vf(nt,at,lt){if(at)for(var Rt=Object.keys(at),Bt=Rt.length,Lt=0;Lt<Bt;Lt++){var Ht=Rt[Lt];nt[Ht]=at[Ht]}}var Qp=o((function t(nt){r(this,t),this.options=Object.assign({},t.defaultOptions,nt)}),[{"key":"valid","value":function(nt){return nt.startsWith("<")}},{"key":"parse","value":function(nt){return!!this.valid&&Hf(new Zp(this.options).parseXml(nt),this.options)}}]);Qp.defaultOptions={};var Wf=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))};function Uf(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return nt.expand(at+(Rt/2+(lt?function(nt,at){return nt?at:0}(lt,at):0))),nt}var tv,ev=0;function Kf(){return ev++}!function(nt){nt[nt.HORIZONTAL=0]="HORIZONTAL",nt[nt.VERTICAL=1]="VERTICAL"}(tv||(tv={}));var iv=new Map;["","","","","","","","","",""].forEach((function(nt){return iv.set(nt,!0)}));var nv=new Map;function Jf(nt){if(iv.has(nt))return!0;if(nv.has(nt))return!1;var at=!1;return nt.codePointAt(0)<256&&(at=!0),at}[""].forEach((function(nt){return nv.set(nt,!0)}));var rv,av=Kf(),ov=Kf(),sv=Kf(),lv=Kf(),uv=Kf(),cv=Kf(),hv=Kf(),dv=Kf(),fv=Kf(),pv=Kf(),vv=Kf(),gv=Kf(),yv=Kf(),mv=Kf(),_v=Kf(),bv=Kf(),xv=Symbol.for("GraphicService"),kv=Symbol.for("GraphicCreator"),Sv={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke":"stroke","fill":"fill"},Av=Object.keys(Sv),wv=new _i,Cv=new Mi,Mv=new _i,Tv=["lineWidth","scaleX","scaleY","angle","anchor","visible"],Ev=["x","y"],Rv=["scaleX","scaleY"],Iv=["angle"],Bv=new Ve,Ov={"strokeSeg":1,"boundsPadding":2,"pickMode":1,"boundsMode":1,"customPickShape":1,"pickable":1,"childrenPickable":1,"visible":1,"zIndex":1,"layout":1,"keepDirIn3d":1,"globalZIndex":1,"outerBorder":1,"innerBorder":1,"lineDash":1,"lineCap":1,"lineJoin":1,"miterLimit":2,"strokeBoundsBuffer":2,"scaleCenter":1,"anchor":1,"anchor3d":1,"postMatrix":1,"backgroundMode":2,"background":1,"texture":1,"cursor":1,"html":1},Dv=function(nt){function e(){var nt,at,lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(nt=n(this,e))._AABBBounds=new _i,nt._updateTag=Cl.INIT,nt.attribute=lt,nt.valid=nt.isValid(),nt.updateAABBBoundsStamp=0,lt.background?nt.loadImage(null!==(at=lt.background.background)&&void 0!==at?at:lt.background,!0):lt.shadowGraphic&&nt.setShadowGraphic(lt.shadowGraphic),nt}return h(e,nt),o(e,[{"key":"AABBBounds","get":function(){return this.tryUpdateAABBBounds()}},{"key":"OBBBounds","get":function(){return this.tryUpdateOBBBounds()}},{"key":"globalAABBBounds","get":function(){return this.tryUpdateGlobalAABBBounds()}},{"key":"transMatrix","get":function(){return this.tryUpdateLocalTransMatrix(!0)}},{"key":"globalTransMatrix","get":function(){return this.tryUpdateGlobalTransMatrix(!0)}},{"key":"setMode","value":function(nt){"3d"===nt?this.set3dMode():this.set2dMode()}},{"key":"set3dMode","value":function(){this.in3dMode=!0}},{"key":"set2dMode","value":function(){this.in3dMode=!1}},{"key":"getOffsetXY","value":function(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Bt=this.attribute,Lt=Bt.dx,Ht=void 0===Lt?nt.dx:Lt,jt=Bt.dy,$t=void 0===jt?nt.dy:jt;if(Rt&&this.parent){var Kt=this.parent.attribute;Bv.x=Ht+(null!==(at=Kt.scrollX)&&void 0!==at?at:0),Bv.y=$t+(null!==(lt=Kt.scrollY)&&void 0!==lt?lt:0)}else Bv.x=Ht,Bv.y=$t;return Bv}},{"key":"onAnimateBind","value":function(nt){this._emitCustomEvent("animate-bind",nt)}},{"key":"tryUpdateAABBBounds","value":function(){var nt="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;oc.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);var at=this.doUpdateAABBBounds(nt);return oc.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&at.clear(),at}},{"key":"tryUpdateOBBBounds","value":function(){return this._OBBBounds||(this._OBBBounds=new bi),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds))}},{"key":"combindShadowAABBBounds","value":function(nt){if(this.shadowRoot){var at=this.shadowRoot.AABBBounds.clone();nt.union(at)}}},{"key":"doUpdateOBBBounds","value":function(){return this._OBBBounds}},{"key":"getClipPath","value":function(){var nt=this.attribute.clipConfig;if(!nt)return null;this.clipPathMap||(this.clipPathMap=new Map);var at=nt.shape,lt=this.clipPathMap.get(at)||null;return lt||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(lt=this.parsePath(at))&&this.clipPathMap.set(at,lt)),lt}},{"key":"parsePath","value":function(nt){if(!nt)return null;var at,lt=Yp[nt];if(lt)return lt;if(lt=e.userSymbolMap[nt])return lt;if(!0===((at=nt=Xp[nt]||nt).startsWith("<svg")||at.startsWith("<?xml"))){var Rt=(new Qp).parse(nt).svg;if(!Rt)return null;var Bt=X(Rt.path)?Rt.path:[Rt.path];wv.clear();var Lt=[];Bt.forEach((function(nt){var at=(new Ou).fromString(nt.d),lt={};Av.forEach((function(at){nt[at]&&(lt[Sv[at]]=nt[at])})),Lt.push({"path":at,"attribute":lt}),wv.union(at.bounds)}));var Ht=wv.width(),jt=wv.height(),$t=1/Ae(Ht,jt);Lt.forEach((function(nt){return nt.path.transform(0,0,$t,$t)}));var Kt=new Gp(nt,Lt,!0);return e.userSymbolMap[nt]=Kt,Kt}var te=(new Ou).fromString(nt),ne=te.bounds.width(),re=te.bounds.height(),ae=1/Ae(ne,re);te.transform(0,0,ae,ae);var oe=new Gp(nt,te);return e.userSymbolMap[nt]=oe,oe}},{"key":"doUpdateAABBBounds","value":function(nt){this.updateAABBBoundsStamp++;var at=this.getGraphicTheme();this._AABBBounds.clear();var lt=this.attribute,Rt=this.updateAABBBounds(lt,at,this._AABBBounds,nt),Bt=lt.boundsPadding,Lt=void 0===Bt?at.boundsPadding:Bt,Ht=td(Lt);return Ht&&Rt.expand(Ht),this.clearUpdateBoundTag(),Rt}},{"key":"updatePathProxyAABBBounds","value":function(nt){var at="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!at)return!1;var lt=new Hl(nt);return jl(at.commandList,lt,0,0),!0}},{"key":"tryUpdateGlobalAABBBounds","value":function(){var nt=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(nt.x1,nt.y1,nt.x2,nt.y2):this._globalAABBBounds=nt.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}},{"key":"tryUpdateGlobalTransMatrix","value":function(){if(this._globalTransMatrix){if(this.parent){var nt=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}},{"key":"shouldUpdateGlobalMatrix","value":function(){return!0}},{"key":"tryUpdateLocalTransMatrix","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._transMatrix||(this._transMatrix=new Mi),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),nt&&this.clearUpdateLocalPositionTag()),this._transMatrix}},{"key":"shouldUpdateAABBBounds","value":function(){return this.shadowRoot?(!!(this._updateTag&Cl.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&oc.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&Cl.UPDATE_BOUNDS)&&oc.graphicService.validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}},{"key":"shouldSelfChangeUpdateAABBBounds","value":function(){return this.shadowRoot?!!(this._updateTag&Cl.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&Cl.UPDATE_BOUNDS)}},{"key":"shouldUpdateLocalMatrix","value":function(){return!!(this._updateTag&Cl.UPDATE_LOCAL_MATRIX)}},{"key":"isValid","value":function(){var nt,at,lt=this.attribute;return Number.isFinite((null!==(nt=lt.x)&&void 0!==nt?nt:0)+(null!==(at=lt.y)&&void 0!==at?at:0))}},{"key":"_validNumber","value":function(nt){return null==nt||Number.isFinite(nt)}},{"key":"shouldUpdateShape","value":function(){return!!(this._updateTag&Cl.UPDATE_SHAPE)}},{"key":"clearUpdateShapeTag","value":function(){this._updateTag&=Cl.CLEAR_SHAPE}},{"key":"containsPoint","value":function(nt,at,lt,Rt){if(!Rt)return!1;if(lt===Ml.GLOBAL){var Bt=new Ve(nt,at);this.parent&&this.parent.globalTransMatrix.transformPoint(Bt,Bt),nt=Bt.x,at=Bt.y}return Rt.containsPoint(this,{"x":nt,"y":at})}},{"key":"setAttributes","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=arguments.length>2?arguments[2]:void 0;(nt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(nt,this.attribute,null,lt)||nt).background?this.loadImage(nt.background,!0):nt.shadowGraphic&&this.setShadowGraphic(nt.shadowGraphic),this._setAttributes(nt,at,lt)}},{"key":"_setAttributes","value":function(nt){for(var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=arguments.length>2?arguments[2]:void 0,Rt=Object.keys(nt),Bt=0;Bt<Rt.length;Bt++){var Lt=Rt[Bt];this.attribute[Lt]=nt[Lt]}this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!at&&!this.needUpdateTags(Rt)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(lt)}},{"key":"setAttribute","value":function(nt,at,lt,Rt){var Bt,Lt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(l({},nt,at),this.attribute,nt,Rt);Lt?this._setAttributes(Lt,lt,Rt):j(null===(Bt=this.normalAttrs)||void 0===Bt?void 0:Bt[nt])?(this.attribute[nt]=at,this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!lt&&!this.needUpdateTag(nt)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Rt)):this.normalAttrs[nt]=at,"background"===nt?this.loadImage(at,!0):"shadowGraphic"===nt&&this.setShadowGraphic(at)}},{"key":"needUpdateTags","value":function(nt){for(var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tv,lt=0;lt<at.length;lt++){var Rt=at[lt];if(-1!==nt.indexOf(Rt))return!0}return!1}},{"key":"needUpdateTag","value":function(nt){for(var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tv,lt=0;lt<at.length;lt++)if(nt===at[lt])return!0;return!1}},{"key":"initAttributes","value":function(nt){var at={"type":Tl.INIT};nt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(nt,this.attribute,null,at)||nt,this.attribute=nt,nt.background?this.loadImage(nt.background,!0):nt.shadowGraphic&&this.setShadowGraphic(nt.shadowGraphic),this._updateTag=Cl.INIT,this.valid=this.isValid(),this.onAttributeUpdate(at)}},{"key":"translate","value":function(nt,at){var lt,Rt;if(0===nt&&0===at)return this;var Bt={"type":Tl.TRANSLATE},Lt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({"x":nt,"y":at},this.attribute,Ev,Bt);Lt&&(nt=Lt.x,at=Lt.y,delete Lt.x,delete Lt.y,this._setAttributes(Lt));var Ht=this.attribute,jt=Ht.postMatrix;return jt?oc.transformUtil.fromMatrix(jt,jt).translate(nt,at):(Ht.x=(null!==(lt=Ht.x)&&void 0!==lt?lt:Lu.x)+nt,Ht.y=(null!==(Rt=Ht.y)&&void 0!==Rt?Rt:Lu.y)+at),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Bt),this}},{"key":"translateTo","value":function(nt,at){var lt=this.attribute;if(lt.x===nt&&lt.y===at)return this;var Rt={"type":Tl.TRANSLATE_TO},Bt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({"x":nt,"y":at},this.attribute,Ev,Rt);return Bt?(this._setAttributes(Bt,!1,Rt),this):(lt.x=nt,lt.y=at,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Rt),this)}},{"key":"scale","value":function(nt,at,lt){var Rt,Bt;if(1===nt&&1===at)return this;var Lt={"type":Tl.SCALE},Ht=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({"scaleX":nt,"scaleY":at,"scaleCenter":lt},this.attribute,Rv,Lt);Ht&&(nt=Ht.scaleX,at=Ht.scaleY,delete Ht.scaleX,delete Ht.scaleY,this._setAttributes(Ht));var jt=this.attribute;if(lt){var $t=this.attribute.postMatrix;$t||($t=new Mi,jt.postMatrix=$t),oc.transformUtil.fromMatrix($t,$t).scale(nt,at,lt)}else jt.scaleX=(null!==(Rt=jt.scaleX)&&void 0!==Rt?Rt:Lu.scaleX)*nt,jt.scaleY=(null!==(Bt=jt.scaleY)&&void 0!==Bt?Bt:Lu.scaleY)*at;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Lt),this}},{"key":"scaleTo","value":function(nt,at){var lt=this.attribute;if(lt.scaleX===nt&&lt.scaleY===at)return this;var Rt={"type":Tl.SCALE_TO},Bt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({"scaleX":nt,"scaleY":at},this.attribute,Rv,Rt);return Bt?(this._setAttributes(Bt,!1,Rt),this):(lt.scaleX=nt,lt.scaleY=at,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Rt),this)}},{"key":"rotate","value":function(nt,at){var lt;if(0===nt)return this;var Rt={"type":Tl.ROTATE},Bt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({"angle":nt,"rotateCenter":at},this.attribute,Iv,Rt);Bt&&(delete Bt.angle,this._setAttributes(Bt,!1,Rt));var Lt=this.attribute;if(at){var Ht=this.attribute.postMatrix;Ht||(Ht=new Mi,Lt.postMatrix=Ht),oc.transformUtil.fromMatrix(Ht,Ht).rotate(nt,at)}else Lt.angle=(null!==(lt=Lt.angle)&&void 0!==lt?lt:Lu.angle)+nt;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(Rt),this}},{"key":"rotateTo","value":function(nt){var at=this.attribute;if(at.angle===nt)return this;var lt={"type":Tl.ROTATE_TO},Rt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(nt,this.attribute,Iv,lt);return Rt?(this._setAttributes(Rt,!1,lt),this):(at.angle=nt,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(lt),this)}},{"key":"skewTo","value":function(nt,at){return this}},{"key":"animate","value":function(nt){var at,lt=this;this.animates||(this.animates=new Map);var Rt=new qh(null==nt?void 0:nt.id,null!==(at=null==nt?void 0:nt.timeline)&&void 0!==at?at:this.stage&&this.stage.getTimeline(),null==nt?void 0:nt.slience);if(Rt.bind(this),nt){var Bt=nt.onStart,Lt=nt.onFrame,Ht=nt.onEnd,jt=nt.onRemove;null!=Bt&&Rt.onStart(Bt),null!=Lt&&Rt.onFrame(Lt),null!=Ht&&Rt.onEnd(Ht),null!=jt&&Rt.onRemove(jt),Rt.interpolateFunc=nt.interpolate}return this.animates.set(Rt.id,Rt),Rt.onRemove((function(){Rt.stop(),lt.animates.delete(Rt.id)})),Rt}},{"key":"onAttributeUpdate","value":function(nt){nt&&nt.skipUpdateCallback||(oc.graphicService.onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",nt))}},{"key":"update","value":function(nt){nt?(nt.bounds&&this.tryUpdateAABBBounds(),nt.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}},{"key":"hasState","value":function(nt){return!(!this.currentStates||!this.currentStates.length)&&(!!j(nt)||this.currentStates.includes(nt))}},{"key":"getState","value":function(nt){var at;return null===(at=this.states)||void 0===at?void 0:at[nt]}},{"key":"applyStateAttrs","value":function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=this;if(lt){var Kt,te=Object.keys(nt),ne=this.getNoWorkAnimateAttr(),re={};te.forEach((function(at){ne[at]?(Kt||(Kt={}),Kt[at]=nt[at]):re[at]=Rt&&void 0===nt[at]?$t.getDefaultAttribute(at):nt[at]}));var ae=this.animate({"slience":!0});ae.stateNames=at,ae.to(re,null!==(Lt=null===(Bt=this.stateAnimateConfig)||void 0===Bt?void 0:Bt.duration)&&void 0!==Lt?Lt:Jh,null!==(jt=null===(Ht=this.stateAnimateConfig)||void 0===Ht?void 0:Ht.easing)&&void 0!==jt?jt:ed),Kt&&this.setAttributes(Kt,!1,{"type":Tl.STATE})}else this.stopStateAnimates(),this.setAttributes(nt,!1,{"type":Tl.STATE})}},{"key":"updateNormalAttrs","value":function(nt){var at=this,lt={};this.normalAttrs?(Object.keys(nt).forEach((function(nt){nt in at.normalAttrs?(lt[nt]=at.normalAttrs[nt],delete at.normalAttrs[nt]):lt[nt]=at.getNormalAttribute(nt)})),Object.keys(this.normalAttrs).forEach((function(lt){nt[lt]=at.normalAttrs[lt]}))):Object.keys(nt).forEach((function(nt){lt[nt]=at.getNormalAttribute(nt)})),this.normalAttrs=lt}},{"key":"stopStateAnimates","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"end";this.animates&&this.animates.forEach((function(lt){lt.stateNames&&(lt.stop(at),nt.animates.delete(lt.id))}))}},{"key":"getNormalAttribute","value":function(nt){var at=this.attribute[nt];return this.animates&&this.animates.forEach((function(lt){if(lt.stateNames){var Rt=lt.getEndProps();ut(Rt,nt)&&(at=Rt[nt])}})),at}},{"key":"clearStates","value":function(nt){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,nt,!0)):this.currentStates=[],this.normalAttrs=null}},{"key":"removeState","value":function(nt,at){if(this.currentStates){var lt=X(nt)?function(at){return!nt.includes(at)}:function(at){return at!==nt},Rt=this.currentStates.filter(lt);Rt.length!==this.currentStates.length&&this.useStates(Rt,at)}}},{"key":"toggleState","value":function(nt,at){if(this.hasState(nt))this.removeState(nt,at);else if((this.currentStates?this.currentStates.indexOf(nt):-1)<0){var lt=this.currentStates?this.currentStates.slice():[];lt.push(nt),this.useStates(lt,at)}}},{"key":"addState","value":function(nt,at,lt){var Rt;if(!this.currentStates||!this.currentStates.includes(nt)||!at&&1!==this.currentStates.length){var Bt=at&&(null===(Rt=this.currentStates)||void 0===Rt?void 0:Rt.length)?this.currentStates.concat([nt]):[nt];this.useStates(Bt,lt)}}},{"key":"useStates","value":function(nt,at){var lt,Rt=this;if(nt.length){if((null===(lt=this.currentStates)||void 0===lt?void 0:lt.length)!==nt.length||nt.some((function(nt,at){return Rt.currentStates[at]!==nt}))){var Bt={};nt.forEach((function(at){var lt,Lt=Rt.stateProxy?Rt.stateProxy(at,nt):null===(lt=Rt.states)||void 0===lt?void 0:lt[at];Lt&&Object.assign(Bt,Lt)})),this.updateNormalAttrs(Bt),this.currentStates=nt,this.applyStateAttrs(Bt,nt,at)}}else this.clearStates(at)}},{"key":"addUpdateBoundTag","value":function(){this._updateTag|=Cl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}},{"key":"addUpdateShapeTag","value":function(){this._updateTag|=Cl.UPDATE_SHAPE}},{"key":"addUpdateShapeAndBoundsTag","value":function(){this._updateTag|=Cl.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}},{"key":"updateShapeAndBoundsTagSetted","value":function(){return(this._updateTag&Cl.UPDATE_SHAPE_AND_BOUNDS)===Cl.UPDATE_SHAPE_AND_BOUNDS}},{"key":"clearUpdateBoundTag","value":function(){this._updateTag&=Cl.CLEAR_BOUNDS}},{"key":"addUpdatePositionTag","value":function(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=Cl.UPDATE_GLOBAL_LOCAL_MATRIX}},{"key":"addUpdateGlobalPositionTag","value":function(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=Cl.UPDATE_GLOBAL_MATRIX}},{"key":"clearUpdateLocalPositionTag","value":function(){this._updateTag&=Cl.CLEAR_LOCAL_MATRIX}},{"key":"clearUpdateGlobalPositionTag","value":function(){this._updateTag&=Cl.CLEAR_GLOBAL_MATRIX}},{"key":"addUpdateLayoutTag","value":function(){this._updateTag|=Cl.UPDATE_LAYOUT}},{"key":"clearUpdateLayoutTag","value":function(){this._updateTag&=Cl.CLEAR_LAYOUT}},{"key":"needUpdateLayout","value":function(){return!!(this._updateTag&Cl.UPDATE_LAYOUT)}},{"key":"getAnchor","value":function(nt,at){var lt=this,Rt=[0,0],r=function(){if(at.b)return at.b;var nt=lt.attribute,Rt=nt.scaleX,Bt=nt.scaleY,Lt=nt.angle;return Mv.copy(lt._AABBBounds),lt.setAttributes({"scaleX":1,"scaleY":1,"angle":0}),at.b=lt.AABBBounds.clone(),lt._AABBBounds.copy(Mv),lt.setAttributes({"scaleX":Rt,"scaleY":Bt,"angle":Lt}),at.b};if("string"==typeof nt[0]){var Bt=parseFloat(nt[0])/100,Lt=r();Rt[0]=Lt.x1+(Lt.x2-Lt.x1)*Bt}else Rt[0]=nt[0];if("string"==typeof nt[1]){var Ht=parseFloat(nt[1])/100,jt=r();Rt[1]=jt.y1+(jt.y2-jt.y1)*Ht}else Rt[1]=nt[1];return Rt}},{"key":"doUpdateLocalMatrix","value":function(){var nt=this.attribute,at=nt.x,lt=void 0===at?Lu.x:at,Rt=nt.y,Bt=void 0===Rt?Lu.y:Rt,Lt=nt.scaleX,Ht=void 0===Lt?Lu.scaleX:Lt,jt=nt.scaleY,$t=void 0===jt?Lu.scaleY:jt,Kt=nt.angle,te=void 0===Kt?Lu.angle:Kt,ne=nt.scaleCenter,re=nt.anchor,ae=nt.postMatrix,oe=[0,0],se={};if(re&&(oe=this.getAnchor(re,se)),!ne||1===Ht&&1===$t)!function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt,te=at.a,ne=at.b,re=at.c,ae=at.d,oe=at.e,se=at.f,le=ve(Ht),ue=Ce(Ht);jt?($t=jt[0],Kt=jt[1]):($t=lt,Kt=Rt);var ce=$t-lt,he=Kt-Rt,de=te*le+re*ue,fe=ne*le+ae*ue,pe=re*le-te*ue,Ae=ae*le-ne*ue;nt.a=Bt*de,nt.b=Bt*fe,nt.c=Lt*pe,nt.d=Lt*Ae,nt.e=oe+te*$t+re*Kt-de*ce-pe*he,nt.f=se+ne*$t+ae*Kt-fe*ce-Ae*he}(this._transMatrix,this._transMatrix.reset(),lt,Bt,Ht,$t,te,re&&oe);else{var le=this._transMatrix;le.reset(),le.translate(oe[0],oe[1]),le.rotate(te),le.translate(-oe[0],-oe[1]),le.translate(lt,Bt),oe=this.getAnchor(ne,se),oc.transformUtil.fromMatrix(le,le).scale(Ht,$t,{"x":oe[0],"y":oe[1]})}var ue=this.getOffsetXY(Lu);if(this._transMatrix.e+=ue.x,this._transMatrix.f+=ue.y,ae){var ce=Cv.setValue(ae.a,ae.b,ae.c,ae.d,ae.e,ae.f),he=this._transMatrix;ce.multiply(he.a,he.b,he.c,he.d,he.e,he.f),he.setValue(ce.a,ce.b,ce.c,ce.d,ce.e,ce.f)}}},{"key":"doUpdateGlobalMatrix","value":function(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);var nt=this.parent.attribute,at=nt.scrollX,lt=void 0===at?0:at,Rt=nt.scrollY,Bt=void 0===Rt?0:Rt;this._globalTransMatrix.translate(lt,Bt)}}},{"key":"setStage","value":function(nt,at){if(this.stage!==nt){if(this.stage=nt,this.layer=at,this.setStageToShadowRoot(nt,at),this.animates&&this.animates.size){var lt=nt.getTimeline();this.animates.forEach((function(nt){nt.timeline===Yh&&nt.setTimeline(lt)}))}this._onSetStage&&this._onSetStage(this,nt,at),oc.graphicService.onSetStage(this,nt)}}},{"key":"setStageToShadowRoot","value":function(nt,at){this.shadowRoot&&this.shadowRoot.setStage(nt,at)}},{"key":"onAddStep","value":function(nt){}},{"key":"onStop","value":function(nt){nt&&this.setAttributes(nt,!1,{"type":Tl.ANIMATE_END})}},{"key":"onStep","value":function(nt,at,lt,Rt,Bt){var Lt={};if(lt.customAnimate)lt.customAnimate.update(Bt,Rt,Lt);else{var Ht=lt.props,jt=lt.parsedProps,$t=lt.propKeys;this.stepInterpolate(nt,at,Lt,lt,Rt,Bt,Ht,void 0,jt,$t)}this.setAttributes(Lt,!1,{"type":Tl.ANIMATE_UPDATE,"animationState":{"ratio":Rt,"end":Bt,"step":lt,"isFirstFrameOfStep":nt.getLastStep()!==lt}}),this.stage&&this.stage.renderNextFrame()}},{"key":"stepInterpolate","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt){var te=this;Kt||(Kt=Object.keys(Ht),Rt.propKeys=Kt),Lt?Rt.propKeys.forEach((function(nt){at.validAttr(nt)&&(lt[nt]=Ht[nt])})):Kt.forEach((function(Lt){var Kt;if(at.validAttr(Lt)){var ne=Ht[Lt],re=null!==(Kt=jt&&jt[Lt])&&void 0!==Kt?Kt:nt.getLastPropByName(Lt,Rt);null!=ne&&null!=re&&ne!==re?at.interpolateFunc&&at.interpolateFunc(Lt,Bt,re,ne,lt)||at.customInterpolate(Lt,Bt,re,ne,te,lt)||te.defaultInterpolate(ne,re,Lt,lt,$t,Bt)||te._interpolate(Lt,Bt,re,ne,lt):lt[Lt]=ne}})),Rt.parsedProps=$t}},{"key":"defaultInterpolate","value":function(nt,at,lt,Rt,Bt,Lt){if(Number.isFinite(nt)&&Number.isFinite(at))return Rt[lt]=at+(nt-at)*Lt,!0;if("fill"===lt){Bt||(Bt={});var Ht=Bt.fillColorArray,jt=Hd(at,null!=Ht?Ht:nt,Lt,!1,(function(nt,at){Bt.fillColorArray=at}));return jt&&(Rt[lt]=jt),!0}if("stroke"===lt){Bt||(Bt={});var $t=Bt.strokeColorArray,Kt=Hd(at,null!=$t?$t:nt,Lt,!1,(function(nt,at){Bt.strokeColorArray=at}));return Kt&&(Rt[lt]=Kt),!0}if("shadowColor"===lt){Bt||(Bt={});var te=Bt.shadowColorArray,ne=Hd(at,null!=te?te:nt,Lt,!0,(function(nt,at){Bt.shadowColorArray=at}));return ne&&(Rt[lt]=ne),!0}if(Array.isArray(nt)&&nt.length===at.length){for(var re=[],ae=!0,oe=0;oe<nt.length;oe++){var se=at[oe],le=se+(nt[oe]-se)*Lt;if(!Number.isFinite(le)){ae=!1;break}re.push(le)}ae&&(Rt[lt]=re)}return!1}},{"key":"_interpolate","value":function(nt,at,lt,Rt,Bt){}},{"key":"getDefaultAttribute","value":function(nt){return this.getGraphicTheme()[nt]}},{"key":"getComputedAttribute","value":function(nt){var at;return null!==(at=this.attribute[nt])&&void 0!==at?at:this.getDefaultAttribute(nt)}},{"key":"onSetStage","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._onSetStage=nt,at&&this.stage&&nt(this,this.stage)}},{"key":"attachShadow","value":function(nt){return nt&&(nt.shadowHost=this),this.shadowRoot=null!=nt?nt:oc.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}},{"key":"detachShadow","value":function(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}},{"key":"toJson","value":function(){return{"attribute":this.attribute,"_uid":this._uid,"type":this.type,"name":this.name,"children":this.children.map((function(nt){return nt.toJson()}))}}},{"key":"createPathProxy","value":function(nt){return Y(nt,!0)?this.pathProxy=(new Ou).fromString(nt):this.pathProxy=new Ou,this.pathProxy}},{"key":"loadImage","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(!nt||at&&function(nt){return!(!nt.fill&&!nt.stroke)}(nt))){var lt=nt;this.resources||(this.resources=new Map);var Rt={"data":"init","state":null};this.resources.set(lt,Rt),"string"==typeof nt?(Rt.state="loading",nt.startsWith("<svg")?(df.GetSvg(nt,this),this.backgroundImg=this.backgroundImg||at):($(nt)||nt.includes("/")||et(nt))&&(df.GetImage(nt,this),this.backgroundImg=this.backgroundImg||at)):V(nt)?(Rt.state="success",Rt.data=nt,this.backgroundImg=this.backgroundImg||at):Rt.state="fail"}}},{"key":"setShadowGraphic","value":function(nt){nt?this.attachShadow().add(nt):this.detachShadow()}},{"key":"imageLoadSuccess","value":function(nt,at,lt){if(this.resources){var Rt=this.resources.get(nt);Rt&&(Rt.state="success",Rt.data=at,lt&&lt(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}}},{"key":"imageLoadFail","value":function(nt,at){if(this.resources){var lt=this.resources.get(nt);lt&&(lt.state="fail",at&&at())}}},{"key":"_stopAnimates","value":function(nt){nt&&nt.forEach((function(nt){nt.stop()}))}},{"key":"stopAnimates","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&nt&&this.forEachChildren((function(at){at.stopAnimates(nt)}))}},{"key":"release","value":function(){this.releaseStatus="released",this.stopAnimates(),oc.graphicService.onRelease(this)}},{"key":"_emitCustomEvent","value":function(nt,at){var lt,Rt;if(this._events&&nt in this._events){var Bt=new Ph(nt,at);Bt.bubbles=!1,Bt.manager=null===(Rt=null===(lt=this.stage)||void 0===lt?void 0:lt.eventSystem)||void 0===Rt?void 0:Rt.manager,this.dispatchEvent(Bt)}}}],[{"key":"mixin","value":function(nt){for(var at=Object.keys(nt),lt=0;lt<at.length;++lt){var Rt=at[lt];Object.defineProperty(e.prototype,Rt,Object.getOwnPropertyDescriptor(nt,Rt))}}}])}(Ah);Dv.userSymbolMap={},Dv.mixin(Dh),function(nt){nt[nt.LESS_GROUP=0]="LESS_GROUP",nt[nt.MORE_GROUP=1]="MORE_GROUP"}(rv||(rv={}));var Lv=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="group",at.parent=null,at.isContainer=!0,at.numberType=cv,at._childUpdateTag=Cl.UPDATE_BOUNDS,at}return h(e,nt),o(e,[{"key":"setMode","value":function(nt){"3d"===nt?this.set3dMode():this.set2dMode()}},{"key":"set3dMode","value":function(){this.in3dMode=!0}},{"key":"set2dMode","value":function(){this.in3dMode=!1}},{"key":"setTheme","value":function(nt){return this.theme||(this.theme=new kh),this.theme.setTheme(nt,this)}},{"key":"createTheme","value":function(){this.theme||(this.theme=new kh)}},{"key":"visibleAll","value":function(nt){this.setAttribute("visible",nt),this.forEachChildren((function(at){at.isContainer&&at.visibleAll?at.visibleAll(nt):at.setAttribute("visible",nt)}))}},{"key":"hideAll","value":function(){this.visibleAll(!1)}},{"key":"showAll","value":function(){this.visibleAll(!0)}},{"key":"containsPoint","value":function(nt,at,lt){if(lt===Ml.GLOBAL){var Rt=new Ve(nt,at);return this.parent&&this.parent.globalTransMatrix.transformPoint(Rt,Rt),this.AABBBounds.contains(Rt.x,Rt.y)}return this.AABBBounds.contains(nt,at)}},{"key":"shouldUpdateAABBBounds","value":function(){return!!y(e,"shouldUpdateAABBBounds",this,3)([])||!!(this._childUpdateTag&Cl.UPDATE_BOUNDS)}},{"key":"tryUpdateAABBBounds","value":function(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;oc.graphicService.beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);var nt=this.shouldSelfChangeUpdateAABBBounds(),at=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),oc.graphicService.afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,nt),"empty"===this.attribute.boundsMode&&at.clear(),at}},{"key":"doUpdateLocalMatrix","value":function(){var nt=this.attribute,at=nt.x,lt=void 0===at?Lu.x:at,Rt=nt.y,Bt=void 0===Rt?Lu.y:Rt,Lt=nt.dx,Ht=void 0===Lt?Lu.dx:Lt,jt=nt.dy,$t=void 0===jt?Lu.dy:jt,Kt=nt.scaleX,te=void 0===Kt?Lu.scaleX:Kt,ne=nt.scaleY,re=void 0===ne?Lu.scaleY:ne,ae=nt.angle,oe=void 0===ae?Lu.angle:ae,se=nt.postMatrix;if(0!==lt||0!==Bt||0!==Ht||0!==$t||1!==te||1!==re||0!==oe||se)return y(e,"doUpdateLocalMatrix",this,3)([]);this._transMatrix.reset()}},{"key":"getGraphicTheme","value":function(){return yh(this).group}},{"key":"updateAABBBounds","value":function(nt,at,lt){var Rt=lt;lt=lt.clone();var Bt=nt.width,Lt=nt.height,Ht=nt.path,jt=nt.clip,$t=void 0===jt?at.clip:jt;if(Ht&&Ht.length?Ht.forEach((function(nt){lt.union(nt.AABBBounds)})):null!=Bt&&null!=Lt&&lt.set(0,0,Math.max(0,Bt),Math.max(0,Lt)),!$t){this.forEachChildren((function(nt){lt.union(nt.AABBBounds)}));var Kt=nt.scrollX,te=void 0===Kt?0:Kt,ne=nt.scrollY,re=void 0===ne?0:ne;lt.translate(te,re)}return oc.graphicService.updateTempAABBBounds(lt),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),Rt.copy(lt),Rt}},{"key":"doUpdateAABBBounds","value":function(){this.updateAABBBoundsStamp++;var nt=y(e,"doUpdateAABBBounds",this,3)([]);return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),nt}},{"key":"clearUpdateBoundTag","value":function(){this._updateTag&=Cl.CLEAR_BOUNDS,this._childUpdateTag&=Cl.CLEAR_BOUNDS}},{"key":"addUpdateBoundTag","value":function(){this._updateTag|=Cl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}},{"key":"addChildUpdateBoundTag","value":function(){this._childUpdateTag&Cl.UPDATE_BOUNDS||(this._childUpdateTag|=Cl.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}},{"key":"getTheme","value":function(){return this.theme.getTheme(this)}},{"key":"incrementalAppendChild","value":function(nt){var at=y(e,"appendChild",this,3)([nt]);return this.stage&&at&&(at.stage=this.stage,at.layer=this.layer),this.addUpdateBoundTag(),oc.graphicService.onAddIncremental(nt,this,this.stage),at}},{"key":"incrementalClearChild","value":function(){y(e,"removeAllChild",this,3)([]),this.addUpdateBoundTag(),oc.graphicService.onClearIncremental(this,this.stage)}},{"key":"_updateChildToStage","value":function(nt){return this.stage&&nt&&nt.setStage(this.stage,this.layer),this.addUpdateBoundTag(),nt}},{"key":"appendChild","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=y(e,"appendChild",this,3)([nt]);return at&&this.stage&&lt&&lt.setStage(this.stage,this.layer),this.addUpdateBoundTag(),lt}},{"key":"insertBefore","value":function(nt,at){return this._updateChildToStage(y(e,"insertBefore",this,3)([nt,at]))}},{"key":"insertAfter","value":function(nt,at){return this._updateChildToStage(y(e,"insertAfter",this,3)([nt,at]))}},{"key":"insertInto","value":function(nt,at){return this._updateChildToStage(y(e,"insertInto",this,3)([nt,at]))}},{"key":"removeChild","value":function(nt){var at=y(e,"removeChild",this,3)([nt]);return nt.stage=null,oc.graphicService.onRemove(nt),this.addUpdateBoundTag(),at}},{"key":"removeAllChild","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEachChildren((function(at){oc.graphicService.onRemove(at),nt&&at.isContainer&&at.removeAllChild(nt)})),y(e,"removeAllChild",this,3)([]),this.addUpdateBoundTag()}},{"key":"setStage","value":function(nt,at){var lt=this;this.stage!==nt&&(this.stage=nt,this.layer=at,this.setStageToShadowRoot(nt,at),this._onSetStage&&this._onSetStage(this,nt,at),oc.graphicService.onSetStage(this,nt),this.forEachChildren((function(at){at.setStage(nt,lt.layer)})))}},{"key":"addUpdatePositionTag","value":function(){y(e,"addUpdatePositionTag",this,3)([]),this.forEachChildren((function(nt){nt.isContainer&&nt.addUpdateGlobalPositionTag()}))}},{"key":"addUpdateGlobalPositionTag","value":function(){y(e,"addUpdateGlobalPositionTag",this,3)([]),this.forEachChildren((function(nt){nt.isContainer&&nt.addUpdateGlobalPositionTag()}))}},{"key":"tryUpdateGlobalTransMatrix","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){var at=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(at.a,at.b,at.c,at.d,at.e,at.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),nt&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}},{"key":"shouldUpdateGlobalMatrix","value":function(){return!!(this._updateTag&Cl.UPDATE_GLOBAL_MATRIX)}},{"key":"_getChildByName","value":function(nt,at){return this.find((function(at){return at.name===nt}),at)}},{"key":"createOrUpdateChild","value":function(nt,at,lt){var Rt=this._getChildByName(nt);return Rt?Rt.setAttributes(at):((Rt=oc.graphicService.creator[lt](at)).name=nt,this.add(Rt)),Rt}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}},{"key":"release","value":function(nt){nt&&this.forEachChildren((function(at){at.release(nt)})),y(e,"release",this,3)([])}}])}(Dv);function Pv(nt){return new Lv(nt)}Lv.NOWORK_ANIMATE_ATTR=Ov;var Fv,zv=function(nt){function e(nt,at,lt,Rt){var Bt,Lt;return r(this,e),(Bt=n(this,e,[{}])).stage=nt,Bt.global=at,Bt.window=lt,Bt.main=Rt.main,Bt.layerHandler=Rt.layerHandler,Bt.layerHandler.init(i(Bt),lt,{"main":Rt.main,"canvasId":Rt.canvasId,"width":Bt.viewWidth,"height":Bt.viewHeight,"zIndex":null!==(Lt=Rt.zIndex)&&void 0!==Lt?Lt:0}),Bt.layer=i(Bt),Bt.subLayers=new Map,Bt.theme=new kh,Bt.background="rgba(0, 0, 0, 0)",Bt.afterDrawCbs=[],Bt}return h(e,nt),o(e,[{"key":"offscreen","get":function(){return this.layerHandler.offscreen}},{"key":"layerMode","get":function(){return this.layerHandler.type}},{"key":"width","get":function(){return this.stage?this.stage.width:0}},{"key":"height","get":function(){return this.stage?this.stage.height:0}},{"key":"viewWidth","get":function(){return this.stage?this.stage.viewWidth:0}},{"key":"viewHeight","get":function(){return this.stage?this.stage.viewHeight:0}},{"key":"dirtyBound","get":function(){throw new Error("")}},{"key":"dpr","get":function(){return this._dpr}},{"key":"combineSubLayer","value":function(){var nt=this,at=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],lt=Array.from(this.subLayers.values()).sort((function(nt,at){return nt.zIndex-at.zIndex}));this.layerHandler.merge(lt.map((function(nt){return nt.layer.subLayers.size&&nt.layer.combineSubLayer(at),nt.layer.getNativeHandler()}))),at&&lt.forEach((function(nt){nt.group&&(nt.group.incremental=0)})),lt.forEach((function(at){oc.layerService.releaseLayer(nt.stage,at.layer)})),this.subLayers.clear()}},{"key":"getNativeHandler","value":function(){return this.layerHandler}},{"key":"setStage","value":function(nt,at){y(e,"setStage",this,3)([nt,this])}},{"key":"pick","value":function(nt,at){throw new Error("")}},{"key":"tryRenderSecondaryLayer","value":function(nt,at){var lt=this;this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach((function(Rt){Rt.layer.renderCount=lt.renderCount,Rt.layer.render(nt,at)}))}},{"key":"render","value":function(nt,at){var lt,Rt=this;this.layerHandler.render([this],{"renderService":nt.renderService,"stage":this.stage,"layer":this,"viewBox":nt.viewBox,"transMatrix":nt.transMatrix,"background":null!==(lt=nt.background)&&void 0!==lt?lt:this.background,"updateBounds":nt.updateBounds},at),this.afterDrawCbs.forEach((function(nt){return nt(Rt)})),this.tryRenderSecondaryLayer(nt,at)}},{"key":"resize","value":function(nt,at){this.layerHandler.resize(nt,at)}},{"key":"resizeView","value":function(nt,at){this.layerHandler.resizeView(nt,at)}},{"key":"setDpr","value":function(nt){this.layerHandler.setDpr(nt)}},{"key":"afterDraw","value":function(nt){this.afterDrawCbs.push(nt)}},{"key":"startAnimate","value":function(nt){throw new Error("")}},{"key":"setToFrame","value":function(nt){throw new Error("")}},{"key":"prepare","value":function(nt,at){}},{"key":"release","value":function(){var nt=this;y(e,"release",this,3)([]),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach((function(at){oc.layerService.releaseLayer(nt.stage,at.layer)}))}},{"key":"drawTo","value":function(nt,at){var lt,Rt=this;this.layerHandler.drawTo(nt,[this],Object.assign({"background":null!==(lt=at.background)&&void 0!==lt?lt:this.background,"renderService":at.renderService,"viewBox":at.viewBox,"transMatrix":at.transMatrix,"stage":this.stage,"layer":this},at)),this.afterDrawCbs.forEach((function(nt){return nt(Rt)}))}}])}(Lv),Nv=Symbol.for("TransformUtil"),Vv=Symbol.for("GraphicUtil"),$v=Symbol.for("LayerService"),Qv=Symbol.for("StaticLayerHandlerContribution"),tg=Symbol.for("DynamicLayerHandlerContribution"),eg=Symbol.for("VirtualLayerHandlerContribution"),Hv=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},jv=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},ig=Fv=o((function t(){r(this,t),this.layerMap=new Map,this.global=oc.global}),[{"key":"tryInit","value":function(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}},{"key":"getStageLayer","value":function(nt){return this.layerMap.get(nt)}},{"key":"getRecommendedLayerType","value":function(nt){return nt||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}},{"key":"getLayerHandler","value":function(nt){return"static"===nt?Mc.get(Qv):"dynamic"===nt?Mc.get(tg):Mc.get(eg)}},{"key":"createLayer","value":function(nt){var at,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"main":!1};this.tryInit();var Rt=this.getRecommendedLayerType(lt.layerMode);Rt=lt.main||lt.canvasId?"static":Rt;var Bt=this.getLayerHandler(Rt),Lt=new zv(nt,this.global,nt.window,Object.assign(Object.assign({"main":!1},lt),{"layerMode":Rt,"canvasId":null!==(at=lt.canvasId)&&void 0!==at?at:Fv.GenerateLayerId(),"layerHandler":Bt})),Ht=this.layerMap.get(nt)||[];return Ht.push(Lt),this.layerMap.set(nt,Ht),this.staticLayerCountInEnv--,Lt}},{"key":"prepareStageLayer","value":function(nt){var at;nt.forEachChildren((function(nt){var lt=nt.getNativeHandler();"virtual"===lt.type?(lt.mainHandler=at,at.secondaryHandlers.push(lt)):(at=lt).secondaryHandlers=[]}))}},{"key":"releaseLayer","value":function(nt,at){at.release();var lt=this.layerMap.get(nt)||[];this.layerMap.set(nt,lt.filter((function(nt){return nt!==at})))}},{"key":"layerCount","value":function(nt){return(this.layerMap.get(nt)||[]).length}},{"key":"restLayerCount","value":function(nt){return"browser"===this.global.env?10:0}},{"key":"releaseStage","value":function(nt){this.layerMap.delete(nt)}}],[{"key":"GenerateLayerId","value":function(){return"".concat(Fv.idprefix,"_").concat(Fv.prefix_count++)}}]);ig.idprefix="visactor_layer",ig.prefix_count=0,ig=Fv=Hv([Hs(),jv("design:paramtypes",[])],ig);var ng=new Rs((function(nt){nt(ml).to(_l).inSingletonScope(),nt(uh).to(hh),nt(Vv).to(fh).inSingletonScope(),nt(Nv).to(gh).inSingletonScope(),nt($v).to(ig).inSingletonScope()}));function Gv(nt,at){return!(!nt&&!at)}function Wv(nt,at){return(X(nt)?nt.some((function(nt){return nt||void 0===nt})):!!nt)&&at>0}function Uv(nt,at,lt){return lt&&nt*at>0}function Yv(nt,at,lt,Rt,Bt){return Bt&&nt*at>0&&0!==lt&&0!==Rt}function Xv(nt,at){return nt*at>0}function Kv(nt,at,lt,Rt){return nt*at>0&&0!==lt&&0!==Rt}function qv(nt,at,lt,Rt,Bt,Lt,Ht){var jt=nt-lt,$t=at-Rt,Kt=(Ht?Lt:-Lt)/Math.sqrt(jt*jt+$t*$t),te=Kt*$t,ne=-Kt*jt,re=nt+te,ae=at+ne,oe=lt+te,se=Rt+ne,le=(re+oe)/2,ue=(ae+se)/2,ce=oe-re,he=se-ae,de=ce*ce+he*he,fe=Bt-Lt,pe=re*se-oe*ae,ve=(he<0?-1:1)*Math.sqrt(Math.max(0,fe*fe*de-pe*pe)),Ae=(pe*he-ce*ve)/de,we=(-pe*ce-he*ve)/de,Ce=(pe*he+ce*ve)/de,je=(-pe*ce+he*ve)/de,Ne=Ae-le,Ve=we-ue,Ge=Ce-le,ti=je-ue;return Ne*Ne+Ve*Ve>Ge*Ge+ti*ti&&(Ae=Ce,we=je),{"cx":Ae,"cy":we,"x01":-te,"y01":-ne,"x11":Ae*(Bt/fe-1),"y11":we*(Bt/fe-1)}}function Zv(nt,at,lt,Rt,Bt){var Lt,Ht,jt,$t,Kt,te=fe(lt-at),ne=nt.getParsedCornerRadius(),re=X(ne),ae=nt.getParsePadAngle(at,lt),oe=ae.outerDeltaAngle,se=ae.innerDeltaAngle,ce=ae.outerStartAngle,he=ae.outerEndAngle,de=ae.innerEndAngle,pe=ae.innerStartAngle,Ae=re?ne[0]:ne,Ne=re?ne[1]:ne,Ve=re?ne[2]:ne,Ge=re?ne[3]:ne,ti=Math.max(Ne,Ae),li=Math.max(Ve,Ge),hi=ti,di=li,fi=Bt*ve(ce),pi=Bt*Ce(ce),vi=Rt*ve(de),mi=Rt*Ce(de);if((li>le||ti>le)&&(Lt=Bt*ve(he),Ht=Bt*Ce(he),jt=Rt*ve(pe),$t=Rt*Ce(pe),te<ue)){var _i=function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=lt-nt,Kt=Rt-at,te=Ht-Bt,ne=jt-Lt,re=ne*$t-te*Kt;return re*re<le?[]:[nt+(re=(te*(at-Lt)-ne*(nt-Bt))/re)*$t,at+re*Kt]}(fi,pi,jt,$t,Lt,Ht,vi,mi);if(_i){var bi=fi-_i[0],Mi=pi-_i[1],Ti=Lt-_i[0],Ii=Ht-_i[1],Bi=1/Ce(((Kt=(bi*Ti+Mi*Ii)/(je(bi*bi+Mi*Mi)*je(Ti*Ti+Ii*Ii)))>1?0:Kt<-1?ue:Math.acos(Kt))/2),zi=je(_i[0]*_i[0]+_i[1]*_i[1]);di=we(li,(Rt-zi)/(Bi-1)),hi=we(ti,(Bt-zi)/(Bi+1))}}return{"outerDeltaAngle":oe,"xors":fi,"yors":pi,"xirs":jt,"yirs":$t,"xore":Lt,"yore":Ht,"xire":vi,"yire":mi,"limitedOcr":hi,"limitedIcr":di,"outerCornerRadiusStart":Ae,"outerCornerRadiusEnd":Ne,"maxOuterCornerRadius":ti,"maxInnerCornerRadius":li,"outerStartAngle":ce,"outerEndAngle":he,"innerDeltaAngle":se,"innerEndAngle":de,"innerStartAngle":pe,"innerCornerRadiusStart":Ge,"innerCornerRadiusEnd":Ve}}function Jv(nt,at,lt,Rt,Bt,Lt,Ht){var jt=nt.getParsedAngle(),$t=jt.startAngle,Kt=jt.endAngle,te=fe(Kt-$t),ne=Kt>$t,re=!1;if(Bt<Lt){var ae=Bt;Bt=Lt,Lt=ae}if(Bt<=le)at.moveTo(lt,Rt);else if(te>=de-le)at.moveTo(lt+Bt*ve($t),Rt+Bt*Ce($t)),at.arc(lt,Rt,Bt,$t,Kt,!ne),Lt>le&&(at.moveTo(lt+Lt*ve(Kt),Rt+Lt*Ce(Kt)),at.arc(lt,Rt,Lt,Kt,$t,ne));else{var oe=Zv(nt,$t,Kt,Lt,Bt),se=oe.outerDeltaAngle,ue=oe.xors,ce=oe.yors,he=oe.xirs,Ae=oe.yirs,je=oe.limitedOcr,Ne=oe.outerCornerRadiusStart,Ve=oe.outerCornerRadiusEnd,Ge=oe.maxOuterCornerRadius,ti=oe.xore,li=oe.yore,hi=oe.xire,di=oe.yire,fi=oe.outerStartAngle,pi=oe.outerEndAngle,vi=oe.limitedIcr,mi=oe.innerDeltaAngle,_i=oe.innerEndAngle,bi=oe.innerStartAngle,Mi=oe.innerCornerRadiusStart,Ti=oe.innerCornerRadiusEnd,Ii=oe.maxInnerCornerRadius;if(se<.001)Ht&&(Ht[3]||Ht[1])&&at.moveTo(lt+ue,Rt+ce),re=!0;else if(je>le){var Bi=we(Ne,je),zi=we(Ve,je),Wi=qv(he,Ae,ue,ce,Bt,Bi,Number(ne)),Ui=qv(ti,li,hi,di,Bt,zi,Number(ne));je<Ge&&Bi===zi?!Ht||Ht[0]?(at.moveTo(lt+Wi.cx+Wi.x01,Rt+Wi.cy+Wi.y01),at.arc(lt+Wi.cx,Rt+Wi.cy,je,pe(Wi.y01,Wi.x01),pe(Ui.y01,Ui.x01),!ne)):at.moveTo(lt+Wi.cx+je*ve(pe(Ui.y01,Ui.x01)),Rt+Wi.cy+je*Ce(pe(Ui.y01,Ui.x01))):!Ht||Ht[0]?(at.moveTo(lt+Wi.cx+Wi.x01,Rt+Wi.cy+Wi.y01),Bi>0&&at.arc(lt+Wi.cx,Rt+Wi.cy,Bi,pe(Wi.y01,Wi.x01),pe(Wi.y11,Wi.x11),!ne),at.arc(lt,Rt,Bt,pe(Wi.cy+Wi.y11,Wi.cx+Wi.x11),pe(Ui.cy+Ui.y11,Ui.cx+Ui.x11),!ne),zi>0&&at.arc(lt+Ui.cx,Rt+Ui.cy,zi,pe(Ui.y11,Ui.x11),pe(Ui.y01,Ui.x01),!ne)):zi>0?at.moveTo(lt+Ui.cx+zi*ve(pe(Ui.y01,Ui.x01)),Rt+Ui.cy+zi*Ce(pe(Ui.y01,Ui.x01))):at.moveTo(lt+ti,Rt+Bt*Ce(pi))}else!Ht||Ht[0]?(at.moveTo(lt+ue,Rt+ce),at.arc(lt,Rt,Bt,fi,pi,!ne)):at.moveTo(lt+Bt*ve(pi),Rt+Bt*Ce(pi));if(!(Lt>le)||mi<.001)!Ht||Ht[1]?at.lineTo(lt+hi,Rt+di):at.moveTo(lt+hi,Rt+di),re=!0;else if(vi>le){var $i=we(Mi,vi),qi=we(Ti,vi),Ki=qv(hi,di,ti,li,Lt,-qi,Number(ne)),Qi=qv(ue,ce,he,Ae,Lt,-$i,Number(ne));if(!Ht||Ht[1]?at.lineTo(lt+Ki.cx+Ki.x01,Rt+Ki.cy+Ki.y01):at.moveTo(lt+Ki.cx+Ki.x01,Rt+Ki.cy+Ki.y01),vi<Ii&&$i===qi){var Ji=pe(Qi.y01,Qi.x01);!Ht||Ht[2]?at.arc(lt+Ki.cx,Rt+Ki.cy,vi,pe(Ki.y01,Ki.x01),Ji,!ne):at.moveTo(lt+Ki.cx+ve(Ji),Rt+Ki.cy+Ce(Ji))}else!Ht||Ht[2]?(qi>0&&at.arc(lt+Ki.cx,Rt+Ki.cy,qi,pe(Ki.y01,Ki.x01),pe(Ki.y11,Ki.x11),!ne),at.arc(lt,Rt,Lt,pe(Ki.cy+Ki.y11,Ki.cx+Ki.x11),pe(Qi.cy+Qi.y11,Qi.cx+Qi.x11),ne),$i>0&&at.arc(lt+Qi.cx,Rt+Qi.cy,$i,pe(Qi.y11,Qi.x11),pe(Qi.y01,Qi.x01),!ne)):$i>0?at.moveTo(lt+Qi.cx+$i*ve(pe(Qi.y01,Qi.x01)),Rt+Qi.cy+$i*Ce(pe(Qi.y01,Qi.x01))):at.moveTo(lt+he,Rt+Ae)}else!Ht||Ht[1]?at.lineTo(lt+hi,Rt+di):at.moveTo(lt+hi,Rt+di),!Ht||Ht[2]?at.arc(lt,Rt,Lt,_i,bi,ne):at.moveTo(lt+Lt*ve(bi),Rt+Lt*Ce(bi))}return Ht?Ht[3]&&at.lineTo(lt+Bt*ve($t),Rt+Bt*Ce($t)):at.closePath(),re}var rg=function(){function t(){r(this,t)}return o(t,null,[{"key":"GetCanvas","value":function(){try{return t.canvas||(t.canvas=oc.global.createCanvas({})),t.canvas}catch(nt){return null}}},{"key":"GetCtx","value":function(){if(!t.ctx){var nt=t.GetCanvas();t.ctx=nt.getContext("2d")}return t.ctx}}])}(),ag=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;r(this,e),(nt=n(this,e)).cacheParams={"CLEAN_THRESHOLD":100,"L_TIME":1e3},nt.dataMap=new Map;var Rt=rg.GetCanvas(),Bt=rg.GetCtx();if(Rt.width=lt,Rt.height=1,!Bt)return p(nt);if(Bt.translate(0,0),!Bt)throw new Error("ctx");var Lt=Bt.createLinearGradient(0,0,lt,0);return at.forEach((function(nt){Lt.addColorStop(nt[0],nt[1])})),Bt.fillStyle=Lt,Bt.fillRect(0,0,lt,1),nt.rgbaSet=Bt.getImageData(0,0,lt,1).data,nt}return h(e,nt),o(e,[{"key":"getColor","value":function(nt){var at=this.rgbaSet.slice(4*nt,4*nt+4);return"rgba(".concat(at[0],", ").concat(at[1],", ").concat(at[2],", ").concat(at[3]/255,")")}},{"key":"GetOrCreate","value":function(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],Lt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,Ht="".concat(nt).concat(at).concat(lt).concat(Rt);Bt.forEach((function(nt){return Ht+=nt.join()})),Ht+=Lt;var jt=this.dataMap.get(Ht);return jt||(jt={"data":new e(Bt,Lt),"timestamp":[]},this.addLimitedTimestamp(jt,Date.now(),{}),this.dataMap.set(Ht,jt)),this.clearCache(this.dataMap,this.cacheParams),jt.data}}],[{"key":"getInstance","value":function(){return e._instance||(e._instance=new e),e._instance}}])}(Ti),og=function(){function t(){r(this,t)}return o(t,null,[{"key":"GetSize","value":function(nt){for(var at=0;at<t.ImageSize.length;at++)if(t.ImageSize[at]>=nt)return t.ImageSize[at];return nt}},{"key":"Get","value":function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=t.GenKey(nt,at,lt,Rt,Bt),$t=t.cache[jt];if(!$t||0===$t.length)return null;for(var Kt=0;Kt<$t.length;Kt++)if($t[Kt].width>=Lt&&$t[Kt].height>=Ht)return $t[Kt].pattern;return null}},{"key":"Set","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=t.GenKey(nt,at,lt,Rt,Bt);t.cache[$t]?t.cache[$t].push({"width":Ht,"height":jt,"pattern":Lt}):t.cache[$t]=[{"width":Ht,"height":jt,"pattern":Lt}]}},{"key":"GenKey","value":function(nt,at,lt,Rt,Bt){return"".concat(at,",").concat(lt,",").concat(Rt,",").concat(Bt,",").concat(nt.join())}}])}();og.cache={},og.ImageSize=[20,40,80,160,320,640,1280,2560];var sg=Symbol.for("ArcRenderContribution"),lg=Symbol.for("AreaRenderContribution"),ug=Symbol.for("CircleRenderContribution"),cg=Symbol.for("GroupRenderContribution"),hg=Symbol.for("ImageRenderContribution"),_g=Symbol.for("PathRenderContribution"),bg=Symbol.for("PolygonRenderContribution"),xg=Symbol.for("RectRenderContribution"),kg=Symbol.for("SymbolRenderContribution"),Tg=Symbol.for("TextRenderContribution"),Eg=Symbol.for("InteractiveSubRenderContribution");function dg(nt,at){return"end"===nt||"right"===nt?-at:"center"===nt?-at/2:0}function pg(nt,at,lt){return"middle"===nt?-at/2:"top"===nt?0:"bottom"===nt?(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)-at:nt&&"alphabetic"!==nt?0:(lt||(lt=at),-(at-lt)/2-.79*lt)}function fg(nt){return nt[0]=1,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=1,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=1,nt[11]=0,nt[12]=0,nt[13]=0,nt[14]=0,nt[15]=1,nt}function vg(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se=lt[0],le=lt[1],ue=lt[2];return at===nt?(nt[12]=at[0]*se+at[4]*le+at[8]*ue+at[12],nt[13]=at[1]*se+at[5]*le+at[9]*ue+at[13],nt[14]=at[2]*se+at[6]*le+at[10]*ue+at[14],nt[15]=at[3]*se+at[7]*le+at[11]*ue+at[15]):(Rt=at[0],Bt=at[1],Lt=at[2],Ht=at[3],jt=at[4],$t=at[5],Kt=at[6],te=at[7],ne=at[8],re=at[9],ae=at[10],oe=at[11],nt[0]=Rt,nt[1]=Bt,nt[2]=Lt,nt[3]=Ht,nt[4]=jt,nt[5]=$t,nt[6]=Kt,nt[7]=te,nt[8]=ne,nt[9]=re,nt[10]=ae,nt[11]=oe,nt[12]=Rt*se+jt*le+ne*ue+at[12],nt[13]=Bt*se+$t*le+re*ue+at[13],nt[14]=Lt*se+Kt*le+ae*ue+at[14],nt[15]=Ht*se+te*le+oe*ue+at[15]),nt}function gg(nt,at){nt[0]=at.a,nt[1]=at.b,nt[2]=0,nt[3]=0,nt[4]=at.c,nt[5]=at.d,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=1,nt[11]=0,nt[12]=at.e,nt[13]=at.f,nt[14]=0,nt[15]=1}function yg(nt,at,lt){var Rt=at[0],Bt=at[1],Lt=at[2],Ht=at[3],jt=at[4],$t=at[5],Kt=at[6],te=at[7],ne=at[8],re=at[9],ae=at[10],oe=at[11],se=at[12],le=at[13],ue=at[14],ce=at[15],he=lt[0],de=lt[1],fe=lt[2],pe=lt[3];return nt[0]=he*Rt+de*jt+fe*ne+pe*se,nt[1]=he*Bt+de*$t+fe*re+pe*le,nt[2]=he*Lt+de*Kt+fe*ae+pe*ue,nt[3]=he*Ht+de*te+fe*oe+pe*ce,he=lt[4],de=lt[5],fe=lt[6],pe=lt[7],nt[4]=he*Rt+de*jt+fe*ne+pe*se,nt[5]=he*Bt+de*$t+fe*re+pe*le,nt[6]=he*Lt+de*Kt+fe*ae+pe*ue,nt[7]=he*Ht+de*te+fe*oe+pe*ce,he=lt[8],de=lt[9],fe=lt[10],pe=lt[11],nt[8]=he*Rt+de*jt+fe*ne+pe*se,nt[9]=he*Bt+de*$t+fe*re+pe*le,nt[10]=he*Lt+de*Kt+fe*ae+pe*ue,nt[11]=he*Ht+de*te+fe*oe+pe*ce,he=lt[12],de=lt[13],fe=lt[14],pe=lt[15],nt[12]=he*Rt+de*jt+fe*ne+pe*se,nt[13]=he*Bt+de*$t+fe*re+pe*le,nt[14]=he*Lt+de*Kt+fe*ae+pe*ue,nt[15]=he*Ht+de*te+fe*oe+pe*ce,nt}function mg(nt,at,lt){var Rt=at[0],Bt=at[1],Lt=at[2],Ht=lt[3]*Rt+lt[7]*Bt+lt[11]*Lt+lt[15];return Ht=Ht||1,nt[0]=(lt[0]*Rt+lt[4]*Bt+lt[8]*Lt+lt[12])/Ht,nt[1]=(lt[1]*Rt+lt[5]*Bt+lt[9]*Lt+lt[13])/Ht,nt[2]=(lt[2]*Rt+lt[6]*Bt+lt[10]*Lt+lt[14])/Ht,nt}var Pg=o((function t(){r(this,t),this.pools=[]}),[{"key":"allocate","value":function(nt,at,lt,Rt,Bt,Lt){if(!this.pools.length)return new Mi(nt,at,lt,Rt,Bt,Lt);var Ht=this.pools.pop();return Ht.a=nt,Ht.b=at,Ht.c=lt,Ht.d=Rt,Ht.e=Bt,Ht.f=Lt,Ht}},{"key":"allocateByObj","value":function(nt){if(!this.pools.length)return new Mi(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f);var at=this.pools.pop();return at.a=nt.a,at.b=nt.b,at.c=nt.c,at.d=nt.d,at.e=nt.e,at.f=nt.f,at}},{"key":"free","value":function(nt){this.pools.push(nt)}},{"key":"length","get":function(){return this.pools.length}},{"key":"release","value":function(){this.pools=[]}}]),Ig=function(){function t(){r(this,t),this.pools=[]}return o(t,[{"key":"allocate","value":function(){if(!this.pools.length)return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var nt=this.pools.pop();return t.identity(nt),nt}},{"key":"allocateByObj","value":function(nt){var at;at=this.pools.length?this.pools.pop():[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];for(var lt=0;lt<at.length;lt++)at[lt]=nt[lt];return at}},{"key":"free","value":function(nt){nt&&this.pools.push(nt)}},{"key":"length","get":function(){return this.pools.length}},{"key":"release","value":function(){this.pools=[]}}],[{"key":"identity","value":function(nt){return fg(nt)}}])}(),Bg=new Pg,Og=new Ig,Sg=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Ag=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},wg=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}};function Mg(nt,at,lt){var Rt,Bt=at.attribute,Lt=Bt.x,Ht=void 0===Lt?lt.x:Lt,jt=Bt.y,$t=void 0===jt?lt.y:jt,Kt=Bt.z,te=void 0===Kt?lt.z:Kt,ne=Bt.dx,re=void 0===ne?lt.dx:ne,ae=Bt.dy,oe=void 0===ae?lt.dy:ae,se=Bt.dz,le=void 0===se?lt.dz:se,ue=Bt.scaleX,ce=void 0===ue?lt.scaleX:ue,he=Bt.scaleY,de=void 0===he?lt.scaleY:he,fe=Bt.scaleZ,pe=void 0===fe?lt.scaleZ:fe,ve=Bt.alpha,Ae=void 0===ve?lt.alpha:ve,we=Bt.beta,Ce=void 0===we?lt.beta:we,je=Bt.angle,Ne=void 0===je?lt.angle:je,Ve=Bt.anchor3d,Ge=void 0===Ve?at.attribute.anchor:Ve,ti=Bt.anchor,li=[0,0,0];if(Ge){if("string"==typeof Ge[0]){var hi=parseFloat(Ge[0])/100,di=at.AABBBounds;li[0]=di.x1+(di.x2-di.x1)*hi}else li[0]=Ge[0];if("string"==typeof Ge[1]){var fi=parseFloat(Ge[1])/100,pi=at.AABBBounds;li[1]=pi.x1+(pi.x2-pi.x1)*fi}else li[1]=Ge[1];li[2]=null!==(Rt=Ge[2])&&void 0!==Rt?Rt:0}if(fg(nt),vg(nt,nt,[Ht+re,$t+oe,te+le]),vg(nt,nt,[li[0],li[1],li[2]]),function(nt,at,lt){var Rt=Math.sin(lt),Bt=Math.cos(lt),Lt=at[4],Ht=at[5],jt=at[6],$t=at[7],Kt=at[8],te=at[9],ne=at[10],re=at[11];at!==nt&&(nt[0]=at[0],nt[1]=at[1],nt[2]=at[2],nt[3]=at[3],nt[12]=at[12],nt[13]=at[13],nt[14]=at[14],nt[15]=at[15]),nt[4]=Lt*Bt+Kt*Rt,nt[5]=Ht*Bt+te*Rt,nt[6]=jt*Bt+ne*Rt,nt[7]=$t*Bt+re*Rt,nt[8]=Kt*Bt-Lt*Rt,nt[9]=te*Bt-Ht*Rt,nt[10]=ne*Bt-jt*Rt,nt[11]=re*Bt-$t*Rt}(nt,nt,Ce),function(nt,at,lt){var Rt=Math.sin(lt),Bt=Math.cos(lt),Lt=at[0],Ht=at[1],jt=at[2],$t=at[3],Kt=at[8],te=at[9],ne=at[10],re=at[11];at!==nt&&(nt[4]=at[4],nt[5]=at[5],nt[6]=at[6],nt[7]=at[7],nt[12]=at[12],nt[13]=at[13],nt[14]=at[14],nt[15]=at[15]),nt[0]=Lt*Bt-Kt*Rt,nt[1]=Ht*Bt-te*Rt,nt[2]=jt*Bt-ne*Rt,nt[3]=$t*Bt-re*Rt,nt[8]=Lt*Rt+Kt*Bt,nt[9]=Ht*Rt+te*Bt,nt[10]=jt*Rt+ne*Bt,nt[11]=$t*Rt+re*Bt}(nt,nt,Ae),vg(nt,nt,[-li[0],-li[1],li[2]]),function(nt,at,lt){var Rt=lt[0],Bt=lt[1],Lt=lt[2];nt[0]=at[0]*Rt,nt[1]=at[1]*Rt,nt[2]=at[2]*Rt,nt[3]=at[3]*Rt,nt[4]=at[4]*Bt,nt[5]=at[5]*Bt,nt[6]=at[6]*Bt,nt[7]=at[7]*Bt,nt[8]=at[8]*Lt,nt[9]=at[9]*Lt,nt[10]=at[10]*Lt,nt[11]=at[11]*Lt,nt[12]=at[12],nt[13]=at[13],nt[14]=at[14],nt[15]=at[15]}(nt,nt,[ce,de,pe]),Ne){var vi=Og.allocate(),mi=[0,0];if(ti){if("string"==typeof Ge[0]){var _i=parseFloat(Ge[0])/100,bi=at.AABBBounds;mi[0]=bi.x1+(bi.x2-bi.x1)*_i}else mi[0]=Ge[0];if("string"==typeof Ge[1]){var Mi=parseFloat(Ge[1])/100,Ti=at.AABBBounds;mi[1]=Ti.x1+(Ti.x2-Ti.x1)*Mi}else mi[1]=Ge[1]}vg(vi,vi,[mi[0],mi[1],0]),function(nt,at,lt){var Rt=Math.sin(lt),Bt=Math.cos(lt),Lt=at[0],Ht=at[1],jt=at[2],$t=at[3],Kt=at[4],te=at[5],ne=at[6],re=at[7];at!==nt&&(nt[8]=at[8],nt[9]=at[9],nt[10]=at[10],nt[11]=at[11],nt[12]=at[12],nt[13]=at[13],nt[14]=at[14],nt[15]=at[15]),nt[0]=Lt*Bt+Kt*Rt,nt[1]=Ht*Bt+te*Rt,nt[2]=jt*Bt+ne*Rt,nt[3]=$t*Bt+re*Rt,nt[4]=Kt*Bt-Lt*Rt,nt[5]=te*Bt-Ht*Rt,nt[6]=ne*Bt-jt*Rt,nt[7]=re*Bt-$t*Rt}(vi,vi,Ne),vg(vi,vi,[-mi[0],-mi[1],0]),yg(nt,nt,vi)}}var Lg=o((function t(nt){r(this,t),this.creator=nt,this.hooks={"onAttributeUpdate":new gl(["graphic"]),"onSetStage":new gl(["graphic","stage"]),"onRemove":new gl(["graphic"]),"onRelease":new gl(["graphic"]),"onAddIncremental":new gl(["graphic","group","stage"]),"onClearIncremental":new gl(["graphic","group","stage"]),"beforeUpdateAABBBounds":new gl(["graphic","stage","willUpdate","aabbBounds"]),"afterUpdateAABBBounds":new gl(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),"clearAABBBounds":new gl(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new _i,this.tempAABBBounds2=new _i}),[{"key":"onAttributeUpdate","value":function(nt){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(nt)}},{"key":"onSetStage","value":function(nt,at){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(nt,at)}},{"key":"onRemove","value":function(nt){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(nt)}},{"key":"onRelease","value":function(nt){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(nt)}},{"key":"onAddIncremental","value":function(nt,at,lt){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(nt,at,lt)}},{"key":"onClearIncremental","value":function(nt,at){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(nt,at)}},{"key":"beforeUpdateAABBBounds","value":function(nt,at,lt,Rt){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(nt,at,lt,Rt)}},{"key":"afterUpdateAABBBounds","value":function(nt,at,lt,Rt,Bt){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(nt,at,lt,Rt,Bt)}},{"key":"clearAABBBounds","value":function(nt,at,lt){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(nt,at,lt)}},{"key":"updatePathProxyAABBBounds","value":function(nt,at){var lt="function"==typeof at.pathProxy?at.pathProxy(at.attribute):at.pathProxy;if(!lt)return!1;var Rt=new Hl(nt);return jl(lt.commandList,Rt,0,0),!0}},{"key":"updateHTMLTextAABBBounds","value":function(nt,at,lt,Rt){var Bt=nt.textAlign,Lt=nt.textBaseline;if(null!=nt.forceBoundsHeight){var Ht=Z(nt.forceBoundsHeight)?nt.forceBoundsHeight:nt.forceBoundsHeight(),jt=pg(Lt,Ht,Ht);lt.set(lt.x1,jt,lt.x2,jt+Ht)}if(null!=nt.forceBoundsWidth){var $t=Z(nt.forceBoundsWidth)?nt.forceBoundsWidth:nt.forceBoundsWidth(),Kt=dg(Bt,$t);lt.set(Kt,lt.y1,Kt+$t,lt.y2)}}},{"key":"combindShadowAABBBounds","value":function(nt,at){if(at&&at.shadowRoot){var lt=at.shadowRoot.AABBBounds;nt.union(lt)}}},{"key":"transformAABBBounds","value":function(nt,at,lt,Rt,Bt){if(!at.empty()){var Lt=nt.scaleX,Ht=void 0===Lt?lt.scaleX:Lt,jt=nt.scaleY,$t=void 0===jt?lt.scaleY:jt,Kt=nt.stroke,te=void 0===Kt?lt.stroke:Kt,ne=nt.shadowBlur,re=void 0===ne?lt.shadowBlur:ne,ae=nt.lineWidth,oe=void 0===ae?lt.lineWidth:ae,se=nt.pickStrokeBuffer,le=void 0===se?lt.pickStrokeBuffer:se,ue=nt.strokeBoundsBuffer,ce=void 0===ue?lt.strokeBoundsBuffer:ue,he=this.tempAABBBounds1,de=this.tempAABBBounds2;if(te&&oe&&(Uf(he,(oe+le)/Math.abs(Ht+$t),Rt,ce),at.union(he),he.setValue(de.x1,de.y1,de.x2,de.y2)),re){var fe=nt.shadowOffsetX,pe=void 0===fe?lt.shadowOffsetX:fe,ve=nt.shadowOffsetY,Ae=void 0===ve?lt.shadowOffsetY:ve;Uf(he,re/Math.abs(Ht+$t)*2,!1,ce+1),he.translate(pe,Ae),at.union(he)}}if(this.combindShadowAABBBounds(at,Bt),!at.empty()){var we=!0,Ce=Bt.transMatrix;Bt&&Bt.isContainer&&(we=!(1===Ce.a&&0===Ce.b&&0===Ce.c&&1===Ce.d&&0===Ce.e&&0===Ce.f)),we&&ci(at,at,Ce)}}},{"key":"validCheck","value":function(nt,at,lt,Rt){if(!Rt)return!0;if(null!=nt.forceBoundsHeight||null!=nt.forceBoundsWidth)return!0;if(Rt.shadowRoot||Rt.isContainer)return!0;var Bt=nt.visible,Lt=void 0===Bt?at.visible:Bt;return!(!Rt.valid||!Lt)||(lt.empty()||(Rt.parent&&lt.transformWithMatrix(Rt.parent.globalTransMatrix),oc.graphicService.clearAABBBounds(Rt,Rt.stage,lt),lt.clear()),!1)}},{"key":"updateTempAABBBounds","value":function(nt){var at=this.tempAABBBounds1,lt=this.tempAABBBounds2;return at.setValue(nt.x1,nt.y1,nt.x2,nt.y2),lt.setValue(nt.x1,nt.y1,nt.x2,nt.y2),{"tb1":at,"tb2":lt}}}]);Lg=Sg([Hs(),wg(0,Gs(kv)),Ag("design:paramtypes",[Object])],Lg);var Cg=function(nt,at,lt){var Rt=nt.outerBorder,Bt=nt.shadowBlur,Lt=void 0===Bt?at.shadowBlur:Bt;if(Rt){var Ht=at.outerBorder,jt=Rt.distance,$t=void 0===jt?Ht.distance:jt,Kt=Rt.lineWidth,te=void 0===Kt?Ht.lineWidth:Kt;lt.expand($t+(Lt+te)/2)}return lt},Fg=["radius","startAngle","endAngle"].concat(m(Tv)),Hg=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"radius":1};return r(this,e),(nt=n(this,e,[at])).type="circle",nt.numberType=lv,nt}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute,at=nt.startAngle,lt=nt.endAngle,Rt=nt.radius;return this._validNumber(at)&&this._validNumber(lt)&&this._validNumber(Rt)}},{"key":"getGraphicTheme","value":function(){return yh(this).circle}},{"key":"updateAABBBounds","value":function(nt,at,lt,Rt){this.updatePathProxyAABBBounds(lt)||(Rt?this.updateCircleAABBBoundsImprecise(nt,at,lt):this.updateCircleAABBBoundsAccurate(nt,at,lt));var Bt=oc.graphicService.updateTempAABBBounds(lt),Lt=Bt.tb1,Ht=Bt.tb2;return Cg(nt,at,Lt),lt.union(Lt),Lt.setValue(Ht.x1,Ht.y1,Ht.x2,Ht.y2),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),lt}},{"key":"updateCircleAABBBoundsImprecise","value":function(nt,at,lt){var Rt=nt.radius,Bt=void 0===Rt?at.radius:Rt;return lt.set(-Bt,-Bt,Bt,Bt),lt}},{"key":"updateCircleAABBBoundsAccurate","value":function(nt,at,lt){var Rt=nt.startAngle,Bt=void 0===Rt?at.startAngle:Rt,Lt=nt.endAngle,Ht=void 0===Lt?at.endAngle:Lt,jt=nt.radius,$t=void 0===jt?at.radius:jt;return Ht-Bt>de-le?lt.set(-$t,-$t,$t,$t):nd(Bt,Ht,$t,lt),lt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,Fg])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,Fg])}},{"key":"toCustomPath","value":function(){var nt,at,lt,Rt=this.attribute,Bt=null!==(nt=Rt.radius)&&void 0!==nt?nt:this.getDefaultAttribute("radius"),Lt=null!==(at=Rt.startAngle)&&void 0!==at?at:this.getDefaultAttribute("startAngle"),Ht=null!==(lt=Rt.endAngle)&&void 0!==lt?lt:this.getDefaultAttribute("endAngle"),jt=new Ou;return jt.arc(0,0,Bt,Lt,Ht),jt}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function Rg(nt){return new Hg(nt)}Hg.NOWORK_ANIMATE_ATTR=Ov;var jg=o((function t(nt,at,lt){r(this,t),this.fontFamily=nt,this.textOptions=at,this.textMeasure=lt}),[{"key":"LayoutBBox","value":function(nt,at,lt,Rt){if(nt.xOffset="left"===at||"start"===at?0:"center"===at?nt.width/-2:"right"===at||"end"===at?-nt.width:0,"top"===lt)nt.yOffset=0;else if("middle"===lt)nt.yOffset=nt.height/-2;else if("alphabetic"===lt){var Bt=.79;if(1===Rt.length){var Lt=Rt[0];Bt=Lt.ascent/(Lt.ascent+Lt.descent)}nt.yOffset=nt.height*-Bt}else nt.yOffset=-nt.height;return nt}},{"key":"GetLayoutByLines","value":function(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",Lt=arguments.length>5?arguments[5]:void 0,Ht=arguments.length>6?arguments[6]:void 0,jt=null!=Ht?Ht:{},$t=jt.lineWidth,Kt=jt.suffixPosition,te=void 0===Kt?"end":Kt,ne=jt.measureMode,re=void 0===ne?fl.actualBounding:ne,ae=jt.keepCenterInLine,oe=void 0!==ae&&ae;nt=nt.map((function(nt){return nt.toString()}));var se=[],le=[0,0];if("number"==typeof $t&&$t!==1/0){for(var ue,ce=0,he=nt.length;ce<he;ce++){var de=this.textMeasure.measureTextPixelADscentAndWidth(nt[ce],this.textOptions,re),fe=nt[ce].toString();if(de.width>$t){var pe=this.textMeasure.clipTextWithSuffix(nt[ce],this.textOptions,$t,Bt,Lt,te);fe=pe.str,ue=pe.width}else ue=de.width;se.push({"str":fe,"width":ue,"ascent":de.ascent,"descent":de.descent,"keepCenterInLine":oe})}le[0]=$t}else{for(var ve,Ae,we=0,Ce=0,je=nt.length;Ce<je;Ce++){Ae=nt[Ce];var Ne=this.textMeasure.measureTextPixelADscentAndWidth(nt[Ce],this.textOptions,re);ve=Ne.width,we=Math.max(we,ve),se.push({"str":Ae,"width":ve,"ascent":Ne.ascent,"descent":Ne.descent,"keepCenterInLine":oe})}le[0]=we}le[1]=se.length*Rt,le[0]=se.reduce((function(nt,at){return Math.max(nt,at.width)}),0);var Ve={"xOffset":0,"yOffset":0,"width":le[0],"height":le[1]};return this.LayoutBBox(Ve,at,lt,se),this.layoutWithBBox(Ve,se,at,lt,Rt)}},{"key":"layoutWithBBox","value":function(nt,at,lt,Rt,Bt){var Lt=[0,0],Ht=at.length*Bt;"top"===Rt||("middle"===Rt?Lt[1]=(nt.height-Ht)/2:"bottom"===Rt&&(Lt[1]=nt.height-Ht));for(var jt=0;jt<at.length;jt++)this.lineOffset(nt,at[jt],lt,Rt,Bt,Lt);return{"bbox":nt,"lines":at,"fontFamily":this.fontFamily,"fontSize":this.textOptions.fontSize,"fontWeight":this.textOptions.fontWeight,"lineHeight":Bt,"textAlign":lt,"textBaseline":Rt}}},{"key":"lineOffset","value":function(nt,at,lt,Rt,Bt,Lt){if("left"===lt||"start"===lt?at.leftOffset=0:"center"===lt?at.leftOffset=(nt.width-at.width)/2:"right"!==lt&&"end"!==lt||(at.leftOffset=nt.width-at.width),at.topOffset=Bt/2+(at.ascent-at.descent)/2+Lt[1],!at.keepCenterInLine){var Ht=at.ascent+at.descent+0;if(Ht<Bt-0&&("bottom"===Rt?at.topOffset+=(Bt-Ht)/2:"top"===Rt&&(at.topOffset-=(Bt-Ht)/2)),"alphabetic"===Rt){var jt=Bt/(at.ascent+at.descent);at.topOffset=Bt/2+(at.ascent-at.descent)/2*jt+Lt[1]}}return Lt[1]+=Bt,at}}]),Vg=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp"].concat(m(Tv)),Gg=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"text":"","fontSize":16};return r(this,e),(nt=n(this,e,[at])).type="text",nt.numberType=bv,nt.cache={},nt}return h(e,nt),o(e,[{"key":"font","get":function(){var nt=this.getGraphicTheme();return this._font||(this._font=si(this.attribute,nt)),this._font}},{"key":"clipedText","get":function(){var nt,at=this.attribute,lt=this.getGraphicTheme(),Rt=this.getMaxWidth(lt);return Number.isFinite(Rt)?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!==(nt=at.text)&&void 0!==nt?nt:lt.text).toString()}},{"key":"clipedWidth","get":function(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}},{"key":"cliped","get":function(){var nt,at,lt=this.getGraphicTheme(),Rt=this.attribute,Bt=this.getMaxWidth(lt);if(!Number.isFinite(Bt))return!1;var Lt=this.attribute.text;if(this.tryUpdateAABBBounds(),null===(at=null===(nt=this.cache)||void 0===nt?void 0:nt.layoutData)||void 0===at?void 0:at.lines){var Ht="";return this.cache.layoutData.lines.forEach((function(nt){Ht+=nt.str})),(Array.isArray(Lt)?Lt.join(""):Lt)!==Ht}return"vertical"===Rt.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map((function(nt){return nt.text})).join("")!==Rt.text.toString():null!=this.clipedText&&this.clipedText!==Rt.text.toString()}},{"key":"multilineLayout","get":function(){return this.tryUpdateAABBBounds(),this.cache.layoutData}},{"key":"isMultiLine","get":function(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}},{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute.text;return X(nt)?!nt.every((function(nt){return null==nt||""===nt})):null!=nt&&""!==nt}},{"key":"getGraphicTheme","value":function(){return yh(this).text}},{"key":"doUpdateOBBBounds","value":function(){var nt=this.getGraphicTheme();this._OBBBounds.clear();var at=this.attribute,lt=at.angle,Rt=void 0===lt?nt.angle:lt;if(!Rt){var Bt=this.AABBBounds;return this._OBBBounds.setValue(Bt.x1,Bt.y1,Bt.x2,Bt.y2),this._OBBBounds}this.obbText||(this.obbText=new e({})),this.obbText.setAttributes(Object.assign(Object.assign({},at),{"angle":0}));var Lt=this.obbText.AABBBounds,Ht=at.x,jt=at.y,$t={"x":(Lt.x1+Lt.x2)/2,"y":(Lt.y1+Lt.y2)/2},Kt=qe($t,Rt,{"x":Ht,"y":jt});return this._OBBBounds.copy(Lt),this._OBBBounds.translate(Kt.x-$t.x,Kt.y-$t.y),this._OBBBounds.angle=Rt,this._OBBBounds}},{"key":"updateAABBBounds","value":function(nt,at,lt){var Rt=this.attribute.text,Bt=void 0===Rt?at.text:Rt;Array.isArray(Bt)?this.updateMultilineAABBBounds(Bt):this.updateSingallineAABBBounds(Bt);var Lt=oc.graphicService.updateTempAABBBounds(lt).tb1,Ht=nt.scaleX,jt=void 0===Ht?at.scaleX:Ht,$t=nt.scaleY,Kt=void 0===$t?at.scaleY:$t,te=nt.shadowBlur,ne=void 0===te?at.shadowBlur:te,re=nt.strokeBoundsBuffer,ae=void 0===re?at.strokeBoundsBuffer:re;return ne&&(Uf(Lt,ne/Math.abs(jt+Kt),!0,ae),lt.union(Lt)),oc.graphicService.combindShadowAABBBounds(lt,this),null==nt.forceBoundsHeight&&null==nt.forceBoundsWidth||oc.graphicService.updateHTMLTextAABBBounds(nt,at,lt),ci(lt,lt,this.transMatrix),lt}},{"key":"updateSingallineAABBBounds","value":function(nt){this.updateMultilineAABBBounds([nt]);var at=this.cache.layoutData;if(at&&at.lines&&at.lines.length){var lt=at.lines[0];this.cache.clipedText=lt.str,this.cache.clipedWidth=lt.width}return this._AABBBounds}},{"key":"updateMultilineAABBBounds","value":function(nt){var at=this.getGraphicTheme(),lt=this.attribute,Rt=lt.direction,Bt=void 0===Rt?at.direction:Rt,Lt=lt.underlineOffset,Ht=void 0===Lt?at.underlineOffset:Lt,jt="horizontal"===Bt?this.updateHorizontalMultilineAABBBounds(nt):this.updateVerticalMultilineAABBBounds(nt);return"horizontal"===Bt&&Ht&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+Ht),jt}},{"key":"guessLineHeightBuf","value":function(nt){return nt?.1*nt:0}},{"key":"updateHorizontalMultilineAABBBounds","value":function(nt){var at,lt=this.getGraphicTheme(),Rt=this.attribute,Bt=Rt.fontFamily,Lt=void 0===Bt?lt.fontFamily:Bt,Ht=Rt.textAlign,jt=void 0===Ht?lt.textAlign:Ht,$t=Rt.textBaseline,Kt=void 0===$t?lt.textBaseline:$t,te=Rt.fontSize,ne=void 0===te?lt.fontSize:te,re=Rt.fontWeight,ae=void 0===re?lt.fontWeight:re,oe=Rt.ellipsis,se=void 0===oe?lt.ellipsis:oe,le=Rt.maxLineWidth,ue=Rt.stroke,ce=void 0===ue?lt.stroke:ue,he=Rt.wrap,de=void 0===he?lt.wrap:he,fe=Rt.measureMode,pe=void 0===fe?lt.measureMode:fe,ve=Rt.lineWidth,Ae=void 0===ve?lt.lineWidth:ve,we=Rt.whiteSpace,Ce=void 0===we?lt.whiteSpace:we,je=Rt.suffixPosition,Ne=void 0===je?lt.suffixPosition:je,Ve=Rt.ignoreBuf,Ge=void 0===Ve?lt.ignoreBuf:Ve,ti=Rt.keepCenterInLine,li=void 0===ti?lt.keepCenterInLine:ti,hi=Ge?0:this.guessLineHeightBuf(ne),di=this.getLineHeight(Rt,lt,hi);if("normal"===Ce||de)return this.updateWrapAABBBounds(nt);if(!this.shouldUpdateShape()&&(null===(at=this.cache)||void 0===at?void 0:at.layoutData)){var fi=this.cache.layoutData.bbox;return this._AABBBounds.set(fi.xOffset,fi.yOffset,fi.xOffset+fi.width,fi.yOffset+fi.height),ce&&this._AABBBounds.expand(Ae/2),this._AABBBounds}var pi=oc.graphicUtil.textMeasure,vi=new jg(Lt,{"fontSize":ne,"fontWeight":ae,"fontFamily":Lt,"lineHeight":di},pi).GetLayoutByLines(nt,jt,Kt,di,!0===se?lt.ellipsis:se||void 0,!1,{"lineWidth":le,"suffixPosition":Ne,"measureMode":pe,"keepCenterInLine":li}),mi=vi.bbox;return this.cache.layoutData=vi,this.clearUpdateShapeTag(),this._AABBBounds.set(mi.xOffset,mi.yOffset,mi.xOffset+mi.width,mi.yOffset+mi.height),ce&&this._AABBBounds.expand(Ae/2),this._AABBBounds}},{"key":"updateWrapAABBBounds","value":function(nt){var at,lt,Rt,Bt=this.getGraphicTheme(),Lt=this.attribute,Ht=Lt.fontFamily,jt=void 0===Ht?Bt.fontFamily:Ht,$t=Lt.textAlign,Kt=void 0===$t?Bt.textAlign:$t,te=Lt.textBaseline,ne=void 0===te?Bt.textBaseline:te,re=Lt.fontSize,ae=void 0===re?Bt.fontSize:re,oe=Lt.ellipsis,se=void 0===oe?Bt.ellipsis:oe,le=Lt.maxLineWidth,ue=Lt.stroke,ce=void 0===ue?Bt.stroke:ue,he=Lt.lineWidth,de=void 0===he?Bt.lineWidth:he,fe=Lt.wordBreak,pe=void 0===fe?Bt.wordBreak:fe,ve=Lt.fontWeight,Ae=void 0===ve?Bt.fontWeight:ve,we=Lt.ignoreBuf,Ce=void 0===we?Bt.ignoreBuf:we,je=Lt.measureMode,Ne=void 0===je?Bt.measureMode:je,Ve=Lt.suffixPosition,Ge=void 0===Ve?Bt.suffixPosition:Ve,ti=Lt.heightLimit,li=void 0===ti?0:ti,hi=Lt.lineClamp,di=Lt.keepCenterInLine,fi=void 0===di?Bt.keepCenterInLine:di,pi=Ce?0:this.guessLineHeightBuf(ae),vi=this.getLineHeight(this.attribute,Bt,pi);if(!this.shouldUpdateShape()&&(null===(at=this.cache)||void 0===at?void 0:at.layoutData)){var mi=this.cache.layoutData.bbox;return this._AABBBounds.set(mi.xOffset,mi.yOffset,mi.xOffset+mi.width,mi.yOffset+mi.height),ce&&this._AABBBounds.expand(de/2),this._AABBBounds}var _i=oc.graphicUtil.textMeasure,bi={"fontSize":ae,"fontWeight":Ae,"fontFamily":jt,"lineHeight":vi},Mi=new jg(jt,bi,_i),Ti=X(nt)?nt.map((function(nt){return nt.toString()})):[nt.toString()],Ii=[],Bi=[0,0],zi=1/0;if(li>0&&(zi=Math.max(Math.floor(li/vi),1)),hi&&(zi=Math.min(zi,hi)),"number"==typeof le&&le!==1/0){if(le>0)for(var Wi=0;Wi<Ti.length;Wi++){var Ui=Ti[Wi],$i=!0;if(Wi===zi-1){var qi=_i.clipTextWithSuffix(Ui,bi,le,se,!1,Ge,Wi!==Ti.length-1),Ki=_i.measureTextPixelADscentAndWidth(qi.str,bi,Ne);Ii.push({"str":qi.str,"width":qi.width,"ascent":Ki.ascent,"descent":Ki.descent,"keepCenterInLine":fi});break}var Qi=_i.clipText(Ui,bi,le,"break-all"!==pe,"keep-all"===pe);if(""!==Ui&&""===Qi.str||Qi.wordBreaked){if(se){var Ji=_i.clipTextWithSuffix(Ui,bi,le,se,!1,Ge);Qi.str=null!==(lt=Ji.str)&&void 0!==lt?lt:"",Qi.width=null!==(Rt=Ji.width)&&void 0!==Rt?Rt:0}else Qi.str="",Qi.width=0;$i=!1}var dn=_i.measureTextPixelADscentAndWidth(Qi.str,bi,Ne);Ii.push({"str":Qi.str,"width":Qi.width,"ascent":dn.ascent,"descent":dn.descent,"keepCenterInLine":fi});var fn=Qi.str.length;if(!Qi.wordBreaked||""!==Ui&&""===Qi.str||($i=!0,fn=Qi.wordBreaked),Qi.str.length===Ui.length);else if($i){var vn=Ui.substring(fn);"keep-all"===pe&&(vn=vn.replace(/^\s+/g,"")),Ti.splice(Wi+1,0,vn)}}var gn=0;Ii.forEach((function(nt){gn=Math.max(gn,nt.width)})),Bi[0]=gn}else{for(var yn,mn,_n=0,bn=0,xn=Ti.length;bn<xn;bn++){if(bn===zi-1){var kn=_i.clipTextWithSuffix(Ti[bn],bi,le,se,!1,Ge),Sn=_i.measureTextPixelADscentAndWidth(kn.str,bi,Ne);Ii.push({"str":kn.str,"width":kn.width,"ascent":Sn.ascent,"descent":Sn.descent,"keepCenterInLine":fi}),_n=Math.max(_n,kn.width);break}mn=Ti[bn],yn=_i.measureTextWidth(mn,bi),_n=Math.max(_n,yn);var An=_i.measureTextPixelADscentAndWidth(mn,bi,Ne);Ii.push({"str":mn,"width":yn,"ascent":An.ascent,"descent":An.descent,"keepCenterInLine":fi})}Bi[0]=_n}Bi[1]=Ii.length*vi;var wn={"xOffset":0,"yOffset":0,"width":Bi[0],"height":Bi[1]};Mi.LayoutBBox(wn,Kt,ne,Ii);var Cn=Mi.layoutWithBBox(wn,Ii,Kt,ne,vi);return this.cache.layoutData=Cn,this.clearUpdateShapeTag(),this._AABBBounds.set(wn.xOffset,wn.yOffset,wn.xOffset+wn.width,wn.yOffset+wn.height),ce&&this._AABBBounds.expand(de/2),this._AABBBounds}},{"key":"updateVerticalMultilineAABBBounds","value":function(nt){var at,lt,Rt,Bt=this.getGraphicTheme(),Lt=oc.graphicUtil.textMeasure,Ht=this.attribute,jt=Ht.maxLineWidth,$t=void 0===jt?Bt.maxLineWidth:jt,Kt=Ht.ellipsis,te=void 0===Kt?Bt.ellipsis:Kt,ne=Ht.fontFamily,re=void 0===ne?Bt.fontFamily:ne,ae=Ht.fontSize,oe=void 0===ae?Bt.fontSize:ae,se=Ht.fontWeight,le=void 0===se?Bt.fontWeight:se,ue=Ht.stroke,ce=void 0===ue?Bt.stroke:ue,he=Ht.lineWidth,de=void 0===he?Bt.lineWidth:he,fe=Ht.verticalMode,pe=void 0===fe?Bt.verticalMode:fe,ve=Ht.suffixPosition,we=void 0===ve?Bt.suffixPosition:ve,Ce=this.getLineHeight(Ht,Bt,0),je=Ht.textAlign,Ne=void 0===je?Bt.textAlign:je,Ve=Ht.textBaseline,Ge=void 0===Ve?Bt.textBaseline:Ve;if(!pe){var ti=Ne;Ne=null!==(at=e.baselineMapAlign[Ge])&&void 0!==at?at:"left",Ge=null!==(lt=e.alignMapBaseline[ti])&&void 0!==lt?lt:"top"}if(Rt=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach((function(nt){var at=nt.reduce((function(nt,at){return nt+at.width}),0);Rt=Ae(at,Rt)}));var li=dg(Ne,Rt),hi=this.cache.verticalList.length*Ce,di=pg(Ge,hi,oe);return this._AABBBounds.set(di,li,di+hi,li+Rt),ce&&this._AABBBounds.expand(de/2),this._AABBBounds}var fi=nt.map((function(nt){return function(nt){for(var at=[],lt=0,Rt="",Bt=0;Bt<nt.length;Bt++)Jf(nt[Bt])?lt?Rt+=nt[Bt]:(lt=1,Rt=nt[Bt]):(lt&&(at.push({"text":Rt,"direction":tv.VERTICAL}),Rt="",lt=0),at.push({"text":nt[Bt],"direction":tv.HORIZONTAL}));return Rt&&at.push({"text":Rt,"direction":tv.VERTICAL}),at}(nt.toString())}));fi.forEach((function(nt,at){if(Number.isFinite($t))if(te){var lt=!0===te?Bt.ellipsis:te,Ht=Lt.clipTextWithSuffixVertical(nt,{"fontSize":oe,"fontWeight":le,"fontFamily":re},$t,lt,!1,we);fi[at]=Ht.verticalList,Rt=Ht.width}else{var jt=Lt.clipTextVertical(nt,{"fontSize":oe,"fontWeight":le,"fontFamily":re},$t,!1);fi[at]=jt.verticalList,Rt=jt.width}else Rt=0,nt.forEach((function(nt){var at=nt.direction===tv.HORIZONTAL?oe:Lt.measureTextWidth(nt.text,{"fontSize":oe,"fontWeight":le,"fontFamily":re});Rt+=at,nt.width=at}))})),this.cache.verticalList=fi,this.clearUpdateShapeTag(),this.cache.verticalList.forEach((function(nt){var at=nt.reduce((function(nt,at){return nt+at.width}),0);Rt=Ae(at,Rt)}));var pi=dg(Ne,Rt),vi=this.cache.verticalList.length*Ce,mi=pg(Ge,vi,oe);return this._AABBBounds.set(mi,pi,mi+vi,pi+Rt),ce&&this._AABBBounds.expand(de/2),this._AABBBounds}},{"key":"getMaxWidth","value":function(nt){var at,lt,Rt=this.attribute;return null!==(lt=null!==(at=Rt.maxLineWidth)&&void 0!==at?at:Rt.maxWidth)&&void 0!==lt?lt:nt.maxWidth}},{"key":"getLineHeight","value":function(nt,at,lt){var Rt;return null!==(Rt=hd(nt.lineHeight,nt.fontSize||at.fontSize))&&void 0!==Rt?Rt:(nt.fontSize||at.fontSize)+lt}},{"key":"needUpdateTags","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vg;return y(e,"needUpdateTags",this,3)([nt,at])}},{"key":"needUpdateTag","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vg;return y(e,"needUpdateTag",this,3)([nt,at])}},{"key":"_interpolate","value":function(nt,at,lt,Rt,Bt){"text"===nt&&(Bt.text=Rt)}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}},{"key":"getBaselineMapAlign","value":function(){return e.baselineMapAlign}},{"key":"getAlignMapBaseline","value":function(){return e.alignMapBaseline}}])}(Dv);function Dg(nt){return new Gg(nt)}Gg.NOWORK_ANIMATE_ATTR=Object.assign({"ellipsis":1,"wordBreak":1,"direction":1,"textAlign":1,"textBaseline":1,"fontFamily":1,"fontWeight":1},Ov),Gg.baselineMapAlign={"top":"left","bottom":"right","middle":"center"},Gg.alignMapBaseline={"left":"top","right":"bottom","center":"middle"};var Ug=["symbolType","size"].concat(m(Tv)),Yg=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"symbolType":"circle"};return r(this,e),(nt=n(this,e,[at])).type="symbol",nt.numberType=_v,nt}return h(e,nt),o(e,[{"key":"getParsedPath","value":function(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}},{"key":"getParsedPath2D","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Rt=null;try{Rt=new Path2D}catch(nt){return null}var Bt=this.getParsedPath();if(!Bt)return null;Bt.draw(Rt,lt,nt,at)}},{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute.size;return X(nt)?2===nt.length&&nt.every(this._validNumber):this._validNumber(nt)}},{"key":"doUpdateParsedPath","value":function(){var nt=this.attribute.symbolType,at=void 0===nt?"circle":nt;return y(e,"parsePath",this,3)([at])}},{"key":"getGraphicTheme","value":function(){return yh(this).symbol}},{"key":"updateAABBBounds","value":function(nt,at,lt,Rt){this.updatePathProxyAABBBounds(lt)||(Rt?this.updateSymbolAABBBoundsImprecise(nt,at,lt):this.updateSymbolAABBBoundsAccurate(nt,at,lt));var Bt=oc.graphicService.updateTempAABBBounds(lt),Lt=Bt.tb1,Ht=Bt.tb2;(function(nt,at,lt){var Rt=nt.outerBorder,Bt=nt.shadowBlur,Lt=void 0===Bt?at.shadowBlur:Bt,Ht=nt.strokeBoundsBuffer,jt=void 0===Ht?at.strokeBoundsBuffer:Ht;if(Rt){var $t=at.outerBorder,Kt=Rt.distance,te=void 0===Kt?$t.distance:Kt,ne=Rt.lineWidth;Uf(lt,te+(Lt+(void 0===ne?$t.lineWidth:ne))/2,!0,jt)}})(nt,at,Lt),lt.union(Lt),Lt.setValue(Ht.x1,Ht.y1,Ht.x2,Ht.y2);var jt=nt.lineJoin,$t=void 0===jt?at.lineJoin:jt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===$t,this),lt}},{"key":"updateSymbolAABBBoundsImprecise","value":function(nt,at,lt){var Rt=nt.size,Bt=void 0===Rt?at.size:Rt;if(X(Bt))lt.set(-Bt[0]/2,-Bt[1]/2,Bt[0]/2,Bt[1]/2);else{var Lt=Bt/2;lt.set(-Lt,-Lt,Lt,Lt)}return lt}},{"key":"updateSymbolAABBBoundsAccurate","value":function(nt,at,lt){var Rt=nt.size,Bt=void 0===Rt?at.size:Rt;return this.getParsedPath().bounds(Bt,lt),lt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,Ug])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,Ug])}},{"key":"toCustomPath","value":function(){var nt=this.getParsedPath(),at=this.attribute.size,lt=X(at)?at:[at,at];return nt.path?(new Ou).fromCustomPath2D(nt.path,0,0,lt[0],lt[1]):(new Ou).fromString(nt.pathStr,0,0,lt[0],lt[1])}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function zg(nt){return new Yg(nt)}Yg.NOWORK_ANIMATE_ATTR=Object.assign({"symbolType":1},Ov);var $g=["segments","points","curveType","curveTension"].concat(m(Tv)),Kg=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(nt=n(this,e,[at])).type="line",nt.numberType=dv,nt}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){if(this.pathProxy)return!0;var nt=this.attribute,at=nt.points,lt=nt.segments;return lt?0!==lt.length:!(!at||at.length<=1)}},{"key":"_interpolate","value":function(nt,at,lt,Rt,Bt){"points"===nt&&(Bt.points=ad(lt,Rt,at))}},{"key":"getGraphicTheme","value":function(){return yh(this).line}},{"key":"updateAABBBounds","value":function(nt,at,lt){this.updatePathProxyAABBBounds(lt)||(nt.segments?this.updateLineAABBBoundsBySegments(nt,at,lt):this.updateLineAABBBoundsByPoints(nt,at,lt)),oc.graphicService.updateTempAABBBounds(lt);var Rt=nt.lineJoin,Bt=void 0===Rt?at.lineJoin:Rt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===Bt,this),lt}},{"key":"updateLineAABBBoundsByPoints","value":function(nt,at,lt,Rt){var Bt=nt.points,Lt=void 0===Bt?at.points:Bt,Ht=nt.connectedType,jt=lt;return Lt.forEach((function(nt){!1===nt.defined&&"connect"!==Ht||jt.add(nt.x,nt.y)})),jt}},{"key":"updateLineAABBBoundsBySegments","value":function(nt,at,lt,Rt){var Bt=nt.segments,Lt=void 0===Bt?at.segments:Bt,Ht=nt.connectedType,jt=lt;return Lt.forEach((function(nt){nt.points.forEach((function(nt){!1===nt.defined&&"connect"!==Ht||jt.add(nt.x,nt.y)}))})),jt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,$g])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,$g])}},{"key":"toCustomPath","value":function(){var nt=this.attribute,at=new Ou,lt=nt.segments,n=function(nt){if(nt&&nt.length){var lt=!0;nt.forEach((function(nt){!1!==nt.defined&&(lt?at.moveTo(nt.x,nt.y):at.lineTo(nt.x,nt.y),lt=!1)}))}};return lt&&lt.length?lt.forEach((function(nt){n(nt.points)})):nt.points&&n(nt.points),at}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function Ng(nt){return new Kg(nt)}Kg.NOWORK_ANIMATE_ATTR=Object.assign({"segments":1,"curveType":1},Ov);var Zg=["width","x1","y1","height","cornerRadius"].concat(m(Tv)),Qg=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="rect",at.numberType=gv,at}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){return!0}},{"key":"getGraphicTheme","value":function(){return yh(this).rect}},{"key":"updateAABBBounds","value":function(nt,at,lt){if(!this.updatePathProxyAABBBounds(lt)){var Rt=nt.width,Bt=nt.height,Lt=nt.x1,Ht=nt.y1,jt=nt.x,$t=nt.y;Rt=null!=Rt?Rt:Lt-jt,Bt=null!=Bt?Bt:Ht-$t,(isFinite(Rt)||isFinite(Bt)||isFinite(jt)||isFinite($t))&&lt.set(0,0,Rt||0,Bt||0)}var Kt=oc.graphicService.updateTempAABBBounds(lt),te=Kt.tb1,ne=Kt.tb2;return Cg(nt,at,te),lt.union(te),te.setValue(ne.x1,ne.y1,ne.x2,ne.y2),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),lt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,Zg])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,Zg])}},{"key":"toCustomPath","value":function(){var nt=this.attribute,at=Pd(nt),lt=at.x,Rt=at.y,Bt=at.width,Lt=at.height,Ht=new Ou;return Ht.moveTo(lt,Rt),Ht.rect(lt,Rt,Bt,Lt),Ht}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function Wg(nt){return new Qg(nt)}Qg.NOWORK_ANIMATE_ATTR=Ov;var ty=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],iy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="rect3d",at.numberType=yv,at}return h(e,nt),o(e,[{"key":"findFace","value":function(){var nt={"polygons":[],"vertices":[],"edges":[]},at=this.getGraphicTheme(),lt=this.attribute,Rt=lt.x1,Bt=lt.y1,Lt=lt.x,Ht=lt.y,jt=lt.length,$t=void 0===jt?we(at.width,at.height):jt,Kt=this.attribute,te=Kt.width,ne=Kt.height;te=null!=te?te:Rt-Lt,ne=null!=ne?ne:Bt-Ht;for(var re=0;re<ty.length;re++){var ae=ty[re];nt.vertices.push([ae[0]*te,ae[1]*ne,ae[2]*$t])}return nt.polygons.push({"polygon":[0,1,5,4],"normal":[0,-1,0]}),nt.polygons.push({"polygon":[2,3,7,6],"normal":[0,1,0]}),nt.polygons.push({"polygon":[4,7,3,0],"normal":[-1,0,0]}),nt.polygons.push({"polygon":[1,2,6,5],"normal":[1,0,0]}),nt.polygons.push({"polygon":[0,1,2,3],"normal":[0,0,-1]}),nt.polygons.push({"polygon":[4,5,6,7],"normal":[0,0,1]}),nt.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],nt}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Qg);function Xg(nt){return new iy(nt)}iy.NOWORK_ANIMATE_ATTR=Ov;var ny=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="glyph",at.numberType=uv,at.subGraphic=[],at._onInit&&at._onInit(i(at)),at.valid=at.isValid(),at}return h(e,nt),o(e,[{"key":"setSubGraphic","value":function(nt){var at=this;this.detachSubGraphic(),this.subGraphic=nt,nt.forEach((function(nt){nt.glyphHost=at,Object.setPrototypeOf(nt.attribute,at.attribute)})),this.valid=this.isValid(),this.addUpdateBoundTag()}},{"key":"detachSubGraphic","value":function(){this.subGraphic.forEach((function(nt){nt.glyphHost=null,Object.setPrototypeOf(nt.attribute,{})}))}},{"key":"getSubGraphic","value":function(){return this.subGraphic}},{"key":"onInit","value":function(nt){this._onInit=nt}},{"key":"onUpdate","value":function(nt){this._onUpdate=nt}},{"key":"isValid","value":function(){return!0}},{"key":"setAttribute","value":function(nt,at,lt,Rt){y(e,"setAttribute",this,3)([nt,at,lt,Rt]),this.subGraphic.forEach((function(nt){nt.addUpdateShapeAndBoundsTag(),nt.addUpdatePositionTag()}))}},{"key":"setAttributes","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=arguments.length>2?arguments[2]:void 0;y(e,"setAttributes",this,3)([nt,at,lt]),this.subGraphic.forEach((function(nt){nt.addUpdateShapeAndBoundsTag(),nt.addUpdatePositionTag()}))}},{"key":"translate","value":function(nt,at){return y(e,"translate",this,3)([nt,at]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"translateTo","value":function(nt,at){return y(e,"translateTo",this,3)([nt,at]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"scale","value":function(nt,at,lt){return y(e,"scale",this,3)([nt,at,lt]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"scaleTo","value":function(nt,at){return y(e,"scaleTo",this,3)([nt,at]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"rotate","value":function(nt){return y(e,"rotate",this,3)([nt]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"rotateTo","value":function(nt){return y(e,"rotate",this,3)([nt]),this.subGraphic.forEach((function(nt){nt.addUpdatePositionTag(),nt.addUpdateBoundTag()})),this}},{"key":"getGraphicTheme","value":function(){return yh(this).glyph}},{"key":"updateAABBBounds","value":function(nt,at,lt){return this.getSubGraphic().forEach((function(nt){lt.union(nt.AABBBounds)})),lt}},{"key":"doUpdateAABBBounds","value":function(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();var nt=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),nt}},{"key":"needUpdateTags","value":function(nt){return!1}},{"key":"needUpdateTag","value":function(nt){return!1}},{"key":"useStates","value":function(nt,at){var lt,Rt=this;if(nt.length){if((null===(lt=this.currentStates)||void 0===lt?void 0:lt.length)!==nt.length||nt.some((function(nt,at){return Rt.currentStates[at]!==nt}))){this.stopStateAnimates();var Bt={},Lt=this.subGraphic.map((function(){return{}}));nt.forEach((function(at){var lt,Ht=Rt.glyphStateProxy?Rt.glyphStateProxy(at,nt):Rt.glyphStates[at];Ht&&(Object.assign(Bt,Ht.attributes),(null===(lt=Ht.subAttributes)||void 0===lt?void 0:lt.length)&&Lt.forEach((function(nt,at){Object.assign(nt,Ht.subAttributes[at])})))})),this.subGraphic.forEach((function(lt,Rt){lt.updateNormalAttrs(Lt[Rt]),lt.applyStateAttrs(Lt[Rt],nt,at)})),this.updateNormalAttrs(Bt),this.currentStates=nt,this.applyStateAttrs(Bt,nt,at)}}else this.clearStates(at)}},{"key":"clearStates","value":function(nt){var at=this;this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.subGraphic.forEach((function(lt){lt.applyStateAttrs(lt.normalAttrs,at.currentStates,nt,!0),lt.normalAttrs=null})),this.applyStateAttrs(this.normalAttrs,this.currentStates,nt,!0)):this.currentStates=[],this.normalAttrs=null}},{"key":"clone","value":function(){var nt=new e(Object.assign({},this.attribute));return nt.setSubGraphic(this.subGraphic.map((function(nt){return nt.clone()}))),nt}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function qg(nt){return new ny(nt)}ny.NOWORK_ANIMATE_ATTR=Ov;var ry=o((function t(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae){r(this,t),this.left=nt,this.top=at,this.width=lt,this.height=Rt,this.actualHeight=0,this.bottom=at+Rt,this.right=nt+lt,this.ellipsis=Bt,this.wordBreak=Lt,this.verticalDirection=Ht,this.lines=[],this.globalAlign=jt,this.globalBaseline=$t,this.layoutDirection=Kt,this.directionKey=uc[this.layoutDirection],this.isWidthMax=te,this.isHeightMax=ne,this.singleLine=re,ae?(ae.clear(),this.icons=ae):this.icons=new Map}),[{"key":"draw","value":function(nt,at){var lt=this.getActualSize(),Rt=lt.width,Bt=lt.height,Lt=this.isWidthMax?Math.min(this.width,Rt):this.width||Rt||0,Ht=this.isHeightMax?Math.min(this.height,Bt):this.height||Bt||0;Ht=Math.min(Ht,Bt);var jt=0;switch(this.globalBaseline){case"top":jt=0;break;case"middle":jt=-Ht/2;break;case"bottom":jt=-Ht}var $t=0;"right"===this.globalAlign||"end"===this.globalAlign?$t=-Lt:"center"===this.globalAlign&&($t=-Lt/2);var Kt=this[this.directionKey.height];this.singleLine&&(Kt=this.lines[0].height+1);var te=!1;if("middle"===this.verticalDirection)if(this.actualHeight>=Kt&&0!==Kt)for(var ne=0;ne<this.lines.length;ne++){var re=this.lines[ne],ae=re.top,oe=re.height;if(ae+oe<this[this.directionKey.top]||ae+oe>this[this.directionKey.top]+Kt)return te;var se=!1;this.ellipsis&&this.lines[ne+1]&&this.lines[ne+1].top+this.lines[ne+1].height>this[this.directionKey.top]+Kt&&(se=!0,te=!0),this.lines[ne].draw(nt,se,this.lines[ne][this.directionKey.left]+$t,this.lines[ne][this.directionKey.top]+jt,this.ellipsis,at)}else{var le=Math.floor((Kt-this.actualHeight)/2);"vertical"===this.layoutDirection?$t+=le:jt+=le;for(var ue=0;ue<this.lines.length;ue++)this.lines[ue].draw(nt,!1,this.lines[ue][this.directionKey.left]+$t,this.lines[ue][this.directionKey.top]+jt,this.ellipsis,at)}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(var ce=0;ce<this.lines.length;ce++){var he=this.lines[ce];he.top;var de=he.height,fe=Kt-this.lines[ce].top-this.lines[ce].height;if(0===Kt)this.lines[ce].draw(nt,!1,$t,fe+jt,this.ellipsis,at);else{if(fe+de>this[this.directionKey.top]+Kt||fe<this[this.directionKey.top])return te;var pe=!1;this.ellipsis&&this.lines[ce+1]&&fe-this.lines[ce+1].height<this[this.directionKey.top]&&(pe=!0,te=!0),this.lines[ce].draw(nt,pe,$t,fe+jt,this.ellipsis,at)}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&($t+=this.lines[0].height+1);for(var ve=0;ve<this.lines.length;ve++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&($t-=this.lines[ve].height+this.lines[ve].top);var Ae=this.lines[ve],we=Ae.top,Ce=Ae.height;if(0===Kt)this.lines[ve].draw(nt,!1,this.lines[ve][this.directionKey.left]+$t,this.lines[ve][this.directionKey.top]+jt,this.ellipsis,at);else{if(we+Ce<this[this.directionKey.top]||we+Ce>this[this.directionKey.top]+Kt)return te;var je=!1;this.ellipsis&&this.lines[ve+1]&&this.lines[ve+1].top+this.lines[ve+1].height>this[this.directionKey.top]+Kt&&(je=!0,te=!0),this.lines[ve].draw(nt,je,this.lines[ve][this.directionKey.left]+$t,this.lines[ve][this.directionKey.top]+jt,this.ellipsis,at)}}}return te}},{"key":"getActualSize","value":function(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}},{"key":"getRawActualSize","value":function(){for(var nt=0,at=0,lt=0;lt<this.lines.length;lt++){var Rt=this.lines[lt];Rt.actualWidth>nt&&(nt=Rt.actualWidth),at+=Rt.height}return{"width":"vertical"===this.layoutDirection?at:nt,"height":"vertical"===this.layoutDirection?nt:at}}},{"key":"getActualSizeWidthEllipsis","value":function(){var nt=0,at=0,lt=this.getRawActualSize();lt.width,lt.height,this.width,this.height;var Rt=this[this.directionKey.height];if(this.singleLine&&(Rt=this.lines[0].height+1),"middle"===this.verticalDirection)if(this.actualHeight>=Rt&&0!==Rt)for(var Bt=0;Bt<this.lines.length;Bt++){var Lt=this.lines[Bt],Ht=Lt.top,jt=Lt.height;if(Ht+jt<this[this.directionKey.top]||Ht+jt>this[this.directionKey.top]+Rt);else if(this.ellipsis&&this.lines[Bt+1]&&this.lines[Bt+1].top+this.lines[Bt+1].height>this[this.directionKey.top]+Rt){var $t=!0===this.ellipsis?"...":this.ellipsis||"",Kt=this.lines[Bt].getWidthWithEllips($t);Kt>nt&&(nt=Kt),at+=this.lines[Bt].height}else this.lines[Bt].actualWidth>nt&&(nt=this.lines[Bt].actualWidth),at+=this.lines[Bt].height}else{Math.floor((Rt-this.actualHeight)/2);for(var te=0;te<this.lines.length;te++)this.lines[te].actualWidth>nt&&(nt=this.lines[te].actualWidth),at+=this.lines[te].height}else if("bottom"===this.verticalDirection)for(var ne=0;ne<this.lines.length;ne++){var re=this.lines[ne];re.top;var ae=re.height,oe=Rt-this.lines[ne].top-this.lines[ne].height;if(0===Rt)this.lines[ne].actualWidth>nt&&(nt=this.lines[ne].actualWidth),at+=this.lines[ne].height;else if(oe+ae>this[this.directionKey.top]+Rt||oe<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[ne+1]&&oe-this.lines[ne+1].height<this[this.directionKey.top]){var se=!0===this.ellipsis?"...":this.ellipsis||"",le=this.lines[ne].getWidthWithEllips(se);le>nt&&(nt=le),at+=this.lines[ne].height}else this.lines[ne].actualWidth>nt&&(nt=this.lines[ne].actualWidth),at+=this.lines[ne].height}else for(var ue=0;ue<this.lines.length;ue++){var ce=this.lines[ue],he=ce.top,de=ce.height;if(0===Rt)this.lines[ue].actualWidth>nt&&(nt=this.lines[ue].actualWidth),at+=this.lines[ue].height;else if(he+de<this[this.directionKey.top]||he+de>this[this.directionKey.top]+Rt);else if(this.ellipsis&&this.lines[ue+1]&&this.lines[ue+1].top+this.lines[ue+1].height>this[this.directionKey.top]+Rt){var fe=!0===this.ellipsis?"...":this.ellipsis||"",pe=this.lines[ue].getWidthWithEllips(fe);pe>nt&&(nt=pe),at+=this.lines[ue].height}else this.lines[ue].actualWidth>nt&&(nt=this.lines[ue].actualWidth),at+=this.lines[ue].height}return{"width":"vertical"===this.layoutDirection?at:nt,"height":"vertical"===this.layoutDirection?nt:at}}}]);function Jg(nt,at,lt,Rt){var Bt=Math.round(nt),Lt=Math.round(lt),Ht=Math.round(at),jt=Math.round(Rt);return{"left":nt>Bt?Bt:Bt-.5,"top":lt>Lt?Lt:Lt-.5,"right":Ht>at?Ht:Ht+.5,"bottom":jt>Rt?jt:jt+.5}}var ay=o((function t(nt,at,lt,Rt){r(this,t),this.fontSize=lt.fontSize||16,this.textBaseline=lt.textBaseline||"alphabetic",this.ascentDescentMode=Rt;var Bt=hd(lt.lineHeight,this.fontSize);this.lineHeight="number"==typeof Bt?Bt>this.fontSize?Bt:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;var Lt=fc(nt,lt,this.ascentDescentMode),Ht=Lt.ascent,jt=Lt.height,$t=Lt.descent,Kt=Lt.width,te=0,ne=0,re=0;this.height>jt&&(te=(this.height-jt)/2,ne=Math.ceil(te),re=Math.floor(te)),"top"===this.textBaseline?(this.ascent=te,this.descent=jt-te):"bottom"===this.textBaseline?(this.ascent=jt-te,this.descent=te):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=Ht+ne,this.descent=$t+re),this.length=nt.length,this.width=Kt||0,this.text=nt||"",this.newLine=at||!1,this.character=lt,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,"vertical"===lt.direction&&(this.direction=lt.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}),[{"key":"updateWidth","value":function(){var nt=fc(this.text,this.character,this.ascentDescentMode).width;this.width=nt,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}},{"key":"drawBackground","value":function(nt,at,lt,Rt,Bt,Lt,Ht){if(""!==this.text&&"\n"!==this.text&&this.character.background&&(!this.character.backgroundOpacity||this.character.backgroundOpacity>0)){var jt=this.text,$t=this.left+Rt;this.top;var Kt=this.direction;if(this.verticalEllipsis)jt=this.ellipsisStr,Kt="vertical",this.ellipsisWidth;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)jt+=this.ellipsisStr,"right"!==Lt&&"end"!==Lt||($t-=this.ellipsisWidth);else if("replace"===this.ellipsis){var te=hc(jt,("vertical"===Kt?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,jt.length-1);if(jt=jt.slice(0,te),jt+=this.ellipsisStr,"right"===Lt||"end"===Lt){var ne=fc(this.text.slice(te),this.character,this.ascentDescentMode).width;"vertical"===Kt||($t-=this.ellipsisWidth-ne)}}}var re=Jg($t,$t+(this.widthOrigin||this.width),at,at+Ht);return Object.assign(Object.assign({},re),{"fillStyle":this.character.background,"globalAlpha":this.character.backgroundOpacity})}}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=at+lt,$t=this.text,Kt=this.left+Rt;jt+=this.top;var te=this.direction;if(this.verticalEllipsis)$t=this.ellipsisStr,te="vertical",jt-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)$t+=this.ellipsisStr,"right"!==Lt&&"end"!==Lt||(Kt-=this.ellipsisWidth);else if("replace"===this.ellipsis){var ne=hc($t,("vertical"===te?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,$t.length-1);if($t=$t.slice(0,ne),$t+=this.ellipsisStr,"right"===Lt||"end"===Lt){var re=fc(this.text.slice(ne),this.character,this.ascentDescentMode).width;"vertical"===te||(Kt-=this.ellipsisWidth-re)}}}switch(this.character.script){case"super":jt-=this.ascent*(1/3);break;case"sub":jt+=this.descent/2}"vertical"===te&&(nt.save(),nt.rotateAbout(Math.PI/2,Kt,jt),nt.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),nt.translate(Kt,jt),Kt=0,jt=0);var ae=this.character.lineWidth,oe=void 0===ae?1:ae;if(this.character.stroke&&oe&&nt.strokeText($t,Kt,jt),this.character.fill&&nt.fillText($t,Kt,jt),this.character.fill)if(this.character.lineThrough||this.character.underline){if(this.character.underline){var se=1+jt,le=Jg(Kt,Kt+(this.widthOrigin||this.width),se,se+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));nt.fillRect(le.left,1+jt,le.right-le.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){var ue=1+jt-this.ascent/2,ce=Jg(Kt,Kt+(this.widthOrigin||this.width),ue,ue+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));nt.fillRect(ce.left,1+jt-this.ascent/2,ce.right-ce.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){var he=1+jt,de=Jg(Kt,Kt+(this.widthOrigin||this.width),he,he+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));nt.fillRect(de.left,1+jt,de.right-de.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){var fe=1+jt-this.ascent/2,pe=Jg(Kt,Kt+(this.widthOrigin||this.width),fe,fe+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));nt.fillRect(pe.left,1+jt-this.ascent/2,pe.right-pe.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}"vertical"===te&&nt.restore()}},{"key":"getWidthWithEllips","value":function(nt){var at=this.text,lt="vertical"===nt?this.height:this.width;if("hide"===this.ellipsis)return lt;if("add"===this.ellipsis)return lt+this.ellipsisWidth;if("replace"===this.ellipsis){var Rt=hc(at,lt-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,at.length-1);at=at.slice(0,Rt),at+=this.ellipsisStr;var Bt=fc(this.text.slice(Rt),this.character,this.ascentDescentMode).width;return lt+this.ellipsisWidth-Bt}return lt}}]),oy=["width","height","image"].concat(m(Tv)),sy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="image",at.numberType=hv,at.loadImage(at.attribute.image),at}return h(e,nt),o(e,[{"key":"getImageElement","value":function(){var nt=this.attribute.image;if(!nt||!this.resources)return null;var at=this.resources.get(nt);return"success"!==at.state?null:at.data}},{"key":"width","get":function(){return this.tryUpdateAABBBounds(),this._actualWidth}},{"key":"height","get":function(){return this.tryUpdateAABBBounds(),this._actualHeight}},{"key":"repeatX","get":function(){var nt;return null!==(nt=this.attribute.repeatX)&&void 0!==nt?nt:"no-repeat"},"set":function(nt){this.attribute.repeatX===nt&&(this.attribute.repeatX=nt)}},{"key":"repeatY","get":function(){var nt;return null!==(nt=this.attribute.repeatY)&&void 0!==nt?nt:"no-repeat"},"set":function(nt){this.attribute.repeatY===nt&&(this.attribute.repeatY=nt)}},{"key":"image","get":function(){return this.attribute.image},"set":function(nt){nt!==this.attribute.image&&(this.attribute.image=nt,this.loadImage(this.attribute.image))}},{"key":"imageLoadSuccess","value":function(nt,at,lt){var Rt=this;y(e,"imageLoadSuccess",this,3)([nt,at,function(){Rt.successCallback&&Rt.successCallback()}]),this.addUpdateBoundTag()}},{"key":"imageLoadFail","value":function(nt,at){var lt=this;y(e,"imageLoadFail",this,3)([nt,function(){lt.failCallback&&lt.failCallback()}])}},{"key":"setAttributes","value":function(nt,at,lt){return nt.image&&this.loadImage(nt.image),y(e,"setAttributes",this,3)([nt,at,lt])}},{"key":"setAttribute","value":function(nt,at,lt,Rt){return"image"===nt&&this.loadImage(at),y(e,"setAttribute",this,3)([nt,at,lt,Rt])}},{"key":"getGraphicTheme","value":function(){return yh(this).image}},{"key":"updateAABBBounds","value":function(nt,at,lt){if(!this.updatePathProxyAABBBounds(lt)){var Rt=nt.maxWidth,Bt=void 0===Rt?at.maxWidth:Rt,Lt=nt.maxHeight,Ht=void 0===Lt?at.maxHeight:Lt,jt=nt.width,$t=nt.height;if(null==jt||null==$t){var Kt=this.getImageElement();if(Kt){var te=Kt.width,ne=Kt.height;if(null!=jt)$t=jt*(ne/te);else if(null!=$t)jt=$t*(te/ne);else{var re=te/ne;re>Bt/Ht?(jt=Bt,$t=Bt/re):($t=Ht,jt=Ht*re)}}else jt=Bt,$t=Ht}this._actualWidth=jt,this._actualHeight=$t,lt.set(0,0,jt,$t)}var ae=oc.graphicService.updateTempAABBBounds(lt),oe=ae.tb1,se=ae.tb2;return Cg(nt,at,oe),lt.union(oe),oe.setValue(se.x1,se.y1,se.x2,se.y2),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),lt}},{"key":"getDefaultAttribute","value":function(nt){return rc[nt]}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,oy])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,oy])}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function ey(nt){return new sy(nt)}sy.NOWORK_ANIMATE_ATTR=Object.assign({"image":1,"repeatX":1,"repeatY":1},Ov);var uy=function(nt){function e(nt){var at;if(r(this,e),(at=n(this,e,[nt]))._x=0,at._y=0,at._hovered=!1,at._marginArray=[0,0,0,0],"always"===nt.backgroundShowMode&&(at._hovered=!0),nt.margin){var lt=td(nt.margin);at._marginArray="number"==typeof lt?[lt,lt,lt,lt]:lt}return at.onBeforeAttributeUpdate=function(nt,lt,Rt){if(X(Rt)&&-1!==Rt.indexOf("margin")||"margin"===Rt)if(lt.margin){var Bt=td(lt.margin);at._marginArray="number"==typeof Bt?[Bt,Bt,Bt,Bt]:Bt}else at._marginArray=[0,0,0,0]},at}return h(e,nt),o(e,[{"key":"width","get":function(){var nt;return(null!==(nt=this.attribute.width)&&void 0!==nt?nt:0)+this._marginArray[1]+this._marginArray[3]}},{"key":"height","get":function(){var nt;return(null!==(nt=this.attribute.height)&&void 0!==nt?nt:0)+this._marginArray[0]+this._marginArray[2]}},{"key":"tryUpdateAABBBounds","value":function(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();var nt=this.attribute,at=nt.width,lt=void 0===at?rc.width:at,Rt=nt.height,Bt=void 0===Rt?rc.height:Rt,Lt=this.attribute,Ht=Lt.backgroundWidth,jt=void 0===Ht?lt:Ht,$t=Lt.backgroundHeight,Kt=(jt-lt)/2,te=((void 0===$t?Bt:$t)-Bt)/2;return this._AABBBounds.expand([0,2*Kt,2*te,0]),this._AABBBounds}},{"key":"setHoverState","value":function(nt){"hover"===this.attribute.backgroundShowMode&&this._hovered!==nt&&(this._hovered=nt)}}])}(sy),cy=o((function t(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=this;r(this,t),this.left=nt,this.width=at,this.baseline=lt,this.ascent=Rt,this.descent=Bt,this.top=lt-Rt,this.paragraphs=Lt.map((function(nt){return nt})),this.textAlign=(this.paragraphs[0]instanceof uy?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=Ht,this.directionKey=uc[this.direction],this.actualWidth=0;var Kt=0;this.paragraphs.forEach((function(nt,at){if(0===at&&nt instanceof ay){var lt=xc.exec(nt.text);0!==(null==lt?void 0:lt.index)&&(nt.text=nt.text.slice(null==lt?void 0:lt.index),nt.updateWidth())}$t.actualWidth+=nt[$t.directionKey.width],Kt=Math.max(nt[$t.directionKey.height],Kt)})),this.height=Kt,this.blankWidth=jt?0:this.width-this.actualWidth,this.calcOffset(at,jt)}),[{"key":"calcOffset","value":function(nt,at){var lt=this.directionKey,Rt=this.height,Bt=this.left,Lt=0;this.actualWidth<nt&&!at&&("right"===this.textAlign||"end"===this.textAlign?Bt=nt-this.actualWidth:"center"===this.textAlign?Bt=(nt-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?Bt=(nt-this.actualWidth)/2:Lt=(nt-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map((function(nt){nt instanceof uy?(nt["_"+lt.x]=Bt,Bt+=nt[lt.width]+Lt,nt["_"+lt.y]="top"===nt.attribute.textBaseline?0:"bottom"===nt.attribute.textBaseline?Rt-nt.height:(Rt-nt.height)/2):(nt[lt.left]=Bt,Bt+=nt[lt.width]+Lt)}))}},{"key":"draw","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=this;if(Bt&&(at||this.paragraphs.some((function(nt){return nt.overflow})))){for(var jt=!0,$t=!1,Kt=this.paragraphs.length-1;Kt>=0;Kt--){var te=this.paragraphs[Kt];if(te.overflow)jt=jt&&""===te.text;else if(jt){$t=!0;break}}var ne=0;if(!$t)for(var re=this.paragraphs.length-1;re>=0;re--){var ae=this.paragraphs[re];if(ae.overflow){if(""===ae.text)break}else{if(ae instanceof uy)break;if("vertical"===this.direction&&"vertical"!==ae.direction){ae.verticalEllipsis=!0;break}var oe=!0===Bt?"...":Bt||"";ae.ellipsisStr=oe;var se=fc(oe,ae.character,ae.ascentDescentMode).width||0;if(se<=this.blankWidth+ne){at&&(ae.ellipsis="add");break}if(se<=this.blankWidth+ne+ae.width){ae.ellipsis="replace",ae.ellipsisWidth=se,ae.ellipsisOtherParagraphWidth=this.blankWidth+ne;break}ae.ellipsis="hide",ne+=ae.width}}}var le="",ue=-1,ce=[],he=[ce];this.paragraphs.forEach((function(at,Bt){if(!(at instanceof uy)){var Lt=at.drawBackground(nt,Rt,Ht.ascent,lt,0===Bt,Ht.textAlign,Ht.height);Lt&&(le===Lt.fillStyle&&ue===Lt.globalAlpha||(ce=[],he.push(ce),le=Lt.fillStyle,ue=Lt.globalAlpha),ce.push(Lt))}})),he.forEach((function(at){if(0!==at.length){var lt=at[0],Rt=at[at.length-1];nt.fillStyle=lt.fillStyle,nt.globalAlpha=lt.globalAlpha,nt.fillRect(lt.left,lt.top,Rt.right-lt.left,Rt.bottom-lt.top)}})),this.paragraphs.forEach((function(at,Bt){if(at instanceof uy)return at.setAttributes({"x":lt+at._x,"y":Rt+at._y}),void Lt(at,nt,lt+at._x,Rt+at._y,Ht.ascent);var jt={"x1":Ht.left,"y1":Ht.top,"x2":Ht.left+Ht.actualWidth,"y2":Ht.top+Ht.height};(function(nt,at){var lt=at&&at.stroke||mc;if(lt){var Rt=at.strokeOpacity,Bt=void 0===Rt?1:Rt,Lt=at.opacity,Ht=void 0===Lt?1:Lt;nt.globalAlpha=Bt*Ht,nt.lineWidth=at&&"number"==typeof at.lineWidth?at.lineWidth:1,nt.strokeStyle=lt,cc(nt,at)}else nt.globalAlpha=0})(nt,at.character),function(nt,at,lt){var Rt=at&&at.fill||gc;if(Rt){var Bt=at.fillOpacity,Lt=void 0===Bt?1:Bt,Ht=at.opacity,jt=void 0===Ht?1:Ht;nt.globalAlpha=Lt*jt,nt.fillStyle=lt?nc(nt,Rt,{"AABBBounds":lt}):Rt,cc(nt,at)}else nt.globalAlpha=0}(nt,at.character,jt),at.draw(nt,Rt,Ht.ascent,lt,0===Bt,Ht.textAlign,Ht.height)}))}},{"key":"getWidthWithEllips","value":function(nt){for(var at=this,lt=0,Rt=this.paragraphs.length-1;Rt>=0;Rt--){var Bt=this.paragraphs[Rt];if(Bt instanceof uy)break;var Lt=fc(nt,Bt.character,Bt.ascentDescentMode).width||0;if(Lt<=this.blankWidth+lt){Bt.ellipsis="add",Bt.ellipsisWidth=Lt;break}if(Lt<=this.blankWidth+lt+Bt.width){Bt.ellipsis="replace",Bt.ellipsisWidth=Lt,Bt.ellipsisOtherParagraphWidth=this.blankWidth+lt;break}Bt.ellipsis="hide",lt+=Bt.width}var Ht=0;return this.paragraphs.forEach((function(nt,lt){Ht+=nt instanceof uy?nt.width:nt.getWidthWithEllips(at.direction)})),Ht}}]),dy=o((function t(nt){r(this,t),this.frame=nt,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=nt.layoutDirection,this.directionKey=uc[this.direction]}),[{"key":"store","value":function(nt){if(nt instanceof uy){this.frame.icons.set(nt.richtextId,nt),this.lineBuffer.push(nt),this.lineWidth+=nt[this.directionKey.width];var at=0,lt=0;"top"===nt.attribute.textBaseline?(at=0,lt=nt.height):"bottom"===nt.attribute.textBaseline?(at=nt.height,lt=0):(at=nt.height/2,lt=nt.height/2),this.maxAscent=Math.max(this.maxAscent,at),this.maxDescent=Math.max(this.maxDescent,lt)}else this.lineBuffer.push(nt),0!==nt.text.length?(this.lineWidth+=nt[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,nt.ascent),this.maxDescent=Math.max(this.maxDescent,nt.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,nt.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,nt.descent))}},{"key":"send","value":function(){if(0!==this.lineBuffer.length){var nt=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,at=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,lt=new cy(this.frame.left,this[this.directionKey.width],this.y+nt,nt,at,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(lt),this.frame.actualHeight+=lt.height,this.y+=lt.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}}},{"key":"deal","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];nt instanceof uy?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+nt[this.directionKey.width]<=this[this.directionKey.width]?this.store(nt):0===this.lineBuffer.length?(this.store(nt),this.send()):(this.send(),this.deal(nt)):"number"!=typeof this.width||this.width<0||(nt.newLine&&this.send(),(0!==nt.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+nt[this.directionKey.width]<=this[this.directionKey.width]?this.store(nt):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(nt)):this.cut(nt,at)))}},{"key":"cut","value":function(nt,at){var lt=this[this.directionKey.width]-this.lineWidth||0,Rt=Math.ceil(lt/nt[this.directionKey.width]*nt.length)||0,Bt=hc(nt.text,lt,nt.character,Rt,"break-word"===this.frame.wordBreak);if(0!==Bt){var Lt=function(nt,at){var lt=nt.text.slice(0,at),Rt=nt.text.slice(at);return[new ay(lt,nt.newLine,nt.character,nt.ascentDescentMode),new ay(Rt,!0,nt.character,nt.ascentDescentMode)]}(nt,Bt),Ht=g(Lt,2),jt=Ht[0],$t=Ht[1];this.store(jt),at?this.send():this.deal($t)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(nt))}}]),py=!1;try{py=Intl&&"function"==typeof Intl.Segmenter}catch(nt){py=!1}var vy=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity"].concat(m(Tv)),gy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="richtext",at._currentHoverIcon=null,at.numberType=mv,at.onBeforeAttributeUpdate=function(nt,lt,Rt){for(var Bt in nt)if("hoverIconId"===Bt){if(nt[Bt]===lt[Bt])continue;var Lt=at._frameCache.icons.get(nt[Bt]);at.updateHoverIconState(Lt)}},at}return h(e,nt),o(e,[{"key":"width","get":function(){var nt;return null!==(nt=this.attribute.width)&&void 0!==nt?nt:ec.width},"set":function(nt){this.attribute.width!==nt&&(this.attribute.width=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"height","get":function(){var nt;return null!==(nt=this.attribute.height)&&void 0!==nt?nt:ec.height},"set":function(nt){this.attribute.height!==nt&&(this.attribute.height=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"maxWidth","get":function(){return this.attribute.maxWidth},"set":function(nt){this.attribute.maxWidth!==nt&&(this.attribute.maxWidth=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"maxHeight","get":function(){return this.attribute.maxHeight},"set":function(nt){this.attribute.maxHeight!==nt&&(this.attribute.maxHeight=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"ellipsis","get":function(){var nt;return null!==(nt=this.attribute.ellipsis)&&void 0!==nt?nt:ec.ellipsis},"set":function(nt){this.attribute.ellipsis!==nt&&(this.attribute.ellipsis=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"wordBreak","get":function(){var nt;return null!==(nt=this.attribute.wordBreak)&&void 0!==nt?nt:ec.wordBreak},"set":function(nt){this.attribute.wordBreak!==nt&&(this.attribute.wordBreak=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"verticalDirection","get":function(){var nt;return null!==(nt=this.attribute.verticalDirection)&&void 0!==nt?nt:ec.verticalDirection},"set":function(nt){this.attribute.verticalDirection!==nt&&(this.attribute.verticalDirection=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"textAlign","get":function(){var nt;return null!==(nt=this.attribute.textAlign)&&void 0!==nt?nt:ec.textAlign},"set":function(nt){this.attribute.textAlign!==nt&&(this.attribute.textAlign=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"textBaseline","get":function(){var nt;return null!==(nt=this.attribute.textBaseline)&&void 0!==nt?nt:ec.textBaseline},"set":function(nt){this.attribute.textBaseline!==nt&&(this.attribute.textBaseline=nt,this.addUpdateShapeAndBoundsTag())}},{"key":"textConfig","get":function(){var nt;return null!==(nt=this.attribute.textConfig)&&void 0!==nt?nt:ec.textConfig},"set":function(nt){this.attribute.textConfig=nt,this.addUpdateShapeAndBoundsTag()}},{"key":"getGraphicTheme","value":function(){return yh(this).richtext}},{"key":"updateAABBBounds","value":function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=nt.width,$t=void 0===jt?at.width:jt,Kt=nt.height,te=void 0===Kt?at.height:Kt,ne=nt.maxWidth,re=void 0===ne?at.maxWidth:ne,ae=nt.maxHeight,oe=void 0===ae?at.maxHeight:ae,se=nt.textAlign,le=void 0===se?at.textAlign:se,ue=nt.verticalDirection,ce=void 0===ue?null!==(Bt=null!==(Rt=nt.textBaseline)&&void 0!==Rt?Rt:at.textBaseline)&&void 0!==Bt?Bt:at.verticalDirection:ue,he=nt.editOptions;if($t>0&&te>0)lt.set(0,0,$t,te);else{var de=this.getFrameCache().getActualSize(),fe=de.width,pe=de.height,ve=$t||fe||0,Ae=te||pe||0;Ae="number"==typeof oe&&Ae>oe?oe:Ae||0,ve="number"==typeof re&&ve>re?re:ve||0,lt.set(0,0,ve,Ae)}he&&he.keepHeightWhileEmpty&&!lt.height()&&!(null===(Lt=nt.textConfig)||void 0===Lt?void 0:Lt.length)&&(lt.y2=lt.y1+(null!==(Ht=nt.fontSize)&&void 0!==Ht?Ht:12),lt.x2=lt.x1+2);var we=0;switch(ce){case"top":we=0;break;case"middle":we=-lt.height()/2;break;case"bottom":we=-lt.height()}var Ce=0;switch(le){case"left":Ce=0;break;case"center":Ce=-lt.width()/2;break;case"right":Ce=-lt.width()}return lt.translate(Ce,we),oc.graphicService.updateTempAABBBounds(lt),null==nt.forceBoundsHeight&&null==nt.forceBoundsWidth||oc.graphicService.updateHTMLTextAABBBounds(nt,at,lt),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),0===lt.width()&&0===lt.height()&&lt.clear(),lt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,vy])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,vy])}},{"key":"getFrameCache","value":function(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}},{"key":"cliped","get":function(){var nt=this.getFrameCache();if(nt.actualHeight>nt.height)return!0;if(this.attribute.disableAutoWrapLine)for(var at=0;at<nt.lines.length;at++)for(var lt=nt.lines[at],Rt=0;Rt<lt.paragraphs.length;Rt++){var Bt=lt.paragraphs[Rt];if(Bt.overflow&&""!==Bt.text)return!0}return!1}},{"key":"combinedStyleToCharacter","value":function(nt){var at=this.attribute,lt=at.fill,Rt=at.stroke,Bt=at.fontSize,Lt=at.fontFamily,Ht=at.fontStyle,jt=at.fontWeight,$t=at.lineWidth,Kt=at.opacity,te=at.fillOpacity,ne=at.lineHeight,re=at.strokeOpacity,ae=at.upgradeAttrs,oe=Object.assign({"fill":lt,"stroke":Rt,"fontSize":Bt,"fontFamily":Lt,"fontStyle":Ht,"fontWeight":jt,"lineWidth":$t,"opacity":Kt,"fillOpacity":te,"strokeOpacity":re},nt);return(null==ae?void 0:ae.lineHeight)&&(oe.lineHeight=ne),oe}},{"key":"doUpdateFrameCache","value":function(nt){var at,lt=this,Rt=this.attribute,Bt=Rt.maxWidth,Lt=Rt.maxHeight,Ht=Rt.width,jt=Rt.height,$t=Rt.ellipsis,Kt=Rt.wordBreak,te=Rt.verticalDirection,ne=Rt.textAlign,re=Rt.textBaseline,ae=Rt.layoutDirection,oe=Rt.singleLine,se=Rt.disableAutoWrapLine,le=Rt.editable,ue=Rt.ascentDescentMode,ce=Rt.upgradeAttrs,he=ce&&ce.multiBreakLine,de=this.attribute.textConfig,fe=void 0===de?[]:de;le&&fe.length>0&&!e.AllSingleCharacter(fe)&&(fe=e.TransformTextConfig2SingleCharacter(fe),this.attribute.textConfig=fe);for(var pe=[],ve=null!=nt?nt:fe,Ae=0;Ae<ve.length;Ae++)if("image"in ve[Ae]){var we=this.combinedStyleToCharacter(ve[Ae]);we.lineWidth=void 0;var Ce=we.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(we.id);if(Ce)pe.push(Ce);else{var je=new uy(we);je.successCallback=function(){var nt;lt.addUpdateBoundTag(),null===(nt=lt.stage)||void 0===nt||nt.renderNextFrame()},je.richtextId=we.id,pe.push(je)}}else{var Ne=this.combinedStyleToCharacter(ve[Ae]);if(Z(Ne.text)&&(Ne.text="".concat(Ne.text)),Ne.text&&Ne.text.includes("\n"))for(var Ve=Ne.text.split("\n"),Ge=0;Ge<Ve.length;Ge++)if(0===Ge)pe.push(new ay(Ve[Ge],!1,Ne,ue));else if(Ve[Ge]||Ae===ve.length-1)pe.push(new ay(Ve[Ge],!0,Ne,ue));else{var ti=this.combinedStyleToCharacter(ve[Ae+1]);pe.push(new ay(Ve[Ge],!0,ti,ue))}else Ne.text&&pe.push(new ay(Ne.text,!1,Ne,ue))}var li="number"==typeof Bt&&Number.isFinite(Bt)&&Bt>0,hi="number"==typeof Lt&&Number.isFinite(Lt)&&Lt>0,di="number"==typeof Ht&&Number.isFinite(Ht)&&Ht>0&&(!li||Ht<=Bt),fi="number"==typeof jt&&Number.isFinite(jt)&&jt>0&&(!hi||jt<=Lt),pi=new ry(0,0,(di?Ht:li?Bt:0)||0,(fi?jt:hi?Lt:0)||0,$t,Kt,te,ne,re,ae||"horizontal",!di&&li,!fi&&hi,oe||!1,null===(at=this._frameCache)||void 0===at?void 0:at.icons),vi=new dy(pi);if(vi.newLine=he,se)for(var mi=0,_i=!1,bi=0;bi<pe.length;bi++){var Mi=pe[bi];_i?(Mi.overflow=!0,Mi.left=1/0,Mi.top=1/0,!Mi.newLine&&pi.lines[pi.lines.length-1].paragraphs.push(Mi)):vi.deal(Mi,!0),pi.lines.length!==mi&&(mi=pi.lines.length,vi.lineBuffer.length=0,Mi.overflow=!0,Mi.left=1e3,Mi.top=1e3,pi.lines[pi.lines.length-1].paragraphs.push(Mi),_i=!0),Mi.newLine&&(_i=!1,vi.lineWidth=0),vi.send()}else for(var Ti=0;Ti<pe.length;Ti++)vi.deal(pe[Ti]);if(vi.send(),!("horizontal"===pi.layoutDirection?di:fi)){var Ii=pi.getActualSizeWidthEllipsis(),Bi="horizontal"===pi.layoutDirection?Ii.width:Ii.height;("horizontal"===pi.layoutDirection?li:hi)&&(Bi=Math.min(Bi,"horizontal"===pi.layoutDirection?Bt:Lt)),pi.lines.forEach((function(nt){nt.calcOffset(Bi,!1)}))}he&&pi.lines.forEach((function(nt){var at=nt.paragraphs;nt.paragraphs=nt.paragraphs.filter((function(nt){return""!==nt.text})),0===nt.paragraphs.length&&at.length&&(at[0].text="\n",nt.paragraphs.push(at[0]))})),this._frameCache=pi}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"setStage","value":function(nt,at){y(e,"setStage",this,3)([nt,at]),this.getFrameCache().icons.forEach((function(lt){lt.setStage(nt,at)}))}},{"key":"bindIconEvent","value":function(){var nt=this;this.addEventListener("pointermove",(function(at){var lt=nt.pickIcon(at.global);lt&&lt===nt._currentHoverIcon||(lt?nt.setAttribute("hoverIconId",lt.richtextId):!lt&&nt._currentHoverIcon&&nt.setAttribute("hoverIconId",void 0))})),this.addEventListener("pointerleave",(function(at){nt._currentHoverIcon&&nt.setAttribute("hoverIconId",void 0)}))}},{"key":"updateHoverIconState","value":function(nt){var at,lt,Rt,Bt,Lt;nt?(null===(at=this._currentHoverIcon)||void 0===at||at.setHoverState(!1),this._currentHoverIcon=nt,this._currentHoverIcon.setHoverState(!0),null===(lt=this.stage)||void 0===lt||lt.setCursor(nt.attribute.cursor),null===(Rt=this.stage)||void 0===Rt||Rt.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null===(Bt=this.stage)||void 0===Bt||Bt.setCursor(),null===(Lt=this.stage)||void 0===Lt||Lt.renderNextFrame())}},{"key":"pickIcon","value":function(nt){var at,lt=this.getFrameCache(),Rt=this.globalTransMatrix,Bt=Rt.e,Lt=Rt.f;return lt.icons.forEach((function(lt,Rt){var Ht,jt,$t=lt.AABBBounds.clone();$t.translate(lt._marginArray[3],lt._marginArray[0]),$t.containsPoint({"x":nt.x-Bt,"y":nt.y-Lt})&&((at=lt).globalX=(null!==(Ht=at.attribute.x)&&void 0!==Ht?Ht:0)+Bt+lt._marginArray[3],at.globalY=(null!==(jt=at.attribute.y)&&void 0!==jt?jt:0)+Lt+lt._marginArray[0])})),at}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}],[{"key":"AllSingleCharacter","value":function(nt){return nt.lines?nt.lines.every((function(nt){return nt.paragraphs.every((function(nt){return!(nt.text&&Y(nt.text)&&e.splitText(nt.text).length>1)}))})):nt.every((function(nt){return nt.isComposing||!(nt.text&&Y(nt.text)&&e.splitText(nt.text).length>1)}))}},{"key":"splitText","value":function(nt){if(py){var at,lt=[],Rt=s(new Intl.Segmenter(void 0,{"granularity":"grapheme"}).segment(nt));try{for(Rt.s();!(at=Rt.n()).done;){var Bt=at.value.segment;lt.push(Bt)}}catch(nt){Rt.e(nt)}finally{Rt.f()}return lt}return Array.from(nt)}},{"key":"TransformTextConfig2SingleCharacter","value":function(nt){var at=[];return nt.forEach((function(nt){var lt=e.splitText(nt.text.toString());if(Y(nt.text)&&lt.length>1)for(var Rt=0;Rt<lt.length;Rt++){var Bt=lt[Rt];at.push(Object.assign(Object.assign({},nt),{"text":Bt}))}else at.push(nt)})),at}}])}(Dv);function ly(nt){return new gy(nt)}gy.NOWORK_ANIMATE_ATTR=Object.assign({"ellipsis":1,"wordBreak":1,"verticalDirection":1,"textAlign":1,"textBaseline":1,"textConfig":1,"layoutDirection":1},Ov);var my=["path","customPath"].concat(m(Tv)),by=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="path",at.numberType=fv,at}return h(e,nt),o(e,[{"key":"pathShape","get":function(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}},{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute.path;return null!=nt&&""!==nt}},{"key":"getParsedPathShape","value":function(){var nt=this.getGraphicTheme();if(!this.valid)return nt.path;var at=this.attribute;return at.path instanceof Ou?at.path:(j(this.cache)&&this.doUpdatePathShape(),this.cache instanceof Ou?this.cache:nt.path)}},{"key":"getGraphicTheme","value":function(){return yh(this).path}},{"key":"updateAABBBounds","value":function(nt,at,lt){if(!this.updatePathProxyAABBBounds(lt)){var Rt=this.getParsedPathShape();lt.union(Rt.getBounds())}var Bt=oc.graphicService.updateTempAABBBounds(lt),Lt=Bt.tb1,Ht=Bt.tb2;Cg(nt,at,Lt),lt.union(Lt),Lt.setValue(Ht.x1,Ht.y1,Ht.x2,Ht.y2);var jt=nt.lineJoin,$t=void 0===jt?at.lineJoin:jt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===$t,this),lt}},{"key":"doUpdateAABBBounds","value":function(nt){return this.doUpdatePathShape(),y(e,"doUpdateAABBBounds",this,3)([nt])}},{"key":"doUpdatePathShape","value":function(){var nt=this.attribute;Y(nt.path,!0)?this.cache=(new Ou).fromString(nt.path):nt.customPath&&(this.cache=new Ou,nt.customPath(this.cache,this))}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,my])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,my])}},{"key":"toCustomPath","value":function(){return(new Ou).fromCustomPath2D(this.getParsedPathShape(),0,0)}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function hy(nt){return new by(nt)}by.NOWORK_ANIMATE_ATTR=Object.assign({"path":1,"customPath":1},Ov);var xy=["segments","points","curveType","curveTension"].concat(m(Tv)),Sy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="area",at.numberType=sv,at}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){if(this.pathProxy)return!0;var nt=this.attribute,at=nt.points,lt=nt.segments;return lt?0!==lt.length:!!at&&0!==at.length}},{"key":"getGraphicTheme","value":function(){return yh(this).area}},{"key":"updateAABBBounds","value":function(nt,at,lt){this.updatePathProxyAABBBounds(lt)||(nt.segments?this.updateAreaAABBBoundsBySegments(nt,at,lt):this.updateAreaAABBBoundsByPoints(nt,at,lt)),oc.graphicService.updateTempAABBBounds(lt);var Rt=nt.lineJoin,Bt=void 0===Rt?at.lineJoin:Rt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===Bt,this),lt}},{"key":"updateAreaAABBBoundsByPoints","value":function(nt,at,lt,Rt){var Bt=nt.points,Lt=void 0===Bt?at.points:Bt,Ht=lt;return Lt.forEach((function(nt){var at,lt;Ht.add(nt.x,nt.y),Ht.add(null!==(at=nt.x1)&&void 0!==at?at:nt.x,null!==(lt=nt.y1)&&void 0!==lt?lt:nt.y)})),Ht}},{"key":"updateAreaAABBBoundsBySegments","value":function(nt,at,lt,Rt){var Bt=nt.segments,Lt=void 0===Bt?at.segments:Bt,Ht=lt;return Lt.forEach((function(nt){nt.points.forEach((function(nt){var at,lt;Ht.add(nt.x,nt.y),Ht.add(null!==(at=nt.x1)&&void 0!==at?at:nt.x,null!==(lt=nt.y1)&&void 0!==lt?lt:nt.y)}))})),Ht}},{"key":"_interpolate","value":function(nt,at,lt,Rt,Bt){"points"===nt&&(Bt.points=ad(lt,Rt,at))}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,xy])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,xy])}},{"key":"toCustomPath","value":function(){var nt=new Ou,at=this.attribute,lt=at.segments,n=function(at){if(at&&at.length){var lt=!0,Rt=[];if(at.forEach((function(at){var Bt,Lt;!1!==at.defined&&(lt?nt.moveTo(at.x,at.y):nt.lineTo(at.x,at.y),Rt.push({"x":null!==(Bt=at.x1)&&void 0!==Bt?Bt:at.x,"y":null!==(Lt=at.y1)&&void 0!==Lt?Lt:at.y}),lt=!1)})),Rt.length){for(var Bt=Rt.length-1;Bt>=0;Bt--)nt.lineTo(Rt[Bt].x,Rt[Bt].y);nt.closePath()}}};return at.points?n(at.points):lt&&lt.length&&lt.forEach((function(nt){n(nt.points)})),nt}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function fy(nt){return new Sy(nt)}Sy.NOWORK_ANIMATE_ATTR=Object.assign({"segments":1,"curveType":1},Ov);var wy=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap"].concat(m(Tv)),Cy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="arc",at.numberType=av,at}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute,at=nt.startAngle,lt=nt.endAngle,Rt=nt.outerRadius,Bt=nt.innerRadius;return this._validNumber(at)&&this._validNumber(lt)&&this._validNumber(Rt)&&this._validNumber(Bt)}},{"key":"getParsedCornerRadius","value":function(){var nt=this.getGraphicTheme(),at=this.attribute,lt=at.cornerRadius,Rt=void 0===lt?nt.cornerRadius:lt,Bt=at.innerPadding,Lt=void 0===Bt?nt.innerPadding:Bt,Ht=at.outerPadding,jt=void 0===Ht?nt.outerPadding:Ht,$t=this.attribute,Kt=$t.outerRadius,te=void 0===Kt?nt.outerRadius:Kt,ne=$t.innerRadius,re=void 0===ne?nt.innerRadius:ne;if(te+=jt,re-=Lt,0===Rt||"0%"===Rt)return 0;var ae=Math.abs(te-re),f=function(nt){return Math.min(Z(nt,!0)?nt:ae*parseFloat(nt)/100,ae/2)};if(X(Rt)){var oe=Rt.map((function(nt){return f(nt)||0}));return 0===oe.length?[oe[0],oe[0],oe[0],oe[0]]:2===oe.length?[oe[0],oe[1],oe[0],oe[1]]:(3===oe.length&&oe.push(0),oe)}return f(Rt)}},{"key":"getParsedAngle","value":function(){var nt=this.getGraphicTheme(),at=this.attribute,lt=at.startAngle,Rt=void 0===lt?nt.startAngle:lt,Bt=at.endAngle,Lt=void 0===Bt?nt.endAngle:Bt,Ht=this.attribute.cap,jt=void 0===Ht?nt.cap:Ht,$t=Lt-Rt>=0?1:-1,Kt=Lt-Rt;if(Lt=(Rt=Ee(Rt))+Kt,jt&&fe(Kt)<de-le){var te=1,ne=1;jt.length&&(te=Number(jt[0]),ne=Number(jt[1]));var re=this.attribute,ae=re.outerRadius,oe=void 0===ae?nt.outerRadius:ae,se=re.innerRadius,ue=void 0===se?nt.innerRadius:se,ce=this.attribute,he=ce.outerPadding,pe=void 0===he?nt.outerPadding:he,ve=ce.innerPadding;oe+=pe,ue-=void 0===ve?nt.innerPadding:ve;var Ae=Math.abs(oe-ue)/2,we=Ae/oe;if(Ae>le&&oe>le)return{"startAngle":Rt-$t*we*te,"endAngle":Lt+$t*we*ne,"sc":$t*we*te,"ec":$t*we*ne}}return{"startAngle":Rt,"endAngle":Lt}}},{"key":"getParsePadAngle","value":function(nt,at){var lt=this.getGraphicTheme(),Rt=this.attribute,Bt=Rt.innerPadding,Lt=void 0===Bt?lt.innerPadding:Bt,Ht=Rt.outerPadding,jt=void 0===Ht?lt.outerPadding:Ht,$t=Rt.padAngle,Kt=void 0===$t?lt.padAngle:$t,te=this.attribute,ne=te.outerRadius,re=void 0===ne?lt.outerRadius:ne,ae=te.innerRadius,oe=void 0===ae?lt.innerRadius:ae;re+=jt,oe-=Lt;var se=this.attribute.padRadius,ue=void 0===se?je(re*re+oe*oe):se,ce=fe(at-nt),he=nt,de=at,pe=nt,ve=at,Ae=Kt/2,we=ce,Ne=ce;if(Ae>le&&ue>le){var Ve=at>nt?1:-1,Ge=ge(Number(ue)/oe*Ce(Ae)),ti=ge(Number(ue)/re*Ce(Ae));return(we-=2*Ge)>le?(pe+=Ge*=Ve,ve-=Ge):(we=0,pe=ve=(nt+at)/2),(Ne-=2*ti)>le?(he+=ti*=Ve,de-=ti):(Ne=0,he=de=(nt+at)/2),{"outerStartAngle":he,"outerEndAngle":de,"innerStartAngle":pe,"innerEndAngle":ve,"innerDeltaAngle":we,"outerDeltaAngle":Ne}}return{"outerStartAngle":he,"outerEndAngle":de,"innerStartAngle":pe,"innerEndAngle":ve,"innerDeltaAngle":we,"outerDeltaAngle":Ne}}},{"key":"getGraphicTheme","value":function(){return yh(this).arc}},{"key":"updateAABBBounds","value":function(nt,at,lt,Rt){this.updatePathProxyAABBBounds(lt)||(Rt?this.updateArcAABBBoundsImprecise(nt,at,lt):this.updateArcAABBBoundsAccurate(nt,at,lt));var Bt=oc.graphicService.updateTempAABBBounds(lt),Lt=Bt.tb1,Ht=Bt.tb2;Cg(nt,at,Lt),lt.union(Lt),Lt.setValue(Ht.x1,Ht.y1,Ht.x2,Ht.y2);var jt=nt.lineJoin,$t=void 0===jt?at.lineJoin:jt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===$t,this),lt}},{"key":"updateArcAABBBoundsImprecise","value":function(nt,at,lt){var Rt=nt.outerRadius,Bt=void 0===Rt?at.outerRadius:Rt,Lt=nt.innerRadius,Ht=void 0===Lt?at.innerRadius:Lt,jt=nt.outerPadding,$t=void 0===jt?at.outerPadding:jt,Kt=nt.innerPadding;return(Bt+=$t)<(Ht-=void 0===Kt?at.innerPadding:Kt)&&(Bt=Ht),lt.set(-Bt,-Bt,Bt,Bt),lt}},{"key":"updateArcAABBBoundsAccurate","value":function(nt,at,lt){var Rt=nt.outerRadius,Bt=void 0===Rt?at.outerRadius:Rt,Lt=nt.innerRadius,Ht=void 0===Lt?at.innerRadius:Lt,jt=nt.outerPadding,$t=void 0===jt?at.outerPadding:jt,Kt=nt.innerPadding;if((Bt+=$t)<(Ht-=void 0===Kt?at.innerPadding:Kt)){var te=Bt;Bt=Ht,Ht=te}var ne=nt.endAngle,re=void 0===ne?at.endAngle:ne,ae=nt.startAngle,oe=void 0===ae?at.startAngle:ae;if(oe>re){var se=oe;oe=re,re=se}return Bt<=le?lt.set(0,0,0,0):Math.abs(re-oe)>de-le?lt.set(-Bt,-Bt,Bt,Bt):(nd(oe,re,Bt,lt),nd(oe,re,Ht,lt)),lt}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,wy])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,wy])}},{"key":"toCustomPath","value":function(){var nt,at,lt,Rt,Bt=this.attribute,Lt=this.getParsedAngle(),Ht=Lt.startAngle,jt=Lt.endAngle,$t=(null!==(nt=Bt.innerRadius)&&void 0!==nt?nt:0)-(null!==(at=Bt.innerPadding)&&void 0!==at?at:0),Kt=(null!==(lt=Bt.outerRadius)&&void 0!==lt?lt:0)-(null!==(Rt=Bt.outerPadding)&&void 0!==Rt?Rt:0),te=fe(jt-Ht),ne=jt>Ht;if(Kt<$t){var re=Kt;Kt=$t,$t=re}var ae=new Ou;if(Kt<=le)ae.moveTo(0,0);else if(te>=de-le)ae.moveTo(0+Kt*ve(Ht),0+Kt*Ce(Ht)),ae.arc(0,0,Kt,Ht,jt,!ne),$t>le&&(ae.moveTo(0+$t*ve(jt),0+$t*Ce(jt)),ae.arc(0,0,$t,jt,Ht,ne));else{var oe=Kt*ve(Ht),se=Kt*Ce(Ht),ue=$t*ve(jt),ce=$t*Ce(jt);ae.moveTo(0+oe,0+se),ae.arc(0,0,Kt,Ht,jt,!ne),ae.lineTo(0+ue,0+ce),ae.arc(0,0,$t,jt,Ht,ne),ae.closePath()}return ae}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function yy(nt){return new Cy(nt)}Cy.NOWORK_ANIMATE_ATTR=Object.assign({"cap":1},Ov);var Ty=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="arc3d",at.numberType=ov,at}return h(e,nt),o(e,[{"key":"updateAABBBounds","value":function(nt,at,lt){var Rt=this.stage;if(!Rt||!Rt.camera)return lt;var Bt=nt.outerRadius,Lt=void 0===Bt?at.outerRadius:Bt,Ht=nt.height,jt=Lt+(void 0===Ht?0:Ht);return lt.setValue(-jt,-jt,jt,jt),oc.graphicService.updateTempAABBBounds(lt),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),lt}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Cy);function _y(nt){return new Ty(nt)}Ty.NOWORK_ANIMATE_ATTR=Object.assign({"cap":1},Ov);var Ey=["points","cornerRadius"].concat(m(Tv)),Oy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="polygon",at.numberType=pv,at}return h(e,nt),o(e,[{"key":"isValid","value":function(){return y(e,"isValid",this,3)([])&&this._isValid()}},{"key":"_isValid","value":function(){var nt=this.attribute.points;return nt&&nt.length>=2}},{"key":"getGraphicTheme","value":function(){return yh(this).polygon}},{"key":"updateAABBBounds","value":function(nt,at,lt){this.updatePathProxyAABBBounds(lt)||this.updatePolygonAABBBoundsImprecise(nt,at,lt),oc.graphicService.updateTempAABBBounds(lt);var Rt=nt.lineJoin,Bt=void 0===Rt?at.lineJoin:Rt;return oc.graphicService.transformAABBBounds(nt,lt,at,"miter"===Bt,this),lt}},{"key":"updatePolygonAABBBoundsImprecise","value":function(nt,at,lt){var Rt=nt.points;return(void 0===Rt?at.points:Rt).forEach((function(nt){lt.add(nt.x,nt.y)})),lt}},{"key":"_interpolate","value":function(nt,at,lt,Rt,Bt){"points"===nt&&(Bt.points=ad(lt,Rt,at))}},{"key":"needUpdateTags","value":function(nt){return y(e,"needUpdateTags",this,3)([nt,Ey])}},{"key":"needUpdateTag","value":function(nt){return y(e,"needUpdateTag",this,3)([nt,Ey])}},{"key":"toCustomPath","value":function(){var nt=this.attribute.points,at=new Ou;return nt.forEach((function(nt,lt){0===lt?at.moveTo(nt.x,nt.y):at.lineTo(nt.x,nt.y)})),at.closePath(),at}},{"key":"clone","value":function(){return new e(Object.assign({},this.attribute))}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Dv);function ky(nt){return new Oy(nt)}Oy.NOWORK_ANIMATE_ATTR=Ov;var Dy=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).type="pyramid3d",at.numberType=vv,at}return h(e,nt),o(e,[{"key":"updateAABBBounds","value":function(nt,at,lt){var Rt=this.stage;return Rt&&Rt.camera?(this.findFace().vertices.forEach((function(nt){var at=nt[0],Rt=nt[1];lt.add(at,Rt)})),oc.graphicService.updateTempAABBBounds(lt),oc.graphicService.transformAABBBounds(nt,lt,at,!1,this),lt):lt}},{"key":"findFace","value":function(){for(var nt=this.attribute.points,at=nt.map((function(at,lt){var Rt=3===lt?nt[0]:nt[lt+1],Bt=at.x-Rt.x;return 0===Bt?0:(at.y-Rt.y)/Bt})),lt=nt.map((function(nt){return{"p":nt,"d":0}})),Rt=!1,Bt=0,Lt=0;Lt<at.length-1;Lt++){for(var Ht=Lt+1;Ht<at.length;Ht++){if(at[Lt]===at[Ht]){Rt=!0;var jt=Ge.distancePP(lt[Lt].p,lt[Lt+1].p);lt[Lt].d=jt,lt[Lt+1].d=jt,Bt=Ae(Bt,jt);var $t=Ge.distancePP(lt[Ht].p,lt[Ht+1].p);lt[Ht].d=$t,lt[Ht+1].d=$t,Bt=Ae(Bt,$t)}if(Rt)break}if(Rt)break}for(var Kt=nt.length-1;Kt>=0;Kt--){var te=nt[Kt];lt.unshift({"p":te,"d":0})}for(var ne=0;ne<nt.length;ne++){var re=(Bt-lt[ne+nt.length].d)/2;lt[ne].d+=re,lt[ne+nt.length].d+=re}var ae={"polygons":[],"vertices":[],"edges":[]};return lt.forEach((function(nt){ae.vertices.push([nt.p.x,nt.p.y,nt.d])})),ae.polygons.push({"polygon":[0,4,5,1],"normal":[0,-1,0]}),ae.polygons.push({"polygon":[7,6,2,3],"normal":[0,1,0]}),ae.polygons.push({"polygon":[0,4,7,3],"normal":[-1,0,0]}),ae.polygons.push({"polygon":[1,5,6,2],"normal":[1,0,0]}),ae.polygons.push({"polygon":[0,1,2,3],"normal":[0,0,-1]}),ae.polygons.push({"polygon":[4,5,6,7],"normal":[0,0,1]}),ae.edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[3,7],[1,5],[2,6]],ae}},{"key":"_isValid","value":function(){return y(e,"_isValid",this,3)([])&&4===this.attribute.points.length}},{"key":"getNoWorkAnimateAttr","value":function(){return e.NOWORK_ANIMATE_ATTR}}])}(Oy);function Ay(nt){return new Dy(nt)}Dy.NOWORK_ANIMATE_ATTR=Ov;var Ly=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[{"x":0,"y":0}])).type="shadowroot",at.shadowHost=nt,at}return h(e,nt),o(e,[{"key":"clearUpdateBoundTag","value":function(){y(e,"clearUpdateBoundTag",this,3)([]),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}},{"key":"addUpdateBoundTag","value":function(){y(e,"addUpdateBoundTag",this,3)([]),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}},{"key":"addUpdateShapeAndBoundsTag","value":function(){y(e,"addUpdateShapeAndBoundsTag",this,3)([]),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}},{"key":"tryUpdateGlobalTransMatrix","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.shouldUpdateGlobalMatrix()){var at=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(at.a,at.b,at.c,at.d,at.e,at.f):this._globalTransMatrix=at.clone(),this.doUpdateGlobalMatrix(),nt&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}},{"key":"doUpdateGlobalMatrix","value":function(){if(this.shadowHost){var nt=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f)}}},{"key":"tryUpdateGlobalAABBBounds","value":function(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}])}(Lv);function My(nt){return new Ly(nt)}var Fy,zy,Hy=new(o((function t(){r(this,t),this.store=new Map}),[{"key":"RegisterGraphicCreator","value":function(nt,at){this.store.set(nt,at),this[nt]=at}},{"key":"CreateGraphic","value":function(nt,at){var lt=this.store.get(nt);return lt?lt(at):null}}]));function Py(nt){return Fy||(Fy=Hy.CreateGraphic("text",{})),Fy.initAttributes(nt),Fy.AABBBounds}var Ry=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},By=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Iy=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},jy=o((function t(){r(this,t),this.time=Dl.beforeFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae,oe=nt.attribute,se=oe.background,le=oe.backgroundOpacity,ue=void 0===le?null!==(ae=nt.attribute.fillOpacity)&&void 0!==ae?ae:$t.backgroundOpacity:le,ce=oe.opacity,he=void 0===ce?$t.opacity:ce,de=oe.backgroundMode,fe=void 0===de?$t.backgroundMode:de,pe=oe.backgroundFit,ve=void 0===pe?$t.backgroundFit:pe,Ae=oe.backgroundKeepAspectRatio,we=void 0===Ae?$t.backgroundKeepAspectRatio:Ae,Ce=oe.backgroundScale,je=void 0===Ce?$t.backgroundScale:Ce,Ne=oe.backgroundOffsetX,Ve=void 0===Ne?$t.backgroundOffsetX:Ne,Ge=oe.backgroundOffsetY,ti=void 0===Ge?$t.backgroundOffsetY:Ge,li=oe.backgroundClip,hi=void 0===li?$t.backgroundClip:li;if(se)if(nt.backgroundImg&&nt.resources){var di=nt.resources.get(se);if("success"!==di.state||!di.data)return;if(at.save(),nt.parent&&!nt.transMatrix.onlyTranslate()){var fi=yh(nt.parent).group,pi=nt.parent.attribute,vi=pi.scrollX,mi=void 0===vi?fi.scrollX:vi,_i=pi.scrollY,bi=void 0===_i?fi.scrollY:_i;at.setTransformFromMatrix(nt.parent.globalTransMatrix,!0),at.translate(mi,bi)}hi&&at.clip();var Mi=nt.AABBBounds;at.setCommonStyle(nt,nt.attribute,lt,Rt,$t),at.globalAlpha=ue*he,this.doDrawImage(at,di.data,Mi,{"backgroundMode":fe,"backgroundFit":ve,"backgroundKeepAspectRatio":we,"backgroundScale":je,"backgroundOffsetX":Ve,"backgroundOffsetY":ti}),at.restore(),nt.transMatrix.onlyTranslate()||at.setTransformForCurrent()}else at.highPerformanceSave(),at.setCommonStyle(nt,nt.attribute,lt,Rt,$t),at.globalAlpha=ue*he,at.fillStyle=se,at.fill(),at.highPerformanceRestore()}},{"key":"doDrawImage","value":function(nt,at,lt,Rt){var Bt=Rt.backgroundMode,Lt=Rt.backgroundFit,Ht=Rt.backgroundKeepAspectRatio,jt=Rt.backgroundScale,$t=void 0===jt?1:jt,Kt=Rt.backgroundOffsetX,te=void 0===Kt?0:Kt,ne=Rt.backgroundOffsetY,re=void 0===ne?0:ne,ae=lt.width(),oe=lt.height(),se=ae,le=oe;if("no-repeat"===Bt)if(Lt)if(Ht){var ue=Math.max(ae/at.width,oe/at.height);nt.drawImage(at,lt.x1+te,lt.y1+re,at.width*ue*$t,at.height*ue*$t)}else nt.drawImage(at,lt.x1,lt.y1,lt.width(),lt.height());else{var ce=at.width*$t,he=at.height*$t;nt.drawImage(at,lt.x1+te,lt.y1+re,ce,he)}else{if(Lt&&"repeat"!==Bt&&(at.width||at.height)){var de=at.width,fe=at.height;"repeat-x"===Bt?(se=de*(oe/fe),le=oe):"repeat-y"===Bt&&(le=fe*(ae/de),se=ae);var pe=nt.dpr,ve=lh.allocate({"width":se,"height":le,"dpr":pe}),Ae=ve.getContext("2d");Ae&&(Ae.inuse=!0,Ae.clearMatrix(),Ae.setTransformForCurrent(!0),Ae.clearRect(0,0,se,le),Ae.drawImage(at,0,0,se,le),at=ve.nativeCanvas),lh.free(ve)}var we=nt.dpr,Ce=nt.createPattern(at,Bt);Ce.setTransform&&Ce.setTransform(new DOMMatrix([1/we,0,0,1/we,0,0])),nt.fillStyle=Ce,nt.translate(lt.x1,lt.y1),nt.fillRect(0,0,ae,oe),nt.translate(-lt.x1,-lt.y1)}}}]),Ny=new jy,Vy=o((function t(nt){r(this,t),this.subRenderContribitions=nt,this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach((function(ae){ae.render(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re)}))}}]);Vy=Ry([Hs(),Iy(0,Gs(ll)),Iy(0,js(Eg)),By("design:paramtypes",[Object])],Vy);var Wy=o((function t(){r(this,t),this.time=Dl.beforeFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae,oe;if(nt.attribute.clipConfig){var se=nt.getClipPath();if(se){var le=!(te||ne),ue=nt.AABBBounds,ce=null!==(ae=nt.attribute.width)&&void 0!==ae?ae:ue.width(),he=null!==(oe=nt.attribute.height)&&void 0!==oe?oe:ue.height();le&&at.save(),at.beginPath(),!1===se.draw(at,[ce,he],lt+ce/2,Rt+he/2,0)&&at.closePath(),te&&te(at,nt.attribute,$t,!0),le&&at.clip()}}}}]),Gy=new Wy,Uy=new(o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){nt.attribute.clipConfig&&nt.getClipPath()&&(te||ne||at.restore())}}])),Yy=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}),[{"key":"createCommonPattern","value":function(nt,at,lt,Rt,Bt){var Lt=(nt-2*at)/2,Ht=Rt.dpr,jt=lh.allocate({"width":nt,"height":nt,"dpr":Ht}),$t=jt.getContext("2d");if(!$t)return null;$t.inuse=!0,$t.clearMatrix(),$t.setTransformForCurrent(!0),$t.clearRect(0,0,nt,nt),Bt(Lt,$t);var Kt=Rt.createPattern(jt.nativeCanvas,"repeat");return Kt.setTransform&&Kt.setTransform(new DOMMatrix([1/Ht,0,0,1/Ht,0,0])),lh.free(jt),Kt}},{"key":"createCirclePattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(nt,at){at.fillStyle=lt,at.arc(nt,nt,nt,0,de),at.fill()}))}},{"key":"createDiamondPattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(at,Rt){var Bt=nt/2,Lt=Bt;Rt.fillStyle=lt,Rt.moveTo(Bt,Lt-at),Rt.lineTo(at+Bt,Lt),Rt.lineTo(Bt,Lt+at),Rt.lineTo(Bt-at,Lt),Rt.closePath(),Rt.fill()}))}},{"key":"createRectPattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(nt,Rt){var Bt=at,Lt=Bt;Rt.fillStyle=lt,Rt.fillRect(Bt,Lt,2*nt,2*nt)}))}},{"key":"createVerticalLinePattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(Rt,Bt){var Lt=at;Bt.fillStyle=lt,Bt.fillRect(Lt,0,2*Rt,nt)}))}},{"key":"createHorizontalLinePattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(Rt,Bt){var Lt=at;Bt.fillStyle=lt,Bt.fillRect(0,Lt,nt,2*Rt)}))}},{"key":"createBiasLRLinePattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(at,Rt){Rt.strokeStyle=lt,Rt.lineWidth=at,Rt.moveTo(0,0),Rt.lineTo(nt,nt);var Bt=nt/2,Lt=-Bt;Rt.moveTo(Bt,Lt),Rt.lineTo(Bt+nt,Lt+nt),Rt.moveTo(-Bt,-Lt),Rt.lineTo(-Bt+nt,-Lt+nt),Rt.stroke()}))}},{"key":"createBiasRLLinePattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(at,Rt){Rt.strokeStyle=lt,Rt.lineWidth=at,Rt.moveTo(nt,0),Rt.lineTo(0,nt);var Bt=nt/2,Lt=Bt;Rt.moveTo(nt+Bt,Lt),Rt.lineTo(Bt,Lt+nt),Rt.moveTo(nt-Bt,-Lt),Rt.lineTo(-Bt,-Lt+nt),Rt.stroke()}))}},{"key":"createGridPattern","value":function(nt,at,lt,Rt){return this.createCommonPattern(nt,at,lt,Rt,(function(nt,Rt){var Bt=at,Lt=Bt;Rt.fillStyle=lt,Rt.fillRect(Bt,Lt,nt,nt),Rt.fillRect(Bt+nt,Lt+nt,nt,nt)}))}},{"key":"initTextureMap","value":function(nt,at){this.textureMap=new Map}},{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){this.textureMap||this.initTextureMap(at,nt.stage);var ae=nt.attribute,oe=ae.texture,se=void 0===oe?$t.texture:oe,le=ae.textureColor,ue=void 0===le?$t.textureColor:le,ce=ae.textureSize,he=void 0===ce?$t.textureSize:ce,de=ae.texturePadding,fe=void 0===de?$t.texturePadding:de;se&&this.drawTexture(se,nt,at,lt,Rt,$t,ue,he,fe)}},{"key":"drawTexture","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){var Kt,te=at.attribute,ne=te.textureRatio,re=void 0===ne?Lt.textureRatio:ne,ae=te.textureOptions,oe=void 0===ae?null:ae,se=this.textureMap.get(nt);if(!se)switch(nt){case"circle":se=this.createCirclePattern(jt,$t,Ht,lt);break;case"diamond":se=this.createDiamondPattern(jt,$t,Ht,lt);break;case"rect":se=this.createRectPattern(jt,$t,Ht,lt);break;case"vertical-line":se=this.createVerticalLinePattern(jt,$t,Ht,lt);break;case"horizontal-line":se=this.createHorizontalLinePattern(jt,$t,Ht,lt);break;case"bias-lr":se=this.createBiasLRLinePattern(jt,$t,Ht,lt);break;case"bias-rl":se=this.createBiasRLLinePattern(jt,$t,Ht,lt);break;case"grid":se=this.createGridPattern(jt,$t,Ht,lt)}if(oe&&oe.dynamicTexture){var le=oe.gridConfig,ue=void 0===le?{}:le,ce=oe.useNewCanvas,he=at.AABBBounds;Rt=he.x1,Bt=he.y1;var de,fe=lt;if(ce){var pe=(de=lh.allocate({"width":he.width(),"height":he.height(),"dpr":lt.dpr})).getContext("2d");pe.clearRect(0,0,he.width(),he.height()),Rt=0,Bt=0,lt=pe}if(fe.save(),at.parent&&!at.transMatrix.onlyTranslate()){var ve=at.parent.attribute,Ae=ve.scrollX,we=void 0===Ae?0:Ae,Ce=ve.scrollY,je=void 0===Ce?0:Ce;fe.setTransformFromMatrix(at.parent.globalTransMatrix),fe.translate(we,je,!0)}fe.setCommonStyle(at,at.attribute,Rt,Bt,Lt),fe.clip();var Ne=he.width(),Ve=he.height(),Ge=$t,ti=jt,li=ue.columns?ue.columns:Math.ceil(Ne/ti),hi=ue.rows?ue.rows:Math.ceil(Ve/ti),di=ue.gutterColumn?ue.gutterColumn:2*Ge,fi=ue.gutterRow?ue.gutterRow:2*Ge;this._tempSymbolGraphic||(this._tempSymbolGraphic=zg({}));var pi=ue.columns?Ne/ue.columns:ti,vi=ue.rows?Ve/ue.rows:ti;this._tempSymbolGraphic.setAttributes({"size":[pi-di,vi-fi],"symbolType":nt});for(var mi=this._tempSymbolGraphic.getParsedPath(),_i=0;_i<hi;_i++)for(var bi=0;bi<li;bi++){var Mi=Rt+ti/2+bi*ti,Ti=Bt+ti/2+_i*ti;null===(Kt=oe.beforeDynamicTexture)||void 0===Kt||Kt.call(oe,lt,_i,bi,hi,li,re,at,he.width(),he.height()),lt.beginPath(),!1===mi.draw(lt,Math.min(pi-di,vi-fi),Mi,Ti,0)&&lt.closePath(),lt.fillStyle=Ht,oe.dynamicTexture(lt,_i,bi,hi,li,re,at,he.width(),he.height())}ce&&(fe.globalAlpha=1,fe.drawImage(de.nativeCanvas,0,0,de.nativeCanvas.width,de.nativeCanvas.height,he.x1,he.y1,he.width()*fe.dpr,he.height()*fe.dpr)),fe.restore()}else if(se)lt.highPerformanceSave(),lt.setCommonStyle(at,at.attribute,Rt,Bt,Lt),lt.fillStyle=se,lt.fill(),lt.highPerformanceRestore();else if("wave"===nt){lt.save(),lt.setCommonStyle(at,at.attribute,Rt,Bt,Lt),lt.clip();var Ii=at.AABBBounds;(function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=Bt.fill,$t=void 0===jt?"orange":jt,Kt=Bt.percent,te=void 0===Kt?.6:Kt,ne=Bt.frequency,re=void 0===ne?4:ne,ae=Bt.opacity,oe=Bt.phi,se=void 0===oe?0:oe,le=Bt.amplitude,ue=void 0===le?10:le;ue*=function(nt){return nt<=.5?4*nt-1:-4*nt+3}(at);var ce=Rt*(1-te),he=lt,de=Math.max(Math.round(he/70),2);nt.beginPath(),nt.moveTo(0+Lt,Rt+Ht),nt.lineTo(0+Lt,ce+Ht);for(var fe=he/re*at,pe=he/Math.PI/(2*re),ve=0;ve<he;ve+=de){var Ae=ue*Math.sin((ve+fe+se)/pe+se);nt.lineTo(ve+Lt,ce+Ae+Ht)}nt.lineTo(he+Lt,Rt+Ht),nt.closePath(),nt.fillStyle=$t,isFinite(ae)&&(nt.globalAlpha=ae),nt.fill()})(lt,re,Ii.width(),Ii.height(),Object.assign(Object.assign({},oe||{}),{"fill":Ht}),Rt+Ii.x1-Rt,Bt+Ii.y1-Bt),lt.restore()}}}]),Xy=new Yy,qy=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.attribute,ae=re.outerBorder,oe=re.innerBorder,se=ae&&!1!==ae.visible,le=oe&&!1!==oe.visible;if(se||le){var ue=nt.attribute,ce=ue.innerPadding,he=void 0===ce?$t.innerPadding:ce,de=ue.outerPadding,fe=void 0===de?$t.outerPadding:de,pe=ue.startAngle,ve=void 0===pe?$t.startAngle:pe,Ae=ue.endAngle,we=void 0===Ae?$t.endAngle:Ae,Ce=ue.opacity,je=void 0===Ce?$t.opacity:Ce,Ne=ue.x,Ve=void 0===Ne?$t.x:Ne,Ge=ue.y,ti=void 0===Ge?$t.y:Ge,li=ue.scaleX,hi=void 0===li?$t.scaleX:li,di=ue.scaleY,fi=void 0===di?$t.scaleY:di,pi=ue.keepStrokeScale,vi=void 0===pi?$t.keepStrokeScale:pi,mi=nt.attribute,_i=mi.innerRadius,bi=void 0===_i?$t.innerRadius:_i,Mi=mi.outerRadius,Ti=void 0===Mi?$t.outerRadius:Mi;Ti+=fe,bi-=he;var G=function(Bt,Lt){var Ht=!(!Bt||!Bt.stroke),jt=Bt.distance,Kt=void 0===jt?$t[Lt].distance:jt,te=vi?Kt:ic(at,Kt,at.dpr),re=Kt/Ti,ae="outerBorder"===Lt?1:-1;if(nt.setAttributes({"outerRadius":Ti+ae*te,"innerRadius":bi-ae*te,"startAngle":ve-ae*re,"endAngle":we+ae*re}),at.beginPath(),Jv(nt,at,lt,Rt,Ti+ae*te,bi-ae*te),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),ne)ne(at,Bt,$t[Lt]);else if(Ht){var oe=$t[Lt].opacity;$t[Lt].opacity=je,at.setStrokeStyle(nt,Bt,(Ve-lt)/hi,(ti-Rt)/fi,$t[Lt]),$t[Lt].opacity=oe,at.stroke()}};se&&G(ae,"outerBorder"),le&&G(oe,"innerBorder"),nt.setAttributes({"outerRadius":Ti,"innerRadius":bi,"startAngle":ve,"endAngle":we})}}}]),Ky=new qy,Zy=Xy,Qy=Ny,Jy=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.attribute,ae=re.outerBorder,oe=re.innerBorder,se=ae&&!1!==ae.visible,le=oe&&!1!==oe.visible;if(se||le){var ue=nt.attribute,ce=ue.radius,he=void 0===ce?$t.radius:ce,de=ue.startAngle,fe=void 0===de?$t.startAngle:de,pe=ue.endAngle,ve=void 0===pe?$t.endAngle:pe,Ae=ue.opacity,we=void 0===Ae?$t.opacity:Ae,Ce=ue.x,je=void 0===Ce?$t.x:Ce,Ne=ue.y,Ve=void 0===Ne?$t.y:Ne,Ge=ue.scaleX,ti=void 0===Ge?$t.scaleX:Ge,li=ue.scaleY,hi=void 0===li?$t.scaleY:li,di=ue.keepStrokeScale,fi=void 0===di?$t.keepStrokeScale:di,O=function(Bt,Lt){var Ht=!(!Bt||!Bt.stroke),jt=Bt.distance,Kt=void 0===jt?$t[Lt].distance:jt,te=fi?Kt:ic(at,Kt,at.dpr),re="outerBorder"===Lt?1:-1;if(at.beginPath(),at.arc(lt,Rt,he+re*te,fe,ve),at.closePath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),ne)ne(at,Bt,$t[Lt]);else if(Ht){var ae=$t[Lt].opacity;$t[Lt].opacity=we,at.setStrokeStyle(nt,Bt,(je-lt)/ti,(Ve-Rt)/hi,$t[Lt]),$t[Lt].opacity=ae,at.stroke()}};se&&O(ae,"outerBorder"),le&&O(oe,"innerBorder")}}}]),em=new Jy,im=Xy,nm=Ny,rm=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).time=Dl.beforeFillStroke,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.attribute,ae=re.background,oe=re.backgroundMode,se=void 0===oe?$t.backgroundMode:oe,le=re.backgroundFit,ue=void 0===le?$t.backgroundFit:le,ce=re.backgroundKeepAspectRatio,he=void 0===ce?$t.backgroundKeepAspectRatio:ce,de=re.backgroundScale,fe=void 0===de?$t.backgroundScale:de,pe=re.backgroundOffsetX,ve=void 0===pe?$t.backgroundOffsetX:pe,Ae=re.backgroundOffsetY,we=void 0===Ae?$t.backgroundOffsetY:Ae;if(ae)if(nt.backgroundImg&&nt.resources){var Ce=nt.resources.get(ae);if("success"!==Ce.state||!Ce.data)return;at.highPerformanceSave(),at.setTransformFromMatrix(nt.parent.globalTransMatrix,!0);var je=nt.AABBBounds;this.doDrawImage(at,Ce.data,je,{"backgroundMode":se,"backgroundFit":ue,"backgroundKeepAspectRatio":he,"backgroundScale":fe,"backgroundOffsetX":ve,"backgroundOffsetY":we}),at.highPerformanceRestore(),at.setTransformForCurrent()}else at.highPerformanceSave(),at.fillStyle=ae,at.fill(),at.highPerformanceRestore()}}])}(jy),am=new rm,om=ue/2;function $y(nt,at,lt,Rt,Bt,Lt){var Ht,jt=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],$t=arguments.length>7?arguments[7]:void 0;if(Array.isArray(jt)&&($t=jt,jt=!0),Rt<0&&(at+=Rt,Rt=-Rt),Bt<0&&(lt+=Bt,Bt=-Bt),Z(Lt,!0))Ht=[Lt=fe(Lt),Lt,Lt,Lt];else if(Array.isArray(Lt)){var Kt,te,ne=Lt;switch(ne.length){case 0:Ht=[0,0,0,0];break;case 1:Ht=[Kt=fe(ne[0]),Kt,Kt,Kt];break;case 2:case 3:Ht=[Kt=fe(ne[0]),te=fe(ne[1]),Kt,te];break;default:(Ht=ne)[0]=fe(Ht[0]),Ht[1]=fe(Ht[1]),Ht[2]=fe(Ht[2]),Ht[3]=fe(Ht[3])}}else Ht=[0,0,0,0];if(Rt<0||Ht[0]+Ht[1]+Ht[2]+Ht[3]<1e-12)return nt.rect(at,lt,Rt,Bt);var re=[at,lt],ae=[at+Rt,lt],oe=[at+Rt,lt+Bt],se=[at,lt+Bt],le=Math.min(Rt/2,Bt/2),ce=[Math.min(le,Ht[0]),Math.min(le,Ht[1]),Math.min(le,Ht[2]),Math.min(le,Ht[3])],he=[re[0]+ce[0],re[1]],de=[re[0],re[1]+ce[0]],pe=[ae[0]-ce[1],ae[1]],ve=[ae[0],ae[1]+ce[1]],Ae=[oe[0]-ce[2],oe[1]],we=[oe[0],oe[1]-ce[2]],Ce=[se[0]+ce[3],se[1]],je=[se[0],se[1]-ce[3]];if(nt.moveTo(he[0],he[1]),jt){if($t&&$t[0]?$t[0](he[0],he[1],pe[0],pe[1]):nt.lineTo(pe[0],pe[1]),!wt(pe,ve)){$t&&$t[0]&&nt.moveTo(pe[0],pe[1]);var Ne=pe[0],Ve=pe[1]+ce[1];nt.arc(Ne,Ve,ce[1],-om,0,!1)}if($t&&$t[1]?$t[1](ve[0],ve[1],we[0],we[1]):nt.lineTo(we[0],we[1]),!wt(Ae,we)){var Ge=we[0]-ce[2],ti=we[1];$t&&$t[1]&&nt.moveTo(we[0],we[1]),nt.arc(Ge,ti,ce[2],0,om,!1)}if($t&&$t[2]?$t[2](Ae[0],Ae[1],Ce[0],Ce[1]):nt.lineTo(Ce[0],Ce[1]),!wt(Ce,je)){var li=Ce[0],hi=Ce[1]-ce[3];$t&&$t[2]&&nt.moveTo(Ce[0],Ce[1]),nt.arc(li,hi,ce[3],om,ue,!1)}if($t&&$t[3]?$t[3](je[0],je[1],de[0],de[1]):nt.lineTo(de[0],de[1]),!wt(he,de)){var di=he[0],fi=he[1]+ce[0];$t&&$t[3]&&nt.moveTo(de[0],de[1]),nt.arc(di,fi,ce[0],ue,ue+om,!1)}}else $t&&$t[0]?$t[0](he[0],he[1],pe[0],pe[1]):nt.lineTo(pe[0],pe[1]),$t&&$t[1]?$t[1](pe[0],pe[1],Ae[0],Ae[1]):nt.lineTo(Ae[0],Ae[1]),$t&&$t[2]?$t[2](Ae[0],Ae[1],Ce[0],Ce[1]):nt.lineTo(Ce[0],Ce[1]),$t&&$t[2]?$t[2](Ce[0],Ce[1],he[0],he[1]):nt.lineTo(he[0],he[1]);return!$t&&nt.closePath(),nt}var tm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},sm=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.attribute,ae=re.outerBorder,oe=re.innerBorder,se=ae&&!1!==ae.visible,le=oe&&!1!==oe.visible;if(se||le){var ue=nt.attribute,ce=ue.cornerRadius,he=void 0===ce?$t.cornerRadius:ce,de=ue.cornerType,fe=void 0===de?$t.cornerType:de,pe=ue.opacity,ve=void 0===pe?$t.opacity:pe,Ae=ue.x,we=void 0===Ae?$t.x:Ae,Ce=ue.y,je=void 0===Ce?$t.y:Ce,Ne=ue.scaleX,Ve=void 0===Ne?$t.scaleX:Ne,Ge=ue.scaleY,ti=void 0===Ge?$t.scaleY:Ge,li=ue.x1,hi=ue.y1,di=ue.keepStrokeScale,fi=void 0===di?$t.keepStrokeScale:di,pi=nt.attribute,vi=pi.width,mi=pi.height;vi=(null!=vi?vi:li-lt)||0,mi=(null!=mi?mi:hi-Rt)||0;var H=function(Bt,Lt){var Ht=!(!Bt||!Bt.stroke),jt="outerBorder"===Lt?-1:1,Kt=Bt.distance,te=void 0===Kt?$t[Lt].distance:Kt,re=fi?te:ic(at,te,at.dpr),ae=lt+jt*re,oe=Rt+jt*re,se=2*re;if(0===he||X(he)&&he.every((function(nt){return 0===nt}))?(at.beginPath(),at.rect(ae,oe,vi-jt*se,mi-jt*se)):(at.beginPath(),$y(at,ae,oe,vi-jt*se,mi-jt*se,he,"bevel"!==fe)),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),ne)ne(at,Bt,$t[Lt]);else if(Ht){var le=$t[Lt].opacity;$t[Lt].opacity=ve,at.setStrokeStyle(nt,Bt,(we-lt)/Ve,(je-Rt)/ti,$t[Lt]),$t[Lt].opacity=le,at.stroke()}};se&&H(ae,"outerBorder"),le&&H(oe,"innerBorder")}}}]),lm=o((function t(){r(this,t),this.time=Dl.beforeFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae=nt.attribute.stroke,oe=void 0===ae?$t.stroke:ae;Array.isArray(oe)&&oe.some((function(nt){return!1===nt}))&&(re.doStroke=!1)}}]);lm=tm([Hs()],lm);var um=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.attribute,ae=re.x1,oe=re.y1,se=re.x,le=void 0===se?$t.x:se,ue=re.y,ce=void 0===ue?$t.y:ue,he=re.stroke,de=void 0===he?$t.stroke:he,fe=re.cornerRadius,pe=void 0===fe?$t.cornerRadius:fe,ve=re.cornerType,Ae=void 0===ve?$t.cornerType:ve,we=nt.attribute,Ce=we.width,je=we.height;if(Ce=(null!=Ce?Ce:ae-le)||0,je=(null!=je?je:oe-ce)||0,Array.isArray(de)&&de.some((function(nt){return!1===nt}))){if(at.setStrokeStyle(nt,nt.attribute,lt,Rt,$t),!(0===pe||X(pe)&&pe.every((function(nt){return 0===nt})))){var Ne,Ve=0;return $y(at,lt,Rt,Ce,je,pe,"bevel"!==Ae,new Array(4).fill(0).map((function(Bt,Lt){return function(Bt,Ht,jt,Kt){de[Lt]&&(Ve===Lt-1&&de[Lt]===Ne||(at.setStrokeStyle(nt,Object.assign(Object.assign({},nt.attribute),{"stroke":de[Lt]}),lt,Rt,$t),at.beginPath(),at.moveTo(Bt,Ht),Ne=de[Lt]),Ve=Lt,at.lineTo(jt,Kt),at.stroke(),3===Lt&&at.beginPath())}}))),void at.stroke()}if(at.beginPath(),at.moveTo(lt,Rt),de[0]?at.lineTo(lt+Ce,Rt):at.moveTo(lt+Ce,Rt),de[1]?at.lineTo(lt+Ce,Rt+je):at.moveTo(lt+Ce,Rt+je),de[2]?at.lineTo(lt,Rt+je):at.moveTo(lt,Rt+je),de[3]){var Ge=de[0]?Rt-at.lineWidth/2:Rt;at.lineTo(lt,Ge)}else at.moveTo(lt,Rt);at.stroke()}}}]);um=tm([Hs()],um);var cm=new sm,hm=Xy,dm=Ny,fm=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).time=Dl.afterFillStroke,nt.useStyle=!0,nt.order=0,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){return y(e,"drawShape",this,3)([nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne])}}])}(sm),pm=new fm,vm=Ny,gm=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re=nt.getParsedPath();if(re){var ae=nt.attribute,oe=ae.outerBorder,se=ae.innerBorder,le=oe&&!1!==oe.visible,ue=se&&!1!==se.visible;if(le||ue){var ce=nt.attribute,he=ce.size,de=void 0===he?$t.size:he,fe=ce.opacity,pe=void 0===fe?$t.opacity:fe,ve=ce.x,Ae=void 0===ve?$t.x:ve,we=ce.y,Ce=void 0===we?$t.y:we,je=ce.scaleX,Ne=void 0===je?$t.scaleX:je,Ve=ce.scaleY,Ge=void 0===Ve?$t.scaleY:Ve,ti=ce.keepStrokeScale,li=void 0===ti?$t.keepStrokeScale:ti,I=function(Bt,Lt){var Ht=!(!Bt||!Bt.stroke),jt=Bt.distance,Kt=void 0===jt?$t[Lt].distance:jt,te=li?Kt:ic(at,Kt,at.dpr),ae="outerBorder"===Lt?1:-1;if(at.beginPath(),!1===re.drawOffset(at,de,lt,Rt,ae*te)&&at.closePath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),ne)ne(at,Bt,$t[Lt]);else if(Ht){var oe=$t[Lt].opacity;$t[Lt].opacity=pe,at.setStrokeStyle(nt,Bt,(Ae-lt)/Ne,(Ce-Rt)/Ge,$t[Lt]),$t[Lt].opacity=oe,at.stroke()}};le&&I(oe,"outerBorder"),ue&&I(se,"innerBorder")}}}}]),ym=o((function t(){r(this,t),this.time=Dl.afterFillStroke,this.useStyle=!0,this.order=0}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae=nt.attribute,oe=ae.clipRange,se=void 0===oe?$t.clipRange:oe,le=ae.x,ue=void 0===le?$t.x:le,ce=ae.y,he=void 0===ce?$t.y:ce,de=ae.z,fe=void 0===de?$t.z:de,pe=ae.size,ve=void 0===pe?$t.size:pe,Ae=ae.scaleX,we=void 0===Ae?$t.scaleX:Ae,Ce=ae.scaleY,je=void 0===Ce?$t.scaleY:Ce,Ne=nt.getParsedPath();Ne&&se<1&&se>0&&(at.beginPath(),Ne.drawWithClipRange&&Ne.drawWithClipRange(at,ve,lt,Rt,se,fe,(function(Bt,Lt){var Ht,Kt,te,re;if(nt._parsedPath.svgCache){var ae=Object.assign({},Lt);ae.fill=null!==(Ht=Lt.fill)&&void 0!==Ht?Ht:nt.attribute.fill,ae.opacity=null!==(Kt=Lt.opacity)&&void 0!==Kt?Kt:nt.attribute.opacity,ae.fillOpacity=nt.attribute.fillOpacity,ae.stroke=null!==(te=Lt.stroke)&&void 0!==te?te:nt.attribute.stroke,ae.lineWidth=null!==(re=Lt.lineWidth)&&void 0!==re?re:nt.attribute.lineWidth,Lt=ae}Lt.stroke&&(ne?ne(at,nt.attribute,$t):jt&&(at.setStrokeStyle(nt,Lt,(ue-lt)/we,(he-Rt)/je,$t),at.stroke()))})),Lt&&!Ne.isSvg&&(ne?ne(at,nt.attribute,$t):jt&&(at.setStrokeStyle(nt,nt.attribute,(ue-lt)/we,(he-Rt)/je,$t),at.stroke())))}}]),mm=new gm,km=new ym,Mm=Xy,Rm=Ny,Im=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).time=Dl.afterFillStroke,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae,oe,se,le;this.textureMap||this.initTextureMap(at,nt.stage);var ue=(re||{}).attribute,ce=void 0===ue?nt.attribute:ue,he=ce.texture,de=void 0===he?null!==(ae=nt.attribute.texture)&&void 0!==ae?ae:sd($t,"texture"):he,fe=ce.textureColor,pe=void 0===fe?null!==(oe=nt.attribute.textureColor)&&void 0!==oe?oe:sd($t,"textureColor"):fe,ve=ce.textureSize,Ae=void 0===ve?null!==(se=nt.attribute.textureSize)&&void 0!==se?se:sd($t,"textureSize"):ve,we=ce.texturePadding,Ce=void 0===we?null!==(le=nt.attribute.texturePadding)&&void 0!==le?le:sd($t,"texturePadding"):we;de&&this.drawTexture(de,nt,at,lt,Rt,$t,pe,Ae,Ce)}}])}(Yy),Lm={"x":0,"y":0,"z":0,"lastModelMatrix":null},zm=o((function t(){r(this,t)}),[{"key":"init","value":function(nt){var at=this;nt&&(this._renderContribitions=nt.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(Gy),this.builtinContributions.push(Uy),this.builtinContributions.forEach((function(nt){return at._renderContribitions.push(nt)})),this._renderContribitions.length&&(this._renderContribitions.sort((function(nt,at){return at.order-nt.order})),this._beforeRenderContribitions=this._renderContribitions.filter((function(nt){return nt.time===Dl.beforeFillStroke})),this._afterRenderContribitions=this._renderContribitions.filter((function(nt){return nt.time===Dl.afterFillStroke})))}},{"key":"beforeRenderStep","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach((function(ae){ae.supportedAppName&&nt.stage&&nt.stage.params&&nt.stage.params.context&&nt.stage.params.context.appName&&!(Array.isArray(ae.supportedAppName)?ae.supportedAppName:[ae.supportedAppName]).includes(nt.stage.params.context.appName)||ae.drawShape(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re)}))}},{"key":"afterRenderStep","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){this._afterRenderContribitions&&this._afterRenderContribitions.forEach((function(ae){ae.supportedAppName&&nt.stage&&nt.stage.params&&nt.stage.params.context&&nt.stage.params.context.appName&&!(Array.isArray(ae.supportedAppName)?ae.supportedAppName:[ae.supportedAppName]).includes(nt.stage.params.context.appName)||ae.drawShape(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re)}))}},{"key":"drawPathProxy","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){if(!nt.pathProxy)return!1;var $t=yh(nt,null==Lt?void 0:Lt.theme)[nt.type.replace("3d","")],Kt=nt.attribute,te=Kt.fill,ne=void 0===te?$t.fill:te,re=Kt.stroke,ae=void 0===re?$t.stroke:re,oe=Kt.opacity,se=void 0===oe?$t.opacity:oe,le=Kt.fillOpacity,ue=void 0===le?$t.fillOpacity:le,ce=Kt.lineWidth,he=void 0===ce?$t.lineWidth:ce,de=Kt.strokeOpacity,fe=void 0===de?$t.strokeOpacity:de,pe=Kt.visible,ve=void 0===pe?$t.visible:pe,Ae=Kt.x,we=void 0===Ae?$t.x:Ae,Ce=Kt.y,je=void 0===Ce?$t.y:Ce,Ne=Uv(se,ue,ne),Ve=Xv(se,fe),Ge=Gv(ne),ti=Wv(ae,he);return!ve||!Ge&&!ti||!(Ne||Ve||Ht||jt)||(at.beginPath(),jl(("function"==typeof nt.pathProxy?nt.pathProxy(nt.attribute):nt.pathProxy).commandList,at,lt,Rt),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this.beforeRenderStep(nt,at,lt,Rt,Ge,ti,Ne,Ve,$t,Bt,Ht,jt),ti&&(jt?jt(at,nt.attribute,$t):Ve&&(at.setStrokeStyle(nt,nt.attribute,lt-we,Rt-je,$t),at.stroke())),Ge&&(Ht?Ht(at,nt.attribute,$t):Ne&&(at.setCommonStyle(nt,nt.attribute,lt-we,Rt-je,$t),at.fill())),this.afterRenderStep(nt,at,lt,Rt,Ge,ti,Ne,Ve,$t,Bt,Ht,jt),!0)}},{"key":"valid","value":function(nt,at,lt,Rt){var Bt=nt.attribute,Lt=Bt.fill,Ht=void 0===Lt?at.fill:Lt,jt=Bt.background,$t=Bt.stroke,Kt=void 0===$t?at.stroke:$t,te=Bt.opacity,ne=void 0===te?at.opacity:te,re=Bt.fillOpacity,ae=void 0===re?at.fillOpacity:re,oe=Bt.lineWidth,se=void 0===oe?at.lineWidth:oe,le=Bt.strokeOpacity,ue=void 0===le?at.strokeOpacity:le,ce=Bt.visible,he=void 0===ce?at.visible:ce,de=Uv(ne,ae,Ht),fe=Xv(ne,ue),pe=Gv(Ht,jt),ve=Wv(Kt,se);return!(!nt.valid||!he)&&!(!pe&&!ve)&&!!(de||fe||lt||Rt||jt)&&{"fVisible":de,"sVisible":fe,"doFill":pe,"doStroke":ve}}},{"key":"transform","value":function(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Bt=nt.attribute,Lt=Bt.x,Ht=void 0===Lt?at.x:Lt,jt=Bt.y,$t=void 0===jt?at.y:jt,Kt=Bt.z,te=void 0===Kt?at.z:Kt,ne=Bt.scaleX,re=void 0===ne?at.scaleX:ne,ae=Bt.scaleY,oe=void 0===ae?at.scaleY:ae,se=Bt.angle,le=void 0===se?at.angle:se,ue=Bt.postMatrix,ce=lt.modelMatrix,he=lt.camera;Lm.x=Ht,Lm.y=$t,Lm.z=te,Lm.lastModelMatrix=ce;var de=he&&(Rt||function(nt){var at=nt.attribute,lt=at.alpha,Rt=at.beta;return lt||Rt}(nt)),fe=de?nt.transMatrix.onlyTranslate()&&!ue:1===re&&1===oe&&0===le&&!ue;if(de){var pe=Og.allocate(),ve=Og.allocate();Mg(ve,nt,at),yg(pe,ce||pe,ve),Lm.x=0,Lm.y=0,Lm.z=0,lt.modelMatrix=pe,lt.setTransform(1,0,0,1,0,0,!0),Og.free(ve)}if(fe&&!ce){var Ae=nt.getOffsetXY(at);Lm.x+=Ae.x,Lm.y+=Ae.y,Lm.z=te,lt.setTransformForCurrent()}else if(de)Lm.x=0,Lm.y=0,Lm.z=0,lt.setTransform(1,0,0,1,0,0,!0);else if(he&&lt.project){var we=nt.getOffsetXY(at);Lm.x+=we.x,Lm.y+=we.y,this.transformWithoutTranslate(lt,Lm.x,Lm.y,Lm.z,re,oe,le)}else lt.transformFromMatrix(nt.transMatrix,!0),Lm.x=0,Lm.y=0,Lm.z=0;return Lm}},{"key":"transformUseContext2d","value":function(nt,at,lt,Rt){var Bt=Rt.camera;if(this.camera=Bt,Bt){var Lt=nt.AABBBounds,Ht=Lt.x2-Lt.x1,jt=Lt.y2-Lt.y1,$t=Rt.project(0,0,lt),Kt=Rt.project(Ht,0,lt),te=Rt.project(Ht,jt,lt),ne={"x":0,"y":0},re={"x":Ht,"y":0},ae={"x":Ht,"y":jt};Rt.camera=null;var oe=1/(ne.x*(ae.y-re.y)-re.x*ae.y+ae.x*re.y+(re.x-ae.x)*ne.y),se=-(ne.y*(te.x-Kt.x)-re.y*te.x+ae.y*Kt.x+(re.y-ae.y)*$t.x)*oe,le=(re.y*te.y+ne.y*(Kt.y-te.y)-ae.y*Kt.y+(ae.y-re.y)*$t.y)*oe,ue=(ne.x*(te.x-Kt.x)-re.x*te.x+ae.x*Kt.x+(re.x-ae.x)*$t.x)*oe,ce=-(re.x*te.y+ne.x*(Kt.y-te.y)-ae.x*Kt.y+(ae.x-re.x)*$t.y)*oe,he=(ne.x*(ae.y*Kt.x-re.y*te.x)+ne.y*(re.x*te.x-ae.x*Kt.x)+(ae.x*re.y-re.x*ae.y)*$t.x)*oe,de=(ne.x*(ae.y*Kt.y-re.y*te.y)+ne.y*(re.x*te.y-ae.x*Kt.y)+(ae.x*re.y-re.x*ae.y)*$t.y)*oe;Rt.setTransform(se,le,ue,ce,he,de,!0)}}},{"key":"restoreTransformUseContext2d","value":function(nt,at,lt,Rt){this.camera&&(Rt.camera=this.camera)}},{"key":"transformWithoutTranslate","value":function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=nt.project(at,lt,Rt);nt.translate(jt.x,jt.y,!1),nt.scale(Bt,Lt,!1),nt.rotate(Ht,!1),nt.translate(-jt.x,-jt.y,!1),nt.setTransformForCurrent()}},{"key":"_draw","value":function(nt,at,lt,Rt,Bt){var Lt=Rt.context;if(Lt&&!1!==nt.attribute.renderable){Lt.highPerformanceSave();var Ht=this.transform(nt,at,Lt,lt),jt=Ht.x,$t=Ht.y,Kt=Ht.z,te=Ht.lastModelMatrix;this.z=Kt,this.drawPathProxy(nt,Lt,jt,$t,Rt,Bt)||(this.drawShape(nt,Lt,jt,$t,Rt,Bt),this.z=0,Lt.modelMatrix!==te&&Og.free(Lt.modelMatrix),Lt.modelMatrix=te),Lt.highPerformanceRestore()}}}]),_m=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},bm=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},xm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Hm=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).arcRenderContribitions=nt,at.numberType=av,at.builtinContributions=[Ky,Qy,Zy],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawArcTailCapPath","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=jt-Ht,Kt=nt.getParsedAngle(),te=Kt.startAngle,ne=Kt.endAngle,re=(ne=jt)>te,ae=!1;if(Bt<Lt){var oe=Bt;Bt=Lt,Lt=oe}var se=Zv(nt,te,ne,Lt,Bt);se.outerDeltaAngle;var ue=se.xors,ce=se.yors,he=se.xirs,de=se.yirs,fe=se.limitedOcr,Ae=se.outerCornerRadiusStart,je=se.outerCornerRadiusEnd,Ne=se.maxOuterCornerRadius,Ve=se.xore,Ge=se.yore,ti=se.xire,li=se.yire,hi=se.limitedIcr,di=se.innerDeltaAngle,fi=se.innerStartAngle,pi=se.innerCornerRadiusStart,vi=se.innerCornerRadiusEnd,mi=se.maxInnerCornerRadius;if(fe>le){var _i=we(Ae,fe),bi=we(je,fe),Mi=qv(he,de,ue,ce,Bt,_i,Number(re)),Ti=qv(Ve,Ge,ti,li,Bt,bi,Number(re));if(fe<Ne&&_i===bi)at.moveTo(lt+Mi.cx+Mi.x01,Rt+Mi.cy+Mi.y01),at.arc(lt+Mi.cx,Rt+Mi.cy,fe,pe(Mi.y01,Mi.x01),pe(Ti.y01,Ti.x01),!re);else{var Ii=ne-$t-.03,Bi=pe(Ti.y11,Ti.x11);at.arc(lt,Rt,Bt,Ii,Bi,!re),bi>0&&at.arc(lt+Ti.cx,Rt+Ti.cy,bi,pe(Ti.y11,Ti.x11),pe(Ti.y01,Ti.x01),!re)}}else at.moveTo(lt+ue,Rt+ce);if(!(Lt>le)||di<.001)at.lineTo(lt+ti,Rt+li),ae=!0;else if(hi>le){var zi=we(pi,hi),Wi=we(vi,hi),Ui=qv(ti,li,Ve,Ge,Lt,-Wi,Number(re)),$i=qv(ue,ce,he,de,Lt,-zi,Number(re));if(at.lineTo(lt+Ui.cx+Ui.x01,Rt+Ui.cy+Ui.y01),hi<mi&&zi===Wi){var qi=pe($i.y01,$i.x01);at.arc(lt+Ui.cx,Rt+Ui.cy,hi,pe(Ui.y01,Ui.x01),qi,!re)}else{Wi>0&&at.arc(lt+Ui.cx,Rt+Ui.cy,Wi,pe(Ui.y01,Ui.x01),pe(Ui.y11,Ui.x11),!re);var Ki=pe(Ui.cy+Ui.y11,Ui.cx+Ui.x11),Qi=ne-$t-.03;at.arc(lt,Rt,Lt,Ki,Qi,re)}}else at.lineTo(lt+Lt*ve(fi),Rt+Lt*Ce(fi));return ae}},{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=yh(nt,null==Lt?void 0:Lt.theme).arc,Kt=nt.attribute,te=Kt.fill,ne=void 0===te?$t.fill:te,re=Kt.stroke,ae=void 0===re?$t.stroke:re,oe=Kt.x,se=void 0===oe?$t.x:oe,ue=Kt.y,ce=void 0===ue?$t.y:ue,he=Kt.fillStrokeOrder,pe=void 0===he?$t.fillStrokeOrder:he,ve=this.valid(nt,$t,Ht,jt);if(ve){var Ae=ve.fVisible,we=ve.sVisible,Ce=ve.doFill,je=ve.doStroke,Ne=nt.attribute,Ve=Ne.outerPadding,Ge=void 0===Ve?$t.outerPadding:Ve,ti=Ne.innerPadding,li=void 0===ti?$t.innerPadding:ti,hi=Ne.cap,di=void 0===hi?$t.cap:hi,fi=Ne.forceShowCap,pi=void 0===fi?$t.forceShowCap:fi,vi=nt.attribute,mi=vi.outerRadius,_i=void 0===mi?$t.outerRadius:mi,bi=vi.innerRadius,Mi=void 0===bi?$t.innerRadius:bi;_i+=Ge,Mi-=li;var Ti=0,Ii=(z(di)&&di||di[0])&&"conical"===ne.gradient;if(Ii){var Bi=nt.getParsedAngle(),zi=Bi.sc,Wi=Bi.startAngle,Ui=Bi.endAngle;fe(Ui-Wi)<de-le&&(Ti=zi||0,ne.startAngle-=Ti,ne.endAngle-=Ti)}var $i=!1,qi=function(nt){var at,lt=!0;if(z(nt,!0)){for(var Rt=0;Rt<4;Rt++)ld[Rt]=nt,lt&&(lt=!(null!==(at=ld[Rt])&&void 0!==at&&!at));lt=nt}else if(Array.isArray(nt))for(var Bt=0;Bt<4;Bt++)ld[Bt]=!!nt[Bt],lt&&(lt=!!ld[Bt]);else ld[0]=!1,ld[1]=!1,ld[2]=!1,ld[3]=!1;return{"isFullStroke":lt,"stroke":ld}}(ae),Ki=qi.isFullStroke,Qi=qi.stroke;if(Ce||Ki){at.beginPath(),Jv(nt,at,lt,Rt,_i,Mi),$i=!0,at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this.beforeRenderStep(nt,at,lt,Rt,Ce,je,Ae,we,$t,Bt,Ht,jt);var Z=function(){Ce&&(Ht?Ht(at,nt.attribute,$t):Ae&&(at.setCommonStyle(nt,nt.attribute,se-lt,ce-Rt,$t),at.fill()))},J=function(){je&&Ki&&(jt?jt(at,nt.attribute,$t):we&&(at.setStrokeStyle(nt,nt.attribute,se-lt,ce-Rt,$t),at.stroke()))};pe?(J(),Z()):(Z(),J())}if(!Ki&&je&&(at.beginPath(),Jv(nt,at,lt,Rt,_i,Mi,Qi),$i||this.beforeRenderStep(nt,at,lt,Rt,Ce,je,Ae,we,$t,Bt,Ht,jt),jt?jt(at,nt.attribute,$t):we&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,$t),at.stroke())),(z(di)&&di||di[1])&&pi){var Ji=nt.getParsedAngle(),dn=Ji.startAngle,fn=Ji.endAngle;if(fe(fn-dn)>=de-le){at.beginPath();var vn=Math.abs(_i-Mi)/2/_i,gn=nt.attribute,yn=gn.endAngle,mn=void 0===yn?$t.endAngle:yn,_n=gn.fill,bn=void 0===_n?$t.fill:_n,xn=mn;this.drawArcTailCapPath(nt,at,lt,Rt,_i,Mi,xn,xn+vn),$i||this.beforeRenderStep(nt,at,lt,Rt,Ce,je,Ae,we,$t,Bt,Ht,jt),function(){if(Ce){var Bt=bn;if("conical"===Bt.gradient){var Lt=function(nt,at,lt,Rt){for(var Bt=Rt.stops,Lt=Rt.startAngle,Ht=Rt.endAngle;lt<0;)lt+=de;for(;lt>de;)lt-=de;if(lt<Lt)return Bt[0].color;if(lt>Ht)return Bt[0].color;for(var jt,$t,Kt=(lt-Lt)/(Ht-Lt),te=0;te<Bt.length;te++)if(Bt[te].offset>=Kt){jt=Bt[te-1],$t=Bt[te];break}return Kt=(Kt-jt.offset)/($t.offset-jt.offset),Hd(jt.color,$t.color,Kt,!1)}(0,0,mn,Bt);Ht||Uv&&(at.setCommonStyle(nt,nt.attribute,lt,Rt,$t),at.fillStyle=Lt,at.fill())}}}(),je&&(jt||we&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,$t),at.stroke()))}}this.afterRenderStep(nt,at,lt,Rt,Ce,je,Ae,we,$t,Bt,Ht,jt),Ii&&(ne.startAngle+=Ti,ne.endAngle+=Ti)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).arc;this._draw(nt,Bt,!1,lt,Rt)}}])}(zm);Hm=_m([Hs(),xm(0,Gs(ll)),xm(0,js(sg)),bm("design:paramtypes",[Object])],Hm);var Sm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Am=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},wm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},jm=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).circleRenderContribitions=nt,at.numberType=lv,at.builtinContributions=[em,nm,im],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=yh(nt,null==Lt?void 0:Lt.theme).circle,Kt=nt.attribute,te=Kt.radius,ne=void 0===te?$t.radius:te,re=Kt.startAngle,ae=void 0===re?$t.startAngle:re,oe=Kt.endAngle,se=void 0===oe?$t.endAngle:oe,le=Kt.x,ue=void 0===le?$t.x:le,ce=Kt.y,he=void 0===ce?$t.y:ce,de=Kt.fillStrokeOrder,fe=void 0===de?$t.fillStrokeOrder:de,pe=this.valid(nt,$t,Ht,jt);if(pe){var ve=pe.fVisible,Ae=pe.sVisible,we=pe.doFill,Ce=pe.doStroke;at.beginPath(),at.arc(lt,Rt,ne,ae,se),at.closePath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this.beforeRenderStep(nt,at,lt,Rt,we,Ce,ve,Ae,$t,Bt,Ht,jt);var T=function(){we&&(Ht?Ht(at,nt.attribute,$t):ve&&(at.setCommonStyle(nt,nt.attribute,ue-lt,he-Rt,$t),at.fill()))},C=function(){Ce&&(jt?jt(at,nt.attribute,$t):Ae&&(at.setStrokeStyle(nt,nt.attribute,ue-lt,he-Rt,$t),at.stroke()))};fe?(C(),T()):(T(),C()),this.afterRenderStep(nt,at,lt,Rt,we,Ce,ve,Ae,$t,Bt,Ht,jt)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).circle;this._draw(nt,Bt,!1,lt,Rt)}}])}(zm);function Tm(nt,at,lt,Rt){if(at.p1){var Bt=Rt||{},Lt=Bt.offsetX,Ht=void 0===Lt?0:Lt,jt=Bt.offsetY,$t=void 0===jt?0:jt,Kt=Bt.offsetZ,te=void 0===Kt?0:Kt;if(1===lt)at.p2&&at.p3?nt.bezierCurveTo(Ht+at.p1.x,$t+at.p1.y,Ht+at.p2.x,$t+at.p2.y,Ht+at.p3.x,$t+at.p3.y,te):nt.lineTo(Ht+at.p1.x,$t+at.p1.y,te);else if(at.p2&&at.p3){var ne=g(Kl(at,lt),1)[0];nt.bezierCurveTo(Ht+ne.p1.x,$t+ne.p1.y,Ht+ne.p2.x,$t+ne.p2.y,Ht+ne.p3.x,$t+ne.p3.y,te)}else{var re=at.getPointAt(lt);nt.lineTo(Ht+re.x,$t+re.y,te)}}}function Cm(nt,at,lt,Rt,Bt,Lt,Ht){var jt,$t=at.p0,Kt=Rt;if(lt&&lt.originP1===lt.originP2&&($t=lt.p0),at.defined)Rt||(nt.lineTo($t.x+Bt,$t.y+Lt,Ht),Kt=!Rt);else{var te,ne=at.originP1,re=at.originP2;if(ne&&!1!==ne.defined&&!lt?te=$t:ne&&!1!==re.defined&&(te=null!==(jt=at.p3)&&void 0!==jt?jt:at.p1),Rt){Kt=!Rt;var ae=te?te.x:at.p0.x,oe=te?te.y:at.p0.y;nt.moveTo(ae+Bt,oe+Lt,Ht)}else te&&(Kt=!Rt,nt.lineTo(te.x+Bt,te.y+Lt,Ht))}return Kt}function Em(nt,at,lt,Rt,Bt){var Lt=Bt||{},Ht=Lt.offsetX,jt=void 0===Ht?0:Ht,$t=Lt.offsetY,Kt=void 0===$t?0:$t,te=Lt.offsetZ,ne=void 0===te?0:te,re=Lt.mode,ae=void 0===re?"none":re,oe=Lt.drawConnect,se=void 0!==oe&&oe;if((!se||"none"!==ae)&&at){var le=!0,ue=at.curves;if(lt>=1)if(se){var ce,he=!0;ue.forEach((function(at,lt){at.originP1!==at.originP2?(he=Cm(nt,at,ce,he,jt,Kt,ne),ce=at):ce=at}))}else ue.forEach((function(at){at.defined?(le&&nt.moveTo(at.p0.x+jt,at.p0.y+Kt,ne),Tm(nt,at,1,Bt),le=!1):le=!0}));else if(!(lt<=0)){var de;"x"===Rt?de=Il.ROW:"y"===Rt?de=Il.COLUMN:"auto"===Rt&&(de=at.direction);for(var fe=lt*at.tryUpdateLength(de),pe=0,ve=!0,Ae=null,Ce=0,je=ue.length;Ce<je;Ce++){var Ne=ue[Ce],Ve=Ne.getLength(de),Ge=(fe-pe)/Ve;if(pe+=Ve,Ge<0)break;if(se){if(Ne.originP1===Ne.originP2){Ae=Ne;continue}ve=Cm(nt,Ne,Ae,ve,jt,Kt,ne),Ae=Ne}else{if(!Ne.defined){le=!0;continue}le&&nt.moveTo(Ne.p0.x+jt,Ne.p0.y+Kt,ne),Tm(nt,Ne,we(Ge,1),Bt),le=!1}}}}}jm=Sm([Hs(),wm(0,Gs(ll)),wm(0,js(ug)),Am("design:paramtypes",[Object])],jm);var Pm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Wm=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).numberType=dv,nt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).line;this._draw(nt,Bt,!1,lt,Rt)}},{"key":"drawSegmentItem","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe){var se;if(at){nt.beginPath();var le=null!==(se=this.z)&&void 0!==se?se:0;Em(nt.camera?nt:nt.nativeContext,at,$t,Kt,{"offsetX":te,"offsetY":ne,"offsetZ":le}),re.cache&&!X(re.cache)&&re.cache.curves.every((function(nt){return nt.defined}))&&re.attribute.curveType&&re.attribute.curveType.includes("Closed")&&nt.closePath(),nt.setShadowBlendStyle&&nt.setShadowBlendStyle(re,Ht,jt);var ue=Ht.x,ce=void 0===ue?0:ue,he=Ht.x,de=void 0===he?0:he;return!1!==lt&&(ae?ae(nt,Ht,jt):Bt&&(nt.setCommonStyle(re,Ht,ce-te,de-ne,jt),nt.fill())),!1!==Rt&&(oe?oe(nt,Ht,jt):Lt&&(nt.setStrokeStyle(re,Ht,ce-te,de-ne,jt),nt.stroke())),!1}}},{"key":"drawLinearLineHighPerformance","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae;at.beginPath();var oe=null!==(ae=this.z)&&void 0!==ae?ae:0,se=nt.attribute.points,le=se[0];at.moveTo(le.x+Ht,le.y+jt,oe);for(var ue=1;ue<se.length;ue++){var ce=se[ue];at.lineTo(ce.x+Ht,ce.y+jt,oe)}at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t);var he=nt.attribute,de=he.x,fe=void 0===de?0:de,pe=he.x,ve=void 0===pe?0:pe;!1!==lt&&(ne?ne(at,nt.attribute,$t):Bt&&(at.setCommonStyle(nt,nt.attribute,fe-Ht,ve-jt,$t),at.fill())),!1!==Rt&&(re?re(at,nt.attribute,$t):Lt&&(at.setStrokeStyle(nt,nt.attribute,fe-Ht,ve-jt,$t),at.stroke()))}},{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=this,Kt=yh(nt,null==Lt?void 0:Lt.theme).line,te=nt.attribute,ne=te.fill,re=void 0===ne?Kt.fill:ne,ae=te.stroke,oe=void 0===ae?Kt.stroke:ae,se=te.fillOpacity,le=void 0===se?Kt.fillOpacity:se,ue=te.strokeOpacity,ce=void 0===ue?Kt.strokeOpacity:ue,he=te.segments,de=te.points,fe=te.closePath,pe=te.curveTension,ve=void 0===pe?Kt.curveTension:pe,Ae=te.connectedType,Ce=void 0===Ae?Kt.connectedType:Ae;if(this.valid(nt,Kt,Ht,jt)){var je=nt.attribute.curveType,Ne=void 0===je?Kt.curveType:je;fe&&"linear"===Ne&&(Ne="linearClosed");var Ve=nt.attribute,Ge=Ve.clipRange,ti=void 0===Ge?Kt.clipRange:Ge,li=Ve.clipRangeByDimension,hi=void 0===li?Kt.clipRangeByDimension:li;if(1===ti&&!he&&!de.some((function(nt){return!1===nt.defined}))&&"linear"===Ne)return this.drawLinearLineHighPerformance(nt,at,!!re,!!oe,le,ce,lt,Rt,Kt,Bt,Lt,Ht,jt);if(nt.shouldUpdateShape()){var di=nt.attribute,fi=di.points,pi=di.segments,vi=fi;if(pi&&pi.length){var mi,_i;if(nt.cache=pi.map((function(nt,at){if(nt.points.length<=1&&0===at)return nt.points[0]&&(_i={"endX":nt.points[0].x,"endY":nt.points[0].y,"curves":[{"defined":!1!==nt.points[0].defined}]}),null;1===at?mi={"x":_i.endX,"y":_i.endY,"defined":_i.curves[_i.curves.length-1].defined}:at>1&&(mi.x=_i.endX,mi.y=_i.endY,mi.defined=_i.curves[_i.curves.length-1].defined);var lt=Tu(q(nt.points,Ce),Ne,{"startPoint":mi,"curveTension":ve});return _i=lt,lt})).filter((function(nt){return!!nt})),"linearClosed"===Ne){for(var bi,Mi=0;Mi<nt.cache.length;Mi++){for(var Ti=nt.cache[Mi],Ii=0;Ii<Ti.curves.length;Ii++)if(Ti.curves[Ii].defined){bi=Ti.curves[Ii].p0;break}if(bi)break}nt.cache[nt.cache.length-1]&&nt.cache[nt.cache.length-1].lineTo(bi.x,bi.y,!0)}}else{if(!fi||!fi.length)return nt.cache=null,void nt.clearUpdateShapeTag();nt.cache=Tu(q(vi,Ce),Ne,{"curveTension":ve})}nt.clearUpdateShapeTag()}if(Array.isArray(nt.cache)){var Bi=nt.attribute.segments.filter((function(nt){return nt.points.length}));if(1===Bi[0].points.length&&Bi.shift(),1===ti){var zi=!1;nt.cache.forEach((function(Bt,Lt){zi||(zi=$t.drawSegmentItem(at,Bt,!!re,!!oe,le,ce,Bi[Lt],[Kt,nt.attribute],ti,hi,lt,Rt,nt,Ht,jt))}))}else{var Wi=nt.cache.reduce((function(nt,at){return nt+at.getLength()}),0),Ui=ti*Wi,$i=0,qi=!1;nt.cache.forEach((function(Bt,Lt){if(!qi){var te=Bt.getLength(),ne=(Ui-$i)/te;$i+=te,ne>0&&(qi=$t.drawSegmentItem(at,Bt,!!re,!!oe,le,ce,Bi[Lt],[Kt,nt.attribute],we(ne,1),hi,lt,Rt,nt,Ht,jt))}}))}}else this.drawSegmentItem(at,nt.cache,!!re,!!oe,le,ce,nt.attribute,Kt,ti,hi,lt,Rt,nt,Ht,jt)}function q(nt,at){return"none"===at?nt:nt.filter((function(nt){return!1!==nt.defined}))}}}])}(zm);function Bm(nt,at,lt,Rt){var Bt=Rt||{},Lt=Bt.offsetX,Ht=void 0===Lt?0:Lt,jt=Bt.offsetY,$t=void 0===jt?0:jt,Kt=Bt.offsetZ,te=void 0===Kt?0:Kt,ne=!0;at.forEach((function(at){at.defined?(ne&&nt.moveTo(at.p0.x+Ht,at.p0.y+$t,te),Tm(nt,at,1,Rt),ne=!1):ne=!0})),ne=!0;for(var re=lt.length-1;re>=0;re--){var ae=lt[re];ae.defined?(ne&&nt.lineTo(ae.p0.x+Ht,ae.p0.y+$t,te),Tm(nt,ae,1,Rt),ne=!1):ne=!0}nt.closePath()}Wm=Pm([Hs()],Wm);var $m=new Im,Km=Ny,Dm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Om=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Fm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Qm=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).areaRenderContribitions=nt,at.numberType=sv,at.builtinContributions=[$m,Km],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawLinearAreaHighPerformance","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae,oe,se,le=nt.attribute.points;if(!(le.length<2)){at.beginPath();var ue=null!==(ae=this.z)&&void 0!==ae?ae:0,ce=le[0];at.moveTo(ce.x+Ht,ce.y+jt,ue);for(var he=1;he<le.length;he++){var de=le[he];at.lineTo(de.x+Ht,de.y+jt,ue)}for(var fe=le.length-1;fe>=0;fe--){var pe=le[fe];at.lineTo((null!==(oe=pe.x1)&&void 0!==oe?oe:pe.x)+Ht,(null!==(se=pe.y1)&&void 0!==se?se:pe.y)+jt,ue)}at.closePath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this.beforeRenderStep(nt,at,Ht,jt,!!Bt,!1,lt,!1,$t,Kt,ne,null,{"attribute":nt.attribute});var ve=nt.attribute,Ae=ve.x,we=void 0===Ae?0:Ae,Ce=ve.x,je=void 0===Ce?0:Ce;!1!==lt&&(ne?ne(at,nt.attribute,$t):Bt&&(at.setCommonStyle(nt,nt.attribute,we-Ht,je-jt,$t),at.fill())),this.afterRenderStep(nt,at,Ht,jt,!!Bt,!1,lt,!1,$t,Kt,ne,null,{"attribute":nt.attribute}),function(){var lt,Bt;if(Rt){var Lt=nt.attribute.stroke,Kt=void 0===Lt?$t&&$t.stroke:Lt;if(X(Kt)&&(Kt[0]||Kt[2])&&!1===Kt[1])if(at.beginPath(),Kt[0]){at.moveTo(ce.x+Ht,ce.y+jt,ue);for(var te=1;te<le.length;te++){var ne=le[te];at.lineTo(ne.x+Ht,ne.y+jt,ue)}}else if(Kt[2]){var ae=le[le.length-1];at.moveTo(ae.x+Ht,ae.y+jt,ue);for(var oe=le.length-2;oe>=0;oe--){var se=le[oe];at.lineTo((null!==(lt=se.x1)&&void 0!==lt?lt:se.x)+Ht,(null!==(Bt=se.y1)&&void 0!==Bt?Bt:se.y)+jt,ue)}}re?re(at,nt.attribute,$t):(at.setStrokeStyle(nt,nt.attribute,we-Ht,je-jt,$t),at.stroke())}}()}}},{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt,te,ne,re,ae,oe=this,se=yh(nt,null==Lt?void 0:Lt.theme).area,le=nt.attribute,ue=le.fill,ce=void 0===ue?se.fill:ue;void 0===le.stroke&&se.stroke;var he=le.fillOpacity,de=void 0===he?se.fillOpacity:he,fe=le.z,pe=void 0===fe?se.z:fe,ve=le.strokeOpacity,Ae=void 0===ve?se.strokeOpacity:ve,Ce=le.curveTension,je=void 0===Ce?se.curveTension:Ce,Ne=le.connectedType,Ve=void 0===Ne?se.connectedType:Ne,Ge=this.valid(nt,se,Ht,jt);if(Ge){var ti=Ge.doFill,li=Ge.doStroke&&Ge.sVisible,hi=nt.attribute,di=hi.clipRange,fi=void 0===di?se.clipRange:di,pi=hi.closePath,vi=hi.points,mi=hi.segments,_i=nt.attribute.curveType,bi=void 0===_i?se.curveType:_i;if(pi&&"linear"===bi&&(bi="linearClosed"),1===fi&&!mi&&!vi.some((function(nt){return!1===nt.defined}))&&"linear"===bi)return this.drawLinearAreaHighPerformance(nt,at,!!ce,li,de,Ae,lt,Rt,se,Bt,Lt,Ht,jt);if(nt.shouldUpdateShape()){if(mi&&mi.length){for(var Mi,Ti,Ii,Bi=mi.map((function(nt,at){if(nt.points.length<=1&&0===at)return nt.points[0]&&(Ti={"endX":nt.points[0].x,"endY":nt.points[0].y}),null;1===at?Mi={"x":Ti.endX,"y":Ti.endY}:at>1&&(Mi.x=Ti.endX,Mi.y=Ti.endY);var lt=Tu(ut(nt.points,Ve),bi,{"startPoint":Mi,"curveTension":je});return Ti=lt,lt})).filter((function(nt){return!!nt})),zi=[],Wi=mi.length-1;Wi>=0;Wi--){for(var Ui=mi[Wi].points,$i=[],qi=Ui.length-1;qi>=0;qi--)$i.push({"x":null!==($t=Ui[qi].x1)&&void 0!==$t?$t:Ui[qi].x,"y":null!==(Kt=Ui[qi].y1)&&void 0!==Kt?Kt:Ui[qi].y});if(0!==Wi){var Ki=mi[Wi-1].points,Qi=Ki[Ki.length-1];Qi&&$i.push({"x":null!==(te=Qi.x1)&&void 0!==te?te:Qi.x,"y":null!==(ne=Qi.y1)&&void 0!==ne?ne:Qi.y})}$i.length>1&&(Ii=Tu(ut($i,Ve),"stepBefore"===bi?"stepAfter":"stepAfter"===bi?"stepBefore":bi,{"curveTension":je}),zi.unshift(Ii))}nt.cacheArea=zi.map((function(nt,at){return{"top":Bi[at],"bottom":nt}}))}else{if(!vi||!vi.length)return nt.cacheArea=null,void nt.clearUpdateShapeTag();for(var Ji=ut(vi,Ve),dn=[],fn=Ji.length-1;fn>=0;fn--)dn.push({"x":null!==(re=Ji[fn].x1)&&void 0!==re?re:Ji[fn].x,"y":null!==(ae=Ji[fn].y1)&&void 0!==ae?ae:Ji[fn].y});var vn=Tu(Ji,bi,{"curveTension":je}),gn=Tu(dn,"stepBefore"===bi?"stepAfter":"stepAfter"===bi?"stepBefore":bi,{"curveTension":je});nt.cacheArea={"top":vn,"bottom":gn}}nt.clearUpdateShapeTag()}if(Array.isArray(nt.cacheArea)){var yn=nt.attribute.segments.filter((function(nt){return nt.points.length}));if(1===yn[0].points.length&&yn.shift(),1===fi){var mn=!1;nt.cacheArea.forEach((function(Lt,$t){mn||(mn=oe.drawSegmentItem(at,Lt,ti,de,li,Ae,yn[$t],[se,nt.attribute],fi,lt,Rt,pe,nt,Bt,Ht,jt))}))}else{var _n=nt.cacheArea.reduce((function(nt,at){return nt+at.top.getLength()}),0),bn=fi*_n,xn=0,kn=!1;nt.cacheArea.forEach((function(Lt,$t){if(!kn){var Kt=Lt.top.getLength(),te=(bn-xn)/Kt;xn+=Kt,te>0&&(kn=oe.drawSegmentItem(at,Lt,ti,de,li,Ae,yn[$t],[se,nt.attribute],we(te,1),lt,Rt,pe,nt,Bt,Ht,jt))}}))}}else this.drawSegmentItem(at,nt.cacheArea,ti,de,li,Ae,nt.attribute,se,fi,lt,Rt,pe,nt,Bt,Ht,jt)}function ut(nt,at){return"connect"!==at?nt:nt.filter((function(nt){return!1!==nt.defined}))}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).area;this._draw(nt,Bt,!1,lt,Rt)}},{"key":"drawSegmentItem","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se){return this._drawSegmentItem(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se)}},{"key":"_drawSegmentItem","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se){if(at&&at.top&&at.bottom&&at.top.curves&&at.top.curves.length&&at.bottom.curves&&at.bottom.curves.length){nt.beginPath();var le,ue,ce=re.attribute,he=ce.points,de=ce.segments,pe=Il.ROW;if(de){var ve=de[de.length-1];ue=de[0].points[0],le=ve.points[ve.points.length-1]}else ue=he[0],le=he[he.length-1];var Ae=fe(le.x-ue.x),we=fe(le.y-ue.y);pe=null==le.x1?Il.ROW:null==le.y1?Il.COLUMN:Number.isFinite(Ae+we)?Ae>we?Il.ROW:Il.COLUMN:Il.ROW,function(nt,at,lt,Rt){var Bt,Lt=at.top,Ht=at.bottom;if(Lt.curves.length===Ht.curves.length)if(lt>=1){for(var jt=[],$t=[],Kt=!0,te=0,ne=Lt.curves.length;te<ne;te++){var re=Lt.curves[te];Kt!==re.defined?(Kt?(Bm(nt,jt,$t,Rt),jt.length=0,$t.length=0):(jt.push(re),$t.push(Ht.curves[ne-te-1])),Kt=!Kt):Kt&&(jt.push(re),$t.push(Ht.curves[ne-te-1]))}Bm(nt,jt,$t,Rt)}else if(!(lt<=0)){var ae=(Rt||{}).direction,oe=Lt.curves,se=null!==(Bt=oe[oe.length-1].p3)&&void 0!==Bt?Bt:oe[oe.length-1].p1,le=fe(se.x-oe[0].p0.x),ue=fe(se.y-oe[0].p0.y);ae=null!=ae?ae:le>ue?Il.ROW:Il.COLUMN,Number.isFinite(le)||(ae=Il.COLUMN),Number.isFinite(ue)||(ae=Il.ROW);for(var ce=lt*(ae===Il.ROW?le:ue),he=0,de=!0,pe=[],ve=[],Ae=0,we=Lt.curves.length;Ae<we;Ae++){var Ce=Lt.curves[Ae],je=Ce.getLength(ae),Ne=(ce-he)/je;if(Ne<0)break;he+=je;var Ve=null,Ge=null;de!==Ce.defined?(de?(Bm(nt,pe,ve,Rt),pe.length=0,ve.length=0):(Ve=Ce,Ge=Ht.curves[we-Ae-1]),de=!de):de&&(Ve=Ce,Ge=Ht.curves[we-Ae-1]),Ve&&Ge&&(Ne<1&&(Ve=Ve.p2&&Ve.p3?Kl(Ve,Ne)[0]:Jl(Ve,Ne)[0],Ge=Ge.p2&&Ge.p3?Kl(Ge,1-Ne)[1]:Jl(Ge,1-Ne)[1]),Ve.defined=de,Ge.defined=de,pe.push(Ve),ve.push(Ge)),Ve=null,Ge=null}Bm(nt,pe,ve,Rt)}}(nt.camera?nt:nt.nativeContext,at,$t,{"offsetX":Kt,"offsetY":te,"offsetZ":ne,"direction":pe}),this.beforeRenderStep(re,nt,Kt,te,!!Rt,!1,lt,!1,jt,ae,oe,null,{"attribute":Ht}),nt.setShadowBlendStyle&&nt.setShadowBlendStyle(re,Ht,jt);var Ce=Ht.x,je=void 0===Ce?0:Ce,Ne=Ht.x,Ve=void 0===Ne?0:Ne;return!1!==lt&&(oe?oe(nt,Ht,jt):Rt&&(nt.setCommonStyle(re,Ht,je-Kt,Ve-te,jt),nt.fill())),this.afterRenderStep(re,nt,Kt,te,!!Rt,!1,lt,!1,jt,ae,oe,null,{"attribute":Ht}),function(){if(!1!==Bt)if(se)se(nt,Ht,jt);else{var lt=Ht.stroke,Rt=void 0===lt?jt&&jt[1]&&jt[1].stroke:lt;X(Rt)&&(Rt[0]||Rt[2])&&!1===Rt[1]&&(nt.beginPath(),Em(nt.camera?nt:nt.nativeContext,Rt[0]?at.top:at.bottom,$t,pe===Il.ROW?"x":"y",{"offsetX":Kt,"offsetY":te,"offsetZ":ne})),nt.setStrokeStyle(re,Ht,je-Kt,Ve-te,jt),nt.stroke()}}(),!1}}}])}(zm);Qm=Dm([Hs(),Fm(0,Gs(ll)),Fm(0,js(lg)),Om("design:paramtypes",[Object])],Qm);var t_=Xy,e_=Ny,Nm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Vm=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Gm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},i_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).pathRenderContribitions=nt,at.numberType=fv,at.builtinContributions=[e_,t_],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt,te,ne=null!==($t=this.tempTheme)&&void 0!==$t?$t:yh(nt,null==Lt?void 0:Lt.theme).path,re=nt.attribute,ae=re.x,oe=void 0===ae?ne.x:ae,se=re.y,le=void 0===se?ne.y:se,ue=re.fillStrokeOrder,ce=void 0===ue?ne.fillStrokeOrder:ue,he=null!==(Kt=this.z)&&void 0!==Kt?Kt:0,de=this.valid(nt,ne,Ht,jt);if(de){var fe=de.fVisible,pe=de.sVisible,ve=de.doFill,Ae=de.doStroke;at.beginPath(),nt.pathShape?jl(nt.pathShape.commandList,at,lt,Rt,1,1,he):jl((null!==(te=nt.attribute.path)&&void 0!==te?te:ne.path).commandList,at,lt,Rt,1,1,he),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,ne),this.beforeRenderStep(nt,at,lt,Rt,ve,Ae,fe,pe,ne,Bt,Ht,jt);var w=function(){Ae&&(jt?jt(at,nt.attribute,ne):pe&&(at.setStrokeStyle(nt,nt.attribute,oe-lt,le-Rt,ne),at.stroke()))},M=function(){ve&&(Ht?Ht(at,nt.attribute,ne):fe&&(at.setCommonStyle(nt,nt.attribute,oe-lt,le-Rt,ne),at.fill()))};ce?(w(),M()):(M(),w()),this.afterRenderStep(nt,at,lt,Rt,ve,Ae,fe,pe,ne,Bt,Ht,jt)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).path;this.tempTheme=Bt,this._draw(nt,Bt,!1,lt,Rt),this.tempTheme=null}}])}(zm);i_=Nm([Hs(),Gm(0,Gs(ll)),Gm(0,js(_g)),Vm("design:paramtypes",[Object])],i_);var Um=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Ym=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Xm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},o_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).rectRenderContribitions=nt,at.type="rect",at.numberType=gv,at.builtinContributions=[cm,dm,hm],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt=null!==($t=this.tempTheme)&&void 0!==$t?$t:yh(nt,null==Lt?void 0:Lt.theme).rect,te=nt.attribute,ne=te.fill,re=void 0===ne?Kt.fill:ne,ae=te.background,oe=te.stroke,se=void 0===oe?Kt.stroke:oe,le=te.cornerRadius,ue=void 0===le?Kt.cornerRadius:le,ce=te.cornerType,he=void 0===ce?Kt.cornerType:ce,de=te.opacity,fe=void 0===de?Kt.opacity:de,pe=te.fillOpacity,ve=void 0===pe?Kt.fillOpacity:pe,Ae=te.lineWidth,we=void 0===Ae?Kt.lineWidth:Ae,Ce=te.strokeOpacity,je=void 0===Ce?Kt.strokeOpacity:Ce,Ne=te.visible,Ve=void 0===Ne?Kt.visible:Ne,Ge=te.x1,ti=te.y1,li=te.x,hi=void 0===li?Kt.x:li,di=te.y,fi=void 0===di?Kt.y:di,pi=te.fillStrokeOrder,vi=void 0===pi?Kt.fillStrokeOrder:pi,mi=nt.attribute,_i=mi.width,bi=mi.height,Mi=Yv(fe,ve,_i=(null!=_i?_i:Ge-hi)||0,bi=(null!=bi?bi:ti-fi)||0,re),Ti=Kv(fe,je,_i,bi),Ii=Gv(re,ae),Bi=Wv(se,we);if(nt.valid&&Ve&&(Ii||Bi)&&(Mi||Ti||Ht||jt||ae)){0===ue||X(ue)&&ue.every((function(nt){return 0===nt}))?(at.beginPath(),at.rect(lt,Rt,_i,bi)):(at.beginPath(),$y(at,lt,Rt,_i,bi,ue,"bevel"!==he));var zi={"doFill":Ii,"doStroke":Bi};at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,Kt),this.beforeRenderStep(nt,at,lt,Rt,Ii,Bi,Mi,Ti,Kt,Bt,Ht,jt,zi);var Y=function(){zi.doFill&&(Ht?Ht(at,nt.attribute,Kt):Mi&&(at.setCommonStyle(nt,nt.attribute,hi-lt,fi-Rt,Kt),at.fill()))},K=function(){zi.doStroke&&(jt?jt(at,nt.attribute,Kt):Ti&&(at.setStrokeStyle(nt,nt.attribute,hi-lt,fi-Rt,Kt),at.stroke()))};vi?(K(),Y()):(Y(),K()),this.afterRenderStep(nt,at,lt,Rt,Ii,Bi,Mi,Ti,Kt,Bt,Ht,jt)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).rect;this.tempTheme=Bt,this._draw(nt,Bt,!1,lt,Rt),this.tempTheme=null}}])}(zm);o_=Um([Hs(),Xm(0,Gs(ll)),Xm(0,js(xg)),Ym("design:paramtypes",[Object])],o_);var qm=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Zm=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Jm=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},c_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).symbolRenderContribitions=nt,at.numberType=_v,at.builtinContributions=[mm,Rm,Mm,km],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt=yh(nt,null==Lt?void 0:Lt.theme).symbol,te=nt.attribute,ne=te.size,re=void 0===ne?Kt.size:ne,ae=te.x,oe=void 0===ae?Kt.x:ae,se=te.y,le=void 0===se?Kt.y:se,ue=te.scaleX,ce=void 0===ue?Kt.scaleX:ue,he=te.scaleY,de=void 0===he?Kt.scaleY:he,fe=te.fillStrokeOrder,pe=void 0===fe?Kt.fillStrokeOrder:fe,ve=te.clipRange,Ae=void 0===ve?Kt.clipRange:ve,we=this.valid(nt,Kt,Ht,jt);if(we){var Ce=we.fVisible,je=we.sVisible,Ne=we.doFill,Ve=we.doStroke,Ge=nt.getParsedPath();if(Ge){var ti=nt.attribute.keepDirIn3d,li=void 0===ti?Kt.keepDirIn3d:ti,hi=null!==($t=this.z)&&void 0!==$t?$t:0;at.beginPath();var di=lt,fi=Rt,pi=hi,vi=at.camera;if(li&&vi&&at.project){var mi=at.project(lt,Rt,hi);at.camera=null,X(re)&&(re[0],re[1]),di=mi.x,fi=mi.y,pi=void 0}!1===Ge.draw(at,re,di,fi,pi,(function(Bt,Lt){var $t,te,ne,re;if(nt._parsedPath.svgCache){var ae=Object.assign({},Lt);ae.fill=null!==($t=Lt.fill)&&void 0!==$t?$t:nt.attribute.fill,ae.opacity=null!==(te=Lt.opacity)&&void 0!==te?te:nt.attribute.opacity,ae.fillOpacity=nt.attribute.fillOpacity,ae.stroke=null!==(ne=Lt.stroke)&&void 0!==ne?ne:nt.attribute.stroke,ae.lineWidth=null!==(re=Lt.lineWidth)&&void 0!==re?re:nt.attribute.lineWidth,Lt=ae}var v=function(){Lt.fill&&(Ht?Ht(at,nt.attribute,Kt):(at.setCommonStyle(nt,Lt,oe-lt,le-Rt,Kt),at.fill()))},y=function(){Lt.stroke&&(jt?jt(at,nt.attribute,Kt):je&&Ae>=1&&(at.setStrokeStyle(nt,Lt,(oe-lt)/ce,(le-Rt)/de,Kt),at.stroke()))};pe?(y(),v()):(v(),y())}))&&at.closePath(),at.camera=vi,at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,Kt),this.beforeRenderStep(nt,at,lt,Rt,Ne,Ve,Ce,je,Kt,Bt,Ht,jt);var H=function(){Ne&&!Ge.isSvg&&(Ht?Ht(at,nt.attribute,Kt):Ce&&(at.setCommonStyle(nt,nt.attribute,oe-lt,le-Rt,Kt),at.fill()))},j=function(){Ve&&!Ge.isSvg&&(jt?jt(at,nt.attribute,Kt):je&&Ae>=1&&(at.setStrokeStyle(nt,nt.attribute,(oe-lt)/ce,(le-Rt)/de,Kt),at.stroke()))};pe?(j(),H()):(H(),j()),this.afterRenderStep(nt,at,lt,Rt,Ne,Ve,Ce,je,Kt,Bt,Ht,jt)}}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).symbol;this._draw(nt,Bt,!1,lt,Rt)}}])}(zm);c_=qm([Hs(),Jm(0,Gs(ll)),Jm(0,js(kg)),Zm("design:paramtypes",[Object])],c_);var h_=o((function t(){r(this,t),this.pools=[];for(var nt=0;nt<10;nt++)this.pools.push(new _i)}),[{"key":"allocate","value":function(nt,at,lt,Rt){if(!this.pools.length)return(new _i).setValue(nt,at,lt,Rt);var Bt=this.pools.pop();return Bt.x1=nt,Bt.y1=at,Bt.x2=lt,Bt.y2=Rt,Bt}},{"key":"allocateByObj","value":function(nt){if(!this.pools.length)return new _i(nt);var at=this.pools.pop();return at.x1=nt.x1,at.y1=nt.y1,at.x2=nt.x2,at.y2=nt.y2,at}},{"key":"free","value":function(nt){this.pools.push(nt)}},{"key":"length","get":function(){return this.pools.length}},{"key":"release","value":function(){this.pools=[]}}]),v_=new h_,__=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).time=Dl.beforeFillStroke,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne){var re,ae,oe,se,le,ue,ce,he,de,fe,pe,ve=nt.attribute,Ae=ve.backgroundMode,we=void 0===Ae?$t.backgroundMode:Ae,Ce=ve.backgroundFit,je=void 0===Ce?$t.backgroundFit:Ce,Ne=ve.backgroundKeepAspectRatio,Ve=void 0===Ne?$t.backgroundKeepAspectRatio:Ne,Ge=nt.attribute.background;if(Ge){var ti,B=function(){"richtext"===nt.type&&(at.restore(),at.save(),pe&&at.setTransformFromMatrix(pe,!0,1))};"richtext"===nt.type&&(pe=at.currentMatrix.clone(),at.restore(),at.save(),at.setTransformForCurrent());var li=V(Ge)&&Ge.background,hi=nt.transMatrix.onlyTranslate();if(li){var di=nt.AABBBounds,fi=(null!==(re=Ge.x)&&void 0!==re?re:di.x1)+(null!==(ae=Ge.dx)&&void 0!==ae?ae:0),pi=(null!==(oe=Ge.y)&&void 0!==oe?oe:di.y1)+(null!==(se=Ge.dy)&&void 0!==se?se:0),vi=null!==(le=Ge.width)&&void 0!==le?le:di.width(),mi=null!==(ue=Ge.height)&&void 0!==ue?ue:di.height();if(ti=v_.allocate(fi,pi,fi+vi,pi+mi),Ge=Ge.background,!hi){var _i=ti.width(),bi=ti.height();ti.set((null!==(ce=Ge.x)&&void 0!==ce?ce:0)+(null!==(he=Ge.dx)&&void 0!==he?he:0),(null!==(de=Ge.y)&&void 0!==de?de:0)+(null!==(fe=Ge.dy)&&void 0!==fe?fe:0),_i,bi)}}else ti=nt.AABBBounds,hi||(ti=Py(Object.assign(Object.assign({},nt.attribute),{"angle":0,"scaleX":1,"scaleY":1,"x":0,"y":0,"dx":0,"dy":0})).clone());if(nt.backgroundImg&&nt.resources){var Mi=nt.resources.get(Ge);if("success"!==Mi.state||!Mi.data)return void B();at.highPerformanceSave(),hi&&at.setTransformFromMatrix(nt.parent.globalTransMatrix,!0),at.setCommonStyle(nt,nt.attribute,lt,Rt,$t),this.doDrawImage(at,Mi.data,ti,{"backgroundMode":we,"backgroundFit":je,"backgroundKeepAspectRatio":Ve}),at.highPerformanceRestore(),at.setTransformForCurrent()}else{var Ti=nt.attribute.backgroundCornerRadius;at.highPerformanceSave(),at.setCommonStyle(nt,nt.attribute,lt,Rt,$t),at.fillStyle=Ge,Ti?($y(at,ti.x1,ti.y1,ti.width(),ti.height(),Ti,!0),at.fill()):at.fillRect(ti.x1,ti.y1,ti.width(),ti.height()),at.highPerformanceRestore()}li&&v_.free(ti),B()}}}])}(jy),S_=new __,n_=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},r_=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},a_=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},A_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).textRenderContribitions=nt,at.numberType=bv,at.builtinContributions=[S_],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt,te,ne=this,re=yh(nt,null==Lt?void 0:Lt.theme).text,ae=nt.attribute;ae.text;var oe=ae.underline,se=void 0===oe?re.underline:oe,le=ae.lineThrough,ue=void 0===le?re.lineThrough:le,ce=ae.keepDirIn3d,he=void 0===ce?re.keepDirIn3d:ce,de=ae.direction,fe=void 0===de?re.direction:de,pe=ae.fontSize,ve=void 0===pe?re.fontSize:pe,we=ae.verticalMode,Ce=void 0===we?re.verticalMode:we,je=ae.x,Ne=void 0===je?re.x:je,Ve=ae.y,Ge=void 0===Ve?re.y:Ve,ti=null!==($t=hd(nt.attribute.lineHeight,ve))&&void 0!==$t?$t:ve,li=this.valid(nt,re,Ht,jt);if(li){var hi=li.fVisible,di=li.sVisible,fi=li.doFill,pi=li.doStroke,vi=!he,mi=this.z||0;at.beginPath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,re),this.beforeRenderStep(nt,at,lt,Rt,fi,pi,hi,di,re,Bt,Ht,jt),vi&&this.transformUseContext2d(nt,re,mi,at);var z=function(Bt,Lt,$t,Kt){var te=lt+Lt,ne=Rt+$t;if(Kt){at.highPerformanceSave(),te+=ve;var ae=Bg.allocate(1,0,0,1,0,0);ae.rotateByCenter(Math.PI/2,te,ne),at.transformFromMatrix(ae,!0),Bg.free(ae)}pi&&(jt?jt(at,nt.attribute,re):di&&(at.setStrokeStyle(nt,nt.attribute,Ne-lt,Ge-Rt,re),at.strokeText(Bt,te,ne,mi))),fi&&(Ht?Ht(at,nt.attribute,re):hi&&(at.setCommonStyle(nt,nt.attribute,Ne-lt,Ge-Rt,re),at.fillText(Bt,te,ne,mi))),Kt&&(at.highPerformanceRestore(),at.setTransformForCurrent())};if(at.setTextStyleWithoutAlignBaseline(nt.attribute,re,mi),"horizontal"===fe){var _i=nt.multilineLayout;if(!_i)return void at.highPerformanceRestore();var bi=_i.bbox,Mi=bi.xOffset,Ti=bi.yOffset;pi&&(jt?jt(at,nt.attribute,re):di&&(at.setStrokeStyle(nt,nt.attribute,Ne-lt,Ge-Rt,re),_i.lines.forEach((function(nt){at.strokeText(nt.str,(nt.leftOffset||0)+Mi+lt,(nt.topOffset||0)+Ti+Rt,mi)})))),fi&&(Ht?Ht(at,nt.attribute,re):hi&&(at.setCommonStyle(nt,nt.attribute,Ne-lt,Ge-Rt,re),_i.lines.forEach((function(Bt){at.fillText(Bt.str,(Bt.leftOffset||0)+Mi+lt,(Bt.topOffset||0)+Ti+Rt,mi),ne.drawUnderLine(se,ue,nt,(Bt.leftOffset||0)+Mi+lt,(Bt.topOffset||0)+Ti+Rt,Bt.descent,(Bt.descent-Bt.ascent)/2,mi,re,at,{"width":Bt.width})}))))}else{var Ii=nt.attribute,Bi=Ii.textAlign,zi=void 0===Bi?re.textAlign:Bi,Wi=Ii.textBaseline,Ui=void 0===Wi?re.textBaseline:Wi;if(!Ce){var $i=zi;zi=null!==(Kt=nt.getBaselineMapAlign()[Ui])&&void 0!==Kt?Kt:"left",Ui=null!==(te=nt.getAlignMapBaseline()[$i])&&void 0!==te?te:"top"}nt.tryUpdateAABBBounds();var qi=nt.cache.verticalList;at.textAlign="left",at.textBaseline="top";var Ki=ti*qi.length,Qi=0;qi.forEach((function(nt){var at=nt.reduce((function(nt,at){return nt+(at.width||0)}),0);Qi=Ae(at,Qi)}));var Ji=0,dn=0;"bottom"===Ui?dn=-Ki:"middle"===Ui&&(dn=-Ki/2),"center"===zi?Ji-=Qi/2:"right"===zi&&(Ji-=Qi),qi.forEach((function(nt,at){var lt=nt.reduce((function(nt,at){return nt+(at.width||0)}),0),Rt=Qi-lt,Bt=Ji;"center"===zi?Bt+=Rt/2:"right"===zi&&(Bt+=Rt),nt.forEach((function(nt){var lt=nt.text,Rt=nt.width,Lt=nt.direction;z(lt,Ki-(at+1)*ti+dn,Bt,Lt),Bt+=Rt}))}))}vi&&this.restoreTransformUseContext2d(nt,re,mi,at),this.afterRenderStep(nt,at,lt,Rt,fi,pi,hi,di,re,Bt,Ht,jt)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).text,Lt=nt.attribute.keepDirIn3d,Ht=!(void 0===Lt?Bt.keepDirIn3d:Lt);this._draw(nt,Bt,Ht,lt,Rt)}},{"key":"drawUnderLine","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te){if(!(at+nt<=0)){var ne=lt.attribute,re=ne.textAlign,ae=void 0===re?$t.textAlign:re,oe=ne.fill,se=void 0===oe?$t.fill:oe,le=ne.opacity,ue=void 0===le?$t.opacity:le,ce=ne.underlineOffset,he=void 0===ce?$t.underlineOffset:ce,de=ne.underlineDash,fe=void 0===de?$t.underlineDash:de,pe=ne.fillOpacity,ve=void 0===pe?$t.fillOpacity:pe,Ae=!j(te),we=Ae?te.width:lt.clipedWidth,Ce=Ae?0:dg(ae,we),je={"lineWidth":0,"stroke":se,"opacity":ue,"strokeOpacity":ve};if(nt){je.lineWidth=nt,Kt.setStrokeStyle(lt,je,Rt,Bt,$t),fe&&Kt.setLineDash(fe),Kt.beginPath();var Ne=Bt+Lt+he;Kt.moveTo(Rt+Ce,Ne,jt),Kt.lineTo(Rt+Ce+we,Ne,jt),Kt.stroke()}if(at){je.lineWidth=at,Kt.setStrokeStyle(lt,je,Rt,Bt,$t),Kt.beginPath();var Ve=Bt+Ht;Kt.moveTo(Rt+Ce,Ve,jt),Kt.lineTo(Rt+Ce+we,Ve,jt),Kt.stroke()}}}}])}(zm);function s_(nt,at,lt,Rt){nt.moveTo(at[0].x+lt,at[0].y+Rt);for(var Bt=1;Bt<at.length;Bt++)nt.lineTo(at[Bt].x+lt,at[Bt].y+Rt)}function l_(nt,at){return Math.sqrt(nt*nt+at*at)}function u_(nt,at,lt,Rt,Bt){var Lt=at/lt;return{"x":nt.x-Rt*Lt,"y":nt.y-Bt*Lt}}A_=n_([Hs(),a_(0,Gs(ll)),a_(0,js(Tg)),r_("design:paramtypes",[Object])],A_);var w_=Xy,C_=Ny,d_=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},p_=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},f_=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},M_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).polygonRenderContribitions=nt,at.numberType=pv,at.builtinContributions=[C_,w_],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=yh(nt,null==Lt?void 0:Lt.theme).polygon,Kt=nt.attribute,te=Kt.points,ne=void 0===te?$t.points:te,re=Kt.cornerRadius,ae=void 0===re?$t.cornerRadius:re,oe=Kt.x,se=void 0===oe?$t.x:oe,le=Kt.y,ue=void 0===le?$t.y:le,ce=Kt.closePath,he=void 0===ce?$t.closePath:ce,de=Kt.fillStrokeOrder,fe=void 0===de?$t.fillStrokeOrder:de,pe=this.valid(nt,$t,Ht,jt);if(pe){var ve=pe.fVisible,Ae=pe.sVisible,we=pe.doFill,Ce=pe.doStroke;at.beginPath(),ae<=0||X(ae)&&ae.every((function(nt){return 0===nt}))?s_(at.camera?at:at.nativeContext,ne,lt,Rt):function(nt,at,lt,Rt,Bt){var Lt,Ht=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(at.length<3)s_(nt,at,lt,Rt);else{var jt=0,$t=at.length-1;Ht||(jt+=1,$t-=1,nt.moveTo(at[0].x+lt,at[0].y+Rt));for(var Kt=jt;Kt<=$t;Kt++){var te=at[0===Kt?$t:(Kt-1)%at.length],ne=at[Kt%at.length],re=at[(Kt+1)%at.length],ae=ne.x-te.x,oe=ne.y-te.y,se=ne.x-re.x,le=ne.y-re.y,ue=(Math.atan2(oe,ae)-Math.atan2(le,se))/2,ce=Math.abs(Math.tan(ue)),he=Array.isArray(Bt)?null!==(Lt=Bt[Kt%at.length])&&void 0!==Lt?Lt:0:Bt,de=he/ce,fe=l_(ae,oe),pe=l_(se,le),ve=Math.min(fe,pe);de>ve&&(de=ve,he=ve*ce);var Ae=u_(ne,de,fe,ae,oe),we=u_(ne,de,pe,se,le),Ce=2*ne.x-Ae.x-we.x,je=2*ne.y-Ae.y-we.y,Ne=l_(Ce,je),Ve=u_(ne,l_(de,he),Ne,Ce,je),Ge=Math.atan2(Ae.y-Ve.y,Ae.x-Ve.x),ti=Math.atan2(we.y-Ve.y,we.x-Ve.x),li=ti-Ge;li<0&&(Ge=ti,li=-li),li>Math.PI&&(li-=Math.PI),0===Kt?nt.moveTo(Ae.x+lt,Ae.y+Rt):nt.lineTo(Ae.x+lt,Ae.y+Rt),li&&nt.arcTo(ne.x+lt,ne.y+Rt,we.x+lt,we.y+Rt,he),nt.lineTo(we.x+lt,we.y+Rt)}Ht||nt.lineTo(at[$t+1].x+lt,at[$t+1].y+Rt)}}(at.camera?at:at.nativeContext,ne,lt,Rt,ae,he),he&&at.closePath(),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this.beforeRenderStep(nt,at,lt,Rt,we,Ce,ve,Ae,$t,Bt,Ht,jt);var T=function(){we&&(Ht?Ht(at,nt.attribute,$t):ve&&(at.setCommonStyle(nt,nt.attribute,se-lt,ue-Rt,$t),at.fill()))},C=function(){Ce&&(jt?jt(at,nt.attribute,$t):Ae&&(at.setStrokeStyle(nt,nt.attribute,se-lt,ue-Rt,$t),at.stroke()))};fe?(C(),T()):(T(),C()),this.afterRenderStep(nt,at,lt,Rt,we,Ce,ve,Ae,$t,Bt,Ht,jt)}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).polygon;this._draw(nt,Bt,!1,lt,Rt)}}])}(zm);M_=d_([Hs(),f_(0,Gs(ll)),f_(0,js(bg)),p_("design:paramtypes",[Object])],M_);var g_=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},y_=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},m_=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},T_=o((function t(nt){r(this,t),this.groupRenderContribitions=nt,this.numberType=cv}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=yh(nt,null==Lt?void 0:Lt.theme).group,Kt=nt.attribute,te=Kt.fill,ne=void 0===te?$t.fill:te,re=Kt.background,ae=Kt.stroke,oe=void 0===ae?$t.stroke:ae,se=Kt.opacity,le=void 0===se?$t.opacity:se,ue=Kt.width,ce=void 0===ue?$t.width:ue,he=Kt.height,de=void 0===he?$t.height:he,fe=Kt.clip,pe=void 0===fe?$t.clip:fe,ve=Kt.fillOpacity,Ae=void 0===ve?$t.fillOpacity:ve,we=Kt.strokeOpacity,Ce=void 0===we?$t.strokeOpacity:we,je=Kt.cornerRadius,Ne=void 0===je?$t.cornerRadius:je,Ve=Kt.path,Ge=void 0===Ve?$t.path:Ve,ti=Kt.lineWidth,li=void 0===ti?$t.lineWidth:ti,hi=Kt.visible,di=void 0===hi?$t.visible:hi,fi=Kt.fillStrokeOrder,pi=void 0===fi?$t.fillStrokeOrder:fi,vi=Kt.cornerType,mi=void 0===vi?$t.cornerType:vi,_i=Kt.x,bi=void 0===_i?$t.x:_i,Mi=Kt.y,Ti=void 0===Mi?$t.y:Mi,Ii=Yv(le,Ae,ce,de,ne),Bi=Kv(le,Ce,ce,de),zi=Gv(ne,re),Wi=Wv(oe,li);if(nt.valid&&di){if(!pe){if(!zi&&!Wi)return;if(!(Ii||Bi||Ht||jt||re))return}if(Ge&&Ge.length&&Bt.drawContribution){var Ui=at.disableFill,$i=at.disableStroke,qi=at.disableBeginPath;at.disableFill=!0,at.disableStroke=!0,at.disableBeginPath=!0,Ge.forEach((function(nt){Bt.drawContribution.getRenderContribution(nt).draw(nt,Bt.renderService,Bt,Lt)})),at.disableFill=Ui,at.disableStroke=$i,at.disableBeginPath=qi}else 0===Ne||X(Ne)&&Ne.every((function(nt){return 0===nt}))?(at.beginPath(),at.rect(lt,Rt,ce,de)):(at.beginPath(),$y(at,lt,Rt,ce,de,Ne,"bevel"!==mi));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(am));var Ki={"doFill":zi,"doStroke":Wi};at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t),this._groupRenderContribitions.forEach((function(Lt){Lt.time===Dl.beforeFillStroke&&Lt.drawShape(nt,at,lt,Rt,zi,Wi,Ii,Bi,$t,Bt,Ht,jt,Ki)})),pe&&at.clip();var Q=function(){Ki.doFill&&(Ht?Ht(at,nt.attribute,$t):Ii&&(at.setCommonStyle(nt,nt.attribute,bi-lt,Ti-Rt,$t),at.fill()))},$=function(){Ki.doStroke&&(jt?jt(at,nt.attribute,$t):Bi&&(at.setStrokeStyle(nt,nt.attribute,bi-lt,Ti-Rt,$t),at.stroke()))};pi?($(),Q()):(Q(),$()),this._groupRenderContribitions.forEach((function(Lt){Lt.time===Dl.afterFillStroke&&Lt.drawShape(nt,at,lt,Rt,zi,Wi,Ii,Bi,$t,Bt,Ht,jt)}))}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=lt.context;if(Bt){var Lt=nt.attribute,Ht=Lt.clip,jt=Lt.baseOpacity,$t=void 0===jt?1:jt,Kt=Lt.drawMode,te=Lt.x,ne=Lt.y,re=Lt.width,ae=Lt.height,oe=Bt.nativeContext,se=Bt.canvas.nativeCanvas;if(Kt>0){var le=Bt.canvas,ue=ax.createCanvas({"width":le.width,"height":le.height,"dpr":1}),ce=ue.getContext("2d"),he=Bt.nativeContext.getTransform();ce.setTransform(he.a,he.b,he.c,he.d,he.e,he.f),1===Kt&&(ce.save(),ce.clearRect(0,0,le.width,le.height),ce.beginPath(),ce.rect(te,ne,re,ae),ce.clip(),ce.drawImage(le.nativeCanvas,0,0,le.width,le.height,0,0,le.displayWidth,le.displayHeight),ce.restore()),Bt.nativeContext=ce,le.nativeCanvas=ue}Ht?Bt.save():Bt.highPerformanceSave();var de=Bt.baseGlobalAlpha;Bt.baseGlobalAlpha*=$t;var fe=yh(nt,null==Rt?void 0:Rt.theme).group,pe=Bt.modelMatrix;if(Bt.camera){var ve=Og.allocate(),Ae=Og.allocate();Mg(Ae,nt,fe),yg(ve,pe||ve,Ae),Bt.modelMatrix=ve,Og.free(Ae),Bt.setTransform(1,0,0,1,0,0,!0)}else Bt.transformFromMatrix(nt.transMatrix,!0);Bt.beginPath(),Rt.skipDraw?this.drawShape(nt,Bt,0,0,lt,Rt,(function(){return!1}),(function(){return!1})):this.drawShape(nt,Bt,0,0,lt);var we,Ce=nt.attribute,je=Ce.scrollX,Ne=void 0===je?fe.scrollX:je,Ve=Ce.scrollY,Ge=void 0===Ve?fe.scrollY:Ve;if((Ne||Ge)&&Bt.translate(Ne,Ge),Rt&&Rt.drawingCb&&(we=Rt.drawingCb()),Bt.modelMatrix!==pe&&Og.free(Bt.modelMatrix),Bt.modelMatrix=pe,Bt.baseGlobalAlpha=de,Kt>0){var ti=Bt.nativeContext,li=Bt.canvas.nativeCanvas;oe.save(),oe.setTransform(Bt.dpr,0,0,Bt.dpr,0,0,!0),1===Kt&&ti.rect(te,ne,re,ae),oe.drawImage(li,0,0,li.width,li.height,0,0,Bt.canvas.displayWidth,Bt.canvas.displayHeight);var hi=ti.getTransform();oe.setTransform(hi.a,hi.b,hi.c,hi.d,hi.e,hi.f),Bt.nativeContext=oe,Bt.canvas.nativeCanvas=se,oe.restore()}we&&we.then?we.then((function(){Ht?Bt.restore():Bt.highPerformanceRestore()})):Ht?Bt.restore():Bt.highPerformanceRestore()}}}]);T_=g_([Hs(),m_(0,Gs(ll)),m_(0,js(cg)),y_("design:paramtypes",[Object])],T_);var b_=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},x_=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},k_=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},E_=["","repeat-x","repeat-y","repeat"],P_=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).imageRenderContribitions=nt,at.numberType=hv,at.builtinContributions=[pm,vm],at.init(nt),at}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=yh(nt).image,Kt=nt.attribute,te=Kt.repeatX,ne=void 0===te?$t.repeatX:te,re=Kt.repeatY,ae=void 0===re?$t.repeatY:re,oe=Kt.x,se=void 0===oe?$t.x:oe,le=Kt.y,ue=void 0===le?$t.y:le,ce=Kt.cornerRadius,he=void 0===ce?$t.cornerRadius:ce,de=Kt.fillStrokeOrder,fe=void 0===de?$t.fillStrokeOrder:de,pe=Kt.cornerType,ve=void 0===pe?$t.cornerType:pe,Ae=Kt.image,we=this.valid(nt,$t,Ht);if(we){var Ce=we.fVisible,je=we.sVisible,Ne=we.doFill,Ve=we.doStroke;if(Ae&&nt.resources){var Ge=nt.resources.get(Ae);if("success"===Ge.state){var ti=nt.width,li=nt.height;at.beginPath();var hi=!1;0===he||X(he)&&he.every((function(nt){return 0===nt}))?at.rect(lt,Rt,ti,li):($y(at,lt,Rt,ti,li,he,"bevel"!==ve),hi=!0),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,$t);var L=function(){if(Ne)if(Ht)Ht(at,nt.attribute,$t);else if(Ce){at.setCommonStyle(nt,nt.attribute,lt,Rt,$t);var Bt=0;if("repeat"===ne&&(Bt|=1),"repeat"===ae&&(Bt|=2),Bt){var Lt=at.createPattern(Ge.data,E_[Bt]);at.fillStyle=Lt,at.translate(lt,Rt,!0),at.fillRect(0,0,ti,li),at.translate(-lt,-Rt,!0)}else at.drawImage(Ge.data,lt,Rt,ti,li)}},D=function(){Ve&&(jt?jt(at,nt.attribute,$t):je&&(at.setStrokeStyle(nt,nt.attribute,se-lt,ue-Rt,$t),at.stroke()))};fe?(D(),hi&&(at.save(),at.clip()),this.beforeRenderStep(nt,at,lt,Rt,Ne,!1,Ce,!1,$t,Bt,Ht),L(),hi&&at.restore()):(hi&&(at.save(),at.clip()),this.beforeRenderStep(nt,at,lt,Rt,Ne,!1,Ce,!1,$t,Bt,Ht),L(),hi&&at.restore(),D()),this.afterRenderStep(nt,at,lt,Rt,Ne,!1,Ce,!1,$t,Bt,Ht)}}}}},{"key":"draw","value":function(nt,at,lt){var Rt=nt.attribute.image;if(Rt&&nt.resources){var Bt=nt.resources.get(Rt);if("loading"===Bt.state&&Y(Rt))df.improveImageLoading(Rt);else if("success"===Bt.state&&at.drawParams.context){var Lt=yh(nt).image;this._draw(nt,Lt,!1,lt)}}}}])}(zm);P_=b_([Hs(),k_(0,Gs(ll)),k_(0,js(hg)),x_("design:paramtypes",[Object])],P_);var R_=Symbol.for("IncrementalDrawContribution"),I_=Symbol.for("ArcRender"),B_=Symbol.for("Arc3dRender"),O_=Symbol.for("AreaRender"),D_=Symbol.for("CircleRender"),L_=Symbol.for("GraphicRender"),F_=Symbol.for("GroupRender"),z_=Symbol.for("LineRender"),H_=Symbol.for("PathRender"),j_=Symbol.for("PolygonRender"),N_=Symbol.for("RectRender"),V_=Symbol.for("Rect3DRender"),G_=Symbol.for("SymbolRender"),X_=Symbol.for("TextRender"),$_=Symbol.for("RichTextRender"),q_=Symbol.for("Pyramid3dRender"),K_=Symbol.for("GlyphRender"),Z_=Symbol.for("ImageRender"),Q_=Symbol.for("DrawContribution"),W_=function(nt,at,lt,Rt){var Bt,Lt=!1,Ht=!1;if(at.forEachChildren((function(nt){return!(Lt=nt.numberType===ov)})),at.forEachChildren((function(nt){return!(Ht=!!nt.findFace)})),Lt){var jt=at.getChildren(),$t=m(jt);$t.sort((function(nt,at){for(var lt,Rt,Bt,Lt,Ht=(null!==(Rt=null!==(lt=nt.attribute.startAngle)&&void 0!==lt?lt:0+nt.attribute.endAngle)&&void 0!==Rt?Rt:0)/2,jt=(null!==(Lt=null!==(Bt=at.attribute.startAngle)&&void 0!==Bt?Bt:0+at.attribute.endAngle)&&void 0!==Lt?Lt:0)/2;Ht<0;)Ht+=de;for(;jt<0;)jt+=de;return jt-Ht})),$t.forEach((function(nt){nt._next=null,nt._prev=null})),at.removeAllChild(),at.update(),$t.forEach((function(nt){at.appendChild(nt)})),Rt.hack_pieFace="outside",(Bt=lt(Lt,Ht))&&Bt.graphic||(Rt.hack_pieFace="inside",Bt=lt(Lt,Ht)),Bt&&Bt.graphic||(Rt.hack_pieFace="top",Bt=lt(Lt,Ht)),at.removeAllChild(),jt.forEach((function(nt){nt._next=null,nt._prev=null})),jt.forEach((function(nt){at.appendChild(nt)}))}else if(Ht){var Kt=at.getChildren(),te=Kt.map((function(at){return{"ave_z":at.findFace().vertices.map((function(lt){var Rt;return nt.view(lt[0],lt[1],null!==(Rt=lt[2]+at.attribute.z)&&void 0!==Rt?Rt:0)[2]})).reduce((function(nt,at){return nt+at}),0),"g":at}}));te.sort((function(nt,at){return at.ave_z-nt.ave_z})),at.removeAllChild(),te.forEach((function(nt){nt.g._next=null,nt.g._prev=null})),at.update(),te.forEach((function(nt){at.add(nt.g)})),Bt=lt(Lt,Ht),at.removeAllChild(),Kt.forEach((function(nt){nt._next=null,nt._prev=null})),at.update(),Kt.forEach((function(nt){at.add(nt)}))}else Bt=lt(Lt,Ht);return Bt},U_=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Y_=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},J_=Symbol.for("DrawItemInterceptor"),tb=new _i,rb=new _i,ab=o((function t(){r(this,t),this.order=1}),[{"key":"afterDrawItem","value":function(nt,at,lt,Rt,Bt){return null==nt.attribute.shadowRootIdx&&nt.shadowRoot&&nt.shadowRoot.attribute.shadowRootIdx<0||(nt.attribute.shadowRootIdx>0||!nt.attribute.shadowRootIdx||nt.shadowRoot&&nt.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(nt,at,lt,Rt,Bt),!1}},{"key":"beforeDrawItem","value":function(nt,at,lt,Rt,Bt){return null==nt.attribute.shadowRootIdx&&nt.shadowRoot&&nt.shadowRoot.attribute.shadowRootIdx>0||(nt.attribute.shadowRootIdx<0||nt.shadowRoot&&nt.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(nt,at,lt,Rt,Bt),!1}},{"key":"drawItem","value":function(nt,at,lt,Rt,Bt){if(!nt.shadowRoot)return!1;var Lt=lt.context;if(Lt.highPerformanceSave(),Lt.transformFromMatrix(nt.transMatrix,!0),Rt.dirtyBounds&&Rt.backupDirtyBounds){tb.copy(Rt.dirtyBounds),rb.copy(Rt.backupDirtyBounds);var Ht=nt.globalTransMatrix.getInverse();Rt.dirtyBounds.copy(Rt.backupDirtyBounds).transformWithMatrix(Ht),Rt.backupDirtyBounds.copy(Rt.dirtyBounds)}return Rt.renderGroup(nt.shadowRoot,lt,Bg.allocate(1,0,0,1,0,0)),Lt.highPerformanceRestore(),Rt.dirtyBounds&&Rt.backupDirtyBounds&&(Rt.dirtyBounds.copy(tb),Rt.backupDirtyBounds.copy(rb)),!0}}]),ob=o((function t(){r(this,t),this.order=1}),[{"key":"afterDrawItem","value":function(nt,at,lt,Rt,Bt){return nt.attribute._debug_bounds&&this.drawItem(nt,at,lt,Rt,Bt),!1}},{"key":"drawItem","value":function(nt,at,lt,Rt,Bt){if(!nt.attribute._debug_bounds)return!1;var Lt=lt.context;Lt.highPerformanceSave(),nt.parent&&Lt.setTransformFromMatrix(nt.parent.globalTransMatrix,!0),nt.glyphHost&&nt.glyphHost.parent&&Lt.setTransformFromMatrix(nt.glyphHost.parent.globalTransMatrix,!0);var Ht=nt.AABBBounds;return!0!==nt.attribute._debug_bounds&&nt.attribute._debug_bounds(Lt,nt),Lt.strokeRect(Ht.x1,Ht.y1,Ht.width(),Ht.height()),Lt.highPerformanceRestore(),!0}}]),sb=o((function t(){r(this,t),this.order=1,this.interceptors=[new ab,new ub,new lb,new ob]}),[{"key":"afterDrawItem","value":function(nt,at,lt,Rt,Bt){for(var Lt=0;Lt<this.interceptors.length;Lt++)if(this.interceptors[Lt].afterDrawItem&&this.interceptors[Lt].afterDrawItem(nt,at,lt,Rt,Bt))return!0;return!1}},{"key":"beforeDrawItem","value":function(nt,at,lt,Rt,Bt){if((!nt.in3dMode||lt.in3dInterceptor)&&!nt.shadowRoot&&!(nt.baseGraphic||nt.attribute.globalZIndex||nt.interactiveGraphic))return!1;for(var Lt=0;Lt<this.interceptors.length;Lt++)if(this.interceptors[Lt].beforeDrawItem&&this.interceptors[Lt].beforeDrawItem(nt,at,lt,Rt,Bt))return!0;return!1}}]);sb=U_([Hs(),Y_("design:paramtypes",[])],sb);var lb=o((function t(){r(this,t),this.order=1}),[{"key":"beforeDrawItem","value":function(nt,at,lt,Rt,Bt){return!this.processing&&(nt.baseGraphic?this.beforeDrawInteractive(nt,at,lt,Rt,Bt):this.beforeSetInteractive(nt,at,lt,Rt,Bt))}},{"key":"beforeSetInteractive","value":function(nt,at,lt,Rt,Bt){var Lt=nt.interactiveGraphic;if(nt.attribute.globalZIndex){Lt||(Lt=nt.clone(),nt.interactiveGraphic=Lt,Lt.baseGraphic=nt),Lt.setAttributes({"globalZIndex":0,"zIndex":nt.attribute.globalZIndex},!1,{"skipUpdateCallback":!0}),lt.stage.tryInitInteractiveLayer();var Ht=lt.stage.getLayer("_builtin_interactive");return Ht&&this.getShadowRoot(Ht).add(Lt),!0}if(Lt){lt.stage.tryInitInteractiveLayer();var jt=lt.stage.getLayer("_builtin_interactive");jt&&this.getShadowRoot(jt).removeChild(Lt),nt.interactiveGraphic=null,Lt.baseGraphic=null}return!1}},{"key":"beforeDrawInteractive","value":function(nt,at,lt,Rt,Bt){for(var Lt=nt.baseGraphic,Ht=!!Lt.stage,jt=Lt.parent;Ht&&jt&&jt.stage!==jt;)Ht=!!jt.stage,jt=jt.parent;if(!Ht){var $t=lt.stage.getLayer("_builtin_interactive");return $t&&this.getShadowRoot($t).removeChild(nt),!0}if(Lt){this.processing=!0;var Kt=lt.context;return Kt.highPerformanceSave(),Kt.setTransformFromMatrix(Lt.parent.globalTransMatrix,!0),Lt.isContainer?Rt.renderGroup(Lt,lt,Lt.parent.globalTransMatrix):Rt.renderItem(Lt,lt),Kt.highPerformanceRestore(),this.processing=!1,!0}return!1}},{"key":"getShadowRoot","value":function(nt){var at,lt=nt.getElementById("_interactive_group");return lt||((lt=Hy.CreateGraphic("group",{})).id="_interactive_group",nt.add(lt)),null!==(at=lt.shadowRoot)&&void 0!==at?at:lt.attachShadow()}}]),ub=o((function t(){r(this,t),this.order=1}),[{"key":"beforeDrawItem","value":function(nt,at,lt,Rt,Bt){if(!nt.in3dMode||lt.in3dInterceptor)return!1;lt.in3dInterceptor=!0;var Lt=at.drawParams,Ht=Lt.context,jt=Lt.stage;Ht.canvas,Ht.save(),this.initCanvasCtx(Ht),Ht.camera=jt.camera;var $t=Ht.currentMatrix;$t.a/=Ht.dpr,$t.b/=Ht.dpr,$t.c/=Ht.dpr,$t.d/=Ht.dpr,$t.e/=Ht.dpr,$t.f/=Ht.dpr;var Kt=Og.allocate();gg(Kt,$t);var te=Ht.modelMatrix;if(te){if(Kt){var ne=Og.allocate();Ht.modelMatrix=yg(ne,te,Kt)}}else Ht.modelMatrix=Kt;return Ht.setTransform(1,0,0,1,0,0,!0),nt.isContainer?W_(Ht,nt,(function(at,Bt){return Rt.renderGroup(nt,lt,nt.parent.globalTransMatrix,!at&&Bt)}),lt):Rt.renderItem(nt,lt),Ht.camera=null,Ht.restore(),Ht.modelMatrix!==te&&Og.free(Ht.modelMatrix),Ht.modelMatrix=te,lt.in3dInterceptor=!1,!0}},{"key":"initCanvasCtx","value":function(nt){nt.setTransformForCurrent()}}]),eb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ib=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},nb=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},db=Symbol.for("RenderService"),fb=o((function t(nt){r(this,t),this.drawContribution=nt}),[{"key":"prepare","value":function(nt){var at=this;nt&&this.renderTreeRoots.forEach((function(lt){at._prepare(lt,nt)}))}},{"key":"_prepare","value":function(nt,at){var lt=this;nt.forEachChildren((function(nt){lt._prepare(nt,at)})),nt.update({"bounds":at,"trans":!0})}},{"key":"prepareRenderList","value":function(){}},{"key":"beforeDraw","value":function(nt){}},{"key":"draw","value":function(nt){this.drawContribution.draw(this,Object.assign({},this.drawParams))}},{"key":"afterDraw","value":function(nt){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}},{"key":"render","value":function(nt,at){this.renderTreeRoots=nt,this.drawParams=at;var lt=at.updateBounds;this.prepare(lt),this.prepareRenderList(),this.beforeDraw(at),this.draw(at),this.afterDraw(at),this.drawParams=null}}]);fb=eb([Hs(),nb(0,Gs(Q_)),ib("design:paramtypes",[Object])],fb);var pb=new Rs((function(nt){nt(db).to(fb)})),vb=Symbol.for("PickerService"),gb=Symbol.for("GlobalPickerService"),yb=Symbol.for("PickItemInterceptor"),mb=Symbol.for("PickServiceInterceptor"),hb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},_b=o((function t(){r(this,t),this.order=1}),[{"key":"afterPickItem","value":function(nt,at,lt,Rt,Bt){if(nt.graphic){for(var Lt=nt.graphic;Lt.parent;)Lt=Lt.parent;Lt.shadowHost&&(nt.params={"shadowTarget":nt.graphic},nt.graphic=Lt.shadowHost)}return nt}}]);_b=hb([Hs()],_b);var Sb=o((function t(){r(this,t),this.order=1}),[{"key":"afterPickItem","value":function(nt,at,lt,Rt,Bt){return nt.attribute.shadowRootIdx>0||!nt.attribute.shadowRootIdx?this._pickItem(nt,at,lt,Rt,Bt):null}},{"key":"beforePickItem","value":function(nt,at,lt,Rt,Bt){return nt.attribute.shadowRootIdx<0?this._pickItem(nt,at,lt,Rt,Bt):null}},{"key":"_pickItem","value":function(nt,at,lt,Rt,Bt){var Lt;if(!nt.shadowRoot)return null;var Ht=(Bt||{}).parentMatrix;if(!Ht)return null;var jt=at.pickContext;jt.highPerformanceSave();var $t=null===(Lt=yh(nt))||void 0===Lt?void 0:Lt[nt.type],Kt=nt.attribute.shadowPickMode,te=void 0===Kt?null==$t?void 0:$t.shadowPickMode:Kt,ne=nt.shadowRoot,re=Bg.allocateByObj(Ht),ae=new Ve(re.a*lt.x+re.c*lt.y+re.e,re.b*lt.x+re.d*lt.y+re.f),oe=at.pickGroup(ne,ae,re,Rt);return jt.highPerformanceRestore(),!oe.graphic&&oe.group&&"full"===te&&(oe.graphic=oe.group),oe}}]);Sb=hb([Hs()],Sb);var Ab=o((function t(){r(this,t),this.order=1}),[{"key":"beforePickItem","value":function(nt,at,lt,Rt,Bt){var Lt=nt.baseGraphic;if(Lt&&Lt.parent){var Ht=new Ve(lt.x,lt.y),jt=at.pickContext;jt.highPerformanceSave();var $t=Lt.parent.globalTransMatrix;$t.transformPoint(Ht,Ht);var Kt=Lt.isContainer?at.pickGroup(Lt,Ht.clone(),$t,Rt):at.pickItem(Lt,Ht.clone(),$t,Rt);return jt.highPerformanceRestore(),Kt}return null}}]);Ab=hb([Hs()],Ab);var wb=o((function t(){r(this,t),this.order=1}),[{"key":"beforePickItem","value":function(nt,at,lt,Rt,Bt){if(!nt.in3dMode||Rt.in3dInterceptor)return null;var Lt=at.pickContext,Ht=nt.stage;if(!Lt||!Ht)return null;if(Rt.in3dInterceptor=!0,Lt.save(),this.initCanvasCtx(Lt),Lt.camera=Ht.camera,nt.isContainer){var jt=W_(Lt,nt,(function(){return at.pickGroup(nt,lt,Bt.parentMatrix,Rt)}),Rt);return Lt.camera=null,Rt.in3dInterceptor=!1,Lt.restore(),jt}return Lt.restore(),null}},{"key":"initCanvasCtx","value":function(nt){nt.setTransformForCurrent()}}]);wb=hb([Hs()],wb);var Mb=new Rs((function(nt,at,lt){lt(vb)||(nt(gb).toSelf(),nt(vb).toService(gb)),nt(wb).toSelf().inSingletonScope(),nt(yb).toService(wb),nt(Sb).toSelf().inSingletonScope(),nt(yb).toService(Sb),nt(Ab).toSelf().inSingletonScope(),nt(yb).toService(Ab),rl(nt,yb),nt(_b).toSelf().inSingletonScope(),nt(mb).toService(_b),rl(nt,mb)})),Eb=new Rs((function(nt){nt(xv).to(Lg).inSingletonScope(),nt(kv).toConstantValue(Hy)})),Pb=Symbol.for("AutoEnablePlugins"),Hb=Symbol.for("PluginService"),bb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},xb=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},kb=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Nb=o((function t(nt){r(this,t),this.autoEnablePlugins=nt,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}),[{"key":"active","value":function(nt,at){var lt=this;this.stage=nt,this.actived=!0;var Rt=at.pluginList;Rt&&Mc.isBound(Pb)&&this.autoEnablePlugins.getContributions().forEach((function(nt){Rt.includes(nt.name)&&lt.register(nt)}))}},{"key":"findPluginsByName","value":function(nt){var at=[];return this.onStartupFinishedPlugin.forEach((function(lt){lt.name===nt&&at.push(lt)})),this.onRegisterPlugin.forEach((function(lt){lt.name===nt&&at.push(lt)})),at}},{"key":"register","value":function(nt){"onStartupFinished"===nt.activeEvent?this.onStartupFinishedPlugin.push(nt):"onRegister"===nt.activeEvent&&(this.onRegisterPlugin.push(nt),nt.activate(this))}},{"key":"unRegister","value":function(nt){"onStartupFinished"===nt.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(nt),1):"onRegister"===nt.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(nt),1),nt.deactivate(this)}},{"key":"release","value":function(){var nt=this;this.onStartupFinishedPlugin.forEach((function(at){at.deactivate(nt)})),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach((function(at){at.deactivate(nt)})),this.onRegisterPlugin=[]}}]);Nb=bb([Hs(),kb(0,Gs(ll)),kb(0,js(Pb)),xb("design:paramtypes",[Object])],Nb);var Wb=new Rs((function(nt){nt(Hb).to(Nb),function(nt,at){nt(ll).toDynamicValue((function(nt){var lt=nt.container;return new ul(at,lt)})).whenTargetNamed(at)}(nt,Pb)})),Gb=new Rs((function(nt){rl(nt,yl)})),$b=new Rs((function(nt){nt(Ac).to(wc).inSingletonScope(),rl(nt,Ac)})),Tb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Cb=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},qb=o((function t(){r(this,t),this.type="static",this.offscreen=!1,this.global=oc.global}),[{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"init","value":function(nt,at,lt){if(this.layer=nt,this.window=at,lt.main)this.main=!0,this.context=at.getContext(),this.canvas=this.context.getCanvas();else{var Rt;this.main=!1,lt.canvasId&&(Rt=this.global.getElementById(lt.canvasId)),Rt||(Rt=this.global.createCanvas({"width":at.width,"height":at.height})),Rt.style&&(Rt.style["pointer-events"]="none");var Bt=at.getContext().getCanvas().nativeCanvas,Lt=Sc({"nativeCanvas":Rt,"width":at.width,"height":at.height,"dpr":at.dpr,"id":lt.canvasId,"canvasControled":!0,"container":at.getContainer(),"x":Bt.offsetLeft,"y":Bt.offsetTop});Lt.applyPosition(),this.canvas=Lt,this.context=Lt.getContext()}}},{"key":"resize","value":function(nt,at){this.canvas.resize(nt,at)}},{"key":"resizeView","value":function(nt,at){}},{"key":"render","value":function(nt,at,lt){var Rt;if(!this.main){var Bt=this.window.getContext().getCanvas().nativeCanvas;!Bt||this.canvas.x===Bt.offsetLeft&&this.canvas.y===Bt.offsetTop||(this.canvas.x=Bt.offsetLeft,this.canvas.y=Bt.offsetTop,this.canvas.applyPosition())}at.renderService.render(nt,Object.assign(Object.assign({"context":this.context,"clear":null!==(Rt=at.background)&&void 0!==Rt?Rt:"#ffffff"},at),lt))}},{"key":"merge","value":function(nt){var at=this;nt.forEach((function(nt){var lt=nt.getContext().canvas.nativeCanvas;at.context.drawImage(lt,0,0)}))}},{"key":"prepare","value":function(nt,at){}},{"key":"drawTo","value":function(nt,at,lt){var Rt,Bt=nt.getContext();lt.renderService.render(at,Object.assign(Object.assign({"context":Bt},lt),{"clear":lt.clear?null!==(Rt=lt.background)&&void 0!==Rt?Rt:"#fff":void 0}))}},{"key":"getContext","value":function(){return this.context}},{"key":"release","value":function(){this.canvas.release()}}]);qb=Tb([Hs(),Cb("design:paramtypes",[])],qb);var Zb=new Rs((function(nt){nt(qb).toSelf(),nt(Qv).toService(qb)})),Rb=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))};function Bb(nt,at,lt){var Rt={},Bt=[];return nt.forEachChildren((function(nt){var lt=nt.attribute.zIndex,Lt=void 0===lt?at:lt;Rt[Lt]?Rt[Lt].push(nt):(Rt[Lt]=[nt],Bt.push(Lt))}),lt),Bt.sort((function(nt,at){return lt?at-nt:nt-at})),{"childMap":Rt,"zIdxArray":Bt}}function Ib(nt,at,lt){var Rt,Bt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Lt=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Ht=!1;if(Lt?Ht=!0:nt.forEachChildren((function(nt,lt){var Bt=nt.attribute.zIndex,Lt=void 0===Bt?at:Bt;if(0===lt)Rt=Lt;else if(Rt!==Lt)return Ht=!0,!0;return!1}),Bt),Ht)for(var jt=Bb(nt,at,Bt),$t=jt.childMap,Kt=jt.zIdxArray,te=!1,ne=0;ne<Kt.length&&!te;ne++){var re=$t[Kt[ne]];Lt&&re.sort((function(nt,at){var lt,Rt;return(Bt?-1:1)*((null!==(lt=at.attribute.z)&&void 0!==lt?lt:0)-(null!==(Rt=nt.attribute.z)&&void 0!==Rt?Rt:0))}));for(var ae=0;ae<re.length;ae++)if(lt(re[ae],ae)){te=!0;break}}else nt.forEachChildren(lt,Bt)}function Lb(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Rb(this,void 0,void 0,f().mark((function e(){return f().wrap((function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,nt.forEachChildrenAsync(lt,Rt);case 2:case"end":return at.stop()}}),e)})))}function Db(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Bt=!1;nt.forEachChildren((function(nt,at){var Rt=nt.attribute.zIndex;if(0===at);else if(void 0!==(void 0===Rt?lt:Rt))return Bt=!0,!0;return!1}),Rt);var Lt=null,Ht=!1;if(Bt)for(var jt=Bb(nt,lt,Rt),$t=jt.childMap,Kt=jt.zIdxArray,te=!1,ne=0;ne<Kt.length&&!te;ne++)for(var re=$t[Kt[ne]],ae=0;ae<re.length;ae++){if(Ht){te=!0,Lt=re[ae];break}re[ae]._uid!==at||(Ht=!0)}else nt.forEachChildren((function(nt){return Ht?(Lt=nt,!0):(nt._uid===at&&(Ht=!0),!1)}),Rt);return Lt}var Ob=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Fb=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},zb=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Qb=o((function t(nt,at){r(this,t),this.contributions=nt,this.drawItemInterceptorContributions=at,this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new mi,this.backupDirtyBounds=new mi,this.global=oc.global,this.layerService=oc.layerService,X(this.contributions)||(this.contributions=[this.contributions]),this.init()}),[{"key":"init","value":function(){var nt=this;this.contributions.forEach((function(at){if(at.style){var lt=nt.styleRenderMap.get(at.style)||new Map;lt.set(at.numberType,at),nt.styleRenderMap.set(at.style,lt)}else nt.defaultRenderMap.set(at.numberType,at)})),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((function(nt,at){return nt.order-at.order}))}},{"key":"prepareForDraw","value":function(nt,at){at.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!at.stage.params.optimize.disableCheckGraphicWidthOutRange}},{"key":"draw","value":function(nt,at){var lt=this;this.prepareForDraw(nt,at),at.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(at.renderStyle)||this.defaultRenderMap,this.currentRenderService=nt;var Rt=at.context,Bt=at.stage,Lt=at.viewBox,Ht=at.transMatrix;if(Rt){var jt=this.dirtyBounds.setValue(0,0,Lt.width(),Lt.height());if(Bt.dirtyBounds&&!Bt.dirtyBounds.empty()){var $t=He(jt,Bt.dirtyBounds,!1);jt.x1=Math.floor($t.x1),jt.y1=Math.floor($t.y1),jt.x2=Math.ceil($t.x2),jt.y2=Math.ceil($t.y2)}var Kt=Rt.dpr%1;(Kt||.5!==Kt)&&(jt.x1=Math.floor(jt.x1*Rt.dpr)/Rt.dpr,jt.y1=Math.floor(jt.y1*Rt.dpr)/Rt.dpr,jt.x2=Math.ceil(jt.x2*Rt.dpr)/Rt.dpr,jt.y2=Math.ceil(jt.y2*Rt.dpr)/Rt.dpr),this.backupDirtyBounds.copy(jt),Rt.inuse=!0,Rt.setClearMatrix(Ht.a,Ht.b,Ht.c,Ht.d,Ht.e,Ht.f),Rt.clearMatrix(),Rt.setTransformForCurrent(!0),Rt.translate(Lt.x1,Lt.y1,!0),Rt.beginPath(),Rt.rect(jt.x1,jt.y1,jt.width(),jt.height()),Rt.clip(),Bt.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(nt,Rt,at),Rt.save(),nt.renderTreeRoots.sort((function(nt,at){var lt,Rt;return(null!==(lt=nt.attribute.zIndex)&&void 0!==lt?lt:Wu.zIndex)-(null!==(Rt=at.attribute.zIndex)&&void 0!==Rt?Rt:Wu.zIndex)})).forEach((function(nt){nt.isContainer?lt.renderGroup(nt,at,Bg.allocate(1,0,0,1,0,0)):lt.renderItem(nt,at)})),Rt.restore(),Rt.setClearMatrix(1,0,0,1,0,0),Rt.inuse=!1,Rt.draw()}}},{"key":"doRegister","value":function(){throw new Error("")}},{"key":"_findNextGraphic","value":function(nt){for(var at=nt.parent,lt=nt._uid;at;){var Rt=Db(at,lt,Wu.zIndex);if(Rt)return Rt;lt=at._uid,at=at.parent}return null}},{"key":"renderGroup","value":function(nt,at,lt,Rt){var Bt=this;if(!at.break&&!1!==nt.attribute.visibleAll){if(nt.incremental&&(null==at.startAtId||at.startAtId===nt._uid))return at.break=!0,void this._increaseRender(nt,at);if(!this.useDirtyBounds||Ye(nt.AABBBounds,this.dirtyBounds,!1)||"empty"===nt.attribute.boundsMode){var Lt,Ht=lt;if(this.useDirtyBounds){Lt=v_.allocateByObj(this.dirtyBounds);var jt=nt.transMatrix;Ht=Bg.allocateByObj(lt).multiply(jt.a,jt.b,jt.c,jt.d,jt.e,jt.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(Ht.getInverse())}this.renderItem(nt,at,{"drawingCb":function(){var lt;Rt?nt.forEachChildren((function(nt){at.break||(nt.isContainer?Bt.renderGroup(nt,at,Ht):Bt.renderItem(nt,at))})):Ib(nt,Wu.zIndex,(function(nt){at.break||(nt.isContainer?Bt.renderGroup(nt,at,Ht):Bt.renderItem(nt,at))}),!1,!!(null===(lt=at.context)||void 0===lt?void 0:lt.camera))}}),this.useDirtyBounds&&(this.dirtyBounds.copy(Lt),v_.free(Lt),Bg.free(Ht))}}}},{"key":"_increaseRender","value":function(nt,at){var lt=at.layer,Rt=at.stage,Bt=lt.subLayers,Lt=Bt.get(nt._uid);Lt||(Lt={"layer":this.layerService.createLayer(Rt),"zIndex":Bt.size,"group":nt},Bt.set(nt._uid,Lt));var Ht=Lt.layer.getNativeHandler().getContext(),jt=Lt.drawContribution||Mc.get(R_);jt.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),jt.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),jt.draw(this.currentRenderService,Object.assign(Object.assign({},at),{"drawContribution":jt,"clear":"transparent","layer":Lt.layer,"context":Ht,"startAtId":nt._uid,"break":!1})),Lt.drawContribution=jt;var $t=this._findNextGraphic(nt);if($t)if($t.isContainer&&$t.incremental)this._increaseRender($t,at);else{var Kt=Bt.get($t._uid);Kt||(Kt={"layer":this.layerService.createLayer(Rt),"zIndex":Bt.size},Bt.set($t._uid,Kt));var te=Kt.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},at),{"drawContribution":jt,"clear":"transparent","layer":Kt.layer,"context":te,"startAtId":$t._uid,"break":!1}))}}},{"key":"getRenderContribution","value":function(nt){var at;return at||(at=this.selectRenderByNumberType(nt.numberType,nt)),at||(at=this.selectRenderByType(nt.type)),at}},{"key":"renderItem","value":function(nt,at,lt){if(this.InterceptorContributions.length)for(var Rt=0;Rt<this.InterceptorContributions.length;Rt++){var Bt=this.InterceptorContributions[Rt];if(Bt.beforeDrawItem&&Bt.beforeDrawItem(nt,this.currentRenderService,at,this,lt))return}var Lt=this.getRenderContribution(nt);if(Lt){var Ht,jt=this.scrollMatrix&&(0!==this.scrollMatrix.e||0!==this.scrollMatrix.f);if(nt.parent){var $t=nt.parent.attribute,Kt=$t.scrollX,te=void 0===Kt?0:Kt,ne=$t.scrollY,re=void 0===ne?0:ne;(te||re)&&(jt=!0,this.scrollMatrix||(this.scrollMatrix=Bg.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-te,-re))}if(jt&&(Ht=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),!this.useDirtyBounds||nt.isContainer||"empty"===nt.attribute.boundsMode||Ye(nt.AABBBounds,null!=Ht?Ht:this.dirtyBounds,!1)){var ae=null!=at.startAtId&&nt._uid!==at.startAtId;if(nt._uid===at.startAtId&&(at.startAtId=null),lt&&(lt.skipDraw=ae),ae?nt.isContainer&&Lt.draw(nt,this.currentRenderService,at,lt):Lt.draw(nt,this.currentRenderService,at,lt),jt&&nt.parent){var oe=nt.parent.attribute,se=oe.scrollX,le=void 0===se?0:se,ue=oe.scrollY,ce=void 0===ue?0:ue;this.scrollMatrix&&this.scrollMatrix.translate(le,ce)}if(this.InterceptorContributions.length)for(var he=0;he<this.InterceptorContributions.length;he++){var de=this.InterceptorContributions[he];if(de.afterDrawItem&&de.afterDrawItem(nt,this.currentRenderService,at,this))return}}else if(jt&&nt.parent){var fe=nt.parent.attribute,pe=fe.scrollX,ve=void 0===pe?0:pe,Ae=fe.scrollY,we=void 0===Ae?0:Ae;this.scrollMatrix&&this.scrollMatrix.translate(ve,we)}}}},{"key":"selectRenderByType","value":function(nt){return te.getInstance().warn(""),null}},{"key":"selectRenderByNumberType","value":function(nt,at){var lt;if(at.attribute.renderStyle){var Rt=this.styleRenderMap.get(at.attribute.renderStyle);lt=Rt&&Rt.get(nt)}return lt||this.currentRenderMap.get(nt)||this.defaultRenderMap.get(nt)}},{"key":"clearScreen","value":function(nt,at,lt){var Rt,Bt,Lt=lt.clear,Ht=lt.viewBox,jt=Ht.width(),$t=Ht.height();if(Lt){at.clearRect(0,0,jt,$t);var Kt=null===(Rt=nt.drawParams)||void 0===Rt?void 0:Rt.stage;if(Kt&&(at.globalAlpha=null!==(Bt=Kt.attribute.opacity)&&void 0!==Bt?Bt:1),Kt&&Kt.backgroundImg&&Kt.resources){var te=Kt.resources.get(Lt);te&&"success"===te.state&&te.data&&at.drawImage(te.data,0,0,jt,$t)}else at.fillStyle=nc(at,Lt,{"AABBBounds":{"x1":0,"y1":0,"x2":0+jt,"y2":0+$t}},0,0),at.fillRect(0,0,jt,$t)}}},{"key":"afterDraw","value":function(nt,at){}}]);Qb=Ob([Hs(),zb(0,Us(L_)),zb(1,Gs(ll)),zb(1,js(J_)),Fb("design:paramtypes",[Array,Object])],Qb);var jb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},tx=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).numberType=dv,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){if(nt.incremental&&Bt.multiGraphicOptions){var $t=Bt.multiGraphicOptions,Kt=$t.startAtIdx,te=$t.length,ne=nt.attribute.segments,re=void 0===ne?[]:ne;if(Kt>re.length)return;var ae=yh(nt).line,oe=nt.attribute,se=oe.fill,le=void 0===se?ae.fill:se,ue=oe.stroke,ce=void 0===ue?ae.stroke:ue,he=oe.opacity,de=void 0===he?ae.opacity:he,fe=oe.fillOpacity,pe=void 0===fe?ae.fillOpacity:fe,ve=oe.strokeOpacity,Ae=void 0===ve?ae.strokeOpacity:ve,we=oe.lineWidth,Ce=void 0===we?ae.lineWidth:we,je=oe.visible,Ne=void 0===je?ae.visible:je,Ve=Uv(de,pe,le),Ge=Xv(de,Ae),ti=Gv(le),li=Wv(ce,Ce);if(!nt.valid||!Ne)return;if(!ti&&!li)return;if(!(Ve||Ge||Ht||jt))return;for(var hi=Bt.context,di=Kt;di<Kt+te;di++)this.drawIncreaseSegment(nt,hi,re[di-1],re[di],nt.attribute.segments[di],[ae,nt.attribute],lt,Rt)}else y(e,"drawShape",this,3)([nt,at,lt,Rt,Bt,Lt,Ht,jt])}},{"key":"drawIncreaseSegment","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){Rt&&(at.beginPath(),function(nt,at,lt,Rt){var Bt=Rt||{},Lt=Bt.offsetX,Ht=void 0===Lt?0:Lt,jt=Bt.offsetY,$t=void 0===jt?0:jt,Kt=at?at.points[at.points.length-1]:lt.points[0];nt.moveTo(Kt.x+Ht,Kt.y+$t),lt.points.forEach((function(at){!1!==at.defined?nt.lineTo(at.x+Ht,at.y+$t):nt.moveTo(at.x+Ht,at.y+$t)}))}(at.nativeContext,lt,Rt,{"offsetX":Ht,"offsetY":jt}),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,Bt,Lt),at.setStrokeStyle(nt,Bt,Ht,jt,Lt),at.stroke())}}])}(Wm);tx=jb([Hs()],tx);var Vb=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ex=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).numberType=sv,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht){if(nt.incremental&&Bt.multiGraphicOptions){var jt=Bt.multiGraphicOptions,$t=jt.startAtIdx,Kt=jt.length,te=nt.attribute.segments,ne=void 0===te?[]:te;if($t>ne.length)return;var re=yh(nt).area,ae=nt.attribute,oe=ae.fill,se=void 0===oe?re.fill:oe,le=ae.fillOpacity,ue=void 0===le?re.fillOpacity:le,ce=ae.opacity,he=void 0===ce?re.opacity:ce,de=ae.visible,fe=void 0===de?re.visible:de,pe=Uv(he,ue,se),ve=Gv(se);if(!nt.valid||!fe)return;if(!ve)return;if(!pe&&!Ht)return;for(var Ae=$t;Ae<$t+Kt;Ae++)this.drawIncreaseSegment(nt,at,ne[Ae-1],ne[Ae],nt.attribute.segments[Ae],[re,nt.attribute],lt,Rt)}else y(e,"drawShape",this,3)([nt,at,lt,Rt,Bt,Lt,Ht])}},{"key":"drawIncreaseSegment","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){Rt&&(at.beginPath(),function(nt,at,lt,Rt){for(var Bt=Rt||{},Lt=Bt.offsetX,Ht=void 0===Lt?0:Lt,jt=Bt.offsetY,$t=void 0===jt?0:jt,Kt=lt.points,te=[],ne=0;ne<Kt.length;ne++)Kt[ne].defined;te.push(Kt),te.forEach((function(lt,Rt){var Bt,Lt,jt,Kt,te=at&&0===Rt?at.points[at.points.length-1]:lt[0];nt.moveTo(te.x+Ht,te.y+$t),lt.forEach((function(at){!1!==at.defined?nt.lineTo(at.x+Ht,at.y+$t):nt.moveTo(at.x+Ht,at.y+$t)}));for(var ne=lt.length-1;ne>=0;ne--){var re=lt[ne];nt.lineTo(null!==(Bt=re.x1)&&void 0!==Bt?Bt:re.x,null!==(Lt=re.y1)&&void 0!==Lt?Lt:re.y)}nt.lineTo(null!==(jt=te.x1)&&void 0!==jt?jt:te.x,null!==(Kt=te.y1)&&void 0!==Kt?Kt:te.y),nt.closePath()}))}(at.camera?at:at.nativeContext,lt,Rt,{"offsetX":Ht,"offsetY":jt}),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,Bt,Lt),at.setCommonStyle(nt,Bt,Ht,jt,Lt),at.fill())}}])}(Qm);ex=Vb([Hs()],ex);var ix,Ub=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Yb=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Xb=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Kb=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))};!function(nt){nt[nt.NORMAL=0]="NORMAL",nt[nt.STOP=1]="STOP"}(ix||(ix={}));var nx=function(nt){function e(nt,at,lt,Rt){var Bt;return r(this,e),(Bt=n(this,e,[nt,Rt])).contributions=nt,Bt.lineRender=at,Bt.areaRender=lt,Bt.drawItemInterceptorContributions=Rt,Bt.rendering=!1,Bt.currFrameStartAt=0,Bt.currentIdx=0,Bt.status=ix.NORMAL,Bt.checkingForDrawPromise=null,Bt.hooks={"completeDraw":new gl([])},Bt.defaultRenderMap.set(Bt.lineRender.numberType,Bt.lineRender),Bt.defaultRenderMap.set(Bt.areaRender.numberType,Bt.areaRender),Bt}return h(e,nt),o(e,[{"key":"draw","value":function(nt,at){return Kb(this,void 0,void 0,f().mark((function i(){var lt,Rt,Bt,Lt=this;return f().wrap((function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(!this.checkingForDrawPromise){Ht.next=2;break}return Ht.abrupt("return");case 2:return this.lastRenderService=nt,this.lastDrawContext=at,this.checkingForDrawPromise=this.checkForDraw(at),Ht.next=5,this.checkingForDrawPromise;case 5:if(lt=Ht.sent,this.checkingForDrawPromise=null,!lt){Ht.next=8;break}return Ht.abrupt("return");case 8:this.currentRenderService=nt,Rt=at.context,Bt=at.viewBox,Rt&&(Rt.inuse=!0,Rt.clearMatrix(),Rt.setTransformForCurrent(!0),Rt.save(),at.restartIncremental&&this.clearScreen(this.currentRenderService,Rt,at),Rt.translate(Bt.x1,Bt.y1,!0),Rt.save(),nt.renderTreeRoots.sort((function(nt,at){var lt,Rt;return(null!==(lt=nt.attribute.zIndex)&&void 0!==lt?lt:Wu.zIndex)-(null!==(Rt=at.attribute.zIndex)&&void 0!==Rt?Rt:Wu.zIndex)})).forEach((function(nt){Lt.renderGroup(nt,at)})),this.hooks.completeDraw.tap("top-draw",(function(){Rt.restore(),Rt.restore(),Rt.draw(),Rt.inuse=!1,Lt.rendering=!1})));case 11:case"end":return Ht.stop()}}),i,this)})))}},{"key":"_increaseRender","value":function(nt,at){return Kb(this,void 0,void 0,f().mark((function i(){return f().wrap((function(lt){for(;;)switch(lt.prev=lt.next){case 0:return this.rendering=!0,lt.next=3,this._renderIncrementalGroup(nt,at);case 3:case"end":return lt.stop()}}),i,this)})))}},{"key":"_renderIncrementalGroup","value":function(nt,at){return Kb(this,void 0,void 0,f().mark((function i(){var lt=this;return f().wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return this.count=nt.count,Rt.next=3,new Promise((function(Rt){lt.renderItem(nt,at,{"drawingCb":function(){return Kb(lt,void 0,void 0,f().mark((function n(){var lt,Bt=this;return f().wrap((function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(2===nt.count){Lt.next=6;break}return Lt.next=3,Lb(nt,Wu.zIndex,(function(lt,Rt){if(Bt.status===ix.STOP)return!0;if(lt.isContainer)return!1;if(Rt<Bt.currentIdx)return!1;var Lt=Bt.currFrameStartAt+nt.incremental;return Rt<Lt&&(Bt.currentIdx=Rt+1,Bt.renderItem(lt,at)),Rt===Lt-1&&(Bt.currFrameStartAt=Bt.currentIdx,Bt.waitToNextFrame())}));case 3:Rt(!1),Lt.next=21;break;case 6:if(!(lt=nt.getChildAt(0)).incremental||!lt.attribute.segments){Lt.next=19;break}lt.incrementalAt||(lt.incrementalAt=0);case 9:if(!(lt.incrementalAt<lt.attribute.segments.length)){Lt.next=17;break}return at.multiGraphicOptions={"startAtIdx":lt.incrementalAt,"length":lt.incremental},this.renderItem(lt,at),lt.incrementalAt+=lt.incremental,Lt.next=15,this.waitToNextFrame();case 15:Lt.next=9;break;case 17:Lt.next=20;break;case 19:this.renderItem(lt,at);case 20:Rt(!1);case 21:case"end":return Lt.stop()}}),n,this)})))}})}));case 3:this.hooks.completeDraw.call();case 4:case"end":return Rt.stop()}}),i,this)})))}},{"key":"waitToNextFrame","value":function(){return Kb(this,void 0,void 0,f().mark((function t(){var nt=this;return f().wrap((function(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",new Promise((function(at){nt.global.getRequestAnimationFrame()((function(){at(!1)}))})));case 1:case"end":return at.stop()}}),t)})))}},{"key":"checkForDraw","value":function(nt){return Kb(this,void 0,void 0,f().mark((function e(){var at;return f().wrap((function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(at=this.rendering,lt.t0=nt.restartIncremental,!lt.t0){lt.next=7;break}return at=!1,lt.next=6,this.forceStop();case 6:this.resetToInit();case 7:return lt.abrupt("return",at);case 8:case"end":return lt.stop()}}),e,this)})))}},{"key":"forceStop","value":function(){return Kb(this,void 0,void 0,f().mark((function t(){var nt=this;return f().wrap((function(at){for(;;)switch(at.prev=at.next){case 0:if(at.t0=this.rendering,!at.t0){at.next=5;break}return this.status=ix.STOP,at.next=5,new Promise((function(at){nt.hooks.completeDraw.tap("stopCb",(function(){nt.status=ix.NORMAL,nt.hooks.completeDraw.taps=nt.hooks.completeDraw.taps.filter((function(nt){return"stopCb"!==nt.name})),at(!1)}))}));case 5:case"end":return at.stop()}}),t,this)})))}},{"key":"resetToInit","value":function(){this.currFrameStartAt=0,this.currentIdx=0}},{"key":"renderGroup","value":function(nt,at){return Kb(this,void 0,void 0,f().mark((function i(){var lt=this;return f().wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(at.break||!1===nt.attribute.visibleAll){Rt.next=11;break}if(!nt.incremental||at.startAtId!==nt._uid){Rt.next=7;break}return Rt.next=4,this._increaseRender(nt,at);case 4:Rt.t0=void(at.break=!0),Rt.next=10;break;case 7:return Rt.next=9,new Promise((function(Rt){lt.renderItem(nt,at,{"drawingCb":function(){return Kb(lt,void 0,void 0,f().mark((function n(){var lt=this;return f().wrap((function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return Bt.next=2,Lb(nt,Wu.zIndex,(function(nt){return Kb(lt,void 0,void 0,f().mark((function i(){return f().wrap((function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(lt.t0=at.break,lt.t0){lt.next=6;break}if(lt.t1=nt.isContainer,!lt.t1){lt.next=6;break}return lt.next=6,this.renderGroup(nt,at);case 6:case"end":return lt.stop()}}),i,this)})))}));case 2:Rt(!1);case 3:case"end":return Bt.stop()}}),n)})))}})}));case 9:Rt.t0=void Rt.sent;case 10:return Rt.abrupt("return",Rt.t0);case 11:case"end":return Rt.stop()}}),i,this)})))}}])}(Qb);nx=Ub([Hs(),Xb(0,Us(L_)),Xb(1,Gs(tx)),Xb(2,Gs(ex)),Xb(3,Gs(ll)),Xb(3,js(J_)),Yb("design:paramtypes",[Array,Object,Object,Object])],nx);var rx=new Rs((function(nt){nt(jy).toSelf().inSingletonScope(),nt(Yy).toSelf().inSingletonScope(),nt(Q_).to(Qb),nt(R_).to(nx),nt(F_).to(T_).inSingletonScope(),nt(L_).toService(F_),rl(nt,cg),nt(Vy).toSelf().inSingletonScope(),rl(nt,Eg),rl(nt,L_),nt(sb).toSelf().inSingletonScope(),nt(J_).toService(sb),rl(nt,J_)}));function Jb(){Jb.__loaded||(Jb.__loaded=!0,Mc.load(ng),Mc.load(Eb),Mc.load(pb),Mc.load(Mb),Mc.load(Wb),function(nt){nt.load(Gb),nt.load($b),nt.load(Zb)}(Mc),function(nt){nt.load(rx)}(Mc))}Jb.__loaded=!1,Jb();var ax=Mc.get(ml);oc.global=ax;var ox=Mc.get(Vv);oc.graphicUtil=ox;var sx=Mc.get(Nv);oc.transformUtil=sx;var lx=Mc.get(xv);oc.graphicService=lx;var ux=Mc.get($v);oc.layerService=ux;var hx,dx=o((function t(){var nt=this;r(this,t),this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=function(at){at.glyphHost&&(at=at.glyphHost),at.stage===nt.pluginService.stage&&null!=at.stage&&at.stage.renderNextFrame()}}),[{"key":"activate","value":function(nt){this.pluginService=nt,oc.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),oc.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),oc.graphicService.hooks.onRemove.tap(this.key,this.handleChange)}},{"key":"deactivate","value":function(nt){var at=this,i=function(nt){return nt.filter((function(nt){return nt.name!==at.key}))};oc.graphicService.hooks.onAttributeUpdate.taps=i(oc.graphicService.hooks.onAttributeUpdate.taps),oc.graphicService.hooks.onSetStage.taps=i(oc.graphicService.hooks.onSetStage.taps),oc.graphicService.hooks.onRemove.taps=i(oc.graphicService.hooks.onRemove.taps)}}]),px=o((function t(){var nt=this;r(this,t),this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=function(at){at.glyphHost&&(at=at.glyphHost),at.stage===nt.pluginService.stage&&null!=at.stage&&at.stage.renderNextFrame()}}),[{"key":"activate","value":function(nt){this.pluginService=nt,this.dpr=oc.global.devicePixelRatio,this.refresh()}},{"key":"refresh","value":function(){this._refreshByMediaQuery()||this._refreshByRaf()}},{"key":"_refreshByRaf","value":function(){var nt=this,at=oc.global.getRequestAnimationFrame();this.rafId=at((function(){oc.global.devicePixelRatio!==nt.dpr&&(nt.dpr=oc.global.devicePixelRatio,nt.pluginService.stage.setDpr(nt.dpr,!0)),nt.refresh()}))}},{"key":"_refreshByMediaQuery","value":function(){var nt=this;try{var at="(resolution: ".concat(window.devicePixelRatio,"dppx)"),i=function(){window.devicePixelRatio!==nt.dpr&&(nt.dpr=window.devicePixelRatio,nt.pluginService.stage.setDpr(nt.dpr,!0))},lt=matchMedia(at);lt&&lt.addEventListener("change",i),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push((function(){lt&&lt.removeEventListener("change",i)}))}catch(nt){return!1}return!0}},{"key":"deactivate","value":function(nt){var at,lt=oc.global.getCancelAnimationFrame();lt&&this.rafId&&lt(this.rafId),null===(at=this.autoRefreshCbs)||void 0===at||at.forEach((function(nt){nt()})),this.autoRefreshCbs=void 0}}]),gx=o((function t(){r(this,t),this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid}),[{"key":"activate","value":function(nt){var at=this;this.pluginService=nt,oc.graphicService.hooks.onAddIncremental.tap(this.key,(function(lt,Rt,Bt){lt.glyphHost&&(lt=lt.glyphHost),lt.stage===nt.stage&&null!=lt.stage&&(at.nextUserParams.startAtId=Rt._uid,at.renderNextFrame(Rt))})),oc.graphicService.hooks.onClearIncremental.tap(this.key,(function(lt,Rt){lt.stage===nt.stage&&null!=lt.stage&&(at.nextUserParams.startAtId=lt._uid,at.nextUserParams.restartIncremental=!0,at.renderNextFrame(lt))}))}},{"key":"deactivate","value":function(nt){var at=this;oc.graphicService.hooks.onAddIncremental.taps=oc.graphicService.hooks.onAddIncremental.taps.filter((function(nt){return nt.name!==at.key})),oc.graphicService.hooks.onClearIncremental.taps=oc.graphicService.hooks.onClearIncremental.taps.filter((function(nt){return nt.name!==at.key}))}},{"key":"renderNextFrame","value":function(nt){var at=this;this.nextFrameRenderGroupSet.add(nt),this.willNextFrameRender||(this.willNextFrameRender=!0,oc.global.getRequestAnimationFrame()((function(){at._doRenderInThisFrame(),at.willNextFrameRender=!1})))}},{"key":"_doRenderInThisFrame","value":function(){var nt=this,at=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach((function(lt){var Rt=lt.layer;if(Rt&&lt.layer.subLayers){var Bt=lt.layer.subLayers.get(lt._uid);Bt&&Bt.drawContribution&&Bt.drawContribution.draw(at.renderService,Object.assign({"stage":at,"layer":Rt,"viewBox":at.window.getViewBox(),"transMatrix":at.window.getViewBoxTransform(),"clear":"transparent","renderService":at.renderService,"updateBounds":!1,"startAtId":lt._uid,"context":Bt.layer.getNativeHandler().getContext()},nt.nextUserParams))}})),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}]),yx=new _i,mx=o((function t(){r(this,t),this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid}),[{"key":"activate","value":function(nt){var at=this;this.pluginService=nt,nt.stage.hooks.afterRender.tap(this.key,(function(nt){nt&&nt===at.pluginService.stage&&nt.dirtyBounds.clear()})),oc.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(function(nt,lt,Rt,Bt){nt.glyphHost&&(nt=nt.glyphHost),lt&&lt===at.pluginService.stage&&lt.renderCount&&(nt.isContainer&&!nt.shouldSelfChangeUpdateAABBBounds()||Rt&&(yx.setValue(Bt.x1,Bt.y1,Bt.x2,Bt.y2),lt.dirty(yx,nt.parent&&nt.parent.globalTransMatrix)))})),oc.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(function(nt,lt,Rt,Bt,Lt){lt&&lt===at.pluginService.stage&&lt.renderCount&&(nt.isContainer&&!Lt||lt.dirty(Bt.globalAABBBounds))})),oc.graphicService.hooks.clearAABBBounds.tap(this.key,(function(nt,lt,Rt){lt&&lt===at.pluginService.stage&&lt.renderCount&&lt&&lt.dirty(Rt)})),oc.graphicService.hooks.onRemove.tap(this.key,(function(nt){var lt=nt.stage;lt&&lt===at.pluginService.stage&&lt.renderCount&&lt&&lt.dirty(nt.globalAABBBounds)}))}},{"key":"deactivate","value":function(nt){var at=this;oc.graphicService.hooks.beforeUpdateAABBBounds.taps=oc.graphicService.hooks.beforeUpdateAABBBounds.taps.filter((function(nt){return nt.name!==at.key})),oc.graphicService.hooks.afterUpdateAABBBounds.taps=oc.graphicService.hooks.afterUpdateAABBBounds.taps.filter((function(nt){return nt.name!==at.key})),oc.graphicService.hooks.clearAABBBounds.taps=oc.graphicService.hooks.clearAABBBounds.taps.filter((function(nt){return nt.name!==at.key})),nt.stage.hooks.afterRender.taps=nt.stage.hooks.afterRender.taps.filter((function(nt){return nt.name!==at.key})),oc.graphicService.hooks.onRemove.taps=oc.graphicService.hooks.onRemove.taps.filter((function(nt){return nt.name!==at.key}))}}]),_x=new Nh;function cx(){!function(){if(null==hx)try{var nt=document.createElement("canvas"),at=nt.getContext("2d");(hx=!!(window&&nt.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&at&&at.isPointInPath&&at.isPointInStroke))&&(hx=!!document.createElement)}catch(nt){hx=!1}}();var nt=oc.global&&oc.global.env;return nt?"browser"===nt:hx}_x.addTimeline(Yh),_x.setFPS(60);var bx=function(){function t(){r(this,t)}return o(t,null,[{"key":"registerPlugin","value":function(nt,at){t._pluginClasses[nt]=at}},{"key":"getPlugin","value":function(nt){return t._pluginClasses[nt]}}])}();bx._pluginClasses={};var xx="white",kx=function(nt){function e(){var nt,at,lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(nt=n(this,e,[{}])).tickedBeforeRender=!0,nt._onVisibleChange=function(at){if(!(nt._skipRender<0))if(at){if(nt.dirtyBounds){var lt=nt.window.getViewBox();nt.dirtyBounds.setValue(lt.x1,lt.y1,lt.width(),lt.height())}nt._skipRender>1&&nt.renderNextFrame(),nt._skipRender=0}else nt._skipRender=1},nt.beforeRender=function(at){nt._beforeRender&&nt._beforeRender(at)},nt.afterRender=function(at){nt.renderCount++,nt._afterRender&&nt._afterRender(at),nt._afterNextRenderCbs&&nt._afterNextRenderCbs.forEach((function(nt){return nt(at)})),nt._afterNextRenderCbs=null,nt.tickedBeforeRender=!1},nt.afterTickCb=function(){var at;nt.tickedBeforeRender=!0,"performance"===(null===(at=nt.params.optimize)||void 0===at?void 0:at.tickRenderMode)||"rendering"!==nt.state&&nt.render()},nt.params=lt,nt.theme=new kh,nt.hooks={"beforeRender":new gl(["stage"]),"afterRender":new gl(["stage"])},nt.global=oc.global,!nt.global.env&&cx()&&nt.global.setEnv("browser"),nt.window=Mc.get(uh),nt.renderService=Mc.get(db),nt.pluginService=Mc.get(Hb),nt.layerService=Mc.get($v),nt.pluginService.active(i(nt),lt),nt.window.create({"width":lt.width,"height":lt.height,"viewBox":lt.viewBox,"container":lt.container,"dpr":lt.dpr||nt.global.devicePixelRatio,"canvasControled":!1!==lt.canvasControled,"title":lt.title||"","canvas":lt.canvas}),nt.state="normal",nt.renderCount=0,nt.tryInitEventSystem(),nt._background=null!==(at=lt.background)&&void 0!==at?at:xx,nt.appendChild(nt.layerService.createLayer(i(nt),{"main":!0})),nt.nextFrameRenderLayerSet=new Set,nt.willNextFrameRender=!1,nt.stage=i(nt),nt.renderStyle=lt.renderStyle,lt.autoRender&&nt.enableAutoRender(),lt.autoRefresh&&nt.enableAutoRefresh(),!1===lt.disableDirtyBounds&&nt.enableDirtyBounds(),lt.enableHtmlAttribute&&nt.enableHtmlAttribute(lt.enableHtmlAttribute),lt.ReactDOM&&nt.enableReactAttribute(lt.ReactDOM),lt.enableLayout&&nt.enableLayout(),nt.hooks.beforeRender.tap("constructor",nt.beforeRender),nt.hooks.afterRender.tap("constructor",nt.afterRender),nt._beforeRender=lt.beforeRender,nt._afterRender=lt.afterRender,nt.ticker=lt.ticker||_x,nt.supportInteractiveLayer=!1!==lt.interactiveLayer,nt.timeline=new Uh,nt.ticker.addTimeline(nt.timeline),nt.timeline.pause(),lt.optimize||(lt.optimize={}),nt.optmize(lt.optimize),lt.background&&Y(nt._background)&&nt._background.includes("/")&&nt.setAttributes({"background":nt._background}),nt.ticker.on("afterTick",nt.afterTickCb),nt}return h(e,nt),o(e,[{"key":"viewBox","get":function(){return this.window.getViewBox()},"set":function(nt){this.window.setViewBox(nt)}},{"key":"x","get":function(){return this.window.getViewBox().x1},"set":function(nt){var at=this.window.getViewBox();at.translate(nt-at.x1,0),this.window.setViewBox(at)}},{"key":"y","get":function(){return this.window.getViewBox().y1},"set":function(nt){var at=this.window.getViewBox();at.translate(0,nt-at.y1),this.window.setViewBox(at)}},{"key":"width","get":function(){return this.window.width},"set":function(nt){this.resize(nt,this.height)}},{"key":"viewWidth","get":function(){return this.window.getViewBox().width()},"set":function(nt){this.resizeView(nt,this.viewHeight)}},{"key":"viewHeight","get":function(){return this.window.getViewBox().height()},"set":function(nt){this.resizeView(this.viewWidth,nt)}},{"key":"height","get":function(){return this.window.height},"set":function(nt){this.resize(this.width,nt)}},{"key":"dpr","get":function(){return this.window.dpr},"set":function(nt){this.setDpr(nt)}},{"key":"background","get":function(){var nt;return null!==(nt=this._background)&&void 0!==nt?nt:xx},"set":function(nt){this._background=nt}},{"key":"defaultLayer","get":function(){return this.at(0)}},{"key":"eventSystem","get":function(){return this._eventSystem}},{"key":"pauseRender","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._skipRender=nt}},{"key":"resumeRender","value":function(){this._skipRender=0}},{"key":"tryInitEventSystem","value":function(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new Fh(Object.assign({"targetElement":this.window,"resolution":this.window.dpr||this.global.devicePixelRatio,"rootNode":this,"global":this.global,"supportsPointerEvents":this.params.supportsPointerEvents,"supportsTouchEvents":this.params.supportsTouchEvents},this.params.event)))}},{"key":"preventRender","value":function(nt){nt?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=this.window.isVisible()?0:1:this._skipRender=0}},{"key":"optmize","value":function(nt){this.optmizeRender(nt.skipRenderWithOutRange),this.params.optimize=nt}},{"key":"optmizeRender","value":function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this._skipRender=this._skipRender<0?this._skipRender:this.window.isVisible()?0:1,this.window.onVisibleChange(this._onVisibleChange))}},{"key":"getTimeline","value":function(){return this.timeline}},{"key":"get3dOptions","value":function(nt){var at=nt.center,lt=void 0===at?{"x":this.width/2,"y":this.height/2,"z":0,"dx":0,"dy":0,"dz":0}:at,Rt=nt.light,Bt=void 0===Rt?{}:Rt,Lt=nt.alpha,Ht=void 0===Lt?0:Lt,jt=nt.beta,$t=void 0===jt?0:jt,Kt=nt.camera,te=nt.fieldRatio,ne=void 0===te?1:te,re=nt.fieldDepth;return Object.assign(Object.assign({},nt),{"center":lt,"light":Bt,"alpha":Ht,"beta":$t,"camera":Kt,"fieldRatio":ne,"fieldDepth":re})}},{"key":"set3dOptions","value":function(nt){var at,lt,Rt,Bt,Lt,Ht;this.option3d=nt;var jt=this.get3dOptions(nt),$t=jt.light,Kt=jt.center,te=jt.camera,ne=jt.alpha,re=jt.beta,ae=jt.fieldRatio,oe=jt.fieldDepth,se=$t.dir,le=void 0===se?[1,1,-1]:se,ue=$t.color,ce=void 0===ue?"white":ue,he=$t.ambient,de=(null!==(at=Kt.x)&&void 0!==at?at:this.width/2)+(null!==(lt=Kt.dx)&&void 0!==lt?lt:0),fe=(null!==(Rt=Kt.y)&&void 0!==Rt?Rt:this.height/2)+(null!==(Bt=Kt.dy)&&void 0!==Bt?Bt:0),pe=[de,fe,(null!==(Lt=Kt.z)&&void 0!==Lt?Lt:0)+(null!==(Ht=Kt.dz)&&void 0!==Ht?Ht:0)],ve=0,Ae=0,we=0;te||(ve=Math.sin(ne)+de,Ae=Math.sin(re)+fe,we=Math.cos(ne)*Math.cos(re)*1);var Ce=bx.getPlugin("DirectionalLight");Ce&&(this.light=new Ce(le,ce,he));var je={"left":0,"right":this.width,"top":0,"bottom":this.height,"fieldRatio":ae,"fieldDepth":oe,"viewParams":{"pos":[ve,Ae,we],"center":pe,"up":[0,1,0]}};if(this.camera)this.camera.params=je;else{var Ne=bx.getPlugin("OrthoCamera");Ne&&(this.camera=new Ne(je))}nt.enableView3dTransform&&this.enableView3dTransform()}},{"key":"setBeforeRender","value":function(nt){this._beforeRender=nt}},{"key":"setAfterRender","value":function(nt){this._afterRender=nt}},{"key":"afterNextRender","value":function(nt){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(nt)}},{"key":"enableView3dTransform","value":function(){if(!this.view3dTranform){this.view3dTranform=!0;var nt=bx.getPlugin("ViewTransform3dPlugin");nt&&this.pluginService.register(new nt)}}},{"key":"disableView3dTranform","value":function(){var nt=this;this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableAutoRender","value":function(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new dx))}},{"key":"disableAutoRender","value":function(){var nt=this;this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableAutoRefresh","value":function(){this.autoRefresh||(this.autoRefresh=!0,this.pluginService.register(new px))}},{"key":"disableAutoRefresh","value":function(){var nt=this;this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableIncrementalAutoRender","value":function(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new gx))}},{"key":"disableIncrementalAutoRender","value":function(){var nt=this;this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableDirtyBounds","value":function(){if(!this.dirtyBounds){this.dirtyBounds=new mi;var nt=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];nt?nt.activate(this.pluginService):(nt=new mx,this.pluginService.register(nt))}}},{"key":"disableDirtyBounds","value":function(){var nt=this;this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableLayout","value":function(){if(!this._enableLayout){this._enableLayout=!0;var nt=bx.getPlugin("FlexLayoutPlugin");nt&&this.pluginService.register(new nt)}}},{"key":"disableLayout","value":function(){var nt=this;this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableHtmlAttribute","value":function(nt){if(!this.htmlAttribute){var at=bx.getPlugin("HtmlAttributePlugin");at&&(this.htmlAttribute=nt,this.pluginService.register(new at))}}},{"key":"disableHtmlAttribute","value":function(){var nt=this;this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"enableReactAttribute","value":function(nt){if(!this.reactAttribute){var at=bx.getPlugin("ReactAttributePlugin");at&&(this.reactAttribute=nt,this.pluginService.register(new at))}}},{"key":"disableReactAttribute","value":function(){var nt=this;this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach((function(at){nt.pluginService.unRegister(at)})))}},{"key":"getPluginsByName","value":function(nt){return this.pluginService.findPluginsByName(nt)}},{"key":"tryUpdateAABBBounds","value":function(){var nt=this.window.getViewBox();return this._AABBBounds.setValue(nt.x1,nt.y1,nt.x2,nt.y2),this._AABBBounds}},{"key":"combineLayer","value":function(nt,at){throw new Error("")}},{"key":"createLayer","value":function(nt,at){if("released"!==this.releaseStatus){var lt=this.layerService.createLayer(this,{"main":!1,"layerMode":at,"canvasId":nt});return this.appendChild(lt),lt}}},{"key":"sortLayer","value":function(nt){var at=this,lt=this.children;lt.sort(nt),this.removeAllChild(),lt.forEach((function(nt){at.appendChild(nt)}))}},{"key":"removeLayer","value":function(nt){return this.removeChild(this.findChildByUid(nt))}},{"key":"tryInitInteractiveLayer","value":function(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}},{"key":"clearViewBox","value":function(nt){this.window.clearViewBox(nt)}},{"key":"render","value":function(nt,at){if("released"!==this.releaseStatus){this.ticker.start(),this.timeline.resume();var lt=this.state;this.state="rendering",this.tickedBeforeRender||this.ticker.trySyncTickStatus(),this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=at,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=lt,this._skipRender&&this._skipRender++}}},{"key":"combineLayersToWindow","value":function(){if("harmony"===this.global.env){var nt=this.window.getContext().nativeContext;this.forEachChildren((function(at,lt){if(lt>0){var Rt=at.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();nt.transferFromImageBitmap(Rt)}}))}}},{"key":"renderNextFrame","value":function(nt,at){var lt=this;this.nextFrameRenderLayerSet.size!==this.childrenCount&&(nt||this).forEach((function(nt){lt.nextFrameRenderLayerSet.add(nt)})),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getRequestAnimationFrame()((function(){lt._doRenderInThisFrame(),lt.willNextFrameRender=!1})))}},{"key":"_doRenderInThisFrame","value":function(){if("released"!==this.releaseStatus){this.timeline.resume(),this.ticker.start();var nt=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=nt,this._skipRender&&this._skipRender++}}},{"key":"renderLayerList","value":function(nt,at){for(var lt=this,Rt=[],Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt];"virtual"===Lt.layerMode&&(Lt=Lt.getNativeHandler().mainHandler.layer),Rt.includes(Lt)||Rt.push(Lt)}Rt.forEach((function(nt){nt.renderCount>lt.renderCount||(nt.renderCount=lt.renderCount+1,nt===lt.interactiveLayer&&lt.dirtyBounds&&lt.dirtyBounds.clear(),nt.render({"renderService":lt.renderService,"background":nt===lt.defaultLayer?lt.background:void 0,"updateBounds":!(!lt.dirtyBounds||lt.dirtyBounds.empty()),"viewBox":lt.window.getViewBox(),"transMatrix":lt.window.getViewBoxTransform()},Object.assign({"renderStyle":lt.renderStyle},at)))})),this.interactiveLayer&&!nt.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({"renderService":this.renderService,"updateBounds":!(!this.dirtyBounds||this.dirtyBounds.empty()),"viewBox":this.window.getViewBox(),"transMatrix":this.window.getViewBoxTransform()},Object.assign({"renderStyle":this.renderStyle},at)))}},{"key":"resizeWindow","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.window.resize(nt,at),lt&&this.render()}},{"key":"resize","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+nt,this.viewBox.y1+at),this.window.resize(nt,at),this.forEachChildren((function(lt){lt.resize(nt,at)})),this.camera&&this.option3d&&this.set3dOptions(this.option3d),lt&&this.render())}},{"key":"resizeView","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+nt,this.viewBox.y1+at),this.forEachChildren((function(lt){lt.resizeView(nt,at)})),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{"right":this.width,"bottom":this.height})),lt&&this.render())}},{"key":"setViewBox","value":function(nt,at,lt,Rt,Bt){var Lt=this,Ht=!0;"object"==b(nt)?(this.viewBox.setValue(nt.x1,nt.y1,nt.x2,nt.y2),!1===at&&(Ht=!1)):(this.viewBox.setValue(nt,at,nt+lt,at+Rt),!1===Bt&&(Ht=!1)),this.forEachChildren((function(nt){nt.resizeView(Lt.viewBox.width(),Lt.viewBox.height())})),Ht&&this.render()}},{"key":"setDpr","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.forEachChildren((function(at){at.setDpr(nt)})),at&&this.render()}},{"key":"setOrigin","value":function(nt,at){throw new Error("")}},{"key":"export","value":function(nt){throw new Error("")}},{"key":"pick","value":function(nt,at){if("released"!==this.releaseStatus){var lt=this.getPickerService().pick(this.children,new Ve(nt,at),{"bounds":this.AABBBounds});return!(!(null==lt?void 0:lt.graphic)&&!(null==lt?void 0:lt.group))&&lt}}},{"key":"startAnimate","value":function(nt){throw new Error("")}},{"key":"setToFrame","value":function(nt){throw new Error("")}},{"key":"release","value":function(){var nt=this;y(e,"release",this,3)([]),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach((function(nt){nt.release()})),this.interactiveLayer&&(this.interactiveLayer.forEachChildren((function(at){at.setStage&&at.setStage(null,null),nt.interactiveLayer.removeChild(at)})),this.interactiveLayer.release()),this.window.release(),this.ticker.remTimeline(this.timeline),this.ticker.removeListener("afterTick",this.afterTickCb),this.renderService.renderTreeRoots=[]}},{"key":"setStage","value":function(nt){}},{"key":"dirty","value":function(nt,at){"released"!==this.releaseStatus&&(at&&nt.transformWithMatrix(at),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(nt.x1,nt.y1,nt.x2,nt.y2),this.dirtyBounds.union(nt))}},{"key":"getLayer","value":function(nt){return this.children.filter((function(at){return at.name===nt}))[0]}},{"key":"renderTo","value":function(nt){var at=this;"released"!==this.releaseStatus&&this.forEachChildren((function(lt,Rt){lt.drawTo(nt,{"renderService":at.renderService,"viewBox":nt.getViewBox(),"transMatrix":nt.getViewBoxTransform(),"background":lt===at.defaultLayer?at.background:void 0,"clear":0===Rt,"updateBounds":!(!at.dirtyBounds||at.dirtyBounds.empty())})}))}},{"key":"renderToNewWindow","value":function(){var nt=arguments.length>1?arguments[1]:void 0;if("released"!==this.releaseStatus){var at=Mc.get(uh),lt=nt?-nt.x1:0,Rt=nt?-nt.y1:0,Bt=nt?nt.x2:this.viewWidth,Lt=nt?nt.y2:this.viewHeight,Ht=nt?nt.width():this.viewWidth,jt=nt?nt.height():this.viewHeight;return at.create({"viewBox":{"x1":lt,"y1":Rt,"x2":Bt,"y2":Lt},"width":Ht,"height":jt,"dpr":this.window.dpr,"canvasControled":!0,"offscreen":!0,"title":""}),this.renderTo(at),at}}},{"key":"toCanvas","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],at=arguments.length>1?arguments[1]:void 0;if("released"!==this.releaseStatus){var lt=this.renderToNewWindow(nt,at).getNativeHandler();return lt.nativeCanvas?lt.nativeCanvas:null}}},{"key":"setCursor","value":function(nt){this._cursor=nt,this.eventSystem.setCursor(nt,"ignore")}},{"key":"getCursor","value":function(){return this._cursor}},{"key":"eventPointTransform","value":function(nt){var at=this.global.mapToCanvasPoint(nt,this.window.getContext().canvas.nativeCanvas);return this.stage.window.pointTransform(at.x,at.y)}},{"key":"pauseTriggerEvent","value":function(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}},{"key":"resumeTriggerEvent","value":function(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}},{"key":"getPickerService","value":function(){return this.pickerService||(this.pickerService=Mc.get(vb)),this.pickerService}}])}(Lv),fx=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},vx=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Mx=new Mi(1,0,0,1,0,0),Ex={"x":0,"y":0},Px=o((function t(nt,at){r(this,t),this.matrix=new Mi(1,0,0,1,0,0),this.stack=[],this.dpr=at,this.applyedMatrix=new Mi(1,0,0,1,0,0),this.path=new Ou,this._clearMatrix=new Mi(1,0,0,1,0,0)}),[{"key":"nativeContext","get":function(){return this.path}},{"key":"getCanvas","value":function(){throw new Error("getCanvas")}},{"key":"getContext","value":function(){throw new Error("getContext")}},{"key":"setTransformForCurrent","value":function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}},{"key":"currentMatrix","get":function(){return this.matrix}},{"key":"cloneMatrix","value":function(nt){return Bg.allocateByObj(nt)}},{"key":"clear","value":function(){this.save(),this.resetTransform(),this.restore()}},{"key":"restore","value":function(){this.stack.length>0&&(Bg.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}},{"key":"highPerformanceRestore","value":function(){this.stack.length>0&&(Bg.free(this.matrix),this.matrix=this.stack.pop())}},{"key":"rotate","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.matrix.rotate(nt),at&&this.setTransformForCurrent()}},{"key":"save","value":function(){var nt=this.cloneMatrix(this.matrix);this.stack.push(nt)}},{"key":"highPerformanceSave","value":function(){var nt=this.cloneMatrix(this.matrix);this.stack.push(nt)}},{"key":"scale","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.scale(nt,at),lt&&this.setTransformForCurrent()}},{"key":"setScale","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.setScale(nt,at),lt&&this.setTransformForCurrent()}},{"key":"scalePoint","value":function(nt,at,lt,Rt){var Bt=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.translate(lt,Rt,!1),this.scale(nt,at,!1),this.translate(-lt,-Rt,!1),Bt&&this.setTransformForCurrent()}},{"key":"setTransform","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.dpr;this.matrix.setValue(jt*nt,jt*at,jt*lt,jt*Rt,jt*Bt,jt*Lt),Ht&&this.setTransformForCurrent()}},{"key":"setTransformFromMatrix","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dpr;this.matrix.setValue(nt.a*lt,nt.b*lt,nt.c*lt,nt.d*lt,nt.e*lt,nt.f*lt),at&&this.setTransformForCurrent()}},{"key":"resetTransform","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransform(at,0,0,at,0,0),nt&&this.setTransformForCurrent()}},{"key":"transform","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this.matrix.multiply(nt,at,lt,Rt,Bt,Lt),Ht&&this.setTransformForCurrent()}},{"key":"transformFromMatrix","value":function(nt,at){this.matrix.multiply(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f),at&&this.setTransformForCurrent()}},{"key":"translate","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.translate(nt,at),lt&&this.setTransformForCurrent()}},{"key":"rotateDegrees","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=nt*Math.PI/180;this.rotate(lt,at)}},{"key":"rotateAbout","value":function(nt,at,lt){var Rt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(at,lt,!1),this.rotate(nt,!1),this.translate(-at,-lt,!1),Rt&&this.setTransformForCurrent()}},{"key":"rotateDegreesAbout","value":function(nt,at,lt){var Rt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(at,lt,!1),this.rotateDegrees(nt,!1),this.translate(-at,-lt,!1),Rt&&this.setTransformForCurrent()}},{"key":"beginPath","value":function(){this.path.clear()}},{"key":"clip","value":function(nt,at){}},{"key":"arc","value":function(nt,at,lt,Rt,Bt,Lt){this.path.arc(nt,at,lt,Rt,Bt,Lt)}},{"key":"arcTo","value":function(nt,at,lt,Rt,Bt){this.path.arcTo(nt,at,lt,Rt,Bt)}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt){this.path.bezierCurveTo(nt,at,lt,Rt,Bt,Lt)}},{"key":"closePath","value":function(){this.path.closePath()}},{"key":"ellipse","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){}},{"key":"lineTo","value":function(nt,at){this.path.lineTo(nt,at)}},{"key":"moveTo","value":function(nt,at){this.path.moveTo(nt,at)}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt){this.path.quadraticCurveTo(nt,at,lt,Rt)}},{"key":"rect","value":function(nt,at,lt,Rt){this.path.rect(nt,at,lt,Rt)}},{"key":"createImageData","value":function(nt,at){return null}},{"key":"createLinearGradient","value":function(nt,at,lt,Rt){throw new Error("createLinearGradient")}},{"key":"createPattern","value":function(nt,at){throw new Error("createPattern")}},{"key":"createRadialGradient","value":function(nt,at,lt,Rt,Bt,Lt){throw new Error("createRadialGradient")}},{"key":"createConicGradient","value":function(nt,at,lt,Rt){return null}},{"key":"fill","value":function(nt,at){}},{"key":"fillRect","value":function(nt,at,lt,Rt){this.path.rect(nt,at,lt,Rt)}},{"key":"clearRect","value":function(nt,at,lt,Rt){}},{"key":"fillText","value":function(nt,at,lt){}},{"key":"getImageData","value":function(nt,at,lt,Rt){return null}},{"key":"getLineDash","value":function(){return[]}},{"key":"isPointInPath","value":function(nt,at){return this.matrix.transformPoint({"x":nt,"y":at},Ex),function(nt,at,lt){return Zc(nt,0,!1,at,lt)}(this.path.commandList,Ex.x,Ex.y)}},{"key":"isPointInStroke","value":function(nt,at){if(!this.lineWidth)return!1;this.matrix.transformPoint({"x":nt,"y":at},Ex);var lt=ic(this,this.lineWidth,this.dpr);return function(nt,at,lt,Rt){return Zc(nt,at,!0,lt,Rt)}(this.path.commandList,lt,Ex.x,Ex.y)}},{"key":"measureText","value":function(nt){throw new Error("measureText")}},{"key":"putImageData","value":function(nt,at,lt){throw new Error("measureText")}},{"key":"setLineDash","value":function(nt){}},{"key":"stroke","value":function(nt){}},{"key":"strokeRect","value":function(nt,at,lt,Rt){this.path.rect(nt,at,lt,Rt)}},{"key":"strokeText","value":function(nt,at,lt){}},{"key":"drawImage","value":function(){}},{"key":"setCommonStyle","value":function(nt,at,lt,Rt,Bt){}},{"key":"_setCommonStyle","value":function(nt,at,lt,Rt){}},{"key":"setStrokeStyle","value":function(nt,at,lt,Rt,Bt){}},{"key":"_setStrokeStyle","value":function(nt,at,lt,Rt){}},{"key":"setTextStyleWithoutAlignBaseline","value":function(nt,at){}},{"key":"setTextStyle","value":function(nt,at){}},{"key":"draw","value":function(){}},{"key":"clearMatrix","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransformFromMatrix(Mx,nt,at)}},{"key":"setClearMatrix","value":function(nt,at,lt,Rt,Bt,Lt){this._clearMatrix.setValue(nt,at,lt,Rt,Bt,Lt)}},{"key":"onlyTranslate","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dpr;return this.matrix.a===nt&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===nt}},{"key":"release","value":function(){this.stack.forEach((function(nt){return Bg.free(nt)})),this.stack.length=0}}]);Px=fx([Hs(),vx("design:paramtypes",[Object,Number])],Px);var Bx=500,Fx=500,zx=1,Hx=o((function t(nt){var at;r(this,t);var lt=nt.nativeCanvas,Rt=nt.width,Bt=void 0===Rt?Bx:Rt,Lt=nt.height,Ht=void 0===Lt?Fx:Lt,jt=nt.dpr,$t=void 0===jt?zx:jt,Kt=nt.x,te=nt.y,ne=nt.id,re=nt.canvasControled,ae=void 0===re||re;this._x=null!=Kt?Kt:0,this._y=null!=te?te:0,this._pixelWidth=Bt*$t,this._pixelHeight=Ht*$t,this._visiable=!1!==nt.visiable,this.controled=ae,this._displayWidth=Bt,this._displayHeight=Ht,this._dpr=$t,this._nativeCanvas=lt,this._id=null!==(at=lt.id)&&void 0!==at?at:ne,ne&&(lt.id=ne),this.init(nt)}),[{"key":"displayWidth","get":function(){return this._pixelWidth/this._dpr}},{"key":"displayHeight","get":function(){return this._pixelHeight/this._dpr}},{"key":"id","get":function(){return this._id}},{"key":"x","get":function(){return this._x},"set":function(nt){this._x=nt}},{"key":"y","get":function(){return this._y},"set":function(nt){this._y=nt}},{"key":"nativeCanvas","get":function(){return this._nativeCanvas},"set":function(nt){this._nativeCanvas=nt}},{"key":"width","get":function(){return this._pixelWidth},"set":function(nt){this._pixelWidth=nt,this._displayWidth=nt/(this._dpr||1)}},{"key":"height","get":function(){return this._pixelHeight},"set":function(nt){this._pixelHeight=nt,this._displayHeight=nt/(this._dpr||1)}},{"key":"getContext","value":function(nt){return this._context}},{"key":"visiable","get":function(){return this._visiable},"set":function(nt){this._visiable=nt,nt?this.show():this.hide()}},{"key":"dpr","get":function(){return this._dpr},"set":function(nt){this._dpr=nt,this.resize(this._displayWidth,this._displayHeight)}},{"key":"getNativeCanvas","value":function(){return this._nativeCanvas}},{"key":"hide","value":function(){}},{"key":"show","value":function(){}},{"key":"applyPosition","value":function(){}},{"key":"resetStyle","value":function(nt){}},{"key":"resize","value":function(nt,at){}},{"key":"toDataURL","value":function(nt,at){return""}},{"key":"readPixels","value":function(nt,at,lt,Rt){return this._context.getImageData(nt,at,lt,Rt)}},{"key":"convertToBlob","value":function(nt){throw new Error("")}},{"key":"transferToImageBitmap","value":function(){throw new Error("")}},{"key":"release","value":function(){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}]);Hx.env="browser";var Sx=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Ax=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},jx=o((function t(){r(this,t)}),[{"key":"configure","value":function(nt){nt.env===this.type&&nt.setActiveEnvContribution(this)}},{"key":"getNativeAABBBounds","value":function(nt){return new _i}},{"key":"removeDom","value":function(nt){return!1}},{"key":"createDom","value":function(nt){return null}},{"key":"updateDom","value":function(nt,at){return!1}},{"key":"getDynamicCanvasCount","value":function(){return 999}},{"key":"getStaticCanvasCount","value":function(){return 999}},{"key":"getElementById","value":function(nt){return document.getElementById(nt)}},{"key":"getRootElement","value":function(){return document.body}},{"key":"loadJson","value":function(nt){var at=fetch(nt).then((function(nt){return nt.json()}));return at.then((function(nt){return{"data":nt,"state":"success"}})).catch((function(){return{"data":null,"state":"fail"}})),at}},{"key":"loadArrayBuffer","value":function(nt){return fetch(nt).then((function(nt){return nt.arrayBuffer()})).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"loadBlob","value":function(nt){return fetch(nt).then((function(nt){return nt.blob()})).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"getElementTop","value":function(nt,at){return 0}},{"key":"getElementLeft","value":function(nt,at){return 0}},{"key":"getElementTopLeft","value":function(nt,at){return{"top":0,"left":0}}},{"key":"loadFont","value":function(nt,at,lt){return Ax(this,void 0,void 0,f().mark((function t(){return f().wrap((function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.abrupt("return",{"loadState":"fail"});case 1:case"end":return nt.stop()}}),t)})))}},{"key":"isMacOS","value":function(){return!1}},{"key":"copyToClipBoard","value":function(nt){return Promise.resolve(null)}}]);jx=Sx([Hs()],jx);var Tx=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Cx=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Nx=o((function t(){r(this,t),this._uid=Ps.GenAutoIncrementId(),this.viewBox=new _i,this.modelMatrix=new Mi(1,0,0,1,0,0)}),[{"key":"onChange","value":function(nt){this._onChangeCb=nt}},{"key":"configure","value":function(nt,at){at.env===this.type&&nt.setWindowHandler(this)}},{"key":"release","value":function(){this.releaseWindow()}},{"key":"isVisible","value":function(nt){return!0}},{"key":"onVisibleChange","value":function(nt){}},{"key":"getTopLeft","value":function(nt){return{"top":0,"left":0}}},{"key":"setViewBox","value":function(nt){this.viewBox.setValue(nt.x1,nt.y1,nt.x2,nt.y2)}},{"key":"getViewBox","value":function(){return this.viewBox}},{"key":"setViewBoxTransform","value":function(nt,at,lt,Rt,Bt,Lt){this.modelMatrix.setValue(nt,at,lt,Rt,Bt,Lt)}},{"key":"getViewBoxTransform","value":function(){return this.modelMatrix}}]);Nx=Tx([Hs(),Cx("design:paramtypes",[])],Nx);var Vx=o((function t(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;r(this,t),this.dir=nt,this.color=at,this.colorRgb=Jd.Get(at,qd.Color1),this.ambient=lt;var Rt=je(nt[0]*nt[0]+nt[1]*nt[1]+nt[2]*nt[2]);this.formatedDir=[nt[0]/Rt,nt[1]/Rt,nt[2]/Rt]}),[{"key":"computeColor","value":function(nt,at){var lt,Rt=this.formatedDir,Bt=we(Ae((nt[0]*Rt[0]+nt[1]*Rt[1]+nt[2]*Rt[2])*(1-this.ambient/2),0)+this.ambient,1);lt=Y(at)?Jd.Get(at,qd.Color1):at;var Lt=this.colorRgb;return"rgb(".concat(Lt[0]*lt[0]*Bt,", ").concat(Lt[1]*lt[1]*Bt,", ").concat(Lt[2]*lt[2]*Bt,")")}}]),Rx=function(){bx.registerPlugin("DirectionalLight",Vx)},Wx=o((function t(nt){r(this,t),this.params=nt}),[{"key":"params","get":function(){return Object.assign({},this._params)},"set":function(nt){this._params=Object.assign({},nt),this._projectionMatrixCached=this.forceGetProjectionMatrix(),this._viewMatrixCached=this.forceGetViewMatrix()}},{"key":"getViewMatrix","value":function(){return this._viewMatrixCached||(this._viewMatrixCached=Og.allocate()),this._viewMatrixCached}},{"key":"forceGetViewMatrix","value":function(){this._viewMatrixCached||(this._viewMatrixCached=Og.allocate());var nt=this.params.viewParams,at=nt.pos,lt=nt.center,Rt=nt.up;return function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe=at[0],se=at[1],ue=at[2],ce=Rt[0],he=Rt[1],de=Rt[2],fe=lt[0],pe=lt[1],ve=lt[2];Math.abs(oe-fe)<le&&Math.abs(se-pe)<le&&Math.abs(ue-ve)<le?fg(nt):(te=oe-fe,ne=se-pe,re=ue-ve,Bt=he*(re*=ae=1/Math.hypot(te,ne,re))-de*(ne*=ae),Lt=de*(te*=ae)-ce*re,Ht=ce*ne-he*te,(ae=Math.hypot(Bt,Lt,Ht))?(Bt*=ae=1/ae,Lt*=ae,Ht*=ae):(Bt=0,Lt=0,Ht=0),jt=ne*Ht-re*Lt,$t=re*Bt-te*Ht,Kt=te*Lt-ne*Bt,(ae=Math.hypot(jt,$t,Kt))?(jt*=ae=1/ae,$t*=ae,Kt*=ae):(jt=0,$t=0,Kt=0),nt[0]=Bt,nt[1]=jt,nt[2]=te,nt[3]=0,nt[4]=Lt,nt[5]=$t,nt[6]=ne,nt[7]=0,nt[8]=Ht,nt[9]=Kt,nt[10]=re,nt[11]=0,nt[12]=-(Bt*oe+Lt*se+Ht*ue),nt[13]=-(jt*oe+$t*se+Kt*ue),nt[14]=-(te*oe+ne*se+re*ue),nt[15]=1)}(this._viewMatrixCached,at,lt,Rt),this._vp||(this._vp=Og.allocate()),this._vp=yg(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._viewMatrixCached}},{"key":"getProjectionMatrix","value":function(){return this._projectionMatrixCached||(this._projectionMatrixCached=Og.allocate()),this._projectionMatrixCached}},{"key":"forceGetProjectionMatrix","value":function(){this._projectionMatrixCached||(this._projectionMatrixCached=Og.allocate());var nt=this._params,at=nt.left,lt=nt.top,Rt=nt.right,Bt=nt.bottom;return function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=1/(at-lt),$t=1/(Rt-Bt),Kt=1/(Lt-Ht);nt[0]=-2*jt,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=-2*$t,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=2*Kt,nt[11]=0,nt[12]=(at+lt)*jt,nt[13]=(Bt+Rt)*$t,nt[14]=(Ht+Lt)*Kt,nt[15]=1}(this._projectionMatrixCached,at,Rt,Bt,lt,0,-2e6),this._vp||(this._vp=Og.allocate()),this._vp=yg(this._vp,this.getProjectionMatrix(),this.getViewMatrix()),this._projectionMatrixCached}},{"key":"getField","value":function(){var nt=this._params,at=nt.fieldRatio,lt=void 0===at?.8:at,Rt=nt.fieldDepth,Bt=nt.left,Lt=nt.right;return(null!=Rt?Rt:Lt-Bt)*lt}},{"key":"getProjectionScale","value":function(nt){var at=this.getField();return at/(at+nt)}},{"key":"view","value":function(nt,at,lt){var Rt=[0,0,0];return mg(Rt,[nt,at,lt],this._viewMatrixCached),Rt}},{"key":"vp","value":function(nt,at,lt){var Rt=[0,0,0],Bt=this._params.viewParams.pos;mg(Rt,[nt,at,lt],this._viewMatrixCached),nt=Rt[0],at=Rt[1],lt=Rt[2];var Lt=this.getProjectionScale(lt);return{"x":nt*Lt+Bt[0],"y":at*Lt+Bt[1]}}}]),Ix=function(){bx.registerPlugin("OrthoCamera",Wx)},Lx=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Dx=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Ox=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Gx=o((function t(nt,at){r(this,t),this.pickItemInterceptorContributions=nt,this.pickServiceInterceptorContributions=at,this.type="default",this.global=oc.global}),[{"key":"_init","value":function(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((function(nt,at){return nt.order-at.order})),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((function(nt,at){return nt.order-at.order}))}},{"key":"pick","value":function(nt,at,lt){var Rt={"graphic":null,"group":null};lt.pickerService=this;var Bt=lt.bounds.width(),Lt=lt.bounds.height();if(!(new _i).setValue(0,0,Bt,Lt).containsPoint(at))return Rt;this.pickContext&&(this.pickContext.inuse=!0),lt.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);for(var Ht,jt=new Mi(1,0,0,1,0,0),$t=nt.length-1;$t>=0&&!(Rt=nt[$t].isContainer?this.pickGroup(nt[$t],at,jt,lt):this.pickItem(nt[$t],at,jt,lt)).graphic;$t--)Ht||(Ht=Rt.group);if(Rt.graphic||(Rt.group=Ht),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(var Kt=0;Kt<this.pickerServiceInterceptorContributions.length;Kt++){var te=this.pickerServiceInterceptorContributions[Kt];te.afterPickItem&&(Rt=te.afterPickItem(Rt,this,at,lt,{"parentMatrix":jt}))}return Rt}},{"key":"containsPoint","value":function(nt,at,lt){var Rt;return!!(null===(Rt=this.pickItem(nt,at,null,null!=lt?lt:{"pickContext":this.pickContext,"pickerService":this}))||void 0===Rt?void 0:Rt.graphic)}},{"key":"pickGroup","value":function(nt,at,lt,Rt){var Bt=this,Lt={"group":null,"graphic":null};if(!1===nt.attribute.visibleAll)return Lt;var Ht=Rt.pickContext,jt=Ht.modelMatrix;if(Ht.camera){var $t=nt.transMatrix,Kt=Og.allocate();if(gg(Kt,$t),jt){if(Kt){var te=Og.allocate();Ht.modelMatrix=yg(te,jt,Kt),Og.free(Kt)}}else gg(Kt,nt.globalTransMatrix),Ht.modelMatrix=Kt}if(this.InterceptorContributions.length)for(var ne=0;ne<this.InterceptorContributions.length;ne++){var re=this.InterceptorContributions[ne];if(re.beforePickItem){var ae=re.beforePickItem(nt,this,at,Rt,{"parentMatrix":lt});if(ae)return Ht.modelMatrix!==jt&&Og.free(Ht.modelMatrix),Ht.modelMatrix=jt,ae}}var oe=nt.transMatrix,se=Bg.allocateByObj(lt),le=new Ve(at.x,at.y);se.transformPoint(le,le);var ue=nt.AABBBounds.containsPoint(le);if(!ue&&!nt.stage.camera)return Lt;var ce=this.pickItem(nt,le.clone(),lt,Rt);ce&&ce.graphic&&(Lt.graphic=ce.graphic,Lt.params=ce.params);var he=!1!==nt.attribute.pickable&&ue;return se.multiply(oe.a,oe.b,oe.c,oe.d,oe.e,oe.f),!1===nt.attribute.childrenPickable||ce&&ce.graphic||Ib(nt,Wu.zIndex,(function(Ht){if(Ht.isContainer){var jt=new Ve(at.x,at.y),$t=yh(nt).group,Kt=nt.attribute,te=Kt.scrollX,ne=void 0===te?$t.scrollX:te,re=Kt.scrollY,ae=void 0===re?$t.scrollY:re;jt.x-=ne,jt.y-=ae,Lt=Bt.pickGroup(Ht,jt,se,Rt)}else{var oe=new Ve(at.x,at.y);se.transformPoint(oe,oe);var le=yh(nt).group,ue=nt.attribute,ce=ue.scrollX,he=void 0===ce?le.scrollX:ce,de=ue.scrollY,fe=void 0===de?le.scrollY:de;oe.x-=he,oe.y-=fe;var pe=Bt.pickItem(Ht,oe,lt,Rt);pe&&pe.graphic&&(Lt.graphic=pe.graphic,Lt.params=pe.params)}return!!Lt.graphic||!!Lt.group}),!0,!!Ht.camera),Ht.modelMatrix!==jt&&Og.free(Ht.modelMatrix),Ht.modelMatrix=jt,Lt.graphic||Lt.group||!he||nt.stage.camera||(Lt.group=nt),Bg.free(se),Lt}},{"key":"selectPicker","value":function(nt){return this.pickerMap.get(nt.numberType)||null}}]);Gx=Lx([Hs(),Ox(0,Gs(ll)),Ox(0,js(yb)),Ox(1,Gs(ll)),Ox(1,js(mb)),Dx("design:paramtypes",[Object,Object])],Gx);var Ux=!1,Yx=new Rs((function(nt){Ux||(Ux=!0,nt(Hm).toSelf().inSingletonScope(),nt(I_).to(Hm).inSingletonScope(),nt(L_).toService(I_),nt(sg).toService(Vy),rl(nt,sg))})),Xx=!1,$x=new Rs((function(nt){Xx||(Xx=!0,nt(o_).toSelf().inSingletonScope(),nt(N_).to(o_).inSingletonScope(),nt(L_).toService(N_),nt(um).toSelf(),nt(lm).toSelf(),nt(xg).toService(um),nt(xg).toService(lm),nt(xg).toService(Vy),rl(nt,xg))})),qx=!1,Kx=new Rs((function(nt){qx||(qx=!0,nt(Wm).toSelf().inSingletonScope(),nt(tx).toSelf().inSingletonScope(),nt(z_).to(Wm).inSingletonScope(),nt(L_).toService(z_))})),Zx=!1,Qx=new Rs((function(nt){Zx||(Zx=!0,nt(Qm).toSelf().inSingletonScope(),nt(O_).to(Qm).inSingletonScope(),nt(L_).toService(O_),nt(lg).toService(Vy),rl(nt,lg),nt(ex).toSelf().inSingletonScope())})),Jx=!1,tk=new Rs((function(nt){Jx||(Jx=!0,nt(c_).toSelf().inSingletonScope(),nt(G_).to(c_).inSingletonScope(),nt(L_).toService(G_),nt(kg).toService(Vy),rl(nt,kg))})),ek=!1,nk=new Rs((function(nt){ek||(ek=!0,nt(jm).toSelf().inSingletonScope(),nt(D_).to(jm).inSingletonScope(),nt(L_).toService(D_),nt(ug).toService(Vy),rl(nt,ug))})),rk=!1,ak=new Rs((function(nt){rk||(rk=!0,nt(X_).to(A_).inSingletonScope(),nt(L_).toService(X_),nt(Tg).toService(Vy),rl(nt,Tg))})),lk=!1,uk=new Rs((function(nt){lk||(lk=!0,nt(i_).toSelf().inSingletonScope(),nt(H_).to(i_).inSingletonScope(),nt(L_).toService(H_),nt(_g).toService(Vy),rl(nt,_g))})),ck=!1,hk=new Rs((function(nt){ck||(ck=!0,nt(j_).to(M_).inSingletonScope(),nt(L_).toService(j_),nt(bg).toService(Vy),rl(nt,bg))})),ik=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},dk=o((function t(){r(this,t),this.numberType=uv}),[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){Bt.drawContribution&&nt.getSubGraphic().forEach((function(nt){var $t=Bt.drawContribution.getRenderContribution(nt);$t&&$t.drawShape&&$t.drawShape(nt,at,lt,Rt,Bt,Lt,Ht,jt)}))}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=lt.context;if(Bt&&(Bt.highPerformanceSave(),lt.drawContribution)){var Lt=yh(nt),Ht=nt.getSubGraphic();Ht.length&&Ht.forEach((function(nt){lt.drawContribution.renderItem(nt,lt,{"theme":Lt})})),Bt.highPerformanceRestore()}}}]);dk=ik([Hs()],dk);var pk=!1,vk=new Rs((function(nt){pk||(pk=!0,nt(K_).to(dk).inSingletonScope(),nt(L_).toService(K_))})),ok=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},sk=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},gk=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e)).numberType=mv,nt.builtinContributions=[S_],nt.init(),nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt){var Lt=yh(nt).richtext,Ht=nt.attribute,jt=Ht.strokeOpacity,$t=void 0===jt?Lt.strokeOpacity:jt,Kt=Ht.opacity,te=void 0===Kt?Lt.opacity:Kt,ne=Ht.fillOpacity,re=void 0===ne?Lt.fillOpacity:ne,ae=Ht.visible,oe=void 0===ae?Lt.visible:ae;if(nt.valid&&oe){var se=Uv(te,re,!0),le=Uv(te,$t,!0);se&&(at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,Lt),at.translate(lt,Rt),this.beforeRenderStep(nt,at,lt,Rt,se,le,se,le,Lt,Bt),nt.getFrameCache().draw(at,this.drawIcon),this.afterRenderStep(nt,at,lt,Rt,se,le,se,le,Lt,Bt))}}},{"key":"drawIcon","value":function(nt,at,lt,Rt,Bt){var Lt,Ht=yh(nt).richtextIcon,jt=nt.attribute,$t=jt.width,Kt=void 0===$t?Ht.width:$t,te=jt.height,ne=void 0===te?Ht.height:te,re=jt.opacity,ae=void 0===re?Ht.opacity:re,oe=jt.image,se=jt.backgroundFill,le=void 0===se?Ht.backgroundFill:se,ue=jt.backgroundFillOpacity,ce=void 0===ue?Ht.backgroundFillOpacity:ue,he=jt.backgroundStroke,de=void 0===he?Ht.backgroundStroke:he,fe=jt.backgroundStrokeOpacity,pe=void 0===fe?Ht.backgroundStrokeOpacity:fe,ve=jt.backgroundRadius,Ae=void 0===ve?Ht.backgroundRadius:ve,we=jt.margin,Ce=nt.attribute,je=Ce.backgroundWidth,Ne=void 0===je?Kt:je,Ve=Ce.backgroundHeight,Ge=void 0===Ve?ne:Ve;if(we&&(lt+=nt._marginArray[3],Rt+=nt._marginArray[0]),nt._hovered){var ti=(Ne-Kt)/2,li=(Ge-ne)/2;0===Ae?(at.beginPath(),at.rect(lt-ti,Rt-li,Ne,Ge)):(at.beginPath(),$y(at,lt-ti,Rt-li,Ne,Ge,Ae,!0)),le&&(at.globalAlpha=ce,at.fillStyle=le,at.fill()),de&&(at.globalAlpha=pe,at.strokeStyle=de,at.stroke())}var hi=oe&&(null===(Lt=null==nt?void 0:nt.resources)||void 0===Lt?void 0:Lt.get(oe));hi&&"success"===hi.state&&(at.globalAlpha=ae,at.drawImage(hi.data,lt,Rt,Kt,ne))}},{"key":"draw","value":function(nt,at,lt){var Rt=yh(nt).richtext;this._draw(nt,Rt,!1,lt)}}])}(zm);gk=ok([Hs(),sk("design:paramtypes",[])],gk);var yk=!1,_k=new Rs((function(nt){yk||(yk=!0,nt($_).to(gk).inSingletonScope(),nt(L_).toService($_))})),bk=!1,xk=new Rs((function(nt){bk||(bk=!0,nt(Z_).to(P_).inSingletonScope(),nt(L_).toService(Z_),nt(hg).toService(Vy),rl(nt,hg))})),Sk=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"stroke","value":function(nt,at,lt,Rt,Bt){var Lt=Rt.vertices;Rt.edges.forEach((function(Rt){var Ht=Lt[Rt[0]],jt={"x":nt+Ht[0],"y":at+Ht[1],"z":lt+Ht[2]},$t=Lt[Rt[1]],Kt={"x":nt+$t[0],"y":at+$t[1],"z":lt+$t[2]};Bt.beginPath(),Bt.moveTo(jt.x,jt.y,jt.z),Bt.lineTo(Kt.x,Kt.y,Kt.z),Bt.stroke()}))}},{"key":"fill","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te){var ne=Jd.Get(Lt,qd.Color255),re=Rt.vertices,ae=re.map((function(nt){return Ht.view(nt[0],nt[1],nt[2])[2]})),oe=[];Rt.polygons.forEach((function(nt,at){if(!Bt||Bt[at]){oe.push({"faceIdx":at,"polygon":nt});var lt=nt.polygon,Rt=ae[lt[0]],Lt=ae[lt[1]],Ht=ae[lt[2]],jt=ae[lt[3]];nt.ave_z=Rt+Lt+Ht+jt}})),oe.sort((function(nt,at){return at.polygon.ave_z-nt.polygon.ave_z})),oe.forEach((function(Rt){var Bt=Rt.polygon,ae=Bt.polygon,oe=Bt.normal,se=re[ae[0]],le=re[ae[1]],ue=re[ae[2]],ce=re[ae[3]],he={"x":nt+se[0],"y":at+se[1],"z":lt+se[2]},de={"x":nt+le[0],"y":at+le[1],"z":lt+le[2]},fe={"x":nt+ue[0],"y":at+ue[1],"z":lt+ue[2]},pe={"x":nt+ce[0],"y":at+ce[1],"z":lt+ce[2]};Ht.beginPath(),Ht.moveTo(he.x,he.y,he.z),Ht.lineTo(de.x,de.y,de.z),Ht.lineTo(fe.x,fe.y,fe.z),Ht.lineTo(pe.x,pe.y,pe.z),Ht.closePath(),te?te(Ht,$t&&$t.attribute,Kt):(Ht.fillStyle=jt?jt.computeColor(oe,ne):Lt,Ht.fill())}))}}])}(zm),fk=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Ak=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="rect3d",nt.numberType=yv,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt=yh(nt,null==Lt?void 0:Lt.theme).rect,te=nt.attribute,ne=te.fill,re=void 0===ne?Kt.fill:ne,ae=te.stroke,oe=void 0===ae?Kt.stroke:ae,se=te.x1,le=te.y1,ue=te.x,ce=te.y,he=te.opacity,de=void 0===he?Kt.opacity:he,fe=te.fillOpacity,pe=void 0===fe?Kt.fillOpacity:fe,ve=te.lineWidth,Ae=void 0===ve?Kt.lineWidth:ve,we=te.strokeOpacity,Ce=void 0===we?Kt.strokeOpacity:we,je=te.visible,Ne=void 0===je?Kt.visible:je,Ve=nt.attribute,Ge=Ve.width,ti=Ve.height;Ge=(null!=Ge?Ge:se-ue)||0,ti=(null!=ti?ti:le-ce)||0;var li=null!==($t=this.z)&&void 0!==$t?$t:0,hi=Yv(de,pe,Ge,ti,re),di=Kv(de,Ce,Ge,ti),fi=Gv(re),pi=Wv(oe,Ae);if(nt.valid&&Ne&&(fi||pi)&&(hi||di||Ht||jt)){var vi=(Bt.stage||{}).light,mi=nt.findFace();if(!1!==re){at.setCommonStyle(nt,nt.attribute,lt,Rt,Kt);var _i=re;"string"!=typeof _i&&(_i="black"),this.fill(lt,Rt,li,mi,null,_i,at,vi,null,null,Ht)}!1!==oe&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,Kt),this.stroke(lt,Rt,li,mi,at))}}},{"key":"draw","value":function(nt,at,lt){var Rt=yh(nt).rect;this._draw(nt,Rt,!1,lt)}}])}(Sk);Ak=fk([Hs()],Ak);var wk=!1,Ck=new Rs((function(nt){wk||(wk=!0,nt(V_).to(Ak).inSingletonScope(),nt(L_).toService(V_))})),mk=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Mk=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).numberType=ov,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt=yh(nt,null==Lt?void 0:Lt.theme).arc,te=nt.attribute.fill,ne=void 0===te?Kt.fill:te,re=this.valid(nt,Kt,Ht,jt);if(re){var ae=re.fVisible,oe=re.sVisible,se=re.doFill,ue=re.doStroke,ce=null!==($t=this.z)&&void 0!==$t?$t:0,he=nt.attribute,pe=he.outerPadding,Ae=void 0===pe?Kt.outerPadding:pe,we=he.innerPadding,je=void 0===we?Kt.innerPadding:we,Ne=he.height,Ve=void 0===Ne?10:Ne,Ge=nt.attribute,ti=Ge.outerRadius,li=void 0===ti?Kt.outerRadius:ti,hi=Ge.innerRadius,di=void 0===hi?Kt.innerRadius:hi;li+=Ae,di-=je;var fi=Jd.Get(ne,qd.Color255),pi=(Bt.stage||{}).light,vi=Bt.hack_pieFace,mi={"top":ce,"bottom":ce+Ve},_i={"top":[0,1,0],"bottom":[0,-1,0],"outside":[1,0,-1],"inside":[1,0,-1]};"bottom"===vi||"top"===vi?(at.beginPath(),function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=nt.getParsedAngle(),$t=jt.startAngle,Kt=jt.endAngle,te=fe(Kt-$t),ne=Kt>$t;if(Lt<Ht){var re=Lt;Lt=Ht,Ht=re}if(Lt<=le)at.moveTo(lt,Rt,Bt);else if(te>=de-le)at.moveTo(lt+Lt*ve($t),Rt+Lt*Ce($t),Bt),at.arc(lt,Rt,Lt,$t,Kt,!ne,Bt),Ht>le&&(at.moveTo(lt+Ht*ve(Kt),Rt+Ht*Ce(Kt),Bt),at.arc(lt,Rt,Ht,Kt,$t,ne,Bt));else{var ae=nt.getParsePadAngle($t,Kt),oe=ae.outerDeltaAngle,se=ae.innerDeltaAngle,ue=ae.outerStartAngle,ce=ae.outerEndAngle,he=ae.innerEndAngle,pe=ae.innerStartAngle,Ae=Lt*ve(ue),we=Lt*Ce(ue),je=Ht*ve(he),Ne=Ht*Ce(he);oe<.001||(at.moveTo(lt+Ae,Rt+we,Bt),at.arc(lt,Rt,Lt,ue,ce,!ne,Bt)),!(Ht>le)||se<.001?at.lineTo(lt+je,Rt+Ne,Bt):(at.lineTo(lt+je,Rt+Ne,Bt),at.arc(lt,Rt,Ht,he,pe,ne,Bt))}at.closePath()}(nt,at,lt,Rt,mi[vi],li,di),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,Kt),se&&(Ht?Ht(at,nt.attribute,Kt):ae&&(at.setCommonStyle(nt,nt.attribute,lt,Rt,Kt),at.fillStyle=pi?pi.computeColor(_i[vi],fi):ne,at.fill())),ue&&(jt?jt(at,nt.attribute,Kt):oe&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,Kt),at.stroke()))):"outside"!==vi&&"inside"!==vi||("inside"===vi&&(at.save(),at.beginPath(),at.arc(lt,Rt,di,0,de,!0,mi.top),at.clip()),at.beginPath(),function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=nt.getParsedAngle(),Kt=$t.startAngle,te=$t.endAngle,ne=fe(te-Kt),re=te>Kt;if(Ht<=le)at.moveTo(lt,Rt,Bt);else if(ne>=de-le)at.moveTo(lt+Ht*ve(Kt),Rt+Ht*Ce(Kt),Bt),at.arc(lt,Rt,Ht,Kt,te,!re,Bt),at.lineTo(lt+Ht*ve(te),Rt+Ht*Ce(te),Lt),at.arc(lt,Rt,Ht,te,Kt,re,Lt);else{var ae=jt(Kt,te),oe=ae.innerouterDeltaAngle,se=ae.innerouterStartAngle,ue=ae.innerouterEndAngle,ce=Ht*ve(se),he=Ht*Ce(se),pe=Ht*ve(ue),Ae=Ht*Ce(ue);oe<.001||(at.moveTo(lt+ce,Rt+he,Bt),at.arc(lt,Rt,Ht,se,ue,!re,Bt),at.lineTo(lt+pe,Rt+Ae,Lt),at.arc(lt,Rt,Ht,ue,se,re,Lt))}at.closePath()}(nt,at,lt,Rt,mi.top,mi.bottom,"outside"===vi?li:di,(function(at,lt){var Rt=nt.getParsePadAngle(at,lt),Bt=Rt.outerDeltaAngle,Lt=Rt.innerDeltaAngle,Ht=Rt.outerStartAngle,jt=Rt.outerEndAngle,$t=Rt.innerEndAngle,Kt=Rt.innerStartAngle;return"outside"===vi?{"innerouterDeltaAngle":Bt,"innerouterEndAngle":jt,"innerouterStartAngle":Ht}:{"innerouterDeltaAngle":Lt,"innerouterEndAngle":$t,"innerouterStartAngle":Kt}})),at.setShadowBlendStyle&&at.setShadowBlendStyle(nt,nt.attribute,Kt),se&&(Ht?Ht(at,nt.attribute,Kt):ae&&(at.setCommonStyle(nt,nt.attribute,lt,Rt,Kt),at.fillStyle=pi?pi.computeColor(_i[vi],fi):ne,at.fill())),ue&&(jt?jt(at,nt.attribute,Kt):oe&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,Kt),at.stroke())),"inside"===vi&&at.restore())}}},{"key":"draw","value":function(nt,at,lt,Rt){var Bt=yh(nt,null==Rt?void 0:Rt.theme).arc;this._draw(nt,Bt,!1,lt,Rt)}}])}(zm);Mk=mk([Hs()],Mk);var Pk=!1,Ok=new Rs((function(nt){Pk||(Pk=!0,nt(B_).to(Mk).inSingletonScope(),nt(L_).toService(B_))})),kk=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Dk=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="pyramid3d",nt.numberType=vv,nt}return h(e,nt),o(e,[{"key":"drawShape","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t,Kt=yh(nt,null==Lt?void 0:Lt.theme).polygon,te=nt.attribute,ne=te.fill,re=void 0===ne?Kt.fill:ne,ae=te.stroke,oe=void 0===ae?Kt.stroke:ae,se=te.face,le=void 0===se?[!0,!0,!0,!0,!0,!0]:se,ue=null!==($t=this.z)&&void 0!==$t?$t:0;if(this.valid(nt,Kt,Ht,jt)){var ce=(Bt.stage||{}).light,he=nt.findFace();if(!1!==re){at.setCommonStyle(nt,nt.attribute,lt,Rt,Kt);var de=re;"string"!=typeof de&&(de="black"),this.fill(lt,Rt,ue,he,le,de,at,ce,nt,Kt,Ht)}!1!==oe&&(at.setStrokeStyle(nt,nt.attribute,lt,Rt,Kt),this.stroke(lt,Rt,ue,he,at))}}},{"key":"draw","value":function(nt,at,lt){var Rt=yh(nt).polygon;this._draw(nt,Rt,!1,lt)}}])}(Sk);Dk=kk([Hs()],Dk);var Lk=!1,jk=new Rs((function(nt){Lk||(Lk=!0,nt(q_).to(Dk).inSingletonScope(),nt(L_).toService(q_))})),nS=o((function t(){var nt=this;r(this,t),this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0,this.onWheel=function(at){try{var lt=new at.constructor(at.type,at);nt.pluginService.stage.window.getContext().getCanvas().nativeCanvas.dispatchEvent(lt)}catch(at){return}}}),[{"key":"activate","value":function(nt){var at=this;this.pluginService=nt,nt.stage.hooks.afterRender.tap(this.key,(function(lt){lt&&lt===at.pluginService.stage&&at.drawHTML(m(nt.stage.getChildren()))}))}},{"key":"deactivate","value":function(nt){var at=this;nt.stage.hooks.afterRender.taps=nt.stage.hooks.afterRender.taps.filter((function(nt){return nt.name!==at.key})),oc.graphicService.hooks.onRemove.unTap(this.key),oc.graphicService.hooks.onRelease.unTap(this.key),this.release()}},{"key":"getWrapContainer","value":function(nt,at,lt){var Rt;return Rt=at?"string"==typeof at?oc.global.getElementById(at):at:nt.window.getContainer(),{"wrapContainer":oc.global.createDom(Object.assign({"tagName":"div","parent":Rt},lt)),"nativeContainer":Rt}}},{"key":"parseDefaultStyleFromGraphic","value":function(nt){return function(nt){var at={},i=function(nt){return/^\d+(\.\d+)?$/.test("".concat(nt))?"".concat(nt,"px"):"".concat(nt)};return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach((function(lt){nt[lt]&&(at[Pi(lt)]=nt[lt])})),["fontSize","lineHeight"].forEach((function(lt){var Rt=Pi(lt);j(nt[lt])||(at[Rt]=i(nt[lt]))})),N(nt.maxLineWidth)&&(at["max-width"]=i(nt.maxLineWidth)),nt.underline?at["text-decoration"]="underline":nt.lineThrough&&(at["text-decoration"]="line-through"),nt.fill&&Y(nt.fill)&&(at.color=nt.fill),at}("text"===nt.type&&nt.attribute?nt.attribute:yh(nt).text)}},{"key":"getTransformOfText","value":function(nt){var at=yh(nt).text,lt=nt.attribute,Rt=lt.textAlign,Bt=void 0===Rt?at.textAlign:Rt,Lt=lt.textBaseline,Ht=void 0===Lt?at.textBaseline:Lt,jt=nt.globalTransMatrix.toTransformAttrs(),$t=jt.rotateDeg,Kt=jt.scaleX,te=jt.scaleY,ne={"left":"0","start":"0","end":"-100%","center":"-50%","right":"-100%","top":"0","middle":"-50%","bottom":"-100%","alphabetic":"-79%"},re={"left":"0","start":"0","end":"100%","center":"50%","right":"100%","top":"0","middle":"50%","bottom":"100%","alphabetic":"79%"};return{"textAlign":Bt,"transform":"translate(".concat(ne[Bt],",").concat(ne[Ht],") rotate(").concat($t,"deg) scaleX(").concat(Kt,") scaleY(").concat(te,")"),"transformOrigin":"".concat(re[Bt]," ").concat(re[Ht])}}},{"key":"updateStyleOfWrapContainer","value":function(nt,at,lt,Rt,Bt){var Lt=this,Ht=Bt.pointerEvents,jt=Bt.penetrateEventList,$t=void 0===jt?[]:jt,Kt=this.parseDefaultStyleFromGraphic(nt);Kt.display=!1!==nt.attribute.visible?"block":"none",Kt.pointerEvents=!0===Ht?"all":Ht||"none","none"!==Kt.pointerEvents&&(this.removeWrapContainerEventListener(lt),$t.forEach((function(nt){"wheel"===nt&&lt.addEventListener("wheel",Lt.onWheel)}))),lt.style.position||(lt.style.position="absolute",Rt.style.position="relative");var te=0,ne=0,re=nt.globalAABBBounds,ae=Bt.anchorType;if(j(ae)&&(ae="text"===nt.type?"position":"boundsLeftTop"),"boundsLeftTop"===ae&&(ae="top-left"),"position"===ae||re.empty()){var oe=nt.globalTransMatrix;te=oe.e,ne=oe.f}else{var se=ui(re,ae);te=se.x,ne=se.y}var le=oc.global.getElementTopLeft(Rt,!1),ue=at.window.getTopLeft(!1),ce=at.viewBox,he=te+ue.left-le.left+ce.x1,de=ne+ue.top-le.top+ce.y1;if(Kt.left="".concat(he,"px"),Kt.top="".concat(de,"px"),"text"===nt.type&&"position"===ae&&(Kt=Object.assign(Object.assign({},Kt),this.getTransformOfText(nt))),H(Bt.style)){var fe=Bt.style({"top":de,"left":he,"width":re.width(),"height":re.height()},nt,lt);fe&&(Kt=Object.assign(Object.assign({},Kt),fe))}else V(Bt.style)?Kt=Object.assign(Object.assign({},Kt),Bt.style):Y(Bt.style)&&Bt.style&&(Kt=Object.assign(Object.assign({},Kt),function(){var nt={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(";").forEach((function(at){if(at){var lt=at.split(":");if(2===lt.length){var Rt=lt[0].trim(),Bt=lt[1].trim();Rt&&Bt&&(nt[Rt]=Bt)}}})),nt}(Bt.style)));oc.global.updateDom(lt,{"width":Bt.width,"height":Bt.height,"style":Kt})}},{"key":"clearCacheContainer","value":function(){var nt=this;this.htmlMap&&Object.keys(this.htmlMap).forEach((function(at){nt.htmlMap[at]&&nt.htmlMap[at].renderId!==nt.renderId&&nt.removeElement(at)})),this.renderId+=1}},{"key":"drawHTML","value":function(nt){var at=this;"browser"===oc.global.env&&(nt.sort((function(nt,at){var lt,Rt;return(null!==(lt=nt.attribute.zIndex)&&void 0!==lt?lt:Wu.zIndex)-(null!==(Rt=at.attribute.zIndex)&&void 0!==Rt?Rt:Wu.zIndex)})).forEach((function(nt){at.renderGroupHTML(nt)})),this.clearCacheContainer())}},{"key":"renderGroupHTML","value":function(nt){var at=this;this.renderGraphicHTML(nt),nt.forEachChildren((function(nt){nt.isContainer?at.renderGroupHTML(nt):at.renderGraphicHTML(nt)}))}},{"key":"removeElement","value":function(nt){if(this.htmlMap&&this.htmlMap[nt]){var at=this.htmlMap[nt].wrapContainer;at&&oc.global.removeDom(at),this.htmlMap[nt]=null}}},{"key":"removeWrapContainerEventListener","value":function(nt){nt.removeEventListener("wheel",this.onWheel)}},{"key":"renderGraphicHTML","value":function(nt){var at,lt=nt.attribute.html;if(lt){var Rt=nt.stage;if(Rt){var Bt=lt.dom,Lt=lt.container;if(Bt){var Ht=j(lt.id)?"".concat(null!==(at=nt.id)&&void 0!==at?at:nt._uid,"_react"):lt.id;if(this.htmlMap&&this.htmlMap[Ht]&&Lt&&Lt!==this.htmlMap[Ht].container&&this.removeElement(Ht),this.htmlMap&&this.htmlMap[Ht])"string"==typeof Bt?this.htmlMap[Ht].wrapContainer.innerHTML=Bt:Bt!==this.htmlMap[Ht].wrapContainer.firstChild&&(this.htmlMap[Ht].wrapContainer.removeChild(this.htmlMap[Ht].wrapContainer.firstChild),this.htmlMap[Ht].wrapContainer.appendChild(Bt));else{var jt=this.getWrapContainer(Rt,Lt),$t=jt.wrapContainer,Kt=jt.nativeContainer;$t&&("string"==typeof Bt?$t.innerHTML=Bt:$t.appendChild(Bt),this.htmlMap||(this.htmlMap={}),this.htmlMap[Ht]={"wrapContainer":$t,"nativeContainer":Kt,"container":Lt,"renderId":this.renderId})}if(this.htmlMap&&this.htmlMap[Ht]){var te=this.htmlMap[Ht],ne=te.wrapContainer,re=te.nativeContainer;this.updateStyleOfWrapContainer(nt,Rt,ne,re,lt),this.htmlMap[Ht].renderId=this.renderId}}}}}},{"key":"release","value":function(){"browser"===oc.global.env&&this.removeAllDom(this.pluginService.stage.defaultLayer)}},{"key":"removeAllDom","value":function(nt){var at=this;this.htmlMap&&(Object.keys(this.htmlMap).forEach((function(nt){at.removeElement(nt)})),this.htmlMap=null)}}]),Tk=function(){bx.registerPlugin("HtmlAttributePlugin",nS)},fS=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="ReactAttributePlugin",nt.activeEvent="onRegister",nt._uid=Ps.GenAutoIncrementId(),nt.key=nt.name+nt._uid,nt.htmlMap={},nt}return h(e,nt),o(e,[{"key":"removeElement","value":function(nt){if(this.htmlMap&&this.htmlMap[nt]){var at=this.htmlMap[nt],lt=at.root,Rt=at.wrapContainer,Bt=at.unmount;lt?oc.global.getRequestAnimationFrame()((function(){lt.unmount()})):Bt&&Bt(),Rt&&oc.global.removeDom(Rt),this.htmlMap[nt]=null}}},{"key":"renderGraphicHTML","value":function(nt){var at,lt=nt.attribute.react;if(lt){var Rt=nt.stage;if(Rt){var Bt=Rt.params.ReactDOM,Lt=lt.element,Ht=lt.container;if(Lt&&Bt&&(Bt.createRoot||Bt.render)){var jt=j(lt.id)?"".concat(null!==(at=nt.id)&&void 0!==at?at:nt._uid,"_react"):lt.id;if(this.htmlMap&&this.htmlMap[jt]&&Ht&&Ht!==this.htmlMap[jt].container&&this.removeElement(jt),this.htmlMap&&this.htmlMap[jt])Bt.createRoot?this.htmlMap[jt].root.render(Lt):Bt.render(Lt,this.htmlMap[jt].wrapContainer);else{var $t=this.getWrapContainer(Rt,Ht),Kt=$t.wrapContainer,te=$t.nativeContainer;if(Kt)if(this.htmlMap||(this.htmlMap={}),Bt.createRoot){var ne=Bt.createRoot(Kt);ne.render(Lt),this.htmlMap[jt]={"root":ne,"wrapContainer":Kt,"nativeContainer":te,"container":Ht,"renderId":this.renderId}}else Bt.render(Lt,Kt),this.htmlMap[jt]={"wrapContainer":Kt,"nativeContainer":te,"container":Ht,"renderId":this.renderId,"unmount":function(){Bt.unmountComponentAtNode(Kt)}}}if(this.htmlMap&&this.htmlMap[jt]){var re=this.htmlMap[jt],ae=re.wrapContainer,oe=re.nativeContainer;this.updateStyleOfWrapContainer(nt,Rt,ae,oe,lt),this.htmlMap[jt].renderId=this.renderId}}}}}}])}(nS),Ek=function(){bx.registerPlugin("ReactAttributePlugin",fS)},pS=o((function t(){var nt=this;r(this,t),this.name="ViewTransform3dPlugin",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid,this.onMouseDown=function(at){nt.option3d||(nt.option3d=nt.pluginService.stage.option3d),nt.option3d&&(nt.mousedown=!0,nt.pageX=at.page.x,nt.pageY=at.page.y)},this.onMouseUp=function(at){nt.option3d||(nt.option3d=nt.pluginService.stage.option3d),nt.option3d&&(nt.mousedown=!1)},this.onMouseMove=function(at){var lt,Rt,Bt=nt.pluginService.stage;if(nt.option3d||(nt.option3d=Bt.option3d),nt.option3d&&nt.mousedown)if(nt.pageX&&nt.pageY){var Lt=at.page.x-nt.pageX,Ht=at.page.y-nt.pageY;nt.pageX=at.page.x,nt.pageY=at.page.y;var jt=Lt/100,$t=Ht/100;nt.option3d.alpha=(null!==(lt=nt.option3d.alpha)&&void 0!==lt?lt:0)+jt,nt.option3d.beta=(null!==(Rt=nt.option3d.beta)&&void 0!==Rt?Rt:0)+$t,Bt.set3dOptions(nt.option3d),Bt.renderNextFrame()}else nt.pageX=at.page.x,nt.pageY=at.page.y}}),[{"key":"activate","value":function(nt){this.pluginService=nt;var at=nt.stage;this.option3d=at.option3d,at.addEventListener("mousedown",this.onMouseDown),at.addEventListener("mouseup",this.onMouseUp),at.addEventListener("mousemove",this.onMouseMove)}},{"key":"deactivate","value":function(nt){var at=nt.stage;at.removeEventListener("mousedown",this.onMouseDown),at.removeEventListener("mouseup",this.onMouseUp),at.removeEventListener("mousemove",this.onMouseMove)}}]);function Rk(nt){for(var at=[],lt=0;lt<nt.length;lt++){var Rt=nt[lt];0!==lt&&Rt[0]===at[at.length-1]||at.push(Rt[0]),at.push(Rt[1])}return at}var Bk=function(nt,at){return H(vS.warnHandler)&&vS.warnHandler.call(null,nt,at),at?te.getInstance().warn("[VChart warn]: ".concat(nt),at):te.getInstance().warn("[VChart warn]: ".concat(nt))},Ik=function(nt,at,lt){if(!H(vS.errorHandler))throw new Error(nt);vS.errorHandler.call(null,nt,at)},vS={"silent":!1,"warnHandler":!1,"errorHandler":!1},gS=cx(),yS=gS&&globalThis?globalThis.document:void 0;function Fk(nt){return("desktop-browser"===nt||"mobile-browser"===nt)&&gS}function zk(nt){return Hk(nt)||"mobile-browser"===nt}function Hk(nt){return nt.includes("miniApp")||"lynx"===nt||"wx"===nt||"harmony"===nt}var mS=0;function Nk(){return mS>=9999999&&(mS=0),mS++}function Vk(nt){return null!=nt&&""!==nt&&(!!Z(nt)||+nt==+nt)}function Gk(nt){return!(!nt||0===nt.length)&&!j(nt[0])&&!j(nt[0].dataId)&&X(nt[0].fields)}var Wk=function(nt){return function(at){return st(at,nt)}},Uk=function(nt){return nt},Yk=function(nt){return 0},Xk=function(nt){te.getInstance().error(nt)},Kk=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(H(nt))return nt;var Rt=function(nt){var at,lt,Rt,Bt=[],Lt=nt.length,Ht=null,jt=0,$t="";nt+="";var u=function(){Bt.push($t+nt.substring(at,lt)),$t="",at=lt+1};for(at=0,lt=0;lt<Lt;lt+=1)if("\\"===(Rt=nt[lt]))$t+=nt.substring(at,lt),$t+=nt.substring(++lt,++lt),at=lt;else if(Rt===Ht)u(),Ht=null,jt=-1;else{if(Ht)continue;at===jt&&'"'===Rt||at===jt&&"'"===Rt?(at=lt+1,Ht=Rt):"."!==Rt||jt?"["===Rt?(lt>at&&u(),jt=at=lt+1):"]"===Rt&&(jt||Xk("Access path missing open bracket: "+nt),jt>0&&u(),jt=0,at=lt+1):lt>at?u():at=lt+1}return jt&&Xk("Access path missing closing bracket: "+nt),Ht&&Xk("Access path missing closing quote: "+nt),lt>at&&(lt+=1,u()),Bt}(nt),Bt=1===Rt.length?Rt[0]:nt;return function(nt,at,lt){return nt.fields=at||[],nt.fname=lt,nt}((lt&&lt.get||Wk)(Rt),[Bt],at||Bt)},qk=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(X(nt)){var Rt=nt.map((function(nt){return Kk(nt,at,lt)}));return function(nt){return Rt.map((function(at){return at(nt)}))}}return Kk(nt,at,lt)},Zk=function(nt,at){var lt,Rt,Bt=H(at)?at:function(nt){return nt};if(nt&&nt.length){for(var Lt=nt.length,Ht=0;Ht<Lt;Ht+=1){var jt=Bt(nt[Ht]);j(jt)||!Z(jt=+jt)||Number.isNaN(jt)||(j(lt)?(lt=jt,Rt=jt):(lt=Math.min(lt,jt),Rt=Math.max(Rt,jt)))}return[lt,Rt]}return[lt,Rt]},Jk=function(nt,at){return j(nt)?at:Y(nt)?at*parseFloat(nt)/100:nt};function Qk(nt,at,lt,Rt){var Bt,Lt,Ht=-1;nt.forEach((function(nt){Bt=at(nt),Lt=lt(nt),!j(Bt)&&(Bt=+Bt)>=Bt&&!j(Lt)&&(Lt=+Lt)>=Lt&&Rt(Bt,Lt,++Ht)}))}function $k(nt,at,lt,Rt,Bt){var Lt=0,Ht=0;return Qk(nt,at,lt,(function(nt,at){var lt=at-Bt(nt),jt=at-Rt;Lt+=lt*lt,Ht+=jt*jt})),1-Lt/Ht}function tS(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(nt){return nt.x},lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(nt){return nt.y},Rt=0,Bt=0,Lt=0,Ht=0,jt=0;Qk(nt,at,lt,(function(nt,at){++jt,Rt+=(nt-Rt)/jt,Bt+=(at-Bt)/jt,Lt+=(nt*at-Lt)/jt,Ht+=(nt*nt-Ht)/jt}));var $t,Kt,te,ne,re,ae=(te=Lt,ne=Ht-($t=Rt)*$t,[(Kt=Bt)-(re=Math.abs(ne)<1e-24?0:(te-$t*Kt)/ne)*$t,re]),f=function(nt){return ae[0]+ae[1]*nt};return{"coef":ae,"predict":f,"rSquared":$k(nt,at,lt,Bt,f)}}function eS(nt){return"horizontal"===nt}function iS(nt){return"vertical"===nt}var _S={"triangleForward":function(){return function(nt){var at=nt%(2*Math.PI/3);return 1/(Math.cos(at)+Math.sqrt(3)*Math.sin(at))}},"triangleUpright":rS,"triangle":rS,"diamond":function(){return function(nt){var at=nt%(2*Math.PI/4);return 1/(Math.cos(at)+Math.sin(at))}},"square":function(){return function(nt){return Math.min(1/Math.abs(Math.cos(nt)),1/Math.abs(Math.sin(nt)))}},"star":function(){return function(nt){var at=(nt+.955)%(2*Math.PI/10);return(nt+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-at)+3.07768*Math.sin(2*Math.PI/10-at)):1/(Math.cos(at)+3.07768*Math.sin(at))}},"cardioid":function(){return function(nt){return 1+Math.sin(nt)}},"circle":function(){return function(){return 1}},"pentagon":function(){return function(nt){var at=(nt+.955)%(2*Math.PI/5);return 1/(Math.cos(at)+.726543*Math.sin(at))}}};function rS(){return function(nt){var at=(nt+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(at)+Math.sqrt(3)*Math.sin(at))}}function aS(nt,at){var lt=at[0],Rt=at[1],Bt=1,Lt=[at[0]>>1,at[1]>>1];switch(nt){case"cardioid":Lt[1]=~~(Rt/2.7*.4),Bt=Math.floor(Math.min(lt/2.3,Rt/2.6));break;case"triangleForward":Bt=Rt/Math.sqrt(.75)>lt?Math.floor(lt/2):Math.floor(Rt/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":Lt[1]=~~(Rt/1.5),Bt=Math.floor(Math.min(Rt/1.5,lt/2));break;case"circle":case"diamond":case"square":case"star":case"pentagon":Bt=Math.floor(Math.min(lt/2,Rt/2));break;default:Bt=Math.floor(Math.max(lt/2,Rt/2))}return{"maxRadius":Bt,"center":Lt}}var oS=function(nt){return _S[nt]?_S[nt]():_S.circle()},sS=function(nt){if(!nt||"#fff"===nt)return function(nt,at,lt){var Rt=nt.width;return 0===nt.data[at*Rt*4+4*lt+3]||255===nt.data[at*Rt*4+4*lt+0]&&255===nt.data[at*Rt*4+4*lt+1]&&255===nt.data[at*Rt*4+4*lt+2]};var at=ax.createCanvas({"width":1,"height":1}).getContext("2d",{"willReadFrequently":!0});at.fillStyle=nt,at.fillRect(0,0,1,1);var lt=at.getImageData(0,0,1,1).data;return function(nt,at,Rt){var Bt=nt.width;return[0,1,2,3].every((function(Lt){return nt.data[4*(at*Bt+Rt)+Lt]===lt[Lt]}))}},lS=function(nt,at,lt,Rt){var Bt=nt.backgroundColor,Lt=void 0===Bt?"#fff":Bt,Ht=Rt||ax.createCanvas({"width":at,"height":lt,"dpr":1}),jt=Ht.getContext("2d",{"willReadFrequently":!0});if(Rt){var $t=Rt.width,Kt=Rt.height;jt.clearRect(0,0,$t,Kt),Rt.style.width="".concat(at,"px"),Rt.style.height="".concat(lt,"px"),Rt.width=at,Rt.height=lt}return jt.fillStyle=Lt,jt.fillRect(0,0,Ht.width,Ht.height),"text"===nt.type?uS(nt,Ht.width,Ht.height,jt):"geometric"===nt.type&&dS(nt,Ht.width,Ht.height,jt),Ht},uS=function(nt,at,lt,Rt){var Bt=nt.fontFamily,Lt=void 0===Bt?"sans-serif":Bt,Ht=nt.fontWeight,jt=void 0===Ht?"normal":Ht,$t=nt.fontStyle,Kt=void 0===$t?"normal":$t,te=nt.fontVariant,ne=void 0===te?"normal":te,re=nt.fill,ae=nt.text,oe=nt.hollow,se=12;Rt.font="".concat(Kt," ").concat(ne," ").concat(jt," ").concat(se,"px ").concat(Lt),Rt.textAlign="center",Rt.textBaseline="middle",Rt.fillStyle=null!=re?re:"black";var le=Rt.measureText(ae),ue="normal"!==Kt?1.1:1,ce=N(le.actualBoundingBoxRight)&&N(le.actualBoundingBoxLeft)?Math.ceil(ue*(Math.abs(le.actualBoundingBoxRight)+Math.abs(le.actualBoundingBoxLeft))):0,he=Math.max(Math.ceil(le.width),ce,se);if(oe&&(Rt.globalCompositeOperation="xor"),he>at){var de=Math.min(at/he,lt/se);Rt.fillText(ae,at/2,lt/2),Rt.scale(de,de)}else se=Math.floor(se*at/he),se=Math.min(se,lt),Rt.font="".concat(Kt," ").concat(ne," ").concat(jt," ").concat(se,"px ").concat(Lt),Rt.fillText(ae,Math.floor(at/2),Math.floor(lt/2))},cS=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3?arguments[3]:void 0,Bt=2*Math.PI/Rt;return new Array(Rt).fill(0).map((function(Rt,Lt){return Pe(nt,at,lt+Lt*Bt)}))},hS=function(nt,at){nt.beginPath(),at.forEach((function(at,lt){0===lt?nt.moveTo(at.x,at.y):nt.lineTo(at.x,at.y)})),nt.closePath(),nt.fill()},dS=function(nt,at,lt,Rt){var Bt=nt.fill,Lt=nt.hollow,Ht=aS(nt.shape,[at,lt]),jt=Ht.center,$t=Ht.maxRadius;Rt.fillStyle=null!=Bt?Bt:"black",Lt&&(Rt.globalCompositeOperation="xor");var Kt=jt[0],te=jt[1];if("cardioid"===nt.shape)!function(nt,at){var lt;nt.beginPath(),at.forEach((function(at,Rt){0===Rt?nt.moveTo(at.x,at.y):nt.bezierCurveTo(at.x,at.y,lt.x,lt.y,at.x,at.y),lt=at})),nt.closePath(),nt.fill()}(Rt,function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3?arguments[3]:void 0,Bt=2*Math.PI/Rt,Lt=oS("cardioid");return new Array(Rt).fill(0).map((function(Rt,Ht){var jt=lt+Ht*Bt,$t=at*Lt(jt);return Pe(nt,$t,jt)}))}({"x":Kt,"y":te},$t,0,100));else if("circle"===nt.shape)Rt.beginPath(),Rt.arc(Kt,te,$t,0,2*Math.PI,!0),Rt.fill();else if("diamond"===nt.shape)hS(Rt,cS({"x":Kt,"y":te},$t,-Math.PI/2,4));else if("square"===nt.shape)hS(Rt,cS({"x":Kt,"y":te},$t,-Math.PI/4,4));else if("pentagon"===nt.shape)hS(Rt,cS({"x":Kt,"y":te},$t,Math.PI/2,5));else if("triangle"===nt.shape||"triangleUpright"===nt.shape)hS(Rt,cS({"x":Kt,"y":te},$t,-Math.PI/2,3));else if("triangleForward"===nt.shape)hS(Rt,cS({"x":Kt,"y":te},$t,0,3));else if("star"===nt.shape){for(var ne=cS({"x":Kt,"y":te},$t,-Math.PI/2,5),re=cS({"x":Kt,"y":te},$t/(2*Math.cos(Math.PI/5)),-Math.PI/2+Math.PI/5,5),ae=[],oe=0;oe<5;oe++)ae.push(ne[oe]),ae.push(re[oe]);hS(Rt,ae)}else Rt.fillRect(0,0,at,lt)},bS=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"],xS=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt]))._skipRenderAttributes=bS,(null==at?void 0:at.mode)&&(lt.mode=at.mode,lt.setMode(at.mode)),(null==at?void 0:at.skipDefault)&&(lt.skipDefault=!0),lt.setTheme({"common":{"strokeBoundsBuffer":0}}),lt.attribute=nt,lt.onSetStage((function(){lt.render(),lt.bindEvents()})),lt}return h(e,nt),o(e,[{"key":"setAttribute","value":function(nt,at,lt,Rt){var Bt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(l({},nt,at),this.attribute,nt,Rt);if(Bt)return this._setAttributes(Bt,lt);W(this.attribute[nt])&&W(at)&&!H(this.attribute[nt])&&!H(at)?ft(this.attribute[nt],at):this.attribute[nt]=at,this._skipRenderAttributes.includes(nt)||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!lt&&!this.needUpdateTag(nt)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}},{"key":"setAttributes","value":function(nt,at,lt){return nt=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(nt,this.attribute,null,lt)||nt,this._setAttributes(nt,at)}},{"key":"_setAttributes","value":function(nt,at){var lt=this,Rt=Object.keys(nt);this._mergeAttributes(nt,Rt),Rt.every((function(nt){return lt._skipRenderAttributes.includes(nt)}))||this.render(),this.valid=this.isValid(),this.updateShapeAndBoundsTagSetted()||!at&&!this.needUpdateTags(Rt)?this.addUpdateBoundTag():this.addUpdateShapeAndBoundsTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}},{"key":"_mergeAttributes","value":function(nt,at){j(at)&&(at=Object.keys(nt));for(var lt=0;lt<at.length;lt++){var Rt=at[lt];!W(this.attribute[Rt])||H(this.attribute[Rt])||H(nt[Rt])?this.attribute[Rt]=nt[Rt]:ft(this.attribute[Rt],nt[Rt])}}},{"key":"bindEvents","value":function(){}},{"key":"_getNodeId","value":function(nt){var at;return"".concat(null!==(at=this.id)&&void 0!==at?at:this._uid,"-").concat(this.name,"-").concat(nt)}},{"key":"_dispatchEvent","value":function(nt,at){var lt,Rt=new Ph(nt,at);Rt.manager=null===(lt=this.stage)||void 0===lt?void 0:lt.eventSystem.manager,this.dispatchEvent(Rt)}}])}(Lv),kS=Symbol.for("MathPickerContribution"),SS=Symbol.for("MathArcPicker"),AS=Symbol.for("MathAreaPicker"),wS=Symbol.for("MathCirclePicker"),CS=Symbol.for("MathImagePicker"),MS=Symbol.for("MathLinePicker"),TS=Symbol.for("MathPathPicker"),ES=Symbol.for("MathRectPicker"),PS=Symbol.for("MathSymbolPicker"),RS=Symbol.for("MathTextPicker"),IS=Symbol.for("MathPolygonPicker"),BS=Symbol.for("MathGlyphPicker"),OS=Symbol.for("CanvasArcPicker"),DS=Symbol.for("CanvasArc3dPicker"),LS=Symbol.for("CanvasAreaPicker"),FS=Symbol.for("CanvasCirclePicker"),zS=Symbol.for("CanvasImagePicker"),HS=Symbol.for("CanvasLinePicker"),jS=Symbol.for("CanvasPathPicker"),NS=Symbol.for("CanvasRectPicker"),VS=Symbol.for("CanvasRect3dPicker"),WS=Symbol.for("CanvasSymbolPicker"),GS=Symbol.for("CanvasTextPicker"),XS=Symbol.for("CanvasPolygonPicker"),ZS=Symbol.for("CanvasPyramid3dPicker"),JS=Symbol.for("CanvasRichTextPicker"),tA=Symbol.for("CanvasGlyphPicker"),iA=Symbol.for("CanvasGroupPicker"),oA=Symbol.for("CanvasPickerContribution"),lA=o((function t(nt){var at=this;r(this,t),this.onPointerDown=function(nt){var lt=nt.target,Rt=at.rootNode,Bt=lt===Rt;if(lt&&!Bt){var Lt,Ht=!1;function l(nt){if(Ht||(nt.type="dragstart",null==lt||lt.dispatchEvent(nt),Ht=!0),nt.type="drag",null==lt||lt.dispatchEvent(nt),!Bt){lt.attribute.pickable=!1;var at=(null==Rt?void 0:Rt.pick(nt.global.x,nt.global.y)).graphic;lt.attribute.pickable=!0,Lt!==at&&(Lt&&(nt.type="dragleave",nt.target=Lt,Lt.dispatchEvent(nt)),at&&(nt.type="dragenter",nt.target=at,at.dispatchEvent(nt)),(Lt=at)&&(nt.type="dragover",nt.target=Lt,Lt.dispatchEvent(nt)))}}null==Rt||Rt.addEventListener("pointermove",l);var s=function(){Ht&&(Lt&&(nt.type="drop",nt.target=Lt,Lt.dispatchEvent(nt)),nt.type="dragend",lt.dispatchEvent(nt),Ht=!1),null==Rt||Rt.removeEventListener("pointermove",l)};lt.addEventListener("pointerup",s,{"once":!0}),lt.addEventListener("pointerupoutside",s,{"once":!0})}},this.rootNode=nt,this.initEvents()}),[{"key":"initEvents","value":function(){var nt;null===(nt=this.rootNode)||void 0===nt||nt.addEventListener("pointerdown",this.onPointerDown)}},{"key":"removeEvents","value":function(){var nt;null===(nt=this.rootNode)||void 0===nt||nt.removeEventListener("pointerdown",this.onPointerDown)}},{"key":"release","value":function(){this.removeEvents(),this.rootNode=null}}]),US=function(nt,at){var lt=at.x-nt.x,Rt=at.y-nt.y;return Math.abs(lt)>Math.abs(Rt)?lt>0?"right":"left":Rt>0?"down":"up"},YS=function(nt,at){var lt=Math.abs(at.x-nt.x),Rt=Math.abs(at.y-nt.y);return Math.sqrt(lt*lt+Rt*Rt)},uA=function(nt){function e(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,e),(at=n(this,e)).cachedEvents=[],at.startPoints=[],at.processEvent={},at.throttleTimer=0,at.emitThrottles=[],at.lastTapTarget=null,at.onStart=function(nt){at.startTime=Rh.now();var lt=i(at),Rt=lt.cachedEvents,Bt=lt.startPoints;nt&&Rt.push(nt.clone()),Bt.length=Rt.length;for(var Lt=0;Lt<Rt.length;Lt++){var Ht=Rt[Lt],jt={"x":Ht.x,"y":Ht.y};Bt[Lt]=jt}if(1!==Bt.length)at.startDistance=YS(Bt[0],Bt[1]),at.center=function(nt){var at=nt.length;if(1===at)return{"x":Math.round(nt[0].x),"y":Math.round(nt[0].y)};for(var lt=0,Rt=0,Bt=0;Bt<at;)lt+=nt[Bt].x,Rt+=nt[Bt].y,Bt++;return{"x":Math.round(lt/at),"y":Math.round(Rt/at)}}([Bt[0],Bt[1]]);else{var $t=Rt[0];at.pressTimeout=setTimeout((function(){$t.direction="none",$t.deltaX=0,$t.deltaY=0,$t.points=Bt,at.triggerStartEvent("press",$t),at.triggerEvent("press",$t),at.eventType="press",at.direction="none",at.pressTimeout=null}),at.config.press.time)}},at.onMove=function(nt){at.clearPressTimeout();var lt=i(at),Rt=lt.startPoints,Bt=lt.cachedEvents;if(Rt.length){for(var Lt=nt.clone(),Ht=Lt.x,jt=Lt.y,$t=Lt.pointerId,Kt=0,te=Bt.length;Kt<te;Kt++)if($t===Bt[Kt].pointerId){Bt[Kt]=Lt;break}var ne={"x":Ht,"y":jt},re=Bt.map((function(nt){return{"x":nt.x,"y":nt.y}})),ae=Rh.now();if(at.prevMoveTime=at.lastMoveTime,at.prevMovePoint=at.lastMovePoint,at.lastMoveTime=ae,at.lastMovePoint=ne,1===Rt.length){var oe=Rt[0],se=Ht-oe.x,le=jt-oe.y,ue=at.direction||US(oe,ne);at.direction=ue;var ce=at.getEventType(ne);return Lt.direction=ue,Lt.deltaX=se,Lt.deltaY=le,Lt.points=re,at.triggerStartEvent(ce,Lt),void at.triggerEvent(ce,Lt)}var he=i(at).startDistance,de=YS(re[0],re[1]);Lt.scale=de/he,Lt.center=at.center,Lt.points=re,at.triggerStartEvent("pinch",Lt),at.triggerEvent("pinch",Lt)}},at.onEnd=function(nt){var lt=nt.clone(),Rt=i(at),Bt=Rt.cachedEvents,Lt=Rt.startPoints,Ht=Bt.map((function(nt){return{"x":nt.x,"y":nt.y}}));if(lt.points=Ht,at.triggerEndEvent(lt),1===Bt.length){var jt=Rh.now(),$t=at.lastMoveTime;if(jt-$t<100){var Kt=$t-(at.prevMoveTime||at.startTime);if(Kt>0){var te=at.prevMovePoint||Lt[0],ne=at.lastMovePoint||Lt[0],re=YS(te,ne),ae=re/Kt;if(ae>at.config.swipe.velocity&&re>at.config.swipe.threshold)return lt.velocity=ae,lt.direction=US(te,ne),at.triggerEvent("swipe",lt),at.cachedEvents=[],at.startPoints=[],void at.reset()}}jt-at.startTime<at.config.press.time&&(jt-at.lastTapTime<at.config.tap.interval&&nt.target===at.lastTapTarget?at.tapCount++:at.tapCount=1,at.lastTapTime=jt,at.lastTapTarget=nt.target,1===at.tapCount?at.triggerEvent("tap",lt):2===at.tapCount&&(at.triggerEvent("doubletap",lt),at.tapCount=0))}for(var oe=0,se=Bt.length;oe<se;oe++)if(Bt[oe].pointerId===lt.pointerId){Bt.splice(oe,1),Lt.splice(oe,1);break}at.reset(),Bt.length>0&&at.onStart()},at.element=nt,at.tapCount=0,at.lastTapTime=0,at.config={"press":{"time":null!==(Rt=null===(lt=null==re?void 0:re.press)||void 0===lt?void 0:lt.time)&&void 0!==Rt?Rt:251,"threshold":null!==(Lt=null===(Bt=null==re?void 0:re.press)||void 0===Bt?void 0:Bt.threshold)&&void 0!==Lt?Lt:9},"swipe":{"threshold":null!==(jt=null===(Ht=null==re?void 0:re.swipe)||void 0===Ht?void 0:Ht.threshold)&&void 0!==jt?jt:10,"velocity":null!==(Kt=null===($t=null==re?void 0:re.swipe)||void 0===$t?void 0:$t.velocity)&&void 0!==Kt?Kt:.3},"tap":{"interval":null!==(ne=null===(te=null==re?void 0:re.tap)||void 0===te?void 0:te.interval)&&void 0!==ne?ne:300}},at.initEvents(),at}return h(e,nt),o(e,[{"key":"initEvents","value":function(){var nt=this.element;nt&&(nt.addEventListener("pointerdown",this.onStart),nt.addEventListener("pointermove",this.onMove),nt.addEventListener("pointerup",this.onEnd),nt.addEventListener("pointerupoutside",this.onEnd))}},{"key":"removeEvents","value":function(){var nt=this.element;nt&&(nt.removeEventListener("pointerdown",this.onStart),nt.removeEventListener("pointermove",this.onMove),nt.removeEventListener("pointerup",this.onEnd),nt.removeEventListener("pointerupoutside",this.onEnd))}},{"key":"release","value":function(){this.removeEvents(),this.element=null}},{"key":"getEventType","value":function(nt){var at,lt=this.eventType,Rt=this.startTime,Bt=this.startPoints;return"press"===lt?lt:(at=Rh.now()-Rt>this.config.press.time&&YS(Bt[0],nt)<this.config.press.threshold?"press":"pan",this.eventType=at,at)}},{"key":"enable","value":function(nt){this.processEvent[nt]=!0}},{"key":"isProcess","value":function(nt){return this.processEvent[nt]}},{"key":"pushEvent","value":function(nt,at){for(var lt=this.emitThrottles,Rt={"type":nt,"ev":at},Bt=0,Lt=lt.length;Bt<Lt;Bt++)if(lt[Bt].type===nt)return void lt.splice(Bt,1,Rt);lt.push(Rt)}},{"key":"clearPressTimeout","value":function(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}},{"key":"reset","value":function(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}},{"key":"triggerEvent","value":function(nt,at){var lt=this;this.pushEvent(nt,at);var Rt=this.throttleTimer,Bt=this.emitThrottles;Rt||(this.throttleTimer=oc.global.getRequestAnimationFrame()((function(){oc.global.getCancelAnimationFrame()(lt.throttleTimer),lt.throttleTimer=null;for(var nt=0,at=Bt.length;nt<at;nt++){var Rt=Bt[nt],Lt=Rt.type,Ht=Rt.ev;lt.emitEvent(Lt,Ht)}lt.emitThrottles.length=0})))}},{"key":"triggerStartEvent","value":function(nt,at){this.isProcess(nt)||(this.enable(nt),this.triggerEvent("".concat(nt,"start"),at))}},{"key":"triggerEndEvent","value":function(nt){var at=this,lt=this.processEvent;Object.keys(lt).forEach((function(Rt){at.triggerEvent("".concat(Rt,"end"),nt),"press"===Rt&&at.triggerEvent("".concat(Rt,"up"),nt),delete lt[Rt]}))}},{"key":"emitEvent","value":function(nt,at){if(this.element){var lt=this.element._events["*"];if(lt)if("fn"in lt)lt.fn.call(lt.context,at,nt);else for(var Rt=0,Bt=lt.length;Rt<Bt&&!at.propagationImmediatelyStopped;Rt++)lt[Rt].fn.call(lt[Rt].context,at,nt);this.emit(nt,at)}}}])}(Bt),KS=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},qS=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},cA=[0,0,0],hA=o((function t(nt,at){r(this,t),this.fillAttributes=Object.assign(Object.assign({},Fu),{"opacity":1}),this.strokeAttributes=Object.assign(Object.assign({},Hu),{"opacity":1}),this.textAttributes=Object.assign(Object.assign({},ju),{"opacity":1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;var lt=nt.nativeCanvas.getContext("2d");if(!lt)throw new Error("2d");this.nativeContext=lt,this.canvas=nt,this.matrix=new Mi(1,0,0,1,0,0),this.stack=[],this.dpr=at,this.applyedMatrix=new Mi(1,0,0,1,0,0),this._clearMatrix=new Mi(1,0,0,1,0,0),this.baseGlobalAlpha=1}),[{"key":"fillStyle","get":function(){return this.nativeContext.fillStyle},"set":function(nt){this.nativeContext.fillStyle=nt}},{"key":"font","get":function(){return this.nativeContext.font},"set":function(nt){this.nativeContext.font=nt}},{"key":"globalAlpha","get":function(){return this.nativeContext.globalAlpha},"set":function(nt){this.nativeContext.globalAlpha=nt*this.baseGlobalAlpha}},{"key":"lineCap","get":function(){return this.nativeContext.lineCap},"set":function(nt){this.nativeContext.lineCap=nt}},{"key":"lineDashOffset","get":function(){return this.nativeContext.lineDashOffset},"set":function(nt){this.nativeContext.lineDashOffset=nt}},{"key":"lineJoin","get":function(){return this.nativeContext.lineJoin},"set":function(nt){this.nativeContext.lineJoin=nt}},{"key":"lineWidth","get":function(){return this.nativeContext.lineWidth},"set":function(nt){this.nativeContext.lineWidth=nt}},{"key":"miterLimit","get":function(){return this.nativeContext.miterLimit},"set":function(nt){this.nativeContext.miterLimit=nt}},{"key":"shadowBlur","get":function(){return this.nativeContext.shadowBlur},"set":function(nt){this.nativeContext.shadowBlur=nt}},{"key":"shadowColor","get":function(){return this.nativeContext.shadowColor},"set":function(nt){this.nativeContext.shadowColor=nt}},{"key":"shadowOffsetX","get":function(){return this.nativeContext.shadowOffsetX},"set":function(nt){this.nativeContext.shadowOffsetX=nt}},{"key":"shadowOffsetY","get":function(){return this.nativeContext.shadowOffsetY},"set":function(nt){this.nativeContext.shadowOffsetY=nt}},{"key":"strokeStyle","get":function(){return this.nativeContext.strokeStyle},"set":function(nt){this.nativeContext.strokeStyle=nt}},{"key":"textAlign","get":function(){return this.nativeContext.textAlign},"set":function(nt){this.nativeContext.textAlign=nt}},{"key":"textBaseline","get":function(){return this.nativeContext.textBaseline},"set":function(nt){this.nativeContext.textBaseline=nt}},{"key":"inuse","get":function(){return!!this._inuse},"set":function(nt){nt!==!!this._inuse&&(this._inuse=nt,nt?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}},{"key":"reset","value":function(){this.stack.length&&te.getInstance().warn("bugmatrix"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new Mi(1,0,0,1,0,0),this.stack.length=0,this.nativeContext.setTransform(1,0,0,1,0,0)}},{"key":"getCanvas","value":function(){return this.canvas}},{"key":"getContext","value":function(){return this.nativeContext}},{"key":"setTransformForCurrent","value":function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}},{"key":"currentMatrix","get":function(){return this.matrix}},{"key":"cloneMatrix","value":function(nt){return Bg.allocateByObj(nt)}},{"key":"clear","value":function(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}},{"key":"restore","value":function(){this.nativeContext.restore(),this.stack.length>0&&(Bg.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0))}},{"key":"highPerformanceRestore","value":function(){this.stack.length>0&&(Bg.free(this.matrix),this.matrix=this.stack.pop())}},{"key":"rotate","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.matrix.rotate(nt),at&&this.setTransformForCurrent()}},{"key":"save","value":function(){var nt=this.cloneMatrix(this.matrix);this.stack.push(nt),this.nativeContext.save()}},{"key":"highPerformanceSave","value":function(){var nt=this.cloneMatrix(this.matrix);this.stack.push(nt)}},{"key":"scale","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.scale(nt,at),lt&&this.setTransformForCurrent()}},{"key":"setScale","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.setScale(nt,at),lt&&this.setTransformForCurrent()}},{"key":"scalePoint","value":function(nt,at,lt,Rt){var Bt=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.translate(lt,Rt,!1),this.scale(nt,at,!1),this.translate(-lt,-Rt,!1),Bt&&this.setTransformForCurrent()}},{"key":"setTransform","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:this.dpr;this.matrix.setValue(jt*nt,jt*at,jt*lt,jt*Rt,jt*Bt,jt*Lt),Ht&&this.setTransformForCurrent()}},{"key":"setTransformFromMatrix","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dpr;this.matrix.setValue(nt.a*lt,nt.b*lt,nt.c*lt,nt.d*lt,nt.e*lt,nt.f*lt),at&&this.setTransformForCurrent()}},{"key":"resetTransform","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransform(at,0,0,at,0,0),nt&&this.setTransformForCurrent()}},{"key":"transform","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this.matrix.multiply(nt,at,lt,Rt,Bt,Lt),Ht&&this.setTransformForCurrent()}},{"key":"transformFromMatrix","value":function(nt,at){this.matrix.multiply(nt.a,nt.b,nt.c,nt.d,nt.e,nt.f),at&&this.setTransformForCurrent()}},{"key":"translate","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.matrix.translate(nt,at),lt&&this.setTransformForCurrent()}},{"key":"rotateDegrees","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=nt*Math.PI/180;this.rotate(lt,at)}},{"key":"rotateAbout","value":function(nt,at,lt){var Rt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(at,lt,!1),this.rotate(nt,!1),this.translate(-at,-lt,!1),Rt&&this.setTransformForCurrent()}},{"key":"rotateDegreesAbout","value":function(nt,at,lt){var Rt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translate(at,lt,!1),this.rotateDegrees(nt,!1),this.translate(-at,-lt,!1),Rt&&this.setTransformForCurrent()}},{"key":"beginPath","value":function(){this.disableBeginPath||this.nativeContext.beginPath()}},{"key":"clip","value":function(nt,at){nt?"string"==typeof nt?this.nativeContext.clip(nt):this.nativeContext.clip(nt,at):this.nativeContext.clip()}},{"key":"arc","value":function(nt,at,lt,Rt,Bt,Lt,Ht){if(Ht=Ht||0,this.camera){var jt=[];!function(nt,at,lt,Rt,Bt,Lt,Ht,jt){if(jt)for(;lt>at;)lt-=de;else for(;lt<at;)lt+=de;for(var $t=ue/3*(lt>at?1:-1),Kt=at,te=Kt;te!==lt;){te=$t>0?Math.min(te+$t,lt):Math.max(te+$t,lt);var ne=Math.abs(te-Kt),re=4*Math.tan(ne/4)/3,ae=te<Kt?-1:1,oe=Math.cos(Kt),se=Math.sin(Kt),le=Math.cos(te),ce=Math.sin(te),he=oe*Lt+Rt,fe=se*Ht+Bt,pe=le*Lt+Rt,ve=ce*Ht+Bt,Ae=Lt*re*ae,we=Ht*re*ae;nt.push([he-Ae*se,fe+we*oe,pe+Ae*ce,ve-we*le,pe,ve]),Kt=te}}(jt,Rt,Bt,nt,at,lt,lt,Lt);for(var $t=0;$t<jt.length;++$t){var Kt=jt[$t];this.bezierCurveTo(Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5],Ht)}}else this.nativeContext.arc(nt,at,Math.max(0,lt),Rt,Bt,Lt)}},{"key":"arcTo","value":function(nt,at,lt,Rt,Bt){this.nativeContext.arcTo(nt,at,lt,Rt,Bt)}},{"key":"bezierCurveTo","value":function(nt,at,lt,Rt,Bt,Lt,Ht){if(Ht=Ht||0,this.camera){var jt=Ht,$t=Ht;this.modelMatrix&&(mg(cA,[nt,at,Ht],this.modelMatrix),nt=cA[0],at=cA[1],jt=cA[2],mg(cA,[lt,Rt,Ht],this.modelMatrix),lt=cA[0],Rt=cA[1],$t=cA[2],mg(cA,[Bt,Lt,Ht],this.modelMatrix),Bt=cA[0],Lt=cA[1],Ht=cA[2]);var Kt=this.camera.vp(Bt,Lt,Ht);Bt=Kt.x,Lt=Kt.y,nt=(Kt=this.camera.vp(nt,at,jt)).x,at=Kt.y,lt=(Kt=this.camera.vp(lt,Rt,$t)).x,Rt=Kt.y}this.nativeContext.bezierCurveTo(nt,at,lt,Rt,Bt,Lt)}},{"key":"closePath","value":function(){this.nativeContext.closePath()}},{"key":"ellipse","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){null==jt?this.nativeContext.ellipse(nt,at,lt,Rt,Bt,Lt,Ht):this.nativeContext.ellipse(nt,at,lt,Rt,Bt,Lt,Ht,jt)}},{"key":"lineTo","value":function(nt,at,lt){if(lt=lt||0,this.camera){this.modelMatrix&&(mg(cA,[nt,at,lt],this.modelMatrix),nt=cA[0],at=cA[1],lt=cA[2]);var Rt=this.camera.vp(nt,at,lt);nt=Rt.x,at=Rt.y}this.nativeContext.lineTo(nt,at)}},{"key":"moveTo","value":function(nt,at,lt){if(lt=lt||0,this.camera){this.modelMatrix&&(mg(cA,[nt,at,lt],this.modelMatrix),nt=cA[0],at=cA[1],lt=cA[2]);var Rt=this.camera.vp(nt,at,lt);nt=Rt.x,at=Rt.y}this.nativeContext.moveTo(nt,at)}},{"key":"quadraticCurveTo","value":function(nt,at,lt,Rt,Bt){if(Bt=Bt||0,this.camera){var Lt=Bt;this.modelMatrix&&(mg(cA,[nt,at,Bt],this.modelMatrix),nt=cA[0],at=cA[1],Lt=cA[2],mg(cA,[lt,Rt,Bt],this.modelMatrix),lt=cA[0],Rt=cA[1],Bt=cA[2]);var Ht=this.camera.vp(lt,Rt,Bt);lt=Ht.x,Rt=Ht.y,nt=(Ht=this.camera.vp(nt,at,Lt)).x,at=Ht.y}this.nativeContext.quadraticCurveTo(nt,at,lt,Rt)}},{"key":"rect","value":function(nt,at,lt,Rt,Bt){Bt=Bt||0,this.camera?(this.moveTo(nt,at,Bt),this.lineTo(nt+lt,at,Bt),this.lineTo(nt+lt,at+Rt,Bt),this.lineTo(nt,at+Rt,Bt),this.closePath()):this.nativeContext.rect(nt,at,lt,Rt)}},{"key":"createImageData","value":function(){var nt=arguments;return 2===nt.length?this.nativeContext.createImageData(nt[0],nt[1]):1===nt.length?this.nativeContext.createImageData(nt[0]):null}},{"key":"createLinearGradient","value":function(nt,at,lt,Rt){return isFinite(nt+at+lt+Rt)||(nt=0,at=0,lt=0,Rt=0),this.nativeContext.createLinearGradient(nt,at,lt,Rt)}},{"key":"createPattern","value":function(nt,at){return 0===nt.width||0===nt.height?null:this.nativeContext.createPattern(nt,at)}},{"key":"createRadialGradient","value":function(nt,at,lt,Rt,Bt,Lt){return this.nativeContext.createRadialGradient(nt,at,lt,Rt,Bt,Lt)}},{"key":"createConicGradient","value":function(nt,at,lt,Rt){var Bt,Lt=!1,Ht=this;return{"stops":[],"addColorStop":function(nt,at){this.stops.push([nt,at]),Lt=!0},"GetPattern":function(jt,$t,Kt){return Lt&&(Kt||(Kt=Rt-lt),Bt=function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){var Kt=Math.floor(180*Bt/Math.PI),te=rg.GetCanvas(),ne=rg.GetCtx();if(!ne)return null;var re=og.GetSize(jt),ae=og.GetSize($t),oe=og.Get(at,lt,Rt,Lt,Ht,re,ae);if(oe)return oe;var se=Math.sqrt(Math.max(Math.max(Math.pow(lt,2)+Math.pow(Rt,2),Math.pow(re-lt,2)+Math.pow(Rt,2)),Math.max(Math.pow(re-lt,2)+Math.pow(ae-Rt,2),Math.pow(lt,2)+Math.pow(ae-Rt,2)))),le=Kt+1,ue=Bt/Math.max(1,le-1),ce=ag.getInstance().GetOrCreate(lt,Rt,re,ae,at,le),he=2*Math.PI*se/360;te.width=re,te.height=ae,ne.setTransform(1,0,0,1,0,0),ne.clearRect(0,0,re,ae),ne.translate(lt,Rt),ne.rotate(Lt);for(var de=0,fe=le-1;de<fe&&!(Lt+de*ue>Ht);de++){var pe=ce.getColor(de);ne.beginPath(),ne.rotate(ue),ne.moveTo(0,0),ne.lineTo(se,-2*he),ne.lineTo(se,0),ne.fillStyle=pe,ne.closePath(),ne.fill()}var ve=ne.getImageData(0,0,re,ae);return te.width=ve.width,te.height=ve.height,ne.putImageData(ve,0,0),(oe=nt.createPattern(te,"no-repeat"))&&og.Set(at,lt,Rt,Lt,Ht,oe,re,ae),oe}(Ht,this.stops,nt,at,Kt,lt,Rt,jt,$t),Lt=!1),Bt}}}},{"key":"fill","value":function(nt,at){this.disableFill||(nt?this.nativeContext.fill(nt):this.nativeContext.fill())}},{"key":"fillRect","value":function(nt,at,lt,Rt){this.nativeContext.fillRect(nt,at,lt,Rt)}},{"key":"clearRect","value":function(nt,at,lt,Rt){this.nativeContext.clearRect(nt,at,lt,Rt)}},{"key":"project","value":function(nt,at,lt){if(lt=lt||0,this.camera){this.modelMatrix&&(mg(cA,[nt,at,lt],this.modelMatrix),nt=cA[0],at=cA[1],lt=cA[2]);var Rt=this.camera.vp(nt,at,lt);nt=Rt.x,at=Rt.y}return{"x":nt,"y":at}}},{"key":"view","value":function(nt,at,lt){return lt=lt||0,this.camera?(this.modelMatrix&&(mg(cA,[nt,at,lt],this.modelMatrix),nt=cA[0],at=cA[1],lt=cA[2]),this.camera.view(nt,at,lt)):[nt,at,lt]}},{"key":"fillText","value":function(nt,at,lt,Rt){if(Rt=Rt||0,this.camera){this.modelMatrix&&(mg(cA,[at,lt,Rt],this.modelMatrix),at=cA[0],lt=cA[1],Rt=cA[2]);var Bt=this.camera.vp(at,lt,Rt);at=Bt.x,lt=Bt.y}this.nativeContext.fillText(nt,at,lt)}},{"key":"getImageData","value":function(nt,at,lt,Rt){return this.nativeContext.getImageData(nt,at,lt,Rt)}},{"key":"getLineDash","value":function(){return this.nativeContext.getLineDash()}},{"key":"isPointInPath","value":function(nt,at){return this.nativeContext.isPointInPath(nt,at)}},{"key":"isPointInStroke","value":function(nt,at){return this.nativeContext.isPointInStroke(nt,at)}},{"key":"measureText","value":function(nt){var at,lt,Rt=this,Bt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oc.global.measureTextMethod;if(!Bt||"native"===Bt)return this.nativeContext.measureText(nt);this.mathTextMeasure||(this.mathTextMeasure=oc.graphicUtil.createTextMeasureInstance({},{},(function(){return Rt.canvas.nativeCanvas})));var Lt=null!==(at=this.fontFamily)&&void 0!==at?at:ju.fontFamily,Ht=null!==(lt=this.fontSize)&&void 0!==lt?lt:ju.fontSize;return this.mathTextMeasure.textSpec.fontFamily===Lt&&this.mathTextMeasure.textSpec.fontSize===Ht||(this.mathTextMeasure.textSpec.fontFamily=Lt,this.mathTextMeasure.textSpec.fontSize=Ht,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(nt,Bt)}},{"key":"putImageData","value":function(nt,at,lt){this.nativeContext.putImageData(nt,at,lt)}},{"key":"setLineDash","value":function(nt){var at=arguments,lt=this.nativeContext;this.nativeContext.setLineDash?at[0]&&lt.setLineDash(at[0]):"mozDash"in lt?lt.mozDash=at[0]:"webkitLineDash"in lt&&(lt.webkitLineDash=at[0])}},{"key":"stroke","value":function(nt){this.disableStroke||(nt?this.nativeContext.stroke(nt):this.nativeContext.stroke())}},{"key":"strokeRect","value":function(nt,at,lt,Rt){this.nativeContext.strokeRect(nt,at,lt,Rt)}},{"key":"strokeText","value":function(nt,at,lt,Rt){if(Rt=Rt||0,this.camera){this.modelMatrix&&(mg(cA,[at,lt,Rt],this.modelMatrix),at=cA[0],lt=cA[1],Rt=cA[2]);var Bt=this.camera.vp(at,lt,Rt);at=Bt.x,lt=Bt.y}this.nativeContext.strokeText(nt,at,lt)}},{"key":"drawImage","value":function(){var nt=this.nativeContext,at=arguments;3===at.length?nt.drawImage(at[0],at[1],at[2]):5===at.length?nt.drawImage(at[0],at[1],at[2],at[3],at[4]):9===at.length&&nt.drawImage(at[0],at[1],at[2],at[3],at[4],at[5],at[6],at[7],at[8])}},{"key":"setCommonStyle","value":function(nt,at,lt,Rt,Bt){if(Array.isArray(Bt)){if(Bt.length<=1)return this._setCommonStyle(nt,at,lt,Rt,Bt[0]);var Lt=Object.create(Bt[0]);return Bt.forEach((function(nt,at){0!==at&&Object.assign(Lt,nt)})),this._setCommonStyle(nt,at,lt,Rt,Lt)}return this._setCommonStyle(nt,at,lt,Rt,Bt)}},{"key":"_setCommonStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.fillAttributes);var Ht=at.fillOpacity,jt=void 0===Ht?Bt.fillOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t,te=at.fill,ne=void 0===te?Bt.fill:te;Lt.globalAlpha=jt*Kt*this.baseGlobalAlpha,jt>1e-12&&Kt>1e-12&&(Lt.fillStyle=nc(this,ne,nt,lt,Rt))}},{"key":"setShadowBlendStyle","value":function(nt,at,lt){if(Array.isArray(lt)){if(lt.length<=1)return this._setShadowBlendStyle(nt,lt[0]);var Rt=Object.create(lt[0]);return lt.forEach((function(nt,at){0!==at&&Object.assign(Rt,nt)})),this._setShadowBlendStyle(nt,at,Rt)}return this._setShadowBlendStyle(nt,at,lt)}},{"key":"_setShadowBlendStyle","value":function(nt,at,lt){var Rt=this.nativeContext;lt||(lt=this.fillAttributes);var Bt=at.opacity,Lt=void 0===Bt?lt.opacity:Bt,Ht=at.shadowBlur,jt=void 0===Ht?lt.shadowBlur:Ht,$t=at.shadowColor,Kt=void 0===$t?lt.shadowColor:$t,te=at.shadowOffsetX,ne=void 0===te?lt.shadowOffsetX:te,re=at.shadowOffsetY,ae=void 0===re?lt.shadowOffsetY:re,oe=at.blur,se=void 0===oe?lt.blur:oe,le=at.filter,ue=void 0===le?lt.filter:le,ce=at.globalCompositeOperation,he=void 0===ce?lt.globalCompositeOperation:ce;Lt<=1e-12||(jt||ne||ae?(Rt.shadowBlur=jt*this.dpr,Rt.shadowColor=Kt,Rt.shadowOffsetX=ne*this.dpr,Rt.shadowOffsetY=ae*this.dpr,this._clearShadowStyle=!0):this._clearShadowStyle&&(Rt.shadowBlur=0,Rt.shadowOffsetX=0,Rt.shadowOffsetY=0),se?(Rt.filter="blur(".concat(se,"px)"),this._clearFilterStyle=!0):ue?(Rt.filter=ue,this._clearFilterStyle=!0):this._clearFilterStyle&&(Rt.filter="blur(0px)",this._clearFilterStyle=!1),he?(Rt.globalCompositeOperation=he,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(Rt.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1))}},{"key":"setStrokeStyle","value":function(nt,at,lt,Rt,Bt){if(Array.isArray(Bt)){if(Bt.length<=1)return this._setStrokeStyle(nt,at,lt,Rt,Bt[0]);var Lt=Object.create(Bt[0]);return Bt.forEach((function(nt,at){0!==at&&Object.assign(Lt,nt)})),this._setStrokeStyle(nt,at,lt,Rt,Lt)}return this._setStrokeStyle(nt,at,lt,Rt,Bt)}},{"key":"_setStrokeStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.strokeAttributes);var Ht=at.strokeOpacity,jt=void 0===Ht?Bt.strokeOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t;if(Lt.globalAlpha=jt*Kt*this.baseGlobalAlpha,jt>1e-12&&Kt>1e-12){var te=at.lineWidth,ne=void 0===te?Bt.lineWidth:te,re=at.stroke,ae=void 0===re?Bt.stroke:re,oe=at.lineJoin,se=void 0===oe?Bt.lineJoin:oe,le=at.lineDash,ue=void 0===le?Bt.lineDash:le,ce=at.lineDashOffset,he=void 0===ce?Bt.lineDashOffset:ce,de=at.lineCap,fe=void 0===de?Bt.lineCap:de,pe=at.miterLimit,ve=void 0===pe?Bt.miterLimit:pe,Ae=at.keepStrokeScale,we=void 0===Ae?Bt.keepStrokeScale:Ae;Lt.lineWidth=we?ne:ic(this,ne,this.dpr),Lt.strokeStyle=nc(this,ae,nt,lt,Rt),Lt.lineJoin=se,ue&&(Lt.setLineDash(ue),Lt.lineDashOffset=he),Lt.lineCap=fe,Lt.miterLimit=ve}}},{"key":"setTextStyleWithoutAlignBaseline","value":function(nt,at,lt){var Rt=this.nativeContext;at||(at=this.textAttributes);var Bt=nt.scaleIn3d,Lt=void 0===Bt?at.scaleIn3d:Bt;nt.font?Rt.font=nt.font:Rt.font=si(nt,at,Lt&&this.camera&&this.camera.getProjectionScale(lt));var Ht=nt.fontFamily,jt=void 0===Ht?at.fontFamily:Ht,$t=nt.fontSize,Kt=void 0===$t?at.fontSize:$t;this.fontFamily=jt,this.fontSize=Kt,Rt.textAlign="left",Rt.textBaseline="alphabetic"}},{"key":"setTextStyle","value":function(nt,at,lt){var Rt,Bt,Lt=this.nativeContext;at||(at=this.textAttributes),nt.font?Lt.font=nt.font:Lt.font=si(nt,at,this.camera&&this.camera.getProjectionScale(lt));var Ht=nt.fontFamily,jt=void 0===Ht?at.fontFamily:Ht,$t=nt.fontSize,Kt=void 0===$t?at.fontSize:$t;this.fontFamily=jt,this.fontSize=Kt,Lt.textAlign=null!==(Rt=nt.textAlign)&&void 0!==Rt?Rt:at.textAlign,Lt.textBaseline=null!==(Bt=nt.textBaseline)&&void 0!==Bt?Bt:at.textBaseline}},{"key":"draw","value":function(){}},{"key":"clearMatrix","value":function(){var nt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dpr;this.setTransformFromMatrix(this._clearMatrix,nt,at)}},{"key":"setClearMatrix","value":function(nt,at,lt,Rt,Bt,Lt){this._clearMatrix.setValue(nt,at,lt,Rt,Bt,Lt)}},{"key":"onlyTranslate","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dpr;return this.matrix.a===nt&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===nt}},{"key":"release","value":function(){this.stack.forEach((function(nt){return Bg.free(nt)})),this.stack.length=0}}]);hA.env="browser",hA=KS([Hs(),qS("design:paramtypes",[Object,Number])],hA);var QS=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},$S=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},pA=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(nt){var at=nt.container;if("string"==typeof at){var lt=oc.global.getElementById(at);lt&&(this._container=lt)}else this._container=at;this._context=new hA(this,this._dpr),this.initStyle()}},{"key":"initStyle","value":function(){if(this.controled){var nt=this.nativeCanvas;nt.width=this._pixelWidth,nt.height=this._pixelHeight,!nt.style||this.setCanvasStyle(nt,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(nt),this.visiable||this.hide()}}},{"key":"hide","value":function(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}},{"key":"show","value":function(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}},{"key":"applyPosition","value":function(){var nt=this._nativeCanvas;nt.style.position="absolute",nt.style.top="".concat(this._y,"px"),nt.style.left="".concat(this._x,"px")}},{"key":"resetStyle","value":function(nt){if(this.controled){var at=nt.width,lt=void 0===at?this._displayWidth:at,Rt=nt.height,Bt=void 0===Rt?this._displayHeight:Rt,Lt=nt.dpr,Ht=void 0===Lt?this._dpr:Lt,jt=nt.x,$t=void 0===jt?this._x:jt,Kt=nt.y,te=void 0===Kt?this._y:Kt,ne=this.nativeCanvas;ne.width=lt*Ht,ne.height=Bt*Ht,!ne.style||this.setCanvasStyle(ne,$t,te,lt,Bt),nt.id&&(ne.id=nt.id),this.visiable||this.hide()}}},{"key":"setCanvasStyle","value":function(nt,at,lt,Rt,Bt){this.controled&&(nt.style.width="".concat(Rt,"px"),nt.style.height="".concat(Bt,"px"))}},{"key":"toDataURL","value":function(nt,at){return"image/jpeg"===nt?this._nativeCanvas.toDataURL(nt,at):"image/png"===nt?this._nativeCanvas.toDataURL(nt):this._nativeCanvas.toDataURL(nt,at)}},{"key":"resize","value":function(nt,at){this.controled&&(this._pixelWidth=nt*this._dpr,this._pixelHeight=at*this._dpr,this._displayWidth=nt,this._displayHeight=at,this._nativeCanvas.style&&(this._nativeCanvas.style.width="".concat(nt,"px"),this._nativeCanvas.style.height="".concat(at,"px")),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}}])}(Hx);function eA(nt,at){return new Rs((function(lt){lt(Ec).toDynamicValue((function(){return function(at){return new nt(at)}})).whenTargetNamed(nt.env),lt(Pc).toDynamicValue((function(){return function(nt,lt){return new at(nt,lt)}})).whenTargetNamed(at.env)}))}pA.env="browser";var gA=eA(pA=QS([Hs(),$S("design:paramtypes",[Object])],pA),hA),nA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},rA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},aA=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},yA=function(nt){function e(nt,at,lt,Rt){var Bt;return r(this,e),(Bt=n(this,e,[lt,Rt])).contributions=nt,Bt.drawContribution=at,Bt.pickItemInterceptorContributions=lt,Bt.pickServiceInterceptorContributions=Rt,Bt.global.hooks.onSetEnv.tap("canvas-picker-service",(function(nt,at,lt){Bt.configure(lt,at)})),Bt.configure(Bt.global,Bt.global.env),Bt.pickerMap=new Map,Bt.init(),Bt}return h(e,nt),o(e,[{"key":"init","value":function(){var nt=this;this.contributions.getContributions().forEach((function(at){nt.pickerMap.set(at.numberType,at)})),y(e,"_init",this,3)([])}},{"key":"configure","value":function(nt,at){this.pickCanvas=lh.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}},{"key":"pickItem","value":function(nt,at,lt,Rt){if(!1===nt.attribute.pickable)return null;if(this.InterceptorContributions.length)for(var Bt=0;Bt<this.InterceptorContributions.length;Bt++){var Lt=this.InterceptorContributions[Bt];if(Lt.beforePickItem){var Ht=Lt.beforePickItem(nt,this,at,Rt,{"parentMatrix":lt});if(Ht)return Ht}}var jt=this.pickerMap.get(nt.numberType);if(!jt)return null;var $t=jt.contains(nt,at,Rt),Kt=$t?nt:null,te={"graphic":Kt,"params":$t};if(Kt)return te;if(this.InterceptorContributions.length)for(var ne=0;ne<this.InterceptorContributions.length;ne++){var re=this.InterceptorContributions[ne];if(re.afterPickItem){var ae=re.afterPickItem(nt,this,at,Rt,{"parentMatrix":lt});if(ae)return ae}}return te}}])}(Gx);yA=nA([Hs(),aA(0,Gs(ll)),aA(0,js(oA)),aA(1,Gs(Q_)),aA(2,Gs(ll)),aA(2,js(yb)),aA(3,Gs(ll)),aA(3,js(mb)),rA("design:paramtypes",[Object,Object,Object,Object])],yA);var sA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},xA=o((function t(){r(this,t),this.type="group",this.numberType=cv}),[{"key":"contains","value":function(nt,at,lt){return!1}}]);xA=sA([Hs()],xA);var SA=new Rs((function(nt,at,lt,Rt){SA.__vloaded||(SA.__vloaded=!0,nt(iA).to(xA).inSingletonScope(),nt(oA).toService(iA),rl(nt,oA))}));SA.__vloaded=!1;var AA=SA,TA=new Rs((function(nt,at,lt,Rt){lt(yA)||nt(yA).toSelf().inSingletonScope(),lt(vb)?Rt(vb).toService(yA):nt(vb).toService(yA)}));function dA(nt){nt.load(AA),nt.load(TA)}var PA,fA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},vA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},RA=PA=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e)).type="browser",nt._canvasIsIntersecting=!0,nt.global=oc.global,nt.viewBox=new _i,nt.modelMatrix=new Mi(1,0,0,1,0,0),nt}return h(e,nt),o(e,[{"key":"container","get":function(){return this.canvas.nativeCanvas.parentElement}},{"key":"getTitle","value":function(){return this.canvas.id&&this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return this.canvas.nativeCanvas.getBoundingClientRect()}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt),this.postInit()}},{"key":"postInit","value":function(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(nt){console.error("IntersectionObserver")}}},{"key":"isElementVisible","value":function(nt){var at=nt.getBoundingClientRect(),lt=window.innerWidth||document.documentElement.clientWidth,Rt=window.innerHeight||document.documentElement.clientHeight;return!(at.right<0||at.bottom<0||at.left>lt||at.top>Rt)}},{"key":"observerCanvas","value":function(){var nt=this;this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);var at=new IntersectionObserver((function(at,lt){at.forEach((function(at){nt._canvasIsIntersecting!==at.isIntersecting?(nt._canvasIsIntersecting=at.isIntersecting,nt._onVisibleChangeCb&&nt._onVisibleChangeCb(at.isIntersecting)):nt._canvasIsIntersecting=at.isIntersecting}))}));at&&at.observe(this.canvas.nativeCanvas)}},{"key":"createWindowByConfig","value":function(nt){var at,lt=this.global.createCanvas({"width":nt.width,"height":nt.height});if(!(at="string"==typeof nt.container?this.global.getElementById(nt.container):nt.container?nt.container:this.global.getRootElement()))throw new Error("containerId");nt.offscreen?at=null:at.appendChild(lt);var Rt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":lt,"container":at,"id":PA.GenerateCanvasId(),"canvasControled":!0};this.canvas=new pA(Rt)}},{"key":"createWindowByCanvas","value":function(nt){var at,lt;if("string"==typeof nt.canvas){if(!(lt=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else lt=nt.canvas;if(!lt)throw new Error("canvas");var Rt=nt.width,Bt=nt.height;if(null==Rt||null==Bt||!nt.canvasControled){var Lt=lt.getBoundingClientRect();Rt=Lt.width,Bt=Lt.height}var Ht=nt.dpr;null==Ht&&(Ht=null!==(at=lt.getContext("2d").pixelRatio)&&void 0!==at?at:lt.width/Rt),this.canvas=new pA({"width":Rt,"height":Bt,"dpr":Ht,"nativeCanvas":lt,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){this.canvas.release()}},{"key":"resizeWindow","value":function(nt,at){this.canvas.resize(nt,at)}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at,lt){return this.canvas.nativeCanvas.addEventListener(nt,at,lt)}},{"key":"removeEventListener","value":function(nt,at,lt){return this.canvas.nativeCanvas.removeEventListener(nt,at,lt)}},{"key":"dispatchEvent","value":function(nt){return this.canvas.nativeCanvas.dispatchEvent(nt)}},{"key":"getStyle","value":function(){var nt;return null!==(nt=this.canvas.nativeCanvas.style)&&void 0!==nt?nt:{}}},{"key":"setStyle","value":function(nt){this.canvas.nativeCanvas.style=nt}},{"key":"getBoundingClientRect","value":function(){var nt=this.canvas.nativeCanvas,at=this.getWH();return nt.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{"x":0,"y":0,"width":at.width,"height":at.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}},{"key":"isVisible","value":function(nt){return this._canvasIsIntersecting}},{"key":"onVisibleChange","value":function(nt){this._onVisibleChangeCb=nt}},{"key":"getTopLeft","value":function(nt){return this.global.getElementTopLeft(this.canvas.nativeCanvas,nt)}}],[{"key":"GenerateCanvasId","value":function(){return"".concat(PA.idprefix,"_").concat(PA.prefix_count++)}}])}(Nx);RA.env="browser",RA.idprefix="visactor_window",RA.prefix_count=0,RA=PA=fA([Hs(),vA("design:paramtypes",[])],RA);var OA=new Rs((function(nt){nt(RA).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(RA)})).whenTargetNamed(RA.env)})),mA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},_A=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},bA=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},DA=o((function t(nt){r(this,t),this.dom=nt}),[{"key":"x1","get":function(){return this.dom.getBoundingClientRect().left}},{"key":"x2","get":function(){return this.dom.getBoundingClientRect().right}},{"key":"y1","get":function(){return this.dom.getBoundingClientRect().top}},{"key":"y2","get":function(){return this.dom.getBoundingClientRect().bottom}},{"key":"width","get":function(){return this.dom.getBoundingClientRect().width}},{"key":"height","get":function(){return this.dom.getBoundingClientRect().height}}]);function kA(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=document.createElement("img");if(oc.global.isImageAnonymous&&(lt.crossOrigin="anonymous"),at){var Rt=new Blob([nt],{"type":"image/svg+xml"});nt=window.URL.createObjectURL(Rt)}return lt.src=nt,lt.complete?Promise.resolve(lt):new Promise((function(nt,at){lt.onload=function(){nt(lt)},lt.onerror=function(){at(new Error(""))}}))}var FA=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="browser",nt.supportEvent=!0;try{nt.supportsTouchEvents="ontouchstart"in globalThis,nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsTouchEvents=!1,nt.supportsPointerEvents=!1,nt.supportsPointerEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"mapToCanvasPoint","value":function(nt,at){var lt,Rt,Bt=0,Lt=0,Ht=0,jt=0;if(nt.changedTouches){var $t=null!==(lt=nt.changedTouches[0])&&void 0!==lt?lt:{};Ht=Bt=$t.clientX||0,jt=Lt=$t.clientY||0}else Bt=nt.clientX||0,Lt=nt.clientY||0,Ht=nt.offsetX||0,jt=nt.offsetY||0;if(at){var Kt,te,ne=Bt,re=Lt,ae=at.getBoundingClientRect(),oe=null===(Rt=at.getNativeHandler)||void 0===Rt?void 0:Rt.call(at).nativeCanvas;return oe&&(Kt=ae.width/oe.offsetWidth,te=ae.height/oe.offsetHeight),{"x":(ne-ae.left)/(Q(Kt)?Kt:1),"y":(re-ae.top)/(Q(te)?te:1)}}return{"x":Ht,"y":jt}}},{"key":"getNativeAABBBounds","value":function(nt){var at=nt;if("string"==typeof nt&&(at=(new DOMParser).parseFromString(nt,"text/html").firstChild).lastChild&&(at=at.lastChild.firstChild),at.getBoundingClientRect){var lt=at.getBoundingClientRect();return new DA(lt)}return new _i}},{"key":"removeDom","value":function(nt){return nt.parentElement.removeChild(nt),!0}},{"key":"updateDom","value":function(nt,at){var lt=at.width,Rt=at.height,Bt=at.style;return Bt&&(Y(Bt)?nt.setAttribute("style",Bt):Object.keys(Bt).forEach((function(at){nt.style[at]=Bt[at]}))),null!=lt&&(nt.style.width="".concat(lt,"px")),null!=Rt&&(nt.style.height="".concat(Rt,"px")),!0}},{"key":"createDom","value":function(nt){var at=nt.tagName,lt=void 0===at?"div":at,Rt=nt.parent,Bt=document.createElement(lt);if(this.updateDom(Bt,nt),Rt){var Lt=Y(Rt)?this.getElementById(Rt):Rt;Lt&&Lt.appendChild&&Lt.appendChild(Bt)}return Bt}},{"key":"loadImage","value":function(nt){return kA(nt,!1).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"loadSvg","value":function(nt){return kA(nt,!0).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"createCanvas","value":function(nt){var at,lt,Rt=document.createElement("canvas");nt.id&&(Rt.id=null!==(at=nt.id)&&void 0!==at?at:Ps.GenAutoIncrementId().toString());var Bt=null!==(lt=nt.dpr)&&void 0!==lt?lt:window.devicePixelRatio;return nt.width&&nt.height&&(Rt.style.width="".concat(nt.width,"px"),Rt.style.height="".concat(nt.height,"px"),Rt.width=nt.width*Bt,Rt.height=nt.height*Bt),Rt}},{"key":"createOffscreenCanvas","value":function(nt){var at,lt=null!==(at=nt.dpr)&&void 0!==at?at:window.devicePixelRatio;return new OffscreenCanvas(nt.width*lt,nt.height*lt)}},{"key":"releaseCanvas","value":function(nt){var at;(at="string"==typeof nt?document.getElementById(nt):nt)&&at.parentElement&&at.parentElement.removeChild(at)}},{"key":"getDevicePixelRatio","value":function(){return window.devicePixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return window.requestAnimationFrame}},{"key":"getCancelAnimationFrame","value":function(){return window.cancelAnimationFrame}},{"key":"addEventListener","value":function(nt,at,lt){return document.addEventListener(nt,at,lt)}},{"key":"removeEventListener","value":function(nt,at,lt){return document.removeEventListener(nt,at,lt)}},{"key":"dispatchEvent","value":function(nt){return document.dispatchEvent(nt)}},{"key":"getElementById","value":function(nt){return document.getElementById(nt)}},{"key":"getRootElement","value":function(){return document.body}},{"key":"getDocument","value":function(){return document}},{"key":"release","value":function(){}},{"key":"getElementTop","value":function(nt,at){for(var lt=nt.offsetTop,Rt=nt.offsetParent;null!==Rt;)lt+=Rt.offsetTop,Rt=Rt.offsetParent;return lt}},{"key":"getElementLeft","value":function(nt,at){for(var lt=nt.offsetLeft,Rt=nt.offsetParent;null!==Rt;)lt+=Rt.offsetLeft,Rt=Rt.offsetParent;return lt}},{"key":"getElementTopLeft","value":function(nt,at){for(var lt=nt.offsetTop,Rt=nt.offsetLeft,Bt=nt.offsetParent;null!==Bt;)lt+=Bt.offsetTop,Rt+=Bt.offsetLeft,Bt=Bt.offsetParent;return{"top":lt,"left":Rt}}},{"key":"loadFont","value":function(nt,at,lt){return bA(this,void 0,void 0,f().mark((function n(){return f().wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",new FontFace(nt,Y(at)?"url(".concat(at,")"):at,lt).load().then((function(nt){return document.fonts.add(nt),{"loadState":"success"}})).catch((function(nt){return console.error("Failed to load font:",nt),{"loadState":"fail"}})));case 1:case"end":return Rt.stop()}}),n)})))}},{"key":"isMacOS","value":function(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(nt){this._isMacOS=!1}return this._isMacOS}},{"key":"copyToClipBoard","value":function(nt){return navigator.clipboard.writeText(nt).then((function(){})).catch((function(nt){}))}}])}(jx);FA=mA([Hs(),_A("design:paramtypes",[])],FA);var NA=new Rs((function(nt){NA.isBrowserBound||(NA.isBrowserBound=!0,nt(FA).toSelf().inSingletonScope(),nt(yl).toService(FA))}));function wA(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];wA.__loaded||(wA.__loaded=!0,nt.load(NA),nt.load(gA),nt.load(OA),at&&dA(nt))}NA.isBrowserBound=!1,wA.__loaded=!1;var MA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},VA=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"globalAlpha","get":function(){return this._globalAlpha},"set":function(nt){this.nativeContext.globalAlpha=nt*this.baseGlobalAlpha,this._globalAlpha=nt*this.baseGlobalAlpha}},{"key":"getImageData","value":function(nt,at,lt,Rt){var Bt=this;return new Promise((function(Lt,Ht){var jt;try{tt.canvasGetImageData({"canvasId":null!==(jt=Bt.canvas.nativeCanvas.id)&&void 0!==jt?jt:Bt.canvas.id,"x":nt,"y":at,"width":lt,"height":Rt,"success":function(nt){Lt(nt)}})}catch(nt){Ht(nt)}}))}},{"key":"draw","value":function(){var nt=this,at=this.nativeContext;at.draw&&(this.drawPromise=new Promise((function(lt){at.draw(!0,(function(){nt.drawPromise=null,lt(null)}))})))}},{"key":"createPattern","value":function(nt,at){return null}}])}(hA);VA.env="feishu",VA=MA([Hs()],VA);var CA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},EA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},WA=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new VA(this,this._dpr)}},{"key":"release","value":function(){}}])}(Hx);WA.env="feishu";var GA=eA(WA=CA([Hs(),EA("design:paramtypes",[Object])],WA),VA),BA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},IA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},LA=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},qA=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),KA=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="feishu",at.eventManager=new qA,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new WA(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}var Lt=nt.dpr;null==Lt&&(Lt=at.width/lt),this.canvas=new WA({"width":lt,"height":Rt,"dpr":Lt,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at=nt.type;return!!this.eventManager.cache[at]&&(nt.changedTouches&&nt.changedTouches[0]&&(nt.offsetX=nt.changedTouches[0].x,nt.changedTouches[0].offsetX=nt.changedTouches[0].x,nt.changedTouches[0].clientX=nt.changedTouches[0].x,nt.offsetY=nt.changedTouches[0].y,nt.changedTouches[0].offsetY=nt.changedTouches[0].y,nt.changedTouches[0].clientY=nt.changedTouches[0].y),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[at].listener&&this.eventManager.cache[at].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);KA.env="feishu",KA=BA([Hs(),LA(0,Gs(ml)),IA("design:paramtypes",[Object])],KA);var ZA=new Rs((function(nt){nt(KA).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(KA)})).whenTargetNamed(KA.env)})),zA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},HA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},jA=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},tw=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[at,lt])).contributions=nt,Rt.pickItemInterceptorContributions=at,Rt.pickServiceInterceptorContributions=lt,Rt.global.hooks.onSetEnv.tap("math-picker-service",(function(nt,at,lt){Rt.configure(lt,at)})),Rt.configure(Rt.global,Rt.global.env),Rt.pickerMap=new Map,Rt.init(),Rt}return h(e,nt),o(e,[{"key":"init","value":function(){var nt=this;this.contributions.getContributions().forEach((function(at){nt.pickerMap.set(at.numberType,at)})),y(e,"_init",this,3)([])}},{"key":"configure","value":function(nt,at){this.pickContext=new Px(null,1)}},{"key":"pickItem","value":function(nt,at,lt,Rt){if(!1===nt.attribute.pickable)return null;var Bt=this.pickerMap.get(nt.numberType);if(!Bt)return null;var Lt=Bt.contains(nt,at,Rt),Ht=Lt?nt:null;return Ht?{"graphic":Ht,"params":Lt}:null}}])}(Gx);tw=zA([Hs(),jA(0,Gs(ll)),jA(0,js(kS)),jA(1,Gs(ll)),jA(1,js(yb)),jA(2,Gs(ll)),jA(2,js(mb)),HA("design:paramtypes",[Object,Object,Object])],tw);var ew=new Rs((function(nt){ew.__vloaded||(ew.__vloaded=!0,rl(nt,kS))}));ew.__vloaded=!1;var iw=ew,ow=o((function t(){r(this,t)}),[{"key":"contains","value":function(nt,at,lt){if(!nt.AABBBounds.containsPoint(at))return!1;if("imprecise"===nt.attribute.pickMode)return!0;if(!this.canvasRenderer)return!0;var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;var Bt=nt.getGraphicTheme();Rt.highPerformanceSave();var Lt=nt.attribute,Ht=Lt.x,jt=void 0===Ht?Bt.x:Ht,$t=Lt.y,Kt=void 0===$t?Bt.y:$t;if(nt.transMatrix.onlyTranslate()){var te=nt.getOffsetXY(Bt);jt+=te.x,Kt+=te.y,Rt.setTransformForCurrent()}else jt=0,Kt=0,Rt.transformFromMatrix(nt.transMatrix,!0);var ne=!1,re=!1;return this.canvasRenderer.drawShape(nt,Rt,jt,Kt,{},null,(function(nt,lt,Rt,Bt){return!(!ne&&!re)||(ne=nt.isPointInPath(at.x,at.y),re=Bt||re,ne)}),(function(nt,lt,Bt,Lt){if(ne||re)return!0;var Ht=lt.lineWidth||Bt.lineWidth,jt=lt.pickStrokeBuffer||Bt.pickStrokeBuffer,$t=lt.keepStrokeScale||Bt.keepStrokeScale;return Rt.lineWidth=$t?Ht+jt:ic(Rt,Ht+jt,Rt.dpr),ne=nt.isPointInStroke(at.x,at.y),re=Lt||re,ne})),Rt.highPerformanceRestore(),ne}}]),UA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},YA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},XA=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},sw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="arc",at.numberType=av,at}return h(e,nt),o(e)}(ow);sw=UA([Hs(),XA(0,Gs(I_)),YA("design:paramtypes",[Object])],sw);var lw=!1,uw=new Rs((function(nt,at,lt,Rt){lw||(lw=!0,nt(SS).to(sw).inSingletonScope(),nt(kS).toService(SS))})),JA=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},QA=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},$A=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},fw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="area",at.numberType=sv,at}return h(e,nt),o(e)}(ow);fw=JA([Hs(),$A(0,Gs(O_)),QA("design:paramtypes",[Object])],fw);var pw=!1,vw=new Rs((function(nt,at,lt,Rt){pw||(pw=!0,nt(AS).to(fw).inSingletonScope(),nt(kS).toService(AS))})),nw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},rw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},aw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},yw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="circle",at.numberType=lv,at}return h(e,nt),o(e)}(ow);yw=nw([Hs(),aw(0,Gs(D_)),rw("design:paramtypes",[Object])],yw);var mw=!1,_w=new Rs((function(nt,at,lt,Rt){mw||(mw=!0,nt(wS).to(yw).inSingletonScope(),nt(kS).toService(wS))})),Sw=o((function t(){r(this,t),this.type="glyph",this.numberType=uv}),[{"key":"contains","value":function(nt,at,lt){if(!nt.AABBBounds.containsPoint(at))return!1;if("imprecise"===nt.attribute.pickMode)return!0;if(!(null!=lt?lt:{}).pickContext)return!1;var Rt=null==lt?void 0:lt.pickerService;if(Rt){var Bt=!1;return nt.getSubGraphic().forEach((function(nt){if(!Bt){var Lt=Rt.pickItem(nt,at,null,lt);Bt=!(!Lt||!Lt.graphic)}})),Bt}return!1}}]),cw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},hw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},dw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Aw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at}return h(e,nt),o(e)}(Sw);Aw=cw([Hs(),dw(0,Gs(K_)),hw("design:paramtypes",[Object])],Aw);var ww=!1,Ew=new Rs((function(nt,at,lt,Rt){ww||(ww=!0,nt(BS).to(Aw).inSingletonScope(),nt(Aw).toService(BS))})),gw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Pw=o((function t(){r(this,t),this.type="image",this.numberType=hv}),[{"key":"contains","value":function(nt,at,lt){return!!(null!=lt?lt:{}).pickContext&&!!nt.AABBBounds.containsPoint(at)}}]);Pw=gw([Hs()],Pw);var Rw=!1,Ow=new Rs((function(nt,at,lt,Rt){Rw||(Rw=!0,nt(CS).to(Pw).inSingletonScope(),nt(Pw).toService(CS))})),bw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},xw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},kw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Dw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="line",at.numberType=dv,at}return h(e,nt),o(e)}(ow);Dw=bw([Hs(),kw(0,Gs(z_)),xw("design:paramtypes",[Object])],Dw);var Fw=!1,zw=new Rs((function(nt,at,lt,Rt){Fw||(Fw=!0,nt(MS).to(Dw).inSingletonScope(),nt(kS).toService(MS))})),Mw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Tw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Cw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Hw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="polygon",at.numberType=pv,at}return h(e,nt),o(e)}(ow);Hw=Mw([Hs(),Cw(0,Gs(j_)),Tw("design:paramtypes",[Object])],Hw);var Ww=!1,Gw=new Rs((function(nt,at,lt,Rt){Ww||(Ww=!0,nt(IS).to(Hw).inSingletonScope(),nt(kS).toService(IS))})),Bw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Iw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Lw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Uw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="path",at.numberType=fv,at}return h(e,nt),o(e)}(ow);Uw=Bw([Hs(),Lw(0,Gs(H_)),Iw("design:paramtypes",[Object])],Uw);var Yw=!1,Xw=new Rs((function(nt,at,lt,Rt){Yw||(Yw=!0,nt(TS).to(Uw).inSingletonScope(),nt(kS).toService(TS))})),$w=new _i,Qw=o((function t(){r(this,t),this.type="rect",this.numberType=gv}),[{"key":"contains","value":function(nt,at,lt){if(!nt.AABBBounds.containsPoint(at))return!1;if("imprecise"===nt.attribute.pickMode)return!0;var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;var Bt=nt.getGraphicTheme(),Lt=nt.attribute.cornerRadius,Ht=void 0===Lt?Bt.cornerRadius:Lt,jt=nt.attribute,$t=jt.x,Kt=void 0===$t?Bt.x:$t,te=jt.y,ne=void 0===te?Bt.y:te;Rt.highPerformanceSave();var re=!0;if(nt.transMatrix.onlyTranslate()){var ae=nt.getOffsetXY(Bt);Kt+=ae.x,ne+=ae.y,Rt.setTransformForCurrent()}else Kt=0,ne=0,re=!1,Rt.transformFromMatrix(nt.transMatrix,!0);var oe=!0;if(!re||nt.shadowRoot||Z(Ht,!0)&&0!==Ht||X(Ht)&&Ht.some((function(nt){return 0!==nt})))oe=!1,this.canvasRenderer.drawShape(nt,Rt,Kt,ne,{},null,(function(nt,lt,Rt){return!!oe||(oe=nt.isPointInPath(at.x,at.y))}),(function(nt,lt,Bt){if(oe)return!0;var Lt=lt.lineWidth||Bt.lineWidth,Ht=lt.pickStrokeBuffer||Bt.pickStrokeBuffer,jt=lt.keepStrokeScale||Bt.keepStrokeScale;return Rt.lineWidth=jt?Lt+Ht:ic(Rt,Lt+Ht,Rt.dpr),oe=nt.isPointInStroke(at.x,at.y)}));else{var se=nt.attribute,le=se.fill,ue=void 0===le?Bt.fill:le,ce=se.stroke,he=void 0===ce?Bt.stroke:ce,de=se.lineWidth,fe=void 0===de?Bt.lineWidth:de;if(ue)oe=!0;else if(he){var pe=nt.AABBBounds;$w.setValue(pe.x1,pe.y1,pe.x2,pe.y2),$w.expand(-fe/2),oe=!$w.containsPoint(at)}}return Rt.highPerformanceRestore(),oe}}]),jw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},Nw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Vw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},Jw=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at}return h(e,nt),o(e)}(Qw);Jw=jw([Hs(),Vw(0,Gs(N_)),Nw("design:paramtypes",[Object])],Jw);var iC=!1,nC=new Rs((function(nt,at,lt,Rt){iC||(iC=!0,nt(ES).to(Jw).inSingletonScope(),nt(kS).toService(ES))})),rC=!1,aC=new Rs((function(nt,at,lt,Rt){rC||(rC=!0,nt(CS).to(Pw).inSingletonScope(),nt(Pw).toService(CS))})),Kw=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},qw=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},Zw=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},lC=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="symbol",at.numberType=_v,at}return h(e,nt),o(e)}(ow);lC=Kw([Hs(),Zw(0,Gs(G_)),qw("design:paramtypes",[Object])],lC);var uC=!1,fC=new Rs((function(nt,at,lt,Rt){uC||(uC=!0,nt(PS).to(lC).inSingletonScope(),nt(kS).toService(PS))})),tM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},vC=o((function t(){r(this,t),this.type="text",this.numberType=bv}),[{"key":"contains","value":function(nt,at,lt){return!!nt.AABBBounds.containsPoint(at)}}]);vC=tM([Hs()],vC);var gC=!1,bC=new Rs((function(nt,at,lt,Rt){gC||(gC=!0,nt(RS).to(vC).inSingletonScope(),nt(kS).toService(RS))})),xC=new Rs((function(nt,at,lt,Rt){lt(tw)||nt(tw).toSelf().inSingletonScope(),lt(vb)?Rt(vb).toService(tw):nt(vb).toService(tw)}));function aM(nt){nt.load(iw),nt.load(xC),nt.load(uw),nt.load(vw),nt.load(_w),nt.load(Ew),nt.load(Ow),nt.load(zw),nt.load(Gw),nt.load(Xw),nt.load(nC),nt.load(aC),nt.load(fC),nt.load(bC)}var kC=o((function t(nt,at,lt,Rt,Bt,Lt){r(this,t),this.nativeCanvas=nt,this.ctx=at,this._w=Rt,this._h=Bt,this.id=Lt,nt.id=Lt,this.dpr=lt}),[{"key":"width","get":function(){return this._w*this.dpr},"set":function(nt){}},{"key":"height","get":function(){return this._h*this.dpr},"set":function(nt){}},{"key":"offsetWidth","get":function(){return this._w},"set":function(nt){}},{"key":"offsetHeight","get":function(){return this._h},"set":function(nt){}},{"key":"getContext","value":function(){return this.ctx}},{"key":"getBoundingClientRect","value":function(){return{"width":this._w,"height":this._h}}}]),SC=o((function t(nt,at,lt,Rt,Bt,Lt){r(this,t),this.nativeCanvas=nt,this.ctx=at,this._w=Rt,this._h=Bt,this.id=Lt,nt.id=Lt,this.dpr=lt}),[{"key":"width","get":function(){return this._w*this.dpr},"set":function(nt){this._w=nt/this.dpr,this.nativeCanvas.width=nt}},{"key":"height","get":function(){return this._h*this.dpr},"set":function(nt){this._h=nt/this.dpr,this.nativeCanvas.height=nt}},{"key":"offsetWidth","get":function(){return this._w},"set":function(nt){this._w=nt,this.nativeCanvas.width=nt*this.dpr}},{"key":"offsetHeight","get":function(){return this._h},"set":function(nt){this._h=nt,this.nativeCanvas.height=nt*this.dpr}},{"key":"getContext","value":function(){return this.ctx}},{"key":"getBoundingClientRect","value":function(){return{"width":this._w,"height":this._h}}}]),lM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},uM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},CC=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="feishu",nt.supportEvent=!0,nt.canvasMap=new Map,nt.freeCanvasList=[],nt.canvasIdx=0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"getDynamicCanvasCount","value":function(){return this.freeCanvasList.length}},{"key":"getStaticCanvasCount","value":function(){return 9999}},{"key":"configure","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t;nt.env===this.type&&(nt.setActiveEnvContribution(this),lt=at.domref,Rt=at.canvasIdLists,Bt=this.canvasMap,Lt=at.freeCanvasIdx,Ht=this.freeCanvasList,jt=at.pixelRatio,$t=null!=jt?jt:tt.getSystemInfoSync().pixelRatio,Rt.forEach((function(nt,at){var Rt=tt.createCanvasContext(nt),jt=new kC(Rt.canvas||{},Rt,$t,lt.width,lt.height,nt);Rt.canvas=jt,Bt.set(nt,jt),at>=Lt&&Ht.push(jt)})))}},{"key":"loadImage","value":function(nt){return Promise.resolve({"data":nt,"loadState":"success"})}},{"key":"loadSvg","value":function(nt){return Promise.reject()}},{"key":"createCanvas","value":function(nt){var at=this.freeCanvasList[this.canvasIdx]||this.freeCanvasList[this.freeCanvasList.length-1];return this.canvasIdx++,at}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return tt.getSystemInfoSync().pixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return function(nt){return gd.call(nt)}}},{"key":"getCancelAnimationFrame","value":function(){return function(nt){gd.clear(nt)}}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return this.canvasMap.get(nt)}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}}])}(jx);CC=lM([Hs(),uM("design:paramtypes",[])],CC);var TC=new Rs((function(nt){TC.isFeishuBound||(TC.isFeishuBound=!0,nt(CC).toSelf().inSingletonScope(),nt(yl).toService(CC))}));function dM(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];dM.__loaded||(dM.__loaded=!0,nt.load(TC),nt.load(GA),nt.load(ZA),at&&aM(nt))}TC.isFeishuBound=!1,dM.__loaded=!1;var pM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},EC=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"globalAlpha","get":function(){return this._globalAlpha},"set":function(nt){this.nativeContext.globalAlpha=nt*this.baseGlobalAlpha,this._globalAlpha=nt*this.baseGlobalAlpha}},{"key":"setLineDash","value":function(nt){var at=arguments,lt=this.nativeContext;if(this.nativeContext.setLineDash){var Rt=at[0];if(0===Rt[0]&&0===Rt[1])return;Rt&&lt.setLineDash(Rt)}}},{"key":"_setStrokeStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.strokeAttributes);var Ht=at.strokeOpacity,jt=void 0===Ht?Bt.strokeOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t;if(jt>1e-12&&Kt>1e-12){var te=at.lineWidth,ne=void 0===te?Bt.lineWidth:te,re=at.stroke,ae=void 0===re?Bt.stroke:re,oe=at.lineJoin,se=void 0===oe?Bt.lineJoin:oe,le=at.lineDash,ue=void 0===le?Bt.lineDash:le,ce=at.lineCap,he=void 0===ce?Bt.lineCap:ce,de=at.miterLimit,fe=void 0===de?Bt.miterLimit:de,pe=at.keepStrokeScale,ve=void 0===pe?Bt.keepStrokeScale:pe,Ae=at.lineDashOffset,we=void 0===Ae?Bt.lineDashOffset:Ae;Lt.globalAlpha=jt*Kt*this.baseGlobalAlpha,Lt.lineWidth=ve?ne:ic(this,ne,this.dpr),Lt.strokeStyle=nc(this,ae,nt,lt,Rt),Lt.lineJoin=se,0===ue[0]&&0===ue[1]||!ue||(Lt.setLineDash(ue),Lt.lineDashOffset=we),Lt.lineCap=he,Lt.miterLimit=fe}}},{"key":"measureText","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oc.global.measureTextMethod;return this.setTransform(1,0,0,1,0,0,!0,oc.global.devicePixelRatio),{"width":y(e,"measureText",this,3)([nt,at]).width,"fontBoundingBoxDescent":void 0,"fontBoundingBoxAscent":void 0,"actualBoundingBoxAscent":void 0,"actualBoundingBoxDescent":void 0}}},{"key":"createPattern","value":function(nt,at){return null}},{"key":"draw","value":function(){var nt=this,at=this.nativeContext;at.draw&&(this.drawPromise=new Promise((function(lt){at.draw(!0,(function(){nt.drawPromise=null,lt(null)}))})))}}])}(hA);EC.env="lynx",EC=pM([Hs()],EC);var vM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},gM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},IC=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new EC(this,this._dpr)}},{"key":"resize","value":function(nt,at){this._pixelWidth=nt*this._dpr,this._pixelHeight=at*this._dpr,this._displayWidth=nt,this._displayHeight=at,this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._nativeCanvas.nativeCanvas&&(this._nativeCanvas.nativeCanvas.width=this._pixelWidth,this._nativeCanvas.nativeCanvas.height=this._pixelHeight),this._context.dpr=this._dpr}},{"key":"release","value":function(){}}])}(Hx);IC.env="lynx",IC=vM([Hs(),gM("design:paramtypes",[Object])],IC);var mM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},_M=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},bM=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},OC=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),DC=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="lynx",at.eventManager=new OC,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id&&this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new IC(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}var Lt=nt.dpr;null==Lt&&(Lt=at.width/lt),this.canvas=new IC({"width":lt,"height":Rt,"dpr":Lt,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){this.canvas.resize(nt,at)}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at=nt.type;return!!this.eventManager.cache[at]&&(nt.changedTouches&&nt.changedTouches[0]&&(nt.offsetX=nt.changedTouches[0].x,nt.changedTouches[0].offsetX=nt.changedTouches[0].x,nt.changedTouches[0].clientX=nt.changedTouches[0].x,nt.offsetY=nt.changedTouches[0].y,nt.changedTouches[0].offsetY=nt.changedTouches[0].y,nt.changedTouches[0].clientY=nt.changedTouches[0].y),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[at].listener&&this.eventManager.cache[at].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);DC.env="lynx",DC=mM([Hs(),bM(0,Gs(ml)),_M("design:paramtypes",[Object])],DC);var LC=new Rs((function(nt){nt(DC).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(DC)})).whenTargetNamed(DC.env)})),jC=eA(IC,EC),wM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},MM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},NC=!1;try{NC=!!lynx.createCanvasNG}catch(nt){}var VC=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="lynx",nt.supportEvent=!0,nt.canvasMap=new Map,nt.freeCanvasList=[],nt.canvasIdx=0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"configure","value":function(nt,at){nt.env===this.type&&(nt.setActiveEnvContribution(this),function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=null!=Ht?Ht:SystemInfo.pixelRatio;if(at.forEach((function(at,Ht){var $t;Lt?$t=lynx.createOffscreenCanvas():($t=NC?lynx.createCanvasNG(at):lynx.createCanvas(at),NC&&$t.attachToCanvasView(at)),$t.width=nt.width*jt,$t.height=nt.height*jt;var Kt=$t.getContext("2d"),te=new SC($t,Kt,jt,nt.width,nt.height,at);lt.set(at,te),Ht>Rt&&Bt.push(te)})),!Bt.length&&lynx.createOffscreenCanvas){var $t=lynx.createOffscreenCanvas();$t.width=nt.width*jt,$t.height=nt.height*jt;var Kt=$t.getContext("2d"),te=Math.random().toString(),ne=new SC($t,Kt,jt,nt.width,nt.height,te);lt.set(te,ne),Bt.push(ne)}}(at.domref,at.canvasIdLists,this.canvasMap,at.freeCanvasIdx,this.freeCanvasList,!!at.offscreen,at.pixelRatio))}},{"key":"getDynamicCanvasCount","value":function(){return this.freeCanvasList.length}},{"key":"getStaticCanvasCount","value":function(){return 9999}},{"key":"loadImage","value":function(nt){return function(nt){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return Promise.reject();var at=lynx.createImage(nt);return new Promise((function(nt,lt){at.onload=function(){nt(at)},at.onerror=function(){lt(new Error(""))}}))}(nt,!1).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"loadSvg","value":function(nt){return Promise.reject()}},{"key":"createCanvas","value":function(nt){var at=this.freeCanvasList[this.canvasIdx]||this.freeCanvasList[this.freeCanvasList.length-1];return this.canvasIdx++,at}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return SystemInfo.pixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return function(nt){return gd.call(nt)}}},{"key":"getCancelAnimationFrame","value":function(){return function(nt){gd.clear(nt)}}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return this.canvasMap.get(nt)}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}}])}(jx);VC=wM([Hs(),MM("design:paramtypes",[])],VC);var YC=new Rs((function(nt){YC.isLynxBound||(YC.isLynxBound=!0,nt(VC).toSelf().inSingletonScope(),nt(yl).toService(VC))}));function PM(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];PM.__loaded||(PM.__loaded=!0,nt.load(YC),nt.load(jC),nt.load(LC),at&&aM(nt))}YC.isLynxBound=!1,PM.__loaded=!1;var RM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},BM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},XC=function(nt){function e(nt,at){var lt;r(this,e),lt=n(this,e,[nt,at]);var Rt=nt.nativeCanvas.getContext("2d");if(!Rt)throw new Error("2d");return lt.nativeContext=Rt,lt.canvas=nt,lt.matrix=new Mi(1,0,0,1,0,0),lt.stack=[],lt.dpr=null!=at?at:1,lt}return h(e,nt),o(e,[{"key":"release","value":function(){}}])}(hA);XC.env="node",XC=RM([Hs(),BM("design:paramtypes",[Object,Number])],XC);var LM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},DM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},$C=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new XC(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}},{"key":"release","value":function(){this._nativeCanvas.release&&H(this._nativeCanvas.release)&&this._nativeCanvas.release()}}])}(Hx);$C.env="node";var KC=eA($C=LM([Hs(),DM("design:paramtypes",[Object])],$C),XC),zM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},HM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},jM=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},QC=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="node",at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return""}},{"key":"getWH","value":function(){return{"width":this.canvas.displayWidth,"height":this.canvas.displayHeight}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!0};this.canvas=new $C(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at,lt=nt.canvas,Rt=null!==(at=nt.dpr)&&void 0!==at?at:1,Bt=nt.width,Lt=nt.height;null!=Bt&&null!=Lt&&nt.canvasControled||(Bt=lt.width/Rt,Lt=lt.height/Rt),this.canvas=new $C({"width":Bt,"height":Lt,"dpr":Rt,"nativeCanvas":lt,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){this.canvas.release()}},{"key":"resizeWindow","value":function(nt,at){this.canvas.resize(nt,at)}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"getImageBuffer","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return this.canvas.nativeCanvas.toBuffer(nt)}},{"key":"addEventListener","value":function(nt,at,lt){}},{"key":"dispatchEvent","value":function(nt){return!0}},{"key":"removeEventListener","value":function(nt,at,lt){}},{"key":"getStyle","value":function(){}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){return null}},{"key":"clearViewBox","value":function(nt){}}])}(Nx);QC.env="node",QC=zM([Hs(),jM(0,Gs(ml)),HM("design:paramtypes",[Object])],QC);var eM=new Rs((function(nt){nt(QC).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(QC)})).whenTargetNamed(QC.env)})),GM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},iM=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type="node",nt._lastTime=0,nt.supportEvent=!1,nt}return h(e,nt),o(e,[{"key":"configure","value":function(nt,at){nt.env===this.type&&(nt.setActiveEnvContribution(this),this.pkg=at)}},{"key":"getDynamicCanvasCount","value":function(){return 0}},{"key":"getStaticCanvasCount","value":function(){return 999}},{"key":"loadJson","value":function(nt){var at=fetch(nt).then((function(nt){return nt.json()}));return at.then((function(nt){return{"data":nt,"state":"success"}})).catch((function(){return{"data":null,"state":"fail"}})),at}},{"key":"loadArrayBuffer","value":function(nt){return fetch(nt).then((function(nt){return nt.arrayBuffer()})).then((function(nt){return{"data":nt,"loadState":"success"}})).catch((function(){return{"data":null,"loadState":"fail"}}))}},{"key":"loadImage","value":function(nt){var at=this.pkg.loadImage;return at?at(nt).then((function(nt){return{"loadState":nt?"success":"fail","data":nt}})).catch((function(){return{"loadState":"fail","data":null}})):Promise.reject(new Error("node-canvas loadImage could not be found!"))}},{"key":"loadSvg","value":function(nt){var at=this.pkg.Resvg;if(!at)return Promise.reject(new Error("@resvg/resvg-js svgParser could not be found!"));var lt=new at(nt).render().asPng();return this.loadImage(lt)}},{"key":"createCanvas","value":function(nt){return this.pkg.createCanvas(nt.width,nt.height)}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return 1}},{"key":"getRequestAnimationFrame","value":function(){return function(nt){return gd.call(nt)}}},{"key":"getCancelAnimationFrame","value":function(){return function(nt){gd.clear(nt)}}},{"key":"addEventListener","value":function(nt,at,lt){}},{"key":"removeEventListener","value":function(nt,at,lt){}},{"key":"getElementById","value":function(nt){return null}},{"key":"getRootElement","value":function(){return null}},{"key":"dispatchEvent","value":function(nt){}},{"key":"release","value":function(){}},{"key":"createOffscreenCanvas","value":function(nt){}}])}(jx);iM=GM([Hs()],iM);var nM=new Rs((function(nt){nM.isNodeBound||(nM.isNodeBound=!0,nt(iM).toSelf().inSingletonScope(),nt(yl).toService(iM))}));function YM(nt){YM.__loaded||(YM.__loaded=!0,nt.load(nM),nt.load(KC),nt.load(eM))}nM.isNodeBound=!1,YM.__loaded=!1;var XM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},rM=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"globalAlpha","get":function(){return this._globalAlpha},"set":function(nt){this.nativeContext.setGlobalAlpha(nt),this._globalAlpha=nt}},{"key":"draw","value":function(){this.nativeContext.draw()}},{"key":"strokeText","value":function(nt,at,lt){}},{"key":"_setCommonStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.fillAttributes);var Ht=at.fillOpacity,jt=void 0===Ht?Bt.fillOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t,te=at.fill,ne=void 0===te?Bt.fill:te;jt>1e-12&&Kt>1e-12&&(Lt.setGlobalAlpha(jt*Kt),Lt.setFillStyle(nc(this,ne,nt,lt,Rt)))}},{"key":"_setStrokeStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.strokeAttributes);var Ht=at.strokeOpacity,jt=void 0===Ht?Bt.strokeOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t;if(jt>1e-12&&Kt>1e-12){var te=at.lineWidth,ne=void 0===te?Bt.lineWidth:te,re=at.stroke,ae=void 0===re?Bt.stroke:re,oe=at.lineJoin,se=void 0===oe?Bt.lineJoin:oe,le=at.lineDash,ue=void 0===le?Bt.lineDash:le,ce=at.lineDashOffset,he=void 0===ce?Bt.lineDashOffset:ce,de=at.lineCap,fe=void 0===de?Bt.lineCap:de,pe=at.miterLimit,ve=void 0===pe?Bt.miterLimit:pe,Ae=at.keepStrokeScale,we=void 0===Ae?Bt.keepStrokeScale:Ae;Lt.setGlobalAlpha(jt*Kt),Lt.setLineWidth(we?ne:ic(this,ne,this.dpr)),Lt.setStrokeStyle(nc(this,ae,nt,lt,Rt)),Lt.setLineJoin(se),ue&&(Lt.setLineDash(ue),Lt.lineDashOffset=he),Lt.setLineCap(fe),Lt.setMiterLimit(ve)}}},{"key":"setTextStyleWithoutAlignBaseline","value":function(nt,at){var lt,Rt=this.nativeContext;at||(at=this.textAttributes),nt.font?Rt.font=nt.font:Rt.font=si(nt,at),Rt.setFontSize(null!==(lt=nt.fontSize)&&void 0!==lt?lt:at.fontSize)}},{"key":"setTextStyle","value":function(nt,at){var lt,Rt,Bt=this.nativeContext;at||(at=this.textAttributes),nt.font?Bt.font=nt.font:Bt.font=si(nt,at),Bt.setTextAlign(null!==(lt=nt.textAlign)&&void 0!==lt?lt:at.textAlign),Bt.setTextBaseline(null!==(Rt=nt.textBaseline)&&void 0!==Rt?Rt:at.textBaseline)}},{"key":"createConicGradient","value":function(nt,at,lt,Rt){return null}},{"key":"createPattern","value":function(nt,at){return null}},{"key":"getImageData","value":function(nt,at,lt,Rt){var Bt=this,Lt=this.nativeContext,Ht=Lt.taro;if(Lt&&Ht)return!Lt.getImageData&&Ht.canvasGetImageData?new Promise((function(Lt,jt){try{Ht.canvasGetImageData({"canvasId":Bt.canvas.nativeCanvas.id,"sx":nt,"sy":at,"sw":lt,"sh":Rt,"success":function(nt){Lt(nt)}})}catch(nt){jt(nt)}})):void 0}},{"key":"createRadialGradient","value":function(nt,at,lt,Rt,Bt,Lt){return this.nativeContext.createCircularGradient&&this.nativeContext.createCircularGradient(nt,at,lt,Rt,Bt,Lt)}}])}(hA);rM.env="taro",rM=XM([Hs()],rM);var qM=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ZM=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},oM=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new rM(this,this._dpr)}},{"key":"release","value":function(){}}])}(Hx);oM.env="taro";var sM=eA(oM=qM([Hs(),ZM("design:paramtypes",[Object])],oM),rM),$M=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},tT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},eT=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},cM=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),hM=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="taro",at.eventManager=new cM,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new oM(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}var Lt=nt.dpr;null==Lt&&(Lt=at.width/lt),this.canvas=new oM({"width":lt,"height":Rt,"dpr":Lt,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at=nt.type;return!!this.eventManager.cache[at]&&(nt.changedTouches.length>0&&(nt.changedTouches.forEach((function(at,lt){nt.changedTouches[lt]=Object.assign(Object.assign({},nt.changedTouches[lt]),{"offsetX":at.x,"offsetY":at.y})})),nt.offsetX=nt.changedTouches[0].offsetX,nt.offsetY=nt.changedTouches[0].offsetY),nt.touches.length>0&&nt.touches.forEach((function(at,lt){nt.touches[lt]=Object.assign(Object.assign({},nt.touches[lt]),{"offsetX":at.x,"offsetY":at.y})})),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[at].listener&&this.eventManager.cache[at].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);hM.env="taro",hM=$M([Hs(),eT(0,Gs(ml)),tT("design:paramtypes",[Object])],hM);var fM=new Rs((function(nt){nt(hM).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(hM)})).whenTargetNamed(hM.env)})),aT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},oT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},yM=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="taro",nt.supportEvent=!0,nt.canvasMap=new Map,nt.freeCanvasList=[],nt.canvasIdx=0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"getDynamicCanvasCount","value":function(){return this.freeCanvasList.length}},{"key":"getStaticCanvasCount","value":function(){return 9999}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}},{"key":"configure","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t;nt.env===this.type&&(nt.setActiveEnvContribution(this),lt=at.domref,Rt=at.canvasIdLists,Bt=this.canvasMap,Lt=at.freeCanvasIdx,Ht=this.freeCanvasList,jt=at.taro,$t=at.pixelRatio,Rt.forEach((function(nt,at){var Rt=jt.createCanvasContext(nt),Kt=new kC(Rt.canvas||{},Rt,$t,lt.width,lt.height,nt);return Rt.canvas=Kt,Bt.set(nt,Kt),at>=Lt&&Ht.push(Kt),Kt})),this.taro=at.taro,this.pixelRatio=at.pixelRatio)}},{"key":"loadImage","value":function(nt){return Promise.resolve({"data":nt,"loadState":"success"})}},{"key":"loadSvg","value":function(nt){var at=window||globalThis;if(at.DOMParser){var lt=(new at.DOMParser).parseFromString(nt,"image/svg+xml").children[0],Rt=(new XMLSerializer).serializeToString(lt),Bt="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(Rt));return Promise.resolve({"data":Bt,"loadState":"success"})}if(at.Blob){var Lt=new at.Blob([nt],{"type":"image/svg+xml"}),Ht=at.URL.createObjectURL(Lt);return Promise.resolve({"data":Ht,"loadState":"success"})}return Promise.reject()}},{"key":"createCanvas","value":function(nt){var at=this.freeCanvasList[this.canvasIdx]||this.freeCanvasList[this.freeCanvasList.length-1];return this.canvasIdx++,at}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return this.pixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return requestAnimationFrame}},{"key":"getCancelAnimationFrame","value":function(){return cancelAnimationFrame}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return this.canvasMap.get(nt)}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}}])}(jx);yM=aT([Hs(),oT("design:paramtypes",[])],yM);var xM=new Rs((function(nt){xM.isTaroBound||(xM.isTaroBound=!0,nt(yM).toSelf().inSingletonScope(),nt(yl).toService(yM))}));function uT(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];uT.__loaded||(uT.__loaded=!0,nt.load(xM),nt.load(sM),nt.load(fM),at&&aM(nt))}xM.isTaroBound=!1,uT.__loaded=!1;var cT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},kM=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"draw","value":function(){}},{"key":"createPattern","value":function(nt,at){return null}}])}(hA);kM.env="wx",kM=cT([Hs()],kM);var dT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},pT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},SM=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new kM(this,this._dpr)}},{"key":"release","value":function(){}}])}(Hx);SM.env="wx";var AM=eA(SM=dT([Hs(),pT("design:paramtypes",[Object])],SM),kM),gT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},yT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},mT=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},CM=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),TM=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="wx",at.eventManager=new CM,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new SM(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}var Lt=nt.dpr;null==Lt&&(Lt=at.width/lt),this.canvas=new SM({"width":lt,"height":Rt,"dpr":Lt,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at,lt,Rt,Bt,Lt=nt.type;return!!this.eventManager.cache[Lt]&&(nt.changedTouches&&nt.changedTouches[0]&&(nt.offsetX=nt.changedTouches[0].x,nt.changedTouches[0].offsetX=null!==(at=nt.changedTouches[0].x)&&void 0!==at?at:nt.changedTouches[0].pageX,nt.changedTouches[0].clientX=null!==(lt=nt.changedTouches[0].x)&&void 0!==lt?lt:nt.changedTouches[0].pageX,nt.offsetY=nt.changedTouches[0].y,nt.changedTouches[0].offsetY=null!==(Rt=nt.changedTouches[0].y)&&void 0!==Rt?Rt:nt.changedTouches[0].pageY,nt.changedTouches[0].clientY=null!==(Bt=nt.changedTouches[0].y)&&void 0!==Bt?Bt:nt.changedTouches[0].pageY),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[Lt].listener&&this.eventManager.cache[Lt].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);TM.env="wx",TM=gT([Hs(),mT(0,Gs(ml)),yT("design:paramtypes",[Object])],TM);var EM=new Rs((function(nt){nt(TM).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(TM)})).whenTargetNamed(TM.env)})),kT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ST=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},AT=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},IM=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="wx",nt.supportEvent=!0,nt.canvasMap=new Map,nt.freeCanvasList=[],nt.canvasIdx=0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"configure","value":function(nt,at){if(nt.env===this.type)return nt.setActiveEnvContribution(this),function(nt,at,lt,Rt,Bt,Lt,Ht){return AT(this,void 0,void 0,f().mark((function t(){var nt,jt,$t;return f().wrap((function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:nt=wx.getSystemInfoSync().pixelRatio,jt=f().mark((function t(jt){var $t;return f().wrap((function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if($t=at[jt],Kt.t0=!Ht&&lt.has($t),Kt.t0){Kt.next=5;break}return Kt.next=5,new Promise((function(at){var Ht=wx.createSelectorQuery();Lt&&(Ht=Ht.in(Lt)),Ht.select("#".concat($t)).fields({"node":!0,"size":!0}).exec((function(Lt){if(Lt[0]){var Ht=Lt[0].node,Kt=Lt[0].width,te=Lt[0].height;Ht.width=Kt*nt,Ht.height=te*nt,lt.set($t,Ht),jt>=Rt&&Bt.push(Ht),at(null)}}))}));case 5:case"end":return Kt.stop()}}),t)})),$t=0;case 3:if(!($t<at.length)){Kt.next=8;break}return Kt.delegateYield(jt($t),"t0",5);case 5:$t++,Kt.next=3;break;case 8:case"end":return Kt.stop()}}),t)})))}(at.domref,at.canvasIdLists,this.canvasMap,at.freeCanvasIdx,this.freeCanvasList,at.component,at.forceUpdate).then((function(){}))}},{"key":"loadImage","value":function(nt){return Promise.resolve({"data":nt,"loadState":"success"})}},{"key":"loadSvg","value":function(nt){return Promise.reject()}},{"key":"createCanvas","value":function(nt){var at=this.freeCanvasList[this.canvasIdx]||this.freeCanvasList[this.freeCanvasList.length-1];return this.canvasIdx++,at}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return wx.getSystemInfoSync().pixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return function(nt){return gd.call(nt)}}},{"key":"getCancelAnimationFrame","value":function(){return function(nt){gd.clear(nt)}}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return this.canvasMap.get(nt)}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}}])}(jx);IM=kT([Hs(),ST("design:paramtypes",[])],IM);var OM=new Rs((function(nt){OM._isWxBound||(OM._isWxBound=!0,nt(IM).toSelf().inSingletonScope(),nt(yl).toService(IM))}));function TT(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];TT.__loaded||(TT.__loaded=!0,nt.load(OM),nt.load(AM),nt.load(EM),at&&aM(nt))}function CT(nt){CT.__loaded||(CT.__loaded=!0,wA(nt,!1),dM(nt,!1),PM(nt,!1),YM(nt),uT(nt,!1),TT(nt,!1),dA(nt),ax.hooks.onSetEnv.tap("loadMathPicker",(function(at,lt){"browser"!==lt&&aM(nt)})))}function ET(){!function(nt){CT(nt)}(Mc)}OM._isWxBound=!1,TT.__loaded=!1,CT.__loaded=!1;var PT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},FM=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e)}(VA);FM.env="tt",FM=PT([Hs()],FM);var BT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},IT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},NM=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new FM(this,this._dpr)}},{"key":"release","value":function(){}}])}(Hx);NM.env="tt";var VM=eA(NM=BT([Hs(),IT("design:paramtypes",[Object])],NM),FM),OT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},FT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},zT=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},WM=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),UM=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="tt",at.eventManager=new WM,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new NM(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}var Lt=nt.dpr;null==Lt&&(Lt=at.width/lt),this.canvas=new NM({"width":lt,"height":Rt,"dpr":Lt,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at=nt.type;return!!this.eventManager.cache[at]&&(nt.changedTouches&&nt.changedTouches[0]&&(nt.offsetX=nt.changedTouches[0].x,nt.changedTouches[0].offsetX=nt.changedTouches[0].x,nt.changedTouches[0].clientX=nt.changedTouches[0].x,nt.offsetY=nt.changedTouches[0].y,nt.changedTouches[0].offsetY=nt.changedTouches[0].y,nt.changedTouches[0].clientY=nt.changedTouches[0].y),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[at].listener&&this.eventManager.cache[at].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);UM.env="tt",UM=OT([Hs(),zT(0,Gs(ml)),FT("design:paramtypes",[Object])],UM);var KM=new Rs((function(nt){nt(UM).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(UM)})).whenTargetNamed(UM.env)})),VT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},GT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},WT=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))},QM=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="tt",nt.supportEvent=!0,nt.canvasMap=new Map,nt.freeCanvasList=[],nt.canvasIdx=0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt}return h(e,nt),o(e,[{"key":"configure","value":function(nt,at){if(nt.env===this.type)return nt.setActiveEnvContribution(this),function(nt,at,lt,Rt,Bt,Lt){return WT(this,void 0,void 0,f().mark((function t(){var nt,Ht,jt;return f().wrap((function($t){for(;;)switch($t.prev=$t.next){case 0:nt=tt.getSystemInfoSync().pixelRatio,Ht=f().mark((function t(Ht){var jt;return f().wrap((function($t){for(;;)switch($t.prev=$t.next){case 0:return jt=at[Ht],$t.next=3,new Promise((function(at){var $t=tt.createSelectorQuery();Lt&&($t=$t.in(Lt)),$t.select("#".concat(jt)).node().exec((function(Lt){var $t=Lt[0].node,Kt=$t.width,te=$t.height;$t.width=Kt*nt,$t.height=te*nt,lt.set(jt,$t),Ht>=Rt&&Bt.push($t),at(null)}))}));case 3:case"end":return $t.stop()}}),t)})),jt=0;case 3:if(!(jt<at.length)){$t.next=8;break}return $t.delegateYield(Ht(jt),"t0",5);case 5:jt++,$t.next=3;break;case 8:case"end":return $t.stop()}}),t)})))}(at.domref,at.canvasIdLists,this.canvasMap,at.freeCanvasIdx,this.freeCanvasList,at.component).then((function(){}))}},{"key":"loadImage","value":function(nt){return Promise.resolve({"data":nt,"loadState":"success"})}},{"key":"loadSvg","value":function(nt){return Promise.reject()}},{"key":"createCanvas","value":function(nt){var at=this.freeCanvasList[this.canvasIdx]||this.freeCanvasList[this.freeCanvasList.length-1];return this.canvasIdx++,at}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return tt.getSystemInfoSync().pixelRatio}},{"key":"getRequestAnimationFrame","value":function(){return function(nt){return gd.call(nt)}}},{"key":"getCancelAnimationFrame","value":function(){return function(nt){gd.clear(nt)}}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return this.canvasMap.get(nt)}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}}])}(jx);QM=VT([Hs(),GT("design:paramtypes",[])],QM);var JM=new Rs((function(nt){JM.isTTBound||(JM.isTTBound=!0,nt(QM).toSelf().inSingletonScope(),nt(yl).toService(QM))}));function XT(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];XT.__loaded||(XT.__loaded=!0,nt.load(JM),nt.load(VM),nt.load(KM),at&&aM(nt))}JM.isTTBound=!1,XT.__loaded=!1;var KT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},iT=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"globalAlpha","get":function(){return this._globalAlpha},"set":function(nt){this.nativeContext.globalAlpha=nt*this.baseGlobalAlpha,this._globalAlpha=nt*this.baseGlobalAlpha}},{"key":"setLineDash","value":function(nt){var at=arguments,lt=this.nativeContext;if(this.nativeContext.setLineDash){var Rt=at[0];if(0===Rt[0]&&0===Rt[1])return;Rt&&lt.setLineDash(Rt)}}},{"key":"_setStrokeStyle","value":function(nt,at,lt,Rt,Bt){var Lt=this.nativeContext;Bt||(Bt=this.strokeAttributes);var Ht=at.strokeOpacity,jt=void 0===Ht?Bt.strokeOpacity:Ht,$t=at.opacity,Kt=void 0===$t?Bt.opacity:$t;if(jt>1e-12&&Kt>1e-12){var te=at.lineWidth,ne=void 0===te?Bt.lineWidth:te,re=at.stroke,ae=void 0===re?Bt.stroke:re,oe=at.lineJoin,se=void 0===oe?Bt.lineJoin:oe,le=at.lineDash,ue=void 0===le?Bt.lineDash:le,ce=at.lineCap,he=void 0===ce?Bt.lineCap:ce,de=at.miterLimit,fe=void 0===de?Bt.miterLimit:de,pe=at.keepStrokeScale,ve=void 0===pe?Bt.keepStrokeScale:pe,Ae=at.lineDashOffset,we=void 0===Ae?Bt.lineDashOffset:Ae;Lt.globalAlpha=jt*Kt*this.baseGlobalAlpha,Lt.lineWidth=ve?ne:ic(this,ne,this.dpr),Lt.strokeStyle=nc(this,ae,nt,lt,Rt),Lt.lineJoin=se,0===ue[0]&&0===ue[1]||(ue&&Lt.setLineDash(ue),Lt.lineDashOffset=we),Lt.lineCap=he,Lt.miterLimit=fe}}},{"key":"measureText","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oc.global.measureTextMethod;return this.setTransform(1,0,0,1,0,0,!0,oc.global.devicePixelRatio),y(e,"measureText",this,3)([nt,at])}},{"key":"setTextStyleWithoutAlignBaseline","value":function(nt,at,lt){var Rt=this.nativeContext;at||(at=this.textAttributes);var Bt,Lt=nt.scaleIn3d,Ht=void 0===Lt?at.scaleIn3d:Lt;Bt=nt.font?nt.font:si(nt,at,Ht&&this.camera&&this.camera.getProjectionScale(lt)),Rt.font=(Bt||"").replace("px","vp");var jt=nt.fontFamily,$t=void 0===jt?at.fontFamily:jt,Kt=nt.fontSize,te=void 0===Kt?at.fontSize:Kt;this.fontFamily=$t,this.fontSize=te,Rt.textAlign="left",Rt.textBaseline="alphabetic"}},{"key":"setTextStyle","value":function(nt,at,lt){var Rt,Bt,Lt,Ht=this.nativeContext;at||(at=this.textAttributes),Lt=nt.font?nt.font:si(nt,at,this.camera&&this.camera.getProjectionScale(lt)),Ht.font=(Lt||"").replace("px","vp");var jt=nt.fontFamily,$t=void 0===jt?at.fontFamily:jt,Kt=nt.fontSize,te=void 0===Kt?at.fontSize:Kt;this.fontFamily=$t,this.fontSize=te,Ht.textAlign=null!==(Rt=nt.textAlign)&&void 0!==Rt?Rt:at.textAlign,Ht.textBaseline=null!==(Bt=nt.textBaseline)&&void 0!==Bt?Bt:at.textBaseline}},{"key":"createPattern","value":function(nt,at){return null}},{"key":"drawImage","value":function(){var nt=this.nativeContext,at=arguments;at[0].drawImage&&(at[0]=at[0].transferToImageBitmap()),3===at.length?nt.drawImage(at[0],at[1],at[2]):5===at.length?nt.drawImage(at[0],at[1],at[2],at[3],at[4]):9===at.length&&nt.drawImage(at[0],at[1],at[2],at[3],at[4],at[5],at[6],at[7],at[8])}},{"key":"draw","value":function(){}}])}(hA);iT.env="harmony",iT=KT([Hs()],iT);var ZT=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},JT=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},nT=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e,[{"key":"init","value":function(){this._context=new iT(this,this._dpr)}},{"key":"resize","value":function(nt,at){}},{"key":"release","value":function(){}}])}(Hx);nT.env="harmony",nT=ZT([Hs(),JT("design:paramtypes",[Object])],nT);var $T=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},tC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},eC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},rT=o((function t(){r(this,t),this.cache={}}),[{"key":"addEventListener","value":function(nt,at){nt&&at&&(this.cache[nt]=this.cache[nt]||{"listener":[]},this.cache[nt].listener.push(at))}},{"key":"removeEventListener","value":function(nt,at){if(nt&&at&&this.cache[nt]){var lt=this.cache[nt].listener.findIndex((function(nt){return nt===at}));lt>=0&&this.cache[nt].listener.splice(lt,1)}}},{"key":"cleanEvent","value":function(){this.cache={}}}]),sT=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).global=nt,at.type="harmony",at.eventManager=new rT,at}return h(e,nt),o(e,[{"key":"container","get":function(){return null}},{"key":"getTitle","value":function(){return this.canvas.id&&this.canvas.id.toString()}},{"key":"getWH","value":function(){return{"width":this.canvas.width/(this.canvas.dpr||1),"height":this.canvas.height/(this.canvas.dpr||1)}}},{"key":"getXY","value":function(){return{"x":0,"y":0}}},{"key":"createWindow","value":function(nt){nt.canvas?this.createWindowByCanvas(nt):this.createWindowByConfig(nt)}},{"key":"createWindowByConfig","value":function(nt){var at=this.global.createCanvas({"width":nt.width,"height":nt.height}),lt={"width":nt.width,"height":nt.height,"dpr":nt.dpr,"nativeCanvas":at,"id":Ps.GenAutoIncrementId().toString(),"canvasControled":!1};this.canvas=new nT(lt)}},{"key":"createWindowByCanvas","value":function(nt){var at;if("string"==typeof nt.canvas){if(!(at=this.global.getElementById(nt.canvas)))throw new Error("canvasId canvasdom")}else at=nt.canvas;var lt=nt.width,Rt=nt.height;if(null==lt||null==Rt||!nt.canvasControled){var Bt=at.getBoundingClientRect();lt=Bt.width,Rt=Bt.height}this.canvas=new nT({"width":lt,"height":Rt,"dpr":1,"nativeCanvas":at,"canvasControled":nt.canvasControled})}},{"key":"releaseWindow","value":function(){}},{"key":"resizeWindow","value":function(nt,at){this.canvas.resize(nt,at)}},{"key":"setDpr","value":function(nt){this.canvas.dpr=nt}},{"key":"getContext","value":function(){return this.canvas.getContext()}},{"key":"getNativeHandler","value":function(){return this.canvas}},{"key":"getDpr","value":function(){return this.canvas.dpr}},{"key":"addEventListener","value":function(nt,at){this.eventManager.addEventListener(nt,at)}},{"key":"removeEventListener","value":function(nt,at){this.eventManager.removeEventListener(nt,at)}},{"key":"dispatchEvent","value":function(nt){var at=nt.type;return!!this.eventManager.cache[at]&&(nt.changedTouches&&nt.changedTouches[0]&&(nt.offsetX=nt.changedTouches[0].x,nt.changedTouches[0].offsetX=nt.changedTouches[0].x,nt.changedTouches[0].clientX=nt.changedTouches[0].x,nt.offsetY=nt.changedTouches[0].y,nt.changedTouches[0].offsetY=nt.changedTouches[0].y,nt.changedTouches[0].clientY=nt.changedTouches[0].y),nt.preventDefault=function(){},nt.stopPropagation=function(){},this.eventManager.cache[at].listener&&this.eventManager.cache[at].listener.forEach((function(at){at(nt)})),!0)}},{"key":"getStyle","value":function(){return{}}},{"key":"setStyle","value":function(nt){}},{"key":"getBoundingClientRect","value":function(){var nt=this.getWH();return{"x":0,"y":0,"width":nt.width,"height":nt.height,"left":0,"top":0,"right":0,"bottom":0}}},{"key":"clearViewBox","value":function(nt){var at=this.viewBox,lt=this.getContext(),Rt=this.getDpr();lt.nativeContext.save(),lt.nativeContext.setTransform(Rt,0,0,Rt,0,0),lt.clearRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1),nt&&(lt.fillStyle=nt,lt.fillRect(at.x1,at.y1,at.x2-at.x1,at.y2-at.y1)),lt.nativeContext.restore()}}])}(Nx);sT.env="harmony",sT=$T([Hs(),eC(0,Gs(ml)),tC("design:paramtypes",[Object])],sT);var lT=new Rs((function(nt){nt(sT).toSelf(),nt(ch).toDynamicValue((function(nt){return nt.container.get(sT)})).whenTargetNamed(sT.env)})),hT=eA(nT,iT),oC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},sC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},fT=function(nt){function e(){var nt;r(this,e),(nt=n(this,e)).type="harmony",nt.supportEvent=!0,nt.supportsTouchEvents=!0;try{nt.supportsPointerEvents=!!globalThis.PointerEvent,nt.supportsMouseEvents=!!globalThis.MouseEvent}catch(at){nt.supportsPointerEvents=!1,nt.supportsMouseEvents=!1}return nt.applyStyles=!0,nt.rafSTO=new pd(0),nt}return h(e,nt),o(e,[{"key":"configure","value":function(nt,at){nt.env===this.type&&nt.setActiveEnvContribution(this)}},{"key":"getDynamicCanvasCount","value":function(){return 9999}},{"key":"getStaticCanvasCount","value":function(){return 9999}},{"key":"loadImage","value":function(nt){}},{"key":"loadSvg","value":function(nt){return Promise.reject()}},{"key":"createCanvas","value":function(nt){return at=nt.width,lt=nt.height,Rt=nt.id,Bt=new OffscreenCanvas(at,lt),Lt=Bt.getContext("2d"),new kC({"width":at,"height":lt,"context":Lt,"_c":Bt,"getBoundingClientRect":function(){return{"width":at,"height":lt}},"getContext":function(){return Lt}},Lt,1,at,lt,Rt);var at,lt,Rt,Bt,Lt}},{"key":"createOffscreenCanvas","value":function(nt){}},{"key":"releaseCanvas","value":function(nt){}},{"key":"getDevicePixelRatio","value":function(){return 1}},{"key":"getRequestAnimationFrame","value":function(){var nt=this;return function(at){return nt.rafSTO.call(at)}}},{"key":"getCancelAnimationFrame","value":function(){var nt=this;return function(at){nt.rafSTO.clear(at)}}},{"key":"mapToCanvasPoint","value":function(nt){var at;return null===(at=null==nt?void 0:nt.type)||void 0===at||at.startsWith("mouse"),nt}},{"key":"addEventListener","value":function(nt,at,lt){return null}},{"key":"removeEventListener","value":function(nt,at,lt){return null}},{"key":"dispatchEvent","value":function(nt){return null}},{"key":"getElementById","value":function(nt){return null}},{"key":"getRootElement","value":function(){return null}},{"key":"getDocument","value":function(){return null}},{"key":"release","value":function(){}}])}(jx);fT=oC([Hs(),sC("design:paramtypes",[])],fT);var vT=new Rs((function(nt){vT.isHarmonyBound||(vT.isHarmonyBound=!0,nt(fT).toSelf().inSingletonScope(),nt(yl).toService(fT))}));function cC(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];cC.__loaded||(cC.__loaded=!0,nt.load(vT),nt.load(hT),nt.load(lT),at&&aM(nt))}vT.isHarmonyBound=!1,cC.__loaded=!1;var hC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},dC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},pC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},_T=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="arc",at.numberType=av,at}return h(e,nt),o(e)}(ow);_T=hC([Hs(),pC(0,Gs(I_)),dC("design:paramtypes",[Object])],_T);var bT=!1,xT=new Rs((function(nt,at,lt,Rt){bT||(bT=!0,nt(OS).to(_T).inSingletonScope(),nt(oA).toService(OS))})),yC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},mC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},_C=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},wT=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at}return h(e,nt),o(e)}(Qw);wT=yC([Hs(),_C(0,Gs(N_)),mC("design:paramtypes",[Object])],wT);var MT=!1,RT=new Rs((function(nt,at,lt,Rt){MT||(MT=!0,nt(NS).to(wT).inSingletonScope(),nt(oA).toService(NS))})),DT=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"contains","value":function(nt,at,lt){if(!nt.AABBBounds.containsPoint(at))return!1;if("imprecise"===nt.attribute.pickMode)return!0;var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;Rt.highPerformanceSave();var Bt=nt.getGraphicTheme(),Lt=this.transform(nt,Bt,Rt),Ht=Lt.x,jt=Lt.y,$t=Lt.z,Kt=Lt.lastModelMatrix,te=at;if(Rt.camera){te=at.clone();var ne=nt.parent.globalTransMatrix;te.x=ne.a*at.x+ne.c*at.y+ne.e,te.y=ne.b*at.x+ne.d*at.y+ne.f}this.canvasRenderer.z=$t;var re=!1;return this.canvasRenderer.drawShape(nt,Rt,Ht,jt,{},null,(function(nt){return!!re||(re=nt.isPointInPath(te.x,te.y))}),(function(nt,at,lt){if(re)return!0;var Bt=at.lineWidth||lt.lineWidth,Lt=at.pickStrokeBuffer||lt.pickStrokeBuffer,Ht=at.keepStrokeScale||lt.keepStrokeScale;return Rt.lineWidth=Ht?Bt+Lt:ic(Rt,Bt+Lt,Rt.dpr),re=nt.isPointInStroke(te.x,te.y)})),this.canvasRenderer.z=0,Rt.modelMatrix!==Kt&&Og.free(Rt.modelMatrix),Rt.modelMatrix=Kt,Rt.highPerformanceRestore(),re}}])}(zm),AC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},wC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},MC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},LT=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="line",at.numberType=dv,at}return h(e,nt),o(e)}(DT);LT=AC([Hs(),MC(0,Gs(z_)),wC("design:paramtypes",[Object])],LT);var HT=!1,jT=new Rs((function(nt,at,lt,Rt){HT||(HT=!0,nt(HS).to(LT).inSingletonScope(),nt(oA).toService(HS))})),PC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},RC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},BC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},NT=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="area",at.numberType=sv,at}return h(e,nt),o(e)}(ow);NT=PC([Hs(),BC(0,Gs(O_)),RC("design:paramtypes",[Object])],NT);var UT=!1,YT=new Rs((function(nt,at,lt,Rt){UT||(UT=!0,nt(LS).to(NT).inSingletonScope(),nt(oA).toService(LS))})),qT=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"contains","value":function(nt,at,lt){var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;var Bt=nt.getGraphicTheme();Rt.highPerformanceSave();var Lt=this.transform(nt,Bt,Rt),Ht=Lt.x,jt=Lt.y,$t=Lt.z,Kt=Lt.lastModelMatrix,te=at;if(Rt.camera){te=at.clone();var ne=nt.parent.globalTransMatrix;te.x=ne.a*at.x+ne.c*at.y+ne.e,te.y=ne.b*at.x+ne.d*at.y+ne.f}this.canvasRenderer.z=$t;var re=!1;return this.canvasRenderer.drawShape(nt,Rt,Ht,jt,lt,null,(function(nt,at,lt){return!!re||(re=nt.isPointInPath(te.x,te.y))})),this.canvasRenderer.z=0,Rt.modelMatrix!==Kt&&Og.free(Rt.modelMatrix),Rt.modelMatrix=Kt,Rt.highPerformanceRestore(),re}}])}(zm),FC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},zC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},HC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},QT=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="symbol",at.numberType=_v,at}return h(e,nt),o(e,[{"key":"contains","value":function(nt,at,lt){var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;var Bt=nt.getParsedPath();if(!Rt.camera){if(!nt.AABBBounds.containsPoint(at))return!1;if(Bt.isSvg||"imprecise"===nt.attribute.pickMode)return!0}Rt.highPerformanceSave();var Lt=nt.getGraphicTheme(),Ht=this.transform(nt,Lt,Rt),jt=Ht.x,$t=Ht.y,Kt=Ht.z,te=Ht.lastModelMatrix,ne=at;if(Rt.camera){ne=at.clone();var re=nt.parent.globalTransMatrix;ne.x=re.a*at.x+re.c*at.y+re.e,ne.y=re.b*at.x+re.d*at.y+re.f}this.canvasRenderer.z=Kt;var ae=!1;return this.canvasRenderer.drawShape(nt,Rt,jt,$t,{},null,(function(nt,at,lt){return!!ae||(ae=nt.isPointInPath(ne.x,ne.y))}),(function(nt,at,lt){if(ae)return!0;var Bt=at.lineWidth||lt.lineWidth,Lt=at.pickStrokeBuffer||lt.pickStrokeBuffer,Ht=at.keepStrokeScale||lt.keepStrokeScale;return Rt.lineWidth=Ht?Bt+Lt:ic(Rt,Bt+Lt,Rt.dpr),ae=nt.isPointInStroke(ne.x,ne.y)})),this.canvasRenderer.z=0,Rt.modelMatrix!==te&&Og.free(Rt.modelMatrix),Rt.modelMatrix=te,Rt.highPerformanceRestore(),ae}}])}(qT);QT=FC([Hs(),HC(0,Gs(G_)),zC("design:paramtypes",[Object])],QT);var tE=!1,rE=new Rs((function(nt,at,lt,Rt){tE||(tE=!0,nt(WS).to(QT).inSingletonScope(),nt(oA).toService(WS))})),GC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},WC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},UC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},aE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="circle",at.numberType=lv,at}return h(e,nt),o(e)}(ow);aE=GC([Hs(),UC(0,Gs(D_)),WC("design:paramtypes",[Object])],aE);var oE=!1,cE=new Rs((function(nt,at,lt,Rt){oE||(oE=!0,nt(FS).to(aE).inSingletonScope(),nt(oA).toService(FS))})),qC=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ZC=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},JC=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},hE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="text",at.numberType=bv,at}return h(e,nt),o(e,[{"key":"contains","value":function(nt,at,lt){var Rt=(null!=lt?lt:{}).pickContext;if(!Rt)return!1;var Bt=nt.AABBBounds;if(!Rt.camera)return!!Bt.containsPoint(at);Rt.highPerformanceSave();var Lt=nt.getGraphicTheme(),Ht=nt.attribute.keepDirIn3d,jt=!(void 0===Ht?Lt.keepDirIn3d:Ht),$t=this.transform(nt,Lt,Rt,jt),Kt=$t.x,te=$t.y,ne=$t.z,re=$t.lastModelMatrix;this.canvasRenderer.z=ne;var ae=at;if(Rt.camera){ae=at.clone();var oe=nt.parent.globalTransMatrix;ae.x=oe.a*at.x+oe.c*at.y+oe.e,ae.y=oe.b*at.x+oe.d*at.y+oe.f}var se=!1;return this.canvasRenderer.drawShape(nt,Rt,Kt,te,{},null,(function(at,lt,Rt){if(se)return!0;var Bt=nt.attribute,Ht=Bt.fontSize,jt=void 0===Ht?Lt.fontSize:Ht,$t=Bt.textBaseline,re=void 0===$t?Lt.textBaseline:$t,oe=Bt.textAlign,le=void 0===oe?Lt.textAlign:oe,ue=nt.AABBBounds,ce=ue.height(),he=ue.width(),de=pg(re,ce,jt),fe=dg(le,he);return at.rect(fe+Kt,de+te,he,ce,ne),se=at.isPointInPath(ae.x,ae.y)}),(function(nt,at,lt){return se})),this.canvasRenderer.z=0,Rt.modelMatrix!==re&&Og.free(Rt.modelMatrix),Rt.modelMatrix=re,Rt.highPerformanceRestore(),se}}])}(qT);hE=qC([Hs(),JC(0,Gs(X_)),ZC("design:paramtypes",[Object])],hE);var dE=!1,gE=new Rs((function(nt,at,lt,Rt){dE||(dE=!0,nt(GS).to(hE).inSingletonScope(),nt(oA).toService(GS))})),eE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},iE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},nE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},yE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="path",at.numberType=fv,at}return h(e,nt),o(e)}(DT);yE=eE([Hs(),nE(0,Gs(H_)),iE("design:paramtypes",[Object])],yE);var mE=!1,kE=new Rs((function(nt,at,lt,Rt){mE||(mE=!0,nt(jS).to(yE).inSingletonScope(),nt(oA).toService(jS))})),sE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},lE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},uE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},SE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="polygon",at.numberType=pv,at}return h(e,nt),o(e)}(ow);SE=sE([Hs(),uE(0,Gs(j_)),lE("design:paramtypes",[Object])],SE);var AE=!1,CE=new Rs((function(nt,at,lt,Rt){AE||(AE=!0,nt(XS).to(SE).inSingletonScope(),nt(oA).toService(XS))})),pE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},fE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},vE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},EE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at}return h(e,nt),o(e)}(Sw);EE=pE([Hs(),vE(0,Gs(K_)),fE("design:paramtypes",[Object])],EE);var PE=!1,OE=new Rs((function(nt,at,lt,Rt){PE||(PE=!0,nt(tA).to(EE).inSingletonScope(),nt(oA).toService(tA))})),_E=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},bE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},xE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},DE=o((function t(nt){r(this,t),this.canvasRenderer=nt,this.type="richtext",this.numberType=mv}),[{"key":"contains","value":function(nt,at,lt){return!!nt.AABBBounds.containsPoint(at)}}]);DE=_E([Hs(),xE(0,Gs($_)),bE("design:paramtypes",[Object])],DE);var LE=!1,jE=new Rs((function(nt,at,lt,Rt){LE||(LE=!0,nt(JS).to(DE).inSingletonScope(),nt(oA).toService(JS))})),wE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},ME=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},TE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},NE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="image",at.numberType=hv,at}return h(e,nt),o(e)}(ow);NE=wE([Hs(),TE(0,Gs(Z_)),ME("design:paramtypes",[Object])],NE);var VE=!1,YE=new Rs((function(nt,at,lt,Rt){VE||(VE=!0,nt(zS).to(NE).inSingletonScope(),nt(oA).toService(zS))})),RE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},BE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},IE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},XE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="rect3d",at.numberType=yv,at.themeType="rect",at}return h(e,nt),o(e)}(qT);XE=RE([Hs(),IE(0,Gs(V_)),BE("design:paramtypes",[Object])],XE);var $E=!1,qE=new Rs((function(nt,at,lt,Rt){$E||($E=!0,nt(VS).to(XE).inSingletonScope(),nt(oA).toService(VS))})),FE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},zE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},HE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},KE=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="arc3d",at.numberType=ov,at.themeType="arc",at}return h(e,nt),o(e)}(qT);KE=FE([Hs(),HE(0,Gs(B_)),zE("design:paramtypes",[Object])],KE);var JE=!1,eP=new Rs((function(nt,at,lt,Rt){JE||(JE=!0,nt(DS).to(KE).inSingletonScope(),nt(oA).toService(DS))})),GE=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},WE=function(nt,at){if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(nt,at)},UE=function(nt,at){return function(lt,Rt){at(lt,Rt,nt)}},nP=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).canvasRenderer=nt,at.type="pyramid3d",at.numberType=vv,at.themeType="polygon",at}return h(e,nt),o(e)}(qT);nP=GE([Hs(),UE(0,Gs(q_)),WE("design:paramtypes",[Object])],nP);var aP=!1,sP=new Rs((function(nt,at,lt,Rt){aP||(aP=!0,nt(ZS).to(nP).inSingletonScope(),nt(oA).toService(ZS))})),uP=cx();function ZE(){ZE.__loaded||(ZE.__loaded=!0,Hy.RegisterGraphicCreator("arc",yy),Mc.load(Yx),Mc.load(uP?xT:uw))}ZE.__loaded=!1;var hP=ZE;function QE(){QE.__loaded||(QE.__loaded=!0,Hy.RegisterGraphicCreator("arc3d",_y),Rx(),Ix(),Mc.load(Ok),Mc.load(eP))}QE.__loaded=!1;var pP=QE;function tP(){tP.__loaded||(tP.__loaded=!0,Hy.RegisterGraphicCreator("area",fy),Mc.load(Qx),Mc.load(uP?YT:vw))}tP.__loaded=!1;var vP=tP;function iP(){iP.__loaded||(iP.__loaded=!0,Hy.RegisterGraphicCreator("circle",Rg),Mc.load(nk),Mc.load(uP?cE:_w))}iP.__loaded=!1;var yP=iP;function rP(){rP.__loaded||(rP.__loaded=!0,Hy.RegisterGraphicCreator("glyph",qg),Mc.load(vk),Mc.load(uP?OE:Ew))}rP.__loaded=!1;var _P=rP;function oP(){oP.__loaded||(oP.__loaded=!0,Hy.RegisterGraphicCreator("group",Pv))}oP.__loaded=!1;var xP=oP;function lP(){lP.__loaded||(lP.__loaded=!0,Hy.RegisterGraphicCreator("image",ey),Mc.load(xk),Mc.load(uP?YE:Ow))}lP.__loaded=!1;var SP=lP;function cP(){cP.__loaded||(cP.__loaded=!0,Hy.RegisterGraphicCreator("line",Ng),Mc.load(Kx),Mc.load(uP?jT:zw))}cP.__loaded=!1;var wP=cP;function dP(){dP.__loaded||(dP.__loaded=!0,Hy.RegisterGraphicCreator("path",hy),Mc.load(uk),Mc.load(uP?kE:Xw))}dP.__loaded=!1;var TP=dP;function fP(){fP.__loaded||(fP.__loaded=!0,Hy.RegisterGraphicCreator("polygon",ky),Mc.load(hk),Mc.load(uP?CE:Gw))}fP.__loaded=!1;var EP=fP;function gP(){gP.__loaded||(gP.__loaded=!0,Hy.RegisterGraphicCreator("pyramid3d",Ay),Rx(),Ix(),Mc.load(jk),Mc.load(sP))}gP.__loaded=!1;var IP=gP;function mP(){mP.__loaded||(mP.__loaded=!0,Hy.RegisterGraphicCreator("rect",Wg),Mc.load($x),Mc.load(uP?RT:nC))}mP.__loaded=!1;var BP=mP;function bP(){bP.__loaded||(bP.__loaded=!0,Hy.RegisterGraphicCreator("rect3d",Xg),Mc.load(Ck),Mc.load(qE))}bP.__loaded=!1;var OP=bP;function kP(){kP.__loaded||(kP.__loaded=!0,Hy.RegisterGraphicCreator("richtext",ly),Mc.load(_k),Mc.load(uP?jE:aC))}kP.__loaded=!1;var DP=kP;function AP(){AP.__loaded||(AP.__loaded=!0,Hy.RegisterGraphicCreator("shadowRoot",My))}AP.__loaded=!1;var LP=AP;function MP(){MP.__loaded||(MP.__loaded=!0,Hy.RegisterGraphicCreator("symbol",zg),Mc.load(tk),Mc.load(uP?rE:fC))}MP.__loaded=!1;var FP=MP;function CP(){CP.__loaded||(CP.__loaded=!0,Hy.RegisterGraphicCreator("text",Dg),Mc.load(ak),Mc.load(uP?gE:bC))}CP.__loaded=!1;var zP=CP;function PP(nt){var at=3735928559^(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return at=(at=3432918353*((at=(2654435769^at)+(at<<6)+(at>>2))^nt))<<15|at>>>17,at^=at<<25,at+=at<<9,at^=at>>4,at^=at<<18,((at|=1)>>>0)%2147483647/2147483647}function RP(){xP(),BP()}var HP,jP=-.5*Math.PI,NP=1.5*Math.PI,WP="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol";!function(nt){nt.selected="selected",nt.selectedReverse="selected_reverse",nt.hover="hover",nt.hoverReverse="hover_reverse"}(HP||(HP={}));var GP=l(l(l(l({},HP.selectedReverse,{}),HP.selected,{}),HP.hover,{}),HP.hoverReverse,{}),ZP={"container":"","width":30,"height":30,"style":{}},gR="scrollDrag",yR={"debounce":qt,"throttle":Zt};RP();var mR=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="scrollbar",lt._onRailPointerDown=function(nt){var at,Rt=nt.viewX,Bt=nt.viewY,Lt=lt.attribute,Ht=Lt.direction,jt=Lt.width,$t=Lt.height,Kt=Lt.range,te=lt._sliderSize,ne=g(lt._getScrollRange(),2),re=ne[0],ae=ne[1];if("vertical"===Ht){var oe=Bt-lt._viewPosition.y,se=Ut(oe-te/2,re,ae);at=oe/$t,lt._slider.setAttribute("y",se,!0)}else{var le=Rt-lt._viewPosition.x,ue=Ut(le-te/2,re,ae);at=le/jt,lt._slider.setAttribute("x",ue,!0)}lt.setScrollRange([at-(Kt[1]-Kt[0])/2,at+(Kt[1]-Kt[0])/2],!1),lt.stage&&!lt.stage.autoRender&&lt.stage.renderNextFrame()},lt._onSliderPointerDown=function(nt){var at=lt.attribute.stopSliderDownPropagation;(void 0===at||at)&&nt.stopPropagation();var Rt=lt.attribute.direction,Bt=lt.stage.eventPointTransform(nt),Lt=Bt.x,Ht=Bt.y;lt._prePos="horizontal"===Rt?Lt:Ht,lt._dispatchEvent("scrollDown",{"pos":lt._prePos,"event":nt}),"browser"===ax.env?(ax.addEventListener("pointermove",lt._onSliderPointerMoveWithDelay,{"capture":!0}),ax.addEventListener("pointerup",lt._onSliderPointerUp)):(lt.stage.addEventListener("pointermove",lt._onSliderPointerMoveWithDelay,{"capture":!0}),lt.stage.addEventListener("pointerup",lt._onSliderPointerUp),lt.stage.addEventListener("pointerupoutside",lt._onSliderPointerUp))},lt._computeScrollValue=function(nt){var at,Rt,Bt=lt.attribute.direction,Lt=lt.stage.eventPointTransform(nt),Ht=Lt.x,jt=Lt.y,$t=lt.getSliderRenderBounds(),Kt=$t.width,te=$t.height;return at="vertical"===Bt?((Rt=jt)-lt._prePos)/te:((Rt=Ht)-lt._prePos)/Kt,[Rt,at]},lt._onSliderPointerMove=function(nt){var at=lt.attribute.stopSliderMovePropagation;(void 0===at||at)&&nt.stopPropagation();var Rt=lt.getScrollRange(),Bt=g(lt._computeScrollValue(nt),2),Lt=Bt[0],Ht=Bt[1];lt.setScrollRange([Rt[0]+Ht,Rt[1]+Ht],!0),lt._prePos=Lt},lt._onSliderPointerMoveWithDelay=0===lt.attribute.delayTime?lt._onSliderPointerMove:yR[lt.attribute.delayType](lt._onSliderPointerMove,lt.attribute.delayTime),lt._onSliderPointerUp=function(nt){nt.preventDefault();var at=lt.attribute,Rt=at.range,Bt=at.limitRange,Lt=void 0===Bt?[0,1]:Bt,Ht=lt.getScrollRange(),jt=g(lt._computeScrollValue(nt),2);jt[0];var $t=jt[1],Kt=[Ht[0]+$t,Ht[1]+$t];lt._dispatchEvent("scrollUp",{"pre":Rt,"value":Yt(Kt,Lt[0],Lt[1])}),"browser"===ax.env?(ax.removeEventListener("pointermove",lt._onSliderPointerMoveWithDelay,{"capture":!0}),ax.removeEventListener("pointerup",lt._onSliderPointerUp)):(lt.stage.removeEventListener("pointermove",lt._onSliderPointerMoveWithDelay,{"capture":!0}),lt.stage.removeEventListener("pointerup",lt._onSliderPointerUp),lt.stage.removeEventListener("pointerupoutside",lt._onSliderPointerUp))},lt}return h(e,nt),o(e,[{"key":"setScrollRange","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=this.attribute,Rt=lt.direction,Bt=void 0===Rt?"horizontal":Rt,Lt=lt.limitRange,Ht=void 0===Lt?[0,1]:Lt,jt=lt.range,$t=lt.realTime,Kt=void 0===$t||$t,te=Yt(nt,Ht[0],Ht[1]);if(at){var ne=this._getSliderPos(te);if(this._slider){var re=ne[1]-ne[0];this._sliderSize=re,"horizontal"===Bt?this._slider.setAttributes({"x":ne[0],"width":re},!0):this._slider.setAttributes({"y":ne[0],"height":re},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=te,Kt&&this._dispatchEvent(gR,{"pre":jt,"value":te})}},{"key":"getScrollRange","value":function(){return this.attribute.range}},{"key":"bindEvents","value":function(){if(!this.attribute.disableTriggerEvent){var nt=this.attribute,at=nt.delayType,lt=void 0===at?"throttle":at,Rt=nt.delayTime,Bt=void 0===Rt?0:Rt;this._rail&&this._rail.addEventListener("pointerdown",yR[lt](this._onRailPointerDown,Bt)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown)}}},{"key":"render","value":function(){this._reset();var nt=this.attribute,at=nt.direction,lt=void 0===at?"horizontal":at,Rt=nt.width,Bt=nt.height,Lt=nt.range,Ht=nt.limitRange,jt=void 0===Ht?[0,1]:Ht,$t=nt.railStyle,Kt=nt.sliderStyle,te=nt.padding,ne=void 0===te?2:te,re=this.createOrUpdateChild("scrollbar-container",{},"group"),ae=re.createOrUpdateChild("scrollbar-rail",Object.assign({"x":0,"y":0,"width":Rt,"height":Bt},$t),"rect");this._rail=ae;var oe,se=this.getSliderRenderBounds(),le=this._getSliderPos(Yt(Lt,jt[0],jt[1])),ue=le[1]-le[0];this._sliderSize=ue,oe="horizontal"===lt?{"x":le[0],"y":se.y1,"width":ue,"height":se.height}:{"x":se.x1,"y":le[0],"width":se.width,"height":ue};var ce=re.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},oe),{"cornerRadius":this._getDefaultSliderCornerRadius()}),Kt),{"boundsPadding":Ci(ne),"pickMode":"imprecise"}),"rect");this._slider=ce,this._container=re;var he=this._container.AABBBounds;this._viewPosition={"x":he.x1,"y":he.y1}}},{"key":"getSliderRenderBounds","value":function(){if(this._sliderRenderBounds)return this._sliderRenderBounds;var nt=this.attribute,at=nt.width,lt=nt.height,Rt=nt.padding,Bt=g(Ci(void 0===Rt?2:Rt),4),Lt=Bt[0],Ht=Bt[1],jt=Bt[2],$t=Bt[3],Kt={"x1":$t,"y1":Lt,"x2":at-Ht,"y2":lt-jt,"width":Math.max(0,at-($t+Ht)),"height":Math.max(0,lt-(Lt+jt))};return this._sliderRenderBounds=Kt,Kt}},{"key":"_getDefaultSliderCornerRadius","value":function(){var nt=this.attribute,at=nt.direction;if(nt.round){var lt=this.getSliderRenderBounds(),Rt=lt.width,Bt=lt.height;return"horizontal"===at?Bt:Rt}return 0}},{"key":"_getSliderPos","value":function(nt){var at=this.attribute.direction,lt=this.getSliderRenderBounds(),Rt=lt.width,Bt=lt.height,Lt=lt.x1,Ht=lt.y1;return"horizontal"===at?[Rt*nt[0]+Lt,Rt*nt[1]+Lt]:[Bt*nt[0]+Ht,Bt*nt[1]+Ht]}},{"key":"_getScrollRange","value":function(){if(this._sliderLimitRange)return this._sliderLimitRange;var nt=this.attribute,at=nt.limitRange,lt=void 0===at?[0,1]:at,Rt=nt.direction,Bt=g(Yt(lt,0,1),2),Lt=Bt[0],Ht=Bt[1],jt=this.getSliderRenderBounds(),$t=jt.width,Kt=jt.height,te=jt.x1,ne=jt.y1,re=this._sliderSize;return"horizontal"===Rt?Yt([te+Lt*$t,te+Ht*$t],te,$t-re):Yt([ne+Lt*Kt,ne+Ht*Kt],ne,Kt-re)}},{"key":"_reset","value":function(){this._sliderRenderBounds=null,this._sliderLimitRange=null}}])}(xS);mR.defaultAttributes={"direction":"horizontal","round":!0,"sliderSize":20,"sliderStyle":{"fill":"rgba(0, 0, 0, .5)"},"railStyle":{"fill":"rgba(0, 0, 0, .0)"},"padding":2,"scrollRange":[0,1],"delayType":"throttle","delayTime":0,"realTime":!0};var bR,VP=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},xR=bR=o((function t(){var nt=this;r(this,t),this.name="scrollbar",this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.key=this.name+this._uid,this.scroll=function(at){var lt,Rt,Bt=at.target,Lt=nt.getScrollContainer(Bt);if(Lt||nt.scrollContainer){if(!Lt&&nt.scrollContainer){if(!nt.scrollContainer.g.stage||nt.scrollContainer.g.stage!==Bt.stage)return;var Ht=nt.formatScrollContainer(nt.scrollContainer.g);if(!Ht)return void nt.clearScrollbar(nt.scrollContainer.g,"all");nt.scrollContainer.showH&&!Ht.showH&&nt.clearScrollbar(nt.scrollContainer.g,"horizontal"),nt.scrollContainer.showV&&!Ht.showV&&nt.clearScrollbar(nt.scrollContainer.g,"vertical"),nt.scrollContainer=Ht}else Lt&&nt.scrollContainer&&Lt.g!==nt.scrollContainer.g&&nt.clearScrollbar(nt.scrollContainer.g,"all");if(nt.scrollContainer=null!=Lt?Lt:nt.scrollContainer,Lt){var jt=Lt.g;if(jt){var $t=jt.attribute,Kt=$t.width,te=$t.height,ne=$t.scrollX,re=void 0===ne?0:ne,ae=$t.scrollY,oe=void 0===ae?0:ae,se=re,le=oe,ue=Lt.showH,ce=Lt.showV;nt.scrollContainerBounds=(new mi).set(0,0,jt.attribute.width,jt.attribute.height),ue&&ue&&(fe(at.deltaX)>fe(at.deltaY)?(ue=ue&&!0,ce=ce&&!1):(ue=ue&&!1,ce=ce&&!0));var he=nt.childrenBounds.width(),de=nt.childrenBounds.height();ue&&((se=re-(null!==(lt=at.deltaX)&&void 0!==lt?lt:0))>0?se=0:se<Kt-he&&(se=Kt-he)),ce&&((le=oe-(null!==(Rt=at.deltaY)&&void 0!==Rt?Rt:0))>0?le=0:le<te-de&&(le=te-de)),jt.setAttributes({"scrollX":se,"scrollY":le}),nt.addOrUpdateScroll(ue,ce,jt.parent,jt)}}}},this.handleScrollBarChange=function(at){if(nt.scrollContainer&&nt.scrollContainerBounds&&nt.childrenBounds&&at&&at.target&&at.detail&&at.detail.value){var lt=at.target,Rt=at.detail.value;if("horizontal"===lt.attribute.direction){var Bt=nt.childrenBounds.width();nt.scrollContainer.g.setAttributes({"scrollX":-Rt[0]*Bt})}else{var Lt=nt.childrenBounds.height();nt.scrollContainer.g.setAttributes({"scrollY":-Rt[0]*Lt})}}}}),[{"key":"activate","value":function(nt){this.pluginService=nt;var at=this.pluginService.stage;this.childrenBounds=new _i,at.addEventListener("wheel",this.scroll),this.params=bR.defaultParams}},{"key":"initEventOfScrollbar","value":function(nt,at,lt){nt.addEventListener("pointerover",(function(){at.setAttribute("visibleAll",!0)})),nt.addEventListener("pointermove",(function(){at.setAttribute("visibleAll",!0)})),nt.addEventListener("pointerout",(function(){at.setAttribute("visibleAll",!1)})),at.addEventListener("pointerover",(function(){at.setAttribute("visibleAll",!0)})),at.addEventListener("pointerout",(function(){at.setAttribute("visibleAll",!0)})),at.addEventListener("scrollUp",this.handleScrollBarChange),at.addEventListener(gR,this.handleScrollBarChange)}},{"key":"addOrUpdateScroll","value":function(nt,at,lt,Rt){if(nt){var Bt=this.addOrUpdateHScroll(Rt,lt,!0),Lt=Bt.scrollBar;Bt.isUpdate||this.initEventOfScrollbar(Rt,Lt,!0)}else this.clearScrollbar(Rt,"horizontal");if(at){var Ht=this.addOrUpdateHScroll(Rt,lt,!1),jt=Ht.scrollBar;Ht.isUpdate||this.initEventOfScrollbar(Rt,jt,!1)}else this.clearScrollbar(Rt,"vertical")}},{"key":"getDirection","value":function(nt){return nt?"horizontal":"vertical"}},{"key":"addOrUpdateHScroll","value":function(nt,at,lt){var Rt,Bt,Lt=this.getDirection(lt),Ht="".concat(null!==(Rt=nt.name)&&void 0!==Rt?Rt:nt._uid,"_").concat(this.getDirection(lt),"_").concat(this.name),jt=at.children.filter((function(nt){return nt.name===Ht})),$t=!0,Kt=jt[0],te=this.scrollContainer.g.attribute,ne=te.y,re=void 0===ne?0:ne,ae=te.dy,oe=void 0===ae?0:ae,se=te.x,le=void 0===se?0:se,ue=te.dx,ce=void 0===ue?0:ue,he=te.height,de=te.width,fe=te.zIndex,pe={"x":0,"y":0,"direction":Lt,"zIndex":(void 0===fe?0:fe)+1,"visibleAll":!0,"padding":[2,0],"railStyle":{"fill":"rgba(0, 0, 0, .1)"},"range":[0,.05]};lt?(pe.width=this.scrollContainerBounds.width(),pe.height=12):(pe.height=this.scrollContainerBounds.height(),pe.width=12),Kt?jt.length>1&&jt.forEach((function(nt,at){var lt;at&&(null===(lt=nt.parent)||void 0===lt||lt.removeChild(nt))})):($t=!1,(Kt=new mR(pe)).name=Ht,at.add(Kt),Kt.isScrollBar=!0);var ve=this.childrenBounds,Ae=nt.attribute,we=Ae.scrollX,Ce=Ae.scrollY;if(lt){var je=Math.min(this.scrollContainerBounds.width()/ve.width(),1),Ne=Math.max(Math.min(we/this.childrenBounds.width(),0),je-1);pe.x=le+ce,pe.y=re+oe+he-(null!==(Bt=pe.height)&&void 0!==Bt?Bt:0),pe.range=[-Ne,-Ne+je]}else{var Ve=Math.min(this.scrollContainerBounds.height()/ve.height(),1),Ge=Math.max(Math.min(Ce/this.childrenBounds.height(),0),Ve-1);pe.x=le+ce+de-this.scrollContainerBounds.width(),pe.y=re+oe,pe.range=[-Ge,-Ge+Ve]}return Kt.setAttributes(pe),{"scrollBar":Kt,"isUpdate":$t}}},{"key":"clearScrollbar","value":function(nt,at){nt.parent&&nt.parent.children.filter((function(nt){return nt.isScrollBar&&("all"===at||nt.attribute.direction===at)})).forEach((function(nt){nt.parent.removeChild(nt)}))}},{"key":"formatScrollContainer","value":function(nt){if(!nt||"group"!==nt.type||!nt.attribute)return null;var at=nt.attribute,lt=at.overflow,Rt=at.width,Bt=at.height;if(!lt||"hidden"===lt)return null;var Lt=!1,Ht=!1;"scroll"===lt?(Lt=!0,Ht=!0):Ht=!(Lt="scroll-x"===lt);var jt=this.childrenBounds;return jt.clear(),nt.forEachChildren((function(nt){jt.union(nt.AABBBounds)})),nt.AABBBounds.empty()||(Lt&&(Lt=Rt<jt.width()),Ht&&(Ht=Bt<jt.height())),Lt||Ht?{"g":nt,"showH":Lt,"showV":Ht}:null}},{"key":"getScrollContainer","value":function(nt){for(var at=nt;at;){var lt=this.formatScrollContainer(at);if(lt)return lt;at=at.parent}return null}},{"key":"deactivate","value":function(nt){this.pluginService.stage.removeEventListener("wheel",this.scroll)}}]);xR.defaultParams={"timeout":500},xR=bR=VP([Hs()],xR);var kR=new Rs((function(nt,at,lt,Rt){lt(xR)||(nt(xR).toSelf(),nt(Pb).toService(xR))}));function UP(nt,at){nt.forEachChildren((function(nt){var lt=at(nt);nt.isContainer&&!lt&&UP(nt,at)}))}var YP=function(nt){return!j(nt)&&!1!==nt.visible};function XP(nt){return nt>=0&&nt<Math.PI/2||nt>3*Math.PI/2&&nt<=2*Math.PI}function KP(nt,at,lt){return Math.abs(nt-at)<lt}function qP(nt,at,lt){return nt?{"textAlign":"right","textBaseline":"middle"}:{"textAlign":at<Math.PI&&lt.toLocaleLowerCase().includes("top")||at>Math.PI&&lt.toLocaleLowerCase().includes("bottom")?"left":at<Math.PI&&lt.toLocaleLowerCase().includes("bottom")||at>Math.PI&&lt.toLocaleLowerCase().includes("top")?"right":"center","textBaseline":at<Math.PI&&lt.includes("inside")||at>Math.PI&&!lt.includes("inside")?"bottom":"top"}}var SR=["#ffffff","#000000"];function JP(nt,at,lt,Rt,Bt,Lt){if("string"!=typeof nt||"string"!=typeof at)return nt;var Ht=new Wi(nt).toHex(),jt=new Wi(at).toHex();return QP(Ht,jt,lt,Rt,Lt)?Ht:function(nt,at,lt,Rt,Bt,Lt){var Ht=[];Bt&&(Bt instanceof Array?Ht.push.apply(Ht,m(Bt)):Ht.push(Bt)),Ht.push.apply(Ht,SR);for(var jt=0,$t=Ht;jt<$t.length;jt++){var Kt=$t[jt];if(nt!==Kt&&QP(Kt,at,lt,Rt,Lt))return Kt}}(Ht,jt,lt,Rt,Bt,Lt)}function QP(nt,at,lt,Rt,Bt){if("lightness"===Bt){var Lt=Wi.getColorBrightness(new Wi(at));return Wi.getColorBrightness(new Wi(nt))<.5?Lt>=.5:Lt<.5}return Rt?$P(nt,at)>Rt:"largeText"===lt?$P(nt,at)>3:$P(nt,at)>4.5}function $P(nt,at){var lt=tR(nt),Rt=tR(at);return((lt>Rt?lt:Rt)+.05)/((lt>Rt?Rt:lt)+.05)}function tR(nt){var at=function(nt){for(var at="",lt="",Rt="",Bt="#"===nt[0]?1:0,Lt=Bt;Lt<nt.length;Lt++)"#"!==nt[Lt]&&(Lt<Bt+2?at+=nt[Lt]:Lt<Bt+4?lt+=nt[Lt]:Lt<Bt+6&&(Rt+=nt[Lt]));return[parseInt(at,16),parseInt(lt,16),parseInt(Rt,16)]}(nt),lt=at[0]/255,Rt=at[1]/255,Bt=at[2]/255;return.2126*(lt<=.03928?lt/12.92:Math.pow((lt+.055)/1.055,2.4))+.7152*(Rt<=.03928?Rt/12.92:Math.pow((Rt+.055)/1.055,2.4))+.0722*(Bt<=.03928?Bt/12.92:Math.pow((Bt+.055)/1.055,2.4))}function eR(nt,at,lt,Rt){var Bt;switch(nt){case"base":Bt=at;break;case"invertBase":Bt=lt;break;case"similarBase":Bt=Rt}return Bt}function iR(nt,at){return[nt[0]*at,nt[1]*at]}function nR(nt){var at=g(nt,2),lt=at[0],Rt=at[1];return Math.sqrt(lt*lt+Rt*Rt)}function rR(nt,at,lt){var Rt=function(nt,at){var lt=g(nt,2),Rt=lt[0],Bt=lt[1],Lt=g(at,2),Ht=Lt[0],jt=Lt[1],$t=Math.sqrt((Rt*Rt+Bt*Bt)*(Ht*Ht+jt*jt)),Kt=$t&&(Rt*Ht+Bt*jt)/$t;return Math.acos(Math.min(Math.max(Kt,-1),1))}(nt,at),Bt=me(nt,at)>=0;return lt?Bt?2*Math.PI-Rt:Rt:Bt?Rt:2*Math.PI-Rt}var aR=function(nt,at,lt,Rt){return new vi(Object.assign({"defaultFontParams":Object.assign({"fontFamily":WP,"fontSize":14},Rt),"getTextBounds":lt?void 0:Py,"specialCharSet":"-/: .,@%'\"~"+vi.ALPHABET_CHAR_SET+vi.ALPHABET_CHAR_SET.toUpperCase()},null!=at?at:{}),nt)};function oR(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!nt)return{"width":0,"height":0};var Rt=Py({"text":nt,"fontFamily":at.fontFamily||lt.fontFamily||WP,"fontSize":at.fontSize||lt.fontSize||12,"fontWeight":at.fontWeight||lt.fontWeight,"textAlign":at.textAlign||"center","textBaseline":at.textBaseline,"ellipsis":!!at.ellipsis,"maxLineWidth":at.maxLineWidth||1/0,"lineHeight":at.fontSize||lt.fontSize||12});return{"width":Rt.width(),"height":Rt.height()}}function sR(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type";return V(nt.text)&&"type"in nt.text?null!==(at=nt.text.type)&&void 0!==at?at:"text":Rt in nt&&null!==(lt=nt[Rt])&&void 0!==lt?lt:"text"}function lR(nt){var at,lt;return N(nt.maxLineWidth)&&(nt.maxWidth=nt.maxLineWidth,delete nt.maxLineWidth),nt.width=null!==(at=nt.width)&&void 0!==at?at:0,nt.height=null!==(lt=nt.height)&&void 0!==lt?lt:0,nt.textConfig=nt.text.text||nt.text,nt}function uR(nt){var at=sR(nt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type");return"rich"===at?Hy.richtext(lR(nt)):("html"===at?nt=function(nt){var at=nt.text,lt=nt._originText,Rt=at.text;return nt.html=Rt,nt.text=lt,nt.renderable=!1,nt}(nt):"react"===at&&(nt=function(nt){var at=nt.text,lt=nt._originText,Rt=at.text;return nt.react=Rt,nt.text=lt,nt.renderable=!1,nt}(nt)),Hy.text(nt))}function cR(nt,at,lt,Rt,Bt){"right"===nt?"center"===lt?at.setAttribute("x",Rt-Bt/2):"right"===lt||"end"===lt?at.setAttribute("x",Rt):at.setAttribute("x",Rt-Bt):"center"===lt?at.setAttribute("x",Rt+Bt/2):"right"===lt||"end"===lt?at.setAttribute("x",Rt+Bt):at.setAttribute("x",Rt)}var hR=function(nt,at){var lt=Math.atan2(nt,at);return lt<0?lt+2*Math.PI:lt};function dR(nt,at){var lt=at.x1,Rt=at.y1,Bt=at.x2,Lt=at.y2,Ht=nt.AABBBounds,jt=Ht.x1,$t=Ht.y1,Kt=Ht.x2,te=Ht.y2,ne=0,re=0;return jt<lt&&(ne=lt-jt),$t<Rt&&(re=Rt-$t),Kt>Bt&&(ne=Bt-Kt),te>Lt&&(re=Lt-te),{"dx":ne,"dy":re}}function pR(nt,at){var lt=dR(nt,at),Rt=lt.dx,Bt=lt.dy,Lt=nt.attribute,Ht=Lt.dx,jt=void 0===Ht?0:Ht,$t=Lt.dy,Kt=void 0===$t?0:$t;Rt&&nt.setAttribute("dx",Rt+jt),Bt&&nt.setAttribute("dy",Bt+Kt)}function fR(){xP(),BP(),FP(),DP(),zP()}var vR=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};fR();var AR=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="tag",lt._tagStates=[],lt._rectStates=[],lt._symbolStates=[],lt._textStates=[],lt}return h(e,nt),o(e,[{"key":"getBgRect","value":function(){return this._bgRect}},{"key":"getTextShape","value":function(){return this._textShape}},{"key":"render","value":function(){var nt,at,lt,Rt=this;this.cacheStates();var Bt,Lt,Ht,jt,$t=this.attribute,Kt=$t.text,te=void 0===Kt?"":Kt,ne=$t.textStyle,re=void 0===ne?{}:ne,ae=$t.shape,oe=void 0===ae?{}:ae,se=$t.panel,le=void 0===se?{}:se,ue=$t.space,ce=void 0===ue?4:ue,he=$t.minWidth,de=$t.maxWidth,fe=$t.padding,pe=void 0===fe?4:fe,ve=$t.visible,Ae=$t.state,we=$t.type,Ce=$t.textAlwaysCenter,je=$t.containerTextAlign,Ne=Ci(pe),Ve=this.createOrUpdateChild("tag-content",{"x":0,"y":0,"zIndex":1},"group"),Ge=-Ne[3],ti=-Ne[0],li=Ne[1]+Ne[3],hi=Ne[0]+Ne[2],di=0,fi=0,pi=oe.visible,vi=vR(oe,["visible"]);if(z(pi)){var mi=(null==vi?void 0:vi.size)||10,_i=Z(mi)?mi:Math.max(mi[0],mi[1]);Bt=Ve.createOrUpdateChild("tag-shape",Object.assign(Object.assign({"symbolType":"circle","size":mi,"strokeBoundsBuffer":0},vi),{"visible":pi,"x":_i/2,"y":_i/2}),"symbol"),ot(null==Ae?void 0:Ae.shape)||(Bt.states=Ae.shape),pi&&(fi=_i+ce)}if(li+=fi,di+=fi,function(nt){return"rich"===sR(nt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type")}({"text":te})||"rich"===we){var bi=Object.assign(Object.assign(Object.assign({},lR(Object.assign({"type":we,"text":te},re))),re),{"visible":N(te)&&!1!==ve,"x":di,"y":0});j(bi.lineHeight)&&(bi.lineHeight=re.fontSize),Ht=(Lt=Ve.createOrUpdateChild("tag-text",bi,"richtext")).AABBBounds.width(),jt=Lt.AABBBounds.height()}else{var Mi=Object.assign(Object.assign({"text":V(te)&&"type"in te&&"text"===te.type?te.text:te,"visible":N(te)&&!1!==ve,"lineHeight":null==re?void 0:re.fontSize},re),{"x":di,"y":0});j(Mi.lineHeight)&&(Mi.lineHeight=re.fontSize),Lt=Ve.createOrUpdateChild("tag-text",Mi,"text");var Ti=oR(Mi.text,re,null===(at=null===(nt=this.stage)||void 0===nt?void 0:nt.getTheme())||void 0===at?void 0:at.text);Ht=Ti.width,jt=Ti.height}li+=Ht;var Ii=null!==(lt=oe.size)&&void 0!==lt?lt:10,Bi=Z(Ii)?Ii:Math.max(Ii[0],Ii[1]);hi+=Math.max(jt,oe.visible?Bi:0);var zi=re.textAlign,Wi=re.textBaseline;(N(he)||N(de))&&(N(he)&&li<he&&(li=he),N(de)&&li>de&&(li=de,Lt.setAttribute("maxLineWidth",de-Ne[1]-Ne[2]))),Ge=0,ti=0;var Ui=0;"left"===zi||"start"===zi?Ui=1:"right"===zi||"end"===zi?Ui=-1:"center"===zi&&(Ui=0),Ui?Ui<0?(Ge-=li,Bt&&Bt.setAttribute("x",(Bt.attribute.x||0)-Ht),Ve.setAttribute("x",-Ne[1]-fi)):Ui>0&&Ve.setAttribute("x",Ne[3]):(Ge-=li/2,Bt&&Bt.setAttribute("x",(Bt.attribute.x||0)-Ht/2),Ve.setAttribute("x",-fi/2));var $i="right"===je||"end"===je,qi="left"===je||"start"===je,et=function(nt,at){"richtext"===Lt.type?Lt.setAttributes({"x":nt,"textAlign":at,"textConfig":xt(Lt.attribute.textConfig).map((function(nt){return Object.assign(Object.assign({},nt),{"textAlign":at})}))}):Lt.setAttributes({"x":nt,"textAlign":at})};if((je?"center"===je:Ce)&&Ui){var Ki=li-Ne[1]-Ne[3],Qi=Ht+fi,Ji=1===Ui?(Ki-Qi)/2+fi+Ht/2:Ne[0]+fi-(li/2+Qi/2-fi)+Ht/2;if(et(Ji,"center"),Bt){var dn=Ji-Ht/2-fi+Bi/2;Bt.setAttributes({"x":dn})}}if(qi&&1!==Ui){var fn=li-Ne[1]-Ne[3],vn=0===Ui?-fn/2+fi/2:-li+Ne[3]+Ne[1]+fi;if(et(vn+fi,"left"),Bt){var gn=vn+Bi/2;Bt.setAttributes({"x":gn})}}if($i&&-1!==Ui){var yn=li-Ne[1]-Ne[3],mn=0===Ui?yn/2+fi/2:yn;if(et(mn,"right"),Bt){var _n=mn-Ht-fi+Bi/2;Bt.setAttributes({"x":_n})}}"middle"===Wi?(ti-=hi/2,Bt&&Bt.setAttribute("y",0)):"bottom"===Wi?(ti-=hi,Bt&&Bt.setAttribute("y",-jt/2),Ve.setAttribute("y",-Ne[2])):"top"===Wi&&(Ve.setAttribute("y",Ne[0]),Bt&&Bt.setAttribute("y",jt/2)),ot(null==Ae?void 0:Ae.text)||(Lt.states=Ae.text);var bn=le.visible,xn=vR(le,["visible"]);if(ve&&z(bn)){var kn=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},xn),{"visible":bn&&!!te,"width":li,"height":hi,"x":Ge,"y":ti}),"rect");if(ot(null==Ae?void 0:Ae.panel)||(kn.states=Ae.panel),xn.customShape){var Sn=xn.customShape;kn.pathProxy=function(nt){return Sn(Rt,nt,new Ou)}}this._bgRect=kn}this._textShape=Lt,this._symbol=Bt,this.resetStates()}},{"key":"initAttributes","value":function(nt,at){nt=(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt),y(e,"initAttributes",this,3)([nt]),this.render()}},{"key":"addState","value":function(nt,at,lt){y(e,"addState",this,3)([nt,at,lt]),this._textShape&&this._textShape.addState(nt,at,lt),this._bgRect&&this._bgRect.addState(nt,at,lt),this._symbol&&this._symbol.addState(nt,at,lt)}},{"key":"removeState","value":function(nt,at){y(e,"removeState",this,3)([nt,at]),this._textShape&&this._textShape.removeState(nt,at),this._bgRect&&this._bgRect.removeState(nt,at),this._symbol&&this._symbol.removeState(nt,at)}},{"key":"cacheStates","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae;this._tagStates=null!==(at=null===(nt=this.currentStates)||void 0===nt?void 0:nt.slice())&&void 0!==at?at:[],this._rectStates=null!==(Bt=null===(Rt=null===(lt=this._bgRect)||void 0===lt?void 0:lt.currentStates)||void 0===Rt?void 0:Rt.slice())&&void 0!==Bt?Bt:[],this._symbolStates=null!==(jt=null===(Ht=null===(Lt=this._symbol)||void 0===Lt?void 0:Lt.currentStates)||void 0===Ht?void 0:Ht.slice())&&void 0!==jt?jt:[],this._textStates=null!==(te=null===(Kt=null===($t=this._textShape)||void 0===$t?void 0:$t.currentStates)||void 0===Kt?void 0:Kt.slice())&&void 0!==te?te:[],this.clearStates(),null===(ne=this._bgRect)||void 0===ne||ne.clearStates(),null===(re=this._symbol)||void 0===re||re.clearStates(),null===(ae=this._textShape)||void 0===ae||ae.clearStates()}},{"key":"resetStates","value":function(){var nt,at,lt;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&(null===(nt=this._bgRect)||void 0===nt||nt.useStates(this._rectStates)),this._symbolStates.length&&(null===(at=this._symbol)||void 0===at||at.useStates(this._symbolStates)),this._textStates.length&&(null===(lt=this._textShape)||void 0===lt||lt.useStates(this._textStates))}}])}(xS);AR.defaultAttributes={"visible":!0,"textStyle":{"fontSize":12,"fill":"#000","textAlign":"left","textBaseline":"top"},"space":4,"padding":4,"shape":{"fill":"#000"}};var wR={"visible":!0,"position":"auto","titleStyle":{"fontSize":16,"fill":"#08979c"},"contentStyle":{"fontSize":12,"fill":"green"},"panel":{"visible":!0,"fill":"#e6fffb","size":12,"space":0,"stroke":"#87e8de","lineWidth":1,"cornerRadius":4}},CR={"poptip":ft({},wR)},_R=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},MR=new _i;xP(),zP(),FP(),BP();var PR="M -0.5 -0.5, L -0.5 0.5, L 0.5 -0.5, Z",RR="M -0.5 -0.5, L -0.5 0.5, L 0.5 0.5, Z",IR="M -0.5 -0.5, L 0.5 -0.5, L 0.5 0.5, Z",BR="M 0.5 -0.5, L 0.5 0.5, L -0.5 0.5, Z",OR={"tl":PR,"tr":IR,"bl":RR,"br":BR,"lt":PR,"lb":RR,"rt":IR,"rb":BR},DR=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="poptip",lt.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"],lt}return h(e,nt),o(e,[{"key":"render","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt=this.attribute,te=Kt.titleStyle,ne=void 0===te?{}:te,re=Kt.position,ae=Kt.contentStyle,oe=void 0===ae?{}:ae,se=Kt.panel,le=Kt.logoSymbol,ue=Kt.logoText,ce=Kt.logoTextStyle,he=void 0===ce?{}:ce,de=Kt.triangleMode,fe=void 0===de?"default":de,pe=Kt.space,ve=void 0===pe?4:pe,we=Kt.minWidth,Ce=void 0===we?0:we,je=Kt.maxWidth,Ne=void 0===je?1/0:je,Ve=Kt.padding,Ge=void 0===Ve?4:Ve,ti=Kt.maxWidthPercent,li=Kt.visible,hi=Kt.state,di=Kt.dx,fi=void 0===di?0:di,pi=Kt.dy,vi=void 0===pi?0:pi,_i=this.attribute,bi=_i.title,Mi=void 0===bi?"":bi,Ti=_i.content,Ii=void 0===Ti?"":Ti;Mi=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(Mi):Mi,Ii=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(Ii):Ii;var Bi=Ci(Ge),zi=this.createOrUpdateChild("poptip-content",{"x":0,"y":0,"zIndex":1},"group");this.group=zi;var Wi=Ne-Bi[1]-Bi[3],Ui=N(Mi)&&!1!==li,$i=Object.assign(Object.assign({"text":X(Mi)?Mi:[Mi],"visible":Ui,"wrap":!0},ne),{"x":Bi[3],"y":Bi[0],"maxLineWidth":Wi,"textAlign":"left","textBaseline":"top"}),qi=zi.createOrUpdateChild("poptip-title",$i,"text");ot(null==hi?void 0:hi.title)||(qi.states=hi.title);var Ki=qi.AABBBounds,Qi=Ki.height(),Ji=Ki.width(),dn=Qi+ve;Ui||(dn=0);var fn=N(Ii)&&!1!==li,vn=Object.assign(Object.assign({"text":X(Ii)?Ii:[Ii],"visible":fn,"wrap":!0},oe),{"x":Bi[3],"y":Bi[0]+dn,"maxLineWidth":Wi,"textAlign":"left","textBaseline":"top"}),gn=zi.createOrUpdateChild("poptip-content",vn,"text");ot(null==hi?void 0:hi.content)||(gn.states=hi.content);var yn=gn.AABBBounds,mn=yn.height(),_n=yn.width();fn&&(dn+=mn),this.titleShape=qi,this.contentShape=gn;var bn=Ae(Ji+Bi[1]+Bi[3],_n+Bi[1]+Bi[3]);bn>Ne?bn=Ne:bn<Ce&&(bn=Ce);var xn=Bi[0]+Bi[2]+dn,kn=se.visible,Sn=se.square,An=_R(se,["visible","square"]);if(Sn){var wn=Ae(bn,xn);bn=wn;var Cn=wn-xn;xn=wn,qi.setAttributes({"dy":Cn/2}),gn.setAttributes({"dy":Cn/2})}var Mn=null!==(nt=An.size)&&void 0!==nt?nt:12,Tn=X(Mn)?[Mn[0]+(null!==(at=An.space)&&void 0!==at?at:0),Mn[1]+(null!==(lt=An.space)&&void 0!==lt?lt:0)]:Mn+(null!==(Rt=An.space)&&void 0!==Rt?Rt:0),En=null!==(Bt=An.lineWidth)&&void 0!==Bt?Bt:1,Pn=this.stage?[null!==(Lt=this.stage.viewWidth)&&void 0!==Lt?Lt:this.stage.width,null!==(Ht=this.stage.viewHeight)&&void 0!==Ht?Ht:this.stage.height]:void 0;if(Pn){var Rn=this.AABBBounds,On=null!==(jt=this.attribute.x)&&void 0!==jt?jt:Rn.x1,Fn=Pn[0]-Rn.x1,or=Math.max(On,Fn),sr=(X(Mn)?Mn[0]:12)+3;if((or=Math.min(or-sr,or*ti))<bn){bn=or;var lr=Bi[1]+Bi[3];qi.setAttribute("maxLineWidth",or-lr),gn.setAttribute("maxLineWidth",or-lr),xn=Bi[0]+Bi[2],Ui&&(xn+=qi.AABBBounds.height()+ve),xn+=gn.AABBBounds.height()}}for(var vr,yr="auto"===re,mr=-1/0,xr=0;xr<this.positionList.length+1;xr++){var kr=yr?this.positionList[xr===this.positionList.length?vr:xr]:re,Sr="arrow2Left",Ar=(X(Mn)?Mn[0]:Mn)/4,wr=0;"top"===kr||"bottom"===kr||"left"===kr||"right"===kr?Sr="arrow2Left":"concise"===fe&&(Sr=OR[kr],Ar=["tl","bl","rt","rb"].includes(re)?(X(Mn)?Mn[0]:Mn)/2:-(X(Mn)?Mn[0]:Mn)/2,wr=["tl","tr","lb","rb"].includes(re)?-(X(Mn)?Mn[1]:Mn)/2:(X(Mn)?Mn[1]:Mn)/2);var Mr=this.getAngleAndOffset(kr,bn,xn,X(Tn)?Tn:[Tn,Tn-En],Sr),Tr=Mr.angle,Ir=Mr.offset;if(z(kn)){var Br=zi.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},An),{"visible":kn&&(fn||Ui),"x":Ar,"y":wr,"strokeBoundsBuffer":-1,"boundsPadding":-2,"anchor":[0,0],"symbolType":Sr,"angle":Tr,"dx":Ir[0],"dy":Ir[1]-(null!==($t=An.space)&&void 0!==$t?$t:0),"size":Mn,"zIndex":9}),"symbol"),Or=void 0;ot(null==hi?void 0:hi.panel)||(Br.states=hi.panel),Or=se.panelSymbolType?zi.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},An),{"visible":kn&&(fn||Ui),"x":0,"y":0,"symbolType":"rect","size":[bn,xn],"zIndex":-8}),"symbol"):zi.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},An),{"visible":kn&&(fn||Ui),"x":0,"y":0,"width":bn,"height":xn,"zIndex":-8}),"rect"),ot(null==hi?void 0:hi.panel)||(Or.states=hi.panel)}if(zi.setAttributes({"x":-Ir[0]+fi,"y":-Ir[1]+vi,"anchor":[Ar,wr]}),le){var Dr=le.size,Lr=void 0===Dr?12:Dr,Fr=X(Lr)?Lr:[Lr,Lr];"auto"===Fr[1]&&(Fr[1]=xn),"auto"===Fr[0]&&(Fr[0]=xn);var zr=Fr[0];zi.createOrUpdateChild("poptip-logo",Object.assign(Object.assign({},le),{"x":0,"y":xn/2,"visible":kn&&(fn||Ui),"zIndex":10,"size":Fr}),"symbol"),zi.setAttributes({"x":-Ir[0]+fi+zr/2,"y":-Ir[1]+vi}),ue&&zi.createOrUpdateChild("poptip-logo-text",Object.assign(Object.assign({},he),{"x":0,"y":xn/2,"visible":kn&&(fn||Ui),"text":ue,"textAlign":"center","textBaseline":"middle","zIndex":10}),"text")}if(!yr||!Pn)break;MR.setValue(0,0,bn,xn).transformWithMatrix(zi.globalTransMatrix);var Hr=MR,jr=(new mi).setValue(0,0,Pn[0],Pn[1]);if(Ue(Hr,jr,!1))break;var Nr=He(Hr,jr,!1),Vr=(Nr.x2-Nr.x1)*(Nr.y2-Nr.y1);Vr>mr&&(mr=Vr,vr=xr)}}},{"key":"getAngleAndOffset","value":function(nt,at,lt,Rt,Bt){var Lt="arrow2Left"===Bt?Rt[1]/2:Rt[1];switch(nt){case"tl":return{"angle":"arrow2Left"===Bt?ue/2*3:0,"offset":"arrow2Left"===Bt?[at/4,lt+Lt]:[0,lt+Lt]};case"top":return{"angle":ue/2*3,"offset":[at/2,lt+Lt]};case"tr":return{"angle":"arrow2Left"===Bt?ue/2*3:0,"offset":"arrow2Left"===Bt?[at/4*3,lt+Lt]:[at,lt+Lt]};case"rt":return{"angle":0,"offset":"arrow2Left"===Bt?[-Lt,lt/5]:[-Lt,0]};case"right":return{"angle":0,"offset":[-Lt,lt/2]};case"rb":return{"angle":0,"offset":"arrow2Left"===Bt?[-Lt,lt/5*4]:[-Lt,lt]};case"bl":return{"angle":"arrow2Left"===Bt?ue/2:0,"offset":"arrow2Left"===Bt?[at/4,-Lt]:[0,-Lt]};case"bottom":return{"angle":ue/2,"offset":[at/2,-Lt]};case"br":return{"angle":"arrow2Left"===Bt?ue/2:0,"offset":"arrow2Left"===Bt?[at/4*3,-Lt]:[at,-Lt]};case"lt":return{"angle":"arrow2Left"===Bt?ue:0,"offset":"arrow2Left"===Bt?[at+Lt,lt/5]:[at+Lt,0]};case"left":return{"angle":ue,"offset":[at+Lt,lt/2]};case"lb":return{"angle":"arrow2Left"===Bt?ue:0,"offset":"arrow2Left"===Bt?[at+Lt,lt/5*4]:[at+Lt,lt]}}}},{"key":"appearAnimate","value":function(nt){var at=nt.duration,lt=void 0===at?1e3:at,Rt=nt.easing,Bt=void 0===Rt?"quadOut":Rt;if(this.setAttributes({"scaleX":0,"scaleY":0}),this.animate().to({"scaleX":1,"scaleY":1},lt/3*2,Bt),this.titleShape&&this.titleShape.animate().play(new md({"text":""},{"text":this.titleShape.attribute.text},lt,Bt)),this.contentShape&&this.contentShape.animate().play(new md({"text":""},{"text":this.contentShape.attribute.text},lt,Bt)),nt.wave){var Lt=lt/6;this.group.animate().to({"angle":nt.wave},Lt,Bt).to({"angle":-nt.wave},2*Lt,Bt).to({"angle":nt.wave},2*Lt,Bt).to({"angle":0},Lt,Bt)}}},{"key":"disappearAnimate","value":function(nt){var at=nt.duration,lt=void 0===at?1e3:at,Rt=nt.easing,Bt=void 0===Rt?"quadOut":Rt;this.animate().to({"scaleX":0,"scaleY":0},lt,Bt)}}])}(xS);DR.defaultAttributes={"position":"rt","visible":!0,"title":null,"content":null,"titleStyle":{"fontSize":12,"fill":"#000","textAlign":"left","textBaseline":"top"},"contentStyle":{"fontSize":12,"fill":"#000","textAlign":"left","textBaseline":"top"},"panel":{},"maxWidthPercent":.8,"space":8,"padding":10};var TR=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},LR=o((function t(){r(this,t)}),[{"key":"render","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re){var ae,oe;if(1===nt._showPoptip){var se=nt.attribute.poptip||{},le=se.visible,ue=se.visibleCb;if(!1===le||ue&&!1===ue(nt))return;var ce={};ft(ce,DR.defaultAttributes,nt.attribute.poptip?nt.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(ce):this.poptipComponent=new DR(ce);var he=nt.attribute.poptip||{};if("text"===nt.type&&null==he.title&&null==he.content){var de={};ft(de,CR.poptip,he),(he=de).content=null!==(ae=he.content)&&void 0!==ae?ae:nt.attribute.text}var fe=nt.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({"visibleAll":!0,"pickable":!1,"childrenPickable":!1},he),{"x":fe.e,"y":fe.f})),Kt.stage.tryInitInteractiveLayer();var pe=Kt.stage.getLayer("_builtin_interactive");pe&&pe.add(this.poptipComponent)}else 2===nt._showPoptip&&(nt._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({"visibleAll":!1}),null===(oe=this.poptipComponent.parent)||void 0===oe||oe.removeChild(this.poptipComponent),this.poptipComponent=null))}}]);LR=TR([Hs()],LR);var ER=function(nt,at,lt,Rt){var Bt,Lt=arguments.length,Ht=Lt<3?at:null===Rt?Rt=Object.getOwnPropertyDescriptor(at,lt):Rt;if("object"==("undefined"==typeof Reflect?"undefined":b(Reflect))&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(nt,at,lt,Rt);else for(var jt=nt.length-1;jt>=0;jt--)(Bt=nt[jt])&&(Ht=(Lt<3?Bt(Ht):Lt>3?Bt(at,lt,Ht):Bt(at,lt))||Ht);return Lt>3&&Ht&&Object.defineProperty(at,lt,Ht),Ht},FR=o((function t(){var nt=this;r(this,t),this.activeEvent="onRegister",this._uid=Ps.GenAutoIncrementId(),this.poptip=function(at){var lt=at.target;nt.needHide(lt)?nt.unpoptip(at):lt!==nt.activeGraphic&&(nt.needShow(lt)&&(lt.setAttributes({}),lt._showPoptip=1),nt.activeGraphic&&(nt.activeGraphic.setAttributes({}),nt.activeGraphic._showPoptip=2),nt.setActiveGraphic(lt,!0))},this.unpoptip=function(at){nt.activeGraphic&&(nt.activeGraphic.setAttributes({}),nt.activeGraphic._showPoptip=2,nt.setActiveGraphic(null,!0))}}),[{"key":"activate","value":function(nt){this.pluginService=nt,this.pluginService.stage.addEventListener("pointerover",this.poptip)}},{"key":"needHide","value":function(nt){return nt.isContainer||!nt.attribute}},{"key":"needShow","value":function(nt){return!!nt.attribute.poptip}},{"key":"setActiveGraphic","value":function(nt,at){this.activeGraphic=nt,this.pluginService.stage.renderNextFrame()}},{"key":"deactivate","value":function(nt){this.pluginService.stage.removeEventListener("pointerover",this.poptip)}}]),zR=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="poptip",nt.key=nt.name+nt._uid,nt}return h(e,nt),o(e)}(FR);zR=ER([Hs()],zR);var HR=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="poptipForText",nt.key=nt.name+nt._uid,nt.pointerlave=function(at){var lt=nt.pluginService.stage;at.target===lt&&nt.unpoptip(at)},nt}return h(e,nt),o(e,[{"key":"activate","value":function(nt){y(e,"activate",this,3)([nt]),this.pluginService.stage.addEventListener("pointerleave",this.pointerlave)}},{"key":"needHide","value":function(nt){return"text"!==nt.type||!nt.cliped||nt.isContainer||!nt.attribute||nt.attribute.disableAutoClipedPoptip}},{"key":"needShow","value":function(nt){return!0}},{"key":"deactivate","value":function(nt){var at=this.pluginService.stage;y(e,"deactivate",this,3)([nt]),at.removeEventListener("pointerleave",this.pointerlave)}}])}(FR);HR=ER([Hs()],HR);var VR=new Rs((function(nt,at,lt,Rt){lt(LR)||(nt(LR).toSelf().inSingletonScope(),nt(Eg).toService(LR)),lt(zR)||(nt(zR).toSelf(),nt(Pb).toService(zR)),lt(HR)||(nt(HR).toSelf(),nt(Pb).toService(HR))})),WR=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="crosshair",nt}return h(e,nt),o(e,[{"key":"render","value":function(){this.renderCrosshair(this)}}])}(xS);xP(),wP();var GR=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderCrosshair","value":function(nt){var at=this.attribute,lt=at.start,Rt=at.end,Bt=at.lineStyle;return nt.createOrUpdateChild("crosshair-line",Object.assign({"points":[lt,Rt]},Bt),"line")}},{"key":"setLocation","value":function(nt){var at=nt.start,lt=nt.end;this.setAttributes({"start":at,"end":lt})}}])}(WR);GR.defaultAttributes={"lineStyle":{"stroke":"#b2bacf","lineWidth":1,"lineDash":[2]}},xP(),BP();var UR=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderCrosshair","value":function(nt){var at=this.attribute,lt=at.start,Rt=at.end,Bt=at.rectStyle;return nt.createOrUpdateChild("crosshair-rect",Object.assign({"x":lt.x,"y":lt.y,"width":Rt.x-lt.x,"height":Rt.y-lt.y},Bt),"rect")}},{"key":"setLocation","value":function(nt){var at=nt.start,lt=nt.end;this.setAttributes({"start":at,"end":lt})}}])}(WR);UR.defaultAttributes={"rectStyle":{"fill":"#b2bacf","opacity":.2}},xP(),hP();var YR=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderCrosshair","value":function(nt){var at=this.attribute,lt=at.center,Rt=at.radius,Bt=at.lineStyle;return nt.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},lt),{"outerRadius":Rt}),this.attribute),Bt),"arc")}},{"key":"setLocation","value":function(nt){var at=this.attribute.center,lt=Ge.distancePP(nt,at);this.setAttribute("radius",lt)}}])}(WR);YR.defaultAttributes={"lineStyle":{"stroke":["#b2bacf",!1,!1,!1],"lineWidth":1,"lineDash":[2]}},xP(),hP();var XR=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderCrosshair","value":function(nt){var at=this.attribute,lt=at.center,Rt=at.radius,Bt=at.innerRadius,Lt=void 0===Bt?0:Bt,Ht=at.sectorStyle,jt=this.attribute,$t=jt.startAngle,Kt=jt.endAngle;return nt.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},lt),{"outerRadius":Rt,"innerRadius":Lt,"startAngle":$t,"endAngle":Kt}),Ht),"arc")}},{"key":"setLocation","value":function(nt){var at=this.attribute,lt=at.center,Rt=at.startAngle,Bt=void 0===Rt?jP:Rt,Lt=at.endAngle,Ht=(void 0===Lt?NP:Lt)-Bt,jt=Te(Be(lt,nt));this.setAttributes({"startAngle":jt-Ht/2,"endAngle":jt+Ht/2})}}])}(WR);XR.defaultAttributes={"sectorStyle":{"fill":"#b2bacf","opacity":.2}},xP(),TP();var KR=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderCrosshair","value":function(nt){for(var at,lt=this.attribute,Rt=lt.center,Bt=lt.radius,Lt=lt.sides,Ht=void 0===Lt?6:Lt,jt=lt.lineStyle,$t=this.attribute,Kt=$t.startAngle,te=$t.endAngle,ne=(te-Kt)%(2*Math.PI)==0,re=(te-Kt)/Ht,ae=0;ae<=Ht;ae++){var oe=Pe(Rt,Bt,Kt+re*ae);0===ae?at="M".concat(oe.x,",").concat(oe.y):at+="L".concat(oe.x,",").concat(oe.y),ae===Ht&&ne&&(at+="Z")}return nt.createOrUpdateChild("crosshair-polygon",Object.assign({"path":at},jt),"path")}},{"key":"setLocation","value":function(nt){var at=this.attribute.center,lt=Ge.distancePP(nt,at);this.setAttribute("radius",lt)}}])}(WR);function jR(){xP(),wP(),EP(),FP()}function NR(){xP(),wP(),hP(),FP()}KR.defaultAttributes={"lineStyle":{"stroke":"#b2bacf","lineWidth":1,"lineDash":[2]}},jR();var ZR=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="segment",lt.key="segment",lt.lines=[],lt}return h(e,nt),o(e,[{"key":"getStartAngle","value":function(){return Ie(this._startAngle)}},{"key":"getEndAngle","value":function(){return Ie(this._endAngle)}},{"key":"getMainSegmentPoints","value":function(){return this._mainSegmentPoints}},{"key":"render","value":function(){var nt=this;this.removeAllChild(!0),this._reset();var at=this.attribute,lt=at.startSymbol,Rt=at.endSymbol,Bt=at.lineStyle,Lt=at.state,Ht=at.visible,jt=void 0===Ht||Ht,$t=at.multiSegment,Kt=at.mainSegmentIndex;if(jt){this._computeLineAngle();var te=this._getMainSegmentPoints(),ne=this._renderSymbol(lt,te,"start"),re=this._renderSymbol(Rt,te,"end");if(this.startSymbol=ne,this.endSymbol=re,$t){var ae=m(this.attribute.points);if(Q(Kt))ae[Kt]=this._clipPoints(ae[Kt]);else{var oe=this._clipPoints(Tt(ae));ae[0][0]=oe[0],ae[ae.length-1][ae[ae.length-1].length-1]=oe[oe.length-1]}ae.forEach((function(at,lt){var Rt,Ht,jt=Hy.line(Object.assign(Object.assign({"points":at},X(Bt)?null!==(Rt=Bt[lt])&&void 0!==Rt?Rt:Bt[Bt.length-1]:Bt),{"fill":!1}));jt.name="".concat(nt.name,"-line"),jt.id=nt._getNodeId("line"+lt),ot(null==Lt?void 0:Lt.line)||(jt.states=X(Lt.line)?null!==(Ht=Lt.line[lt])&&void 0!==Ht?Ht:Lt.line[Lt.line.length-1]:Lt.line),nt.add(jt),nt.lines.push(jt)}))}else{var se=Hy.line;xt(Bt)[0].cornerRadius&&(se=Hy.polygon);var le=se(Object.assign(Object.assign({"points":this._clipPoints(this.attribute.points)},xt(Bt)[0]),{"fill":!1,"closePath":!1}));le.name="".concat(this.name,"-line"),le.id=this._getNodeId("line"),ot(null==Lt?void 0:Lt.line)||(le.states=[].concat(Lt.line)[0]),this.add(le),this.lines.push(le)}}}},{"key":"_computeStartRotate","value":function(nt){return nt+Math.PI/2}},{"key":"_computeEndRotate","value":function(nt){return nt+Math.PI/2}},{"key":"_renderSymbol","value":function(nt,at,lt){if(at.length){var Rt,Bt=nt.autoRotate,Lt=void 0===Bt||Bt;if(nt&&nt.visible){var Ht,jt,$t=this.getStartAngle(),Kt=this.getEndAngle(),te=this.attribute.state,ne=at[0],re=at[at.length-1],ae=nt.refX,oe=void 0===ae?0:ae,se=nt.refY,le=void 0===se?0:se,ue=nt.refAngle,ce=void 0===ue?0:ue,he=nt.style,de=nt.symbolType,fe=nt.size,pe=void 0===fe?12:fe;"start"===lt?(Ht={"x":ne.x+(Q($t)?oe*Math.cos($t)+le*Math.cos($t-Math.PI/2):0),"y":ne.y+(Q($t)?oe*Math.sin($t)+le*Math.sin($t-Math.PI/2):0)},jt=this._computeStartRotate(this._startAngle)):(Ht={"x":re.x+(Q(Kt)?oe*Math.cos(Kt)+le*Math.cos(Kt-Math.PI/2):0),"y":re.y+(Q(Kt)?oe*Math.sin(Kt)+le*Math.sin(Kt-Math.PI/2):0)},jt=this._computeEndRotate(this._endAngle)),(Rt=Hy.symbol(Object.assign(Object.assign(Object.assign({},Ht),{"symbolType":de,"size":pe,"angle":Lt?jt+ce:0,"strokeBoundsBuffer":0}),he))).name="".concat(this.name,"-").concat(lt,"-symbol"),Rt.id=this._getNodeId("".concat(lt,"-symbol")),ot(null==te?void 0:te.symbol)||(Rt.states=te.symbol),"start"===lt?ot(null==te?void 0:te.startSymbol)||(Rt.states=te.startSymbol):ot(null==te?void 0:te.endSymbol)||(Rt.states=te.endSymbol),this.add(Rt)}return Rt}}},{"key":"_getMainSegmentPoints","value":function(){if(this._mainSegmentPoints)return this._mainSegmentPoints;var nt,at=this.attribute,lt=at.points,Rt=at.multiSegment,Bt=at.mainSegmentIndex;return nt=Rt?Q(Bt)?lt[Bt]:Tt(lt):lt,this._mainSegmentPoints=nt,nt}},{"key":"_clipPoints","value":function(nt){var at=this.attribute,lt=at.startSymbol,Rt=void 0===lt?{}:lt,Bt=at.endSymbol,Lt=void 0===Bt?{}:Bt,Ht=nt;if(Rt.visible){var jt=Rt.clip?Rt.size||10:0;Ht=[{"x":nt[0].x-jt/2*(Math.cos(this._startAngle)||0),"y":nt[0].y-jt/2*(Math.sin(this._startAngle)||0)}].concat(m(Ht.slice(1)))}if(Lt.visible){var $t=Lt.clip?Lt.size||10:0,Kt={"x":nt[nt.length-1].x-$t/2*(Math.cos(this._endAngle)||0),"y":nt[nt.length-1].y-$t/2*(Math.sin(this._endAngle)||0)};Ht=[].concat(m(Ht.slice(0,Ht.length-1)),[Kt])}return Ht}},{"key":"_computeLineAngle","value":function(){var nt=this._getMainSegmentPoints();if(!(nt.length<=1)){var at=nt[0],lt=nt[1],Rt=nt[nt.length-2],Bt=nt[nt.length-1],Lt=[at.x-lt.x,at.y-lt.y],Ht=Math.atan2(Lt[1],Lt[0]),jt=[Bt.x-Rt.x,Bt.y-Rt.y],$t=Math.atan2(jt[1],jt[0]);this._startAngle=Ht,this._endAngle=$t}}},{"key":"_reset","value":function(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}])}(xS);ZR.defaultAttributes={"visible":!0,"lineStyle":{"lineWidth":1,"stroke":"#000"},"startSymbol":{"visible":!1,"autoRotate":!0,"symbolType":"triangle","size":12,"refX":0,"refY":0,"refAngle":0,"style":{"fill":"#000","zIndex":1}},"endSymbol":{"visible":!1,"autoRotate":!0,"symbolType":"triangle","size":12,"refX":0,"refY":0,"refAngle":0,"style":{"fill":"#000","zIndex":1}}},NR();var nI,rI,aI=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},ZR.defaultAttributes,nt)])).name="arc-segment",lt.key="arc-segment",lt.isReverseArc=!1,lt}return h(e,nt),o(e,[{"key":"getStartAngle","value":function(){var nt=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return nt<0?nt+2*Math.PI:nt>2*Math.PI?nt-2*Math.PI:nt}},{"key":"getEndAngle","value":function(){var nt=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return nt<0?nt+2*Math.PI:nt>2*Math.PI?nt-2*Math.PI:nt}},{"key":"getMainSegmentPoints","value":function(){return this._mainSegmentPoints}},{"key":"_computeStartRotate","value":function(nt){return this.isReverseArc?nt+Math.PI:nt}},{"key":"_computeEndRotate","value":function(nt){return this.isReverseArc?nt:nt+Math.PI}},{"key":"render","value":function(){this.removeAllChild(!0),this._reset();var nt=this.attribute,at=nt.startSymbol,lt=nt.endSymbol,Rt=nt.lineStyle,Bt=nt.state,Lt=nt.visible,Ht=void 0===Lt||Lt,jt=nt.radius,$t=nt.startAngle,Kt=nt.endAngle,te=nt.center;if(Ht){this._startAngle=$t,this._endAngle=Kt,this.isReverseArc=$t>Kt;var ne={"x":te.x+jt*Math.cos(this._startAngle),"y":te.y+jt*Math.sin(this._startAngle)},re={"x":te.x+jt*Math.cos(this._endAngle),"y":te.y+jt*Math.sin(this._endAngle)};this._mainSegmentPoints=[ne,re];var ae=this._renderSymbol(at,this._mainSegmentPoints,"start"),oe=this._renderSymbol(lt,this._mainSegmentPoints,"end");this.startSymbol=ae,this.endSymbol=oe;var se=Hy.arc(Object.assign({"x":te.x,"y":te.y,"startAngle":$t,"endAngle":Kt,"innerRadius":jt,"outerRadius":jt},Rt));se.name="".concat(this.name,"-line"),se.id=this._getNodeId("arc"),ot(null==Bt?void 0:Bt.line)||(se.states=[].concat(Bt.line)[0]),this.add(se),this.line=se}}}])}(ZR);!function(nt){nt.innerView="inner-view",nt.axisContainer="axis-container",nt.labelContainer="axis-label-container",nt.tickContainer="axis-tick-container",nt.tick="axis-tick",nt.subTick="axis-sub-tick",nt.label="axis-label",nt.title="axis-title",nt.gridContainer="axis-grid-container",nt.grid="axis-grid",nt.gridRegion="axis-grid-region",nt.line="axis-line",nt.background="axis-background",nt.axisLabelBackground="axis-label-background",nt.axisBreak="axis-break",nt.axisBreakSymbol="axis-break-symbol"}(nI||(nI={})),function(nt){nt.selected="selected",nt.selectedReverse="selected_reverse",nt.hover="hover",nt.hoverReverse="hover_reverse"}(rI||(rI={}));var lI=l(l(l(l({},rI.selectedReverse,{}),rI.selected,{}),rI.hover,{}),rI.hoverReverse,{}),hI={"title":{"space":4,"padding":0,"textStyle":{"fontSize":12,"fill":"#333333","fontWeight":"normal","fillOpacity":1}},"label":{"visible":!0,"inside":!1,"space":4,"padding":0,"style":{"fontSize":12,"fill":"#333","fontWeight":"normal","fillOpacity":1}},"tick":{"visible":!0,"inside":!1,"alignWithLabel":!0,"length":4,"style":{"lineWidth":1,"stroke":"#000","strokeOpacity":1}},"subTick":{"visible":!1,"inside":!1,"count":4,"length":2,"style":{"lineWidth":1,"stroke":"#999","strokeOpacity":1}},"line":{"visible":!0,"style":{"lineWidth":1,"stroke":"#000","strokeOpacity":1}}},dI={"size":8,"stroke":"#000","lineWidth":1,"zIndex":1};function qR(nt,at){var lt,Rt;return(null===(lt=nt.OBBBounds)||void 0===lt?void 0:lt.empty())||(null===(Rt=at.OBBBounds)||void 0===Rt?void 0:Rt.empty())?Ye(nt.AABBBounds,at.AABBBounds,!1)&&(!nt.rotatedBounds||!at.rotatedBounds||Qe(nt.rotatedBounds,at.rotatedBounds,!0)):nt.OBBBounds.intersects(at.OBBBounds)}var fI=Math.sin(Math.PI/10);function JR(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fI,lt=!j(nt)&&0!==nt,Rt=lt?Math.cos(nt):1;return lt&&Math.abs(Rt)<=at}function QR(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fI,lt=!j(nt)&&0!==nt,Rt=lt?Math.sin(nt):0;return!lt||Math.abs(Rt)<=at}function $R(nt){var at={};return UP(nt,(function(nt){"group"!==nt.type&&nt.id&&(at[nt.id]=nt)})),at}function tB(nt,at){return{"x":nt.x+at[0],"y":nt.y+at[1]}}function eB(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Bt=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Lt=[at.x-lt.x,at.y-lt.y];return iR(Lt,(Rt?-1:1)*(Bt?-1:1)*nt/nR(Lt))}function iB(nt,at,lt,Rt,Bt){for(var Lt=[],Ht=Bt-Rt,jt=0;jt<at;jt++){var $t=Rt+jt*Ht/at;Lt.push(Pe(nt,lt,$t))}return Lt}function nB(nt,at){var lt="";return 0===nt.length||(nt.forEach((function(nt,at){0===at?lt="M".concat(nt.x,",").concat(nt.y):lt+="L".concat(nt.x,",").concat(nt.y)})),at&&(lt+="Z")),lt}function rB(nt,at,lt){var Rt,Bt,Lt,o=function(nt,at,lt){return Bt=nt.AABBBounds,Lt=at.AABBBounds,lt>Math.max(Lt.x1-Bt.x2,Bt.x1-Lt.x2,Lt.y1-Bt.y2,Bt.y1-Lt.y2)};return QR(null===(Rt=nt.attribute)||void 0===Rt?void 0:Rt.angle,Number.EPSILON)?o(nt,at,lt):(Bt=nt.OBBBounds,Lt=at.OBBBounds,!Bt||!Lt||Bt.empty()||Lt.empty()?o(nt,at,lt):Bt.intersects(Lt))}function aB(nt,at){for(var lt,Rt=1,Bt=nt.length,Lt=nt[0];Rt<Bt;Lt=lt,++Rt)if(rB(Lt,lt=nt[Rt],at))return!0;return!1}var oB=function(nt,at,lt){var Rt=nt.target;return Rt!==lt&&Rt.name&&!ot(Rt.states)?(Rt.addState(HP.hover,!0),UP(at,(function(nt){nt!==Rt&&nt.name&&!ot(nt.states)&&nt.addState(HP.hoverReverse,!0)})),Rt):lt},sB=function(nt,at,lt){return lt?(UP(at,(function(nt){nt.name&&!ot(nt.states)&&(nt.removeState(HP.hoverReverse),nt.removeState(HP.hover))})),null):lt},lB=function(nt,at,lt){var Rt=nt.target;return lt===Rt&&Rt.hasState(HP.selected)?(UP(at,(function(nt){nt.name&&!ot(nt.states)&&(nt.removeState(HP.selectedReverse),nt.removeState(HP.selected))})),null):Rt.name&&!ot(Rt.states)?(Rt.addState(HP.selected,!0),UP(at,(function(nt){nt!==Rt&&nt.name&&!ot(nt.states)&&nt.addState(HP.selectedReverse,!0)})),Rt):lt},pI=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="axis",nt.data=[],nt.tickLineItems=[],nt.subTickLineItems=[],nt.axisLabelLayerSize={},nt.axisLabelsContainer=null,nt._onHover=function(at){nt._lastHover=oB(at,nt.axisContainer,nt._lastHover)},nt._onUnHover=function(at){nt._lastHover=sB(0,nt.axisContainer,nt._lastHover)},nt._onClick=function(at){nt._lastSelect=lB(at,nt.axisContainer,nt._lastSelect)},nt}return h(e,nt),o(e,[{"key":"getInnerView","value":function(){return this._innerView}},{"key":"getPrevInnerView","value":function(){return this._prevInnerView}},{"key":"getBoundsWithoutRender","value":function(nt){var at=ct(this.attribute);ft(this.attribute,nt);var lt=Hy.group({"x":this.attribute.x,"y":this.attribute.y});return this.add(lt),this._renderInner(lt),this.removeChild(lt),this.attribute=at,lt.AABBBounds}},{"key":"render","value":function(){this._prevInnerView=this._innerView&&$R(this._innerView),this.removeAllChild(!0),this._innerView=Hy.group({"x":0,"y":0,"pickable":!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent()}},{"key":"_bindEvent","value":function(){if(!this.attribute.disableTriggerEvent){var nt=this.attribute,at=nt.hover,lt=nt.select;at&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),lt&&this._innerView.addEventListener("pointerdown",this._onClick)}}},{"key":"_renderInner","value":function(nt){var at=this,lt=this.attribute,Rt=lt.title,Bt=lt.label,Lt=lt.tick,Ht=lt.line,jt=lt.items,$t=Hy.group({"x":0,"y":0,"zIndex":1,"pickable":!1});if($t.name=nI.axisContainer,$t.id=this._getNodeId("container"),$t.setMode(this.mode),this.axisContainer=$t,nt.add($t),Ht&&Ht.visible&&this.renderLine($t),jt&&jt.length&&(this.data=this._transformItems(jt[0]),Lt&&Lt.visible&&this.renderTicks($t),Bt&&Bt.visible)){var Kt=Hy.group({"x":0,"y":0,"pickable":!1});Kt.name=nI.labelContainer,Kt.id=this._getNodeId("label-container"),this.axisLabelsContainer=Kt,$t.add(Kt),jt.forEach((function(nt,lt){var Rt=at.renderLabels(Kt,nt,lt),Bt=Rt.getChildren();at.beforeLabelsOverlap(Bt,nt,Rt,lt,jt.length),at.handleLabelsOverlap(Bt,nt,Rt,lt,jt.length),at.afterLabelsOverlap(Bt,nt,Rt,lt,jt.length);var Lt=0,Ht=0,$t="center",te="middle",ne=0;Bt.forEach((function(nt,at){var lt,Rt=nt.attribute,Bt=null!==(lt=Rt.angle)&&void 0!==lt?lt:0,jt=nt.AABBBounds,Kt=jt.width(),re=jt.height();Bt&&(Kt=Math.abs(Kt*Math.cos(Bt)),re=Math.abs(re*Math.sin(Bt))),Lt=Math.max(Lt,Kt),Ht=Math.max(Ht,re),$t=Rt.textAlign,te=Rt.textBaseline,0===at&&(ne=Rt.x)})),at.axisLabelLayerSize[lt]={"width":Lt,"height":Ht,"labelPos":ne,"textAlign":$t,"textBaseline":te}}))}Rt&&Rt.visible&&this.renderTitle($t)}},{"key":"renderTicks","value":function(nt){var at=this,lt=this.getTickLineItems(),Rt=Hy.group({"x":0,"y":0,"pickable":!1});Rt.name=nI.tickContainer,Rt.id=this._getNodeId("tick-container"),nt.add(Rt),lt.forEach((function(nt,Bt){var Lt,Ht=Hy.line(Object.assign({},at._getTickLineAttribute("tick",nt,Bt,lt)));if(Ht.name=nI.tick,Ht.id=at._getNodeId(nt.id),ot(null===(Lt=at.attribute.tick)||void 0===Lt?void 0:Lt.state))Ht.states=GP;else{var jt=at.data[Bt],$t=ft({},GP,at.attribute.tick.state);Object.keys($t).forEach((function(nt){H($t[nt])&&($t[nt]=$t[nt](jt.rawValue,Bt,jt,at.data))})),Ht.states=$t}Rt.add(Ht)})),this.tickLineItems=lt;var Bt=this.attribute.subTick;if(Bt&&Bt.visible){var Lt=this.getSubTickLineItems();Lt.length&&Lt.forEach((function(nt,Lt){var Ht=Hy.line(Object.assign({},at._getTickLineAttribute("subTick",nt,Lt,lt)));if(Ht.name=nI.subTick,Ht.id=at._getNodeId("".concat(Lt)),ot(Bt.state))Ht.states=GP;else{var jt=ft({},GP,Bt.state);Object.keys(jt).forEach((function(at){H(jt[at])&&(jt[at]=jt[at](nt.value,Lt,nt,lt))})),Ht.states=jt}Rt.add(Ht)})),this.subTickLineItems=Lt}}},{"key":"renderLabels","value":function(nt,at,lt){var Rt=this,Bt=this.attribute.label.dataFilter;Bt&&H(Bt)&&(at=Bt(at,lt));var Lt=this._transformItems(at),Ht=Hy.group({"x":0,"y":0,"pickable":!1});return Ht.name="".concat(nI.labelContainer,"-layer-").concat(lt),Ht.id=this._getNodeId("label-container-layer-".concat(lt)),nt.add(Ht),Lt.forEach((function(nt,at){var Bt,jt=uR(Rt._getLabelAttribute(nt,at,Lt,lt));if(jt.name=nI.label,jt.id=Rt._getNodeId("layer".concat(lt,"-label-").concat(nt.id)),ot(null===(Bt=Rt.attribute.label)||void 0===Bt?void 0:Bt.state))jt.states=GP;else{var $t=ft({},GP,Rt.attribute.label.state);Object.keys($t).forEach((function(Rt){H($t[Rt])&&($t[Rt]=$t[Rt](nt,at,Lt,lt))})),jt.states=$t}jt.data=Object.assign(Object.assign({},nt),{"index":at,"layer":lt}),Ht.add(jt)})),Ht}},{"key":"renderTitle","value":function(nt){var at=this.getTitleAttribute(),lt=new AR(Object.assign({},at));lt.name=nI.title,lt.id=this._getNodeId("title"),nt.add(lt)}},{"key":"getVerticalCoord","value":function(nt,at,lt){return tB(nt,this.getVerticalVector(at,lt,nt))}},{"key":"getTickLineItems","value":function(){var nt=this,at=this.attribute.tick,lt=this.data,Rt=[],Bt=at.alignWithLabel,Lt=at.inside,Ht=void 0!==Lt&&Lt,jt=at.length,$t=at.dataFilter,Kt=1;return lt.length>=2&&(Kt=lt[1].value-lt[0].value),($t&&H($t)?$t(lt):lt).forEach((function(at){var lt=at.point,Lt=at.value;if(!Bt){var $t=at.value-Kt/2;if(nt.isInValidValue($t))return;lt=nt.getTickCoord($t),Lt=$t}var te=nt.getVerticalCoord(lt,jt,Ht);if("3d"===nt.mode){var ne=nt.getVerticalVector(jt,Ht,lt),re=0,ae=0;fe(ne[0])>fe(ne[1])?re=ue/2*(te.x>lt.x?1:-1):ae=ue/2*(te.y>lt.y?-1:1),Rt.push({"start":lt,"end":te,"value":Lt,"id":"tick-".concat(at.id),"anchor":[lt.x,lt.y],"alpha":re,"beta":ae})}else Rt.push({"start":lt,"end":te,"value":Lt,"id":"tick-".concat(at.id)})})),Rt}},{"key":"getSubTickLineItems","value":function(){var nt=this.attribute.subTick,at=[],lt=nt.count,Rt=void 0===lt?4:lt,Bt=nt.inside,Lt=void 0!==Bt&&Bt,Ht=nt.length,jt=void 0===Ht?2:Ht,$t=this.tickLineItems,Kt=$t.length;if(Kt>=2)for(var te=0;te<Kt-1;te++)for(var ne=$t[te],re=$t[te+1],ae=0;ae<Rt;ae++){var oe=(ae+1)/(Rt+1),se=(1-oe)*ne.value+oe*re.value,le=this.getTickCoord(se),ue=this.getVerticalCoord(le,jt,Lt);at.push({"start":le,"end":ue,"value":se,"id":"sub-tick-".concat(se)})}return at}},{"key":"_getTickLineAttribute","value":function(nt,at,lt,Rt){var Bt=st(this.attribute,"".concat(nt,".style")),Lt=this.data[lt];Bt=H(Bt)?ft({},st(hI,"".concat(nt,".style")),"tick"===nt?Bt(Lt.rawValue,lt,Lt,this.data):Bt(at.value,lt,at,Rt)):Bt;var Ht=at.start,jt=at.end,$t=at.anchor,Kt=at.alpha,te=at.beta;return Object.assign({"points":[Ht,jt],"anchor":$t,"alpha":Kt,"beta":te},Bt)}},{"key":"_getLabelAttribute","value":function(nt,at,lt,Rt){var Bt,Lt,Ht=this.attribute.label,jt=Ht.space,$t=void 0===jt?4:jt,Kt=Ht.inside,te=void 0!==Kt&&Kt,ne=Ht.formatMethod,re=Ht.type,ae=void 0===re?"text":re,oe=Ht.text,se=$t,le=0;(null===(Bt=this.attribute.tick)||void 0===Bt?void 0:Bt.visible)&&this.attribute.tick.inside===te&&(le=this.attribute.tick.length||4),(null===(Lt=this.attribute.subTick)||void 0===Lt?void 0:Lt.visible)&&this.attribute.subTick.inside===te&&(le=Math.max(le,this.attribute.subTick.length||2)),se+=le;var ue=this.getRelativeVector(nt.point);Rt>0&&(0===ue[1]?se+=(this.axisLabelLayerSize[Rt-1].height+st(this.attribute,"label.space",4))*Rt:se+=(this.axisLabelLayerSize[Rt-1].width+st(this.attribute,"label.space",4))*Rt);var ce=this.getVerticalCoord(nt.point,se,te),he=this.getVerticalVector(se||1,te,ce),de=ne?ne("".concat(nt.label),nt,at,lt,Rt):nt.label,fe=this.attribute.label.style;return fe=H(fe)?ft({},hI.label.style,fe(nt,at,lt,Rt)):fe,fe=ft(this.getLabelAlign(he,te,fe.angle),fe),H(fe.text)&&(fe.text=fe.text({"label":nt.label,"value":nt.rawValue,"index":nt.index,"layer":Rt})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(ce,he,de,fe)),{"text":null!=oe?oe:de,"_originText":nt.label,"lineHeight":null==fe?void 0:fe.fontSize,"type":ae}),fe)}},{"key":"getLabelPosition","value":function(nt,at,lt,Rt){return nt}},{"key":"_transformItems","value":function(nt){var at=this,lt=[];return nt.forEach((function(nt){var Rt;lt.push(Object.assign(Object.assign({},nt),{"point":at.getTickCoord(nt.value),"id":null!==(Rt=nt.id)&&void 0!==Rt?Rt:nt.label}))})),lt}},{"key":"release","value":function(){y(e,"release",this,3)([]),this._prevInnerView=null,this._innerView=null}}])}(xS),vI={"parity":function(nt){return nt.filter((function(nt,at){return at%2?nt.setAttribute("opacity",0):1}))},"greedy":function(nt,at){var lt;return nt.filter((function(nt,Rt){return Rt&&rB(lt,nt,at)?nt.setAttribute("opacity",0):(lt=nt,1)}))}};function hB(nt){var at;return(at=nt.OBBBounds.empty()?nt.AABBBounds:nt.OBBBounds).width()>1&&at.height()>1}function dB(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(lt&&!nt.attribute.opacity){var Lt=at.length;if(Lt>1){nt.setAttribute("opacity",1);for(var Ht=0;Ht<Lt;Ht++){var jt=Bt?at[Lt-1-Ht]:at[Ht];if(!Rt(jt))break;jt.setAttribute("opacity",0)}}}}function pB(nt,at){if(!ot(nt)){var lt=nt.filter(hB);if(!ot(lt)){var Rt;Rt=function(nt){return nt.forEach((function(nt){return nt.setAttribute("opacity",1)})),nt}(lt);var Bt=at.method,Lt=void 0===Bt?"parity":Bt,Ht=at.separation,jt=void 0===Ht?0:Ht,$t=H(Lt)?Lt:vI[Lt]||vI.parity;if(Rt.length>=3&&aB(Rt,jt)){do{Rt=$t(Rt,jt)}while(Rt.length>=3&&aB(Rt,jt));var u=function(nt,at){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&nt<3||at},Kt=u(Rt.length,at.firstVisible,!1),te=u(Rt.length,at.lastVisible),ne=lt[0],re=kt(lt);rB(ne,re,jt)&&Kt&&te&&(re.setAttribute("opacity",0),te=!1),dB(ne,Rt,Kt,(function(nt){return rB(nt,ne,jt)})),dB(re,Rt,te,(function(nt){return rB(nt,re,jt)||!(!Kt||nt===ne)&&rB(nt,ne,jt)}),!0)}lt.forEach((function(nt){nt.setAttribute("visible",!!nt.attribute.opacity)}))}}}function fB(nt,at){if(!ot(nt)){var lt=at.orient,Rt=at.labelRotateAngle,Bt=void 0===Rt?[0,45,90]:Rt;if(0!==Bt.length&&!nt.some((function(nt){return!!nt.attribute.angle}))){var Lt=0,Ht=0,s=function(){var at=Bt[Lt++];if(nt.forEach((function(nt){nt.attribute.angle=Me(at)})),function(nt,at){"bottom"!==nt&&"top"!==nt||function(nt,at){at.forEach((function(at){at.attribute.angle&&at.setAttributes(Object.assign(Object.assign({},gB(nt,at.attribute.angle)),{"angle":vB(at.attribute.angle)}))}))}(nt,at),"left"!==nt&&"right"!==nt||function(nt,at){at.forEach((function(at,lt){at.attribute.angle&&at.setAttributes(Object.assign(Object.assign({},yB(nt,at.attribute.angle)),{"angle":vB(at.attribute.angle)}))}))}(nt,at),function(nt){nt.forEach((function(nt){if(!nt.rotatedBounds&&nt.attribute.angle){var at=function(nt){var at=nt.AABBBounds;return{"x1":at.x1,"x2":at.x2,"y1":at.y1,"y2":at.y2,"centerX":nt.attribute.x,"centerY":nt.attribute.y,"angle":nt.attribute.angle}}(nt),lt=qe({"x":nt.attribute.x,"y":nt.attribute.y},at.angle,{"x":at.centerX,"y":at.centerY}),Rt=lt.x-at.centerX,Bt=lt.y-at.centerY;at.x1+=Rt,at.x2+=Rt,at.y1+=Bt,at.y2+=Bt,at.centerX+=Rt,at.centerY+=Bt,nt.rotatedBounds=at}}))}(at)}(lt,nt),!function(nt){for(var at=1;at<nt.length;at++)if(qR(nt[at-1],nt[at]))return!0;return!1}(nt))return 1};for(Bt&&Bt.length>0&&(Ht=Bt.length);Lt<Ht&&!s(););}}}function vB(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(nt<0)for(;nt<0;)nt+=2*Math.PI;if(nt>0)for(;nt>=2*Math.PI;)nt-=2*Math.PI;return nt}function gB(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=["center","left","left","left","center","right","right","right","left"],Rt=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===nt&&(lt=["center","right","right","right","center","left","left","left","right"],Rt=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);var Bt,Lt=(at=vB(at))/(.5*Math.PI);return{"textAlign":lt[Bt=Lt===Math.floor(Lt)?2*Math.floor(Lt):2*Math.floor(Lt)+1],"textBaseline":Rt[Bt]}}function yB(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,lt=["right","right","center","left","left","left","center","right","right"],Rt=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===nt&&(lt=["left","left","center","right","right","right","center","left","left"],Rt=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);var Bt,Lt=(at=vB(at))/(.5*Math.PI);return{"textAlign":lt[Bt=Lt===Math.floor(Lt)?2*Math.floor(Lt):2*Math.floor(Lt)+1],"textBaseline":Rt[Bt]}}function mB(nt,at){var lt=at.limitLength,Rt=at.verticalLimitLength,Bt=at.ellipsis,Lt=void 0===Bt?"...":Bt,Ht=at.orient,jt=at.axisLength;if(!ot(nt)&&Q(lt)){var $t=function(nt){return Q(nt)?{"left":nt,"right":nt}:V(nt)?{"left":nt.left||0,"right":nt.right||0}:{"left":0,"right":0}}(at.overflowLimitLength),Kt=nt[0],te=Kt.attribute.angle,ne=!j(te),re=ne?Math.cos(te):1,ae=ne?Math.sin(te):0,oe=QR(te),se=JR(te),le="top"===Ht||"bottom"===Ht,ue=Kt.attribute.direction,ce=!oe&&!se&&le&&(nt.length<2||nt.some((function(nt){return Math.abs(nt.AABBBounds.width()-Kt.AABBBounds.width())>=2})))&&Kt.AABBBounds.width()>Math.abs(lt/ae);nt.forEach((function(nt){var at;if(le){if(se&&Math.floor(nt.AABBBounds.height())<=lt)return;if(oe&&Math.floor(nt.AABBBounds.width())<=Rt)return}if(!le){if("vertical"===ue&&Math.floor(nt.AABBBounds.height())<=Rt)return;if("vertical"!==ue){if(oe&&Math.floor(nt.AABBBounds.width())<=lt)return;if(se&&Math.floor(nt.AABBBounds.height())<=Rt)return}}var Bt=null;if(oe||se)Bt=le?oe?Rt:lt:"vertical"===ue||se?Rt:lt;else if(le){var Ht=nt.AABBBounds,Kt=Ht.x1,te=Ht.x2,ne=ae/re,he=Math.abs(lt/ae);if(ce&&ne>0&&Kt<=jt+$t.right&&lt/ne+Kt>jt+$t.right){var de=(jt-Kt+$t.right)/Math.abs(re);Bt=Math.min(de,he)}else if(ce&&ne<0&&te>=-$t.left&&lt/ne+te<-$t.left){var fe=(te+$t.left)/Math.abs(re);Bt=Math.min(fe,he)}else Bt=he}else Bt=Math.abs(lt/re);Q(nt.attribute.maxLineWidth)&&(Bt=Q(Bt)?Math.min(nt.attribute.maxLineWidth,Bt):nt.attribute.maxLineWidth),nt.setAttributes({"maxLineWidth":Bt,"ellipsis":null!==(at=nt.attribute.ellipsis)&&void 0!==at?at:Lt})}))}}function _B(nt,at,lt){var Rt;return Q(at)&&(Rt=Math.abs(at-nt)),Q(lt)&&(Rt=Q(Rt)?Math.min(Math.abs(nt-lt),Rt):Math.abs(nt-lt)),Rt}var yI=o((function t(){r(this,t)}),[{"key":"isInValidValue","value":function(nt){return nt<0||nt>1}},{"key":"getTickCoord","value":function(nt){var at=this.attribute.start,lt=this.getRelativeVector();return{"x":at.x+lt[0]*nt,"y":at.y+lt[1]*nt}}},{"key":"getRelativeVector","value":function(nt){var at=this.attribute,lt=at.start,Rt=at.end;return[Rt.x-lt.x,Rt.y-lt.y]}},{"key":"getVerticalVector","value":function(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Bt=this.attribute.verticalFactor,Lt=void 0===Bt?1:Bt,Ht=((lt=nR(at=this.getRelativeVector()))>0&&(lt=1/lt),[at[0]*lt,at[1]*lt]);return iR([Ht[1],-1*Ht[0]],nt*(Rt?1:-1)*Lt)}}]);function xB(){xP(),wP(),DP(),zP()}var kB=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};xB(),BP();var _I=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt),at])}return h(e,nt),o(e,[{"key":"_renderInner","value":function(nt){var at,lt=this;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){for(var Rt=[],Bt=0;Bt<this.attribute.breaks.length;Bt++){var Lt=this.attribute.breaks[Bt],Ht=Lt.range,jt=Lt.breakSymbol,$t=Lt.rawRange;Rt.push({"startPoint":this.getTickCoord(Ht[0]),"endPoint":this.getTickCoord(Ht[1]),"range":Ht,"breakSymbol":jt,"rawRange":$t})}this._breaks=Rt}y(e,"_renderInner",this,3)([nt]),this._breaks&&this._breaks.length&&this._breaks.forEach((function(at,Rt){var Bt=at.startPoint,Lt=at.endPoint,Ht=at.breakSymbol,jt=at.rawRange;if(!1!==(null==Ht?void 0:Ht.visible)){var $t=Hy.group({"zIndex":999});$t.name=nI.axisBreak,$t.id=lt._getNodeId("".concat(nI.axisBreak,"-").concat(Rt)),$t.data=jt;var Kt=function(){var nt,at,lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Rt=lt.style,Bt=void 0===Rt?{}:Rt,Lt=lt.angle,Ht=void 0===Lt?.5*Math.PI:Lt,jt=ft({},dI,Bt),$t=null!==(nt=jt.size)&&void 0!==nt?nt:dI.size;return Object.assign(Object.assign({},jt),{"symbolType":null!==(at=jt.symbolType)&&void 0!==at?at:"M ".concat(-$t/2," ").concat($t*Math.sin(Ht)," L ").concat($t/2," ").concat(-$t*Math.sin(Ht)),"symbolSize":$t})}(Ht),te=Hy.symbol(Object.assign({"x":Bt.x,"y":Bt.y},Kt));te.name=nI.axisBreakSymbol;var ne=Hy.symbol(Object.assign({"x":Lt.x,"y":Lt.y},Kt));ne.name=nI.axisBreakSymbol,$t.add(te),$t.add(ne),nt.add($t)}}));var Kt=this.attribute.panel;if(Kt&&Kt.visible){var te=this.axisContainer,ne=te.AABBBounds,re=Hy.rect(Object.assign({"x":ne.x1,"y":ne.y1,"width":ne.width(),"height":ne.height()},Kt.style));re.name=nI.background,re.id=this._getNodeId("background"),re.states=ft({},lI,null!==(at=Kt.state)&&void 0!==at?at:{}),te.insertBefore(re,te.firstChild)}}},{"key":"renderLine","value":function(nt){var at=this.attribute,lt=at.start,Rt=at.end,Bt=at.line,Lt=Bt.startSymbol,Ht=Bt.endSymbol,jt=Bt.style,$t=Bt.state,Kt=kB(Bt,["startSymbol","endSymbol","style","state"]),te=Object.assign({"startSymbol":Lt,"endSymbol":Ht,"lineStyle":jt},Kt);if(this._breaks&&this._breaks.length){var ne=[],re=lt;this._breaks.forEach((function(nt){var at=nt.startPoint,lt=nt.endPoint;ne.push([re,at]),re=lt})),ne.push([re,Rt]),te.points=ne,te.multiSegment=!0}else te.points=[lt,Rt];ot($t)||(te.state={"line":ft({},lI,$t),"symbol":ft({},lI,$t)});var ae=new ZR(te);ae.name=nI.line,ae.id=this._getNodeId("line"),nt.add(ae)}},{"key":"getTextAlign","value":function(nt){var at="center";return Nt(nt[0],0)?Nt(nt[1],0)?Object.is(nt[1],-0)?at="start":Object.is(nt[0],-0)&&(at="end"):at="center":nt[0]>0?at="start":nt[0]<0&&(at="end"),at}},{"key":"getTitleAttribute","value":function(){var nt,at,lt,Rt=this,Bt=this.attribute.title,Lt=Bt.position,Ht=void 0===Lt?"middle":Lt,jt=Bt.space,$t=void 0===jt?4:jt,Kt=Bt.textStyle,te=void 0===Kt?{}:Kt,ne=Bt.autoRotate,re=void 0===ne||ne,ae=Bt.shape,oe=Bt.background,se=Bt.state,le=void 0===se?{}:se,ue=Bt.maxWidth,ce=kB(Bt,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]),he=.5;"start"===Ht?he=0:"end"===Ht&&(he=1);var de=this.attribute.verticalFactor,fe=-1*(void 0===de?1:de),pe=this.getTickCoord(he),ve=this.getRelativeVector(),Ae=0;if((null===(nt=this.attribute.label)||void 0===nt?void 0:nt.visible)&&!1===this.attribute.label.inside){var we=+st(this.attribute,"label.space",4);Ae+=we;var Ce=Object.keys(this.axisLabelLayerSize).length;if(0===ve[1]){var je=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(je)?Ae+=je+(Ce-1)*we:Ae=0}else if(0===ve[0])if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){var Ne=this.axisLabelLayerSize[0].labelPos,Ve=this.axisLabelsContainer.AABBBounds;Ae+=(1===fe?Ve.x2>Ne?Math.min(Ve.x2-Ne,Ve.width()):0:Ve.x1<Ne?Math.min(Ne-Ve.x1,Ve.width()):0)+(Ce-1)*we}else Ae=0;else Object.keys(this.axisLabelLayerSize).forEach((function(nt,at){Ae+=Rt.axisLabelLayerSize[nt].width+(at>0?we:0)}))}var Ge=0;(null===(at=this.attribute.tick)||void 0===at?void 0:at.visible)&&!1===this.attribute.tick.inside&&(Ge=this.attribute.tick.length||4),(null===(lt=this.attribute.subTick)||void 0===lt?void 0:lt.visible)&&!1===this.attribute.subTick.inside&&(Ge=Math.max(Ge,this.attribute.subTick.length||2));var ti,li,hi=Ge+Ae+$t,di=this.getVerticalCoord(pe,hi,!1),fi=this.getVerticalVector(hi,!1,{"x":0,"y":0}),pi=ce.angle;if(ti="start"===Ht?"start":"end"===Ht?"end":"center",j(pi)&&re){pi=rR(ve,[1,0],!0);var vi=this.attribute.verticalFactor;li=1==-1*(void 0===vi?1:vi)?"bottom":"top"}else ti=this.getTextAlign(fi),li=this.getTextBaseline(fi,!1);var mi=ue;if(j(mi)){var _i=this.attribute,bi=_i.verticalLimitSize,Mi=_i.verticalMinSize,Ti=_i.orient,Ii=Math.min(bi||1/0,Mi||1/0);if(Q(Ii))if("bottom"===Ti||"top"===Ti)if(pi!==Math.PI/2){var Bi=Math.abs(Math.cos(null!=pi?pi:0));mi=Bi<1e-6?1/0:this.attribute.end.x/Bi}else mi=Ii-hi;else if(pi&&0!==pi){var zi=Math.abs(Math.sin(pi));mi=zi<1e-6?1/0:this.attribute.end.y/zi}else mi=Ii-hi}var Wi=Object.assign(Object.assign(Object.assign({},di),ce),{"maxWidth":mi,"textStyle":Object.assign({"textAlign":ti,"textBaseline":li},te),"state":{"text":ft({},lI,le.text),"shape":ft({},lI,le.shape),"panel":ft({},lI,le.background)}});return Wi.angle=pi,ae&&ae.visible&&(Wi.shape=Object.assign({"visible":!0},ae.style),ae.space&&(Wi.space=ae.space)),oe&&oe.visible&&(Wi.panel=Object.assign({"visible":!0},oe.style)),Wi}},{"key":"getTextBaseline","value":function(nt,at){var lt="middle",Rt=this.attribute.verticalFactor,Bt=(at?1:-1)*(void 0===Rt?1:Rt);return Nt(nt[1],0)?lt=!Nt(nt[0],0)||Object.is(nt[0],-0)||Object.is(nt[1],-0)?"middle":1===Bt?"bottom":"top":nt[1]>0?lt="top":nt[1]<0&&(lt="bottom"),lt}},{"key":"getLabelAlign","value":function(nt,at,lt){var Rt=this.attribute.orient;if(["top","bottom","right","left"].includes(Rt)||0===nt[0]&&0===nt[1]){if("top"===Rt||"bottom"===Rt)return gB(at?"bottom"===Rt?"top":"bottom":Rt,lt);if("left"===Rt||"right"===Rt)return yB(at?"left"===Rt?"right":"left":Rt,lt)}return{"textAlign":this.getTextAlign(nt),"textBaseline":this.getTextBaseline(nt,at)}}},{"key":"beforeLabelsOverlap","value":function(nt,at,lt,Rt,Bt){var Lt,Ht,jt,$t,Kt=(this.attribute.label||{}).flush;if(void 0!==Kt&&Kt&&nt.length){var te=this.attribute,ne=te.orient,re=te.start,ae=te.end,oe="bottom"===ne||"top"===ne,se=nt[0],le=kt(nt),ue=oe?se.attribute.x>le.attribute.x:se.attribute.y<le.attribute.y;if(oe){var ce=ue?le:se,he=ue?se:le,de=re.x,fe=ae.x,pe=ce.AABBBounds.x1,ve=he.AABBBounds.x2;pe<de&&(ce.attribute.angle?ce.setAttributes({"dx":(null!==(Lt=ce.attribute.dx)&&void 0!==Lt?Lt:0)+de-pe}):ce.setAttributes({"x":de,"textAlign":"left"})),ve>fe&&(he.attribute.angle?he.setAttributes({"dx":(null!==(Ht=he.attribute.dx)&&void 0!==Ht?Ht:0)+fe-ve}):he.setAttributes({"x":fe,"textAlign":"right"}))}else{var Ae=ue?le:se,we=ue?se:le,Ce=Ae.AABBBounds.y2,je=we.AABBBounds.y1,Ne=re.y,Ve=ae.y;je<Ne&&(we.attribute.angle?we.setAttributes({"dy":(null!==(jt=we.attribute.dy)&&void 0!==jt?jt:0)+Ne-je}):we.setAttributes({"y":Ne,"textBaseline":"top"})),Ce>Ve&&(Ae.attribute.angle?Ae.setAttributes({"dy":(null!==($t=Ae.attribute.dy)&&void 0!==$t?$t:0)+Ve-Ce}):Ae.setAttributes({"y":Ve,"textBaseline":"bottom"}))}}}},{"key":"handleLabelsOverlap","value":function(nt,at,lt,Rt,Bt){if(!ot(nt)){var Lt=this.attribute,Ht=Lt.verticalLimitSize,jt=Lt.label,$t=Lt.orient,Kt=this._getAxisLabelLimitLength(Ht,Bt),te=jt.layoutFunc,ne=jt.autoRotate,re=jt.autoRotateAngle,ae=jt.autoLimit,oe=jt.limitEllipsis,se=jt.autoHide,le=jt.autoHideMethod,ue=jt.autoHideSeparation,ce=jt.lastVisible,he=jt.firstVisible,de=jt.autoWrap,fe=jt.overflowLimitLength;if(H(te))te(nt,at,Rt,this);else{if(ne?fB(nt,{"labelRotateAngle":re,"orient":$t}):de&&function(nt,at){var lt=at.limitLength,Rt=at.axisLength,Bt=at.ellipsis,Lt=void 0===Bt?"...":Bt,Ht=at.orient;if(!ot(nt)&&Q(lt)){var jt=nt[0].attribute.angle,$t=QR(jt),Kt=JR(jt),te="top"===Ht||"bottom"===Ht,ne=Rt/nt.length;nt.forEach((function(at,Rt){var Bt,Ht,jt,re,ae;if(te){if(Kt&&Math.floor(at.AABBBounds.height())<=lt)return;if($t){var oe=_B(at.attribute.x,null===(Bt=nt[Rt+1])||void 0===Bt?void 0:Bt.attribute.x,null===(Ht=nt[Rt-1])||void 0===Ht?void 0:Ht.attribute.x);Q(oe)&&(ne=we(ne,oe))}}else{if(Kt){var se=_B(at.attribute.y,null===(jt=nt[Rt+1])||void 0===jt?void 0:jt.attribute.y,null===(re=nt[Rt-1])||void 0===re?void 0:re.attribute.y);Q(se)&&(ne=we(ne,se))}if($t&&Math.floor(at.AABBBounds.width())<=lt)return}var le=null,ue=null;te?Kt?(le=lt,ue=ne):(le=ne,ue=lt):Kt?(le=ne,ue=lt):(le=lt,ue=ne),at.setAttributes({"maxLineWidth":le,"ellipsis":null!==(ae=at.attribute.ellipsis)&&void 0!==ae?ae:Lt,"whiteSpace":"normal","heightLimit":ue})}))}}(nt,{"orient":$t,"limitLength":Kt,"axisLength":"left"===$t||"right"===$t?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),"ellipsis":oe}),!de&&ae&&Q(Kt)&&Kt>0){var pe="left"===$t||"right"===$t,ve=pe?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x);mB(nt,{"limitLength":Kt,"verticalLimitLength":pe?ve/nt.length:se||ne?1/0:ve/nt.length,"ellipsis":oe,"orient":$t,"axisLength":ve,"overflowLimitLength":fe})}se&&pB(nt,{"orient":$t,"method":le,"separation":ue,"lastVisible":ce,"firstVisible":he})}}}},{"key":"afterLabelsOverlap","value":function(nt,at,lt,Rt,Bt){var Lt,Ht=this.attribute,jt=Ht.verticalLimitSize,$t=Ht.orient,Kt="bottom"===$t||"top"===$t,te=lt.AABBBounds,ne=Kt?te.height():te.width(),re=this.attribute.verticalMinSize;if(Q(re)&&(!Q(jt)||re<=jt)){var ae,oe,se=this._getAxisLabelLimitLength(re,Bt);ne=Math.max(ne,se),"left"===$t?(ae=te.x2-ne,oe=te.y1):"right"===$t?(ae=te.x1,oe=te.y1):"top"===$t?(ae=te.x1,oe=te.y2-ne):"bottom"===$t&&(ae=te.x1,oe=te.y1);var le=Hy.rect({"x":ae,"y":oe,"width":Kt?te.width():ne,"height":Kt?ne:te.height(),"pickable":!1});le.name=nI.axisLabelBackground,le.id=this._getNodeId("axis-label-background"),lt.insertBefore(le,lt.firstChild)}N(this.attribute.label.containerAlign)&&("left"===$t?Lt=te.x2-ne:"right"===$t?Lt=te.x1:"top"===$t?Lt=te.y2-ne:"bottom"===$t&&(Lt=te.y1),function(nt,at,lt,Rt,Bt){"left"===Rt||"right"===Rt?"left"===Bt?nt.forEach((function(nt){var lt;nt.setAttributes({"dx":(null!==(lt=nt.attribute.dx)&&void 0!==lt?lt:0)+at-nt.AABBBounds.x1})})):"right"===Bt?nt.forEach((function(nt){var Rt;nt.setAttributes({"dx":(null!==(Rt=nt.attribute.dx)&&void 0!==Rt?Rt:0)+at+lt-nt.AABBBounds.x2})})):"center"===Bt&&nt.forEach((function(nt){var Rt;nt.setAttributes({"dx":(null!==(Rt=nt.attribute.dx)&&void 0!==Rt?Rt:0)+at+lt/2-(nt.AABBBounds.x1+nt.AABBBounds.x2)/2})})):"bottom"!==Rt&&"top"!==Rt||("top"===Bt?nt.forEach((function(nt){var lt;nt.setAttributes({"dy":(null!==(lt=nt.attribute.dy)&&void 0!==lt?lt:0)+at-nt.AABBBounds.y1})})):"bottom"===Bt?nt.forEach((function(nt){var Rt;nt.setAttributes({"dy":(null!==(Rt=nt.attribute.dy)&&void 0!==Rt?Rt:0)+at+lt-nt.AABBBounds.y2})})):"middle"===Bt&&nt.forEach((function(nt){var Rt;nt.setAttributes({"dy":(null!==(Rt=nt.attribute.dy)&&void 0!==Rt?Rt:0)+at+lt/2-(nt.AABBBounds.y1+nt.AABBBounds.y2)/2})})))}(nt,Lt,ne,$t,this.attribute.label.containerAlign))}},{"key":"_getAxisLabelLimitLength","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt=this.attribute,$t=jt.label,Kt=jt.title,te=jt.line,ne=jt.tick,re=null!==(lt=$t.space)&&void 0!==lt?lt:4,ae=nt,oe=0,se=0,le=te&&te.visible?null!==(Rt=te.style.lineWidth)&&void 0!==Rt?Rt:1:0,ue=ne&&ne.visible?null!==(Bt=ne.length)&&void 0!==Bt?Bt:4:0;if(Kt&&Kt.visible&&"string"==typeof Kt.text){oe=oR(Kt.text,Kt.textStyle,null===(Ht=null===(Lt=this.stage)||void 0===Lt?void 0:Lt.getTheme())||void 0===Ht?void 0:Ht.text).height;var ce=Ci(Kt.padding);se=Kt.space+ce[0]+ce[2]}return ae&&(ae=(ae-re-se-oe-le-ue)/at),ae}},{"key":"release","value":function(){y(e,"release",this,3)([]),this._breaks=null}}])}(pI);_I.defaultAttributes=hI,bt(_I,yI);var CI=o((function t(){r(this,t)}),[{"key":"isInValidValue","value":function(nt){var at=this.attribute,lt=at.startAngle,Rt=void 0===lt?jP:lt,Bt=at.endAngle,Lt=void 0===Bt?NP:Bt;return Math.abs(Lt-Rt)%(2*Math.PI)==0?nt>1:nt<0||nt>1}},{"key":"getTickCoord","value":function(nt){var at=this.attribute,lt=at.startAngle,Rt=void 0===lt?jP:lt,Bt=at.endAngle,Lt=void 0===Bt?NP:Bt,Ht=at.center,jt=at.radius,$t=at.inside,Kt=void 0!==$t&&$t,te=at.innerRadius,ne=void 0===te?0:te;return Pe(Ht,Kt&&ne>0?ne:jt,Rt+(Lt-Rt)*nt)}},{"key":"getVerticalVector","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return eB(nt,arguments.length>2?arguments[2]:void 0,this.attribute.center,at,this.attribute.inside)}},{"key":"getRelativeVector","value":function(nt){var at=this.attribute.center;return[nt.y-at.y,-1*(nt.x-at.x)]}}]);function wB(nt,at){var lt=nt.length;return{"prevLabel":at>=1?nt[at-1]:nt[lt-1],"nextLabel":at<lt-1?nt[at+1]:nt[0]}}function MB(nt,at,lt){var Rt;nt.setAttributes({"maxLineWidth":at,"ellipsis":null!==(Rt=nt.attribute.ellipsis)&&void 0!==Rt?Rt:lt})}function TB(nt,at,lt){var Rt=[];if(nt.length>=3){var Bt=wB(nt,at),Lt=Bt.prevLabel,Ht=Bt.nextLabel;Rt.push(Lt,Ht)}else 2===nt.length&&Rt.push(nt[0===at?1:0]);var jt=nt[at],$t=Math.min(Math.abs(jt.attribute.y-lt.y1),Math.abs(jt.attribute.y-lt.y2));Rt.forEach((function(nt){$t=Math.min($t,Math.abs(nt.attribute.y-jt.attribute.y))})),$t>0&&jt.setAttributes({"whiteSpace":"normal","heightLimit":$t})}var CB=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};xB(),yP();var MI=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])}return h(e,nt),o(e,[{"key":"renderLine","value":function(nt){var at,lt=this.attribute,Rt=lt.startAngle,Bt=void 0===Rt?jP:Rt,Lt=lt.endAngle,Ht=void 0===Lt?NP:Lt,jt=lt.radius,$t=lt.center,Kt=lt.innerRadius,te=void 0===Kt?0:Kt,ne=lt.line,re=void 0===ne?{}:ne,ae=lt.inside,oe=void 0!==ae&&ae,se=lt.sides,le=jt,ue=te;if(oe&&te>0&&(le=te,ue=0),Q(se)&&se>=3){var ce=iB($t,se,le,Bt,Ht);at=Hy.path(Object.assign(Object.assign({},re.style),{"path":nB(ce,!0)}))}else{var he=Object.assign(Object.assign(Object.assign({},$t),{"startAngle":Bt,"endAngle":Ht,"radius":le,"innerRadius":ue}),re.style);at=Hy.circle(he)}at.name=nI.line,at.id=this._getNodeId("line"),ot(re.state)||(at.states=ft({},lI,re.state)),nt.add(at)}},{"key":"getTitleAttribute","value":function(){var nt,at,lt,Rt=this.attribute,Bt=Rt.center,Lt=Rt.radius,Ht=Rt.innerRadius,jt=void 0===Ht?0:Ht,$t=this.attribute.title,Kt=$t.space,te=void 0===Kt?4:Kt,ne=$t.textStyle,re=void 0===ne?{}:ne,ae=$t.shape,oe=$t.background,se=$t.state,le=void 0===se?{}:se,ue=CB($t,["space","textStyle","shape","background","state"]),ce=Bt,he=0;(null===(nt=this.attribute.label)||void 0===nt?void 0:nt.visible)&&!1===this.attribute.label.inside&&(he=st(this.attribute.label,"style.fontSize",12)+st(this.attribute.label,"space",4));var de=0;(null===(at=this.attribute.tick)||void 0===at?void 0:at.visible)&&!1===this.attribute.tick.inside&&(de=this.attribute.tick.length||4),(null===(lt=this.attribute.subTick)||void 0===lt?void 0:lt.visible)&&!1===this.attribute.subTick.inside&&(de=Math.max(de,this.attribute.subTick.length||2));var fe=Lt+de+he+te,pe="middle",ve=this.attribute.title.position;j(ve)&&(ve=0===jt?"end":"middle"),"start"===ve?(pe="bottom",ce={"x":Bt.x,"y":Bt.y-fe}):"end"===ve&&(pe="top",ce={"x":Bt.x,"y":Bt.y+fe});var Ae=Object.assign(Object.assign(Object.assign({},ce),ue),{"textStyle":Object.assign({"textBaseline":pe,"textAlign":"center"},re),"state":{"text":ft({},lI,le.text),"shape":ft({},lI,le.shape),"panel":ft({},lI,le.background)}}),we=ue.angle;return Ae.angle=we,ae&&ae.visible&&(Ae.shape=Object.assign({"visible":!0},ae.style),ae.space&&(Ae.space=ae.space)),oe&&oe.visible&&(Ae.panel=Object.assign({"visible":!0},oe.style)),Ae}},{"key":"getSubTickLineItems","value":function(){var nt,at,lt=this.attribute.subTick,Rt=[],Bt=lt.count,Lt=void 0===Bt?4:Bt,Ht=lt.inside,jt=void 0!==Ht&&Ht,$t=lt.length,Kt=void 0===$t?2:$t,te=this.tickLineItems,ne=te.length;if(ne>=2)for(var re=this.data[1].value-this.data[0].value,ae=null===(at=null===(nt=this.attribute)||void 0===nt?void 0:nt.tick)||void 0===at?void 0:at.alignWithLabel,oe=0;oe<ne;oe++)for(var se=te[oe],le=te[oe+1],ue=0;ue<Lt;ue++){var ce=(ue+1)/(Lt+1),he=(1-ce)*se.value+ce*(le?le.value:ae?1:se.value+re),de=this.getTickCoord(he),fe=this.getVerticalCoord(de,Kt,jt);Rt.push({"start":de,"end":fe,"value":he})}return Rt}},{"key":"beforeLabelsOverlap","value":function(nt,at,lt,Rt,Bt){}},{"key":"handleLabelsOverlap","value":function(nt,at,lt,Rt,Bt){if(!ot(nt)){var Lt=this.attribute,Ht=Lt.inside,jt=Lt.radius,$t=Lt.center,Kt=Lt.size,te=Lt.label,ne=Lt.orient,re=Kt?{"x1":0,"y1":0,"x2":Kt.width,"y2":Kt.height}:{"x1":$t.x-jt,"y1":$t.y-jt,"x2":$t.x+jt,"y2":$t.y+jt},ae=te.layoutFunc,oe=te.autoLimit,se=te.limitEllipsis,le=te.autoHide,ue=te.autoHideMethod,ce=te.autoHideSeparation,he=te.autoWrap;H(ae)?ae(nt,at,Rt,this):((oe||he)&&function(nt,at){var lt=at.ellipsis,Rt=at.inside,Bt=at.bounds,Lt=at.autoWrap,Ht=at.center;Rt||nt.forEach((function(at,Rt){var jt=at.attribute,$t=jt.x,Kt=jt.y,te=at.AABBBounds;if(Nt($t,Ht.x)){if(Kt>Bt.y2||Kt<Bt.y1)return void MB(at,0,lt);var ne=Bt.x2-Bt.x1;if(nt.length>=3){var re=wB(nt,Rt),ae=re.prevLabel,oe=re.nextLabel,se=ae.attribute.x,le=oe.attribute.x;se>le&&(se=oe.attribute.x,le=ae.attribute.x);var ue=se===le?ne:$t>=se&&$t<=le?le-se:Math.min(Math.abs(se-$t),Math.abs(le-$t));at.AABBBounds.width()>ue&&MB(at,ue,lt)}else at.AABBBounds.width()>ne&&MB(at,ne,lt)}else $t>Ht.x&&te.x2>Bt.x2?(MB(at,Bt.x2-$t,lt),Lt&&TB(nt,Rt,Bt)):$t<Ht.x&&te.x1<Bt.x1&&(MB(at,$t-Bt.x1,lt),Lt&&TB(nt,Rt,Bt))}))}(nt,{"inside":Ht,"autoWrap":he,"bounds":re,"ellipsis":se,"center":$t}),le&&pB(nt,{"orient":ne,"method":ue,"separation":ce}))}}},{"key":"afterLabelsOverlap","value":function(nt,at,lt,Rt,Bt){}},{"key":"getTextBaseline","value":function(nt){return Math.abs(nt[1]/nt[0])<.3?"middle":nt[1]<0?"bottom":nt[1]>0?"top":"middle"}},{"key":"getLabelAlign","value":function(nt,at,lt){return Nt(nt[0],0)?{"textAlign":"center","textBaseline":nt[1]>0?"top":"bottom"}:nt[0]<0?{"textAlign":"right","textBaseline":this.getTextBaseline(nt)}:nt[0]>0?{"textAlign":"left","textBaseline":this.getTextBaseline(nt)}:{"textAlign":"center","textBaseline":"middle"}}},{"key":"getLabelPosition","value":function(nt,at,lt,Rt){return nt}}])}(pI);MI.defaultAttributes=hI,bt(MI,CI);var TI,EI=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).mode=Pl.NORMAL,nt}return h(e,nt),o(e,[{"key":"onBind","value":function(){var nt=this,at=this.target.getInnerView(),lt=this.target.getPrevInnerView();lt&&(this._newElementAttrMap={},UP(at,(function(at){var Rt,Bt,Lt,Ht,jt,$t;if("group"!==at.type&&at.id){var Kt=lt[at.id];if(Kt){if(!mt(at.attribute,Kt.attribute)){var te=ct(at.attribute);nt._newElementAttrMap[at.id]={"state":"update","node":at,"attrs":Object.assign(Object.assign({},te),{"opacity":null!==(Rt=te.opacity)&&void 0!==Rt?Rt:1,"fillOpacity":null!==(Bt=te.fillOpacity)&&void 0!==Bt?Bt:1,"strokeOpacity":null!==(Lt=te.strokeOpacity)&&void 0!==Lt?Lt:1})},at.setAttributes(Kt.attribute)}}else{var ne={"opacity":null!==(Ht=at.attribute.opacity)&&void 0!==Ht?Ht:1,"fillOpacity":null!==(jt=at.attribute.fillOpacity)&&void 0!==jt?jt:1,"strokeOpacity":null!==($t=at.attribute.strokeOpacity)&&void 0!==$t?$t:1};nt._newElementAttrMap[at.id]={"state":"enter","node":at,"attrs":ne},at.setAttributes({"opacity":0,"fillOpacity":0,"strokeOpacity":0})}}})))}},{"key":"onStart","value":function(){var nt=this,at=this.duration,lt=this.easing;this._newElementAttrMap&&Object.keys(this._newElementAttrMap).forEach((function(Rt){var Bt,Lt=nt._newElementAttrMap[Rt],Ht=Lt.node,jt=Lt.attrs;if("enter"===Lt.state){var $t=(null!==(Bt=nt.params)&&void 0!==Bt?Bt:{}).enter,Kt=void 0===$t?{}:$t;at=Q(Kt.duration)?Kt.duration:at,lt=Kt.easing?Kt.easing:lt}"path"===Ht.type?Ht.animate({"interpolate":function(nt,at,lt,Rt,Bt){return"path"===nt&&(Bt.path=function(nt,at){var lt,Rt,Bt,Lt=oe.lastIndex=se.lastIndex=0,Ht=-1,jt=[],$t=[];for(nt+="",at+="";(lt=oe.exec(nt))&&(Rt=se.exec(at));)(Bt=Rt.index)>Lt&&(Bt=at.slice(Lt,Bt),jt[Ht]?jt[Ht]+=Bt:jt[++Ht]=Bt),(lt=lt[0])===(Rt=Rt[0])?jt[Ht]?jt[Ht]+=Rt:jt[++Ht]=Rt:(jt[++Ht]=null,$t.push({"i":Ht,"x":Jt(lt,Rt)})),Lt=se.lastIndex;return Lt<at.length&&(Bt=at.slice(Lt),jt[Ht]?jt[Ht]+=Bt:jt[++Ht]=Bt),jt.length<2?$t[0]?function(nt){return function(at){return nt(at)+""}}($t[0].x):function(nt){return function(){return nt}}(at):(at=$t.length,function(nt){for(var lt,Rt=0;Rt<at;++Rt)jt[(lt=$t[Rt]).i]=lt.x(nt);return jt.join("")})}(lt,Rt)(at),!0)}}).to(jt,at,lt):Ht.animate().to(jt,at,lt)}))}},{"key":"onUpdate","value":function(nt,at,lt){}}])}(Xh),BB=function(nt){return nt.map((function(nt,at){return{"index":at,"value":nt}}))},IB=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=new _i(nt).expand(lt/2),Bt=new _i(at).expand(lt/2);return Rt.intersects(Bt)},LB=function(nt,at,lt,Rt){return lt<nt?Math.max(nt-at/2,lt):lt>nt?Math.min(nt-at/2,lt-at):lt<Rt?lt:lt-at},DB=function(nt,at,lt){var Rt,Bt=lt.labelStyle,Lt=lt.axisOrientType,Ht=lt.labelFlush,jt=lt.labelFormatter,$t=lt.startAngle,Kt=void 0===$t?0:$t,te=null!==(Rt=Bt.angle)&&void 0!==Rt?Rt:0;"vertical"===Bt.direction&&(te+=Me(90));var ne=["bottom","top"].includes(Lt),re=["left","right"].includes(Lt),ae=1,oe=0;ne||(re?(ae=0,oe=1):Kt&&(ae=Math.cos(Kt),oe=-Math.sin(Kt)));var se=aR(Bt),le=nt.range(),ue=at.map((function(lt,Rt){var Lt,$t,Kt,ue,ce=jt?jt(lt):"".concat(lt),he=se.quickMeasure(ce),de=he.width,fe=he.height,pe=Math.max(de,12),ve=Math.max(fe,12),Ae=nt.scale(lt),we=ae*Ae,Ce=oe*Ae,je=we,Ne=Ce;Ht&&ne&&0===Rt?je=LB(we,pe,le[0],le[le.length-1]):Ht&&ne&&Rt===at.length-1?je=LB(we,pe,le[le.length-1],le[0]):Kt=null!==(Lt=Bt.textAlign)&&void 0!==Lt?Lt:"center","right"===Kt?je-=pe:"center"===Kt&&(je-=pe/2),Ht&&re&&0===Rt?Ne=LB(Ce,ve,le[0],le[le.length-1]):Ht&&re&&Rt===at.length-1?Ne=LB(Ce,ve,le[le.length-1],le[0]):ue=null!==($t=Bt.textBaseline)&&void 0!==$t?$t:"middle","bottom"===ue?Ne-=ve:"middle"===ue&&(Ne-=ve/2);var Ve=(new _i).set(je,Ne,je+pe,Ne+ve);return te&&Ve.rotate(te,we,Ce),Ve}));return ue};!function(nt){nt.Identity="identity",nt.Linear="linear",nt.Log="log",nt.Pow="pow",nt.Sqrt="sqrt",nt.Symlog="symlog",nt.Time="time",nt.Quantile="quantile",nt.Quantize="quantize",nt.Threshold="threshold",nt.Ordinal="ordinal",nt.Point="point",nt.Band="band"}(TI||(TI={}));var PI={};function FB(nt){switch(nt){case TI.Linear:case TI.Log:case TI.Pow:case TI.Sqrt:case TI.Symlog:case TI.Time:return!0;default:return!1}}function zB(nt){return!!PI[nt]}function HB(nt){switch(nt){case TI.Ordinal:case TI.Point:case TI.Band:return!0;default:return!1}}function jB(nt){return nt}Object.values(TI).forEach((function(nt){PI[nt]=!0}));var NB=function(nt){return nt<0?-Math.sqrt(-nt):Math.sqrt(nt)},VB=function(nt){return nt<0?-nt*nt:nt*nt},GB=function(nt){return-Math.log(-nt)},WB=function(nt){return-Math.exp(-nt)},UB=function(nt){return isFinite(nt)?Math.pow(10,nt):nt<0?0:nt},YB=function(nt){return 10===nt?UB:nt===Math.E?Math.exp:function(at){return Math.pow(nt,at)}},XB=function(nt){return nt===Math.E?Math.log:10===nt?Math.log10:2===nt?Math.log2:(nt=Math.log(nt),function(at){return Math.log(at)/nt})},KB=function(nt){return function(at){return Math.sign(at)*Math.log1p(Math.abs(at/nt))}},qB=function(nt){return function(at){return Math.sign(at)*Math.expm1(Math.abs(at))*nt}};function ZB(nt,at){if(nt=Number(nt),at=Number(at),at-=nt)return function(lt){return(lt-nt)/at};var lt=Number.isNaN(at)?NaN:.5;return function(){return lt}}function JB(nt,at,lt){var Rt,Bt,Lt=nt[0],Ht=nt[1],jt=at[0],$t=at[1];return Ht<Lt?(Rt=ZB(Ht,Lt),Bt=lt($t,jt)):(Rt=ZB(Lt,Ht),Bt=lt(jt,$t)),function(nt){return Bt(Rt(nt))}}function QB(nt,at,lt){var Rt;return Rt=1===nt?nt+2*lt:nt-at+2*lt,nt?Rt>0?Rt:1:0}function $B(nt,at,lt,Rt){return 1===lt&&(lt=0),QB(nt,lt,Rt)*(at/(1-lt))}function tI(nt,at){var lt=(nt[1]-nt[0])/(at[1]-at[0]),Rt=nt[0]-lt*at[0];return[Rt,lt+Rt]}function eI(nt,at,lt){var Rt=Math.min(nt.length,at.length)-1,Bt=new Array(Rt),Lt=new Array(Rt),Ht=-1;for(nt[Rt]<nt[0]&&(nt=nt.slice().reverse(),at=at.slice().reverse());++Ht<Rt;)Bt[Ht]=ZB(nt[Ht],nt[Ht+1]),Lt[Ht]=lt(at[Ht],at[Ht+1]);return function(at){var lt=Dt(nt,at,1,Rt)-1;return Lt[lt](Bt[lt](at))}}var iI=function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=Math.floor(Math.log10(nt)),Rt=nt/Math.pow(10,lt);return(at?Rt<1.5?1:Rt<3?2:Rt<7?5:10:Rt<=1?1:Rt<=2?2:Rt<=5?5:10)*Math.pow(10,lt)},II=o((function t(){r(this,t),this._rangeFactorStart=null,this._rangeFactorEnd=null}),[{"key":"_calculateWholeRange","value":function(nt){return this._wholeRange?this._wholeRange:N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&2===nt.length?(this._wholeRange=tI(nt,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):nt}},{"key":"rangeFactor","value":function(nt,at,lt){return nt?(2===nt.length&&nt.every((function(nt){return nt>=0&&nt<=1}))&&(this._wholeRange=null,0===nt[0]&&1===nt[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=nt[0],this._rangeFactorEnd=nt[1])),this):lt?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):N(this._rangeFactorStart)&&N(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}},{"key":"rangeFactorStart","value":function(nt,at){var lt;return j(nt)?this._rangeFactorStart:(nt>=0&&nt<=1&&(this._wholeRange=null,0!==nt||!j(this._rangeFactorEnd)&&1!==this._rangeFactorEnd?(this._rangeFactorStart=nt,this._rangeFactorEnd=null!==(lt=this._rangeFactorEnd)&&void 0!==lt?lt:1):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}},{"key":"rangeFactorEnd","value":function(nt,at){var lt;return j(nt)?this._rangeFactorEnd:(nt>=0&&nt<=1&&(this._wholeRange=null,0!==nt||!j(this._rangeFactorStart)&&0!==this._rangeFactorStart?(this._rangeFactorEnd=nt,this._rangeFactorStart=null!==(lt=this._rangeFactorStart)&&void 0!==lt?lt:0):(this._rangeFactorStart=null,this._rangeFactorEnd=null)),this)}},{"key":"generateFishEyeTransform","value":function(){var nt;if(this._fishEyeOptions){var at=this._fishEyeOptions,lt=at.distortion,Rt=void 0===lt?2:lt,Bt=at.radiusRatio,Lt=void 0===Bt?.1:Bt,Ht=at.radius,jt=this.range(),$t=jt[0],Kt=jt[jt.length-1],te=Math.min($t,Kt),ne=Math.max($t,Kt),re=Ut(null!==(nt=this._fishEyeOptions.focus)&&void 0!==nt?nt:0,te,ne),ae=j(Ht)?(ne-te)*Lt:Ht,oe=Math.exp(Rt);oe=oe/(oe-1)*ae;var se=Rt/ae;this._fishEyeTransform=function(nt){var at=Math.abs(nt-re);if(at>=ae)return nt;if(at<=1e-6)return re;var lt=oe*(1-Math.exp(-at*se))/at*.75+.25;return re+(nt-re)*lt}}else this._fishEyeTransform=null}},{"key":"unknown","value":function(nt){return arguments.length?(this._unknown=nt,this):this._unknown}},{"key":"get","value":function(nt,at){var lt;return null!==(lt=null==this?void 0:this[nt])&&void 0!==lt?lt:at}}]),OI=Symbol("implicit"),DI=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e)).type=TI.Ordinal,nt._index=new Map,nt._domain=[],nt._ordinalRange=[],nt._unknown=OI,nt}return h(e,nt),o(e,[{"key":"specified","value":function(nt){var at;return nt?(this._specified=Object.assign(null!==(at=this._specified)&&void 0!==at?at:{},nt),this):Object.assign({},this._specified)}},{"key":"_getSpecifiedValue","value":function(nt){if(this._specified)return this._specified[nt]}},{"key":"clone","value":function(){var nt=(new e).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&nt.specified(this._specified),nt}},{"key":"calculateVisibleDomain","value":function(nt){return N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&2===nt.length?[this.invert(nt[0]),this.invert(nt[1])]:this._domain}},{"key":"scale","value":function(nt){var at="".concat(nt),lt=this._getSpecifiedValue(at);if(void 0!==lt)return lt;var Rt=this._index.get(at);if(!Rt){if(this._unknown!==OI)return this._unknown;Rt=this._domain.push(nt),this._index.set(at,Rt)}var Bt=this._ordinalRange[(Rt-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(Bt):Bt}},{"key":"invert","value":function(nt){for(var at=0;at<this._ordinalRange.length&&this._ordinalRange[at]!==nt;)at++;return this._domain[(at-1)%this._domain.length]}},{"key":"domain","value":function(nt){if(!nt)return this._domain.slice();this._domain=[],this._index=new Map;var at,lt=s(nt);try{for(lt.s();!(at=lt.n()).done;){var Rt=at.value,Bt="".concat(Rt);this._index.has(Bt)||this._index.set(Bt,this._domain.push(Rt))}}catch(nt){lt.e(nt)}finally{lt.f()}return this}},{"key":"range","value":function(nt){if(!nt)return this._ordinalRange.slice();var at=Array.from(nt);return this._ordinalRange=at,this}},{"key":"index","value":function(nt){var at;return this._index&&null!==(at=this._index.get("".concat(nt)))&&void 0!==at?at:-1}}])}(II);function oI(nt,at,lt,Rt){for(var Bt=[],Lt=nt;Lt<=at;)Bt.push(Lt),Lt+=lt;return Rt&&Bt.reverse(),Bt}function sI(nt,at,lt,Rt){var Bt,Lt;if(at=Math.floor(+at),nt=Math.floor(+nt),!(lt=Math.floor(+lt)))return[];if(nt===at)return[nt];if(Bt=at<nt){var Ht=nt;nt=at,at=Ht}var jt=Xt(1,at-nt+1)(lt);if(Lt=Math.floor((at-nt+1)/jt),!Rt)for(;Math.ceil((at-nt+1)/Lt)>lt&&jt>1;)jt-=1,Lt=Math.floor((at-nt)/jt);return oI(nt,at,Lt,Bt)}var LI=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).type=TI.Band,at._range=[0,1],at._step=void 0,at._bandwidth=void 0,at._isFixed=!1,at._round=!1,at._paddingInner=0,at._paddingOuter=0,at._align=.5,at._unknown=void 0,delete at.unknown,at.rescale(nt),at}return h(e,nt),o(e,[{"key":"rescale","value":function(nt,at){if(nt)return this;this._wholeRange=null;var lt=this._calculateWholeRange(this._range,at),Rt=y(e,"domain",this,3)([]).length,Bt=lt[1]<lt[0],Lt=lt[Number(Bt)-0],Ht=lt[1-Number(Bt)],jt=QB(Rt,this._paddingInner,this._paddingOuter);return this._step=(Ht-Lt)/Math.max(1,jt||1),this._round&&(this._step=Math.floor(this._step)),Lt+=(Ht-Lt-this._step*(Rt-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(Lt=Math.round(Lt),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={"reverse":Bt,"start":Bt?Lt+this._step*(Rt-1):Lt,"count":Rt},this.generateFishEyeTransform(),this}},{"key":"scale","value":function(nt){if(this._bandRangeState){var at="".concat(nt),lt=this._getSpecifiedValue(at);if(void 0!==lt)return lt;var Rt=this._index.get(at);if(!Rt){if(this._unknown!==OI)return this._unknown;Rt=this._domain.push(nt),this._index.set(at,Rt)}var Bt=this._bandRangeState,Lt=Bt.count,Ht=Bt.start+(Rt-1)%Lt*(Bt.reverse?-1:1)*this._step;return this._fishEyeTransform?this._fishEyeTransform(Ht):Ht}}},{"key":"_calculateWholeRange","value":function(nt,at){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){var lt;if(N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&2===nt.length){var Rt=tI(nt,[this._rangeFactorStart,this._rangeFactorEnd]);lt=Math.abs(Rt[1]-Rt[0])}else lt=Math.abs(nt[1]-nt[0]);var Bt=function(nt,at,lt,Rt,Bt){var Lt=QB(nt,lt,Rt),Ht=at/Math.max(1,Lt||1);Bt&&(Ht=Math.floor(Ht));var jt=Ht*(1-lt);return Bt&&(jt=Math.round(jt)),jt}(y(e,"domain",this,3)([]).length,lt,this._paddingInner,this._paddingOuter,this._round);Bt<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):Bt>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=Bt,this._isFixed=!1)}if(this.isBandwidthFixed()){var Lt=$B(y(e,"domain",this,3)([]).length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(nt[1]-nt[0]),Ht=Math.min((nt[1]-nt[0])/Lt,1);if(N(this._rangeFactorStart)&&N(this._rangeFactorEnd)){var jt=this._rangeFactorStart+Ht<=1,$t=this._rangeFactorEnd-Ht>=0;if("rangeFactorStart"===at&&jt?this._rangeFactorEnd=this._rangeFactorStart+Ht:"rangeFactorEnd"===at&&$t?this._rangeFactorStart=this._rangeFactorEnd-Ht:nt[0]<=nt[1]?jt?this._rangeFactorEnd=this._rangeFactorStart+Ht:$t?this._rangeFactorStart=this._rangeFactorEnd-Ht:(this._rangeFactorStart=0,this._rangeFactorEnd=Ht):$t?this._rangeFactorStart=this._rangeFactorEnd-Ht:jt?this._rangeFactorEnd=this._rangeFactorStart+Ht:(this._rangeFactorStart=1-Ht,this._rangeFactorEnd=1),Lt>0){var Kt=nt[0]-Lt*this._rangeFactorStart,te=Kt+Lt;this._wholeRange=[Kt,te]}else{var ne=nt[1]+Lt*(1-this._rangeFactorEnd),re=ne-Lt;this._wholeRange=[re,ne]}}else this._rangeFactorStart=0,this._rangeFactorEnd=Ht,this._wholeRange=[nt[0],nt[0]+Lt];return this._wholeRange}return y(e,"_calculateWholeRange",this,3)([nt])}},{"key":"calculateWholeRangeSize","value":function(){var nt=this._calculateWholeRange(this._range);return Math.abs(nt[1]-nt[0])}},{"key":"calculateVisibleDomain","value":function(nt){var at=this._domain;if(N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&at.length){var lt=this._getInvertIndex(nt[0]),Rt=this._getInvertIndex(nt[1]);return at.slice(Math.min(lt,Rt),Math.max(lt,Rt)+1)}return at}},{"key":"domain","value":function(nt,at){return nt?(y(e,"domain",this,3)([nt]),this.rescale(at)):y(e,"domain",this,3)([])}},{"key":"range","value":function(nt,at){return nt?(this._range=[Pt(nt[0]),Pt(nt[1])],this.rescale(at)):this._range}},{"key":"rangeRound","value":function(nt,at){return this._range=[Pt(nt[0]),Pt(nt[1])],this._round=!0,this.rescale(at)}},{"key":"ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return-1===nt?at:sI(0,at.length-1,nt,!1).map((function(nt){return at[nt]}))}},{"key":"tickData","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.ticks(at).map((function(at,lt){return{"index":lt,"tick":at,"value":(nt.scale(at)-nt._range[0]+nt._bandwidth/2)/(nt._range[1]-nt._range[0])}}))}},{"key":"forceTicks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return sI(0,at.length-1,nt,!0).filter((function(nt){return nt<at.length})).map((function(nt){return at[nt]}))}},{"key":"stepTicks","value":function(nt){var at=this.calculateVisibleDomain(this._range);return function(nt,at,lt){var Rt;if(lt=Xt(1,(at=Math.floor(+at))-(nt=Math.floor(+nt))+1)(Math.floor(+lt)),Rt=at<nt){var Bt=nt;nt=at,at=Bt}return oI(nt,at,lt,Rt)}(0,at.length-1,nt).map((function(nt){return at[nt]}))}},{"key":"_getInvertIndex","value":function(nt){var at=0,lt=this.step()/2,Rt=this.bandwidth()/2,Bt=this._domain.length,Lt=this.range(),Ht=Lt[0]>Lt[Lt.length-1];for(at=0;at<Bt;at++){var jt=this.scale(this._domain[at])+Rt;if(0===at&&(!Ht&&!Vt(nt,jt+lt)||Ht&&!Gt(nt,jt-lt)))break;if(at===Bt-1)break;if(!Gt(nt,jt-lt)&&!Vt(nt,jt+lt))break}return at>=0&&at<=Bt-1?at:Bt-1}},{"key":"invert","value":function(nt){return this._domain[this._getInvertIndex(nt)]}},{"key":"padding","value":function(nt,at){return void 0!==nt?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(nt)?Math.min.apply(null,nt):nt)),this._paddingInner=this._paddingOuter,this.rescale(at)):this._paddingInner}},{"key":"paddingInner","value":function(nt,at){return void 0!==nt?(this._paddingInner=Math.max(0,Math.min(1,nt)),this.rescale(at)):this._paddingInner}},{"key":"paddingOuter","value":function(nt,at){return void 0!==nt?(this._paddingOuter=Math.max(0,Math.min(1,nt)),this.rescale(at)):this._paddingOuter}},{"key":"step","value":function(){return this._step}},{"key":"round","value":function(nt,at){return void 0!==nt?(this._round=nt,this.rescale(at)):this._round}},{"key":"align","value":function(nt,at){return void 0!==nt?(this._align=Math.max(0,Math.min(1,nt)),this.rescale(at)):this._align}},{"key":"rangeFactor","value":function(nt,at){return nt?(y(e,"rangeFactor",this,3)([nt]),this.rescale(at)):y(e,"rangeFactor",this,3)([])}},{"key":"rangeFactorStart","value":function(nt,at){return j(nt)?y(e,"rangeFactorStart",this,3)([]):(y(e,"rangeFactorStart",this,3)([nt]),this.rescale(at,"rangeFactorStart"))}},{"key":"rangeFactorEnd","value":function(nt,at){return j(nt)?y(e,"rangeFactorEnd",this,3)([]):(y(e,"rangeFactorEnd",this,3)([nt]),this.rescale(at,"rangeFactorEnd"))}},{"key":"bandwidth","value":function(nt,at){return nt?("auto"===nt?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=nt,this._isFixed=!0),this._userBandwidth=nt,this.rescale(at)):this._bandwidth}},{"key":"maxBandwidth","value":function(nt,at){return nt?(this._maxBandwidth="auto"===nt?void 0:nt,this.rescale(at)):this._maxBandwidth}},{"key":"minBandwidth","value":function(nt,at){return nt?(this._minBandwidth="auto"===nt?void 0:nt,this.rescale(at)):this._minBandwidth}},{"key":"fishEye","value":function(nt,at,lt){return nt||lt?(this._fishEyeOptions=nt,this._fishEyeTransform=null,this.rescale(at)):this._fishEyeOptions}},{"key":"isBandwidthFixed","value":function(){return this._isFixed&&!!this._bandwidth}},{"key":"_isBandwidthFixedByUser","value":function(){return this._isFixed&&this._userBandwidth&&Z(this._userBandwidth)}},{"key":"clone","value":function(){var nt,at,lt;return new e(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!==(nt=this._userBandwidth)&&void 0!==nt?nt:"auto",!0).maxBandwidth(null!==(at=this._maxBandwidth)&&void 0!==at?at:"auto",!0).minBandwidth(null!==(lt=this._maxBandwidth)&&void 0!==lt?lt:"auto")}}])}(DI),uI=function(nt,at){var lt=nt.r,Rt=at.r,Bt=nt.g,Lt=at.g,Ht=nt.b,jt=at.b,$t=nt.opacity,Kt=at.opacity;return function(nt){var at=Math.round(lt*(1-nt)+Rt*nt),te=Math.round(Bt*(1-nt)+Lt*nt),ne=Math.round(Ht*(1-nt)+jt*nt);return new Ui(at,te,ne,$t*(1-nt)+Kt*nt)}};function cI(nt,at){var lt,Rt=b(at);if(j(at)||"boolean"===Rt)return function(){return at};if("number"===Rt)return Jt(nt,at);if("string"===Rt){if(lt=Wi.parseColorString(at)){var Bt=uI(Wi.parseColorString(nt),lt);return function(nt){return Bt(nt).formatRgb()}}return Jt(Number(nt),Number(at))}return at instanceof Ui?uI(nt,at):at instanceof Wi?uI(nt.color,at.color):at instanceof Date?function(nt,at){var lt=nt.valueOf(),Rt=at.valueOf(),Bt=new Date;return function(nt){return Bt.setTime(lt*(1-nt)+Rt*nt),Bt}}(nt,at):Jt(Number(nt),Number(at))}var FI=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jB,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jB;return r(this,e),(nt=n(this,e))._unknown=void 0,nt.transformer=at,nt.untransformer=lt,nt._forceAlign=!0,nt._domain=[0,1],nt._range=[0,1],nt._clamp=jB,nt._piecewise=JB,nt._interpolate=cI,nt}return h(e,nt),o(e,[{"key":"calculateVisibleDomain","value":function(nt){var at;return N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&2===nt.length?[this.invert(nt[0]),this.invert(nt[1])]:null!==(at=this._niceDomain)&&void 0!==at?at:this._domain}},{"key":"fishEye","value":function(nt,at,lt){return nt||lt?(this._fishEyeOptions=nt,this._fishEyeTransform=null,this.rescale(at)):this._fishEyeOptions}},{"key":"scale","value":function(nt){var at;if(nt=Number(nt),Number.isNaN(nt)||this._domainValidator&&!this._domainValidator(nt))return this._unknown;this._output||(this._output=this._piecewise((null!==(at=this._niceDomain)&&void 0!==at?at:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));var lt=this._output(this.transformer(this._clamp(nt)));return this._fishEyeTransform?this._fishEyeTransform(lt):lt}},{"key":"invert","value":function(nt){var at;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!==(at=this._niceDomain)&&void 0!==at?at:this._domain).map(this.transformer),Jt)),this._clamp(this.untransformer(this._input(nt)))}},{"key":"domain","value":function(nt,at){var lt;if(!nt)return(null!==(lt=this._niceDomain)&&void 0!==lt?lt:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;var Rt=Array.from(nt,Pt);return this._domain=Rt,this.rescale(at)}},{"key":"range","value":function(nt,at){if(!nt)return this._range.slice();var lt=Array.from(nt);return this._range=lt,this.rescale(at)}},{"key":"rangeRound","value":function(nt,at){var lt=Array.from(nt);return this._range=lt,this._interpolate=Qt,this.rescale(at)}},{"key":"rescale","value":function(nt){var at;if(nt)return this;var lt=null!==(at=this._niceDomain)&&void 0!==at?at:this._domain,Rt=lt.length,Bt=this._range.length,Lt=Math.min(Rt,Bt);if(Rt&&Rt<Bt&&this._forceAlign){for(var Ht=Bt-Rt+1,jt=lt[Rt-1],$t=Rt>=2?(jt-lt[Rt-2])/Ht:0,Kt=1;Kt<=Ht;Kt++)lt[Rt-2+Kt]=jt-$t*(Ht-Kt);Lt=Bt}return this._autoClamp&&(this._clamp=Xt(lt[0],lt[Lt-1])),this._piecewise=Lt>2?eI:JB,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}},{"key":"clamp","value":function(nt,at,lt){return arguments.length?(at?(this._autoClamp=!1,this._clamp=at):(this._autoClamp=!!nt,this._clamp=nt?void 0:jB),this.rescale(lt)):this._clamp!==jB}},{"key":"interpolate","value":function(nt,at){return arguments.length?(this._interpolate=nt,this.rescale(at)):this._interpolate}},{"key":"ticks","value":function(){return[]}},{"key":"tickData","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,lt=this.ticks(at);return(null!=lt?lt:[]).map((function(at,lt){return{"index":lt,"tick":at,"value":(nt.scale(at)-nt._range[0])/(nt._range[1]-nt._range[0])}}))}},{"key":"rangeFactor","value":function(nt,at){return nt?(y(e,"rangeFactor",this,3)([nt]),this._output=this._input=null,this):y(e,"rangeFactor",this,3)([])}},{"key":"rangeFactorStart","value":function(nt,at){return j(nt)?y(e,"rangeFactorStart",this,3)([]):(y(e,"rangeFactorStart",this,3)([nt]),this._output=this._input=null,this)}},{"key":"rangeFactorEnd","value":function(nt,at){return j(nt)?y(e,"rangeFactorEnd",this,3)([]):(y(e,"rangeFactorEnd",this,3)([nt]),this._output=this._input=null,this)}},{"key":"forceAlignDomainRange","value":function(nt){return arguments.length?(this._forceAlign=nt,this):this._forceAlign}}])}(II),NI=Math.sqrt(50),ZI=Math.sqrt(10),QI=Math.sqrt(2),JI=[1,2,5,10],gI=function(nt,at,lt){var Rt=1,Bt=nt,Lt=Math.floor((at-1)/2),Ht=Math.abs(nt);return nt>=0&&nt<=Number.MIN_VALUE?Bt=0:nt<0&&nt>=-Number.MIN_VALUE?Bt=-(at-1):!lt&&Ht<1?Rt=bI(Ht).step:(lt||Ht>1)&&(Bt=Math.floor(nt)-Lt*Rt),Rt>0?(nt>0?Bt=Math.max(Bt,0):nt<0&&(Bt=Math.min(Bt,-(at-1)*Rt)),Ct(0,at).map((function(nt){return Bt+nt*Rt}))):nt>0?mI(0,-(at-1)/Rt,Rt):mI((at-1)/Rt,0,Rt)},uB=Wt((function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=-1;if(lt=+lt,(nt=+nt)==(at=+at))return[nt];if(Math.abs(nt-at)<=Number.MIN_VALUE&&lt>0)return[nt];if((Bt=at<nt)&&(Lt=nt,nt=at,at=Lt),jt=xI(nt,at,lt).step,!isFinite(jt))return[];if(jt>0){var Kt=Math.round(nt/jt),te=Math.round(at/jt);for(Kt*jt<nt&&++Kt,te*jt>at&&--te,Ht=new Array(Lt=te-Kt+1);++$t<Lt;)Ht[$t]=(Kt+$t)*jt}else if(jt<0&&(null==Rt?void 0:Rt.noDecimals)){jt=1;var ne=Math.ceil(nt),re=Math.floor(at);if(!(ne<=re))return[];for(Ht=new Array(Lt=re-ne+1);++$t<Lt;)Ht[$t]=ne+$t}else{jt=-jt;var ae=Math.round(nt*jt),oe=Math.round(at*jt);for(ae/jt<nt&&++ae,oe/jt>at&&--oe,Ht=new Array(Lt=oe-ae+1);++$t<Lt;)Ht[$t]=(ae+$t)/jt}return Bt&&Ht.reverse(),Ht})),mI=function(nt,at,lt){var Rt,Bt,Lt=-1;if(lt>0){var Ht=Math.floor(nt/lt),jt=Math.ceil(at/lt);for((Ht+1)*lt<nt&&++Ht,(jt-1)*lt>at&&--jt,Bt=new Array(Rt=jt-Ht+1);++Lt<Rt;)Bt[Lt]=(Ht+Lt)*lt}else{lt=-lt;var $t=Math.floor(nt*lt),Kt=Math.ceil(at*lt);for(($t+1)/lt<nt&&++$t,(Kt-1)/lt>at&&--Kt,Bt=new Array(Rt=Kt-$t+1);++Lt<Rt;)Bt[Lt]=($t+Lt)/lt}return Bt},cB=Wt((function(nt,at,lt,Rt){var Bt,Lt,Ht;if(lt=+lt,(nt=+nt)==(at=+at))return gI(nt,lt,null==Rt?void 0:Rt.noDecimals);if(Math.abs(nt-at)<=Number.MIN_VALUE&&lt>0)return gI(nt,lt,null==Rt?void 0:Rt.noDecimals);(Bt=at<nt)&&(Ht=nt,nt=at,at=Ht);var jt=xI(nt,at,lt),$t=jt.step;if(!isFinite($t))return[];if($t>0){for(var Kt=1,te=jt.power,ne=10===jt.gap?2*Math.pow(10,te):1*Math.pow(10,te);Kt<=5&&(Lt=mI(nt,at,$t)).length>lt+1&&lt>2;)$t+=ne,Kt+=1;lt>2&&Lt.length<lt-1&&(Lt=function(nt,at,lt){var Rt,Bt=nt[0],Lt=nt[nt.length-1],Ht=at-nt.length;if(Lt<=0){var jt=[];for(Rt=Ht;Rt>=1;Rt--)jt.push(Bt-Rt*lt);return jt.concat(nt)}if(Bt>=0){for(Rt=1;Rt<=Ht;Rt++)nt.push(Lt+Rt*lt);return nt}var $t=[],Kt=[];for(Rt=1;Rt<=Ht;Rt++)Rt%2==0?$t=[Bt-Math.floor(Rt/2)*lt].concat($t):Kt.push(Lt+Math.ceil(Rt/2)*lt);return $t.concat(nt).concat(Kt)}(Lt,lt,$t))}else(null==Rt?void 0:Rt.noDecimals)&&$t<0&&($t=1),Lt=mI(nt,at,$t);return Bt&&Lt.reverse(),Lt})),bI=function(nt){var at=Math.floor(Math.log(nt)/Math.LN10),lt=nt/Math.pow(10,at),Rt=JI[0];return lt>=NI?Rt=JI[3]:lt>=ZI?Rt=JI[2]:lt>=QI&&(Rt=JI[1]),at>=0?{"step":Rt*Math.pow(10,at),"gap":Rt,"power":at}:{"step":-Math.pow(10,-at)/Rt,"gap":Rt,"power":at}};function xI(nt,at,lt){var Rt=(at-nt)/Math.max(0,lt);return bI(Rt)}function kI(nt,at,lt){var Rt;if(lt=+lt,(nt=+nt)==(at=+at)&&lt>0)return[nt];if(lt<=0||0===(Rt=function(nt,at,lt){return(at-nt)/Math.max(1,lt-1)}(nt,at,lt))||!isFinite(Rt))return[];for(var Bt=new Array(lt),Lt=0;Lt<lt;Lt++)Bt[Lt]=nt+Lt*Rt;return Bt}function SI(nt){var at,lt,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,Bt=0,Lt=nt.length-1,Ht=nt[Bt],jt=nt[Lt],$t=10;for(jt<Ht&&(lt=Ht,Ht=jt,jt=lt,lt=Bt,Bt=Lt,Lt=lt);$t-- >0;){if((lt=xI(Ht,jt,Rt).step)===at)return nt[Bt]=Ht,nt[Lt]=jt,nt;if(lt>0)Ht=Math.floor(Ht/lt)*lt,jt=Math.ceil(jt/lt)*lt;else{if(!(lt<0))break;Ht=Math.ceil(Ht*lt)/lt,jt=Math.floor(jt*lt)/lt}at=lt}}function AI(nt,at){var lt=Z(at.forceMin),Rt=Z(at.forceMax),Bt=null,Lt=[],Ht=null,jt=lt&&Rt?function(nt){return nt>=at.forceMin&&nt<=at.forceMax}:lt?function(nt){return nt>=at.forceMin}:Rt?function(nt){return nt<=at.forceMax}:null;return lt?Lt[0]=at.forceMin:Z(at.min)&&at.min<=Math.min(nt[0],nt[nt.length-1])&&(Lt[0]=at.min),Rt?Lt[1]=at.forceMax:Z(at.max)&&at.max>=Math.max(nt[0],nt[nt.length-1])&&(Lt[1]=at.max),Z(Lt[0])&&Z(Lt[1])?((Ht=nt.slice())[0]=Lt[0],Ht[Ht.length-1]=Lt[1]):Bt=Z(Lt[0])||Z(Lt[1])?Z(Lt[0])?"max":"min":"all",{"niceType":Bt,"niceDomain":Ht,"niceMinMax":Lt,"domainValidator":jt}}var wI=function(nt,at,lt){return Math.abs(at-nt)<1?+lt.toFixed(1):Math.round(+lt)},bB=Wt((function(nt,at,lt,Rt,Bt,Lt,Ht){var jt,$t=nt,Kt=at,te=Kt<$t;te&&($t=(jt=[Kt,$t])[0],Kt=jt[1]);var ne,re,ae=Bt($t),oe=Bt(Kt),se=[];if(!(Rt%1)&&oe-ae<lt){if(ae=Math.floor(ae),oe=Math.ceil(oe),$t>0){for(;ae<=oe;++ae)for(ne=1;ne<Rt;++ne)if(!((re=ae<0?ne/Lt(-ae):ne*Lt(ae))<$t)){if(re>Kt)break;se.push(re)}}else for(;ae<=oe;++ae)for(ne=Rt-1;ne>=1;--ne)if(!((re=ae>0?ne/Lt(-ae):ne*Lt(ae))<$t)){if(re>Kt)break;se.push(re)}2*se.length<lt&&(se=cB($t,Kt,lt))}else se=cB(ae,oe,Math.min(oe-ae,lt)).map(Lt);return se=se.filter((function(nt){return 0!==nt})),(null==Ht?void 0:Ht.noDecimals)&&(se=Array.from(new Set(se.map((function(nt){return Math.floor(nt)}))))),te?se.reverse():se})),SB=Wt((function(nt,at,lt,Rt,Bt,Lt){var Ht=[],jt={},$t=Bt(nt),Kt=Bt(at),te=[];if(Number.isInteger(Rt))te=cB($t,Kt,lt);else for(var ne=(Kt-$t)/(lt-1),re=0;re<lt;re++)te.push($t+re*ne);return te.forEach((function(lt){var Bt=Lt(lt),$t=Number.isInteger(Rt)?wI(nt,at,Bt):wI(nt,at,iI(Bt)),Kt=wI(nt,at,function(nt,at){var lt,Rt;return at[0]<at[1]?(lt=at[0],Rt=at[1]):(lt=at[1],Rt=at[0]),Math.min(Math.max(nt,lt),Rt)}($t,[nt,at]));!jt[Kt]&&!isNaN(Kt)&&te.length>1&&(jt[Kt]=1,Ht.push(Kt))})),Ht})),AB=Wt((function(nt,at,lt,Rt,Bt){return kI(Rt(nt),Rt(at),lt).map((function(nt){return iI(Bt(nt))}))})),EB=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type=TI.Linear,nt}return h(e,nt),o(e,[{"key":"clone","value":function(){return(new e).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}},{"key":"tickFormat","value":function(){return function(){}}},{"key":"d3Ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=arguments.length>1?arguments[1]:void 0,lt=this.calculateVisibleDomain(this._range);return uB(lt[0],lt[lt.length-1],nt,at)}},{"key":"ticks","value":function(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,lt=arguments.length>1?arguments[1]:void 0;if(H(null==lt?void 0:lt.customTicks))return lt.customTicks(this,at);if(N(this._rangeFactorStart)&&N(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(at,lt);var Rt=null!==(nt=this._niceDomain)&&void 0!==nt?nt:this._domain,Bt=this._domain,Lt=Rt[0],Ht=Rt[Rt.length-1],jt=cB(Bt[0],Bt[Bt.length-1],at,lt);if(!jt.length)return jt;if(this._domainValidator)jt=jt.filter(this._domainValidator);else if((jt[0]!==Lt||jt[jt.length-1]!==Ht)&&this._niceType){var $t=Rt.slice();if("all"===this._niceType?($t[0]=jt[0],$t[$t.length-1]=jt[jt.length-1],this._niceDomain=$t,this.rescale()):"min"===this._niceType&&jt[0]!==Lt?($t[0]=jt[0],this._niceDomain=$t,this.rescale()):"max"===this._niceType&&jt[jt.length-1]!==Ht&&($t[$t.length-1]=jt[jt.length-1],this._niceDomain=$t,this.rescale()),"all"!==this._niceType){var Kt=Math.min($t[0],$t[$t.length-1]),te=Math.max($t[0],$t[$t.length-1]);jt=jt.filter((function(nt){return nt>=Kt&&nt<=te}))}}return jt}},{"key":"forceTicks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return kI(at[0],at[at.length-1],nt)}},{"key":"stepTicks","value":function(nt){var at=this.calculateVisibleDomain(this._range);return function(nt,at,lt){var Rt,Bt,Lt=-1;if(lt=+lt,(Bt=(at=+at)<(nt=+nt))&&(Rt=nt,nt=at,at=Rt),!isFinite(lt)||at-nt<=lt)return[nt];for(var Ht=Math.floor((at-nt)/lt+1),jt=new Array(Ht);++Lt<Ht;)jt[Lt]=nt+Lt*lt;return Bt&&jt.reverse(),jt}(at[0],at[at.length-1],nt)}},{"key":"nice","value":function(){var nt,at,lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,Rt=arguments.length>1?arguments[1]:void 0,Bt=this._domain,Lt=[];if(Rt){var Ht=AI(Bt,Rt);if(Lt=Ht.niceMinMax,this._domainValidator=Ht.domainValidator,this._niceType=Ht.niceType,Ht.niceDomain)return this._niceDomain=Ht.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){var jt=SI(Bt.slice(),lt);"min"===this._niceType?jt[jt.length-1]=null!==(nt=Lt[1])&&void 0!==nt?nt:jt[jt.length-1]:"max"===this._niceType&&(jt[0]=null!==(at=Lt[0])&&void 0!==at?at:jt[0]),this._niceDomain=jt,this.rescale()}return this}},{"key":"niceMin","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this._niceType="min";var at=this._domain[this._domain.length-1],lt=SI(this.domain(),nt);return lt&&(lt[lt.length-1]=at,this._niceDomain=lt,this.rescale()),this}},{"key":"niceMax","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this._niceType="max";var at=this._domain[0],lt=SI(this._domain.slice(),nt);return lt&&(lt[0]=at,this._niceDomain=lt,this.rescale()),this}}])}(FI),PB=o((function t(){r(this,t)}),[{"key":"nice","value":function(){var nt,at,lt,Rt,Bt=arguments.length>1?arguments[1]:void 0,Lt=this._domain,Ht=[],jt=null;if(Bt){var $t=AI(Lt,Bt);if(Ht=$t.niceMinMax,this._domainValidator=$t.domainValidator,jt=$t.niceType,$t.niceDomain)return this._niceDomain=$t.niceDomain,this.rescale(),this}else jt="all";if(jt){var Kt=function(nt,at){var lt,Rt,Bt=nt.slice(),Lt=0,Ht=Bt.length-1,jt=Bt[Lt],$t=Bt[Ht];return $t<jt&&(Lt=(lt=[Ht,Lt])[0],Ht=lt[1],jt=(Rt=[$t,jt])[0],$t=Rt[1]),Bt[Lt]=at.floor(jt),Bt[Ht]=at.ceil($t),Bt}(Lt.slice(),null!==(at=null===(nt=this.getNiceConfig)||void 0===nt?void 0:nt.call(this))&&void 0!==at?at:{"floor":function(nt){return Math.floor(nt)},"ceil":function(nt){return Math.ceil(nt)}});return"min"===jt?Kt[Kt.length-1]=null!==(lt=Ht[1])&&void 0!==lt?lt:Kt[Kt.length-1]:"max"===jt&&(Kt[0]=null!==(Rt=Ht[0])&&void 0!==Rt?Rt:Kt[0]),this._niceDomain=Kt,this.rescale(),this}return this}},{"key":"niceMin","value":function(){var nt=this._domain[this._domain.length-1];this.nice();var at=this._domain.slice();return this._domain&&(at[at.length-1]=nt,this._niceDomain=at,this.rescale()),this}},{"key":"niceMax","value":function(){var nt=this._domain[0];this.nice();var at=this._domain.slice();return this._domain&&(at[0]=nt,this._niceDomain=at,this.rescale()),this}}]);function RI(nt){return function(at){return-nt(-at)}}function BI(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.EPSILON;return function(at){return Math.max(at,nt)}}var RB=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,[XB(10),YB(10)])).type=TI.Log,nt._limit=BI(),nt._logs=nt.transformer,nt._pows=nt.untransformer,nt._domain=[1,10],nt._base=10,nt}return h(e,nt),o(e,[{"key":"clone","value":function(){return(new e).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}},{"key":"rescale","value":function(nt){var at;if(nt)return this;y(e,"rescale",this,3)([]);var lt=XB(this._base),Rt=YB(this._base);return(null!==(at=this._niceDomain)&&void 0!==at?at:this._domain)[0]<0?(this._logs=RI(lt),this._pows=RI(Rt),this._limit=function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.EPSILON;return function(at){return Math.min(at,-nt)}}(),this.transformer=GB,this.untransformer=WB):(this._logs=lt,this._pows=Rt,this._limit=BI(),this.transformer=this._logs,this.untransformer=Rt),this}},{"key":"scale","value":function(nt){var at;if(nt=Number(nt),Number.isNaN(nt)||this._domainValidator&&!this._domainValidator(nt))return this._unknown;this._output||(this._output=this._piecewise((null!==(at=this._niceDomain)&&void 0!==at?at:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));var lt=this._output(this.transformer(this._limit(this._clamp(nt))));return this._fishEyeTransform?this._fishEyeTransform(lt):lt}},{"key":"base","value":function(nt,at){return arguments.length?(this._base=nt,this.rescale(at)):this._base}},{"key":"tickFormat","value":function(){return jB}},{"key":"d3Ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=arguments.length>1?arguments[1]:void 0,lt=this.domain(),Rt=this._limit(lt[0]),Bt=this._limit(lt[lt.length-1]);return bB(Rt,Bt,nt,this._base,this.transformer,this.untransformer,at)}},{"key":"ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return SB(this._limit(at[0]),this._limit(at[at.length-1]),nt,this._base,this.transformer,this.untransformer)}},{"key":"forceTicks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return AB(at[0],at[at.length-1],nt,this.transformer,this.untransformer)}},{"key":"stepTicks","value":function(nt){var at=this.calculateVisibleDomain(this._range);return AB(this._limit(at[0]),this._limit(at[at.length-1]),nt,this.transformer,this.untransformer)}},{"key":"getNiceConfig","value":function(){var nt=this;return{"floor":function(at){return nt._pows(Math.floor(nt._logs(nt._limit(at))))},"ceil":function(at){return Math.abs(at)>=1?Math.ceil(at):nt._pows(Math.ceil(nt._logs(nt._limit(at))))}}}}])}(FI);bt(RB,PB);var OB=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[!1])).type=TI.Point,at._padding=0,at.paddingInner(1,nt),at.padding=at.paddingOuter,at.paddingInner=void 0,at.paddingOuter=void 0,at}return h(e,nt),o(e)}(LI),eO=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,[NB,VB])).type=TI.Sqrt,nt}return h(e,nt),o(e,[{"key":"clone","value":function(){return(new e).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}])}(EB),iO=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,[KB(1),qB(1)])).type=TI.Symlog,nt._const=1,nt}return h(e,nt),o(e,[{"key":"clone","value":function(){return(new e).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}},{"key":"constant","value":function(nt,at){return arguments.length?(this._const=nt,this.transformer=KB(nt),this.untransformer=qB(nt),this.rescale(at)):this._const}},{"key":"d3Ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=arguments.length>1?arguments[1]:void 0,lt=this.domain(),Rt=lt[0],Bt=lt[lt.length-1];return bB(Rt,Bt,nt,this._const,this.transformer,this.untransformer,at)}},{"key":"ticks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return SB(at[0],at[at.length-1],nt,this._const,this.transformer,this.untransformer)}},{"key":"forceTicks","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,at=this.calculateVisibleDomain(this._range);return AB(at[0],at[at.length-1],nt,this.transformer,this.untransformer)}},{"key":"stepTicks","value":function(nt){var at=this.calculateVisibleDomain(this._range);return AB(at[0],at[at.length-1],nt,this.transformer,this.untransformer)}}])}(EB);bt(iO,PB);var rO=function(){function t(){r(this,t),this.type=TI.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}return o(t,[{"key":"unknown","value":function(nt){return arguments.length?(this._unknown=nt,this):this._unknown}},{"key":"scale","value":function(nt){return!j(nt)&&Q(+nt)?this._range[Dt(this._domain,nt,0,this.n)]:this._unknown}},{"key":"invertExtent","value":function(nt){var at=this._range.indexOf(nt);return[this._domain[at-1],this._domain[at]]}},{"key":"domain","value":function(nt){return nt?(this._domain=Array.from(nt),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}},{"key":"range","value":function(nt){return nt?(this._range=Array.from(nt),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}},{"key":"clone","value":function(){return(new t).domain(this._domain).range(this._range).unknown(this._unknown)}}])}();function zI(nt,at,lt,Rt){var Bt,Lt=nt.breakData;if(Lt&&Lt()){var Ht=Lt().breakDomains,jt=at.domain();Bt=[];for(var $t=0;$t<jt.length-1;$t++)Rt(lt,[jt[$t],jt[$t+1]]).forEach((function(nt){Ht.some((function(at){return nt>=at[0]&&nt<=at[1]}))||Bt.push(nt)}));at.domain(jt)}else Bt=Rt(lt);return Bt}function HI(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(lt&&!at.includes(nt)){var Lt=at.length;if(Lt>1){Bt?at.push(nt):at.unshift(nt);for(var Ht=0;Ht<Lt;Ht++){var jt=Bt?Lt-1-Ht:Ht;if(!Rt(at[jt]))break;at.splice(jt,1),Ht--,Lt--}}}}var jI=function(nt,at){var lt,Rt;if(!FB(nt.type))return BB(nt.domain());var Bt=nt.range(),Lt=Math.abs(Bt[Bt.length-1]-Bt[0]);if(Lt<2)return BB([nt.domain()[0]]);var Ht,jt,$t,Kt=at.tickCount,te=at.forceTickCount,ne=at.tickStep,re=at.noDecimals,ae=void 0!==re&&re,oe=at.labelStyle,se=at.breakData;if(N(ne))jt=nt.stepTicks(ne),$t=se&&se()?se().breakDomains:null,Ht=$t&&$t.length?jt.filter((function(nt){return $t.every((function(at){return nt<at[0]||nt>at[1]}))})):jt;else if(N(te))Ht=zI(at,nt,te,(function(at,lt){return lt&&lt.length?nt.domain(lt,!0).forceTicks(at):nt.forceTicks(at)}));else if("d3"===at.tickMode){var le=null!==(lt=H(Kt)?Kt({"axisLength":Lt,"labelStyle":oe}):Kt)&&void 0!==lt?lt:5;Ht=zI(at,nt,le,(function(at,lt){return lt&&lt.length?nt.domain(lt,!0).d3Ticks(at,{"noDecimals":ae}):nt.d3Ticks(at,{"noDecimals":ae})}))}else{var ue=null!==(Rt=H(Kt)?Kt({"axisLength":Lt,"labelStyle":oe}):Kt)&&void 0!==Rt?Rt:5,ce=H(at.tickMode)?at.tickMode:void 0;Ht=zI(at,nt,ue,(function(at,lt){return lt&&lt.length?nt.domain(lt,!0).ticks(at,{"noDecimals":ae,"customTicks":ce}):nt.ticks(at,{"noDecimals":ae,"customTicks":ce})}))}var he=nt.domain();if(at.labelFirstVisible&&he[0]!==Ht[0]&&!Ht.includes(he[0])&&Ht.unshift(he[0]),at.labelLastVisible&&he[he.length-1]!==Ht[Ht.length-1]&&!Ht.includes(he[he.length-1])&&Ht.push(he[he.length-1]),at.sampling&&Ht.length>1&&("cartesian"===at.coordinateType||"polar"===at.coordinateType&&"radius"===at.axisOrientType)){var de,fe=at.labelGap,pe=void 0===fe?4:fe,ve=at.labelFlush;if(6*Ht.length>Lt){var Ae=[],we=Math.floor(6*Ht.length/Lt);Ht.forEach((function(nt,at){at%we!=0&&at!==Ht.length-1||Ae.push(nt)})),de=DB(nt,Ae,at).map((function(nt,at){return{"AABBBounds":nt,"value":Ae[at]}}))}else de=DB(nt,Ht,at).map((function(nt,at){return{"AABBBounds":nt,"value":Ht[at]}}));for(var Ce=de[0],je=kt(de),Ne=se&&se()?aO.greedy:aO.parity;de.length>=3&&aB(de,pe);)de=Ne(de,pe);var Ve=at.labelFirstVisible,Ge=at.labelLastVisible;rB(Ce,je,pe)&&de.includes(je)&&de.length>1&&Ve&&Ge&&(de.splice(de.indexOf(je),1),Ge=!1),HI(Ce,de,Ve,(function(nt){return rB(nt,Ce,pe)})),HI(je,de,Ge,(function(nt){return rB(nt,je,pe)||!(!Ve||nt===Ce)&&rB(nt,Ce,pe)}),!0);var ti=de.map((function(nt){return nt.value}));ti.length<3&&ve&&(ti.length>1&&ti.pop(),kt(ti)!==kt(Ht)&&ti.push(kt(Ht))),Ht=ti}return BB(Ht)},aO={"parity":function(nt){return nt.filter((function(nt,at){return at%2==0}))},"greedy":function(nt,at){var lt;return nt.filter((function(nt,Rt){return!(Rt&&rB(lt,nt,at)||(lt=nt,0))}))}},VI=function(nt,at,lt,Rt){return DB(nt,at,lt).map((function(nt){return Rt?[nt.x1,nt.x2,nt.width()]:[nt.y1,nt.y2,nt.height()]}))},GI=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(nt[0],at[0])-lt/2<=Math.min(nt[1],at[1])+lt/2},WI=function(nt,at){return nt[1]<at[0]?at[0]-nt[1]:at[1]<nt[0]?nt[0]-at[1]:0},UI=function(nt,at){var lt,Rt=nt.domain();if(!Rt.length)return[];var Bt,Lt=at.tickCount,Ht=at.forceTickCount,jt=at.tickStep,$t=at.labelGap,Kt=void 0===$t?4:$t,te=at.axisOrientType,ne=at.labelStyle,re=function(nt){return["bottom","top","z"].includes(nt)}(te),ae=nt.range(),oe=nt.calculateWholeRangeSize();if(oe<2)return at.labelLastVisible?BB([Rt[Rt.length-1]]):BB([Rt[0]]);if(N(jt))Bt=nt.stepTicks(jt);else if(N(Ht))Bt=nt.forceTicks(Ht);else if(N(Lt)){var se=H(Lt)?Lt({"axisLength":oe,"labelStyle":ne}):Lt;Bt=nt.ticks(se)}else if(at.sampling){var le=(null!==(lt=at.labelStyle.fontSize)&&void 0!==lt?lt:12)+2,ue=At(ae),ce=St(ae);if(Rt.length<=oe/le){var he=(ce-ue)/Rt.length,de=VI(nt,Rt,at,re),fe=Math.min.apply(Math,m(de.map((function(nt){return nt[2]})))),pe=YI(Rt,de,Kt,at.labelLastVisible,Math.floor(fe/he),!1);Bt=nt.stepTicks(pe.step),at.labelLastVisible&&(pe.delCount&&(Bt=Bt.slice(0,Bt.length-pe.delCount)),Bt.push(Rt[Rt.length-1]))}else{var ve=[Rt[0],Rt[Math.floor(Rt.length/2)],Rt[Rt.length-1]],Ae=VI(nt,ve,at,re),we=null;Ae.forEach((function(nt){we?we[2]<nt[2]&&(we=nt):we=nt}));var Ce=ce-ue-Kt>0?Math.ceil(Rt.length*(Kt+we[2])/(ce-ue-Kt)):Rt.length-1;Bt=nt.stepTicks(Ce),!at.labelLastVisible||Bt.length&&Bt[Bt.length-1]===Rt[Rt.length-1]||(Bt.length&&Math.abs(nt.scale(Bt[Bt.length-1])-nt.scale(Rt[Rt.length-1]))<we[2]&&(Bt=Bt.slice(0,-1)),Bt.push(Rt[Rt.length-1]))}}else Bt=nt.domain();return BB(Bt)},YI=function(nt,at,lt,Rt,Bt,Lt){var Ht=0,jt=0,$t=-1,Kt=Number.MAX_VALUE,c=function(Rt){var Bt=!0,Lt=0;do{Lt+Rt<nt.length&&GI(at[Lt],at[Lt+Rt],lt)&&(Bt=!1),Lt+=Rt}while(Bt&&Lt<nt.length);return Bt},te=Ft(Bt,nt.length,(function(nt){return c(nt)?1:-1})),ne=te;do{if(ne>te&&!Lt&&!c(ne))ne++;else{if(!Rt){jt=ne;break}var re=nt.length-1,ae=void 0,oe=0;ae=nt.length%ne>0?nt.length-nt.length%ne+ne:nt.length;do{if((ae-=ne)!==re&&!GI(at[ae],at[re],lt))break;oe++}while(ae>0);if(ae===re){jt=ne,Ht=oe;break}var se=Math.floor(nt.length/ne)-oe+1;if(se<$t)break;$t=se;var le=WI(at[ae],at[re]),ue=ae-ne>=0?WI(at[ae-ne],at[ae]):le,ce=Math.abs(le-ue);if(ce<Kt&&(Kt=ce,jt=ne,Ht=oe),le<=ue)break;ne++}}while(ne<=nt.length);return{"step":jt,"delCount":Ht}},XI=function(nt,at,lt){var Rt,Bt=lt.labelStyle,Lt=lt.getRadius,Ht=lt.labelOffset,jt=lt.labelFormatter,$t=lt.inside,Kt=null==Lt?void 0:Lt(),te=null!==(Rt=Bt.angle)&&void 0!==Rt?Rt:0,ne=aR(Bt);return at.map((function(at){var lt,Rt,Lt=jt?jt(at):"".concat(at),re=ne.quickMeasure(Lt),ae=re.width,oe=re.height,se=Math.max(ae,12),le=Math.max(oe,12),ue=nt.scale(at),ce={"x":0,"y":0},he={"align":Bt.textAlign,"baseline":Bt.textBaseline},de=function(nt,at,lt,Rt,Bt){var Lt,Ht,jt=Pe({"x":0,"y":0},lt,nt),$t=tB(jt,eB(Rt,jt,at,Bt));return Lt=$t,Ht=eB(Rt||1,$t,at,Bt),{"x":Lt.x+Ht[0],"y":Lt.y+Ht[1]}}(ue,ce,Kt,Ht,$t),fe=de.x,pe=de.y;return he.align||(Nt(fe,ce.x)?he.baseline||(he.baseline=pe>ce.y?"top":"bottom"):fe>ce.x?he.align="left":fe<ce.x&&(he.align="right")),lt=fe+("right"===he.align?-se:"left"===he.align?0:-se/2),Rt=pe+("bottom"===he.baseline?-le:"top"===he.baseline?0:-le/2),(new _i).set(lt,Rt,lt+se,Rt+le).rotate(te,lt+se/2,Rt+le/2)}))},KI=function(nt,at){var lt,Rt=at.tickCount,Bt=at.forceTickCount,Lt=at.tickStep,Ht=at.getRadius,jt=at.labelOffset,$t=at.labelGap,Kt=void 0===$t?0:$t,te=at.labelStyle,ne=null==Ht?void 0:Ht();if(!ne)return BB(nt.domain());if(N(Lt))lt=nt.stepTicks(Lt);else if(N(Bt))lt=nt.forceTicks(Bt);else if(N(Rt)){var re=nt.range(),ae=Math.abs(re[re.length-1]-re[0]),oe=H(Rt)?Rt({"axisLength":ae,"labelStyle":te}):Rt;lt=nt.ticks(oe)}else if(at.sampling){var se=nt.domain(),le=nt.range(),ue=XI(nt,se,at),ce=At(le),he=St(le),de=Math.abs(he-ce)*(ne+jt)/se.length,fe=qI(se,ue,Kt,Math.floor(ue.reduce((function(nt,at){return Math.min(nt,at.width(),at.height())}),Number.MAX_VALUE)/de)),pe=fe.step,ve=fe.delCount;lt=(lt=nt.stepTicks(pe)).slice(0,lt.length-ve)}else lt=nt.domain();return BB(lt)},qI=function(nt,at,lt,Rt){var Bt=Rt;do{var Lt=!0;Bt++;var Ht=0;do{Ht+Bt<nt.length&&IB(at[Ht],at[Ht+Bt],lt)&&(Lt=!1),Ht+=Bt}while(Lt&&Ht<nt.length);if(Lt)break}while(Bt<=nt.length);var jt=0;if(nt.length>2){var $t=nt.length-nt.length%Bt;for($t>=nt.length&&($t-=Bt);$t>0&&IB(at[0],at[$t]);)jt++,$t-=Bt}return{"step":Bt,"delCount":jt}},oO=new Uint32Array(33),sO=new Uint32Array(33);sO[0]=0,oO[0]=~sO[0];for(var lO=1;lO<=32;++lO)sO[lO]=sO[lO-1]<<1|1,oO[lO]=~sO[lO];function $I(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{"top":0,"left":0,"right":0,"bottom":0},Rt=lt.top,Bt=void 0===Rt?0:Rt,Lt=lt.left,Ht=void 0===Lt?0:Lt,jt=lt.right,$t=void 0===jt?0:jt,Kt=lt.bottom,te=void 0===Kt?0:Kt,ne=Math.max(1,Math.sqrt(nt*at/1e6)),re=~~((nt+Ht+$t+ne)/ne),ae=~~((at+Bt+te+ne)/ne),f=function(nt){return~~(nt/ne)};return f.bitmap=function(){return function(nt,at){var lt=new Uint32Array(~~((nt*at+32)/32));function n(nt,at){lt[nt]|=at}function r(nt,at){lt[nt]&=at}return{"array":lt,"get":function(at,Rt){var Bt=Rt*nt+at;return lt[Bt>>>5]&1<<(31&Bt)},"set":function(at,lt){var Rt=lt*nt+at;n(Rt>>>5,1<<(31&Rt))},"clear":function(at,lt){var Rt=lt*nt+at;r(Rt>>>5,~(1<<(31&Rt)))},"getRange":function(Rt){var Bt=Rt.x1,Lt=Rt.y1,Ht=Rt.x2,jt=Rt.y2;if(Ht<0||jt<0||Bt>nt||Lt>at)return!0;for(var $t,Kt,te,ne,re=jt;re>=Lt;--re)if((te=($t=re*nt+Bt)>>>5)==(ne=(Kt=re*nt+Ht)>>>5)){if(lt[te]&oO[31&$t]&sO[1+(31&Kt)])return!0}else{if(lt[te]&oO[31&$t])return!0;if(lt[ne]&sO[1+(31&Kt)])return!0;for(var ae=te+1;ae<ne;++ae)if(lt[ae])return!0}return!1},"setRange":function(lt){var Rt=lt.x1,Bt=lt.y1,Lt=lt.x2,Ht=lt.y2;if(!(Lt<0||Ht<0||Rt>nt||Bt>at))for(var jt,$t,Kt,te,ne;Bt<=Ht;++Bt)if((Kt=(jt=Bt*nt+Rt)>>>5)==(te=($t=Bt*nt+Lt)>>>5))n(Kt,oO[31&jt]&sO[1+(31&$t)]);else for(n(Kt,oO[31&jt]),n(te,sO[1+(31&$t)]),ne=Kt+1;ne<te;++ne)n(ne,4294967295)},"clearRange":function(at){for(var lt,Rt,Bt,Lt,Ht,jt=at.x1,$t=at.y1,Kt=at.x2,te=at.y2;$t<=te;++$t)if((Bt=(lt=$t*nt+jt)>>>5)==(Lt=(Rt=$t*nt+Kt)>>>5))r(Bt,sO[31&lt]|oO[1+(31&Rt)]);else for(r(Bt,sO[31&lt]),r(Lt,oO[1+(31&Rt)]),Ht=Bt+1;Ht<Lt;++Ht)r(Ht,0)},"outOfBounds":function(lt){var Rt=lt.x1,Bt=lt.y1,Lt=lt.x2,Ht=lt.y2;return Rt<0||Bt<0||Ht>=at||Lt>=nt},"toImageData":function(Rt){for(var Bt=Rt.createImageData(nt,at),Lt=Bt.data,Ht=0;Ht<at;++Ht)for(var jt=0;jt<nt;++jt){var $t=Ht*nt+jt,Kt=4*$t,te=lt[$t>>>5]&1<<(31&$t);Lt[Kt+0]=255*te,Lt[Kt+1]=255*te,Lt[Kt+2]=255*te,Lt[Kt+3]=31}return Bt}}}(re,ae)},f.x=function(nt){return~~((nt+Ht)/ne)},f.y=function(nt){return~~((nt+Bt)/ne)},f.ratio=ne,f.padding=lt,f.width=nt,f.height=at,f}function tL(nt,at){var lt=at.x1,Rt=at.x2,Bt=at.y1,Lt=at.y2,Ht=nt.padding,jt=Ht.top,$t=void 0===jt?0:jt,Kt=Ht.left,te=void 0===Kt?0:Kt,ne=Ht.right,re=void 0===ne?0:ne,ae=Ht.bottom,oe=void 0===ae?0:ae,se=Ut(lt,-te,nt.width+re),le=Ut(Rt,-te,nt.width+re),ue=Ut(Bt,-$t,nt.height+oe),ce=Ut(Lt,-$t,nt.height+oe);return{"x1":nt.x(se),"x2":nt.x(le),"y1":nt.y(ue),"y2":nt.y(ce)}}function eL(nt,at){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?tL(nt,at):{"x1":nt.x(at.x1),"x2":nt.x(at.x2),"y1":nt.y(at.y1),"y2":nt.y(at.y2)}}function iL(nt,at,lt){var Rt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,Lt=lt;Bt>0&&(Lt={"x1":lt.x1-Bt,"x2":lt.x2+Bt,"y1":lt.y1-Bt,"y2":lt.y2+Bt}),Lt=eL(nt,Lt);var Ht=at.outOfBounds(Lt);return!(Rt&&Ht||(Ht&&(Lt=tL(nt,Lt)),at.getRange(Lt)))}function nL(nt,at,lt){for(var Rt=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],Bt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,Lt=arguments.length>6&&void 0!==arguments[6]&&arguments[6],Ht=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).filter((function(nt){return N(nt)})),jt=0;jt<Ht.length;jt++){var $t=void 0;if(($t=Lt?lt:lt.clone()).setAttributes(Ht[jt]),iL(nt,at,$t.AABBBounds,Rt,Bt))return at.setRange(eL(nt,$t.AABBBounds,!0)),Ht[jt]}return!1}function rL(nt,at,lt,Rt,Bt,Lt,Ht){var jt,$t,Kt,te=null===(jt=Rt.overlap)||void 0===jt?void 0:jt.clampForce,ne=null===($t=Rt.overlap)||void 0===$t?void 0:$t.overlapPadding;if("bound"===lt.type||"position"===lt.type){if(H(Ht)){var re=((H(lt.position)?lt.position(Bt.attribute):lt.position)||(Kt=Rt.type,"rect"===Kt?cO:uO)).map((function(nt){return Ht(Bt.AABBBounds,Lt,nt,Rt.offset)})),ae=!1===lt.restorePosition;return nL(nt,at,Bt,re,te,ne,ae)}return!1}if("moveY"===lt.type){var oe=(lt.offset?H(lt.offset)?lt.offset(Bt.attribute):lt.offset:[]).map((function(nt){return{"x":Bt.attribute.x,"y":Bt.attribute.y+nt}}));return nL(nt,at,Bt,oe,te,ne)}if("moveX"===lt.type){var se=(lt.offset?H(lt.offset)?lt.offset(Bt.attribute):lt.offset:[]).map((function(nt){return{"x":Bt.attribute.x+nt,"y":Bt.attribute.y}}));return nL(nt,at,Bt,se,te,ne)}return!1}var uO=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],cO=["top","inside-top","inside"];function sL(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},Bt=nt.AABBBounds,Lt=Bt.x1,Ht=Bt.x2,jt=Bt.y1,$t=Bt.y2,Kt=Rt.top,te=void 0===Kt?0:Kt,ne=Rt.left,re=void 0===ne?0:ne,ae=Rt.right,oe=void 0===ae?0:ae,se=Rt.bottom,le=void 0===se?0:se,ue=Math.min(Lt,Ht),ce=Math.max(Lt,Ht),he=Math.min(jt,$t),de=Math.max(jt,$t),fe=at+oe,pe=lt+le,ve=0,Ae=0;return ue<0-re?ve=-ue:ce>fe&&(ve=fe-ce),he<0-te?Ae=-he:de>pe&&(Ae=pe-de),{"dx":ve,"dy":Ae}}var hO={"fadeIn":function(){var nt,at,lt,Rt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"from":{"opacity":0,"fillOpacity":0,"strokeOpacity":0},"to":{"opacity":null!==(nt=Rt.opacity)&&void 0!==nt?nt:1,"fillOpacity":null!==(at=Rt.fillOpacity)&&void 0!==at?at:1,"strokeOpacity":null!==(lt=Rt.strokeOpacity)&&void 0!==lt?lt:1}}},"fadeOut":function(){var nt,at,lt,Rt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"from":{"opacity":null!==(nt=Rt.opacity)&&void 0!==nt?nt:1,"fillOpacity":null!==(at=Rt.fillOpacity)&&void 0!==at?at:1,"strokeOpacity":null!==(lt=Rt.strokeOpacity)&&void 0!==lt?lt:1},"to":{"opacity":0,"fillOpacity":0,"strokeOpacity":0}}}};function uL(nt,at){var lt,Rt;return null!==(Rt=null===(lt=hO[at])||void 0===lt?void 0:lt.call(hO,nt))&&void 0!==Rt?Rt:{"from":{},"to":{}}}var cL=function(nt,at,lt,Rt){var Bt=Object.assign({},nt.attribute),Lt=Object.assign({},at.attribute);return xt(null==Rt?void 0:Rt.excludeChannels).forEach((function(nt){delete Lt[nt]})),Object.keys(Lt).forEach((function(nt){lt&&!lt.includes(nt)&&delete Lt[nt]})),{"from":Bt,"to":Lt}};function hL(nt,at,lt,Rt){nt.attribute.text!==at.attribute.text&&Q(Number(nt.attribute.text)*Number(at.attribute.text))&&nt.animate().play(new yd({"text":nt.attribute.text},{"text":at.attribute.text},lt,Rt))}var dO={"mode":"same-time","duration":300,"easing":"linear"};function pL(nt){return 3===nt||4===nt}var fL=function(nt){if(!nt||!nt.attribute)return[];var at=nt.attribute,lt=at.points,Rt=at.segments;if(Rt&&Rt.length){var Bt=[];return Rt.forEach((function(nt){nt.points.forEach((function(nt){Bt.push(nt)}))})),Bt}return lt};function vL(nt,at,lt,Rt,Bt,Lt){return Math.abs(at/nt)<Lt/Bt?{"x":lt+(nt>0?Bt:-Bt),"y":Rt+at*Bt/Math.abs(nt)}:{"x":lt+nt*Lt/Math.abs(at),"y":Rt+(at>0?Lt:-Lt)}}var gL=function(nt,at){return Math.ceil(nt)>Math.floor(at)},yL=function(nt,at){var lt=g(nt,2),Rt=lt[0],Bt=lt[1],Lt=g(at,2),Ht=Lt[0];return Lt[1]>Rt&&Bt>Ht};function mL(nt,at){var lt=g(nt,2),Rt=lt[0],Bt=lt[1],Lt=g(at,2),Ht=Lt[0],jt=Lt[1],$t=Math.max(Rt,Ht),Kt=Math.min(Bt,jt);return Math.max(0,Kt-$t)}var _L=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};xP(),zP(),DP(),wP();var fO=function(nt){function e(nt,at){var lt;r(this,e);var Rt=nt.data,Bt=_L(nt,["data"]);return(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"data":Rt},ft({},e.defaultAttributes,Bt))])).name="label",lt._onHover=function(nt){var at=nt.target;at===lt._lastHover||ot(at.states)||(at.addState(HP.hover,!0),UP(i(lt),(function(nt){nt===at||ot(nt.states)||nt.addState(HP.hoverReverse,!0)})),lt._lastHover=at)},lt._onUnHover=function(nt){lt._lastHover&&(UP(i(lt),(function(nt){ot(nt.states)||(nt.removeState(HP.hoverReverse),nt.removeState(HP.hover))})),lt._lastHover=null)},lt._onClick=function(nt){var at=nt.target;if(lt._lastSelect===at&&at.hasState("selected"))return lt._lastSelect=null,void UP(i(lt),(function(nt){ot(nt.states)||(nt.removeState(HP.selectedReverse),nt.removeState(HP.selected))}));ot(at.states)||(at.addState(HP.selected,!0),UP(i(lt),(function(nt){nt===at||ot(nt.states)||nt.addState(HP.selectedReverse,!0)})),lt._lastSelect=at)},lt._handleRelatedGraphicSetState=function(nt){var at,Rt,Bt,Lt,Ht;if((null===(at=nt.detail)||void 0===at?void 0:at.type)===Tl.STATE||(null===(Rt=nt.detail)||void 0===Rt?void 0:Rt.type)===Tl.ANIMATE_UPDATE&&(null===(Bt=nt.detail.animationState)||void 0===Bt?void 0:Bt.isFirstFrameOfStep)){var jt=null!==(Ht=null===(Lt=nt.target)||void 0===Lt?void 0:Lt.currentStates)&&void 0!==Ht?Ht:[],$t=lt._isCollectionBase?m(lt._graphicToText.values()):[lt._graphicToText.get(nt.target)];lt.updateStatesOfLabels($t,jt)}},lt}return h(e,nt),o(e,[{"key":"setBitmap","value":function(nt){this._bitmap=nt}},{"key":"setBitmapTool","value":function(nt){this._bmpTool=nt}},{"key":"labeling","value":function(nt,at,lt,Rt){}},{"key":"_getLabelLinePoints","value":function(nt,at){return function(nt,at){if(nt&&at&&!Ye(nt,at,!0)){var lt=Math.min(nt.x1,nt.x2),Rt=Math.min(nt.y1,nt.y2),Bt=Math.min(at.x1,at.x2),Lt=Math.min(at.y1,at.y2),Ht=Math.abs(nt.x2-lt)/2,jt=Math.abs(nt.y2-Rt)/2,$t=Math.abs(at.x2-Bt)/2,Kt=Math.abs(at.y2-Lt)/2,te=lt+Ht,ne=Rt+jt,re=Bt+$t,ae=Lt+Kt,oe=re-te,se=ae-ne;return[vL(oe,se,te,ne,Ht,jt),vL(-oe,-se,re,ae,$t,Kt)]}}(nt.AABBBounds,null==at?void 0:at.AABBBounds)}},{"key":"_createLabelLine","value":function(nt,at){var lt=this._getLabelLinePoints(nt,at);if(lt){var Rt=Hy.line({"points":lt}),Bt=nt.attribute.line,Lt=void 0===Bt?{}:Bt;if(Lt.customShape){var Ht=Lt.customShape;Rt.pathProxy=function(lt){return Ht({"text":nt,"baseMark":at},lt,new Ou)}}return at&&at.attribute.fill&&Rt.setAttribute("stroke",at.attribute.fill),this.attribute.line&&!ot(this.attribute.line.style)&&Rt.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(Rt),Rt}}},{"key":"render","value":function(){var nt=this;if(this._prepare(),!(j(this._idToGraphic)||this._isCollectionBase&&j(this._idToPoint))){var at=this.attribute,lt=at.overlap,Rt=at.smartInvert,Bt=at.dataFilter,Lt=at.customLayoutFunc,Ht=at.customOverlapFunc,jt=this.attribute.data;if(H(Bt)&&(jt=Bt(jt)),jt&&jt.length){var $t=new Set;jt=jt.filter((function(nt){return!$t.has(nt.id)&&$t.add(nt.id)}))}var Kt=this._initText(jt);Kt=H(Lt)?Lt(jt,Kt,this.getRelatedGraphic.bind(this),this._isCollectionBase?function(at){return nt._idToPoint.get(at.id)}:null,this):this._layout(Kt),H(Ht)?Kt=Ht(Kt,this.getRelatedGraphic.bind(this),this._isCollectionBase?function(at){return nt._idToPoint.get(at.id)}:null,this):!1!==lt&&(Kt=this._overlapping(Kt)),H(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(Kt,this.getRelatedGraphic.bind(this),this._isCollectionBase?function(at){return nt._idToPoint.get(at.id)}:null,this),Kt&&Kt.length&&Kt.forEach((function(at){nt._bindEvent(at),nt._setStatesOfText(at)})),!1!==Rt&&this._smartInvert(Kt),this._renderLabels(Kt)}}},{"key":"_bindEvent","value":function(nt){if(!this.attribute.disableTriggerEvent&&nt){var at=this.attribute,lt=at.hover,Rt=at.select;lt&&(nt.addEventListener("pointermove",this._onHover),nt.addEventListener("pointerout",this._onUnHover)),Rt&&nt.addEventListener("pointerdown",this._onClick)}}},{"key":"_setStatesOfText","value":function(nt){if(nt){var at=this.attribute.state;at&&!ot(at)&&(nt.states=at)}}},{"key":"_setStatesOfLabelLine","value":function(nt){if(nt){var at=this.attribute.labelLineState;at&&!ot(at)&&(nt.states=at)}}},{"key":"_createLabelText","value":function(nt){var at,lt;return uR(Object.assign(Object.assign({},null===(lt=null===(at=this.stage)||void 0===at?void 0:at.getTheme())||void 0===lt?void 0:lt.text),nt),"textType")}},{"key":"_prepare","value":function(){var nt,at,lt=[];if((H(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():function(nt,at){if(!at)return[];var lt=nt.find((function(nt){return nt.name===at}),!0);return lt?lt.getChildren():[]}(this.getRootNode(),this.attribute.baseMarkGroupName)).forEach((function(nt){"willRelease"!==nt.releaseStatus&&lt.push(nt)})),null===(nt=this._idToGraphic)||void 0===nt||nt.clear(),null===(at=this._idToPoint)||void 0===at||at.clear(),this._baseMarks=lt,this._isCollectionBase="line-data"===this.attribute.type,lt&&0!==lt.length){var Rt=this.attribute.data;if(Rt&&0!==Rt.length){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);for(var Bt=0,Lt=0;Lt<lt.length;Lt++){var Ht=lt[Lt],jt=fL(Ht);if(jt&&jt.length)for(var $t=0;$t<jt.length;$t++){var Kt=Rt[Bt];Kt&&jt[$t]&&(N(Kt.id)||(Kt.id="vrender-component-".concat(this.name,"-").concat(Bt)),this._idToPoint.set(Kt.id,jt[$t]),this._idToGraphic.set(Kt.id,Ht)),Bt++}}}else for(var te=0;te<lt.length;te++){var ne=Rt[te],re=lt[te];ne&&re&&(N(ne.id)||(ne.id="vrender-component-".concat(this.name,"-").concat(te)),this._idToGraphic.set(ne.id,re))}if(!1!==this.attribute.animation){var ae=this.attribute,oe=ae.animation,se=ae.animationEnter,le=ae.animationExit,ue=ae.animationUpdate,ce=V(oe)?oe:{};this._animationConfig={"enter":!1!==se&&ft({},dO,ce,null!=se?se:{}),"exit":!1!==le&&ft({},dO,ce,null!=le?le:{}),"update":!1!==ue&&(X(ue)?ue:ft({},dO,ce,null!=ue?ue:{}))}}else this._animationConfig={"enter":!1,"exit":!1,"update":!1}}}}},{"key":"getRelatedGraphic","value":function(nt){return this._idToGraphic.get(nt.id)}},{"key":"_initText","value":function(){for(var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],at=this.attribute.textStyle,lt=void 0===at?{}:at,Rt=[],Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt],Ht=this.getRelatedGraphic(Lt);if(Ht){var jt=Object.assign(Object.assign({"fill":this._isCollectionBase?X(Ht.attribute.stroke)?Ht.attribute.stroke.find((function(nt){return!!nt&&!0!==nt})):Ht.attribute.stroke:Ht.attribute.fill},lt),Lt),$t=this._createLabelText(jt);Rt.push($t)}}return Rt}},{"key":"_layout","value":function(nt){for(var at=this.attribute,lt=at.position,Rt=at.offset,Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt];if(!Lt)return;var Ht=Lt.attribute,jt=this.getRelatedGraphic(Ht);if(jt){Lt.attachedThemeGraphic=this;var $t=this.getGraphicBounds(Lt);Lt.attachedThemeGraphic=null;var Kt=H(lt)?lt(Ht):lt,te=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(Ht.id),Kt):this.getGraphicBounds(jt,{"x":Ht.x,"y":Ht.y},Kt),ne=this.labeling($t,te,Kt,Rt);ne&&Lt.setAttributes(ne)}}return nt}},{"key":"_overlapping","value":function(nt){var at,lt,Rt;if(0===nt.length)return[];var Bt=V(this.attribute.overlap)?this.attribute.overlap:{},Lt=this.getBaseMarkGroup(),Ht=null!==(at=Bt.size)&&void 0!==at?at:{"width":null!==(lt=null==Lt?void 0:Lt.AABBBounds.width())&&void 0!==lt?lt:0,"height":null!==(Rt=null==Lt?void 0:Lt.AABBBounds.height())&&void 0!==Rt?Rt:0};if(0===Ht.width||0===Ht.height)return nt;var jt=Bt.strategy,$t=Bt.priority,Kt=this._bmpTool||$I(Ht.width,Ht.height),te=this._bitmap||Kt.bitmap();return $t&&(nt=nt.sort((function(nt,at){return $t(at.attribute.data)-$t(nt.attribute.data)}))),"shiftY"===(null==jt?void 0:jt.type)?this._overlapGlobal(nt,Bt,Kt,te):this._overlapByStrategy(nt,Bt,Kt,te)}},{"key":"_overlapGlobal","value":function(nt,at,lt,Rt){var Bt=this,Lt=nt.filter((function(nt){return nt.attribute.visible&&0!==nt.attribute.opacity})),Ht=at.clampForce,jt=void 0===Ht||Ht,$t=at.hideOnHit,Kt=void 0===$t||$t,te=at.overlapPadding,ne=at.strategy;if(jt)for(var re=0;re<Lt.length;re++){var ae=nt[re],oe=sL(ae,lt.width,lt.height,lt.padding),se=oe.dx,le=void 0===se?0:se,ue=oe.dy,ce=void 0===ue?0:ue;0===le&&0===ce||(ae.setAttributes({"x":ae.attribute.x+le,"y":ae.attribute.y+ce}),ae._isClamped=!0)}Lt=function(nt,at){var lt=at.maxY,Rt=void 0===lt?Number.MAX_VALUE:lt,Bt=at.labelling,Lt=at.globalShiftY,Ht=void 0===Lt?{"enable":!0,"maxIterations":10,"maxError":.1,"padding":1}:Lt,jt=nt.length;if(jt<=1)return nt;var $t=new Map,Kt=new Map,h=function(nt){return Kt.get(nt).y1Initial},d=function(nt){return Kt.get(nt).height},p=function(nt){return Kt.get(nt).y1},f=function(nt){return Kt.get(nt).x},v=function(nt){return Kt.get(nt).x1},y=function(nt){return Kt.get(nt).x2},m=function(nt){return Kt.get(nt).attempts},_=function(nt,at){Kt.get(nt).y1=at},b=function(nt,at){Kt.get(nt).attempts=at};function x(nt){for(var at=nt.length-1;at>=0;at--){var lt=nt[at],Lt=nt[at-1],Ht=nt[at+1];if(Lt&&gL(p(Lt)+d(Lt),p(lt))||0===p(lt)&&lt._isClamped){var jt=Bt(lt).y;Ht&&gL(jt+d(lt)/2,p(Ht))||jt+d(lt)/2<=Rt&&_(lt,p(lt)+jt-($t=lt,Kt.get($t).y))}}var $t}nt.sort((function(nt,at){return nt.attribute.x-at.attribute.x}));var te,ne=s(nt);try{for(ne.s();!(te=ne.n()).done;){var re=te.value,ae=re.AABBBounds,oe=ae.y1,se=ae.y2,le=ae.x1,ue=ae.x2,ce=re.attribute,he=ce.x,de=ce.y;Kt.set(re,{"y1Initial":oe,"y1":oe,"y2":se,"y":de,"height":se-oe,"x1":le,"x2":ue,"x":he,"attempts":0});var fe,pe=!1,ve=s($t);try{for(ve.s();!(fe=ve.n()).done;){var Ae=g(fe.value,2),we=Ae[0],Ce=Ae[1],je=we.start,Ne=we.end;if(le>=je&&ue<=Ne)Ce.push(re),pe=!0;else if(Nt(he,f(Ce[0]),void 0,5)){var Ve={"start":Math.min(je,le),"end":Math.max(Ne,ue)};Ce.push(re),$t.set(Ve,Ce),$t.delete(we),pe=!0}else if(mL([je,Ne],[le,ue])/(Ne-je)>.5){var Ge={"start":Math.min(je,le),"end":Math.max(Ne,ue)};Ce.push(re),$t.set(Ge,Ce),$t.delete(we),pe=!0}if(pe)break}}catch(nt){ve.e(nt)}finally{ve.f()}pe||$t.set({"start":le,"end":ue},[re])}}catch(nt){ne.e(nt)}finally{ne.f()}var ti,li=s($t.values());try{for(li.s();!(ti=li.n()).done;){var hi=ti.value;hi.sort((function(nt,at){return h(nt)-h(at)})),x(hi)}}catch(nt){li.e(nt)}finally{li.f()}if(!1!==Ht.enable)for(var di=Ht.maxIterations,fi=void 0===di?10:di,pi=Ht.maxError,vi=void 0===pi?.1:pi,mi=Ht.padding,_i=void 0===mi?1:mi,bi=Ht.maxAttempts,Mi=void 0===bi?1e3:bi,Ti=Ht.deltaYTolerance,Ii=void 0===Ti?Number.MAX_VALUE:Ti,Bi=0;Bi<fi;Bi++){nt.sort((function(nt,at){return h(nt)-h(at)}));for(var zi=0,Wi=0;Wi<jt-1;Wi++){var Ui=nt[Wi];if(!(m(Ui)>=Mi)){for(var $i=void 0,qi=Wi+1;($i=nt[qi])&&!yL([v(Ui),y(Ui)],[v($i),y($i)]);)qi+=1;if($i){var Ki=p(Ui),Qi=d(Ui),Ji=p($i),dn=Ji-(Ki+Qi);if(dn<_i){var fn=(_i-dn)/2;if(zi=Math.max(zi,fn),Ki+fn+d($i)>Rt){var vn=Ki-(_i-dn),gn=h(Ui)-vn;Math.abs(gn)<=Ii&&(_(Ui,vn),b(Ui,m(Ui)+1))}else if(Ki-fn<0){var yn=Ji+(_i-dn),mn=h($i)-yn;Math.abs(mn)<=Ii&&(_($i,yn),b($i,m($i)+1))}else{var _n=Ki-fn,bn=h(Ui)-_n,xn=Ji+fn,kn=h($i)-xn;Math.abs(bn)<=Ii&&Math.abs(kn)<=Ii&&(_(Ui,_n),_($i,xn),b(Ui,m(Ui)+1),b($i,m($i)+1))}}}}}if(zi<vi)break}var Sn,An=s(nt);try{for(An.s();!(Sn=An.n()).done;){var wn=Sn.value,Cn=wn.attribute.y+p(wn)-h(wn);wn.setAttribute("y",Cn)}}catch(nt){An.e(nt)}finally{An.f()}var Mn=[];nt.sort((function(nt,at){return nt.attribute.x-at.attribute.x}));for(var Tn=0,En=nt.length-1;Tn<=En;)Tn===En?Mn.push(nt[Tn]):(Mn.push(nt[Tn]),Mn.push(nt[En])),Tn++,En--;return Mn}(Lt,Object.assign(Object.assign({"maxY":lt.height},ne),{"labelling":function(nt){var at=Bt.getRelatedGraphic(nt.attribute),lt=Bt._isCollectionBase?Bt.getGraphicBounds(null,Bt._idToPoint.get(nt.attribute.id)):Bt.getGraphicBounds(at,nt);return Bt.labeling(nt.AABBBounds,lt,"bottom",Bt.attribute.offset)}}));for(var he=0;he<Lt.length;he++){var de=Lt[he],fe=de.AABBBounds,pe=eL(lt,fe,!0);if(iL(lt,Rt,fe,jt,te))Rt.setRange(pe);else{if(jt&&this._processClampForce(de,lt,Rt,te))continue;Kt?de.setAttributes({"visible":!1}):Rt.setRange(pe)}}return Lt}},{"key":"_processClampForce","value":function(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Bt=sL(nt,at.width,at.height,at.padding),Lt=Bt.dy,Ht=void 0===Lt?0:Lt,jt=Bt.dx,$t=void 0===jt?0:jt;if(0===$t&&0===Ht){if(iL(at,lt,nt.AABBBounds,!1,Rt))return lt.setRange(eL(at,nt.AABBBounds,!0)),!0}else if(iL(at,lt,{"x1":nt.AABBBounds.x1+$t,"x2":nt.AABBBounds.x2+$t,"y1":nt.AABBBounds.y1+Ht,"y2":nt.AABBBounds.y2+Ht}))return nt.setAttributes({"x":nt.attribute.x+$t,"y":nt.attribute.y+Ht}),lt.setRange(eL(at,nt.AABBBounds,!0)),!0;return!1}},{"key":"_overlapByStrategy","value":function(nt,at,lt,Rt){var Bt,Lt=this,Ht=at.avoidBaseMark,jt=at.strategy,$t=void 0===jt?[]:jt,Kt=at.hideOnHit,te=void 0===Kt||Kt,ne=at.clampForce,re=void 0===ne||ne,ae=at.avoidMarks,oe=void 0===ae?[]:ae,se=at.overlapPadding,le=[],ue=$t.some((function(nt){return"bound"===nt.type}));Ht&&(null===(Bt=this._baseMarks)||void 0===Bt||Bt.forEach((function(nt){nt.AABBBounds&&Rt.setRange(eL(lt,nt.AABBBounds,!0))}))),oe.length>0&&oe.forEach((function(nt){Y(nt)?function(nt,at){if(!at)return[];var lt=nt.find((function(nt){return nt.name===at}),!0);return lt?lt.findAll((function(nt){return"group"!==nt.type}),!0):[]}(Lt.getRootNode(),nt).forEach((function(nt){nt.AABBBounds&&Rt.setRange(eL(lt,nt.AABBBounds,!0))})):nt.AABBBounds&&Rt.setRange(eL(lt,nt.AABBBounds,!0))}));for(var ce=0;ce<nt.length;ce++)if(!1!==nt[ce].attribute.visible){var he=nt[ce],de=this.getRelatedGraphic(he.attribute);if(he.update(),Ye(de.AABBBounds,{"x1":0,"x2":lt.width,"y1":0,"y2":lt.height},!0)){if(iL(lt,Rt,he.AABBBounds,re,se)){if(!ue){Rt.setRange(eL(lt,he.AABBBounds,!0)),le.push(he);continue}if(ue&&de&&de.AABBBounds&&this._canPlaceInside(he.AABBBounds,de.AABBBounds)){Rt.setRange(eL(lt,he.AABBBounds,!0)),le.push(he);continue}}for(var fe=!1,pe=0;pe<$t.length;pe++)if(!1!==(fe=rL(lt,Rt,$t[pe],this.attribute,he,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(nt[ce].attribute.id)):this.getGraphicBounds(de,nt[ce].attribute),this.labeling))){he.setAttributes({"x":fe.x,"y":fe.y}),le.push(he);break}(!fe&&re&&this._processClampForce(he,lt,Rt,se)||!fe&&!te)&&le.push(he)}}return le}},{"key":"getBaseMarkGroup","value":function(){var nt=this.attribute.baseMarkGroupName;if(nt)return this.getRootNode().find((function(at){return at.name===nt}),!0)}},{"key":"getGraphicBounds","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=arguments.length>2?arguments[2]:void 0;if(nt){if(!1!==nt.attribute.visible)return nt.AABBBounds;var Rt=nt.attribute,Bt=Rt.x,Lt=Rt.y;return{"x1":Bt,"x2":Bt,"y1":Lt,"y2":Lt}}if(at&&lt&&"inside-middle"===lt){var Ht=at.x,jt=at.y,$t=at.x1,Kt=void 0===$t?Ht:$t,te=at.y1,ne=void 0===te?jt:te;return{"x1":(Ht+Kt)/2,"x2":(Ht+Kt)/2,"y1":(jt+ne)/2,"y2":(jt+ne)/2}}var re=at.x,ae=at.y;return{"x1":re,"x2":re,"y1":ae,"y2":ae}}},{"key":"_renderLabels","value":function(nt){var at,lt=this,Rt=this.attribute.syncState,Bt=new Map,Lt=this._graphicToText||new Map,Ht=[],jt=[],$t=(null!==(at=this.attribute.line)&&void 0!==at?at:{}).visible;nt&&nt.forEach((function(nt,at){var Kt,te,ne=lt.getRelatedGraphic(nt.attribute),re=lt._isCollectionBase?nt.attribute.id:ne,ae=(null==Lt?void 0:Lt.get(re))?"update":"enter";if($t&&(te=lt._createLabelLine(nt,ne)),Rt&&lt.updateStatesOfLabels([te?{"text":nt,"labelLine":te}:{"text":nt}],null!==(Kt=ne.currentStates)&&void 0!==Kt?Kt:[]),"enter"===ae)Ht.push(nt),Bt.set(re,te?{"text":nt,"labelLine":te}:{"text":nt}),lt._addLabel({"text":nt,"labelLine":te},Ht,jt,at);else if("update"===ae){var oe=Lt.get(re);Lt.delete(re),Bt.set(re,oe),lt._updateLabel(oe,{"text":nt,"labelLine":te})}})),this._removeLabel(Lt),this._graphicToText=Bt}},{"key":"_addLabel","value":function(nt,at,lt,Rt){var Bt=this,Lt=nt.text,Ht=nt.labelLine,jt=this.getRelatedGraphic(Lt.attribute);if(this._syncStateWithRelatedGraphic(jt),!1!==this._enableAnimation&&!1!==this._animationConfig.enter){if(jt){var $t=uL(Lt.attribute,"fadeIn"),Kt=$t.from,te=$t.to;Lt&&this.add(Lt),Ht&&(lt.push(Ht),this.add(Ht)),this._animationConfig.enter.duration>0&&jt.once("animate-bind",(function(nt){Lt.setAttributes(Kt),Ht&&Ht.setAttributes(Kt);var $t=Bt._afterRelatedGraphicAttributeUpdate(Lt,at,Ht,lt,Rt,jt,te,Bt._animationConfig.enter);jt.on("afterAttributeUpdate",$t)}))}}else Lt&&this.add(Lt),Ht&&this.add(Ht)}},{"key":"_updateLabel","value":function(nt,at){var lt=nt.text,Rt=nt.labelLine,Bt=at.text,Lt=at.labelLine;if(!1!==this._enableAnimation&&!1!==this._animationConfig.update){var Ht=this._animationConfig.update,jt=Ht.duration,$t=Ht.easing;(function(nt,at,lt){if(!X(lt)){var Rt=lt.duration,Bt=lt.easing,Lt=lt.increaseEffect,Ht=void 0===Lt||Lt;return nt.animate().to(at.attribute,Rt,Bt),void(Ht&&"text"===nt.type&&"text"===at.type&&hL(nt,at,Rt,Bt))}lt.forEach((function(lt){var Rt=lt.duration,Bt=lt.easing,Lt=lt.increaseEffect,Ht=void 0===Lt||Lt,jt=lt.channel,$t=cL(nt,at,jt,lt.options).to;ot($t)||nt.animate().to($t,Rt,Bt),Ht&&"text"===nt.type&&"text"===at.type&&hL(nt,at,Rt,Bt)}))})(lt,Bt,this._animationConfig.update),Rt&&Lt&&nt.labelLine.animate().to(Lt.attribute,jt,$t)}else nt.text.setAttributes(Bt.attribute),Rt&&Lt&&nt.labelLine.setAttributes(Lt.attribute)}},{"key":"_removeLabel","value":function(nt){var at=this,i=function(nt){at.removeChild(nt.text),nt.labelLine&&at.removeChild(nt.labelLine)};if(!1!==this._enableAnimation&&!1!==this._animationConfig.exit){var lt=this._animationConfig.exit,Rt=lt.duration,Bt=lt.easing;nt.forEach((function(nt){var at;null===(at=nt.text)||void 0===at||at.animate().to(uL(nt.text.attribute,"fadeOut").to,Rt,Bt).onEnd((function(){i(nt)}))}))}else nt.forEach((function(nt){i(nt)}))}},{"key":"updateStatesOfLabels","value":function(nt,at){nt.forEach((function(nt){nt&&(nt.text&&nt.text.useStates(at),nt.labelLine&&nt.labelLine.useStates(at))}))}},{"key":"_syncStateWithRelatedGraphic","value":function(nt){this.attribute.syncState&&nt&&nt.on("afterAttributeUpdate",this._handleRelatedGraphicSetState)}},{"key":"_afterRelatedGraphicAttributeUpdate","value":function(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=this,Kt=jt.mode,te=jt.duration,ne=jt.easing,re=jt.delay,p=function(jt){var ae,oe,se,le=jt.detail;if(!le)return{};var ue=null===(ae=le.animationState)||void 0===ae?void 0:ae.step;if(le.type!==Tl.ANIMATE_UPDATE||!ue||"wait"===ue.type&&null==(null===(oe=ue.prev)||void 0===oe?void 0:oe.type))return{};if(le.type===Tl.ANIMATE_END)return nt.setAttributes(Ht),void(lt&&lt.setAttributes(Ht));var _=function(){Lt&&(Lt.onAnimateBind=void 0,Lt.removeEventListener("afterAttributeUpdate",p))};switch(Kt){case"after":le.animationState.end&&(nt.animate({"onStart":_}).wait(re).to(Ht,te,ne),lt&&lt.animate().wait(re).to(Ht,te,ne));break;case"after-all":Bt===at.length-1&&le.animationState.end&&(at.forEach((function(nt){nt.animate({"onStart":_}).wait(re).to(Ht,te,ne)})),Rt.forEach((function(nt){nt.animate().wait(re).to(Ht,te,ne)})));break;default:if($t._isCollectionBase){var ce=$t._idToPoint.get(nt.attribute.id);!ce||nt.animates&&nt.animates.has("label-animate")||!Lt.containsPoint(ce.x,ce.y,Ml.LOCAL,null===(se=$t.stage)||void 0===se?void 0:se.getPickerService())||(nt.animate({"onStart":_}).wait(re).to(Ht,te,ne),lt&&lt.animate().wait(re).to(Ht,te,ne))}else le.animationState.isFirstFrameOfStep&&(nt.animate({"onStart":_}).wait(re).to(Ht,te,ne),lt&&lt.animate().wait(re).to(Ht,te,ne))}};return p}},{"key":"_smartInvert","value":function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t=V(this.attribute.smartInvert)?this.attribute.smartInvert:{},Kt=$t.textType,te=$t.contrastRatiosThreshold,ne=$t.alternativeColors,re=$t.mode,ae=$t.interactInvertType,oe=null!==(at=$t.fillStrategy)&&void 0!==at?at:"invertBase",se=null!==(lt=$t.strokeStrategy)&&void 0!==lt?lt:"base",le=null!==(Rt=$t.brightColor)&&void 0!==Rt?Rt:"#ffffff",ue=null!==(Bt=$t.darkColor)&&void 0!==Bt?Bt:"#000000",ce=null!==(Lt=$t.outsideEnable)&&void 0!==Lt&&Lt;if("null"!==oe||"null"!==se)for(var he=0;he<nt.length;he++){var de=nt[he];if(de){var fe=this.getRelatedGraphic(de.attribute),pe=fe.attribute.fill,ve=de.attribute.fill;if(V(pe)&&pe.gradient){var Ae=null===(jt=null===(Ht=pe.stops)||void 0===Ht?void 0:Ht[0])||void 0===jt?void 0:jt.color;Ae&&(pe=Ae,ve=Ae)}var we=JP(ve,pe,Kt,te,ne,re),Ce=QP(we,le)?le:ue,je=this._canPlaceInside(de.AABBBounds,fe.AABBBounds),Ne=!je&&de.AABBBounds&&fe.AABBBounds&&fe.AABBBounds.intersects(de.AABBBounds);if(je||ce||Ne&&"inside"===ae){var Ve=eR(oe,pe,we,Ce);if(Ve&&de.setAttributes({"fill":Ve}),0===de.attribute.lineWidth||0===de.attribute.strokeOpacity)continue;var Ge=eR(se,pe,we,Ce);Ge&&de.setAttributes({"stroke":Ge})}else if(Ne&&"none"!==ae){if(0===de.attribute.lineWidth||0===de.attribute.strokeOpacity)continue;if(de.attribute.stroke){de.setAttributes({"fill":JP(de.attribute.fill,de.attribute.stroke,Kt,te,ne,re)});continue}var ti=eR(oe,pe,we,Ce);ti&&de.setAttributes({"fill":ti});var li=eR(se,pe,we,Ce);li&&de.setAttributes({"stroke":li})}}}}},{"key":"_canPlaceInside","value":function(nt,at){return!(!nt||!at)&&at.encloses(nt)}},{"key":"setLocation","value":function(nt){this.translateTo(nt.x,nt.y)}},{"key":"disableAnimation","value":function(){this._enableAnimation=!1}},{"key":"enableAnimation","value":function(){this._enableAnimation=!0}}])}(xS);fO.defaultAttributes={"textStyle":{"fontSize":12,"textAlign":"center","textBaseline":"middle","boundsPadding":[-2,-1,-2,-1]},"offset":0,"pickable":!1};var pO={},kL=function(nt,at){pO[nt]=at},SL=function(nt){return pO[nt]},AL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},vO=function(nt){function e(nt,at){var lt;r(this,e);var Rt=nt.data,Bt=AL(nt,["data"]);return(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"data":Rt},ft({},e.defaultAttributes,Bt))])).name="symbol-label",lt}return h(e,nt),o(e,[{"key":"labeling","value":function(nt,at){return function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(nt){var Bt=nt.x1,Lt=nt.y1,Ht=nt.x2,jt=nt.y2,$t=Math.abs(Ht-Bt),Kt=Math.abs(jt-Lt),te=(at.x1+at.x2)/2,ne=(at.y1+at.y2)/2,re=0,ae=0,oe=0,se=0;at&&(oe=Math.abs(at.x1-at.x2)/2,se=Math.abs(at.y1-at.y2)/2);var le={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(lt){case"top":ae=-1;break;case"bottom":ae=1;break;case"left":re=-1;break;case"right":re=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":re=Math.sin(le[lt]*(Math.PI/180)),ae=Math.cos(le[lt]*(Math.PI/180));break;case"center":re=0,ae=0}return{"x":te+re*(Rt+oe)+Math.sign(re)*($t/2),"y":ne+ae*(Rt+se)+Math.sign(ae)*(Kt/2)}}}(nt,at,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}])}(fO);vO.defaultAttributes={"textStyle":{"fill":"#000"},"position":"top","offset":5};var ML=function(){kL("symbol",vO),kL("line-data",vO)},TL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},_O=function(nt){function e(nt,at){r(this,e);var lt=nt.data,Rt=TL(nt,["data"]);return n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"data":lt},ft({},e.defaultAttributes,Rt))])}return h(e,nt),o(e,[{"key":"labeling","value":function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(nt&&at){var Bt=nt.x1,Lt=nt.y1,Ht=nt.x2,jt=nt.y2,$t=Math.abs(Ht-Bt),Kt=Math.abs(jt-Lt),te=ui(at,lt),ne=te.x,re=te.y,ae=0,oe=0,se=lt.includes("inside");switch(lt.includes("top")?oe=se?1:-1:lt.includes("bottom")?oe=se?-1:1:lt.includes("left")?ae=se?1:-1:lt.includes("right")&&(ae=se?-1:1),lt){case"top-right":case"bottom-right":ae=-1;break;case"top-left":case"bottom-left":ae=1}return{"x":ne+ae*Rt+ae*$t/2,"y":re+oe*Rt+oe*Kt/2}}}}])}(fO);_O.tag="rect-label",_O.defaultAttributes={"textStyle":{"fill":"#000"},"position":"top","offset":5};var EL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},xO=function(nt){function e(nt,at){var lt;r(this,e);var Rt=nt.data,Bt=EL(nt,["data"]);return(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"data":Rt},ft({},e.defaultAttributes,Bt))])).name="line-label",lt}return h(e,nt),o(e,[{"key":"getGraphicBounds","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end";if(!nt||"line"!==nt.type&&"area"!==nt.type)return y(e,"getGraphicBounds",this,3)([nt,at]);var Rt=nt.attribute.points,Bt=nt.attribute.segments;!Rt&&Bt&&Bt.length&&(Rt=Bt.reduce((function(nt,at){var lt;return nt.concat(null!==(lt=at.points)&&void 0!==lt?lt:[])}),[])),Rt&&0!==Rt.length||(Rt=[at]);var Lt="start"===lt?0:Rt.length-1;return Rt[Lt]?{"x1":Rt[Lt].x,"x2":Rt[Lt].x,"y1":Rt[Lt].y,"y2":Rt[Lt].y}:void 0}},{"key":"labeling","value":function(nt,at){return function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end",Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!nt||!at)return{"x":1/0,"y":1/0};var Bt=nt.x1,Lt=nt.x2,Ht=Math.abs(Lt-Bt),jt=at.x1,$t=jt;return"end"===lt?$t=jt+Ht/2+Rt:"start"===lt&&($t=jt-Ht/2-Rt),{"x":$t,"y":at.y1}}(nt,at,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"end",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}}])}(fO);xO.defaultAttributes={"textStyle":{"fill":"#000"},"position":"end","offset":6};var RL=function(){kL("line",xO),kL("area",xO)},BL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},SO=o((function t(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){r(this,t),this.refDatum=nt,this.center=at,this.outerCenter=lt,this.quadrant=Rt,this.radian=Bt,this.middleAngle=Lt,this.innerRadius=Ht,this.outerRadius=jt,this.circleCenter=$t,this.labelVisible=!0}),[{"key":"getLabelBounds","value":function(){return this.labelPosition&&this.labelSize?{"x1":this.labelPosition.x-this.labelSize.width/2,"y1":this.labelPosition.y-this.labelSize.height/2,"x2":this.labelPosition.x+this.labelSize.width/2,"y2":this.labelPosition.y+this.labelSize.height/2}:{"x1":0,"x2":0,"y1":0,"y2":0}}}]),AO=function(nt){function e(nt,at){var lt;r(this,e);var Rt=nt.data,Bt=BL(nt,["data"]);return(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"data":Rt},ft({},e.defaultAttributes,Bt))])).name="arc-label",lt._ellipsisWidth=0,lt._arcLeft=new Map,lt._arcRight=new Map,lt._line2MinLength=0,lt._alignOffset=0,lt}return h(e,nt),o(e,[{"key":"_overlapping","value":function(nt){return["inside","inside-center"].includes(this.attribute.position)?y(e,"_overlapping",this,3)([nt]):nt}},{"key":"labeling","value":function(nt,at){if(nt&&at)return{"x":0,"y":0}}},{"key":"_layout","value":function(nt){var at,lt,Rt,Bt=this;if(nt&&nt.length){var Lt=y(e,"_layout",this,3)([nt]),Ht=Lt.map((function(nt){return Bt.getGraphicBounds(nt)})),jt=Object.assign(Object.assign({},this.attribute.textStyle),{"text":""}),$t=1/0;if(!1!==jt.ellipsis){var Kt=this._createLabelText(jt),te=this.getGraphicBounds(Kt);$t=te.x2-te.x1}var ne=Lt.map((function(nt){return nt.attribute})),re=Array.from(this._idToGraphic.values());this._line2MinLength=H(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(nt,re,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=null!==(at=H(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(nt,re,this.attribute):this.attribute.layout.alignOffset)&&void 0!==at?at:0;for(var ae=this.layoutArcLabels(this.attribute.position,this.attribute,re,ne,Ht,$t),v=function(){var nt=ne[oe],at=ae.find((function(at){var lt;return(null===(lt=at.refDatum)||void 0===lt?void 0:lt.id)===nt.id}));if(at){var Bt={"visible":at.labelVisible,"x":at.labelPosition.x,"y":at.labelPosition.y,"angle":at.angle,"points":at.pointA&&at.pointB&&at.pointC?[at.pointA,at.pointB,at.pointC]:void 0,"line":at.labelLine};"richtext"===Lt[oe].type?Bt.width=null!==(lt=at.labelLimit)&&void 0!==lt?lt:Lt[oe].attribute.width:Bt.maxLineWidth=null!==(Rt=at.labelLimit)&&void 0!==Rt?Rt:Lt[oe].attribute.maxLineWidth,at.refArc&&"arc3d"===at.refArc.type&&(Bt.anchor3d=[at.circleCenter.x-Bt.x,at.circleCenter.y-Bt.y],Bt.beta=at.refArc.attribute.beta),Lt[oe].setAttributes(Bt)}},oe=0;oe<ne.length;oe++)v();return Lt}}},{"key":"layoutArcLabels","value":function(nt,at,lt,Rt,Bt,Lt){var Ht=this;this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=Lt;var jt=0;lt.forEach((function(nt){nt.attribute.outerRadius>jt&&(jt=nt.attribute.outerRadius)})),Rt.forEach((function(nt,lt){var Lt,$t,Kt,te=Ht._idToGraphic.get(nt.id),ne=te.attribute,re={"x":null!==(Lt=null==ne?void 0:ne.x)&&void 0!==Lt?Lt:0,"y":null!==($t=null==ne?void 0:ne.y)&&void 0!==$t?$t:0};if(!j(Rt[lt])&&!j(Bt[lt])){var ae=Rt[lt]?Rt[lt]:null,oe=Bt[lt]?Bt[lt]:{"x1":0,"x2":0,"y1":0,"y2":0},se=(ne.startAngle+ne.endAngle)/2,le=ne.endAngle-ne.startAngle,ue=De(ne.endAngle-le/2),ce=Pe(re,ne.outerRadius,se),he=Pe(re,jt+at.line.line1MinLength,se),de=new SO(ae,ce,he,ue,le,se,ne.innerRadius,ne.outerRadius,re);de.refArc=te,de.pointA=Pe(re,Ht.computeDatumRadius(2*re.x,2*re.y,ne.outerRadius),de.middleAngle),de.labelSize={"width":oe.x2-oe.x1,"height":oe.y2-oe.y1},1===(Kt=de.quadrant)||2===Kt?Ht._arcRight.set(de.refDatum,de):pL(de.quadrant)&&Ht._arcLeft.set(de.refDatum,de)}}));var $t=Array.from(this._arcLeft.values()),Kt=Array.from(this._arcRight.values()),te=[];switch(nt){case"inside":case"inside-inner":case"inside-outer":case"inside-center":te.push.apply(te,m(this._layoutInsideLabels(Kt,at,lt))),te.push.apply(te,m(this._layoutInsideLabels($t,at,lt)));break;default:te.push.apply(te,m(this._layoutOutsideLabels(Kt,at,lt))),te.push.apply(te,m(this._layoutOutsideLabels($t,at,lt)))}return te}},{"key":"_layoutInsideLabels","value":function(nt,at,lt){var Rt,Bt,Lt=this,Ht=at,jt=Ht.spaceWidth,$t=null!==(Rt=Ht.position)&&void 0!==Rt?Rt:"inside",Kt=null!==(Bt=Ht.offsetRadius)&&void 0!==Bt?Bt:-jt;return nt.forEach((function(nt){var lt,Rt,Bt,te,ne=nt.labelSize,re=nt.radian,ae=nt.innerRadius,oe=nt.outerRadius;te=re<function(nt,at){return at>2*nt?NaN:2*Math.asin(at/2/nt)}(oe,ne.height)?0:oe-(re>=Math.PI?ae:Math.max(ae,ne.height/2/Math.tan(re/2)))-jt,!0!==Ht.rotate&&(te=oe-jt);var se=Lt._getFormatLabelText(nt.refDatum,te);nt.labelText=se;var le,ue=Math.min(te,nt.labelSize.width),ce=Lt._computeAlign(nt,at),he=0;if("inside"===$t&&(he="left"===ce?ue:"right"===ce?0:ue/2),le="inside-inner"===$t?ae-Kt+he:"inside-center"===$t?ae+(oe-ae)/2:oe+Kt-he,nt.labelPosition=Pe(nt.circleCenter,le,nt.middleAngle),nt.labelLimit=ue,Vt(ue,0)||(nt.labelVisible=!1),!1!==Ht.rotate){nt.angle=null!==(Rt=null===(lt=at.textStyle)||void 0===lt?void 0:lt.angle)&&void 0!==Rt?Rt:nt.middleAngle;var de=null!==(Bt=Ht.offsetAngle)&&void 0!==Bt?Bt:0;["inside-inner","inside-outer"].includes($t)&&(de+=Math.PI/2),nt.angle+=de}})),nt}},{"key":"_layoutOutsideLabels","value":function(nt,at,lt){var Rt,Bt,Lt,Ht=this,jt=null!==(Rt=lt[0].attribute.x)&&void 0!==Rt?Rt:0,$t=2*(null!==(Bt=lt[0].attribute.y)&&void 0!==Bt?Bt:0),Kt=at.layout,te=at.spaceWidth;if(nt.forEach((function(nt){var at=pL(nt.quadrant)?-1:1;nt.labelPosition={"x":nt.outerCenter.x+at*(nt.labelSize.width/2+Ht._line2MinLength+te),"y":nt.outerCenter.y}})),nt.sort((function(nt,at){return nt.labelPosition.y-at.labelPosition.y})),!1!==at.coverEnable||"none"===Kt.strategy){var ne,re=s(nt);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value,oe=ae.labelPosition,se=ae.labelSize;ae.labelLimit=se.width,ae.pointB=pL(ae.quadrant)?{"x":oe.x+se.width/2+this._line2MinLength+te,"y":oe.y}:{"x":oe.x-se.width/2-this._line2MinLength-te,"y":oe.y},this._computeX(ae,at,lt)}}catch(nt){re.e(nt)}finally{re.f()}!1===at.coverEnable&&"none"===Kt.strategy&&this._coverLabels(nt)}else{var le=$t/((null===(Lt=at.textStyle)||void 0===Lt?void 0:Lt.fontSize)||16);this._adjustY(nt,le,at,lt);var ue,ce=nt.reduce((function(nt,at){var lt=at.getLabelBounds(),Rt=lt.y1,Bt=lt.y2;return nt.minY=Math.max(0,Math.min(Rt,nt.minY)),nt.maxY=Math.min($t,Math.max(Bt,nt.maxY)),nt}),{"minY":1/0,"maxY":-1/0}),he=ce.minY,de=ce.maxY,fe=Math.max(Math.abs($t/2-he),Math.abs(de-$t/2)),pe=this._computeLayoutRadius(fe,at,lt),ve=s(nt);try{for(ve.s();!(ue=ve.n()).done;){var Ae=ue.value;this._computePointB(Ae,pe,at,lt),this._computeX(Ae,at,lt)}}catch(nt){ve.e(nt)}finally{ve.f()}}var we=2*jt;return nt.forEach((function(nt){var lt,Rt;nt.labelVisible&&(Gt(nt.pointB.x,Ht._line2MinLength+te)||Vt(nt.pointB.x,we-Ht._line2MinLength-te))&&(nt.labelVisible=!1),nt.angle=null!==(Rt=null===(lt=at.textStyle)||void 0===lt?void 0:lt.angle)&&void 0!==Rt?Rt:0,at.offsetAngle&&(nt.angle+=at.offsetAngle),nt.labelLine=Object.assign(Object.assign({},at.line),{"visible":nt.labelVisible})})),nt}},{"key":"_computeX","value":function(nt,at,lt){var Rt,Bt=nt.circleCenter,Lt=this.attribute.width;this.attribute.height;var Ht=0;lt.forEach((function(nt){nt.attribute.outerRadius>Ht&&(Ht=nt.attribute.outerRadius)}));var jt=this.computeLayoutOuterRadius(Ht,at.width,at.height),$t=at.line.line1MinLength,Kt=null===(Rt=at.layout)||void 0===Rt?void 0:Rt.align,te=at.spaceWidth,ne=nt.labelPosition,re=nt.quadrant,ae=nt.pointB;Q(ae.x*ae.y)||(nt.pointC={"x":NaN,"y":NaN},ne.x=NaN,nt.labelLimit=0);var oe=this.computeRadius(jt,at.width,at.height),se=pL(re)?-1:1,le=0,ue=(se>0?Lt-ae.x:ae.x-0)+this._alignOffset-this._line2MinLength-te;"labelLine"===Kt&&(le=(oe+$t+this._line2MinLength)*se+Bt.x,ue=(se>0?Lt-le:le-0)-te);var ce=this._getFormatLabelText(nt.refDatum,ue);nt.labelText=ce;var he=Math.min(ue,nt.labelSize.width);switch(Kt){case"labelLine":break;case"edge":le=se>0?Lt-he-te:0+he+te;break;default:le=ae.x+se*this._line2MinLength}var de=(he=Math.max(this._ellipsisWidth,he))<nt.labelSize.width-1;nt.labelLimit=de?he:null,nt.pointC={"x":le,"y":ne.y};var fe=function(nt){return"left"===nt?0:"right"===nt?1:.5}(this._computeAlign(nt,at))*(de?he:nt.labelSize.width);"edge"===Kt?(ne.x=(se>0?Lt:0)-se*fe+se*this._alignOffset,nt.pointC.x+=se*this._alignOffset):ne.x=le+se*(this._alignOffset+te+fe)}},{"key":"_computeAlign","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t=at,Kt=null!==(Rt=null===(lt=$t.textStyle)||void 0===lt?void 0:lt.textAlign)&&void 0!==Rt?Rt:null===(Bt=$t.textStyle)||void 0===Bt?void 0:Bt.align,te=null!==(Ht=null===(Lt=$t.layout)||void 0===Lt?void 0:Lt.textAlign)&&void 0!==Ht?Ht:null===(jt=$t.layout)||void 0===jt?void 0:jt.align;return"inside"!==$t.position?j(Kt)||"auto"===Kt?"edge"===te?pL(nt.quadrant)?"left":"right":pL(nt.quadrant)?"right":"left":Kt:j(Kt)||"auto"===Kt?"center":Kt}},{"key":"_getFormatLabelText","value":function(nt,at){var lt;return null!==(lt=null==nt?void 0:nt.text)&&void 0!==lt?lt:""}},{"key":"_adjustY","value":function(nt,at,lt,Rt){var Bt;Rt[0].attribute.x;var Lt=2*(null!==(Bt=Rt[0].attribute.y)&&void 0!==Bt?Bt:0),Ht=lt.layout;if("vertical"===Ht.strategy){var jt,$t=0,Kt=nt.length;if(Kt<=0)return;for(var te=0;te<Kt;te++){if(Gt(jt=nt[te].getLabelBounds().y1-$t,0)){var ne=this._shiftY(nt,te,Kt-1,-jt);this._shiftY(nt,ne,0,jt/2)}$t=nt[te].getLabelBounds().y2}Gt(jt=nt[0].getLabelBounds().y1-0,0)&&this._shiftY(nt,0,Kt-1,-jt);for(var re=nt.length-1;re>=0&&nt[re].getLabelBounds().y2>Lt;re--)nt[re].labelVisible=!1}else if("none"!==Ht.strategy){var ae=nt.map((function(nt,at){return{"arc":nt,"originIndex":at,"priorityIndex":0}}));ae.sort((function(nt,at){return at.arc.radian-nt.arc.radian})),ae.forEach((function(nt,at){nt.priorityIndex=at,nt.arc.labelVisible=!1}));for(var oe=1/0,se=-1/0,le=0;le<at&&le<nt.length;le++){this._storeY(nt);var ue=ae[le].arc;this._computeYRange(ue,lt,Rt),ue.labelVisible=!0;var ce=ue.labelPosition.y,he=this._findNeighborIndex(nt,ae[le]),de=he.lastIndex,fe=he.nextIndex,pe=nt[de],ve=nt[fe];if(-1===de&&-1!==fe){var Ae=ve.labelPosition.y;ce>Ae?ue.labelPosition.y=Ae-ve.labelSize.height/2-ue.labelSize.height/2:this._twoWayShift(nt,ue,ve,fe)}else if(-1!==de&&-1===fe){var we=pe.labelPosition.y;ce<we?ue.labelPosition.y=we+pe.labelSize.height/2+ue.labelSize.height/2:this._twoWayShift(nt,pe,ue,ae[le].originIndex)}else if(-1!==de&&-1!==fe){var Ce=pe.labelPosition.y,je=ve.labelPosition.y;ce>je?(ue.labelPosition.y=je-ve.labelSize.height/2-ue.labelSize.height/2,this._twoWayShift(nt,pe,ue,ae[le].originIndex)):ce<Ce?(ue.labelPosition.y=Ce+pe.labelSize.height/2+ue.labelSize.height/2,this._twoWayShift(nt,ue,ve,fe)):(this._twoWayShift(nt,pe,ue,ae[le].originIndex),this._twoWayShift(nt,ue,ve,fe))}var Ne=Math.min(oe,ae[le].originIndex),Ve=Math.max(se,ae[le].originIndex),Ge=void 0;if(Vt(Ge=nt[Ve].getLabelBounds().y2-Lt,0)&&this._shiftY(nt,Ve,0,-Ge),Gt(Ge=nt[Ne].getLabelBounds().y1-0,0)&&this._shiftY(nt,Ne,nt.length-1,-Ge),Vt(Ge=nt[Ve].getLabelBounds().y2-Lt,0)){ue.labelVisible=!1,this._restoreY(nt);break}Ht.tangentConstraint&&!this._checkYRange(nt)?(ue.labelVisible=!1,this._restoreY(nt)):(oe=Ne,se=Ve)}}}},{"key":"_shiftY","value":function(nt,at,lt,Rt){for(var Bt=at<lt?1:-1,Lt=at;-1!==Lt;){nt[Lt].labelPosition.y+=Rt;var Ht=this._findNextVisibleIndex(nt,Lt,lt,Bt);if(Ht>=0&&Ht<nt.length){var jt=nt[Lt].getLabelBounds(),$t=jt.y1,Kt=jt.y2,te=nt[Ht].getLabelBounds(),ne=te.y1,re=te.y2;if(Bt>0&&Kt<ne||Bt<0&&$t>re)return Lt}Lt=Ht}return lt}},{"key":"_findNextVisibleIndex","value":function(nt,at,lt,Rt){for(var Bt=(lt-at)*Rt,Lt=1;Lt<=Bt;Lt++){var Ht=at+Lt*Rt;if(nt[Ht].labelVisible)return Ht}return-1}},{"key":"_computePointB","value":function(nt,at,lt,Rt){var Bt=lt,Lt=0;Rt.forEach((function(nt){nt.attribute.outerRadius>Lt&&(Lt=nt.attribute.outerRadius)}));var Ht=this.computeLayoutOuterRadius(Lt,lt.width,lt.height),jt=Bt.line.line1MinLength;if("none"===Bt.layout.strategy)nt.pointB={"x":nt.outerCenter.x,"y":nt.outerCenter.y};else{var $t=nt.circleCenter,Kt=this.computeRadius(Ht,lt.width,lt.height),te=nt.labelPosition,ne=nt.quadrant,re=at-Math.max(Kt+jt,nt.outerRadius),ae=Math.sqrt(Math.pow(at,2)-Math.pow(Math.abs($t.y-te.y),2))-re;Q(ae)?nt.pointB={"x":$t.x+ae*(pL(ne)?-1:1),"y":te.y}:nt.pointB={"x":NaN,"y":NaN}}}},{"key":"_storeY","value":function(nt){var at,lt=s(nt);try{for(lt.s();!(at=lt.n()).done;){var Rt=at.value;Rt.labelVisible&&(Rt.lastLabelY=Rt.labelPosition.y)}}catch(nt){lt.e(nt)}finally{lt.f()}}},{"key":"_computeYRange","value":function(nt,at,lt){var Rt=nt.circleCenter,Bt={"width":2*Rt.x,"height":2*Rt.y},Lt=0;lt.forEach((function(nt){nt.attribute.outerRadius>Lt&&(Lt=nt.attribute.outerRadius)}));var Ht,jt,$t,Kt=this.computeLayoutOuterRadius(Lt,at.width,at.height),te=at.line.line1MinLength,ne=Bt.width,re=Bt.height,ae=this.computeRadius(Kt,at.width,at.height),oe=this._computeLayoutRadius(re/2,at,lt),se=Math.abs(nt.center.x-ne/2),le=nt.center.y-re/2;if(Nt(ne/2,se))Ht=0,jt=1,$t=-le;else if(Nt(re/2,le))Ht=1,jt=0,$t=-se;else{var ue=-1/(le/se);Ht=ue,jt=-1,$t=le-ue*se}var ce,he,de=function(nt,at,lt,Rt,Bt,Lt){if(0===nt&&0===at||Lt<=0)return[];if(0===nt){var Ht=-lt/at,jt=Math.pow(Lt,2)-Math.pow(Ht-Bt,2);return jt<0?[]:0===jt?[{"x":Rt,"y":Ht}]:[{"x":Math.sqrt(jt)+Rt,"y":Ht},{"x":-Math.sqrt(jt)+Rt,"y":Ht}]}if(0===at){var $t=-lt/nt,Kt=Math.pow(Lt,2)-Math.pow($t-Rt,2);return Kt<0?[]:0===Kt?[{"x":$t,"y":Bt}]:[{"x":$t,"y":Math.sqrt(Kt)+Bt},{"x":$t,"y":-Math.sqrt(Kt)+Bt}]}var te=Math.pow(at/nt,2)+1,ne=2*((lt/nt+Rt)*(at/nt)-Bt),re=Math.pow(ne,2)-4*te*(Math.pow(lt/nt+Rt,2)+Math.pow(Bt,2)-Math.pow(Lt,2));if(re<0)return[];var ae=(-ne+Math.sqrt(re))/(2*te),oe=(-ne-Math.sqrt(re))/(2*te),se=-(at*ae+lt)/nt;return 0===re?[{"x":se,"y":ae}]:[{"x":se,"y":ae},{"x":-(at*oe+lt)/nt,"y":oe}]}(Ht,jt,$t,te+ae-oe,0,oe);de.length<2||(de[0].x>de[1].x&&de.reverse(),de[0].x<0?Nt(de[0].y,de[1].y)?Vt(nt.middleAngle,-Math.PI)&&Gt(nt.middleAngle,0)||Vt(nt.middleAngle,Math.PI)&&Gt(nt.middleAngle,2*Math.PI)?(ce=0,he=de[1].y+re/2):(ce=de[1].y+re/2,he=re):de[0].y<de[1].y?(ce=0,he=de[1].y+re/2):(ce=de[1].y+re/2,he=Bt.height):(ce=Math.min(de[0].y,de[1].y)+re/2,he=Math.max(de[0].y,de[1].y)+re/2),nt.labelYRange=[ce,he])}},{"key":"_computeLayoutRadius","value":function(nt,at,lt){var Rt=at,Bt=Rt.layoutArcGap,Lt=Rt.line.line1MinLength,Ht=0;lt.forEach((function(nt){nt.attribute.outerRadius>Ht&&(Ht=nt.attribute.outerRadius)}));var jt=this.computeLayoutOuterRadius(Ht,at.width,at.height),$t=this.computeRadius(jt,at.width,at.height)+Lt,Kt=$t-Bt;return Math.max((Math.pow(Kt,2)+Math.pow(nt,2))/(2*Kt),$t)}},{"key":"_findNeighborIndex","value":function(nt,at){for(var lt=at.originIndex,Rt=-1,Bt=-1,Lt=lt-1;Lt>=0;Lt--)if(nt[Lt].labelVisible){Rt=Lt;break}for(var Ht=lt+1;Ht<nt.length;Ht++)if(nt[Ht].labelVisible){Bt=Ht;break}return{"lastIndex":Rt,"nextIndex":Bt}}},{"key":"_twoWayShift","value":function(nt,at,lt,Rt){var Bt=lt.getLabelBounds().y1-at.getLabelBounds().y2;if(Gt(Bt,0)){var Lt=this._shiftY(nt,Rt,nt.length-1,-Bt);this._shiftY(nt,Lt,0,Bt/2)}}},{"key":"_restoreY","value":function(nt){var at,lt=s(nt);try{for(lt.s();!(at=lt.n()).done;){var Rt=at.value;Rt.labelVisible&&(Rt.labelPosition.y=Rt.lastLabelY)}}catch(nt){lt.e(nt)}finally{lt.f()}}},{"key":"_checkYRange","value":function(nt){var at,lt=s(nt);try{for(lt.s();!(at=lt.n()).done;){var Rt=at.value,Bt=Rt.labelYRange,Lt=Rt.labelPosition;if(Rt.labelVisible&&Bt&&(Gt(Lt.y,Bt[0])||Vt(Lt.y,Bt[1])))return!1}}catch(nt){lt.e(nt)}finally{lt.f()}return!0}},{"key":"_coverLabels","value":function(nt){if(!(nt.length<=1))for(var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne=nt[0].getLabelBounds(),re=1;re<nt.length;re++){var ae=nt[re].getLabelBounds();lt=ae,Rt=void 0,Bt=void 0,Lt=void 0,Ht=void 0,jt=void 0,$t=void 0,Kt=void 0,te=void 0,Rt=(at=ne).x1,Bt=at.y1,Lt=at.x2,Ht=at.y2,jt=lt.x1,$t=lt.y1,Kt=lt.x2,te=lt.y2,Rt<=jt&&Lt<=jt||Rt>=Kt&&Lt>=Kt||Bt<=$t&&Ht<=$t||Bt>=te&&Ht>=te?ne=ae:nt[re].labelVisible=!1}}},{"key":"_getLabelLinePoints","value":function(nt,at){return nt.attribute.points}},{"key":"_createLabelLine","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt=nt.attribute,$t=jt.line,Kt=void 0===$t?{}:$t,te=jt.visible,ne=y(e,"_createLabelLine",this,3)([nt,at]);if(ne&&(ne.setAttributes({"visible":null===(Bt=null!==(lt=Kt.visible&&te)&&void 0!==lt?lt:null===(Rt=nt.attribute)||void 0===Rt?void 0:Rt.visible)||void 0===Bt||Bt,"lineWidth":null!==(Ht=null===(Lt=Kt.style)||void 0===Lt?void 0:Lt.lineWidth)&&void 0!==Ht?Ht:1}),Kt.smooth&&ne.setAttributes({"curveType":"basis"}),"arc3d"===at.type&&at)){var re=at.attribute,ae=re.beta,oe=re.x,se=re.y;ne.setAttributes({"beta":ae,"anchor3d":[oe,se]})}return ne}},{"key":"computeRadius","value":function(nt,at,lt,Rt){return this.computeLayoutRadius(at||0,lt||0)*nt*(j(Rt)?1:Rt)}},{"key":"computeLayoutRadius","value":function(nt,at){return Math.min(nt/2,at/2)}},{"key":"_canPlaceInside","value":function(nt,at){return"inside"===this.attribute.position||"inside-center"===this.attribute.position}},{"key":"computeLayoutOuterRadius","value":function(nt,at,lt){return nt/(Math.min(at,lt)/2)}},{"key":"computeDatumRadius","value":function(nt,at,lt){var Rt=this.computeLayoutOuterRadius(lt,nt,at);return this.computeLayoutRadius(nt||0,at||0)*Rt}}])}(fO);AO.defaultAttributes={"coverEnable":!1,"spaceWidth":5,"layoutArcGap":6,"textStyle":{"visible":!0,"fontSize":14,"fontWeight":"normal","fillOpacity":1,"boundsPadding":[-1,0,-1,0],"ellipsis":!0},"position":"outside","line":{"visible":!0,"line1MinLength":20,"line2MinLength":10},"layout":{"align":"arc","strategy":"priority","tangentConstraint":!0}};var DL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},wO=function(nt){function e(nt,at){var lt;r(this,e);var Rt=nt.dataLabels,Bt=DL(nt,["dataLabels"]);return(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:Object.assign({"dataLabels":Rt},ft({},e.defaultAttributes,Bt))])).name="data-label",lt}return h(e,nt),o(e,[{"key":"render","value":function(){var nt,at=this,lt=this.attribute,Rt=lt.dataLabels,Bt=lt.size;if(Rt&&0!==Rt.length){var Lt=Bt||{},Ht=Lt.width,jt=void 0===Ht?0:Ht,$t=Lt.height,Kt=void 0===$t?0:$t,te=Lt.padding;if(jt&&Kt&&Q(Kt*jt)){this._componentMap||(this._componentMap=new Map);for(var ne=$I(jt,Kt,te),re=ne.bitmap(),ae=new Map,oe=this._componentMap,se=0;se<Rt.length;se++){var le=Rt[se],ue=SL(le.type)||fO;if(ue){var ce=le.baseMarkGroupName,he=le.type,de=null!==(nt=le.id)&&void 0!==nt?nt:"".concat(ce,"-").concat(he,"-").concat(se);"arc"===le.type&&(le.width=Bt.width,le.height=Bt.height);var fe=this._componentMap.get(de);fe?(fe.setBitmapTool(ne),fe.setBitmap(re),fe.setAttributes(le),ae.set(de,fe)):((fe=new ue(le)).setBitmap(re),fe.setBitmapTool(ne),this.add(fe),ae.set(de,fe))}}oe.forEach((function(nt,lt){ae.get(lt)||at.removeChild(nt)})),this._componentMap=ae}}}},{"key":"setLocation","value":function(nt){this.translateTo(nt.x,nt.y)}},{"key":"disableAnimation","value":function(){this._componentMap.forEach((function(nt){nt.disableAnimation()}))}},{"key":"enableAnimation","value":function(){this._componentMap.forEach((function(nt){nt.enableAnimation()}))}}])}(xS);function FL(nt,at,lt,Rt){var Bt="";if(!nt||0===at.length)return Bt;var Lt=at[0],Ht=Ge.distancePP(nt,Lt),jt=lt?0:1;return Rt?Bt+="M".concat(nt.x,",").concat(nt.y-Ht,"A").concat(Ht,",").concat(Ht,",0,0,").concat(jt,",").concat(nt.x,",").concat(nt.y+Ht,"A").concat(Ht,",").concat(Ht,",0,0,").concat(jt,",").concat(nt.x,",").concat(nt.y-Ht,"Z"):at.forEach((function(nt,at){0===at?Bt="M".concat(nt.x,",").concat(nt.y):Bt+="A".concat(Ht,",").concat(Ht,",0,0,").concat(jt,",").concat(nt.x,",").concat(nt.y)})),Bt}function zL(nt,at,lt){var Rt=lt.type,Bt=lt.closed,Lt=at.slice(0).reverse(),Ht="",jt="";if("line"===Rt&&lt.smoothLink&&lt.center){var $t=nt[0],Kt=Lt[0],te=lt.center;Ht=nB(nt,!!Bt),jt=nB(Lt,!!Bt);var ne=Ge.distancePP(Kt,te),re=Ge.distancePP($t,te);Ht+="A".concat(ne,",").concat(ne,",0,0,1,").concat(Kt.x,",").concat(Kt.y,"L").concat(Kt.x,",").concat(Kt.y),jt+="A".concat(re,",").concat(re,",0,0,0,").concat($t.x,",").concat($t.y)}else if("circle"===Rt){var ae=lt.center;Ht=FL(ae,nt,!1,!!Bt),jt=FL(ae,Lt,!0,!!Bt)}else"line"!==Rt&&"polygon"!==Rt||(Ht=nB(nt,!!Bt),jt=nB(Lt,!!Bt));return Bt?Ht+=jt:(Ht+=jt="L"+jt.substring(1),Ht+="Z"),Ht}wO.defaultAttributes={"pickable":!1};var MO=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="axis-grid",nt.data=[],nt}return h(e,nt),o(e,[{"key":"getInnerView","value":function(){return this._innerView}},{"key":"getPrevInnerView","value":function(){return this._prevInnerView}},{"key":"render","value":function(){this._prevInnerView=this._innerView&&$R(this._innerView),this.removeAllChild(!0),this._innerView=Hy.group({"x":0,"y":0,"pickable":!1}),this.add(this._innerView);var nt=this.attribute,at=nt.items,lt=nt.visible;at&&at.length&&!1!==lt&&(this.data=this._transformItems(at),this._renderGrid(this._innerView))}},{"key":"getVerticalCoord","value":function(nt,at,lt){return tB(nt,this.getVerticalVector(at,lt,nt))}},{"key":"_transformItems","value":function(nt){var at=this,lt=[];return nt.forEach((function(nt){var Rt;lt.push(Object.assign(Object.assign({},nt),{"point":at.getTickCoord(nt.value),"id":null!==(Rt=nt.id)&&void 0!==Rt?Rt:nt.label}))})),lt}},{"key":"_renderGrid","value":function(nt){(this.attribute.subGrid||{}).visible&&this._renderGridByType(!0,nt),this._renderGridByType(!1,nt)}},{"key":"_renderGridByType","value":function(nt,at){var lt=this,Rt=ft({},this.attribute,this.getGridAttribute(nt)),Bt=Rt.type,Lt=Rt.items,Ht=Rt.style,jt=Rt.closed,$t=Rt.alternateColor,Kt=Rt.depth,te=void 0===Kt?0:Kt,ne=nt?"".concat(nI.grid,"-sub"):"".concat(nI.grid);if(Lt.forEach((function(nt,Rt){var Lt=nt.id,$t=nt.points,Kt="";"line"===Bt||"polygon"===Bt?Kt=nB($t,!!jt):"circle"===Bt&&(Kt=FL(lt.attribute.center,$t,!1,!!jt));var re=Hy.path(Object.assign({"path":Kt,"z":te},H(Ht)?ft({},lt.skipDefault?null:e.defaultAttributes.style,Ht(nt,Rt)):Ht));re.name="".concat(ne,"-line"),re.id=lt._getNodeId("".concat(ne,"-path-").concat(Lt)),at.add(re)})),te&&"line"===Bt&&Lt.forEach((function(nt,Rt){var Bt=nt.id,Lt=nt.points,$t=[];$t.push(Lt[0]);var Kt=Lt[1].x-Lt[0].x,re=Lt[1].y-Lt[0].y,ae=Math.sqrt(Kt*Kt+re*re),oe=te/ae;$t.push({"x":Lt[0].x+Kt*oe,"y":Lt[0].y+re*oe});var se=nB($t,!!jt),le=fe($t[0].x-$t[1].x),ce=fe($t[0].y-$t[1].y),he=Hy.path(Object.assign({"path":se,"z":0,"alpha":le>ce?(Lt[1].x-Lt[0].x>0?-1:1)*ue/2:0,"beta":le<ce?-ue/2:0,"anchor3d":le>ce?[$t[0].x,0]:[0,$t[0].y]},H(Ht)?ft({},lt.skipDefault?null:e.defaultAttributes.style,Ht(nt,Rt)):Ht));he.name="".concat(ne,"-line"),he.id=lt._getNodeId("".concat(ne,"-path-").concat(Bt)),at.add(he)})),Lt.length>1&&$t){var re=X($t)?$t:[$t,"transparent"],f=function(nt){return re[nt%re.length]},ae=this.attribute.items,oe=ae[0],se=ae[ae.length-1],le=!Nt(oe.value,0)&&!Nt(se.value,0),ce=!Nt(oe.value,1)&&!Nt(se.value,1),he=[],de=oe.value>se.value;(de&&ce||!de&&le)&&he.push(this.getGridPointsByValue(de?1:0)),Lt.forEach((function(nt){he.push(nt.points)})),(de&&le||!de&&ce)&&he.push(this.getGridPointsByValue(de?0:1));for(var pe=0;pe<he.length-1;pe++){var ve=zL(he[pe],he[pe+1],Rt),Ae=Hy.path({"path":ve,"fill":f(pe)});Ae.name="".concat(ne,"-region"),Ae.id=this._getNodeId("".concat(ne,"-region-").concat(pe)),at.add(Ae)}}}},{"key":"_getNodeId","value":function(nt){return"".concat(this.id,"-").concat(nt)}},{"key":"_parseTickSegment","value":function(){var nt=1;return this.data.length>=2&&(nt=this.data[1].value-this.data[0].value),nt}},{"key":"_getPointsOfSubGrid","value":function(nt,at){var lt=this,Rt=this.data.length,Bt=[];return Rt>=2&&this.data.forEach((function(Rt){var Lt=Rt.value;if(!at){var Ht=Rt.value-nt/2;if(lt.isInValidValue(Ht))return;Lt=Ht}Bt.push({"value":Lt})})),Bt}},{"key":"release","value":function(){y(e,"release",this,3)([]),this._prevInnerView=null,this._innerView=null}}])}(xS);MO.defaultAttributes={"style":{"lineWidth":1,"stroke":"#999","strokeOpacity":1,"lineDash":[4,4]},"subGrid":{"visible":!1,"style":{"lineWidth":1,"stroke":"#999","strokeOpacity":1,"lineDash":[4,4]}}},xP(),TP();var TO=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},MO.defaultAttributes,nt),at])}return h(e,nt),o(e,[{"key":"_getGridPoint","value":function(nt,at){var lt;if("line"===nt){var Rt=this.attribute.length;lt=[at,this.getVerticalCoord(at,Rt,!0)]}else if("circle"===nt||"polygon"===nt){var Bt=this.attribute,Lt=Bt.center,Ht=Bt.sides,jt=void 0===Ht?6:Ht,$t=Bt.startAngle,Kt=void 0===$t?jP:$t,te=Bt.endAngle,ne=void 0===te?NP:te;lt=iB(Lt,jt,Ge.distancePP(Lt,at),Kt,ne)}return lt}},{"key":"getGridPointsByValue","value":function(nt){var at=this.getTickCoord(nt);return this._getGridPoint(this.attribute.type,at)}},{"key":"getGridAttribute","value":function(nt){var at,lt=this,Rt=this.attribute,Bt=Rt.type,Lt=Rt.alignWithLabel,Ht=void 0===Lt||Lt,jt=this._parseTickSegment(),$t=[];if(nt){var Kt=[],te=(at=ft({},this.attribute,this.attribute.subGrid)).count,ne=void 0===te?4:te;if(this.data.length>=2){for(var re=this._getPointsOfSubGrid(jt,Ht),ae=0;ae<re.length-1;ae++){var oe=re[ae],se=re[ae+1];Kt.push({"id":"sub-".concat(ae,"-0"),"points":this.getGridPointsByValue(oe.value),"datum":{}});for(var le=0;le<ne;le++){var ue=(le+1)/(ne+1),ce=(1-ue)*oe.value+ue*se.value;Kt.push({"id":"sub-".concat(ae,"-").concat(le+1),"points":this.getGridPointsByValue(ce),"datum":{}})}ae===re.length-2&&Kt.push({"id":"sub-".concat(ae,"-").concat(ne+1),"points":this.getGridPointsByValue(se.value),"datum":{}})}$t=Kt}}else{at=this.attribute;var he=[];this.data.forEach((function(nt){var at=nt.point;if(!Ht){var Rt=nt.value-jt/2;if(lt.isInValidValue(Rt))return;at=lt.getTickCoord(Rt)}he.push({"id":nt.label,"datum":nt,"points":lt._getGridPoint(Bt,at)})})),$t=he}return Object.assign(Object.assign({},at),{"items":$t})}}])}(MO);bt(TO,yI);var NL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};xP(),TP();var PO=function(nt){function e(nt,at){return r(this,e),n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},MO.defaultAttributes,nt),at])}return h(e,nt),o(e,[{"key":"getGridPointsByValue","value":function(nt){var at=this.getTickCoord(nt),lt=this.attribute,Rt=lt.radius,Bt=lt.innerRadius,Lt=void 0===Bt?0:Bt;return[at,this.getVerticalCoord(at,Rt-Lt,!0)]}},{"key":"getGridAttribute","value":function(nt){var at,lt=this,Rt=[],Bt=this.attribute,Lt=Bt.radius,Ht=Bt.innerRadius,jt=void 0===Ht?0:Ht,$t=Bt.startAngle,Kt=void 0===$t?jP:$t,te=Bt.endAngle,ne=void 0===te?NP:te,re=Bt.center,ae=Bt.subGrid,oe=NL(Bt,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),se=(oe||{}).alignWithLabel,le=void 0===se||se,ue=Lt-jt,ce=this._parseTickSegment();if(nt){at=ft({},oe,ae);var he=[],de=(ae||{}).count,fe=void 0===de?4:de,pe=this.data.length;if(pe>=2){for(var ve=this._getPointsOfSubGrid(ce,le),Ae=0;Ae<pe;Ae++){var we=ve[Ae],Ce=ve[Ae+1];he.push({"id":"sub-".concat(Ae,"-0"),"points":[this.getTickCoord(we.value),this.getVerticalCoord(this.getTickCoord(we.value),ue,!0)],"datum":{}});for(var je=0;je<fe;je++){var Ne=(je+1)/(fe+1),Ve=(1-Ne)*we.value+Ne*(Ce?Ce.value:le?1:we.value+ce),Ge=this.getTickCoord(Ve),ti=this.getVerticalCoord(Ge,ue,!0);he.push({"id":"sub-".concat(Ae,"-").concat(je+1),"points":[Ge,ti],"datum":{}})}}Math.abs(ne-Kt)%(2*Math.PI)==0&&he.push(he[0]),Rt=he}}else{at=oe;var li=[];(Math.abs(ne-Kt)%(2*Math.PI)==0?m(this.data).concat(this.data[0]):this.data).forEach((function(nt){var at=nt.point;if(!le){var Rt=nt.value-ce/2;if(lt.isInValidValue(Rt))return;at=lt.getTickCoord(Rt)}var Bt=lt.getVerticalCoord(at,ue,!0);li.push({"id":nt.id,"points":[at,Bt],"datum":nt})})),Rt=li}return Object.assign(Object.assign({},at),{"items":Rt,"center":re,"type":"line"})}}])}(MO);bt(PO,CI);var RO,IO="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",BO={"orient":"bottom","showDetail":"auto","brushSelect":!0,"zoomLock":!1,"minSpan":0,"maxSpan":1,"delayType":"throttle","delayTime":0,"realTime":!0,"backgroundStyle":{"fill":"white","stroke":"#D1DBEE","lineWidth":1,"cornerRadius":2},"dragMaskStyle":{"fill":"#B0C8F9","fillOpacity":.2},"backgroundChartStyle":{"area":{"visible":!0,"stroke":"#D1DBEE","lineWidth":1,"fill":"#F6F8FC"},"line":{"visible":!0,"stroke":"#D1DBEE","lineWidth":1}},"selectedBackgroundStyle":{"fill":"#B0C8F9","fillOpacity":.5},"selectedBackgroundChartStyle":{"area":{"visible":!0,"stroke":"#B0C8F9","lineWidth":1,"fill":"#fbb934"},"line":{"visible":!0,"stroke":"#fbb934","lineWidth":1}},"middleHandlerStyle":{"visible":!0,"background":{"size":8,"style":{"fill":"white","stroke":"#B0C8F9","cornerRadius":2}},"icon":{"size":6,"fill":"white","stroke":"#B0C8F9","symbolType":"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z","lineWidth":.5}},"startHandlerStyle":{"visible":!0,"triggerMinSize":0,"symbolType":IO,"fill":"white","stroke":"#B0C8F9","lineWidth":.5},"endHandlerStyle":{"visible":!0,"triggerMinSize":0,"symbolType":IO,"fill":"white","stroke":"#B0C8F9","lineWidth":.5},"startTextStyle":{"padding":4,"textStyle":{"fontSize":10,"fill":"#6F6F6F"}},"endTextStyle":{"padding":4,"textStyle":{"fontSize":10,"fill":"#6F6F6F"}}},WO={"horizontal":{"angle":0,"strokeBoundsBuffer":0,"boundsPadding":2,"pickMode":"imprecise","cursor":"ew-resize"},"vertical":{"angle":Math.PI/180*90,"cursor":"ns-resize","boundsPadding":2,"pickMode":"imprecise","strokeBoundsBuffer":0}};!function(nt){nt.startHandler="startHandler",nt.endHandler="endHandler",nt.middleHandler="middleHandler",nt.background="background"}(RO||(RO={}));var XL=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},UO={"debounce":qt,"throttle":Zt};fR(),BP(),FP(),vP(),wP();var YO,ZO,JO,eD,mD=function(nt){function e(nt,at){var lt;r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="dataZoom",lt._previewData=[],lt._activeState=!1,lt._activeCache={"startPos":{"x":0,"y":0},"lastPos":{"x":0,"y":0}},lt._layoutCache={"attPos":"x","attSize":"width","max":0},lt.state={"start":0,"end":1},lt._statePointToData=function(nt){return nt},lt._onHandlerPointerDown=function(nt,at){nt.stopPropagation(),"start"===at?(lt._activeTag=RO.startHandler,lt._activeItem=lt._startHandlerMask):"end"===at?(lt._activeTag=RO.endHandler,lt._activeItem=lt._endHandlerMask):"middleRect"===at?(lt._activeTag=RO.middleHandler,lt._activeItem=lt._middleHandlerRect):"middleSymbol"===at?(lt._activeTag=RO.middleHandler,lt._activeItem=lt._middleHandlerSymbol):"background"===at&&(lt._activeTag=RO.background,lt._activeItem=lt._background),lt._activeState=!0,lt._activeCache.startPos=lt.eventPosToStagePos(nt),lt._activeCache.lastPos=lt.eventPosToStagePos(nt),"browser"===ax.env&&(ax.addEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),ax.addEventListener("pointerup",lt._onHandlerPointerUp)),lt.addEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0})},lt._pointerMove=function(nt){nt.stopPropagation();var at=lt.attribute,Rt=at.start,Bt=at.end,Lt=at.brushSelect,Ht=at.realTime,jt=void 0===Ht||Ht,$t=lt.eventPosToStagePos(nt),Kt=lt._layoutCache,te=Kt.attPos,ne=Kt.max,re=($t[te]-lt._activeCache.lastPos[te])/ne,ae=lt.state,oe=ae.start,se=ae.end;lt._activeState&&(lt._activeTag===RO.middleHandler?lt.moveZoomWithMiddle((lt.state.start+lt.state.end)/2+re):lt._activeTag===RO.startHandler?oe+re>se?(se=(oe=se)+re,lt._activeTag=RO.endHandler):oe+=re:lt._activeTag===RO.endHandler&&(se+re<oe?(oe=(se=oe)+re,lt._activeTag=RO.startHandler):se+=re),lt._activeCache.lastPos=$t,Lt&&lt.renderDragMask()),oe=Math.min(Math.max(oe,0),1),se=Math.min(Math.max(se,0),1),Rt===oe&&Bt===se||(lt.setStateAttr(oe,se,!0),jt&&lt._dispatchEvent("change",{"start":oe,"end":se,"tag":lt._activeTag}))},lt._onHandlerPointerMove=0===lt.attribute.delayTime?lt._pointerMove:UO[lt.attribute.delayType](lt._pointerMove,lt.attribute.delayTime),lt._onHandlerPointerUp=function(nt){nt.preventDefault();var at=lt.attribute;at.start,at.end;var Rt=at.brushSelect;if(at.realTime,lt._activeState&&lt._activeTag===RO.background){var Bt=lt.eventPosToStagePos(nt);lt.backgroundDragZoom(lt._activeCache.startPos,Bt)}lt._activeState=!1,Rt&&lt.renderDragMask(),lt._dispatchEvent("change",{"start":lt.state.start,"end":lt.state.end,"tag":lt._activeTag}),"browser"===ax.env&&(ax.removeEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),ax.removeEventListener("pointerup",lt._onHandlerPointerUp)),lt.removeEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),lt.removeEventListener("pointerup",lt._onHandlerPointerUp)};var Rt=nt.position,Bt=nt.showDetail;return lt._activeCache.startPos=Rt,lt._activeCache.lastPos=Rt,lt._showText="auto"!==Bt&&Bt,lt.setPropsFromAttrs(),lt}return h(e,nt),o(e,[{"key":"setPropsFromAttrs","value":function(){var nt=this.attribute,at=nt.start,lt=nt.end,Rt=nt.orient,Bt=nt.previewData,Lt=nt.previewPointsX,Ht=nt.previewPointsY,jt=nt.previewPointsX1,$t=nt.previewPointsY1;at&&(this.state.start=at),lt&&(this.state.end=lt);var Kt=this.getLayoutAttrFromConfig(),te=Kt.width,ne=Kt.height;this._spanCache=this.state.end-this.state.start,this._isHorizontal="top"===Rt||"bottom"===Rt,this._layoutCache.max=this._isHorizontal?te:ne,this._layoutCache.attPos=this._isHorizontal?"x":"y",this._layoutCache.attSize=this._isHorizontal?"width":"height",Bt&&(this._previewData=Bt),H(Lt)&&(this._previewPointsX=Lt),H(Ht)&&(this._previewPointsY=Ht),H(jt)&&(this._previewPointsX1=jt),H($t)&&(this._previewPointsY1=$t)}},{"key":"setAttributes","value":function(nt,at){y(e,"setAttributes",this,3)([nt,at]),this.setPropsFromAttrs()}},{"key":"bindEvents","value":function(){var nt=this;if(this.attribute.disableTriggerEvent)this.setAttribute("childrenPickable",!1);else{var at=this.attribute,lt=at.showDetail,Rt=at.brushSelect;this._startHandlerMask&&this._startHandlerMask.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"start")})),this._endHandlerMask&&this._endHandlerMask.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"end")})),this._middleHandlerSymbol&&this._middleHandlerSymbol.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"middleSymbol")})),this._middleHandlerRect&&this._middleHandlerRect.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"middleRect")}));var Bt=Rt?"background":"middleRect";this._selectedBackground&&this._selectedBackground.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,Bt)})),Rt&&this._background&&this._background.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"background")})),Rt&&this._previewGroup&&this._previewGroup.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,"background")})),this._selectedPreviewGroup&&this._selectedPreviewGroup.addEventListener("pointerdown",(function(at){return nt._onHandlerPointerDown(at,Bt)})),this.addEventListener("pointerup",this._onHandlerPointerUp),this.addEventListener("pointerupoutside",this._onHandlerPointerUp),"auto"===lt&&(this.addEventListener("pointerenter",this._onHandlerPointerEnter),this.addEventListener("pointerleave",this._onHandlerPointerLeave))}}},{"key":"dragMaskSize","value":function(){var nt=this.attribute.position,at=this._layoutCache,lt=at.attPos,Rt=at.max;return this._activeCache.lastPos[lt]-nt[lt]>Rt?Rt+nt[lt]-this._activeCache.startPos[lt]:this._activeCache.lastPos[lt]-nt[lt]<0?nt[lt]-this._activeCache.startPos[lt]:this._activeCache.lastPos[lt]-this._activeCache.startPos[lt]}},{"key":"setStateAttr","value":function(nt,at,lt){var Rt=this.attribute,Bt=Rt.zoomLock,Lt=void 0!==Bt&&Bt,Ht=Rt.minSpan,jt=void 0===Ht?0:Ht,$t=Rt.maxSpan,Kt=void 0===$t?1:$t,te=at-nt;te!==this._spanCache&&(Lt||te<jt||te>Kt)||(this._spanCache=te,this.state.start=nt,this.state.end=at,lt&&this.setAttributes({"start":nt,"end":at}))}},{"key":"eventPosToStagePos","value":function(nt){var at,lt;return null!==(lt=null===(at=this.stage)||void 0===at?void 0:at.eventPointTransform(nt))&&void 0!==lt?lt:{"x":0,"y":0}}},{"key":"_onHandlerPointerEnter","value":function(nt){nt.stopPropagation(),this._showText=!0,this.renderText()}},{"key":"_onHandlerPointerLeave","value":function(nt){nt.stopPropagation(),this._showText=!1,this.renderText()}},{"key":"backgroundDragZoom","value":function(nt,at){var lt=this._layoutCache,Rt=lt.attPos,Bt=lt.max,Lt=this.attribute.position,Ht=nt[Rt]-Lt[Rt],jt=at[Rt]-Lt[Rt],$t=Math.min(Math.max(Math.min(Ht,jt)/Bt,0),1),Kt=Math.min(Math.max(Math.max(Ht,jt)/Bt,0),1);Math.abs($t-Kt)<.01?this.moveZoomWithMiddle($t):this.setStateAttr($t,Kt,!1)}},{"key":"moveZoomWithMiddle","value":function(nt){var at=nt-(this.state.start+this.state.end)/2;0!==at&&(at>0?this.state.end+at>1&&(at=1-this.state.end):at<0&&this.state.start+at<0&&(at=-this.state.start),this.setStateAttr(this.state.start+at,this.state.end+at,!1))}},{"key":"renderDragMask","value":function(){var nt=this.attribute.dragMaskStyle,at=this.getLayoutAttrFromConfig(),lt=at.position,Rt=at.width,Bt=at.height;this._isHorizontal?this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({"x":Ut(this.dragMaskSize()<0?this._activeCache.lastPos.x:this._activeCache.startPos.x,lt.x,lt.x+Rt),"y":lt.y,"width":this._activeState&&this._activeTag===RO.background&&Math.abs(this.dragMaskSize())||0,"height":Bt},nt),"rect"):this._dragMask=this._container.createOrUpdateChild("dragMask",Object.assign({"x":lt.x,"y":Ut(this.dragMaskSize()<0?this._activeCache.lastPos.y:this._activeCache.startPos.y,lt.y,lt.y+Bt),"width":Rt,"height":this._activeState&&this._activeTag===RO.background&&Math.abs(this.dragMaskSize())||0},nt),"rect")}},{"key":"isTextOverflow","value":function(nt,at,lt){if(!at)return!1;if(this._isHorizontal){if("start"===lt){if(at.x1<nt.x1)return!0}else if(at.x2>nt.x2)return!0}else if("start"===lt){if(at.y1<nt.y1)return!0}else if(at.y2>nt.y2)return!0;return!1}},{"key":"setTextAttr","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te=this.attribute,ne=te.startTextStyle,re=te.endTextStyle,ae=ne.formatMethod,oe=XL(ne,["formatMethod"]),se=re.formatMethod,le=XL(re,["formatMethod"]),ue=this.state,ce=ue.start,he=ue.end;this._startValue=this._statePointToData(ce),this._endValue=this._statePointToData(he);var de,fe,pe,ve,Ae=this.getLayoutAttrFromConfig(),we=Ae.position,Ce=Ae.width,je=Ae.height,Ne=ae?ae(this._startValue):this._startValue,Ve=se?se(this._endValue):this._endValue,Ge={"x1":we.x,"y1":we.y,"x2":we.x+Ce,"y2":we.y+je};this._isHorizontal?(de={"x":we.x+ce*Ce,"y":we.y+je/2},fe={"x":we.x+he*Ce,"y":we.y+je/2},pe={"textAlign":this.isTextOverflow(Ge,nt,"start")?"left":"right","textBaseline":null!==(Rt=null===(lt=null==oe?void 0:oe.textStyle)||void 0===lt?void 0:lt.textBaseline)&&void 0!==Rt?Rt:"middle"},ve={"textAlign":this.isTextOverflow(Ge,at,"end")?"right":"left","textBaseline":null!==(Lt=null===(Bt=null==le?void 0:le.textStyle)||void 0===Bt?void 0:Bt.textBaseline)&&void 0!==Lt?Lt:"middle"}):(de={"x":we.x+Ce/2,"y":we.y+ce*je},fe={"x":we.x+Ce/2,"y":we.y+he*je},pe={"textAlign":null!==(jt=null===(Ht=null==oe?void 0:oe.textStyle)||void 0===Ht?void 0:Ht.textAlign)&&void 0!==jt?jt:"center","textBaseline":this.isTextOverflow(Ge,nt,"start")?"top":"bottom"},ve={"textAlign":null!==(Kt=null===($t=null==le?void 0:le.textStyle)||void 0===$t?void 0:$t.textAlign)&&void 0!==Kt?Kt:"center","textBaseline":this.isTextOverflow(Ge,at,"end")?"bottom":"top"}),this._startText=this.maybeAddLabel(this._container,ft({},oe,{"text":Ne,"x":de.x,"y":de.y,"visible":this._showText,"pickable":!1,"childrenPickable":!1,"textStyle":pe}),"data-zoom-start-text-".concat(we)),this._endText=this.maybeAddLabel(this._container,ft({},le,{"text":Ve,"x":fe.x,"y":fe.y,"visible":this._showText,"pickable":!1,"childrenPickable":!1,"textStyle":ve}),"data-zoom-end-text-".concat(we))}},{"key":"renderText","value":function(){var nt=null,at=null;this.setTextAttr(nt,at),nt=this._startText.AABBBounds,at=this._endText.AABBBounds,this.setTextAttr(nt,at),nt=this._startText.AABBBounds,at=this._endText.AABBBounds;var lt=nt,Rt=lt.x1,Bt=lt.x2,Lt=lt.y1,Ht=lt.y2,jt=this.attribute.startTextStyle,$t=jt.dx,Kt=void 0===$t?0:$t,te=jt.dy,ne=void 0===te?0:te;if((new mi).set(Rt,Lt,Bt,Ht).intersects(at)){var re="bottom"===this.attribute.orient||"right"===this.attribute.orient?-1:1;this._isHorizontal?this._startText.setAttribute("dy",ne+re*Math.abs(at.y1-at.y2)):this._startText.setAttribute("dx",Kt+re*Math.abs(at.x1-at.x2))}else this._isHorizontal?this._startText.setAttribute("dy",ne):this._startText.setAttribute("dx",Kt)}},{"key":"getLayoutAttrFromConfig","value":function(){var nt,at,lt,Rt,Bt,Lt;if(this._layoutAttrFromConfig)return this._layoutAttrFromConfig;var Ht,jt,$t,Kt=this.attribute,te=Kt.position,ne=Kt.size,re=Kt.orient,ae=Kt.middleHandlerStyle,oe=void 0===ae?{}:ae,se=Kt.startHandlerStyle,le=void 0===se?{}:se,ue=Kt.endHandlerStyle,ce=void 0===ue?{}:ue,he=Kt.backgroundStyle,de=void 0===he?{}:he,fe=ne.width,pe=ne.height,ve=null!==(at=null===(nt=oe.background)||void 0===nt?void 0:nt.size)&&void 0!==at?at:10;oe.visible?this._isHorizontal?(Ht=fe,jt=pe-ve,$t={"x":te.x,"y":te.y+ve}):(Ht=fe-ve,jt=pe,$t={"x":te.x+("left"===re?ve:0),"y":te.y}):(Ht=fe,jt=pe,$t=te);var Ae=null!==(lt=le.size)&&void 0!==lt?lt:this._isHorizontal?jt:Ht,we=null!==(Rt=ce.size)&&void 0!==Rt?Rt:this._isHorizontal?jt:Ht;return le.visible&&(this._isHorizontal?(Ht-=(Ae+we)/2,$t={"x":$t.x+Ae/2,"y":$t.y}):(jt-=(Ae+we)/2,$t={"x":$t.x,"y":$t.y+Ae/2})),jt+=null!==(Bt=de.lineWidth/2)&&void 0!==Bt?Bt:1,Ht+=null!==(Lt=de.lineWidth/2)&&void 0!==Lt?Lt:1,this._layoutAttrFromConfig={"position":$t,"width":Ht,"height":jt},this._layoutAttrFromConfig}},{"key":"render","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he,de,fe,pe,ve,Ae,we,Ce,je,Ne,Ve,Ge,ti,li,hi;this._layoutAttrFromConfig=null;var di=this.attribute,fi=di.orient,pi=di.backgroundStyle,vi=di.backgroundChartStyle,mi=void 0===vi?{}:vi,_i=di.selectedBackgroundStyle,bi=void 0===_i?{}:_i,Mi=di.selectedBackgroundChartStyle,Ti=void 0===Mi?{}:Mi,Ii=di.middleHandlerStyle,Bi=void 0===Ii?{}:Ii,zi=di.startHandlerStyle,Wi=void 0===zi?{}:zi,Ui=di.endHandlerStyle,$i=void 0===Ui?{}:Ui,qi=di.brushSelect,Ki=di.zoomLock,Qi=this.state,Ji=Qi.start,dn=Qi.end,fn=this.getLayoutAttrFromConfig(),vn=fn.position,gn=fn.width,yn=fn.height,mn=null!==(nt=Wi.triggerMinSize)&&void 0!==nt?nt:40,_n=null!==(at=$i.triggerMinSize)&&void 0!==at?at:40,bn=this.createOrUpdateChild("dataZoom-container",{},"group");if(this._container=bn,this._background=bn.createOrUpdateChild("background",Object.assign(Object.assign({"x":vn.x,"y":vn.y,"width":gn,"height":yn,"cursor":qi?"crosshair":"auto"},pi),{"pickable":!Ki&&(null===(lt=pi.pickable)||void 0===lt||lt)}),"rect"),(null===(Rt=mi.line)||void 0===Rt?void 0:Rt.visible)&&this.setPreviewAttributes("line",bn),(null===(Bt=mi.area)||void 0===Bt?void 0:Bt.visible)&&this.setPreviewAttributes("area",bn),qi&&this.renderDragMask(),this._isHorizontal?this._selectedBackground=bn.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({"x":vn.x+Ji*gn,"y":vn.y,"width":(dn-Ji)*gn,"height":yn,"cursor":qi?"crosshair":"move"},bi),{"pickable":!Ki&&(null===(Lt=Ti.pickable)||void 0===Lt||Lt)}),"rect"):this._selectedBackground=bn.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({"x":vn.x,"y":vn.y+Ji*yn,"width":gn,"height":(dn-Ji)*yn,"cursor":qi?"crosshair":"move"},bi),{"pickable":!Ki&&(null===(Ht=bi.pickable)||void 0===Ht||Ht)}),"rect"),(null===(jt=Ti.line)||void 0===jt?void 0:jt.visible)&&this.setSelectedPreviewAttributes("line",bn),(null===($t=Ti.area)||void 0===$t?void 0:$t.visible)&&this.setSelectedPreviewAttributes("area",bn),this._isHorizontal){if(Bi.visible){var xn=(null===(Kt=Bi.background)||void 0===Kt?void 0:Kt.size)||10;this._middleHandlerRect=bn.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({"x":vn.x+Ji*gn,"y":vn.y-xn,"width":(dn-Ji)*gn,"height":xn},null===(te=Bi.background)||void 0===te?void 0:te.style),{"pickable":!Ki&&(null===(ae=null===(re=null===(ne=Bi.background)||void 0===ne?void 0:ne.style)||void 0===re?void 0:re.pickable)||void 0===ae||ae)}),"rect"),this._middleHandlerSymbol=bn.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({"x":vn.x+(Ji+dn)/2*gn,"y":vn.y-xn/2,"strokeBoundsBuffer":0,"angle":0,"symbolType":null!==(se=null===(oe=Bi.icon)||void 0===oe?void 0:oe.symbolType)&&void 0!==se?se:"square"},Bi.icon),{"pickable":!Ki&&(null===(le=Bi.icon.pickable)||void 0===le||le)}),"symbol")}this._startHandler=bn.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({"x":vn.x+Ji*gn,"y":vn.y+yn/2,"size":yn,"symbolType":null!==(ue=Wi.symbolType)&&void 0!==ue?ue:"square"},WO.horizontal),Wi),{"pickable":!Ki&&(null===(ce=Wi.pickable)||void 0===ce||ce)}),"symbol"),this._endHandler=bn.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({"x":vn.x+dn*gn,"y":vn.y+yn/2,"size":yn,"symbolType":null!==(he=$i.symbolType)&&void 0!==he?he:"square"},WO.horizontal),$i),{"pickable":!Ki&&(null===(de=$i.pickable)||void 0===de||de)}),"symbol");var kn=Math.max(this._startHandler.AABBBounds.width(),mn),Sn=Math.max(this._startHandler.AABBBounds.height(),mn),An=Math.max(this._endHandler.AABBBounds.width(),_n),wn=Math.max(this._endHandler.AABBBounds.height(),_n);this._startHandlerMask=bn.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({"x":vn.x+Ji*gn-kn/2,"y":vn.y+yn/2-Sn/2,"width":kn,"height":Sn,"fill":"white","fillOpacity":0,"zIndex":999},WO.horizontal),{"pickable":!Ki}),"rect"),this._endHandlerMask=bn.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({"x":vn.x+dn*gn-An/2,"y":vn.y+yn/2-wn/2,"width":An,"height":wn,"fill":"white","fillOpacity":0,"zIndex":999},WO.horizontal),{"pickable":!Ki}),"rect")}else{if(Bi.visible){var Cn=(null===(fe=Bi.background)||void 0===fe?void 0:fe.size)||10;this._middleHandlerRect=bn.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({"x":"left"===fi?vn.x-Cn:vn.x+gn,"y":vn.y+Ji*yn,"width":Cn,"height":(dn-Ji)*yn},null===(pe=Bi.background)||void 0===pe?void 0:pe.style),{"pickable":!Ki&&(null===(we=null===(Ae=null===(ve=Bi.background)||void 0===ve?void 0:ve.style)||void 0===Ae?void 0:Ae.pickable)||void 0===we||we)}),"rect"),this._middleHandlerSymbol=bn.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({"x":"left"===fi?vn.x-Cn/2:vn.x+gn+Cn/2,"y":vn.y+(Ji+dn)/2*yn,"angle":Math.PI/180*90,"symbolType":null!==(je=null===(Ce=Bi.icon)||void 0===Ce?void 0:Ce.symbolType)&&void 0!==je?je:"square","strokeBoundsBuffer":0},Bi.icon),{"pickable":!Ki&&(null===(Ve=null===(Ne=Bi.icon)||void 0===Ne?void 0:Ne.pickable)||void 0===Ve||Ve)}),"symbol")}this._startHandler=bn.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({"x":vn.x+gn/2,"y":vn.y+Ji*yn,"size":gn,"symbolType":null!==(Ge=Wi.symbolType)&&void 0!==Ge?Ge:"square"},WO.vertical),Wi),{"pickable":!Ki&&(null===(ti=Wi.pickable)||void 0===ti||ti)}),"symbol"),this._endHandler=bn.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({"x":vn.x+gn/2,"y":vn.y+dn*yn,"size":gn,"symbolType":null!==(li=$i.symbolType)&&void 0!==li?li:"square"},WO.vertical),$i),{"pickable":!Ki&&(null===(hi=$i.pickable)||void 0===hi||hi)}),"symbol");var Mn=Math.max(this._startHandler.AABBBounds.width(),mn),Tn=Math.max(this._startHandler.AABBBounds.height(),mn),En=Math.max(this._endHandler.AABBBounds.width(),_n),Pn=Math.max(this._endHandler.AABBBounds.height(),_n);this._startHandlerMask=bn.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({"x":vn.x+gn/2+Mn/2,"y":vn.y+Ji*yn-Tn/2,"width":Pn,"height":En,"fill":"white","fillOpacity":0,"zIndex":999},WO.vertical),{"pickable":!Ki}),"rect"),this._endHandlerMask=bn.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({"x":vn.x+gn/2+En/2,"y":vn.y+dn*yn-Pn/2,"width":Pn,"height":En,"fill":"white","fillOpacity":0,"zIndex":999},WO.vertical),{"pickable":!Ki}),"rect")}this._showText&&this.renderText()}},{"key":"computeBasePoints","value":function(){var nt,at,lt=this.attribute.orient,Rt=this.getLayoutAttrFromConfig(),Bt=Rt.position,Lt=Rt.width,Ht=Rt.height;return this._isHorizontal?(nt=[{"x":Bt.x,"y":Bt.y+Ht}],at=[{"x":Bt.x+Lt,"y":Bt.y+Ht}]):"left"===lt?(nt=[{"x":Bt.x+Lt,"y":Bt.y}],at=[{"x":Bt.x+Lt,"y":Bt.y+Ht}]):(nt=[{"x":Bt.x,"y":Bt.y+Ht}],at=[{"x":Bt.x,"y":Bt.y}]),{"basePointStart":nt,"basePointEnd":at}}},{"key":"simplifyPoints","value":function(nt){var at;return nt.length>1e4?function(nt,at,lt){return nt.length<=10||lt?nt:function(nt,at){for(var lt,Rt,Bt=nt[0].x,Lt=nt[0].y,Ht=[nt[0]],jt=1,$t=nt.length;jt<$t;jt++)(lt=nt[jt].x-Bt)*lt+(Rt=nt[jt].y-Lt)*Rt>at&&(Bt=nt[jt].x,Lt=nt[jt].y,Ht.push(nt[jt]));return nt[nt.length-1].x===Bt&&nt[nt.length-1].y===Lt||Ht.push(nt[nt.length-1]),Ht}(nt,void 0!==at?at*at:1)}(nt,null!==(at=this.attribute.tolerance)&&void 0!==at?at:this._previewData.length/1e4,!1):nt}},{"key":"getPreviewLinePoints","value":function(){var nt=this,at=this._previewData.map((function(at){return{"x":nt._previewPointsX&&nt._previewPointsX(at),"y":nt._previewPointsY&&nt._previewPointsY(at)}}));if(0===at.length)return at;at=this.simplifyPoints(at);var lt=this.computeBasePoints(),Rt=lt.basePointStart,Bt=lt.basePointEnd;return Rt.concat(at).concat(Bt)}},{"key":"getPreviewAreaPoints","value":function(){var nt=this,at=this._previewData.map((function(at){return{"x":nt._previewPointsX&&nt._previewPointsX(at),"y":nt._previewPointsY&&nt._previewPointsY(at),"x1":nt._previewPointsX1&&nt._previewPointsX1(at),"y1":nt._previewPointsY1&&nt._previewPointsY1(at)}}));if(0===at.length)return at;at=this.simplifyPoints(at);var lt=this.computeBasePoints(),Rt=lt.basePointStart,Bt=lt.basePointEnd;return Rt.concat(at).concat(Bt)}},{"key":"setPreviewAttributes","value":function(nt,at){this._previewGroup||(this._previewGroup=at.createOrUpdateChild("previewGroup",{"pickable":!1},"group")),"line"===nt?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{"curveType":"basis"},"area");var lt=this.attribute.backgroundChartStyle,Rt=void 0===lt?{}:lt;"line"===nt&&this._previewLine.setAttributes(Object.assign({"points":this.getPreviewLinePoints(),"curveType":"basis","pickable":!1},Rt.line)),"area"===nt&&this._previewArea.setAttributes(Object.assign({"points":this.getPreviewAreaPoints(),"curveType":"basis","pickable":!1},Rt.area))}},{"key":"setSelectedPreviewAttributes","value":function(nt,at){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=at.createOrUpdateChild("selectedPreviewGroupClip",{"pickable":!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group")),"line"===nt?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{"curveType":"basis"},"area");var lt=this.attribute.selectedBackgroundChartStyle,Rt=void 0===lt?{}:lt,Bt=this.state,Lt=Bt.start,Ht=Bt.end,jt=this.getLayoutAttrFromConfig(),$t=jt.position,Kt=jt.width,te=jt.height;this._selectedPreviewGroupClip.setAttributes({"x":this._isHorizontal?$t.x+Lt*Kt:$t.x,"y":this._isHorizontal?$t.y:$t.y+Lt*te,"width":this._isHorizontal?(Ht-Lt)*Kt:Kt,"height":this._isHorizontal?te:(Ht-Lt)*te,"clip":!0,"pickable":!1}),this._selectedPreviewGroup.setAttributes({"x":-(this._isHorizontal?$t.x+Lt*Kt:$t.x),"y":-(this._isHorizontal?$t.y:$t.y+Lt*te),"width":this._isHorizontal?(Ht-Lt)*Kt:Kt,"height":this._isHorizontal?te:(Ht-Lt)*te,"pickable":!1}),"line"===nt&&this._selectedPreviewLine.setAttributes(Object.assign({"points":this.getPreviewLinePoints(),"curveType":"basis","pickable":!1},Rt.line)),"area"===nt&&this._selectedPreviewArea.setAttributes(Object.assign({"points":this.getPreviewAreaPoints(),"curveType":"basis","pickable":!1},Rt.area))}},{"key":"maybeAddLabel","value":function(nt,at,lt){var Rt=this.find((function(nt){return nt.name===lt}),!0);return Rt?Rt.setAttributes(at):(Rt=new AR(at)).name=lt,nt.add(Rt),Rt}},{"key":"setStartAndEnd","value":function(nt,at){var lt=this.attribute,Rt=lt.start,Bt=lt.end;N(nt)&&N(at)&&(nt!==this.state.start||at!==this.state.end)&&(this.state.start=nt,this.state.end=at,Rt===this.state.start&&Bt===this.state.end||(this.setStateAttr(nt,at,!0),this._dispatchEvent("change",{"start":nt,"end":at,"tag":this._activeTag})))}},{"key":"setPreviewData","value":function(nt){this._previewData=nt}},{"key":"setText","value":function(nt,at){"start"===at?this._startText.setAttribute("text",nt):this._endText.setAttribute("text",nt)}},{"key":"getStartValue","value":function(){return this._startValue}},{"key":"getEndTextValue","value":function(){return this._endValue}},{"key":"getMiddleHandlerSize","value":function(){var nt,at,lt,Rt,Bt=this.attribute.middleHandlerStyle,Lt=void 0===Bt?{}:Bt,Ht=null!==(at=null===(nt=Lt.background)||void 0===nt?void 0:nt.size)&&void 0!==at?at:10,jt=null!==(Rt=null===(lt=Lt.icon)||void 0===lt?void 0:lt.size)&&void 0!==Rt?Rt:10;return Math.max.apply(Math,[Ht].concat(m(xt(jt))))}},{"key":"setPreviewPointsX","value":function(nt){H(nt)&&(this._previewPointsX=nt)}},{"key":"setPreviewPointsY","value":function(nt){H(nt)&&(this._previewPointsY=nt)}},{"key":"setPreviewPointsX1","value":function(nt){H(nt)&&(this._previewPointsX1=nt)}},{"key":"setPreviewPointsY1","value":function(nt){H(nt)&&(this._previewPointsY1=nt)}},{"key":"setStatePointToData","value":function(nt){H(nt)&&(this._statePointToData=nt)}}])}(xS);function tD(){xP(),fR()}mD.defaultAttributes=BO,function(nt){nt.start="start",nt.startTop="startTop",nt.startBottom="startBottom",nt.insideStart="insideStart",nt.insideStartTop="insideStartTop",nt.insideStartBottom="insideStartBottom",nt.middle="middle",nt.insideMiddleTop="insideMiddleTop",nt.insideMiddleBottom="insideMiddleBottom",nt.end="end",nt.endTop="endTop",nt.endBottom="endBottom",nt.insideEnd="insideEnd",nt.insideEndTop="insideEndTop",nt.insideEndBottom="insideEndBottom"}(YO||(YO={})),function(nt){nt.left="left",nt.right="right",nt.top="top",nt.bottom="bottom",nt.topLeft="topLeft",nt.topRight="topRight",nt.bottomLeft="bottomLeft",nt.bottomRight="bottomRight",nt.middle="middle",nt.insideLeft="insideLeft",nt.insideRight="insideRight",nt.insideTop="insideTop",nt.insideBottom="insideBottom",nt.insideTopLeft="insideTopLeft",nt.insideTopRight="insideTopRight",nt.insideBottomLeft="insideBottomLeft",nt.insideBottomRight="insideBottomRight"}(ZO||(ZO={})),function(nt){nt.arcInnerStart="arcInnerStart",nt.arcInnerEnd="arcInnerEnd",nt.arcInnerMiddle="arcInnerMiddle",nt.arcOuterStart="arcOuterStart",nt.arcOuterEnd="arcOuterEnd",nt.arcOuterMiddle="arcOuterMiddle",nt.center="center"}(JO||(JO={})),function(nt){nt.top="top",nt.bottom="bottom",nt.middle="middle",nt.insideTop="insideTop",nt.insideBottom="insideBottom",nt.insideMiddle="insideMiddle"}(eD||(eD={}));var _D=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="marker",nt._onHover=function(at){nt._lastHover=oB(at,nt._container,nt._lastHover)},nt._onUnHover=function(at){nt._lastHover=sB(0,nt._container,nt._lastHover)},nt._onClick=function(at){nt._lastSelect=lB(at,nt._container,nt._lastSelect)},nt}return h(e,nt),o(e,[{"key":"transAnimationConfig","value":function(){var nt,at,lt;if(!1!==this.attribute.animation){var Rt=V(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={"enter":ft({},this.defaultUpdateAnimation,Rt,null!==(nt=this.attribute.animationEnter)&&void 0!==nt?nt:{}),"exit":ft({},this.defaultExitAnimation,Rt,null!==(at=this.attribute.animationExit)&&void 0!==at?at:{}),"update":ft({},this.defaultUpdateAnimation,Rt,null!==(lt=this.attribute.animationUpdate)&&void 0!==lt?lt:{})}}}},{"key":"setAttribute","value":function(nt,at,lt){y(e,"setAttribute",this,3)([nt,at,lt]),"visible"===nt&&this.render()}},{"key":"_bindEvent","value":function(){var nt,at,lt;if(this.attribute.interactive){var Rt=this.attribute,Bt=Rt.hover,Lt=Rt.select;Bt&&(null===(nt=this._container)||void 0===nt||nt.addEventListener("pointermove",this._onHover),null===(at=this._container)||void 0===at||at.addEventListener("pointerout",this._onUnHover)),Lt&&(null===(lt=this._container)||void 0===lt||lt.addEventListener("pointerdown",this._onClick))}}},{"key":"_releaseEvent","value":function(){var nt,at,lt;null===(nt=this._container)||void 0===nt||nt.removeEventListener("pointermove",this._onHover),null===(at=this._container)||void 0===at||at.removeEventListener("pointerout",this._onUnHover),null===(lt=this._container)||void 0===lt||lt.removeEventListener("pointerdown",this._onClick)}},{"key":"_initContainer","value":function(){var nt,at,lt,Rt=this.attribute,Bt=Rt.limitRect,Lt=void 0===Bt?{}:Bt;if(Rt.clipInRange){var Ht=Hy.group(Object.assign(Object.assign({},Lt),{"clip":!0,"pickable":!1}));lt=Hy.group({"x":-(null!==(nt=Lt.x)&&void 0!==nt?nt:0),"y":-(null!==(at=Lt.y)&&void 0!==at?at:0),"pickable":!1}),Ht.add(lt),this._containerClip=Ht,this.add(Ht)}else lt=Hy.group({"x":0,"y":0,"pickable":!1}),this.add(lt);lt.name="marker-container",this._container=lt}},{"key":"_updateContainer","value":function(){var nt,at,lt=this.attribute,Rt=lt.limitRect,Bt=void 0===Rt?{}:Rt,Lt=lt.clipInRange;this._containerClip&&this._containerClip.setAttributes(Object.assign({},Bt)),this._container.setAttributes({"x":Lt?-(null!==(nt=Bt.x)&&void 0!==nt?nt:0):0,"y":Lt?-(null!==(at=Bt.y)&&void 0!==at?at:0):0})}},{"key":"render","value":function(){var nt;this.transAnimationConfig(),this.setAttribute("pickable",!1);var at=null===(nt=this.attribute.visible)||void 0===nt||nt;!1===this.attribute.interactive&&this.setAttribute("childrenPickable",!1),at&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}},{"key":"release","value":function(){this.markerAnimate("exit"),y(e,"release",this,3)([]),this._releaseEvent(),this._container=null}}])}(xS);function iD(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t;if(nt){null===(Bt=null==nt?void 0:nt.animates)||void 0===Bt||Bt.forEach((function(nt){return nt.stop("end")}));var Kt=null!==(Ht=null===(Lt=nt.attribute)||void 0===Lt?void 0:Lt.fillOpacity)&&void 0!==Ht?Ht:1,te=null!==($t=null===(jt=nt.attribute)||void 0===jt?void 0:jt.strokeOpacity)&&void 0!==$t?$t:1;nt.setAttributes({"fillOpacity":0,"strokeOpacity":0}),nt.animate().wait(at).to({"fillOpacity":Kt,"strokeOpacity":te},lt,Rt)}}function nD(nt,at,lt,Rt){nt&&(iD(nt.startSymbol,at,lt,Rt),nt.lines.forEach((function(nt){return iD(nt,at,lt,Rt)})),iD(nt.line,at,lt,Rt),iD(nt.endSymbol,at,lt,Rt))}function rD(nt,at,lt,Rt){nt&&(iD(nt.getTextShape(),at,lt,Rt),iD(nt.getBgRect(),at,lt,Rt))}function aD(nt,at,lt,Rt){var Bt,Lt,Ht,jt;nt&&(nt.setAttributes({"fillOpacity":null!==(Lt=null===(Bt=nt.attribute)||void 0===Bt?void 0:Bt.fillOpacity)&&void 0!==Lt?Lt:1,"strokeOpacity":null!==(jt=null===(Ht=nt.attribute)||void 0===Ht?void 0:Ht.strokeOpacity)&&void 0!==jt?jt:1}),nt.animate().wait(at).to({"fillOpacity":0,"strokeOpacity":0},lt,Rt))}function oD(nt,at,lt,Rt){nt&&(aD(nt.startSymbol,at,lt,Rt),nt.lines.forEach((function(nt){return aD(nt,at,lt,Rt)})),aD(nt.line,at,lt,Rt),aD(nt.endSymbol,at,lt,Rt))}function sD(nt,at,lt,Rt){nt&&(aD(nt.getTextShape(),at,lt,Rt),aD(nt.getBgRect(),at,lt,Rt))}function lD(nt,at,lt,Rt,Bt){var Lt=.1*lt,Ht=.7*lt,jt=.1*lt,$t=.1*lt;iD(nt.startSymbol,Rt,Lt,Bt),nt.lines.forEach((function(nt){return nt.setAttribute("clipRange",0)})),nt.lines.forEach((function(at,lt){var jt=Ht/nt.lines.length;at.animate().wait(Rt+Lt+lt*jt).to({"clipRange":1},jt,Bt)})),iD(nt.endSymbol,Rt+Lt+Ht,jt,Bt),iD(at.getTextShape(),Rt+Lt+Ht+jt,$t,Bt),iD(at.getBgRect(),Rt+Lt+Ht+jt,$t,Bt)}function uD(nt,at,lt,Rt,Bt){nD(nt,Rt,lt,Bt),rD(at,Rt,lt,Bt)}function cD(nt,at,lt,Rt,Bt){iD(nt,Rt,lt,Bt),rD(at,Rt,lt,Bt)}function hD(nt,at,lt,Rt,Bt){iD(nt,Rt,lt,Bt),rD(at,Rt,lt,Bt)}function dD(nt,at,lt,Rt,Bt,Lt){var Ht;nD(nt,Bt,Rt,Lt),iD(at,Bt,Rt,Lt),(null===(Ht=lt.getTextShape)||void 0===Ht?void 0:Ht.call(lt))?rD(lt,Bt,Rt,Lt):iD(lt,Bt,Rt,Lt)}function pD(nt,at,lt,Rt,Bt,Lt){var Ht,jt=.1*Rt,$t=.65*Rt,Kt=.05*Rt,te=.1*Rt,ne=.1*Rt;iD(nt.startSymbol,Bt,jt,Lt),nt.lines.forEach((function(nt){return nt.setAttribute("clipRange",0)})),nt.lines.forEach((function(at,lt){var Rt=$t/nt.lines.length;at.animate().wait(Bt+jt+lt*Rt).to({"clipRange":1},Rt,Lt)})),iD(at,Bt+jt+$t,Kt,Lt),iD(nt.endSymbol,Bt+jt+$t+Kt,te,Lt),(null===(Ht=lt.getTextShape)||void 0===Ht?void 0:Ht.call(lt))?(iD(lt.getTextShape(),Bt+jt+$t+Kt+te,ne,Lt),iD(lt.getBgRect(),Bt+jt+$t+te,ne,Lt)):iD(lt,Bt+jt+$t+te,ne,Lt)}function fD(nt,at,lt,Rt){var Bt=lt.enter,Lt=lt.update,Ht=lt.exit;if("enter"===Rt){var jt=Bt.type,$t=Bt.duration,Kt=Bt.delay,te=Bt.easing;"clipIn"===jt?lD(nt,at,$t,Kt,te):"fadeIn"===jt&&uD(nt,at,$t,Kt,te)}else if("update"===Rt){var ne=Lt.type,re=Lt.duration,ae=Lt.delay,oe=Lt.easing;"clipIn"===ne?lD(nt,at,re,ae,oe):"fadeIn"===ne&&uD(nt,at,re,ae,oe)}else"exit"===Rt&&function(nt,at,lt,Rt,Bt){oD(nt,Rt,lt,Bt),sD(at,Rt,lt,Bt)}(nt,at,Ht.duration,Ht.delay,Ht.easing)}function vD(nt,at,lt,Rt){var Bt=lt.enter,Lt=lt.update,Ht=lt.exit;if("enter"===Rt){var jt=Bt.type,$t=Bt.duration,Kt=Bt.delay,te=Bt.easing;"fadeIn"===jt&&cD(nt,at,$t,Kt,te)}else if("update"===Rt){var ne=Lt.type,re=Lt.duration,ae=Lt.delay,oe=Lt.easing;"fadeIn"===ne&&cD(nt,at,re,ae,oe)}else"exit"===Rt&&function(nt,at,lt,Rt,Bt){aD(nt,Rt,lt,Bt),sD(at,Rt,lt,Bt)}(nt,at,Ht.duration,Ht.delay,Ht.easing)}function gD(nt,at,lt,Rt){var Bt=lt.enter,Lt=lt.update,Ht=lt.exit;if("enter"===Rt){var jt=Bt.type,$t=Bt.duration,Kt=Bt.delay,te=Bt.easing;"fadeIn"===jt&&hD(nt,at,$t,Kt,te)}else if("update"===Rt){var ne=Lt.type,re=Lt.duration,ae=Lt.delay,oe=Lt.easing;"fadeIn"===ne&&hD(nt,at,re,ae,oe)}else"exit"===Rt&&function(nt,at,lt,Rt,Bt){aD(nt,Rt,lt,Bt),sD(at,Rt,lt,Bt)}(nt,at,Ht.duration,Ht.delay,Ht.easing)}function yD(nt,at,lt,Rt){var Bt=g(nt,2),Lt=Bt[0],Ht=Bt[1],jt=lt.enter,$t=lt.update,Kt=lt.exit;if("enter"===Rt){var te=jt.type,ne=jt.duration,re=jt.delay,ae=jt.easing;"fadeIn"===te?dD(Lt,Ht,at,ne,re,ae):"callIn"===te&&pD(Lt,Ht,at,ne,re,ae)}else if("update"===Rt){var oe=$t.type,se=$t.duration,le=$t.delay,ue=$t.easing;"fadeIn"===oe?dD(Lt,Ht,at,se,le,ue):"callIn"===oe&&pD(Lt,Ht,at,se,le,ue)}else"exit"===Rt&&function(nt,at,lt,Rt,Bt,Lt){var Ht;oD(nt,Bt,Rt,Lt),aD(at,Bt,Rt,Lt),(null===(Ht=lt.getTextShape)||void 0===Ht?void 0:Ht.call(lt))?sD(lt,Bt,Rt,Lt):aD(lt,Bt,Rt,Lt)}(Lt,Ht,at,Kt.duration,Kt.delay,Kt.easing)}var bD={"type":"clipIn","duration":500,"easing":"linear","delay":0},xD={"type":"fadeIn","duration":500,"easing":"linear","delay":0},kD={"type":"callIn","duration":500,"easing":"linear","delay":0},SD={"type":"fadeOut","duration":500,"easing":"linear","delay":0},AD=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="markCommonLine",nt.defaultUpdateAnimation=bD,nt.defaultExitAnimation=SD,nt}return h(e,nt),o(e,[{"key":"getLine","value":function(){return this._line}},{"key":"getLabel","value":function(){return this._label}},{"key":"setLabelPos","value":function(){var nt=this.attribute,at=nt.label,lt=void 0===at?{}:at,Rt=nt.limitRect,Bt=lt.position,Lt=lt.confine,Ht=lt.autoRotate,jt=this.getPointAttrByPosition(Bt),$t=Bt.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(this._label.setAttributes(Object.assign(Object.assign({},jt.position),{"angle":Ht?this.getRotateByAngle(jt.angle):0,"textStyle":Object.assign(Object.assign({},this.getTextStyle(Bt,$t,Ht)),lt.textStyle)})),Rt&&Lt){var Kt=Rt.x,te=Rt.y,ne=Rt.width,re=Rt.height;pR(this._label,{"x1":Kt,"y1":te,"x2":Kt+ne,"y2":te+re})}}},{"key":"initMarker","value":function(nt){var at=this.attribute,lt=at.label,Rt=at.state,Bt=this.createSegment();Bt.name="mark-common-line-line",this._line=Bt,nt.add(Bt);var Lt=new AR(Object.assign(Object.assign({},lt),{"state":{"panel":ft({},GP,null==Rt?void 0:Rt.labelBackground),"text":ft({},GP,null==Rt?void 0:Rt.label)}}));Lt.name="mark-common-line-label",this._label=Lt,nt.add(Lt),this.setLabelPos()}},{"key":"updateMarker","value":function(){var nt=this.attribute,at=nt.label,lt=nt.state;this.setLineAttributes(),this._label&&(this._label.setAttributes(Object.assign(Object.assign({"dx":0,"dy":0},at),{"state":{"panel":ft({},GP,null==lt?void 0:lt.labelBackground),"text":ft({},GP,null==lt?void 0:lt.label)}})),this.setLabelPos())}}])}(_D),wD=.001,CD={"interactive":!0,"startSymbol":{"visible":!1,"symbolType":"triangle","size":12,"fill":"rgba(46, 47, 50)","lineWidth":0},"endSymbol":{"visible":!0,"symbolType":"triangle","size":12,"fill":"rgba(46, 47, 50)","lineWidth":0},"label":{"position":YO.end,"refX":0,"refY":0,"refAngle":0,"textStyle":{"fill":"#fff","stroke":"#fff","lineWidth":0,"fontSize":10,"fontWeight":"normal","fontStyle":"normal"},"padding":[2,2,4,4],"panel":{"visible":!0,"cornerRadius":0,"fill":"rgb(48, 115, 242)","fillOpacity":.8}},"lineStyle":{"stroke":"#b2bacf","lineWidth":1,"lineDash":[2]}},MD={"postiveXAxis":{"start":{"textAlign":"left","textBaseline":"middle"},"startTop":{"textAlign":"left","textBaseline":"bottom"},"startBottom":{"textAlign":"left","textBaseline":"top"},"insideStart":{"textAlign":"right","textBaseline":"middle"},"insideStartTop":{"textAlign":"right","textBaseline":"bottom"},"insideStartBottom":{"textAlign":"right","textBaseline":"top"},"middle":{"textAlign":"center","textBaseline":"middle"},"insideMiddleTop":{"textAlign":"center","textBaseline":"bottom"},"insideMiddleBottom":{"textAlign":"center","textBaseline":"top"},"end":{"textAlign":"left","textBaseline":"middle"},"endTop":{"textAlign":"left","textBaseline":"bottom"},"endBottom":{"textAlign":"left","textBaseline":"top"},"insideEnd":{"textAlign":"right","textBaseline":"middle"},"insideEndTop":{"textAlign":"right","textBaseline":"bottom"},"insideEndBottom":{"textAlign":"right","textBaseline":"top"}},"negativeXAxis":{"start":{"textAlign":"right","textBaseline":"middle"},"startTop":{"textAlign":"right","textBaseline":"bottom"},"startBottom":{"textAlign":"right","textBaseline":"top"},"insideStart":{"textAlign":"left","textBaseline":"middle"},"insideStartTop":{"textAlign":"left","textBaseline":"bottom"},"insideStartBottom":{"textAlign":"left","textBaseline":"top"},"middle":{"textAlign":"center","textBaseline":"middle"},"insideMiddleTop":{"textAlign":"center","textBaseline":"bottom"},"insideMiddleBottom":{"textAlign":"center","textBaseline":"top"},"end":{"textAlign":"right","textBaseline":"middle"},"endTop":{"textAlign":"right","textBaseline":"bottom"},"endBottom":{"textAlign":"right","textBaseline":"top"},"insideEnd":{"textAlign":"left","textBaseline":"middle"},"insideEndTop":{"textAlign":"left","textBaseline":"bottom"},"insideEndBottom":{"textAlign":"left","textBaseline":"top"}}},TD={"interactive":!0,"startSymbol":{"visible":!1,"symbolType":"triangle","size":12,"fill":"rgba(46, 47, 50)","lineWidth":0},"endSymbol":{"visible":!0,"symbolType":"triangle","size":12,"fill":"rgba(46, 47, 50)","lineWidth":0},"label":{"position":JO.arcOuterMiddle,"refX":0,"refY":0,"refAngle":0,"textStyle":{"fill":"#fff","stroke":"#fff","lineWidth":0,"fontSize":10,"fontWeight":"normal","fontStyle":"normal"},"padding":[2,2,4,4],"panel":{"visible":!0,"cornerRadius":0,"fill":"rgb(48, 115, 242)","fillOpacity":.8}},"lineStyle":{"stroke":"#b2bacf","lineWidth":1,"lineDash":[2]}},ED={"interactive":!0,"label":{"position":ZO.right,"textStyle":{"fill":"#fff","stroke":"#fff","lineWidth":0,"fontSize":10,"fontWeight":"normal","fontStyle":"normal"},"padding":[2,2,4,4],"panel":{"visible":!0,"cornerRadius":0,"fill":"rgb(48, 115, 242)","fillOpacity":.8}},"areaStyle":{"fill":"#b2bacf","visible":!0}},PD={"interactive":!0,"label":{"position":JO.arcOuterMiddle,"textStyle":{"fill":"#fff","stroke":"#fff","lineWidth":0,"fontSize":10,"fontWeight":"normal","fontStyle":"normal"},"padding":[2,2,4,4],"panel":{"visible":!0,"cornerRadius":0,"fill":"rgb(48, 115, 242)","fillOpacity":.8}},"areaStyle":{"fill":"#b2bacf","visible":!0}},RD={"arcInnerStart":{"textAlign":"center","textBaseline":"bottom"},"arcInnerEnd":{"textAlign":"center","textBaseline":"bottom"},"arcInnerMiddle":{"textAlign":"center","textBaseline":"bottom"},"arcOuterStart":{"textAlign":"center","textBaseline":"top"},"arcOuterEnd":{"textAlign":"center","textBaseline":"top"},"arcOuterMiddle":{"textAlign":"center","textBaseline":"top"},"center":{"textAlign":"center","textBaseline":"middle"}},ID={"left":{"textAlign":"right","textBaseline":"middle"},"insideLeft":{"textAlign":"left","textBaseline":"middle"},"right":{"textAlign":"left","textBaseline":"middle"},"insideRight":{"textAlign":"right","textBaseline":"middle"},"top":{"textAlign":"center","textBaseline":"bottom"},"insideTop":{"textAlign":"center","textBaseline":"top"},"bottom":{"textAlign":"center","textBaseline":"top"},"insideBottom":{"textAlign":"center","textBaseline":"bottom"},"middle":{"textAlign":"center","textBaseline":"middle"},"topLeft":{"textAlign":"right","textBaseline":"top"},"insideTopLeft":{"textAlign":"left","textBaseline":"top"},"topRight":{"textAlign":"left","textBaseline":"top"},"insideTopRight":{"textAlign":"right","textBaseline":"top"},"bottomLeft":{"textAlign":"right","textBaseline":"bottom"},"insideBottomLeft":{"textAlign":"left","textBaseline":"bottom"},"bottomRight":{"textAlign":"left","textBaseline":"bottom"},"insideBottomRight":{"textAlign":"right","textBaseline":"bottom"}},OD={"postiveXAxis":{"top":{"textAlign":"left","textBaseline":"bottom"},"bottom":{"textAlign":"left","textBaseline":"top"},"middle":{"textAlign":"left","textBaseline":"middle"},"insideTop":{"textAlign":"right","textBaseline":"bottom"},"insideBottom":{"textAlign":"right","textBaseline":"top"},"insideMiddle":{"textAlign":"right","textBaseline":"middle"}},"negativeXAxis":{"top":{"textAlign":"right","textBaseline":"bottom"},"bottom":{"textAlign":"right","textBaseline":"top"},"middle":{"textAlign":"right","textBaseline":"middle"},"insideTop":{"textAlign":"left","textBaseline":"bottom"},"insideBottom":{"textAlign":"left","textBaseline":"top"},"insideMiddle":{"textAlign":"left","textBaseline":"middle"}}};function BD(){DD._animate=fD}tD(),jR();var DD=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="markLine",lt}return h(e,nt),o(e,[{"key":"markerAnimate","value":function(nt){e._animate&&this._animationConfig&&e._animate(this._line,this._label,this._animationConfig,nt)}},{"key":"getPointAttrByPosition","value":function(nt){var at,lt=this.attribute.label,Rt=void 0===lt?{}:lt,Bt=Rt.refX,Lt=void 0===Bt?0:Bt,Ht=Rt.refY,jt=void 0===Ht?0:Ht,$t=this._line.getMainSegmentPoints(),Kt=null!==(at=this._line.getEndAngle())&&void 0!==at?at:0,te=Lt*Math.cos(Kt)+jt*Math.cos(Kt-Math.PI/2),ne=Lt*Math.sin(Kt)+jt*Math.sin(Kt-Math.PI/2);return nt.includes("start")||nt.includes("Start")?{"position":{"x":$t[0].x+te,"y":$t[0].y+ne},"angle":Kt}:nt.includes("middle")||nt.includes("Middle")?{"position":{"x":($t[0].x+$t[$t.length-1].x)/2+te,"y":($t[0].y+$t[$t.length-1].y)/2+ne},"angle":Kt}:{"position":{"x":$t[$t.length-1].x+te,"y":$t[$t.length-1].y+ne},"angle":Kt}}},{"key":"getRotateByAngle","value":function(nt){var at;return(XP(nt)?nt:nt-Math.PI)+(null!==(at=this.attribute.label.refAngle)&&void 0!==at?at:0)}},{"key":"getTextStyle","value":function(nt,at,lt){return KP(Math.abs(at),Math.PI/2,wD)||KP(Math.abs(at),3*Math.PI/2,wD)?qP(lt,at,nt):XP(at)?MD.postiveXAxis[nt]:MD.negativeXAxis[nt]}},{"key":"createSegment","value":function(){var nt=this.attribute,at=nt.points,lt=nt.startSymbol,Rt=nt.endSymbol,Bt=nt.lineStyle,Lt=nt.mainSegmentIndex,Ht=nt.multiSegment,jt=nt.state;return new ZR({"points":at,"startSymbol":lt,"endSymbol":Rt,"lineStyle":Bt,"mainSegmentIndex":Lt,"multiSegment":Ht,"pickable":!1,"state":{"line":ft({},GP,null==jt?void 0:jt.line),"startSymbol":ft({},GP,null==jt?void 0:jt.lineStartSymbol),"endSymbol":ft({},GP,null==jt?void 0:jt.lineEndSymbol)}})}},{"key":"setLineAttributes","value":function(){var nt=this.attribute,at=nt.points,lt=nt.startSymbol,Rt=nt.endSymbol,Bt=nt.lineStyle,Lt=nt.mainSegmentIndex,Ht=nt.multiSegment,jt=nt.state;this._line&&this._line.setAttributes({"points":at,"startSymbol":lt,"endSymbol":Rt,"lineStyle":Bt,"mainSegmentIndex":Lt,"multiSegment":Ht,"state":{"line":ft({},GP,null==jt?void 0:jt.line),"startSymbol":ft({},GP,null==jt?void 0:jt.lineStartSymbol),"endSymbol":ft({},GP,null==jt?void 0:jt.lineEndSymbol)}})}},{"key":"isValidPoints","value":function(){var nt=this.attribute.points;if(!nt||nt.length<2)return!1;var at=!0;return nt.forEach((function(nt){if(nt.length)nt.forEach((function(nt){Q(nt.x)&&Q(nt.y)||(at=!1)}));else if(!Q(nt.x)||!Q(nt.y))return void(at=!1)})),at}}])}(AD);function LD(){FD._animate=vD}DD.defaultAttributes=CD,tD(),EP();var FD=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="markArea",lt.defaultUpdateAnimation=xD,lt.defaultExitAnimation=SD,lt}return h(e,nt),o(e,[{"key":"markerAnimate","value":function(nt){e._animate&&this._animationConfig&&e._animate(this._area,this._label,this._animationConfig,nt)}},{"key":"getArea","value":function(){return this._area}},{"key":"getLabel","value":function(){return this._label}},{"key":"getPointAttrByPosition","value":function(nt){var at=this._area.AABBBounds,lt=at.x1,Rt=at.x2,Bt=at.y1,Lt=at.y2,Ht={"x":(lt+Rt)/2,"y":(Bt+Lt)/2};return(nt.includes("left")||nt.includes("Left"))&&(Ht.x=lt),(nt.includes("right")||nt.includes("Right"))&&(Ht.x=Rt),(nt.includes("top")||nt.includes("Top"))&&(Ht.y=Bt),(nt.includes("bottom")||nt.includes("Bottom"))&&(Ht.y=Lt),Ht}},{"key":"setLabelPos","value":function(){var nt;if(this._label&&this._area){var at=this.attribute.label,lt=void 0===at?{}:at,Rt=null!==(nt=lt.position)&&void 0!==nt?nt:"middle",Bt=this.getPointAttrByPosition(Rt);if(this._label.setAttributes(Object.assign(Object.assign({},Bt),{"textStyle":Object.assign(Object.assign({},ID[Rt]),lt.textStyle)})),this.attribute.limitRect&&lt.confine){var Lt=this.attribute.limitRect,Ht=Lt.x,jt=Lt.y,$t=Lt.width,Kt=Lt.height;pR(this._label,{"x1":Ht,"y1":jt,"x2":Ht+$t,"y2":jt+Kt})}}}},{"key":"initMarker","value":function(nt){var at=this.attribute,lt=at.points,Rt=at.label,Bt=at.areaStyle,Lt=at.state,Ht=Hy.polygon(Object.assign({"points":lt},Bt));Ht.states=ft({},GP,null==Lt?void 0:Lt.area),Ht.name="mark-area-polygon",this._area=Ht,nt.add(Ht);var jt=new AR(Object.assign(Object.assign({},Rt),{"state":{"panel":ft({},GP,null==Lt?void 0:Lt.labelBackground),"text":ft({},GP,null==Lt?void 0:Lt.label)}}));jt.name="mark-area-label",this._label=jt,nt.add(jt),this.setLabelPos()}},{"key":"updateMarker","value":function(){var nt=this.attribute,at=nt.points,lt=nt.label,Rt=nt.areaStyle,Bt=nt.state;this._area&&(this._area.setAttributes(Object.assign({"points":at},Rt)),this._area.states=ft({},GP,null==Bt?void 0:Bt.area)),this._label&&this._label.setAttributes(Object.assign(Object.assign({"dx":0,"dy":0},lt),{"state":{"panel":ft({},GP,null==Bt?void 0:Bt.labelBackground),"text":ft({},GP,null==Bt?void 0:Bt.label)}})),this.setLabelPos()}},{"key":"isValidPoints","value":function(){var nt=this.attribute.points;if(!nt||nt.length<3)return!1;var at=!0;return nt.forEach((function(nt){Q(nt.x)&&Q(nt.y)||(at=!1)})),at}}])}(_D);FD.defaultAttributes=ED,tD(),NR();var HD=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt,{"label":{"autoRotate":!0}})])).name="markArcLine",lt}return h(e,nt),o(e,[{"key":"markerAnimate","value":function(nt){e._animate&&this._animationConfig&&e._animate(this._line,this._label,this._animationConfig,nt)}},{"key":"getPointAttrByPosition","value":function(nt){var at,lt=this.attribute,Rt=lt.center,Bt=lt.radius,Lt=lt.startAngle,Ht=lt.endAngle,jt=lt.label,$t=jt.refX,Kt=void 0===$t?0:$t,te=jt.refY,ne=void 0===te?0:te;switch(nt){case JO.arcInnerStart:at=Lt;case JO.arcOuterStart:at=Lt;break;case JO.arcInnerEnd:at=Ht;case JO.arcOuterEnd:at=Ht;break;case JO.center:case JO.arcInnerMiddle:case JO.arcOuterMiddle:default:at=(Lt+Ht)/2}return{"position":{"x":Rt.x+(Bt+ne)*Math.cos(at)+Kt*Math.cos(at-Math.PI/2),"y":Rt.y+(Bt+ne)*Math.sin(at)+Kt*Math.sin(at-Math.PI/2)},"angle":at}}},{"key":"getTextStyle","value":function(nt){return RD[nt]}},{"key":"getRotateByAngle","value":function(nt){var at;return nt-Math.PI/2+(null!==(at=this.attribute.label.refAngle)&&void 0!==at?at:0)}},{"key":"createSegment","value":function(){var nt=this.attribute,at=nt.center,lt=nt.radius,Rt=nt.startAngle,Bt=nt.endAngle,Lt=nt.startSymbol,Ht=nt.endSymbol,jt=nt.lineStyle,$t=nt.state;return new aI({"center":at,"radius":lt,"startAngle":Rt,"endAngle":Bt,"startSymbol":Lt,"endSymbol":Ht,"lineStyle":jt,"state":{"line":ft({},GP,null==$t?void 0:$t.line),"startSymbol":ft({},GP,null==$t?void 0:$t.lineStartSymbol),"endSymbol":ft({},GP,null==$t?void 0:$t.lineEndSymbol)}})}},{"key":"setLineAttributes","value":function(){var nt=this.attribute,at=nt.center,lt=nt.radius,Rt=nt.startAngle,Bt=nt.endAngle,Lt=nt.startSymbol,Ht=nt.endSymbol,jt=nt.lineStyle,$t=nt.state;this._line&&this._line.setAttributes({"center":at,"radius":lt,"startAngle":Rt,"endAngle":Bt,"startSymbol":Lt,"endSymbol":Ht,"lineStyle":jt,"state":{"line":ft({},GP,null==$t?void 0:$t.line),"startSymbol":ft({},GP,null==$t?void 0:$t.lineStartSymbol),"endSymbol":ft({},GP,null==$t?void 0:$t.lineEndSymbol)}})}},{"key":"isValidPoints","value":function(){return!0}}])}(AD);HD.defaultAttributes=TD,tD(),hP();var ND=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt,{"label":{"autoRotate":!0}})])).name="markArcArea",lt.defaultUpdateAnimation=xD,lt.defaultExitAnimation=SD,lt}return h(e,nt),o(e,[{"key":"markerAnimate","value":function(nt){e._animate&&this._animationConfig&&e._animate(this._area,this._label,this._animationConfig,nt)}},{"key":"getArea","value":function(){return this._area}},{"key":"getLabel","value":function(){return this._label}},{"key":"getPointAttrByPosition","value":function(nt){var at,lt,Rt=this.attribute,Bt=Rt.center,Lt=Rt.innerRadius,Ht=Rt.outerRadius,jt=Rt.startAngle,$t=Rt.endAngle,Kt=Rt.label,te=Kt.refX,ne=void 0===te?0:te,re=Kt.refY,ae=void 0===re?0:re;switch(nt){case JO.center:at=(Lt+Ht)/2,lt=(jt+$t)/2;break;case JO.arcInnerStart:at=Lt,lt=jt;break;case JO.arcOuterStart:at=Ht,lt=jt;break;case JO.arcInnerEnd:at=Lt,lt=$t;break;case JO.arcOuterEnd:at=Ht,lt=$t;break;case JO.arcInnerMiddle:at=Lt,lt=(jt+$t)/2;break;case JO.arcOuterMiddle:at=Ht,lt=(jt+$t)/2;break;default:at=Lt,lt=(jt+$t)/2}return{"position":{"x":Bt.x+(at+ae)*Math.cos(lt)+ne*Math.cos(lt-Math.PI/2),"y":Bt.y+(at+ae)*Math.sin(lt)+ne*Math.sin(lt-Math.PI/2)},"angle":lt}}},{"key":"setLabelPos","value":function(){var nt;if(this._label&&this._area){var at=this.attribute.label,lt=void 0===at?{}:at,Rt=lt.position,Bt=void 0===Rt?"arcInnerMiddle":Rt,Lt=lt.autoRotate,Ht=this.getPointAttrByPosition(Bt);if(this._label.setAttributes(Object.assign(Object.assign({},Ht.position),{"angle":Lt?Ht.angle-Math.PI/2+(null!==(nt=lt.refAngle)&&void 0!==nt?nt:0):0,"textStyle":Object.assign(Object.assign({},RD[Bt]),lt.textStyle)})),this.attribute.limitRect&&lt.confine){var jt=this.attribute.limitRect,$t=jt.x,Kt=jt.y,te=jt.width,ne=jt.height;pR(this._label,{"x1":$t,"y1":Kt,"x2":$t+te,"y2":Kt+ne})}}}},{"key":"initMarker","value":function(nt){var at=this.attribute,lt=at.center,Rt=at.innerRadius,Bt=at.outerRadius,Lt=at.startAngle,Ht=at.endAngle,jt=at.areaStyle,$t=at.label,Kt=at.state,te=Hy.arc(Object.assign({"x":lt.x,"y":lt.y,"innerRadius":Rt,"outerRadius":Bt,"startAngle":Lt,"endAngle":Ht},jt));te.states=ft({},GP,null==Kt?void 0:Kt.area),te.name="polar-mark-area-area",this._area=te,nt.add(te);var ne=new AR(Object.assign(Object.assign({},$t),{"state":{"panel":ft({},GP,null==Kt?void 0:Kt.labelBackground),"text":ft({},GP,null==Kt?void 0:Kt.label)}}));ne.name="mark-area-label",this._label=ne,nt.add(ne),this.setLabelPos()}},{"key":"updateMarker","value":function(){var nt=this.attribute,at=nt.center,lt=nt.innerRadius,Rt=nt.outerRadius,Bt=nt.startAngle,Lt=nt.endAngle,Ht=nt.areaStyle,jt=nt.label,$t=nt.state;this._area&&(this._area.setAttributes(Object.assign({"x":at.x,"y":at.y,"innerRadius":lt,"outerRadius":Rt,"startAngle":Bt,"endAngle":Lt},Ht)),this._area.states=ft({},GP,null==$t?void 0:$t.area)),this._label&&(this._label.setAttributes(Object.assign(Object.assign({"dx":0,"dy":0},jt),{"state":{"panel":ft({},GP,null==$t?void 0:$t.labelBackground),"text":ft({},GP,null==$t?void 0:$t.label)}})),this.setLabelPos())}},{"key":"isValidPoints","value":function(){return!0}}])}(_D);function zD(){VD._animate=yD}ND.defaultAttributes=PD,tD(),jR(),NR(),FP(),SP(),wP();var VD=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="markPoint",lt.defaultUpdateAnimation=kD,lt.defaultExitAnimation=SD,lt._isArcLine=!1,lt._isStraightLine=!1,lt}return h(e,nt),o(e,[{"key":"markerAnimate","value":function(nt){e._animate&&this._animationConfig&&e._animate([this._line,this._decorativeLine],this._item,this._animationConfig,nt)}},{"key":"setLabelPos","value":function(){}},{"key":"getTextAlignAttr","value":function(nt,at,lt,Rt,Bt){return KP(Math.abs(Rt),Math.PI/2,wD)||KP(Math.abs(Rt),3*Math.PI/2,wD)?qP(nt,Rt,Bt):XP(Rt)?OD.postiveXAxis[Bt]:OD.negativeXAxis[Bt]}},{"key":"setItemAttributes","value":function(nt,at,lt,Rt,Bt){var Lt,Ht;if(nt){var jt=at.autoRotate,$t=void 0===jt||jt,Kt=at.refX,te=void 0===Kt?0:Kt,ne=at.refY,re=void 0===ne?0:ne,ae=at.refAngle,oe=void 0===ae?0:ae,se=at.textStyle,le=void 0===se?{}:se,ue=at.richTextStyle,ce=void 0===ue?{}:ue,he=at.imageStyle,de=void 0===he?{}:he,fe=at.position,pe=void 0===fe?eD.middle:fe,ve=this.attribute.state,Ae=(null===(Lt=this._line)||void 0===Lt?void 0:Lt.getEndAngle())||0,we=te*Math.cos(Ae)+re*Math.cos(Ae-Math.PI/2),Ce=te*Math.sin(Ae)+re*Math.sin(Ae-Math.PI/2);if("text"===Bt){var je=Rt.x-lt.x,Ne=Rt.y-lt.y;nt.setAttributes(Object.assign(Object.assign({},le),{"textStyle":Object.assign(Object.assign({},this.getTextAlignAttr($t,je,Ne,Ae,null!==(Ht=at.position)&&void 0!==Ht?Ht:"end")),le.textStyle),"state":{"panel":ft({},GP,null==ve?void 0:ve.textBackground),"text":ft({},GP,null==ve?void 0:ve.text)}}))}else"richText"===Bt?(nt.setAttributes({"dx":this.getItemDx(nt,pe,ce)+(ce.dx||0),"dy":this.getItemDy(nt,pe,ce)+(ce.dy||0)}),nt.states=ft({},GP,null==ve?void 0:ve.richText)):"image"===Bt&&(nt.setAttributes({"dx":this.getItemDx(nt,pe,de)+(de.dx||0),"dy":this.getItemDy(nt,pe,de)+(de.dy||0)}),nt.states=ft({},GP,null==ve?void 0:ve.image));var Ve=XP(Ae)?Ae:Ae-Math.PI;nt.setAttributes({"x":Rt.x+(we||0),"y":Rt.y+(Ce||0),"angle":$t&&Ve+oe})}}},{"key":"getItemDx","value":function(nt,at,lt){var Rt,Bt,Lt=null!==(Bt=null===(Rt=null==nt?void 0:nt.AABBBounds)||void 0===Rt?void 0:Rt.width())&&void 0!==Bt?Bt:(null==lt?void 0:lt.width)||0;return at.includes("inside")?-Lt:0}},{"key":"getItemDy","value":function(nt,at,lt){var Rt,Bt,Lt=null!==(Bt=null===(Rt=null==nt?void 0:nt.AABBBounds)||void 0===Rt?void 0:Rt.height())&&void 0!==Bt?Bt:(null==lt?void 0:lt.height)||0;return at.includes("top")||at.includes("Top")?-Lt:at.includes("middle")||at.includes("Middle")?-Lt/2:0}},{"key":"initItem","value":function(nt,at,lt){var Rt,Bt=this.attribute.state,Lt=nt.type,Ht=void 0===Lt?"text":Lt,jt=nt.symbolStyle,$t=nt.richTextStyle,Kt=nt.imageStyle,te=nt.renderCustomCallback;return"symbol"===Ht?(Rt=Hy.symbol(Object.assign(Object.assign({},lt),jt))).states=ft({},GP,null==Bt?void 0:Bt.symbol):"text"===Ht?Rt=new AR(Object.assign(Object.assign({},lt),{"state":{"panel":ft({},GP,null==Bt?void 0:Bt.textBackground),"text":ft({},GP,null==Bt?void 0:Bt.text)}})):"richText"===Ht?(Rt=Hy.richtext(Object.assign(Object.assign({},lt),$t))).states=ft({},GP,null==Bt?void 0:Bt.richText):"image"===Ht?(Rt=Hy.image(Object.assign(Object.assign({},lt),Kt))).states=ft({},GP,null==Bt?void 0:Bt.image):"custom"===Ht&&te&&((Rt=te()).states=ft({},GP,null==Bt?void 0:Bt.customMark)),Rt.name="mark-point-".concat(Ht),this.setItemAttributes(Rt,nt,at,lt,Ht),Rt}},{"key":"getItemLineAttr","value":function(nt,at,lt){var Rt=[],Bt={"x":0,"y":0},Lt=0,Ht=0,jt=0,$t=nt.type,Kt=void 0===$t?"type-s":$t,te=nt.arcRatio,ne=void 0===te?.8:te,re=lt.x-at.x,ae=lt.y-at.y;if(this._isStraightLine=KP(re,0,wD)||KP(ae,0,wD),this._isArcLine){var oe=this.attribute.position,se=oe.x,le=oe.y,ue=lt.x,ce=lt.y,he=(se+ue)/2,de=he+ne*(ce>le?-1:1)*he,fe=(le===ce?0:-(se-ue)/(le-ce))*(de-he)+(le+ce)/2;Ht=hR(le-fe,se-de),jt=hR(ce-fe,ue-de),Bt={"x":de,"y":fe};var pe=Math.sqrt((de-se)*(de-se)+(fe-le)*(fe-le)),ve=this.attribute.targetSymbol.style.size/2;Ht+=2*Math.acos(Math.sqrt(1-ve*ve/(4*pe*pe))),ne>0?jt<Ht&&(jt+=2*Math.PI):Ht<jt&&(Ht+=2*Math.PI),Lt=Math.sqrt((de-se)*(de-se)+(fe-le)*(fe-le))}else Rt="type-do"!==Kt||this._isStraightLine?"type-po"!==Kt||this._isStraightLine?"type-op"!==Kt||this._isStraightLine?[at,lt]:[at,{"x":at.x,"y":lt.y},lt]:[at,{"x":lt.x,"y":at.y},lt]:[at,{"x":(at.x+lt.x)/2,"y":lt.y},lt];return Rt=function(nt){for(var at=[nt[0]],lt=1;lt<nt.length;lt++)nt[lt].x===nt[lt-1].x&&nt[lt].y===nt[lt-1].y||at.push(nt[lt]);return at}(Rt),{"points":Rt,"center":Bt,"radius":Lt,"startAngle":Ht,"endAngle":jt}}},{"key":"reDrawLine","value":function(nt,at){this._line.release();var lt=nt.startSymbol,Rt=nt.endSymbol,Bt=nt.lineStyle;nt.type;var Lt=this.attribute.state,Ht=this._isArcLine?aI:ZR;this._container.removeChild(this._line),this._line=new Ht(Object.assign(Object.assign({},at),{"pickable":!1,"startSymbol":lt,"endSymbol":Rt,"lineStyle":Bt,"visible":nt.visible,"state":{"line":ft({},GP,null==Lt?void 0:Lt.line),"startSymbol":ft({},GP,null==Lt?void 0:Lt.lineStartSymbol),"endSymbol":ft({},GP,null==Lt?void 0:Lt.lineEndSymbol)}})),this._container.add(this._line)}},{"key":"setItemLineAttr","value":function(nt,at,lt){if(this._line){var Rt=nt.startSymbol,Bt=nt.endSymbol,Lt=nt.lineStyle;nt.type;var Ht=this.attribute.state,jt=this.getItemLineAttr(nt,at,lt);this._isArcLine&&"arc-segment"===this._line.key||!this._isArcLine&&"segment"===this._line.key?this._line.setAttributes(Object.assign(Object.assign({},jt),{"startSymbol":Rt,"endSymbol":Bt,"lineStyle":Lt,"visible":nt.visible,"state":{"line":ft({},GP,null==Ht?void 0:Ht.line),"startSymbol":ft({},GP,null==Ht?void 0:Ht.lineStartSymbol),"endSymbol":ft({},GP,null==Ht?void 0:Ht.lineEndSymbol)}})):this.reDrawLine(nt,jt)}}},{"key":"getDecorativeLineAttr","value":function(nt){var at,lt=(null===(at=null==nt?void 0:nt.decorativeLine)||void 0===at?void 0:at.length)||10,Rt=this._line.getEndAngle()||0;return{"startPointOffsetX":lt/2*Math.cos(Rt-Math.PI/2),"startPointOffsetY":lt/2*Math.sin(Rt-Math.PI/2),"endPointOffsetX":-lt/2*Math.cos(Rt-Math.PI/2),"endPointOffsetY":-lt/2*Math.sin(Rt-Math.PI/2)}}},{"key":"setDecorativeLineAttr","value":function(nt,at,lt){var Rt;if(this._decorativeLine){var Bt=nt.lineStyle,Lt=this.getDecorativeLineAttr(nt),Ht=Lt.startPointOffsetX,jt=Lt.startPointOffsetY,$t=Lt.endPointOffsetX,Kt=Lt.endPointOffsetY;this._decorativeLine.setAttributes(Object.assign(Object.assign({"points":[{"x":at.x+Ht,"y":at.y+jt},{"x":at.x+$t,"y":at.y+Kt}]},Bt),{"visible":lt})),this._decorativeLine.states=ft({},GP,null===(Rt=this.attribute.state)||void 0===Rt?void 0:Rt.line)}}},{"key":"setTargetItemAttributes","value":function(nt,at){var lt,Rt;this._targetItem&&(this._targetItem.setAttributes(Object.assign({"x":at.x,"y":at.y,"visible":null!==(lt=nt.visible)&&void 0!==lt&&lt,"size":nt.size},nt.style)),this._targetItem.states=ft({},GP,null===(Rt=this.attribute.state)||void 0===Rt?void 0:Rt.targetItem))}},{"key":"setAllOfItemsAttr","value":function(nt,at){var lt,Rt=this.attribute,Bt=Rt.position,Lt=Rt.itemLine,Ht=void 0===Lt?{}:Lt,jt=Rt.itemContent,$t=void 0===jt?{}:jt,Kt=Rt.limitRect,te=Rt.targetSymbol,ne=$t.type,re=void 0===ne?"text":ne,ae=$t.confine;if(Kt&&ae){var oe=Kt.x,se=Kt.y,le=Kt.width,ue=Kt.height,ce=dR(this._item,{"x1":oe,"y1":se,"x2":oe+le,"y2":se+ue}),he=ce.dx,de=ce.dy;at.x=at.x+he,at.y=at.y+de}this.setTargetItemAttributes(te,Bt),this.setItemLineAttr(Ht,nt,at),this.setItemAttributes(this._item,$t,nt,at,re),this.setDecorativeLineAttr(Ht,at,null===(lt=Ht.decorativeLine)||void 0===lt?void 0:lt.visible)}},{"key":"computeNewPositionAfterTargetItem","value":function(nt){var at,lt,Rt,Bt=this.attribute,Lt=Bt.itemContent,Ht=void 0===Lt?{}:Lt,jt=Bt.targetSymbol,$t=Bt.itemLine,Kt=Ht.offsetX,te=void 0===Kt?0:Kt,ne=Ht.offsetY,re=void 0===ne?0:ne,ae=jt.offset,oe=void 0===ae?0:ae,se=jt.style,le=jt.visible,ue=void 0!==le&&le,ce=jt.size,he=ue?null!==(lt=null!==(at=se.size)&&void 0!==at?at:ce)&&void 0!==lt?lt:20:0;return Rt="type-do"===$t.type?hR(re,te/2):"type-po"===$t.type?hR(0,te):"type-op"===$t.type?hR(re,0):hR(re,te),{"newPosition":{"x":nt.x+(he/2+oe)*Math.cos(Rt),"y":nt.y+(he/2+oe)*Math.sin(Rt)},"newItemPosition":{"x":nt.x+(he/2+oe)*Math.cos(Rt)+te,"y":nt.y+(he/2+oe)*Math.sin(Rt)+re}}}},{"key":"initMarker","value":function(nt){var at=this.attribute,lt=at.position,Rt=at.itemContent,Bt=void 0===Rt?{}:Rt,Lt=at.itemLine,Ht=Lt.type,jt=void 0===Ht?"type-s":Ht,$t=Lt.arcRatio,Kt=void 0===$t?.8:$t,te=Bt.offsetX,ne=void 0===te?0:te,re=Bt.offsetY,ae=void 0===re?0:re;this._isStraightLine=KP(ne,0,wD)||KP(ae,0,wD),this._isArcLine="type-arc"===jt&&0!==Kt&&!this._isStraightLine;var oe=this.computeNewPositionAfterTargetItem(lt),se=oe.newPosition,le=oe.newItemPosition,ue=new(this._isArcLine?aI:ZR)({"points":[],"pickable":!1,"center":{"x":0,"y":0},"radius":0,"startAngle":0,"endAngle":0});ue.name="mark-point-line",this._line=ue,nt.add(ue);var ce=Hy.line({"points":[]});ce.name="mark-point-decorativeLine",this._decorativeLine=ce,nt.add(ce);var he=Hy.symbol({});he.name="mark-point-targetItem",this._targetItem=he,nt.add(this._targetItem);var de=this.initItem(Bt,se,le);this._item=de,nt.add(de),this.setAllOfItemsAttr(se,le)}},{"key":"updateMarker","value":function(){var nt=this.attribute,at=nt.position,lt=nt.itemContent,Rt=void 0===lt?{}:lt,Bt=nt.itemLine,Lt=Rt.type,Ht=void 0===Lt?"text":Lt,jt=Bt.type,$t=void 0===jt?"type-s":jt,Kt=Bt.arcRatio,te=void 0===Kt?.8:Kt,ne=Rt.offsetX,re=void 0===ne?0:ne,ae=Rt.offsetY,oe=void 0===ae?0:ae;this._isStraightLine=KP(re,0,wD)||KP(oe,0,wD);var se="type-arc"===$t&&0!==te&&!this._isStraightLine,le=this.computeNewPositionAfterTargetItem(at),ue=le.newPosition,ce=le.newItemPosition;se!==this._isArcLine?(this._isArcLine=se,this.reDrawLine(Bt,{"points":[{"x":0,"y":0}],"pickable":!1,"center":{"x":0,"y":0},"radius":0,"startAngle":0,"endAngle":0})):this._isArcLine=se,this.setItemAttributes(this._item,Rt,ue,ce,Ht),this.setAllOfItemsAttr(ue,ce)}},{"key":"isValidPoints","value":function(){var nt=this.attribute.position;return!(!Q(nt.x)||!Q(nt.y))}}])}(_D);function jD(){xP(),FP(),zP()}VD.defaultAttributes={"interactive":!0,"targetSymbol":{"visible":!1,"offset":0,"style":{"symbolType":"circle","size":20,"fill":!1,"stroke":"rgba(46, 47, 50)"}},"itemLine":{"visible":!0,"decorativeLine":{"visible":!1,"length":30},"startSymbol":{"visible":!0,"clip":!0,"symbolType":"circle","size":20,"style":{"fill":!1,"stroke":"rgba(46, 47, 50)"}},"endSymbol":{"visible":!1,"clip":!0,"symbolType":"triangle","size":12,"style":{"fill":!1,"stroke":"rgba(46, 47, 50)"}},"lineStyle":{"stroke":"#000","lineWidth":1}},"itemContent":{"type":"text","position":"middle","refX":10,"symbolStyle":{"symbolType":"star","fill":"rgb(48, 115, 242)","fillOpacity":.8,"size":20},"textStyle":{"dx":0,"dy":0},"imageStyle":{"width":80,"height":80},"richTextStyle":{"width":100,"height":100}}};var WD={"space":8,"style":{"fill":"rgb(47, 69, 84)","cursor":"pointer","size":15},"state":{"disable":{"fill":"rgb(170, 170, 170)","cursor":"not-allowed"},"hover":{}}};jD();var GD,UD,YD,ZD=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="pager",lt._current=1,lt._onHover=function(nt){var at=nt.target;at.hasState("disable")||at.addState("hover")},lt._onUnHover=function(nt){nt.target.removeState("hover")},lt._onClick=function(nt){var at=nt.target;if("preHandler"===at.name){if(1===lt._current)return;lt._current-=1,1===lt._current?at.addState("disable"):at.removeState("disable"),lt._dispatchEvent("toPrev",{"current":lt._current,"total":lt._total,"direction":"pre","event":nt})}if("nextHandler"===at.name){if(lt._current===lt._total)return;lt._current+=1,lt._current===lt._total?at.addState("disable"):at.removeState("disable"),lt._dispatchEvent("toNext",{"current":lt._current,"total":lt._total,"direction":"next","event":nt})}lt._current>1&&lt.preHandler.removeState("disable"),lt._current<lt._total&&lt.nextHandler.removeState("disable"),lt.text.setAttribute("text",lt._getPageText(lt._current))},lt}return h(e,nt),o(e,[{"key":"getCurrent","value":function(){return this._current}},{"key":"render","value":function(){var nt,at,lt;this._reset();var Rt=this.attribute,Bt=Rt.layout,Lt=void 0===Bt?"horizontal":Bt,Ht=Rt.handler,jt=void 0===Ht?WD:Ht,$t=Rt.total,Kt=Rt.defaultCurrent,te=void 0===Kt?1:Kt,ne=Rt.textStyle,re=Rt.padding,ae=void 0===re?0:re;this._current=te;var oe=Ci(ae),se="horizontal"===Lt,le=Hy.group({"x":0,"y":0}),ue=jt.style||{},ce=ue.size||15,he=null!==(nt=jt.space)&&void 0!==nt?nt:8,de=jt.state||{},fe=jt.preShape,pe=jt.nextShape;fe||(fe=se?"triangleLeft":"triangleUp"),pe||(pe=se?"triangleRight":"triangleDown");var ve=Hy.symbol(Object.assign(Object.assign({"strokeBoundsBuffer":0,"pickMode":"imprecise"},ue),{"x":0,"y":0,"symbolType":fe,"size":ce}));ve.states=de,ve.name="preHandler",this.preHandler=ve,le.add(ve);var Ae=oR(this._getPageText($t),Object.assign({"textAlign":"center","textBaseline":"middle"},ne),null===(lt=null===(at=this.stage)||void 0===at?void 0:at.getTheme())||void 0===lt?void 0:lt.text),we=Ae.width,Ce=Ae.height,je=Z(ce)?ce:ce[0],Ne=Z(ce)?ce:ce[1],Ve=Hy.text(Object.assign({"x":se?je/2+he+we/2:0,"y":se?0:Ne/2+he+Ce/2,"text":this._getPageText(te),"textAlign":"center","textBaseline":"middle","lineHeight":null==ne?void 0:ne.fontSize},ne));this.text=Ve,le.add(Ve);var Ge=Hy.symbol(Object.assign(Object.assign({"strokeBoundsBuffer":0,"pickMode":"imprecise"},ue),{"x":se?je+2*he+we:0,"y":se?0:Ne+2*he+Ce,"symbolType":pe,"size":ce}));Ge.name="nextHandler",Ge.states=de,this.nextHandler=Ge,le.add(Ge),1===this._total?(ve.addState("disable"),Ge.addState("disable")):1===this._current?ve.addState("disable"):this._current===$t&&Ge.addState("disable");var ti=le.AABBBounds,li=ti.width(),hi=ti.height();le.translateTo(0-ti.x1+oe[3],0-ti.y1+oe[0]),this.add(le),this.attribute.width=li+oe[1]+oe[3],this.attribute.height=hi+oe[0]+oe[2],this._bindEvents()}},{"key":"_bindEvents","value":function(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}},{"key":"_reset","value":function(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}},{"key":"_getPageText","value":function(nt){var at=this.attribute.pageFormatter;return at?H(at)?at(nt,this._total):"".concat(at).replace("{current}","".concat(nt)).replace("{total}","".concat(this._total)):"".concat(nt,"/").concat(this._total)}},{"key":"setTotal","value":function(nt){nt!==this.attribute.total&&(this._total=nt,1!==this._current&&this._current<=nt?this.setAttributes({"total":nt,"defaultCurrent":this._current}):this.setAttribute("total",nt))}}])}(xS);ZD.defaultAttributes={"handler":WD,"textStyle":{"fill":"rgb(51, 51, 51)","fontSize":12}},function(nt){nt.selected="selected",nt.unSelected="unSelected",nt.selectedHover="selectedHover",nt.unSelectedHover="unSelectedHover",nt.focus="focus"}(GD||(GD={})),function(nt){nt.legendItemHover="legendItemHover",nt.legendItemUnHover="legendItemUnHover",nt.legendItemClick="legendItemClick",nt.legendItemAttributeUpdate="legendItemAttributeUpdate"}(UD||(UD={})),function(nt){nt.innerView="innerView",nt.title="legendTitle",nt.item="legendItem",nt.itemShape="legendItemShape",nt.itemLabel="legendItemLabel",nt.itemValue="legendItemValue",nt.focus="legendItemFocus"}(YD||(YD={}));var QD=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="legend",nt._title=null,nt}return h(e,nt),o(e,[{"key":"render","value":function(){this.removeAllChild(!0);var nt=this.attribute,at=nt.interactive,lt=void 0===at||at,Rt=nt.title,Bt=nt.padding,Lt=void 0===Bt?0:Bt;this._parsedPadding=Ci(Lt);var Ht=Hy.group({"x":this._parsedPadding[3],"y":this._parsedPadding[0],"pickable":lt,"childrenPickable":lt});Ht.name=YD.innerView,this.add(Ht),this._innerView=Ht,(null==Rt?void 0:Rt.visible)&&this._renderTitle(Rt),this._renderContent(),this._adjustLayout(),lt&&this._bindEvents();var jt=this._innerView.AABBBounds;this.attribute.width=jt.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=jt.height()+this._parsedPadding[0]+this._parsedPadding[2]}},{"key":"_renderTitle","value":function(nt){var at=nt.text,lt=void 0===at?"":at,Rt=nt.textStyle,Bt=nt.padding,Lt=void 0===Bt?0:Bt,Ht=nt.background,jt=nt.minWidth,$t=nt.maxWidth,Kt=nt.shape,te={"x":0,"y":0,"text":lt,"textStyle":Rt,"padding":Ci(Lt),"minWidth":jt,"maxWidth":$t};Kt&&Kt.visible&&(te.shape=Object.assign({"visible":!0},Kt.style),N(Kt.space)&&(te.space=Kt.space)),Ht&&Ht.visible&&(te.panel=Object.assign({"visible":!0},Ht.style));var ne=new AR(te);ne.name=YD.title,this._title=ne,this._innerView.add(ne)}},{"key":"_adjustLayout","value":function(){var nt;if(this._title){var at=this._innerView.AABBBounds.width(),lt=this._title.AABBBounds.width(),Rt=null===(nt=this.attribute.title)||void 0===nt?void 0:nt.align;"center"===Rt?this._title.setAttribute("x",(at-lt)/2):"end"===Rt&&this._title.setAttribute("x",at-lt)}}}])}(xS);function XD(){xP(),zP(),BP(),FP()}function KD(){xP(),fR()}var qD=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},JD=l(l(l(l(l({},GD.focus,{}),GD.selected,{}),GD.selectedHover,{}),GD.unSelected,{}),GD.unSelectedHover,{});KD(),jD(),RP();var aL,oL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="discreteLegend",lt._itemsContainer=null,lt._itemHeightByUser=void 0,lt._itemHeight=0,lt._itemMaxWidth=0,lt._contentMaxHeight=0,lt._onHover=function(nt){var at=nt.target;if(at&&at.name&&at.name.startsWith(YD.item)){var Rt=at.delegate;if(lt._lastActiveItem){if(lt._lastActiveItem.id===Rt.id)return;lt._unHover(lt._lastActiveItem,nt)}lt._hover(Rt,nt)}else lt._lastActiveItem&&(lt._unHover(lt._lastActiveItem,nt),lt._lastActiveItem=null)},lt._onUnHover=function(nt){lt._lastActiveItem&&(lt._unHover(lt._lastActiveItem,nt),lt._lastActiveItem=null)},lt._onClick=function(nt){var at,Rt,Bt,Lt,Ht=nt.target;if(Ht&&Ht.name&&Ht.name.startsWith(YD.item)){var jt=Ht.delegate,$t=lt.attribute.selectMode,Kt=void 0===$t?"multiple":$t;if(Ht.name===YD.focus||"focus"===Kt){var te=jt.hasState(GD.focus);jt.toggleState(GD.focus),te?null===(at=lt._itemsContainer)||void 0===at||at.getChildren().forEach((function(at){lt._removeLegendItemState(at,[GD.unSelected,GD.unSelectedHover,GD.focus],nt),lt._setLegendItemState(at,GD.selected,nt)})):(lt._setLegendItemState(jt,GD.selected,nt),lt._removeLegendItemState(jt,[GD.unSelected,GD.unSelectedHover],nt),null===(Rt=lt._itemsContainer)||void 0===Rt||Rt.getChildren().forEach((function(at){jt!==at&&(lt._removeLegendItemState(at,[GD.selected,GD.selectedHover,GD.focus],nt),lt._setLegendItemState(at,GD.unSelected,nt))})))}else{null===(Bt=lt._itemsContainer)||void 0===Bt||Bt.getChildren().forEach((function(nt){nt.removeState(GD.focus)}));var ne=lt.attribute.allowAllCanceled,re=void 0===ne||ne,ae=jt.hasState(GD.selected),oe=lt._getSelectedLegends();if("multiple"===Kt){if(!1===re&&ae&&1===oe.length)return void lt._dispatchLegendEvent(UD.legendItemClick,jt,nt);ae?(lt._removeLegendItemState(jt,[GD.selected,GD.selectedHover],nt),lt._setLegendItemState(jt,GD.unSelected,nt)):(lt._setLegendItemState(jt,GD.selected,nt),lt._removeLegendItemState(jt,[GD.unSelected,GD.unSelectedHover],nt))}else lt._setLegendItemState(jt,GD.selected,nt),lt._removeLegendItemState(jt,[GD.unSelected,GD.unSelectedHover],nt),null===(Lt=lt._itemsContainer)||void 0===Lt||Lt.getChildren().forEach((function(at){jt!==at&&(lt._removeLegendItemState(at,[GD.selected,GD.selectedHover],nt),lt._setLegendItemState(at,GD.unSelected,nt))}))}lt._dispatchLegendEvent(UD.legendItemClick,jt,nt)}},lt}return h(e,nt),o(e,[{"key":"render","value":function(){y(e,"render",this,3)([]),this._lastActiveItem=null}},{"key":"setSelected","value":function(nt){var at,lt=this;(null===(at=this._itemsContainer)||void 0===at?void 0:at.getChildren()).forEach((function(at){var Rt=at.data;nt.includes(Rt.label)?(lt._setLegendItemState(at,GD.selected),lt._removeLegendItemState(at,[GD.unSelected,GD.unSelectedHover])):(lt._removeLegendItemState(at,[GD.selected,GD.selectedHover]),lt._setLegendItemState(at,GD.unSelected))}))}},{"key":"_renderItems","value":function(){for(var nt,at=this.attribute,lt=at.item,Rt=void 0===lt?{}:lt,Bt=at.maxCol,Lt=void 0===Bt?1:Bt,Ht=at.maxRow,jt=void 0===Ht?2:Ht,$t=at.maxWidth,Kt=at.defaultSelected,te=at.lazyload,ne=at.autoPage,re=Rt.spaceCol,ae=void 0===re?16:re,oe=Rt.spaceRow,se=void 0===oe?8:oe,le=Rt.verticalAlign,ue=void 0===le?"middle":le,ce=this._itemsContainer,he=this._itemContext,de=he.items,fe=he.isHorizontal,pe=he.startIndex,ve=he.isScrollbar,Ae=ve?1:fe?jt:Lt,we=this._contentMaxHeight,Ce=this._itemContext,je=Ce.doWrap,Ne=Ce.maxWidthInCol,Ve=Ce.startX,Ge=Ce.startY,ti=Ce.pages,li=0,hi=0,di=[],fi=pe,pi=de.length;fi<pi&&!(te&&ti>this._itemContext.currentPage*Ae);fi++){te&&(this._itemContext.startIndex=fi+1),(nt=de[fi]).id||(nt.id=nt.label),nt.index=fi;var vi=!0;X(Kt)&&(vi=Kt.includes(nt.label));var mi=this._renderEachItem(nt,vi,fi,de),_i=mi.attribute.width,bi=mi.attribute.height;this._itemHeight=Math.max(this._itemHeight,bi),Ne=Math.max(_i,Ne),this._itemMaxWidth=Math.max(_i,this._itemMaxWidth),fe?(N($t)&&(ve&&ne?je=(ti=Math.ceil((Ve+_i)/$t))>1:Ve+_i>$t&&(je=!0,Ve>0&&("middle"!==ue&&"bottom"!==ue||di.forEach((function(nt){nt.setAttributes({"y":nt.attribute.y+(hi-nt.attribute.height)/("middle"===ue?2:1)})})),ti+=1,Ve=0,Ge+=hi+se,hi=0,di.length=0))),0===Ve&&0===Ge||mi.setAttributes({"x":Ve,"y":Ge}),Ve+=ae+_i,hi=Math.max(hi,bi),di.push(mi)):(N(we)&&(ve&&ne?je=(ti=Math.ceil((Ge+bi)/we))>1:we<=bi?(ti+=1,je=!0,Ge=0,fi>0&&(Ve+=li+ae)):we<Ge+bi&&(ti+=1,je=!0,Ge=0,Ve+=Ne+ae,Ne=0)),0===Ve&&0===Ge||mi.setAttributes({"x":Ve,"y":Ge}),Ge+=se+bi),ce.add(mi),li=_i}return!fe||"middle"!==ue&&"bottom"!==ue||di.forEach((function(nt){nt.setAttributes({"y":nt.attribute.y+(hi-nt.attribute.height)/("middle"===ue?2:1)})})),this._itemContext.doWrap=je,this._itemContext.startX=Ve,this._itemContext.startY=Ge,this._itemContext.maxWidthInCol=Ne,this._itemContext.pages=ti,this._itemContext.maxPages=Ae,ve&&(this._itemContext.totalPage=ti),te||(this._itemContext.startIndex=de.length),this._itemContext}},{"key":"_renderContent","value":function(){var nt=this.attribute,at=nt.item,lt=void 0===at?{}:at,Rt=nt.items,Bt=nt.reversed,Lt=nt.maxWidth,Ht=nt.maxHeight;if(!1!==lt.visible&&!ot(Rt)){var jt=Rt;Bt&&(jt=null==Rt?void 0:Rt.reverse()),this._contentMaxHeight=Math.max(0,Ht-this._parsedPadding[0]-this._parsedPadding[2]);var $t=Hy.group({"x":0,"y":0});this._itemsContainer=$t;var Kt=this.attribute,te=Kt.layout,ne=Kt.autoPage,re="horizontal"===te,ae=lt.maxWidth,oe=lt.width,se=lt.height,le=[];N(ae)&&le.push(ae),N(oe)&&le.push(oe),le.length&&(N(Lt)&&le.push(Lt),this._itemWidthByUser=At(le)),N(se)&&(this._itemHeightByUser=se);var ue=this.attribute.pager;this._itemContext={"currentPage":ue&&ue.defaultCurrent||1,"doWrap":!1,"maxWidthInCol":0,"maxPages":1,"pages":1,"startX":0,"startY":0,"startIndex":0,"items":jt,"isHorizontal":re,"totalPage":1/0,"isScrollbar":ue&&"scrollbar"===ue.type,"clipContainer":void 0},this._itemContext=this._renderItems();var ce=!1;this._itemContext.doWrap&&ne&&this._itemContext.pages>this._itemContext.maxPages&&(ce=this._renderPagerComponent()),ce||($t.setAttribute("y",this._title?this._title.AABBBounds.height()+st(this.attribute,"title.space",8):0),this._innerView.add($t))}}},{"key":"_bindEvents","value":function(){if(!this.attribute.disableTriggerEvent&&this._itemsContainer){var nt=this.attribute,at=nt.hover,lt=void 0===at||at,Rt=nt.select,Bt=void 0===Rt||Rt;if(lt){var Lt="pointermove",Ht="pointerleave";V(lt)&&(lt.trigger&&(Lt=lt.trigger),lt.triggerOff&&(Ht=lt.triggerOff)),this._itemsContainer.addEventListener(Lt,this._onHover),this._itemsContainer.addEventListener(Ht,this._onUnHover)}if(Bt){var jt="pointerdown";V(Bt)&&Bt.trigger&&(jt=Bt.trigger),this._itemsContainer.addEventListener(jt,this._onClick)}}}},{"key":"_autoEllipsis","value":function(nt,at,lt,Rt){var Bt,Lt,Ht=this.attribute.item,jt=Ht.label,$t=Ht.value,Kt=Rt.AABBBounds,te=lt.AABBBounds,ne=Kt.width(),re=te.width(),ae=!1;"labelFirst"===nt?re>at?ae=!0:Rt.setAttribute("maxLineWidth",at-re):"valueFirst"===nt?ne>at?ae=!0:lt.setAttribute("maxLineWidth",at-ne):ne+re>at&&(ae=!0),ae&&(Rt.setAttribute("maxLineWidth",Math.max(at*(null!==(Bt=jt.widthRatio)&&void 0!==Bt?Bt:.5),at-re)),lt.setAttribute("maxLineWidth",Math.max(at*(null!==(Lt=$t.widthRatio)&&void 0!==Lt?Lt:.5),at-ne)))}},{"key":"_renderEachItem","value":function(nt,at,lt,Rt){var Bt,Lt,Ht,jt=nt.id,$t=nt.label,Kt=nt.value,te=nt.shape,ne=this.attribute.item,re=ne.padding,ae=void 0===re?0:re,oe=ne.focus,se=ne.focusIconStyle,le=ne.align,ue=ne.autoEllipsisStrategy,ce=this.attribute.item,he=ce.shape,de=ce.label,fe=ce.value,pe=ce.background,ve=this._handleStyle(he,nt,at,lt,Rt),Ae=this._handleStyle(de,nt,at,lt,Rt),we=this._handleStyle(fe,nt,at,lt,Rt),Ce=this._handleStyle(pe,nt,at,lt,Rt),je=Ci(ae);!1===pe.visible?(Ht=Hy.group({"x":0,"y":0,"cursor":null===(Bt=Ce.style)||void 0===Bt?void 0:Bt.cursor}),this._appendDataToShape(Ht,YD.item,nt,Ht)):(Ht=Hy.group(Object.assign({"x":0,"y":0},Ce.style)),this._appendDataToShape(Ht,YD.item,nt,Ht,Ce.state)),Ht.id="".concat(null!=jt?jt:$t,"-").concat(lt),Ht.addState(at?GD.selected:GD.unSelected);var Ne=Hy.group({"x":0,"y":0,"pickable":!1});Ht.add(Ne);var Ve,Ge=0,ti=0,li=0;if(he&&!1!==he.visible){var hi=st(ve,"style.size",10);ti=X(hi)?hi[0]||0:hi,li=st(he,"space",8);var di=Hy.symbol(Object.assign(Object.assign({"x":0,"y":0,"symbolType":"circle","strokeBoundsBuffer":0},te),ve.style));Object.keys(ve.state||{}).forEach((function(nt){var at=ve.state[nt].fill||ve.state[nt].stroke;te.fill&&j(ve.state[nt].fill)&&at&&(ve.state[nt].fill=at),te.stroke&&j(ve.state[nt].stroke)&&at&&(ve.state[nt].stroke=at)})),this._appendDataToShape(di,YD.itemShape,nt,Ht,ve.state),di.addState(at?GD.selected:GD.unSelected),Ne.add(di)}var fi=0;if(oe){var pi=st(se,"size",10);Ve=Hy.symbol(Object.assign(Object.assign({"x":0,"y":-pi/2-1,"strokeBoundsBuffer":0,"boundsPadding":je},se),{"visible":!0,"pickMode":"imprecise"})),this._appendDataToShape(Ve,YD.focus,nt,Ht),fi=pi}var vi=de.formatMethod?de.formatMethod($t,nt,lt):$t,mi=uR(Object.assign(Object.assign({"x":ti/2+li,"y":0,"textAlign":"start","textBaseline":"middle","lineHeight":null===(Lt=Ae.style)||void 0===Lt?void 0:Lt.fontSize},Ae.style),{"text":vi,"_originText":de.formatMethod?$t:void 0}));this._appendDataToShape(mi,YD.itemLabel,nt,Ht,Ae.state),mi.addState(at?GD.selected:GD.unSelected),Ne.add(mi);var _i=st(de,"space",8);if(N(Kt)){var bi=st(fe,"space",oe?8:0),Mi=fe.formatMethod?fe.formatMethod(Kt,nt,lt):Kt,Ti=uR(Object.assign(Object.assign({"x":0,"y":0,"textAlign":"start","textBaseline":"middle","lineHeight":we.style.fontSize},we.style),{"text":Mi,"_originText":fe.formatMethod?Kt:void 0}));if(this._appendDataToShape(Ti,YD.itemValue,nt,Ht,we.state),Ti.addState(at?GD.selected:GD.unSelected),this._itemWidthByUser){var Ii=this._itemWidthByUser-je[1]-je[3]-ti-li-_i-fi-bi;this._autoEllipsis(ue,Ii,mi,Ti),fe.alignRight?Ti.setAttributes({"textAlign":"right","x":this._itemWidthByUser-ti/2-je[1]-je[3]-fi-bi}):Ti.setAttribute("x",_i+(mi.AABBBounds.empty()?0:mi.AABBBounds.x2))}else Ti.setAttribute("x",_i+(mi.AABBBounds.empty()?0:mi.AABBBounds.x2));Ge=bi+(Ti.AABBBounds.empty()?0:Ti.AABBBounds.x2),Ne.add(Ti)}else this._itemWidthByUser?(mi.setAttribute("maxLineWidth",this._itemWidthByUser-je[1]-je[3]-ti-li-fi),Ge=_i+(mi.AABBBounds.empty()?0:mi.AABBBounds.x2)):Ge=_i+(mi.AABBBounds.empty()?0:mi.AABBBounds.x2);Ve&&(Ve.setAttribute("x",Ge),Ne.add(Ve));var Bi=Ne.AABBBounds,zi=Bi.width();if("right"===le){var Wi=Bi.x2,Ui=Bi.x1;Ne.forEachChildren((function(nt,at){"symbol"!==nt.type&&"right"!==nt.attribute.textAlign||nt===Ve?nt.setAttribute("x",Ui+Wi-nt.attribute.x-nt.AABBBounds.width()):"symbol"!==nt.type?nt.setAttributes({"x":Ui+Wi-nt.attribute.x,"textAlign":"left"}):nt.setAttribute("x",Ui+Wi-nt.attribute.x)}))}var $i=Bi.height(),qi=N(this.attribute.item.width)?this.attribute.item.width:zi+je[1]+je[3],Ki=this._itemHeightByUser||$i+je[0]+je[2];return Ht.attribute.width=qi,Ht.attribute.height=Ki,Ve&&Ve.setAttribute("visible",!1),Ne.translateTo(-Bi.x1+je[3],-Bi.y1+je[0]),Ht}},{"key":"_createPager","value":function(nt){var at,lt,Rt=this.attribute,Bt=Rt.disableTriggerEvent,Lt=Rt.maxRow,o=function(nt){return nt<=99?99:nt<=999?999:9999};return this._itemContext.isHorizontal?new ZD(Object.assign(Object.assign({"layout":1===Lt?"horizontal":"vertical","total":o(this._itemContext.pages)},ft({"handler":{"preShape":"triangleUp","nextShape":"triangleDown"}},nt)),{"defaultCurrent":null===(at=this.attribute.pager)||void 0===at?void 0:at.defaultCurrent,"disableTriggerEvent":Bt})):new ZD(Object.assign({"layout":"horizontal","total":o(this._itemContext.pages),"disableTriggerEvent":Bt,"defaultCurrent":null===(lt=this.attribute.pager)||void 0===lt?void 0:lt.defaultCurrent},nt))}},{"key":"_createScrollbar","value":function(nt,at){var lt=this.attribute.disableTriggerEvent;return this._itemContext.isHorizontal?new mR(Object.assign(Object.assign({"direction":"horizontal","disableTriggerEvent":lt,"range":[0,.5],"height":!1===nt.visible?0:12},nt),{"width":at})):new mR(Object.assign(Object.assign({"direction":"vertical","width":!1===nt.visible?0:12,"range":[0,.5]},nt),{"height":at,"disableTriggerEvent":lt}))}},{"key":"_updatePositionOfPager","value":function(nt,at,lt){var Rt,Bt,Lt=this.attribute.pager,Ht=this._itemContext,jt=Ht.totalPage,$t=Ht.isHorizontal,Kt=Lt&&Lt.position||"middle";this._pagerComponent.setTotal(jt),$t?(Rt="start"===Kt?nt:"end"===Kt?nt+lt-this._pagerComponent.AABBBounds.height()/2:nt+lt/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({"x":at-this._pagerComponent.AABBBounds.width(),"y":Rt})):(Bt="start"===Kt?0:"end"===Kt?at-this._pagerComponent.AABBBounds.width():(at-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({"x":Bt,"y":lt-this._pagerComponent.AABBBounds.height()}))}},{"key":"_computeScrollbarDelta","value":function(){var nt=this._itemContext,at=nt.isHorizontal,lt=nt.clipContainer,Rt=this._itemsContainer.AABBBounds,Bt=lt.AABBBounds;return at?Bt.width()/Rt.width():Bt.height()/Rt.height()}},{"key":"_updatePositionOfScrollbar","value":function(nt,at,lt){var Rt=this._itemContext,Bt=Rt.isHorizontal,Lt=(Rt.currentPage-1)/Rt.totalPage;this._pagerComponent.setScrollRange([Lt,Lt+this._computeScrollbarDelta()]),Bt?this._pagerComponent.setAttributes({"x":0,"y":lt+at}):this._pagerComponent.setAttributes({"x":nt,"y":lt})}},{"key":"_bindEventsOfPager","value":function(nt,at){var lt=this,Rt=this.attribute.pager||{},Bt=Rt.animation,Lt=void 0===Bt||Bt,Ht=Rt.animationDuration,jt=void 0===Ht?450:Ht,$t=Rt.animationEasing,Kt=void 0===$t?"quadIn":$t,te=this._itemContext.isScrollbar?function(nt){var at=nt.detail.value;return 0===at[0]?1:1===at[1]?lt._itemContext.totalPage:at[0]*lt._itemContext.totalPage+1}:function(nt){return nt.detail.current},d=function(Rt){var Bt=te(Rt);if(Bt!==lt._itemContext.currentPage){if(lt._itemContext.currentPage=Bt,lt._itemContext&&lt._itemContext.startIndex<lt._itemContext.items.length){lt._renderItems();var Ht=Math.ceil(lt._itemContext.pages/lt._itemContext.maxPages);if(lt._itemContext.totalPage=Ht,lt._itemContext.isScrollbar&&lt._pagerComponent){var $t=lt._computeScrollbarDelta(),ne=g(lt._pagerComponent.getScrollRange(),1)[0];lt._pagerComponent.setScrollRange([ne,ne+$t])}}if(lt._itemContext.isScrollbar){var re=g(lt._pagerComponent.getScrollRange(),1)[0],ae=(lt._itemContext.isHorizontal?lt._itemsContainer.AABBBounds.width():lt._itemsContainer.AABBBounds.height())*re;lt.updateScrollMask(),Lt?lt._itemsContainer.animate().to(l({},at,-ae),jt,Kt):lt._itemsContainer.setAttribute(at,-ae)}else Lt?lt._itemsContainer.animate().to(l({},at,-(Bt-1)*nt),jt,Kt):lt._itemsContainer.setAttribute(at,-(Bt-1)*nt)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",d),this._pagerComponent.addEventListener("scrollUp",d),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",(function(nt){return nt.nativeEvent.preventDefault()})),this.addEventListener("wheel",Zt((function(nt){var at=lt._pagerComponent,Rt=at.getScrollRange(),Bt=at.attribute.direction,Lt=at.getSliderRenderBounds(),Ht=Lt.width,jt=Lt.height,$t="vertical"===Bt?nt.deltaY/jt:nt.deltaX/Ht;at.setScrollRange([Rt[0]+$t,Rt[1]+$t],!0),lt.updateScrollMask()}),50)))):(this._pagerComponent.addEventListener("toPrev",d),this._pagerComponent.addEventListener("toNext",d))}},{"key":"_renderPager","value":function(){var nt,at=this,lt=this._title?this._title.AABBBounds.height()+st(this.attribute,"title.space",8):0,Rt=this.attribute,Bt=Rt.maxWidth,Lt=Rt.maxCol,Ht=void 0===Lt?1:Lt,jt=Rt.maxRow,$t=void 0===jt?2:jt,Kt=Rt.item,te=void 0===Kt?{}:Kt,ne=Rt.pager,re=void 0===ne?{}:ne,ae=te.spaceCol,oe=void 0===ae?16:ae,se=te.spaceRow,le=void 0===se?8:se,ue=this._itemsContainer,ce=re.space,he=void 0===ce?12:ce,de=re.defaultCurrent,fe=void 0===de?1:de,pe=qD(re,["space","defaultCurrent"]),ve=this._itemContext.isHorizontal,Ae=this._contentMaxHeight,we=0,Ce=0,je=0,Ne=0,Ve=0,Ge=0,ti=1;if(ve){if(Ce=($t-1)*le+this._itemHeight*$t,we=Bt,nt=this._createPager(pe),this._pagerComponent=nt,this._innerView.add(nt),(je=Bt-nt.AABBBounds.width()-he)<=0)return this._innerView.removeChild(nt),!1;ue.getChildren().forEach((function(nt,at){var lt=nt.attribute,Rt=lt.width,Bt=lt.height;je<Ve+Rt&&(Ve=0,Ge+=Bt+le,ti+=1),at>0&&nt.setAttributes({"x":Ve,"y":Ge}),Ve+=oe+Rt})),this._itemContext.startX=Ve,this._itemContext.startY=Ge,this._itemContext.pages=ti;var li=Math.ceil(ti/$t);this._itemContext.totalPage=li,this._updatePositionOfPager(lt,we,Ce)}else{if(we=this._itemMaxWidth*Ht+(Ht-1)*oe,Ce=Ae,je=we,nt=this._createPager(pe),this._pagerComponent=nt,this._innerView.add(nt),(Ne=Ae-nt.AABBBounds.height()-he-lt)<=0)return this._innerView.removeChild(nt),!1;ue.getChildren().forEach((function(nt,lt){var Rt=nt.attribute.height;Ne<Ge+Rt&&(Ge=0,Ve+=at._itemMaxWidth+oe,ti+=1),lt>0&&nt.setAttributes({"x":Ve,"y":Ge}),Ge+=le+Rt}));var hi=Math.ceil(ti/Ht);this._itemContext.totalPage=hi,this._updatePositionOfPager(lt,we,Ce)}fe>1&&(ve?ue.setAttribute("y",-(fe-1)*(Ce+le)):ue.setAttribute("x",-(fe-1)*(we+oe)));var di=Hy.group({"x":0,"y":lt,"width":ve?je:we,"height":ve?Ce:Ne,"clip":!0,"pickable":!1});return di.add(ue),this._innerView.add(di),this._itemContext.clipContainer=di,this._bindEventsOfPager(ve?Ce+le:we+oe,ve?"y":"x"),!0}},{"key":"_renderScrollbar","value":function(){var nt,at=this._title?this._title.AABBBounds.height()+st(this.attribute,"title.space",8):0,lt=this.attribute,Rt=lt.maxWidth,Bt=lt.item,Lt=void 0===Bt?{}:Bt,Ht=lt.pager,jt=void 0===Ht?{}:Ht,$t=Lt.spaceCol,Kt=void 0===$t?16:$t,te=Lt.spaceRow,ne=void 0===te?8:te,re=this._itemsContainer;jt.space;var ae,oe=jt.defaultCurrent,se=void 0===oe?1:oe,le=qD(jt,["space","defaultCurrent"]),ue=this._itemContext.isHorizontal,ce=this._contentMaxHeight,he=0,de=0,fe=0,pe=1;if(ue)he=Rt,de=this._itemHeight,ae=this._createScrollbar(le,he),this._pagerComponent=ae,this._innerView.add(ae);else{if(de=ce-at,he=this._itemMaxWidth,ae=this._createScrollbar(le,de),this._pagerComponent=ae,this._innerView.add(ae),de<=0)return this._innerView.removeChild(ae),!1;var ve=re.getChildren(),Ae=ve.map((function(nt){return nt.attribute.height}));if(1===Ae.length||Ae.every((function(nt){return nt===Ae[0]}))){var we=Ae[0],Ce=de,je=Math.floor(Ce/(ne+we));de=je*(ne+we),pe=Math.ceil(ve.length/je)}else ve.forEach((function(nt,at){var lt=nt.attribute.height,Rt=pe,Bt=fe;pe=Math.floor((fe+lt)/de)+1,fe+=ne+lt,Rt!==pe&&at===re.getChildren().length-1&&fe-de>=1/3*lt&&(de=Bt+lt,pe-=1)}));this._itemContext.totalPage=pe,this._itemContext.pages=pe}if(se>1)if(ue){var Ne=this._itemsContainer.AABBBounds.width()-he;re.setAttribute("x",-Math.min((se-1)*(he+Kt),Ne))}else{var Ve=this._itemsContainer.AABBBounds.height()-de;re.setAttribute("y",-Math.min((se-1)*(de+ne),Ve))}var Ge=Hy.group({"x":0,"y":at,"width":he,"height":de,"clip":!0,"pickable":!1});return Ge.add(re),this._innerView.add(Ge),this._itemContext.clipContainer=Ge,this._updatePositionOfScrollbar(he,de,at),(null===(nt=jt.scrollMask)||void 0===nt?void 0:nt.visible)&&this.renderScrollMask(Ge),this._bindEventsOfPager(ue?he:de,ue?"x":"y"),!0}},{"key":"renderScrollMask","value":function(nt){var at=this.attribute.pager.scrollMask,lt=void 0===at?{}:at,Rt=lt.visible,Bt=void 0===Rt||Rt,Lt=lt.gradientLength,Ht=void 0===Lt?16:Lt,jt=lt.gradientStops;if(Bt&&jt){var $t=nt.AABBBounds.width(),Kt=nt.AABBBounds.height(),te=this._itemContext.isHorizontal?$t:Kt,ne=jt.map((function(nt){return{"offset":Ht*nt.offset/te,"color":nt.color}})),re=jt.map((function(nt){return{"offset":(te-Ht*nt.offset)/te,"color":nt.color}})),ae=Hy.rect({"x":0,"y":0,"width":$t,"height":Kt});this._scrollMask=ae,this._scrollMaskContext={"startStops":ne,"endStops":re},this.updateScrollMask(),nt.add(ae)}}},{"key":"updateScrollMask","value":function(){if(this._scrollMask&&this._pagerComponent&&this._itemContext.isScrollbar){var nt=g(this._pagerComponent.getScrollRange(),2),at=nt[0],lt=nt[1],Rt=[];Nt(Ut(lt,0,1),1)||Rt.push.apply(Rt,m(this._scrollMaskContext.endStops)),Nt(Ut(at,0,1),0)||Rt.push.apply(Rt,m(this._scrollMaskContext.startStops)),Rt.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({"fill":{"gradient":"linear","x0":0,"y0":0,"x1":1,"y1":0,"stops":Rt}}):this._scrollMask.setAttributes({"fill":{"gradient":"linear","x0":0,"y0":0,"x1":0,"y1":1,"stops":Rt}}))}}},{"key":"_renderPagerComponent","value":function(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}},{"key":"_hover","value":function(nt,at){this._lastActiveItem=nt,nt.hasState(GD.selected)?this._setLegendItemState(nt,GD.selectedHover,at):this._setLegendItemState(nt,GD.unSelectedHover,at);var lt=nt.getChildren()[0].find((function(nt){return nt.name===YD.focus}),!1);lt&&lt.setAttribute("visible",!0),this._dispatchLegendEvent(UD.legendItemHover,nt,at)}},{"key":"_unHover","value":function(nt,at){var lt=!1;(nt.hasState(GD.unSelectedHover)||nt.hasState(GD.selectedHover))&&(lt=!0),nt.removeState(GD.unSelectedHover),nt.removeState(GD.selectedHover),nt.getChildren()[0].getChildren().forEach((function(nt){lt||!nt.hasState(GD.unSelectedHover)&&!nt.hasState(GD.selectedHover)||(lt=!0),nt.removeState(GD.unSelectedHover),nt.removeState(GD.selectedHover)}));var Rt=nt.getChildren()[0].find((function(nt){return nt.name===YD.focus}),!1);Rt&&Rt.setAttribute("visible",!1),lt&&this._dispatchLegendEvent(UD.legendItemAttributeUpdate,nt,at),this._dispatchLegendEvent(UD.legendItemUnHover,nt,at)}},{"key":"_setLegendItemState","value":function(nt,at,lt){var Rt=!1;nt.hasState(at)||(Rt=!0),nt.addState(at,!0),nt.getChildren()[0].getChildren().forEach((function(nt){nt.name!==YD.focus&&(Rt||nt.hasState(at)||(Rt=!0),nt.addState(at,!0))})),Rt&&this._dispatchLegendEvent(UD.legendItemAttributeUpdate,nt,lt)}},{"key":"_removeLegendItemState","value":function(nt,at,lt){var Rt=!1;at.forEach((function(at){!Rt&&nt.hasState(at)&&(Rt=!0),nt.removeState(at)})),nt.getChildren()[0].getChildren().forEach((function(nt){nt.name!==YD.focus&&at.forEach((function(at){!Rt&&nt.hasState(at)&&(Rt=!0),nt.removeState(at)}))})),Rt&&this._dispatchLegendEvent(UD.legendItemAttributeUpdate,nt,lt)}},{"key":"_getSelectedLegends","value":function(){var nt,at=[];return null===(nt=this._itemsContainer)||void 0===nt||nt.getChildren().forEach((function(nt){nt.hasState(GD.selected)&&at.push(nt.data)})),at}},{"key":"_appendDataToShape","value":function(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};nt.name=at,nt.data=lt,nt.delegate=Rt,nt.states=ft({},JD,Bt)}},{"key":"_dispatchLegendEvent","value":function(nt,at,lt){var Rt=this._getSelectedLegends();Rt.sort((function(nt,at){return nt.index-at.index}));var Bt=Rt.map((function(nt){return nt.label}));this._dispatchEvent(nt,{"item":at,"data":at.data,"selected":at.hasState(GD.selected),"currentSelectedItems":Rt,"currentSelected":Bt,"event":lt})}},{"key":"_handleStyle","value":function(nt,at,lt,Rt,Bt){var Lt={};return nt.style&&(H(nt.style)?Lt.style=nt.style(at,lt,Rt,Bt):Lt.style=nt.style),nt.state&&(Lt.state={},Object.keys(nt.state).forEach((function(Ht){nt.state[Ht]&&(H(nt.state[Ht])?Lt.state[Ht]=nt.state[Ht](at,lt,Rt,Bt):Lt.state[Ht]=nt.state[Ht])}))),Lt}},{"key":"release","value":function(){y(e,"release",this,3)([]),this.removeAllEventListeners()}}])}(QD);function $D(nt){return X(nt)?nt:[nt,nt]}function tO(nt){return nt?"ew-resize":"ns-resize"}oL.defaultAttributes={"layout":"horizontal","title":{"align":"start","space":12,"textStyle":{"fontSize":12,"fontWeight":"bold","fill":"#2C3542"}},"item":{"spaceCol":16,"spaceRow":8,"shape":{"space":8,"style":{"size":10,"cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"opacity":.5}}},"label":{"space":8,"style":{"fontSize":12,"fill":"#2C3542","cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"fill":"#D8D8D8"}}},"value":{"alignRight":!1,"style":{"fontSize":12,"fill":"#ccc","cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"fill":"#D8D8D8"}}},"background":{"style":{"cursor":"pointer"}},"focus":!1,"focusIconStyle":{"size":10,"symbolType":"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z","fill":"#333","cursor":"pointer"}},"autoPage":!0,"pager":{"space":12,"handler":{"style":{"size":10},"space":4}},"hover":!0,"select":!0,"selectMode":"multiple","allowAllCanceled":!0},function(nt){nt.innerView="innerView",nt.railContainer="sliderRailContainer",nt.rail="sliderRail",nt.startText="sliderStartText",nt.endText="sliderEndText",nt.startHandler="sliderStartHandler",nt.startHandlerText="startHandlerText",nt.endHandler="sliderEndHandler",nt.endHandlerText="sliderEndHandlerText",nt.track="sliderTrack",nt.trackContainer="sliderTrackContainer"}(aL||(aL={})),XD();var lL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="slider",lt._isHorizontal=!0,lt._startHandler=null,lt._endHandler=null,lt._startHandlerText=null,lt._endHandlerText=null,lt._currentHandler=null,lt._currentValue={},lt._onTooltipShow=function(nt){lt._isChanging||lt._tooltipState&&lt._tooltipState.isActive||(lt._tooltipState?lt._tooltipState.isActive=!0:lt._tooltipState={"isActive":!0},lt._onTooltipUpdate(nt),lt._dispatchTooltipEvent("sliderTooltipShow"))},lt._onTooltipUpdate=function(nt){if(!lt._isChanging&&lt._tooltipState&&lt._tooltipState.isActive){var at=lt._isHorizontal?lt._rail.globalAABBBounds.width():lt._rail.globalAABBBounds.height(),Rt=Ut(lt._isHorizontal?(nt.viewX-lt._rail.globalAABBBounds.x1)/at:(nt.viewY-lt._rail.globalAABBBounds.y1)/at,0,1);Rt!==lt._tooltipState.pos&&(lt._tooltipState.pos=Rt,lt._tooltipState.value=lt.calculateValueByPos(Rt*at),lt._updateTooltip(),lt._dispatchTooltipEvent("sliderTooltipUpdate"))}},lt._onTooltipHide=function(){var nt=lt.attribute.tooltip;nt&&nt.alwaysShow||(lt._tooltipState=null,lt._tooltipShape&&lt._tooltipShape.setAttribute("visible",!1),lt._tooltipText&&lt._tooltipText.setAttribute("visible",!1),lt._dispatchTooltipEvent("sliderTooltipHide"))},lt._onHandlerPointerdown=function(nt){nt.stopPropagation(),lt._isChanging=!0;var at=lt.stage.eventPointTransform(nt),Rt=at.x,Bt=at.y;lt._currentHandler=nt.target,lt._prePos=lt._isHorizontal?Rt:Bt,"browser"===ax.env?(ax.addEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),ax.addEventListener("pointerup",lt._onHandlerPointerUp)):(lt.stage.addEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),lt.stage.addEventListener("pointerup",lt._onHandlerPointerUp),lt.stage.addEventListener("pointerupoutside",lt._onHandlerPointerUp))},lt._onHandlerPointerMove=function(nt){var at,Rt;nt.stopPropagation(),lt._isChanging=!0;var Bt=lt.attribute,Lt=Bt.railWidth,Ht=Bt.railHeight,jt=Bt.min;if(Bt.max!==jt){var $t,Kt,te,ne=lt.stage.eventPointTransform(nt),re=ne.x,ae=ne.y,oe=0;lt._isHorizontal?(oe=($t=re)-lt._prePos,Kt=null===(Rt=lt._currentHandler)||void 0===Rt?void 0:Rt.attribute.x,te=Lt):(oe=($t=ae)-lt._prePos,Kt=null===(at=lt._currentHandler)||void 0===at?void 0:at.attribute.y,te=Ht);var se=Ut(Kt+oe,0,te),le=lt.calculateValueByPos(se);"text"===lt._currentHandler.type?lt._updateHandlerText(lt._currentHandler,se,le):lt._updateHandler(lt._currentHandler,se,le),lt._updateTrack(),lt._prePos=$t,lt._dispatchChangeEvent()}},lt._onHandlerPointerUp=function(nt){nt.preventDefault(),lt._isChanging=!1,lt._currentHandler=null,"browser"===ax.env?(ax.removeEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),ax.removeEventListener("pointerup",lt._onHandlerPointerUp)):(lt.stage.removeEventListener("pointermove",lt._onHandlerPointerMove,{"capture":!0}),lt.stage.removeEventListener("pointerup",lt._onHandlerPointerUp),lt.stage.removeEventListener("pointerupoutside",lt._onHandlerPointerUp))},lt._onTrackPointerdown=function(nt){nt.stopPropagation(),lt._isChanging=!0;var at=lt.stage.eventPointTransform(nt),Rt=at.x,Bt=at.y;lt._prePos=lt._isHorizontal?Rt:Bt,"browser"===ax.env?(ax.addEventListener("pointermove",lt._onTrackPointerMove,{"capture":!0}),ax.addEventListener("pointerup",lt._onTrackPointerUp)):(lt.stage.addEventListener("pointermove",lt._onTrackPointerMove,{"capture":!0}),lt.stage.addEventListener("pointerup",lt._onTrackPointerUp),lt.stage.addEventListener("pointerupoutside",lt._onTrackPointerUp))},lt._onTrackPointerMove=function(nt){nt.stopPropagation(),lt._isChanging=!0;var at=lt.attribute,Rt=at.railWidth,Bt=at.railHeight,Lt=at.min,Ht=at.max,jt=at.inverse;if(Ht!==Lt){var $t,Kt,te,ne=lt._getHandlers(),re=ne.startHandler,ae=ne.endHandler,oe=lt.stage.eventPointTransform(nt),se=oe.x,le=oe.y;lt._isHorizontal?($t=se,Kt=lt._track.attribute.width,te=Rt):($t=le,Kt=lt._track.attribute.height,te=Bt);var ue=$t-lt._prePos;if(re){var ce=lt._isHorizontal?re.attribute.x:re.attribute.y,he=jt?Ut(ce+ue,Kt,te):Ut(ce+ue,0,te-Kt),de=lt.calculateValueByPos(he);lt._updateHandler(re,he,de)}if(ae){var fe=lt._isHorizontal?ae.attribute.x:ae.attribute.y,pe=jt?Ut(fe+ue,0,te-Kt):Ut(fe+ue,Kt,te),ve=lt.calculateValueByPos(pe),Ae=null==re?void 0:re.attribute;lt._updateHandler(ae,pe,ve),lt._track.setAttributes(lt._isHorizontal?{"x":Math.min(Ae.x,ae.attribute.x),"width":Math.abs(Ae.x-ae.attribute.x)}:{"y":Math.min(Ae.y,ae.attribute.y),"height":Math.abs(Ae.y-ae.attribute.y)})}lt._prePos=$t,lt._dispatchChangeEvent()}},lt._onTrackPointerUp=function(nt){nt.preventDefault(),lt._isChanging=!1,"browser"===ax.env?(ax.removeEventListener("pointermove",lt._onTrackPointerMove,{"capture":!0}),ax.removeEventListener("pointerup",lt._onTrackPointerUp)):(lt.stage.removeEventListener("pointermove",lt._onTrackPointerMove,{"capture":!0}),lt.stage.removeEventListener("pointerup",lt._onTrackPointerUp),lt.stage.removeEventListener("pointerupoutside",lt._onTrackPointerUp))},lt._onRailPointerDown=function(nt){nt.stopPropagation(),lt._isChanging=!0;var at=lt.attribute,Rt=(at.railWidth,at.railHeight,at.min);if(at.max!==Rt){var Bt,Lt,Ht,jt=lt._startHandler,$t=lt._endHandler;lt._isHorizontal?(Bt=nt.viewX-lt._rail.globalAABBBounds.x1,Lt=null==jt?void 0:jt.attribute.x,Ht=null==$t?void 0:$t.attribute.x):(Bt=nt.viewY-lt._rail.globalAABBBounds.y1,Lt=null==jt?void 0:jt.attribute.y,Ht=null==$t?void 0:$t.attribute.y);var Kt=lt.calculateValueByPos(Bt);if(N(Ht)){var te=Math.abs(Bt-Lt)>Math.abs(Bt-Ht)?$t:jt;lt._updateHandler(te,Bt,Kt)}else lt._updateHandler(jt,Bt,Kt);lt._updateTrack(),lt._dispatchChangeEvent()}},lt}return h(e,nt),o(e,[{"key":"track","get":function(){return this._track}},{"key":"currentValue","get":function(){return this._currentValue}},{"key":"startHandler","get":function(){return this._startHandler}},{"key":"endHandler","get":function(){return this._endHandler}},{"key":"tooltipShape","get":function(){return this._tooltipShape}},{"key":"calculatePosByValue","value":function(nt,at){var lt,Rt=this.attribute,Bt=Rt.layout,Lt=Rt.railWidth,Ht=Rt.railHeight,jt=Rt.min,$t=Rt.max;return lt=jt===$t?"start"===at?0:"end"===at?1:0:(nt-jt)/($t-jt),(Rt.inverse?1-lt:lt)*("vertical"===Bt?Ht:Lt)}},{"key":"calculateValueByPos","value":function(nt){var at=this.attribute,lt=at.layout,Rt=at.railWidth,Bt=at.railHeight,Lt=at.min,Ht="vertical"===lt?Bt:Rt;return Lt+(at.max-Lt)*(at.inverse?1-nt/Ht:nt/Ht)}},{"key":"setValue","value":function(nt){var at=this.attribute,lt=at.min;if(at.max!==lt){var Rt=g(xt(nt),2),Bt=Rt[0],Lt=Rt[1],Ht=this._getHandlers(),jt=Ht.startHandler,$t=Ht.endHandler;jt&&this._updateHandler(jt,this.calculatePosByValue(Bt),Bt),$t&&this._updateHandler($t,this.calculatePosByValue(Lt),Lt),this._updateTrack()}}},{"key":"render","value":function(){var nt,at;this.removeAllChild(!0);var lt=this.attribute,Rt=lt.layout,Bt=void 0===Rt?"horizontal":Rt,Lt=lt.railWidth,Ht=lt.railHeight,jt=lt.startText,$t=lt.endText,Kt=lt.min,te=lt.max,ne=lt.showHandler,re=void 0===ne||ne,ae=lt.showTooltip,oe=this.attribute.value;j(oe)&&(oe=[Kt,te]),this._currentValue={"startValue":$D(oe)[0],"endValue":$D(oe)[1]};var se="horizontal"===Bt;this._isHorizontal=se;var le=Hy.group({"x":0,"y":0});le.name=aL.innerView,this.add(le),this._innerView=le;var ue,ce=0;if(jt&&jt.visible){(ue=Hy.text(Object.assign({"x":se?0:Lt/2,"y":se?Ht/2:0,"textAlign":se?"start":"center","textBaseline":se?"middle":"top","text":jt.text,"lineHeight":null===(nt=jt.style)||void 0===nt?void 0:nt.fontSize},jt.style))).name=aL.startText,le.add(ue);var he=N(jt.space)?jt.space:0;ce+=(se?ue.AABBBounds.width():ue.AABBBounds.height())+he}var de=Hy.group({"x":se?ce:0,"y":se?0:ce});le.add(de);var fe,pe=Hy.group({"x":0,"y":0});if(pe.name=aL.railContainer,this._railContainer=pe,de.add(pe),this._mainContainer=de,this._renderRail(pe),ce+=se?Lt:Ht,$t&&$t.visible){var ve=N($t.space)?$t.space:0;(fe=Hy.text(Object.assign({"x":se?ce+ve:Lt/2,"y":se?Ht/2:ce+ve,"textAlign":se?"start":"center","textBaseline":se?"middle":"top","text":$t.text,"lineHeight":null===(at=$t.style)||void 0===at?void 0:at.fontSize},$t.style))).name=aL.endText,le.add(fe)}this._renderTrack(pe),re&&(this._renderHandlers(de),this._bindEvents()),ae&&(this._renderTooltip(),this._bindTooltipEvents())}},{"key":"_renderRail","value":function(nt){var at=this.attribute,lt=at.railWidth,Rt=at.railHeight,Bt=at.railStyle,Lt="default";!1!==at.slidable&&(Lt="pointer");var Ht=Hy.rect(Object.assign({"x":0,"y":0,"width":lt,"height":Rt,"cursor":Lt},Bt));return Ht.name=aL.rail,nt.add(Ht),this._rail=Ht,Ht}},{"key":"_renderHandlers","value":function(nt){var at=this.attribute,lt=at.range,Rt=at.min,Bt=at.max,Lt=at.handlerSize,Ht=void 0===Lt?14:Lt,jt=at.handlerStyle,$t=at.handlerText,Kt=at.railHeight,te=at.railWidth,ne=at.slidable,re=this.attribute.value;j(re)&&(re=[Rt,Bt]);var ae=$t&&$t.visible,oe=this._isHorizontal,se=g($D(re),2),le=se[0],ue=se[1],ce=this.calculatePosByValue(le,lt?"start":"end"),he=this._renderHandler(Object.assign({"x":oe?ce:te/2,"y":oe?Kt/2:ce,"size":Ht,"strokeBoundsBuffer":0,"cursor":!1===ne?"default":tO(oe)},jt));if(he.name=aL.startHandler,this._startHandler=he,nt.add(he),this._currentValue.startPos=ce,ae){var de=this._renderHandlerText(le,lt?"start":"end");de.name=aL.startHandlerText,nt.add(de),this._startHandlerText=de}if(lt){var fe=this.calculatePosByValue(ue,"end"),pe=this._renderHandler(Object.assign({"x":oe?fe:te/2,"y":oe?Kt/2:fe,"size":Ht,"strokeBoundsBuffer":0,"cursor":!1===ne?"default":tO(oe)},jt));if(pe.name=aL.endHandler,this._endHandler=pe,nt.add(pe),this._currentValue.endPos=fe,ae){var ve=this._renderHandlerText(ue,"end");ve.name=aL.endHandlerText,nt.add(ve),this._endHandlerText=ve}}}},{"key":"_renderTrack","value":function(nt){var at,lt,Rt=this.attribute,Bt=Rt.range,Lt=Rt.min,Ht=Rt.max,jt=Rt.railHeight,$t=Rt.railWidth,Kt=Rt.trackStyle,te=Rt.railStyle,ne=Rt.slidable,re=Rt.value;if(j(re))Bt?(at=Lt,lt=Ht):at=lt=Lt;else if(Bt){var ae=Yt(re,Lt,Ht);at=ae[0],lt=ae[1]}else at=Lt,lt=Ut(re,Lt,Ht);var oe=this._isHorizontal;Bt||(at=Lt);var se=Hy.group({"x":0,"y":0,"width":$t,"height":jt,"cornerRadius":null==te?void 0:te.cornerRadius,"clip":!0,"pickable":!1});se.name=aL.trackContainer;var le,ue=V(Bt)&&!0===Bt.draggableTrack;le=!1===ne?"default":!1===Bt||!1===ue?"pointer":tO(oe);var ce=this.calculatePosByValue(at,"start"),he=this.calculatePosByValue(lt,Bt?"end":"start"),de=Hy.rect(Object.assign({"x":oe?Math.min(ce,he):0,"y":oe?0:Math.min(ce,he),"width":oe?Math.abs(he-ce):$t,"height":oe?jt:Math.abs(he-ce),"cursor":le},Kt));de.name=aL.track,this._track=de,se.add(de),nt.add(se)}},{"key":"_renderHandler","value":function(nt){return Hy.symbol(nt)}},{"key":"_renderHandlerText","value":function(nt,at){var lt,Rt,Bt,Lt=this.attribute,Ht=Lt.align,jt=Lt.handlerSize,$t=void 0===jt?14:jt,Kt=Lt.handlerText,te=void 0===Kt?{}:Kt,ne=Lt.railHeight,re=Lt.railWidth,ae=Lt.slidable,oe=this._isHorizontal,se=this.calculatePosByValue(nt,at),le=null!==(lt=te.space)&&void 0!==lt?lt:4,ue={"text":te.formatter?te.formatter(nt):nt.toFixed(null!==(Rt=te.precision)&&void 0!==Rt?Rt:0),"lineHeight":null===(Bt=te.style)||void 0===Bt?void 0:Bt.lineHeight,"cursor":!1===ae?"default":tO(oe)};return oe?"top"===Ht?(ue.textBaseline="bottom",ue.textAlign="center",ue.x=se,ue.y=(ne-$t)/2-le):(ue.textBaseline="top",ue.textAlign="center",ue.x=se,ue.y=(ne+$t)/2+le):"left"===Ht?(ue.textBaseline="middle",ue.textAlign="end",ue.x=(re-$t)/2-le,ue.y=se):(ue.textBaseline="middle",ue.textAlign="start",ue.x=(re+$t)/2+le,ue.y=se),Hy.text(Object.assign(Object.assign({},ue),te.style))}},{"key":"_renderTooltip","value":function(){var nt,at=this.attribute,lt=at.tooltip,Rt=at.railHeight,Bt=at.railWidth,Lt=at.align;lt&&lt.alwaysShow?this._tooltipState={"value":this._currentValue.startValue,"pos":this._currentValue.startPos}:this._tooltipState=null;var Ht=this._isHorizontal?0:Bt/2,jt=this._isHorizontal?Rt/2:0;if(lt&&lt.shape){var $t=Hy.symbol(Object.assign({"pickable":!1,"visible":!!this._tooltipState,"x":Ht,"y":jt,"symbolType":"circle"},lt.shapeStyle));this._tooltipShape=$t,this._mainContainer.add($t)}var Kt=lt&&lt.text||{},te=null!==(nt=Kt.space)&&void 0!==nt?nt:6,ne={"pickable":!1,"visible":!!this._tooltipState,"text":""};this._isHorizontal?(ne.x=Ht,ne.y="top"===Lt?jt-Rt/2-te:jt+Rt/2+te,ne.textAlign="center",ne.textBaseline="top"===Lt?"bottom":"top"):(ne.y=jt,ne.x="left"===Lt?Ht-Bt/2-te:jt+Bt/2+te,ne.textAlign="left"===Lt?"end":"start",ne.textBaseline="middle");var re=Hy.text(Object.assign(Object.assign({},ne),Kt.style));this._mainContainer.add(re),this._tooltipText=re,this._tooltipState&&this._updateTooltip()}},{"key":"_updateTooltip","value":function(){var nt,at;if((this._tooltipShape||this._tooltipText)&&this._tooltipState){var lt=this.attribute,Rt=lt.railWidth,Bt=lt.railHeight,Lt=this._isHorizontal?Rt:Bt,Ht=this._tooltipState.pos*Lt,jt=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes(l({"visible":!0},jt,Ht));var $t=this.attribute.align;if(this._tooltipText){var Kt=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes(l(l({"visible":!0},jt,Ht),"text",Kt.formatter?Kt.formatter(this._tooltipState.value):this._isHorizontal||"left"!==$t?" ".concat(this._tooltipState.value.toFixed(null!==(at=Kt.precision)&&void 0!==at?at:0)):"".concat(this._tooltipState.value.toFixed(null!==(nt=Kt.precision)&&void 0!==nt?nt:0)," ")))}}}},{"key":"_bindEvents","value":function(){if(!this.attribute.disableTriggerEvent){var nt=this.attribute,at=nt.slidable,lt=nt.range;at&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),V(lt)&&lt.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown))}}},{"key":"_bindTooltipEvents","value":function(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}},{"key":"_updateTrack","value":function(){var nt=this.attribute,at=nt.inverse,lt=nt.railWidth,Rt=nt.railHeight,Bt=this._startHandler,Lt=this._endHandler;if(this._isHorizontal){var Ht=null==Bt?void 0:Bt.attribute.x;if(Lt){var jt=null==Lt?void 0:Lt.attribute.x;this._track.setAttributes({"x":Math.min(Ht,jt),"width":Math.abs(Ht-jt)})}else at?this._track.setAttributes({"x":Ht,"width":lt-Ht}):this._track.setAttributes({"width":Ht})}else{var $t=null==Bt?void 0:Bt.attribute.y;if(Lt){var Kt=null==Lt?void 0:Lt.attribute.y;this._track.setAttributes({"y":Math.min($t,Kt),"height":Math.abs($t-Kt)})}else at?this._track.setAttributes({"y":$t,"height":Rt-$t}):this._track.setAttributes({"height":$t})}}},{"key":"_updateHandler","value":function(nt,at,lt){var Rt,Bt=this._isHorizontal;nt.setAttribute(Bt?"x":"y",at);var Lt=nt.name===aL.startHandler?this._startHandlerText:this._endHandlerText;if(Lt){var Ht=this.attribute.handlerText,jt=void 0===Ht?{}:Ht;Lt.setAttributes(l({"text":jt.formatter?jt.formatter(lt):lt.toFixed(null!==(Rt=jt.precision)&&void 0!==Rt?Rt:0)},Bt?"x":"y",at))}nt.name===aL.startHandler?(this._currentValue.startValue=lt,this._currentValue.startPos=at):(this._currentValue.endValue=lt,this._currentValue.endPos=at)}},{"key":"_updateHandlerText","value":function(nt,at,lt){var Rt,Bt=this._isHorizontal,Lt=this.attribute.handlerText,Ht=void 0===Lt?{}:Lt;nt.setAttributes(l(l({},Bt?"x":"y",at),"text",Ht.formatter?Ht.formatter(lt):lt.toFixed(null!==(Rt=Ht.precision)&&void 0!==Rt?Rt:0)));var jt=nt.name===aL.startHandlerText?this._startHandler:this._endHandler;jt&&jt.setAttributes(l({},Bt?"x":"y",at)),nt.name===aL.startHandlerText?(this._currentValue.startValue=lt,this._currentValue.startPos=at):(this._currentValue.endValue=lt,this._currentValue.endPos=at)}},{"key":"_dispatchChangeEvent","value":function(){var nt=!!this.attribute.range,at=this._currentValue;this._dispatchEvent("change",{"value":nt?[Math.min(at.endValue,at.startValue),Math.max(at.endValue,at.startValue)]:at.startValue,"position":nt?[Math.min(at.endPos,at.startPos),Math.max(at.endPos,at.startPos)]:at.startPos})}},{"key":"_dispatchTooltipEvent","value":function(nt){this._dispatchEvent("sliderTooltip",{"type":nt,"position":this._tooltipState&&this._tooltipState.pos,"value":this._tooltipState&&this._tooltipState.value})}},{"key":"_getHandlers","value":function(){var nt,at,lt=this.attribute.inverse,Rt=this._startHandler,Bt=this._endHandler;return Bt?(this._isHorizontal?(!lt&&Bt.attribute.x<(null==Rt?void 0:Rt.attribute.x)||lt&&Bt.attribute.x>(null==Rt?void 0:Rt.attribute.x))&&(Rt=(nt=[Bt,Rt])[0],Bt=nt[1]):(!lt&&Bt.attribute.y<(null==Rt?void 0:Rt.attribute.y)||lt&&Bt.attribute.y>(null==Rt?void 0:Rt.attribute.y))&&(Rt=(at=[Bt,Rt])[0],Bt=at[1]),{"startHandler":Rt,"endHandler":Bt}):{"startHandler":Rt,"endHandler":Bt}}}])}(xS);lL.defaultAttributes={"slidable":!0,"layout":"horizontal","align":"bottom","height":8,"showHandler":!0,"handlerSize":14,"handlerStyle":{"symbolType":"circle","fill":"#fff","stroke":"#91caff","lineWidth":2},"tooltip":{"shapeStyle":{"symbolType":"circle","fill":"#fff","stroke":"#91caff","lineWidth":2},"text":{"style":{"fill":"#2C3542","fontSize":12}}},"railStyle":{"fill":"rgba(0,0,0,.04)"},"trackStyle":{"fill":"#91caff"},"showValue":!0,"valueStyle":{"fill":"#2C3542","fontSize":12},"startText":{"style":{"fill":"#2C3542","fontSize":12}},"endText":{"style":{"fill":"#2C3542","fontSize":12}},"handlerText":{"visible":!0,"space":4,"precision":0,"style":{"fill":"#2C3542","fontSize":12}}},KD(),XD();var dL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="colorLegend",lt._onSliderToolipChange=function(nt){var at=lt._slider.tooltipShape;if(at&&nt.detail&&!j(nt.detail.value)){var Rt=lt._colorScale.scale(nt.detail.value);at.setAttribute("fill",Rt)}lt.dispatchEvent(nt)},lt._onSliderChange=function(nt){lt._updateColor(),lt.dispatchEvent(nt)},lt}return h(e,nt),o(e,[{"key":"setSelected","value":function(nt){this._slider&&(this._slider.setValue(nt),this._updateColor())}},{"key":"_renderContent","value":function(){for(var nt=this.attribute,at=nt.colors,lt=nt.slidable,Rt=nt.layout,Bt=nt.align,Lt=nt.min,Ht=nt.max,jt=nt.value,$t=nt.railWidth,Kt=nt.railHeight,te=nt.showHandler,ne=void 0===te||te,re=nt.handlerSize,ae=nt.handlerStyle,oe=nt.railStyle,se=nt.trackStyle,le=nt.startText,ue=nt.endText,ce=nt.handlerText,he=nt.showTooltip,de=nt.tooltip,fe=nt.inverse,pe=nt.disableTriggerEvent,ve=[],Ae=(Ht-Lt)/(at.length-1),we=0;we<at.length;we++)ve.push(Lt+Ae*we);this._colorScale=(new EB).domain(ve,!0).range(at),this._color=this._getTrackColor();var Ce=new lL({"x":0,"y":0,"range":{"draggableTrack":!0},"slidable":lt,"layout":Rt,"align":Bt,"min":Lt,"max":Ht,"value":jt,"railWidth":$t,"railHeight":Kt,"showHandler":ne,"handlerSize":re,"handlerStyle":ae,"railStyle":oe,"trackStyle":Object.assign({"fill":this._color},se),"startText":le,"endText":ue,"handlerText":ce,"showTooltip":he,"tooltip":de,"disableTriggerEvent":pe,"inverse":fe});this._innerView.add(Ce),this._slider=Ce,Ce.translateTo(0-Ce.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+st(this.attribute,"title.space",12):0)-Ce.AABBBounds.y1),this._updateColor()}},{"key":"_bindEvents","value":function(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}},{"key":"_getTrackColor","value":function(){var nt=this.attribute,at=nt.colors,lt=nt.layout,Rt=nt.inverse;if(!ot(at)){var Bt=at.length;if(1===Bt)return at[0];for(var Lt=[],Ht=0;Ht<Bt;Ht++){var jt=Ht/(Bt-1);Lt.push({"offset":jt,"color":at[Ht]})}var $t="horizontal"===lt,Kt={"gradient":"linear","stops":Lt,"x0":0,"y0":0,"x1":$t?1:0,"y1":$t?0:1};return Rt&&($t?(Kt.x0=1,Kt.x1=0):(Kt.y0=1,Kt.y1=0)),Kt}}},{"key":"_updateColor","value":function(){var nt,at=this.attribute,lt=at.layout,Rt=void 0===lt?"horizontal":lt,Bt=at.colors,Lt=at.railWidth,Ht=at.railHeight,jt=this._slider,$t=jt.startHandler,Kt=jt.endHandler,te=jt.track,ne=jt.attribute,re=this._slider.currentValue,ae=re.startValue,oe=re.endValue,se=re.startPos,le=re.endPos,ue=null===(nt=ne.handlerStyle)||void 0===nt?void 0:nt.fill;if($t&&!ue){var ce=this._colorScale.scale(ae);$t.setAttribute("fill",ce)}if(Kt&&!ue){var he=this._colorScale.scale(oe);Kt.setAttribute("fill",he)}var de="horizontal"===Rt?Lt:Ht;if(Math.abs(se-le)!==de&&Bt&&Bt.length>1){var fe=this._color.stops,pe=Math.min(se,le),ve=Math.max(se,le),Ae=pe/de,we=ve/de,Ce=we-Ae,je=fe.filter((function(nt){return nt.offset>Ae&&nt.offset<we})),Ne=Math.min(ae,oe),Ve=Math.max(ae,oe),Ge=this._colorScale.scale(Ne),ti=this._colorScale.scale(Ve),li=[{"offset":0,"color":Ge}];je.forEach((function(nt){li.push({"offset":(nt.offset-Ae)/Ce,"color":nt.color})})),li.push({"offset":1,"color":ti}),te.setAttribute("fill",Object.assign(Object.assign({},this._color),{"stops":li}))}}}])}(QD);function nO(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",at=0;return"top"===nt?"\n    M".concat(at,",-6L").concat(at-3.5,",-2.5\n    v5\n    h7\n    v-5\n    Z\n"):"left"===nt?"\n    M".concat((at=1)-6,",0L").concat(at-6+2.5,",-3.5\n    h5\n    v7\n    h-5\n    Z\n"):"right"===nt?"\n    M".concat(6+(at=-1),",0L").concat(at+6-2.5,",-3.5\n    h-5\n    v7\n    h5\n    Z\n  "):"\n    M".concat(at,",6L").concat(at-3.5,",2.5\n    v-5\n    h7\n    v5\n    Z\n")}dL.defaultAttributes={"layout":"horizontal","title":{"align":"start","space":12,"textStyle":{"fontSize":12,"fontWeight":"bold","fill":"rgba(46, 47, 50, 1)"}},"handlerSize":10,"handlerStyle":{"fill":null,"lineWidth":4,"stroke":"#fff","outerBorder":{"distance":2,"lineWidth":1,"stroke":"#ccc"}},"tooltip":{"shapeStyle":{"lineWidth":4,"stroke":"#fff"}}},KD(),XD(),TP();var bL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="sizeLegend",lt._onSliderChange=function(nt){lt.dispatchEvent(nt)},lt._onSliderToolipChange=function(nt){lt.dispatchEvent(nt)},lt}return h(e,nt),o(e,[{"key":"setSelected","value":function(nt){this._slider&&this._slider.setValue(nt)}},{"key":"_renderContent","value":function(){var nt=this.attribute,at=nt.slidable,lt=nt.layout,Rt=nt.align,Bt=nt.min,Lt=nt.max,Ht=nt.value,jt=nt.railWidth,$t=nt.railHeight,Kt=nt.showHandler,te=void 0===Kt||Kt,ne=nt.handlerSize,re=nt.handlerStyle,ae=nt.railStyle,oe=nt.trackStyle,se=nt.startText,le=nt.endText,ue=nt.handlerText,ce=nt.showTooltip,he=nt.tooltip,de=nt.sizeBackground,fe=nt.disableTriggerEvent,pe=nt.inverse,ve=Hy.group({"x":0,"y":0});this._innerView.add(ve);var Ae=new lL({"x":0,"y":0,"zIndex":1,"range":{"draggableTrack":!0},"slidable":at,"layout":lt,"align":Rt,"min":Bt,"max":Lt,"value":Ht,"railWidth":jt,"railHeight":$t,"showHandler":te,"handlerSize":ne,"handlerStyle":Object.assign({"symbolType":nO(Rt)},re),"railStyle":ae,"trackStyle":oe,"startText":se,"endText":le,"handlerText":ue,"showTooltip":ce,"tooltip":he,"disableTriggerEvent":fe,"inverse":pe});ve.add(Ae);var we,Ce=0;"horizontal"===lt?"top"===Rt?(we="M0,0L".concat(jt,",0L").concat(pe?0:jt,",12Z"),Ce=$t):(we="M0,12L".concat(jt,",12L").concat(pe?0:jt,",0Z"),Ae.setAttribute("y",12)):"left"===Rt?we="M".concat(jt,",0L").concat(jt+12,",").concat(pe?0:$t,"L").concat(jt,",").concat($t,"Z"):(we="M0,".concat(pe?0:$t,"L12,").concat($t,"L12,0Z"),Ae.setAttribute("x",12));var je=Hy.path(Object.assign(Object.assign({"x":0,"y":Ce,"path":we},de),{"zIndex":0}));ve.add(je);var Ne=this._title?this._title.AABBBounds.height()+st(this.attribute,"title.space",12):0;ve.translate(0-ve.AABBBounds.x1,Ne-ve.AABBBounds.y1),this._slider=Ae}},{"key":"_bindEvents","value":function(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}])}(QD);bL.defaultAttributes={"layout":"horizontal","title":{"align":"start","space":12,"textStyle":{"fontSize":12,"fontWeight":"bold","fill":"rgba(46, 47, 50, 1)"}},"handlerSize":10,"handlerStyle":{"lineWidth":1,"stroke":"#ccc","fill":"#fff"},"sizeBackground":{"fill":"rgba(20,20,20,0.1)"}},xP(),zP(),DP();var xL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="title",lt}return h(e,nt),o(e,[{"key":"render","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he,de=this.attribute,fe=de.textType,pe=de.text,ve=de.subtextType,Ae=de.textStyle,we=void 0===Ae?{}:Ae,Ce=de.subtext,je=de.subtextStyle,Ne=void 0===je?{}:je,Ve=de.width,Ge=de.height,ti=de.minWidth,li=de.maxWidth,hi=de.minHeight,di=de.maxHeight,fi=de.align,pi=de.verticalAlign,vi=de.padding,mi=Ci(void 0===vi?0:vi),_i=this.createOrUpdateChild("title-container",{"x":mi[3],"y":mi[0],"zIndex":1},"group"),bi=null!==(nt=we.height)&&void 0!==nt?nt:Ge;if(!1!==this.attribute.visible&&!1!==we.visible){var Mi=we.width,Ti=we.maxHeight,Ii=we.maxWidth,Bi=we.x,zi=void 0===Bi?0:Bi,Wi=we.y,Ui=void 0===Wi?0:Wi,$i=we.ellipsis,qi=void 0===$i||$i,Ki=we.wordBreak,Qi=void 0===Ki?"break-word":Ki,Ji=we.maxWidth,dn=we.lineClamp;if("rich"===fe||N(we.character)){var fn=Object.assign({"x":zi,"y":Ui,"width":null!==(at=null!=Mi?Mi:Ve)&&void 0!==at?at:0,"height":null!=bi?bi:0,"ellipsis":null==qi||qi,"wordBreak":null!=Qi?Qi:"break-word","maxHeight":null!=Ti?Ti:di,"maxWidth":null!=Ii?Ii:Ji,"textConfig":null!==(lt=we.character)&&void 0!==lt?lt:pe},we);this._mainTitle=_i.createOrUpdateChild("mainTitle",fn,"richtext")}else if("html"===fe){var vn=Object.assign({"html":Object.assign(Object.assign({"dom":pe},ZP),we),"x":zi,"y":Ui,"width":null!==(Rt=null!=Mi?Mi:Ve)&&void 0!==Rt?Rt:0,"height":null!=bi?bi:0,"ellipsis":qi,"wordBreak":Qi,"maxHeight":null!=Ti?Ti:di,"maxWidth":null!=Ii?Ii:Ji,"textConfig":[]},we);this._mainTitle=_i.createOrUpdateChild("mainTitle",vn,"richtext")}else N(pe)&&(this._mainTitle=_i.createOrUpdateChild("mainTitle",Object.assign(Object.assign({"text":X(pe)?pe:[pe],"whiteSpace":"normal"},we),{"maxLineWidth":null!==(Lt=null!==(Bt=we.maxLineWidth)&&void 0!==Bt?Bt:Mi)&&void 0!==Lt?Lt:Ve,"heightLimit":null!==(Ht=we.height)&&void 0!==Ht?Ht:di,"lineClamp":dn,"ellipsis":qi,"x":zi,"y":Ui}),"text"))}var gn=this._mainTitle?this._mainTitle.AABBBounds.height():0,yn=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==Ne.visible){var mn=Ne.width,_n=Ne.height,bn=Ne.maxWidth,xn=Ne.maxHeight,kn=Ne.x,Sn=void 0===kn?0:kn,An=Ne.y,wn=void 0===An?0:An,Cn=Ne.ellipsis,Mn=void 0===Cn||Cn,Tn=Ne.wordBreak,En=void 0===Tn?"break-word":Tn,Pn=Ne.lineClamp,Rn=Math.max(Number.MIN_VALUE,di-gn);if("rich"===ve||N(Ne.character)){var On=Object.assign({"x":Sn,"y":wn,"width":null!==(jt=null!=mn?mn:Ve)&&void 0!==jt?jt:0,"height":null!==($t=null!=_n?_n:Ge)&&void 0!==$t?$t:0,"ellipsis":Mn,"wordBreak":En,"maxHeight":null!=xn?xn:Rn,"maxWidth":null!=bn?bn:li,"textConfig":null!==(Kt=Ne.character)&&void 0!==Kt?Kt:Ce},Ne);this._subTitle=_i.createOrUpdateChild("subTitle",On,"richtext")}else if("html"===ve){var Fn=Object.assign({"html":Object.assign(Object.assign({"dom":Ce},ZP),Ne),"x":Sn,"y":wn,"width":null!==(te=null!=mn?mn:Ve)&&void 0!==te?te:0,"height":null!==(ne=null!=_n?_n:Ge)&&void 0!==ne?ne:0,"ellipsis":Mn,"wordBreak":En,"maxHeight":null!=xn?xn:Rn,"maxWidth":null!=bn?bn:li,"textConfig":[]},Ne);this._subTitle=_i.createOrUpdateChild("subTitle",Fn,"richtext")}else N(Ce)&&(this._subTitle=_i.createOrUpdateChild("subTitle",Object.assign(Object.assign({"text":X(Ce)?Ce:[Ce],"whiteSpace":"normal"},Ne),{"maxLineWidth":null!==(re=Ne.maxLineWidth)&&void 0!==re?re:Ve,"heightLimit":null!==(ae=Ne.heightLimit)&&void 0!==ae?ae:Rn,"lineClamp":Pn,"ellipsis":Mn,"x":0,"y":gn}),"text"))}var or=this._subTitle?this._subTitle.AABBBounds.height():0,sr=this._subTitle?this._subTitle.AABBBounds.width():0,lr=Math.max(yn,sr),vr=gn+(null!==(oe=Ne.height)&&void 0!==oe?oe:or);if(N(Ve)&&(lr=Ve),N(Ge)&&(vr=Ge),N(ti)&&lr<ti&&(lr=ti),N(li)&&lr>li&&(lr=li),N(hi)&&vr<hi&&(vr=hi),N(di)&&vr>di&&(vr=di),_i.attribute.width=lr,_i.attribute.height=vr,_i.attribute.boundsPadding=mi,this._mainTitle){if(N(fi)||N(we.align)){var yr=we.align?we.align:fi,mr=null!==(se=we.width)&&void 0!==se?se:lr;"center"===yr?(this._mainTitle.setAttribute("x",mr/2),this._mainTitle.setAttribute("textAlign","center")):"right"===yr?(this._mainTitle.setAttribute("x",mr),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}var xr=we.verticalAlign?we.verticalAlign:pi,kr=null!=bi?bi:this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height();"middle"===xr?(this._mainTitle.setAttribute("y",kr/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===xr?(this._mainTitle.setAttribute("y",kr),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if(N(fi)||N(Ne.align)){var Sr=Ne.align?Ne.align:fi,Ar=null!==(ue=null!==(le=Ne.width)&&void 0!==le?le:we.width)&&void 0!==ue?ue:lr;"center"===Sr?(this._subTitle.setAttribute("x",Ar/2),this._subTitle.setAttribute("textAlign","center")):"right"===Sr?(this._subTitle.setAttribute("x",Ar),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}var wr=Ne.verticalAlign?Ne.verticalAlign:pi,Mr=this._mainTitle?N(bi)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),bi):this._mainTitle.AABBBounds.y2:0,Tr=null!==(he=null!==(ce=Ne.height)&&void 0!==ce?ce:Ge)&&void 0!==he?he:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();"middle"===wr?(this._subTitle.setAttribute("y",Mr+Tr/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===wr?(this._subTitle.setAttribute("y",Mr+Tr),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",Mr),this._subTitle.setAttribute("textBaseline","top"))}}}])}(xS);xL.defaultAttributes={"textStyle":{"ellipsis":"...","fill":"#333","fontSize":20,"fontWeight":"bold","textAlign":"left","textBaseline":"top"},"subtextStyle":{"ellipsis":"...","fill":"#6F6F6F","fontSize":16,"fontWeight":"normal","textAlign":"left","textBaseline":"top"}};var wL={"title":{"style":{"text":"","fontSize":20,"fill":"black","fontWeight":"normal","fillOpacity":1,"textBaseline":"top","textAlign":"center"}},"content":{"style":{"text":"","fontSize":16,"fill":"black","fontWeight":"normal","fillOpacity":1,"textBaseline":"top","textAlign":"center"}}};xP(),zP(),DP();var CL,PL,IL=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).name="indicator",nt}return h(e,nt),o(e,[{"key":"_renderText","value":function(nt,at,lt,Rt,Bt,Lt){if(!1!==at.visible){var Ht=ft({},st(wL,Bt),at.style,{"visible":at.visible});Ht.lineHeight=N(Ht.lineHeight)?Ht.lineHeight:Ht.fontSize,at.formatMethod&&(Ht._originText=Ht.text,Ht.text=at.formatMethod(Ht.text,Ht));var jt=uR(Ht);return jt.name=Lt,nt.appendChild(jt),at.autoFit&&Q(lt)&&this._setLocalAutoFit(lt,jt,at),at.autoLimit&&Q(Rt)&&jt.setAttribute("maxLineWidth",lt),jt}}},{"key":"render","value":function(){var nt,at,lt=this;if(this.removeAllChild(!0),!0===this.attribute.visible){var Rt=this.attribute,Bt=Rt.title,Lt=void 0===Bt?{}:Bt,Ht=Rt.content,jt=Rt.size,$t=Rt.limitRatio,Kt=void 0===$t?1/0:$t,te=Math.min(jt.width,jt.height)*Kt,ne=this.createOrUpdateChild("indicator-container",{"x":0,"y":0,"zIndex":1,"pickable":null===(nt=this.attribute.pickable)||void 0===nt||nt},"group");if(N(Lt)&&(this._title=this._renderText(ne,Lt,te,Kt,"title.style","indicator-title")),N(Ht)){var re=xt(Ht),ae=[];re.forEach((function(nt,at){!1!==nt.visible&&ae.push(lt._renderText(ne,nt,te,Kt,"content.style","indicator-content-"+at))})),this._content=ae}this._setGlobalAutoFit(te),this._setYPosition();var oe=null!==(at=null==ne?void 0:ne.AABBBounds.height())&&void 0!==at?at:0;ne.setAttribute("y",jt.height/2-oe/2),ne.setAttribute("x",jt.width/2)}}},{"key":"_setLocalAutoFit","value":function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne;if("default"===(null!==(Rt=lt.fitStrategy)&&void 0!==Rt?Rt:"default")){var re=oR(null!==(Lt=null===(Bt=lt.style)||void 0===Bt?void 0:Bt.text)&&void 0!==Lt?Lt:"",null!==(Ht=lt.style)&&void 0!==Ht?Ht:{},null===($t=null===(jt=this.stage)||void 0===jt?void 0:jt.getTheme())||void 0===$t?void 0:$t.text).width;if(re>0){var ae=nt*(null!==(Kt=lt.fitPercent)&&void 0!==Kt?Kt:.5)/re,oe=Math.floor((null!==(ne=null===(te=lt.style)||void 0===te?void 0:te.fontSize)&&void 0!==ne?ne:20)*ae);at.setAttribute("fontSize",oe),at.setAttribute("lineHeight",N(lt.style.lineHeight)?lt.style.lineHeight:oe)}}}},{"key":"_setGlobalAutoFit","value":function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t=this,Kt=nt/2,te=[],ne=0,re=null!==(at=this.attribute.title)&&void 0!==at?at:{};re.autoFit&&"inscribed"===re.fitStrategy?(this._title.setAttribute("fontSize",12),te.push({"text":this._title,"spec":null!==(lt=this.attribute.title)&&void 0!==lt?lt:{}})):ne+=null!==(Ht=null===(Lt=null===(Bt=null===(Rt=this._title)||void 0===Rt?void 0:Rt.AABBBounds)||void 0===Bt?void 0:Bt.height)||void 0===Lt?void 0:Lt.call(Bt))&&void 0!==Ht?Ht:0;var ae=null!==(jt=re.space)&&void 0!==jt?jt:0;if(ne+=ae,xt(this.attribute.content).filter((function(nt){return!1!==nt.visible})).forEach((function(nt,at){var lt,Rt,Bt,Lt,Ht=$t._content[at];nt.autoFit&&"inscribed"===nt.fitStrategy?(Ht.setAttribute("fontSize",12),te.push({"text":Ht,"spec":nt})):ne+=null!==(Bt=null===(Rt=null===(lt=null==Ht?void 0:Ht.AABBBounds)||void 0===lt?void 0:lt.height)||void 0===Rt?void 0:Rt.call(lt))&&void 0!==Bt?Bt:0;var jt=null!==(Lt=nt.space)&&void 0!==Lt?Lt:0;ne+=jt})),!(te.length<=0)){var oe=12/te.reduce((function(nt,at){return Math.max(nt,at.text.AABBBounds.width())}),0)*te.length,se=ne/2,le=Math.pow(oe,2)+1,ue=2*se*oe,ce=Math.pow(se,2)-Math.pow(Kt,2),he=2*(oe*((-ue+Math.sqrt(Math.pow(ue,2)-4*le*ce))/(2*le))+se),de=(he-ne)/te.length;Q(he)&&te.forEach((function(nt){var at,lt=null===(at=nt.spec.style)||void 0===at?void 0:at.lineHeight;nt.text.setAttribute("fontSize",de),nt.text.setAttribute("lineHeight",N(lt)?lt:de)}))}}},{"key":"_setYPosition","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht=this,jt=0,$t=null!==(Rt=null===(lt=null===(at=null===(nt=this._title)||void 0===nt?void 0:nt.AABBBounds)||void 0===at?void 0:at.height)||void 0===lt?void 0:lt.call(at))&&void 0!==Rt?Rt:0,Kt=null!==(Lt=null===(Bt=this.attribute.title)||void 0===Bt?void 0:Bt.space)&&void 0!==Lt?Lt:0;xt(this.attribute.content).filter((function(nt){return!1!==nt.visible})).forEach((function(nt,at){var lt,Rt=Ht._content[at];Rt.setAttribute("y",$t+Kt+jt);var Bt=null!==(lt=nt.space)&&void 0!==lt?lt:0;jt+=Rt.AABBBounds.height()+Bt}))}}])}(xS),OL=function(nt){function e(nt){return r(this,e),n(this,e,[nt])}return h(e,nt),o(e)}(Yg);!function(nt){nt.OnPlay="onPlay",nt.OnPause="onPause",nt.OnForward="onForward",nt.OnBackward="onBackward"}(CL||(CL={})),function(nt){nt.Start="start",nt.Pause="pause",nt.Forward="forward",nt.Backward="backward"}(PL||(PL={}));var LL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)]))._isPaused=!0,lt.updateAttributes=function(){lt._startAttr={"style":Object.assign(Object.assign(Object.assign({"symbolType":"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z"},e.defaultControllerAttr),{"visible":lt.attribute.start.visible}),lt.attribute.start.style)},lt._pauseAttr={"style":Object.assign(Object.assign(Object.assign({"symbolType":"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z"},e.defaultControllerAttr),{"visible":lt.attribute.pause.visible}),lt.attribute.pause.style)},lt._forwardAttr={"style":Object.assign(Object.assign(Object.assign({},e.defaultControllerAttr),{"visible":lt.attribute.forward.visible}),lt.attribute.forward.style)},lt._backwardAttr={"style":Object.assign(Object.assign(Object.assign({},e.defaultControllerAttr),{"visible":lt.attribute.backward.visible}),lt.attribute.backward.style)},lt.updateLayout()},lt.updateLayout=function(){var nt,at,Rt,Bt;lt._layout=lt.attribute.layout,"horizontal"===lt._layout?(lt._backwardAttr.style.symbolType=null!==(nt=lt._backwardAttr.style.symbolType)&&void 0!==nt?nt:"M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",lt._forwardAttr.style.symbolType=null!==(at=lt._forwardAttr.style.symbolType)&&void 0!==at?at:"M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z"):"vertical"===lt._layout&&(lt._backwardAttr.style.symbolType=null!==(Rt=lt._backwardAttr.style.symbolType)&&void 0!==Rt?Rt:"m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",lt._forwardAttr.style.symbolType=null!==(Bt=lt._forwardAttr.style.symbolType)&&void 0!==Bt?Bt:"M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z")},lt._initPlay=function(){j(lt._playController)&&(lt._playController=new OL(Object.assign({},lt._startAttr.style)),lt.add(lt._playController))},lt._initBackward=function(){j(lt._backwardController)&&(lt._backwardController=new OL(Object.assign({},lt._backwardAttr.style)),lt.add(lt._backwardController))},lt._initForward=function(){j(lt._forwardController)&&(lt._forwardController=new OL(Object.assign({},lt._forwardAttr.style)),lt.add(lt._forwardController))},lt._initEvents=function(){lt.attribute.disableTriggerEvent||(lt._playController.addEventListener("pointerdown",(function(nt){nt.stopPropagation(),!0===lt._isPaused?lt.play():lt.pause()})),lt._backwardController.addEventListener("pointerdown",(function(nt){nt.stopPropagation(),lt.backward()})),lt._forwardController.addEventListener("pointerdown",(function(nt){nt.stopPropagation(),lt.forward()})))},lt.renderPlay=function(){lt._isPaused?lt._playController.setAttributes(Object.assign({"symbolType":lt._playController.getComputedAttribute("symbolType")},lt._startAttr.style)):lt._playController.setAttributes(Object.assign({"symbolType":lt._playController.getComputedAttribute("symbolType")},lt._pauseAttr.style))},lt.renderBackward=function(){lt._backwardController.setAttributes(lt._backwardAttr.style)},lt.renderForward=function(){lt._forwardController.setAttributes(lt._forwardAttr.style)},lt.play=function(){lt._dispatchEvent(CL.OnPlay)},lt.pause=function(){lt._dispatchEvent(CL.OnPause)},lt.forward=function(){lt._dispatchEvent(CL.OnForward)},lt.backward=function(){lt._dispatchEvent(CL.OnBackward)},lt.togglePlay=function(){lt._playController.setAttributes(lt._startAttr.style),lt._isPaused=!0},lt.togglePause=function(){lt._playController.setAttributes(lt._pauseAttr.style),lt._isPaused=!1},lt.updateAttributes(),lt._initPlay(),lt._initBackward(),lt._initForward(),lt._initEvents(),lt}return h(e,nt),o(e,[{"key":"render","value":function(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}])}(xS);LL.defaultControllerAttr={"visible":!0,"x":0,"y":0,"size":20,"fill":"#91caff","pickMode":"imprecise","cursor":"pointer"},LL.defaultAttributes=l(l(l(l({},PL.Start,{}),PL.Pause,{}),PL.Backward,{}),PL.Forward,{});var HL,jL,VL={"visible":!0,"style":{"x":0,"y":0,"dx":0,"dy":0,"size":20},"order":0,"space":10},WL=[200,10];!function(nt){nt.Default="default",nt.Reverse="reverse"}(HL||(HL={})),function(nt){nt.change="change",nt.play="play",nt.pause="pause",nt.backward="backward",nt.forward="forward",nt.end="end",nt.OnChange="change",nt.OnPlay="play",nt.OnPause="pause",nt.OnBackward="backward",nt.OnForward="forward",nt.OnEnd="end"}(jL||(jL={}));var gO=function(nt){var at=nt.direction,lt=nt.maxIndex,Rt=nt.minIndex,Bt=nt.dataIndex;return function(nt){var at=nt.direction,lt=nt.maxIndex,Rt=nt.dataIndex;return at===HL.Default&&Rt===lt}({"direction":at,"maxIndex":lt,"dataIndex":Bt})||function(nt){var at=nt.direction,lt=nt.minIndex,Rt=nt.dataIndex;return at===HL.Reverse&&Rt===lt}({"direction":at,"minIndex":Rt,"dataIndex":Bt})},yO=function(nt){var at=nt.direction,lt=nt.maxIndex,Rt=nt.minIndex,Bt=nt.dataIndex;return function(nt){var at=nt.direction,lt=nt.minIndex,Rt=nt.dataIndex;return at===HL.Default&&Rt===lt}({"direction":at,"minIndex":Rt,"dataIndex":Bt})||function(nt){var at=nt.direction,lt=nt.maxIndex,Rt=nt.dataIndex;return at===HL.Reverse&&Rt===lt}({"direction":at,"maxIndex":lt,"dataIndex":Bt})},mO=function(nt){return"top"===nt||"bottom"===nt},GL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)]))._data=[],lt._dataIndex=0,lt._layoutInfo={},lt._updateSliderAttrs=function(){var nt,at,Rt;Q(lt._handlerStyle.size)?Rt=lt._handlerStyle.size:lt._handlerStyle.size&&lt._handlerStyle.size.length&&(Rt=Ae(lt._handlerStyle.size[0],lt._handlerStyle.size[1]));var Bt={"visible":lt._sliderVisible,"min":lt._minIndex,"max":lt._maxIndex,"value":lt._dataIndex,"railWidth":lt._railStyle.width,"railHeight":lt._railStyle.height,"railStyle":lt._railStyle,"trackStyle":lt._trackStyle,"handlerSize":Q(Rt)?Rt:void 0,"handlerStyle":lt._handlerStyle,"dy":lt.attribute.slider.dy,"dx":lt.attribute.slider.dx,"slidable":!0,"range":!1,"handlerText":{"visible":!1},"startText":{"visible":!1},"endText":{"visible":!1},"disableTriggerEvent":lt.attribute.disableTriggerEvent};if(mO(lt._orient)){var Lt=Math.max(0,lt._layoutInfo.slider.size),Ht=null!==(nt=lt._railStyle.height)&&void 0!==nt?nt:WL[1];Bt.layout="horizontal",Bt.railHeight=Ht,Bt.railWidth=Lt,Bt.x=lt._layoutInfo.slider.x,Bt.y=lt._layoutInfo.slider.y}else{var jt=Math.max(0,lt._layoutInfo.slider.size),$t=null!==(at=lt._railStyle.width)&&void 0!==at?at:WL[1];Bt.layout="vertical",Bt.railWidth=$t,Bt.railHeight=jt,Bt.x=lt._layoutInfo.slider.x,Bt.y=lt._layoutInfo.slider.y}return Bt},lt._initSlider=function(){var nt=lt._updateSliderAttrs();lt._slider=new lL(nt),lt._sliderVisible&&lt.add(lt._slider)},lt._updateControllerAttrs=function(){var nt={"start":lt._start,"pause":lt._pause,"forward":lt._forward,"backward":lt._backward,"disableTriggerEvent":lt.attribute.disableTriggerEvent};return nt.layout=mO(lt._orient)?"horizontal":"vertical",nt.start=Object.assign(Object.assign({},nt.start),{"style":Object.assign(Object.assign({},nt.start.style),{"x":lt._layoutInfo.start.x,"y":lt._layoutInfo.start.y})}),nt.pause=Object.assign(Object.assign({},nt.pause),{"style":Object.assign(Object.assign({},nt.pause.style),{"x":lt._layoutInfo.start.x,"y":lt._layoutInfo.start.y})}),nt.backward=Object.assign(Object.assign({},nt.backward),{"style":Object.assign(Object.assign({},nt.backward.style),{"x":lt._layoutInfo.backward.x,"y":lt._layoutInfo.backward.y})}),nt.forward=Object.assign(Object.assign({},nt.forward),{"style":Object.assign(Object.assign({},nt.forward.style),{"x":lt._layoutInfo.forward.x,"y":lt._layoutInfo.forward.y})}),nt},lt._initController=function(){var nt=lt._updateControllerAttrs();lt._controller=new LL(nt),lt._controllerVisible&&lt.add(lt._controller)},lt._initAttributes(),lt._initDataIndex(),lt._initLayoutInfo(),lt._initController(),lt._initSlider(),lt}return h(e,nt),o(e,[{"key":"getMinIndex","value":function(){return this._minIndex}},{"key":"getMaxIndex","value":function(){return this._maxIndex}},{"key":"getDataIndex","value":function(){return this._dataIndex}},{"key":"_initAttributes","value":function(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;var nt=this.attribute,at=nt.slider,lt=void 0===at?{}:at,Rt=nt.controller,Bt=void 0===Rt?{}:Rt;this._sliderVisible=lt.visible,this._railStyle=Object.assign({},lt.railStyle),this._trackStyle=Object.assign({},lt.trackStyle),this._handlerStyle=Object.assign({},lt.handlerStyle),this._controllerVisible=Bt.visible,this._start=Object.assign({},Bt.start),this._pause=Object.assign({},Bt.pause),this._forward=Object.assign({},Bt.forward),this._backward=Object.assign({},Bt.backward)}},{"key":"_initDataIndex","value":function(){var nt;this._dataIndex=null!==(nt=this.attribute.dataIndex)&&void 0!==nt?nt:0}},{"key":"_initLayoutInfo","value":function(){var nt,at,lt,Rt=this,Bt=[this._start,this._backward,this._forward].sort((function(nt,at){return nt.order-at.order})),Lt=Bt.filter((function(nt){return"end"!==nt.position})),Ht=Bt.filter((function(nt){return"end"===nt.position})),jt=null!==(nt=mO(this._orient)?this._railStyle.height:this._railStyle.width)&&void 0!==nt?nt:WL[1],$t=Bt.reduce((function(nt,at){var lt=at.style.size,Rt=Z(lt)?lt:Ae(lt[0],lt[1]);return nt+at.space+Rt}),0),Kt=this._sliderVisible?(mO(this._orient)?null===(at=this._size)||void 0===at?void 0:at.width:null===(lt=this._size)||void 0===lt?void 0:lt.height)-$t:0,te=Kt-this.attribute.slider.space,ne=Lt.reduce((function(nt,at){var lt=at.key,Bt=at.space,Lt=at.style.size,Ht=Z(Lt)?Lt:Ae(Lt[0],Lt[1]);return Rt._layoutInfo[lt]=Object.assign(Object.assign({},Rt._layoutInfo[lt]),{"size":Ht,"x":mO(Rt._orient)?nt+Bt:(Rt._size.width-Ht)/2,"y":mO(Rt._orient)?(Rt._size.height-Ht)/2:nt+Bt}),nt+Bt+Ht}),0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{"size":te,"x":mO(this._orient)?ne+this.attribute.slider.space:(this._size.width-jt)/2,"y":mO(this._orient)?(this._size.height-jt)/2:ne+this.attribute.slider.space}),Ht.reduce((function(nt,at){var lt=at.key,Bt=at.space,Lt=at.style.size,Ht=Z(Lt)?Lt:Ae(Lt[0],Lt[1]);return Rt._layoutInfo[lt]=Object.assign(Object.assign({},Rt._layoutInfo[lt]),{"size":Ht,"x":mO(Rt._orient)?nt+Bt:(Rt._size.width-Ht)/2,"y":mO(Rt._orient)?(Rt._size.height-Ht)/2:nt+Bt}),nt+Bt+Ht}),ne+Kt)}},{"key":"render","value":function(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}},{"key":"renderSlider","value":function(){var nt=this._updateSliderAttrs();this._slider.setAttributes(nt)}},{"key":"renderController","value":function(){var nt=this._updateControllerAttrs();this._controller.setAttributes(nt)}},{"key":"dispatchCustomEvent","value":function(nt,at){this._dispatchEvent(nt,{"eventType":nt,"index":at,"value":this._data[at]})}}])}(xS);function bO(){XD(),xP(),FP()}GL.defaultAttributes={"visible":!0,"data":[],"interval":1e3,"orient":"bottom","align":"center","size":{"height":20,"width":300},"slider":{"visible":!0,"space":10,"dx":0,"dy":0,"railStyle":{"cornerRadius":5},"trackStyle":{},"handlerStyle":{}},"controller":{"visible":!0,"start":Object.assign(Object.assign({},VL),{"key":"start","position":"start","space":0}),"pause":Object.assign(Object.assign({},VL),{"key":"pause","position":"start"}),"forward":Object.assign(Object.assign({},VL),{"key":"forward","position":"end"}),"backward":Object.assign(Object.assign({},VL),{"key":"backward","position":"start"})}},bO();var UL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},nt)]))._activeIndex=-1,lt._isReachEnd=!1,lt._initAttributes=function(){var nt,at,Rt;y((i(lt),e),"_initAttributes",lt,3)([]),lt._alternate=null!==(nt=lt.attribute.alternate)&&void 0!==nt&&nt,lt._interval=null!==(at=lt.attribute.interval)&&void 0!==at?at:1e3,lt._direction=null!==(Rt=lt.attribute.direction)&&void 0!==Rt?Rt:HL.Default},lt._initDataIndex=function(){var nt;lt._dataIndex=j(lt.attribute.dataIndex)?"default"===lt._direction?lt._minIndex:lt._maxIndex:null!==(nt=lt.attribute.dataIndex)&&void 0!==nt?nt:0,lt._slider.setAttribute("value",lt._dataIndex)},lt._initEvents=function(){lt.attribute.disableTriggerEvent||(lt._controller.addEventListener(CL.OnPlay,(function(nt){nt.stopPropagation(),lt.play()})),lt._controller.addEventListener(CL.OnPause,(function(nt){nt.stopPropagation(),lt.pause()})),lt._controller.addEventListener(CL.OnForward,(function(nt){nt.stopPropagation(),lt.forward()})),lt._controller.addEventListener(CL.OnBackward,(function(nt){nt.stopPropagation(),lt.backward()})),lt._slider.addEventListener("change",(function(nt){var at=Math.floor(nt.detail.value)+.5;lt._dataIndex=nt.detail.value>=at?Math.ceil(nt.detail.value):Math.floor(nt.detail.value),lt._slider.setValue(lt._dataIndex),lt.dispatchCustomEvent(jL.change)})))},lt.play=function(){lt._isPlaying||1!==lt._data.length&&(lt._controller.togglePause(),lt._isPlaying=!0,(gO({"dataIndex":lt._dataIndex,"maxIndex":lt._maxIndex,"minIndex":lt._minIndex,"direction":lt._direction})||yO({"dataIndex":lt._dataIndex,"maxIndex":lt._maxIndex,"minIndex":lt._minIndex,"direction":lt._direction}))&&(lt._direction===HL.Default?lt._updateDataIndex(lt._minIndex):lt._updateDataIndex(lt._maxIndex)),lt.dispatchCustomEvent(jL.play),lt._isReachEnd=!1,lt._tickTime=Date.now(),lt._rafId=ax.getRequestAnimationFrame()(lt._play.bind(i(lt),!0)))},lt._play=function(nt){var at=Date.now();if(lt._isReachEnd&&at-lt._tickTime>=lt._interval)return lt._isReachEnd=!1,void lt._playEnd();nt&&lt._activeIndex!==lt._dataIndex?(lt.dispatchCustomEvent(jL.change),lt._activeIndex=lt._dataIndex):at-lt._tickTime>=lt._interval&&(lt._tickTime=at,lt._updateDataIndex(function(nt,at,lt,Rt){return"default"===nt?Math.min(at+1,Rt):Math.max(at-1,lt)}(lt._direction,lt._dataIndex,lt._minIndex,lt._maxIndex)),lt._activeIndex=lt._dataIndex,lt.dispatchCustomEvent(jL.change)),("default"===lt._direction&&lt._dataIndex>=lt._maxIndex||"reverse"===lt._direction&&lt._dataIndex<=lt._minIndex)&&(lt._isReachEnd=!0),lt._rafId=ax.getRequestAnimationFrame()(lt._play.bind(i(lt),!1))},lt._updateDataIndex=function(nt){lt._dataIndex=nt,lt._slider.setValue(lt._dataIndex)},lt._playEnd=function(){lt._isPlaying=!1,lt._controller.togglePlay(),ax.getCancelAnimationFrame()(lt._rafId),lt._activeIndex=-1,lt.dispatchCustomEvent(jL.end)},lt.pause=function(){lt._isPlaying&&(lt._isPlaying=!1,ax.getCancelAnimationFrame()(lt._rafId),lt._controller.togglePlay(),lt.dispatchCustomEvent(jL.pause))},lt.backward=function(){var nt,at=lt.attribute.loop;nt=void 0!==at&&at?lt._dataIndex-1<lt._minIndex?lt._maxIndex:lt._dataIndex-1:Math.max(lt._dataIndex-1,lt._minIndex),lt._updateDataIndex(nt),lt.dispatchCustomEvent(jL.change),lt.dispatchCustomEvent(jL.backward)},lt.forward=function(){var nt,at=lt.attribute.loop;nt=void 0!==at&&at?lt._dataIndex+1>lt._maxIndex?lt._minIndex:lt._dataIndex+1:Math.min(lt._dataIndex+1,lt._maxIndex),lt._updateDataIndex(nt),lt.dispatchCustomEvent(jL.change),lt.dispatchCustomEvent(jL.forward)},lt._initAttributes(),lt._initDataIndex(),lt._initEvents(),lt}return h(e,nt),o(e,[{"key":"setAttributes","value":function(nt,at){y(e,"setAttributes",this,3)([nt,at]),this._initAttributes()}},{"key":"dispatchCustomEvent","value":function(nt){y(e,"dispatchCustomEvent",this,3)([nt,this._dataIndex])}}])}(GL),kO=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function o(nt){try{l(Rt.next(nt))}catch(nt){Lt(nt)}}function s(nt){try{l(Rt.throw(nt))}catch(nt){Lt(nt)}}function l(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(o,s)}l((Rt=Rt.apply(nt,at||[])).next())}))};bO();var YL,$L=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt]))._isPlaying=!1,at._startTime=Date.now(),at._initAttributes=function(){var nt;y((i(at),e),"_initAttributes",at,3)([]),at._maxIndex=at._data.length,at._slider.setAttribute("max",at._maxIndex),at._isPlaying=!1,at._elapsed=0,at._interval=null!==(nt=at.attribute.interval)&&void 0!==nt?nt:1e3;var lt=at._data.length;at.attribute.totalDuration&&at._data.length?(at._totalDuration=at.attribute.totalDuration,at._interval=at._totalDuration/(null!=lt?lt:1)):(at._totalDuration=at._interval*lt,at._interval=at.attribute.interval)},at._initDataIndex=function(){var nt;at._dataIndex=null!==(nt=at.attribute.dataIndex)&&void 0!==nt?nt:at._minIndex},at._initEvents=function(){at.attribute.disableTriggerEvent||(at._controller.addEventListener(CL.OnPlay,(function(nt){nt.stopPropagation(),at.play()})),at._controller.addEventListener(CL.OnPause,(function(nt){nt.stopPropagation(),at.pause()})),at._controller.addEventListener(CL.OnForward,(function(nt){nt.stopPropagation(),at.forward()})),at._controller.addEventListener(CL.OnBackward,(function(nt){nt.stopPropagation(),at.backward()})),at._slider.addEventListener("change",(function(nt){var lt;nt.stopPropagation();var Rt=null===(lt=nt.detail)||void 0===lt?void 0:lt.value,Bt=Rt/at._maxIndex;at._elapsed=Bt*at._totalDuration,at._startTime=Date.now()-at._elapsed,at._dispatchChange(Rt)})))},at._getSliderValue=function(){var nt=at._elapsed/at._totalDuration;return Math.min(nt*at._maxIndex,at._maxIndex)},at._updateSlider=function(){var nt=at._getSliderValue();at._dataIndex=Math.floor(nt),at._slider.setValue(Math.min(nt,at._maxIndex)),at._dispatchChange(Math.floor(nt))},at._dispatchChange=function(nt){var lt=Math.floor(nt);lt!==at._activeIndex&&(at._dataIndex=lt,at._activeIndex=lt,lt!==at._maxIndex&&at.dispatchCustomEvent(jL.change))},at.play=function(){return kO(i(at),void 0,void 0,f().mark((function t(){return f().wrap((function(nt){for(;;)switch(nt.prev=nt.next){case 0:this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(jL.play),this._rafId=ax.getRequestAnimationFrame()(this._play.bind(this)));case 1:case"end":return nt.stop()}}),t,this)})))},at._play=function(){at._elapsed=Date.now()-at._startTime;var nt=at._getSliderValue();at._updateSlider(),nt>=at._maxIndex?at._playEnd():at._rafId=ax.getRequestAnimationFrame()(at._play.bind(i(at)))},at._playEnd=function(){at._isPlaying=!1,ax.getCancelAnimationFrame()(at._rafId),at._controller.togglePlay(),at.dispatchCustomEvent(jL.end)},at.pause=function(){at._isPlaying&&(at._isPlaying=!1,at._elapsed=Date.now()-at._startTime,ax.getCancelAnimationFrame()(at._rafId),at._controller.togglePlay(),at.dispatchCustomEvent(jL.pause))},at.backward=function(){var nt=Date.now(),lt=1*at._interval,Rt=at._elapsed-lt;Rt<=0?(at._elapsed=0,at._startTime=nt):(at._elapsed=Rt,at._startTime=at._startTime+at._interval),at._updateSlider(),at.dispatchCustomEvent(jL.backward)},at.forward=function(){var nt=Date.now(),lt=1*at._interval,Rt=at._elapsed+lt;Rt>=at._totalDuration?(at._startTime=nt-at._totalDuration,at._elapsed=at._totalDuration):(at._startTime=at._startTime-lt,at._elapsed=Rt),at._updateSlider(),at.dispatchCustomEvent(jL.forward)},at._initAttributes(),at._initDataIndex(),at._initEvents(),at}return h(e,nt),o(e,[{"key":"dispatchCustomEvent","value":function(nt){y(e,"dispatchCustomEvent",this,3)([nt,this._dataIndex])}},{"key":"render","value":function(){y(e,"render",this,3)([])}}])}(GL);!function(nt){nt.drawStart="drawStart",nt.drawEnd="drawEnd",nt.drawing="drawing",nt.moving="moving",nt.moveStart="moveStart",nt.moveEnd="moveEnd",nt.brushClear="brushClear"}(YL||(YL={}));var qL={"trigger":"pointerdown","updateTrigger":"pointermove","endTrigger":"pointerup","resetTrigger":"pointerupoutside","hasMask":!0,"brushMode":"single","brushType":"rect","brushStyle":{"fill":"#B0C8F9","fillOpacity":.2,"stroke":"#B0C8F9","strokeWidth":2},"brushMoved":!0,"removeOnClick":!0,"delayType":"throttle","delayTime":10,"interactiveRange":{"y1":-1/0,"y2":1/0,"x1":-1/0,"x2":1/0}},KL={"debounce":qt,"throttle":Zt};xP(),EP();var ZL=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt)])).name="brush",lt._activeDrawState=!1,lt._cacheDrawPoints=[],lt._isDrawedBeforeEnd=!1,lt._isDownBeforeUpOutside=!1,lt._activeMoveState=!1,lt._operatingMaskMoveDx=0,lt._operatingMaskMoveDy=0,lt._operatingMaskMoveRangeX=[-1/0,1/0],lt._operatingMaskMoveRangeY=[-1/0,1/0],lt._brushMaskAABBBoundsDict={},lt._onBrushStart=function(nt){var at;if(lt._outOfInteractiveRange(nt))lt._isDownBeforeUpOutside=!0;else{nt.stopPropagation();var Rt=null===(at=lt.attribute.brushMoved)||void 0===at||at;lt._activeMoveState=Rt&&lt._isPosInBrushMask(nt),lt._activeDrawState=!lt._activeMoveState,lt._activeDrawState&&lt._initDraw(nt),lt._activeMoveState&&lt._initMove(nt)}},lt._onBrushing=function(nt){lt._outOfInteractiveRange(nt)||((lt._activeDrawState||lt._activeMoveState)&&nt.stopPropagation(),lt._activeDrawState&&lt._drawing(nt),lt._activeMoveState&&lt._moving(nt))},lt._onBrushingWithDelay=0===lt.attribute.delayTime?lt._onBrushing:KL[lt.attribute.delayType](lt._onBrushing,lt.attribute.delayTime),lt._onBrushEnd=function(nt){var at;if(lt._activeDrawState||lt._activeMoveState){nt.preventDefault();var Rt=lt.attribute.removeOnClick,Bt=void 0===Rt||Rt;lt._activeDrawState&&!lt._isDrawedBeforeEnd&&Bt?((null===(at=lt._operatingMask)||void 0===at?void 0:at._AABBBounds.empty())&&lt._dispatchEvent(YL.brushClear,{"operateMask":lt._operatingMask,"operatedMaskAABBBounds":lt._brushMaskAABBBoundsDict,"event":nt}),lt._container.incrementalClearChild(),lt._brushMaskAABBBoundsDict={}):(lt._activeDrawState&&lt._dispatchEvent(YL.drawEnd,{"operateMask":lt._operatingMask,"operatedMaskAABBBounds":lt._brushMaskAABBBoundsDict,"event":nt}),lt._activeMoveState&&lt._dispatchEvent(YL.moveEnd,{"operateMask":lt._operatingMask,"operatedMaskAABBBounds":lt._brushMaskAABBBoundsDict,"event":nt})),lt._activeDrawState=!1,lt._activeMoveState=!1,lt._isDrawedBeforeEnd=!1,lt._operatingMask&&lt._operatingMask.setAttribute("pickable",!1)}},lt._onBrushClear=function(nt){nt.preventDefault();var at=lt.attribute.removeOnClick,Rt=void 0===at||at;lt._isDownBeforeUpOutside&&Rt&&(lt._dispatchEvent(YL.brushClear,{"operateMask":lt._operatingMask,"operatedMaskAABBBounds":lt._brushMaskAABBBoundsDict,"event":nt}),lt._container.incrementalClearChild(),lt._brushMaskAABBBoundsDict={}),lt._activeDrawState=!1,lt._activeMoveState=!1,lt._isDrawedBeforeEnd=!1,lt._isDownBeforeUpOutside=!1,lt._operatingMask&&lt._operatingMask.setAttribute("pickable",!1)},lt}return h(e,nt),o(e,[{"key":"_bindBrushEvents","value":function(){var nt=this;if(!this.attribute.disableTriggerEvent){var at=this.attribute,lt=at.trigger,Rt=void 0===lt?qL.trigger:lt,Bt=at.updateTrigger,Lt=void 0===Bt?qL.updateTrigger:Bt,Ht=at.endTrigger,jt=void 0===Ht?qL.endTrigger:Ht,$t=at.resetTrigger,Kt=void 0===$t?qL.resetTrigger:$t;xt(Rt).forEach((function(at){return ax.addEventListener(at,nt._onBrushStart)})),xt(Lt).forEach((function(at){return nt.stage.addEventListener(at,nt._onBrushingWithDelay)})),xt(jt).forEach((function(at){return nt.stage.addEventListener(at,nt._onBrushEnd)})),xt(Kt).forEach((function(at){return nt.stage.addEventListener(at,nt._onBrushClear)}))}}},{"key":"_isPosInBrushMask","value":function(nt){for(var at,lt=this,Rt=this.eventPosToStagePos(nt),Bt=this._container.getChildren(),a=function(){var nt=Bt[Lt].attribute,at=nt.points,Ht=void 0===at?[]:at,jt=nt.dx,$t=void 0===jt?0:jt,Kt=nt.dy,te=void 0===Kt?0:Kt,ne=Ht.map((function(nt){return{"x":nt.x+$t,"y":nt.y+te}}));if(ii(ne,Rt.x,Rt.y))return{"v":(lt._operatingMask=Bt[Lt],!0)}},Lt=0;Lt<Bt.length;Lt++)if(at=a())return at.v;return!1}},{"key":"_initDraw","value":function(nt){var at=this.attribute.brushMode,lt=this.eventPosToStagePos(nt);this._cacheDrawPoints=[lt],this._isDrawedBeforeEnd=!1,"single"===at&&(this._brushMaskAABBBoundsDict={},this._container.incrementalClearChild()),this._addBrushMask(),this._dispatchEvent(YL.drawStart,{"operateMask":this._operatingMask,"operatedMaskAABBBounds":this._brushMaskAABBBoundsDict,"event":nt})}},{"key":"_initMove","value":function(nt){var at,lt;this._cacheMovePoint=this.eventPosToStagePos(nt),this._operatingMaskMoveDx=null!==(at=this._operatingMask.attribute.dx)&&void 0!==at?at:0,this._operatingMaskMoveDy=null!==(lt=this._operatingMask.attribute.dy)&&void 0!==lt?lt:0;var Rt=this.attribute.interactiveRange,Bt=Rt.minY,Lt=void 0===Bt?-1/0:Bt,Ht=Rt.maxY,jt=void 0===Ht?1/0:Ht,$t=Rt.minX,Kt=void 0===$t?-1/0:$t,te=Rt.maxX,ne=void 0===te?1/0:te,re=this._operatingMask.globalAABBBounds,ae=Kt-re.x1,oe=ne-re.x2,se=Lt-re.y1,le=jt-re.y2;this._operatingMaskMoveRangeX=[ae,oe],this._operatingMaskMoveRangeY=[se,le],this._operatingMask.setAttribute("pickable",!0),this._dispatchEvent(YL.moveStart,{"operateMask":this._operatingMask,"operatedMaskAABBBounds":this._brushMaskAABBBoundsDict,"event":nt})}},{"key":"_drawing","value":function(nt){var at,lt,Rt=this.eventPosToStagePos(nt),Bt=this.attribute,Lt=Bt.sizeThreshold,Ht=void 0===Lt?5:Lt,jt=Bt.brushType,$t=this._cacheDrawPoints.length;if($t>0){var Kt=null!==(at=this._cacheDrawPoints[this._cacheDrawPoints.length-1])&&void 0!==at?at:{};if(Rt.x===Kt.x&&Rt.y===Kt.y)return}"polygon"===jt||$t<=1?this._cacheDrawPoints.push(Rt):this._cacheDrawPoints[$t-1]=Rt;var te=this._computeMaskPoints();this._operatingMask.setAttribute("points",te);var ne=null===(lt=this._operatingMask)||void 0===lt?void 0:lt._AABBBounds,re=ne.x1,ae=void 0===re?0:re,oe=ne.x2,se=void 0===oe?0:oe,le=ne.y1,ue=void 0===le?0:le,ce=ne.y2,he=void 0===ce?0:ce;this._isDrawedBeforeEnd=!this._operatingMask._AABBBounds.empty()&&!!(Math.abs(se-ae)>Ht||Math.abs(ue-he)>Ht),this._isDrawedBeforeEnd&&(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(YL.drawing,{"operateMask":this._operatingMask,"operatedMaskAABBBounds":this._brushMaskAABBBoundsDict,"event":nt}))}},{"key":"_moving","value":function(nt){var at=this._cacheMovePoint,lt=this.eventPosToStagePos(nt);if(lt.x!==(null==at?void 0:at.x)||lt.y!==(null==at?void 0:at.y)){var Rt=lt.x-at.x,Bt=lt.y-at.y,Lt=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],Rt))+this._operatingMaskMoveDx,Ht=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],Bt))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({"dx":Lt,"dy":Ht}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchEvent(YL.moving,{"operateMask":this._operatingMask,"operatedMaskAABBBounds":this._brushMaskAABBBoundsDict,"event":nt})}}},{"key":"_computeMaskPoints","value":function(){var nt=this.attribute,at=nt.brushType,lt=nt.xRange,Rt=void 0===lt?[0,0]:lt,Bt=nt.yRange,Lt=void 0===Bt?[0,0]:Bt,Ht=this._cacheDrawPoints[0],jt=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return"rect"===at?[Ht,{"x":jt.x,"y":Ht.y},jt,{"x":Ht.x,"y":jt.y}]:"x"===at?[{"x":Ht.x,"y":Lt[0]},{"x":jt.x,"y":Lt[0]},{"x":jt.x,"y":Lt[1]},{"x":Ht.x,"y":Lt[1]}]:"y"===at?[{"x":Rt[0],"y":Ht.y},{"x":Rt[0],"y":jt.y},{"x":Rt[1],"y":jt.y},{"x":Rt[1],"y":Ht.y}]:ct(this._cacheDrawPoints)}},{"key":"_addBrushMask","value":function(){var nt,at=this.attribute,lt=at.brushStyle,Rt=at.hasMask,Bt=Hy.polygon(Object.assign(Object.assign({"points":ct(this._cacheDrawPoints),"cursor":"move","pickable":!1},lt),{"opacity":Rt?null!==(nt=lt.opacity)&&void 0!==nt?nt:1:0}));Bt.name="brush-".concat(Date.now()),this._operatingMask=Bt,this._container.add(Bt),this._brushMaskAABBBoundsDict[Bt.name]=Bt.AABBBounds}},{"key":"_outOfInteractiveRange","value":function(nt){var at=this.attribute.interactiveRange,lt=at.minY,Rt=void 0===lt?-1/0:lt,Bt=at.maxY,Lt=void 0===Bt?1/0:Bt,Ht=at.minX,jt=void 0===Ht?-1/0:Ht,$t=at.maxX,Kt=void 0===$t?1/0:$t,te=this.eventPosToStagePos(nt);return te.x>Kt||te.x<jt||te.y>Lt||te.y<Rt}},{"key":"eventPosToStagePos","value":function(nt){return this.stage.eventPointTransform(nt)}},{"key":"render","value":function(){this._bindBrushEvents();var nt=this.createOrUpdateChild("brush-container",{},"group");this._container=nt}},{"key":"releaseBrushEvents","value":function(){var nt=this,at=this.attribute;at.delayType,at.delayTime;var lt=at.trigger,Rt=void 0===lt?qL.trigger:lt,Bt=at.updateTrigger,Lt=void 0===Bt?qL.updateTrigger:Bt,Ht=at.endTrigger,jt=void 0===Ht?qL.endTrigger:Ht,$t=at.resetTrigger,Kt=void 0===$t?qL.resetTrigger:$t;xt(Rt).forEach((function(at){return ax.removeEventListener(at,nt._onBrushStart)})),xt(Lt).forEach((function(at){return nt.stage.removeEventListener(at,nt._onBrushingWithDelay)})),xt(jt).forEach((function(at){return nt.stage.removeEventListener(at,nt._onBrushEnd)})),xt(Kt).forEach((function(at){return nt.stage.removeEventListener(at,nt._onBrushClear)}))}}])}(xS);ZL.defaultAttributes=qL;var CO=function(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];var Bt=[nt.shape].concat(m(lt.map((function(nt){return null==nt?void 0:nt.shape})))),Lt=[nt.key].concat(m(lt.map((function(nt){return null==nt?void 0:nt.key})))),Ht=[nt.value].concat(m(lt.map((function(nt){return null==nt?void 0:nt.value}))));return ft.apply(void 0,[nt].concat(lt,[{"shape":Bt.every(j)?void 0:ft.apply(void 0,[{}].concat(m(Bt))),"key":Lt.every(j)?void 0:ft.apply(void 0,[{}].concat(m(Lt))),"value":Ht.every(j)?void 0:ft.apply(void 0,[{}].concat(m(Ht)))}]))},EO=function(nt){var at=nt.width,lt=nt.height,Rt=nt.wordBreak,Bt=void 0===Rt?"break-word":Rt,Lt=nt.textAlign,Ht=nt.textBaseline,jt=nt.text;return Array.isArray(jt)?{"width":at,"height":lt,"wordBreak":Bt,"textAlign":Lt,"textBaseline":Ht,"singleLine":!1,"textConfig":xt(jt).map((function(at){return Object.assign(Object.assign({},nt),{"text":at})}))}:{"width":at,"height":lt,"wordBreak":Bt,"textAlign":Lt,"textBaseline":Ht,"singleLine":!1,"textConfig":null==jt?void 0:jt.text}},QL={"panel":{"visible":!0,"cornerRadius":[3,3,3,3],"fill":"white","shadow":!0,"shadowBlur":12,"shadowColor":"rgba(0, 0, 0, 0.1)","shadowOffsetX":0,"shadowOffsetY":4,"shadowSpread":0,"stroke":"white"},"titleStyle":{"value":{"fill":"#4E5969","fontFamily":WP,"fontSize":14,"lineHeight":18,"textAlign":"left","textBaseline":"middle"},"spaceRow":6},"contentStyle":{"shape":{"fill":"black","size":8,"symbolType":"circle","spacing":6},"key":{"fill":"#4E5969","fontFamily":WP,"fontSize":12,"lineHeight":18,"textAlign":"left","textBaseline":"middle","spacing":26},"value":{"fill":"#4E5969","fontFamily":WP,"fontSize":12,"lineHeight":18,"textAlign":"right","textBaseline":"middle","spacing":0},"spaceRow":6},"padding":10,"positionX":"right","positionY":"bottom","offsetX":10,"offsetY":10,"parentBounds":(new _i).setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),"autoCalculatePosition":!0,"autoMeasure":!0,"pickable":!1,"childrenPickable":!1,"zIndex":500},JL=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];xP(),BP(),FP(),zP(),DP();var oF=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[(null==at?void 0:at.skipDefault)?nt:ft({},e.defaultAttributes,nt),at])).name="tooltip",lt}return h(e,nt),o(e,[{"key":"render","value":function(){var nt,at=this,lt=this.attribute,Rt=lt.visible,Bt=lt.content,Lt=lt.panel,Ht=lt.keyWidth,jt=lt.valueWidth,$t=lt.hasContentShape,Kt=lt.autoCalculatePosition,te=lt.autoMeasure,ne=lt.align;if(Rt){te&&e.measureTooltip(this.attribute),Kt&&e.calculateTooltipPosition(this.attribute);var re=Ci(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({"visible":!0},Lt),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{"visible":!0,"x":re[3],"y":re[0]},"group");var ae=e.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",ft({"symbolType":"circle"},ae.shape,{"visible":YP(ae)&&YP(ae.shape)}),"symbol"),"object"!=b(ae.value.text)||null===ae.value.text||"rich"!==ae.value.text.type&&"html"!==ae.value.text.type?ae.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({"visible":YP(ae)&&YP(ae.value)},EO(ae.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({"text":null!==(nt=ae.value.text)&&void 0!==nt?nt:"","visible":YP(ae)&&YP(ae.value)},ae.value),"text"):"rich"===ae.value.text.type?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({"visible":YP(ae)&&YP(ae.value)},EO(ae.value)),"richtext"):"html"===ae.value.text.type&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({"html":Object.assign(Object.assign({"dom":ae.value.text.text},ZP),ae.value),"visible":YP(ae)&&YP(ae.value),"width":ae.value.width,"height":ae.value.height,"wordBreak":ae.value.wordBreak,"textAlign":ae.value.textAlign,"textBaseline":ae.value.textBaseline,"singleLine":!1,"textConfig":[]},ae.value),"richtext"));var oe=YP(ae.shape)?ae.shape.size+ae.shape.spacing:0,se=ae.value,le=se.textAlign,ue=se.textBaseline,ce=Lt.width-re[3]-re[0]-oe;"center"===le?this._tooltipTitle.setAttribute("x",oe+ce/2):"right"===le||"end"===le?this._tooltipTitle.setAttribute("x",oe+ce):this._tooltipTitle.setAttribute("x",oe),"bottom"===ue?this._tooltipTitle.setAttribute("y",ae.height):"middle"===ue?this._tooltipTitle.setAttribute("y",ae.height/2):this._tooltipTitle.setAttribute("y",0);var he=YP(ae)?ae.height+ae.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{"visible":!0},"group"),this._tooltipContent.removeAllChild(!0),Bt&&Bt.length){this._tooltipContent.setAttribute("x",re[3]),this._tooltipContent.setAttribute("y",re[0]+he);var de=0;Bt.forEach((function(nt,lt){var Rt=e.getContentAttr(at.attribute,lt);if(YP(Rt)){var Bt="tooltip-content-".concat(lt),Lt=at._tooltipContent.createOrUpdateChild(Bt,{"visible":!0,"x":0,"y":de},"group"),Kt=Rt.shape.size+Rt.shape.spacing,te="right"===ne?($t?Kt:0)+(YP(Rt.key)?Ht+Rt.key.spacing:0)+(YP(Rt.value)?jt:0):0;at._createShape("right"===ne?te-Rt.shape.size/2:te+Rt.shape.size/2,Rt,Lt,Bt),$t&&("right"===ne?te-=Kt:te+=Kt);var re=at._createKey(Rt,Lt,Bt);re&&(cR(ne,re,Rt.key.textAlign,te,Ht),re.setAttribute("y",0),"right"===ne?te-=Ht+Rt.key.spacing:te+=Ht+Rt.key.spacing);var ae=at._createValue(Rt,Lt,Bt);if(ae){var oe="right";N(Rt.value.textAlign)?oe=Rt.value.textAlign:YP(Rt.key)||"right"===ne||(oe="left"),ae.setAttribute("textAlign",oe),cR(ne,ae,oe,te,jt),ae.setAttribute("y",0)}de+=Rt.height+Rt.spaceRow}}))}}else this.hideAll()}},{"key":"_createShape","value":function(nt,at,lt,Rt){var Bt;if(YP(at.shape))return lt.createOrUpdateChild("".concat(Rt,"-shape"),Object.assign({"visible":!0,"x":nt,"y":at.shape.size/2+((null!==(Bt=hd(at.key.lineHeight,at.key.fontSize))&&void 0!==Bt?Bt:at.key.fontSize)-at.shape.size)/2},at.shape),"symbol")}},{"key":"_createKey","value":function(nt,at,lt){var Rt;if(YP(nt.key))return nt.key.multiLine?at.createOrUpdateChild("".concat(lt,"-key"),Object.assign(Object.assign({"visible":!0},EO(nt.key)),{"textBaseline":"top"}),"richtext"):"object"!=b(nt.key.text)||null===nt.key.text||"rich"!==nt.key.text.type&&"html"!==nt.key.text.type?at.createOrUpdateChild("".concat(lt,"-key"),Object.assign(Object.assign({"visible":!0,"text":null!==(Rt=nt.key.text)&&void 0!==Rt?Rt:""},nt.key),{"textBaseline":"top"}),"text"):"rich"===nt.key.text.type?at.createOrUpdateChild("".concat(lt,"-value"),Object.assign(Object.assign({"visible":!0},EO(nt.key)),{"textBaseline":"top"}),"richtext"):at.createOrUpdateChild("".concat(lt,"-value"),{"html":Object.assign(Object.assign({"dom":nt.key.text.text},ZP),nt.key)},"richtext")}},{"key":"_createValue","value":function(nt,at,lt){var Rt;if(YP(nt.value))return nt.value.multiLine?at.createOrUpdateChild("".concat(lt,"-value"),Object.assign(Object.assign({"visible":!0},EO(nt.value)),{"textBaseline":"top"}),"richtext"):"object"!=b(nt.value.text)||null===nt.value.text||"rich"!==nt.value.text.type&&"html"!==nt.value.text.type?at.createOrUpdateChild("".concat(lt,"-value"),Object.assign(Object.assign({"visible":!0,"text":null!==(Rt=nt.value.text)&&void 0!==Rt?Rt:""},nt.value),{"textBaseline":"top"}),"text"):"rich"===nt.value.text.type?at.createOrUpdateChild("".concat(lt,"-value"),Object.assign(Object.assign({"visible":!0},EO(nt.value)),{"textBaseline":"top"}),"richtext"):at.createOrUpdateChild("".concat(lt,"-value"),{"html":Object.assign({"dom":nt.value.text.text,"container":"","width":30,"height":30,"style":{}},nt.value)},"richtext")}},{"key":"setAttributes","value":function(nt,at){var lt=Object.keys(nt);this.attribute.autoCalculatePosition&&lt.every((function(nt){return JL.includes(nt)}))?(this._mergeAttributes(nt,lt),j(this.attribute.panel.width)&&this.attribute.autoMeasure&&e.measureTooltip(this.attribute),e.calculateTooltipPosition(this.attribute),y(e,"setAttributes",this,3)([{"x":this.attribute.x,"y":this.attribute.y},at])):y(e,"setAttributes",this,3)([nt,at])}}],[{"key":"calculateTooltipPosition","value":function(nt){var at=nt.panel,lt=at.width,Rt=void 0===lt?0:lt,Bt=at.height,Lt=void 0===Bt?0:Bt,Ht=nt.offsetX,jt=nt.offsetY,$t=nt.pointerX,Kt=nt.pointerY,te=nt.positionX,ne=nt.positionY,re=nt.parentBounds,ae=$t,oe=Kt;return"left"===te?ae-=Rt+Ht:"center"===te?ae-=Rt/2:ae+=Ht,"top"===ne?oe-=Lt+jt:"middle"===ne?oe-=Lt/2:oe+=jt,ae+Rt>re.x2&&(ae-=Rt+Ht),oe+Lt>re.y2&&(oe-=Lt+jt),ae<re.x1&&(ae=re.x1),oe<re.y1&&(oe=re.y1),nt.x=ae,nt.y=oe,nt}},{"key":"measureTooltip","value":function(nt){var at=nt.content,lt=nt.contentStyle,Rt=Ci(nt.padding),Bt=e.getTitleAttr(nt),Lt=0,Ht=Rt[0]+Rt[2],jt=0,$t=Bt.value,Kt=Bt.shape,te=null!=Kt?Kt:{},ne=te.visible,re=void 0!==ne&&ne,ae=te.symbolType,oe=void 0===ae?"":ae;if(N($t)&&"object"!=b(Bt.value.text)){var se=aR($t).quickMeasure($t.text),le=se.width,ue=se.height;Lt=le,jt=ue}if(re&&Yp[oe]&&(Lt+=Kt.size+Kt.spacing,jt=Math.max(Kt.size,jt)),nt.title&&(nt.title.width=Lt,nt.title.height=jt),YP(Bt)&&(Ht+=jt+Bt.spaceRow),at&&at.length){var ce=[];if(at.forEach((function(at,lt){var Rt=e.getContentAttr(nt,lt);(at.key||at.value)&&YP(Rt)&&ce.push([at,Rt])})),ce.length){var he=!1,de=[],fe=[],pe=[];ce.forEach((function(nt,at){var Rt,Bt=g(nt,2),Lt=Bt[0],jt=Bt[1],$t=jt.key,Kt=jt.value,te=jt.shape,ne=jt.spaceRow,re=YP(te),ae=null!==(Rt=null==te?void 0:te.symbolType)&&void 0!==Rt?Rt:"",oe=aR($t),se=aR(Kt),le=0;if(YP($t)){var ue=oe.quickMeasure($t.text),ve=ue.width,Ae=ue.height;fe.push(ve),le=Math.max(le,Ae)}if(YP(Kt)){var we=se.quickMeasure(Kt.text),Ce=we.width,je=we.height;pe.push(Ce),le=Math.max(le,je)}re&&Yp[ae]&&(he=!0,de.push(te.size),le=Math.max(te.size,le)),Lt.height=le,Ht+=le,at<ce.length-1&&(Ht+=null!=ne?ne:lt.spaceRow)}));var ve=de.length?Math.max.apply(Math,de):0,Ae=fe.length?Math.max.apply(Math,fe):0,we=pe.length?Math.max.apply(Math,pe):0;Lt=Math.max(Ae+we+lt.key.spacing+lt.value.spacing+(he?ve+lt.shape.spacing:0),Lt),at.forEach((function(nt){nt.width=Lt})),nt.hasContentShape=he,nt.keyWidth=Ae,nt.valueWidth=we}}return nt.panel.width=Lt+Rt[1]+Rt[3],nt.panel.height=Ht,nt}},{"key":"getTitleAttr","value":function(nt){return CO({},e.defaultAttributes.titleStyle,e.defaultAttributes.title,nt.titleStyle,nt.title)}},{"key":"getContentAttr","value":function(nt,at){return CO({},e.defaultAttributes.contentStyle,nt.contentStyle,nt.content[at])}}])}(xS);oF.defaultAttributes=QL;var sF=Nt;function LO(nt,at){var lt=[];return nt.forEach((function(nt){var Rt=+nt[at];Q(Rt)&&lt.push(Rt)})),0===lt.length?null:At(lt)}function DO(nt,at){var lt=[];return nt.forEach((function(nt){var Rt=+nt[at];Q(Rt)&&lt.push(Rt)})),0===lt.length?null:St(lt)}function OO(nt,at){return nt.reduce((function(nt,lt){var Rt=at?+lt[at]:+lt;return Q(Rt)&&(nt+=Rt),nt}),0)}function FO(nt,at){var lt=0,Rt=0;return nt.forEach((function(nt){var Bt=at?+nt[at]:+nt;Q(Bt)&&(lt+=Bt,Rt++)})),lt/Rt}function zO(nt,at){var lt=FO(nt,at);return nt.length<=1?0:nt.reduce((function(nt,Rt){return nt+Math.pow(at?+Rt[at]:+Rt-lt,2)}),0)/(nt.length-1)}function HO(nt,at){var lt=jO(nt),Rt=jO(at),Bt=Math.asin((nt.x*at.y-at.x*nt.y)/lt/Rt),Lt=Math.acos((nt.x*at.x+nt.y*at.y)/lt/Rt);return Bt<0?-Lt:Lt}function jO(nt,at){return void 0===at&&(at={"x":0,"y":0}),Ge.distancePP(nt,at)}function NO(nt){return Q(nt.x)&&Q(nt.y)}function VO(nt,at,lt){var Rt,Bt,Lt,Ht,jt=!1;if(at&&H(at))try{for(var $t=C(nt),Kt=$t.next();!Kt.done;Kt=$t.next()){var te=Kt.value;try{for(var ne=(Lt=void 0,C(te.getSeries(lt))),re=ne.next();!re.done;re=ne.next()){var ae=re.value;if(jt=!!at.call(null,ae))return jt}}catch(nt){Lt={"error":nt}}finally{try{re&&!re.done&&(Ht=ne.return)&&Ht.call(ne)}finally{if(Lt)throw Lt.error}}}}catch(nt){Rt={"error":nt}}finally{try{Kt&&!Kt.done&&(Bt=$t.return)&&Bt.call($t)}finally{if(Rt)throw Rt.error}}return jt}function GO(nt,at){var lt,Rt,Bt,Lt,Ht=[];try{for(var jt=C(nt),$t=jt.next();!$t.done;$t=jt.next()){var Kt=$t.value;try{for(var te=(Bt=void 0,C(Kt.getSeries(at))),ne=te.next();!ne.done;ne=te.next()){var re=ne.value;Ht.push(re)}}catch(nt){Bt={"error":nt}}finally{try{ne&&!ne.done&&(Lt=te.return)&&Lt.call(te)}finally{if(Bt)throw Bt.error}}}}catch(nt){lt={"error":nt}}finally{try{$t&&!$t.done&&(Rt=jt.return)&&Rt.call(jt)}finally{if(lt)throw lt.error}}return Ht}var mF,_F,xF,XO=function(nt,at){for(var lt=0;lt<nt.length;lt++)for(var Rt=nt[lt].getSeries(),Bt=0;Bt<Rt.length;Bt++){var Lt=Rt[Bt];if(at&&Lt&&Lt.coordinate===at)return Lt;if(!at&&Lt)return Lt}return null};function KO(nt){return function(at){return X(nt)?nt.reduce((function(nt,at){return null==nt?void 0:nt[at]}),at):null==at?void 0:at[nt]}}function qO(at){var lt,Rt;return at.type===nt.SeriesTypeEnum.sankey?null!==(lt=at.direction)&&void 0!==lt?lt:"horizontal":null!==(Rt=at.direction)&&void 0!==Rt?Rt:"vertical"}nt.SeriesTypeForThemeEnum=void 0,(mF=nt.SeriesTypeForThemeEnum||(nt.SeriesTypeForThemeEnum={})).area_horizontal="area_horizontal",mF.area_vertical="area_vertical",mF.area_stack="area_stack",mF.line_horizontal="line_horizontal",mF.line_vertical="line_vertical",mF.line_stack="line_stack",mF.bar_horizontal="bar_horizontal",mF.bar_vertical="bar_vertical",mF.bar_stack="bar_stack",mF.bar3d_horizontal="bar3d_horizontal",mF.bar3d_vertical="bar3d_vertical",mF.bar3d_stack="bar3d_stack",mF.rangeColumn_horizontal="rangeColumn_horizontal",mF.rangeColumn_vertical="rangeColumn_vertical",mF.rangeColumn3d_horizontal="rangeColumn3d_horizontal",mF.rangeColumn3d_vertical="rangeColumn3d_vertical",mF.rangeArea_horizontal="rangeArea_horizontal",mF.rangeArea_vertical="rangeArea_vertical",mF.linearProgress_horizontal="linearProgress_horizontal",mF.linearProgress_vertical="linearProgress_vertical",mF.linearProgress_stack="linearProgress_stack",mF.boxPlot_horizontal="boxPlot_horizontal",mF.boxPlot_vertical="boxPlot_vertical",mF.sankey_horizontal="sankey_horizontal",mF.sankey_vertical="sankey_vertical",mF.waterfall_horizontal="waterfall_horizontal",mF.waterfall_vertical="waterfall_vertical",mF.circularProgress_stack="circularProgress_stack",mF.radar_stack="radar_stack",mF.rose_stack="rose_stack",nt.SeriesTypeEnum=void 0,(_F=nt.SeriesTypeEnum||(nt.SeriesTypeEnum={})).area="area",_F.line="line",_F.bar="bar",_F.bar3d="bar3d",_F.rangeColumn="rangeColumn",_F.rangeColumn3d="rangeColumn3d",_F.rangeArea="rangeArea",_F.dot="dot",_F.geo="geo",_F.link="link",_F.map="map",_F.pie="pie",_F.pie3d="pie3d",_F.radar="radar",_F.rose="rose",_F.scatter="scatter",_F.circularProgress="circularProgress",_F.wordCloud="wordCloud",_F.wordCloud3d="wordCloud3d",_F.funnel="funnel",_F.funnel3d="funnel3d",_F.linearProgress="linearProgress",_F.boxPlot="boxPlot",_F.sankey="sankey",_F.gaugePointer="gaugePointer",_F.gauge="gauge",_F.treemap="treemap",_F.sunburst="sunburst",_F.circlePacking="circlePacking",_F.waterfall="waterfall",_F.heatmap="heatmap",_F.correlation="correlation",_F.liquid="liquid",_F.venn="venn",_F.mosaic="mosaic",_F.pictogram="pictogram",nt.SeriesMarkNameEnum=void 0,(xF=nt.SeriesMarkNameEnum||(nt.SeriesMarkNameEnum={})).label="label",xF.point="point",xF.line="line",xF.area="area",xF.bar="bar",xF.bar3d="bar3d",xF.boxPlot="boxPlot",xF.outlier="outlier",xF.circlePacking="circlePacking",xF.group="group",xF.gridBackground="gridBackground",xF.grid="grid",xF.dot="dot",xF.title="title",xF.subTitle="subTitle",xF.symbol="symbol",xF.funnel="funnel",xF.funnel3d="funnel3d",xF.transform="transform",xF.transform3d="transform3d",xF.transformLabel="transformLabel",xF.outerLabel="outerLabel",xF.outerLabelLine="outerLabelLine",xF.pin="pin",xF.pinBackground="pinBackground",xF.pointer="pointer",xF.segment="segment",xF.track="track",xF.cell="cell",xF.cellBackground="cellBackground",xF.link="link",xF.arrow="arrow",xF.pie="pie",xF.pie3d="pie3d",xF.labelLine="labelLine",xF.progress="progress",xF.minLabel="minLabel",xF.maxLabel="maxLabel",xF.rose="rose",xF.node="node",xF.sunburst="sunburst",xF.nonLeaf="nonLeaf",xF.leaf="leaf",xF.nonLeafLabel="nonLeafLabel",xF.leaderLine="leaderLine",xF.stackLabel="stackLabel",xF.word="word",xF.fillingWord="fillingWord",xF.wordMask="wordMask",xF.nodePoint="nodePoint",xF.ripplePoint="ripplePoint",xF.centerPoint="centerPoint",xF.centerLabel="centerLabel",xF.barBackground="barBackground",xF.lineLabel="lineLabel",xF.areaLabel="areaLabel",xF.liquidGroup="liquidGroup",xF.liquid="liquid",xF.liquidBackground="liquidBackground",xF.liquidOutline="liquidOutline",xF.circle="circle",xF.overlap="overlap",xF.overlapLabel="overlapLabel",xF.pictogram="pictogram";var kF={"primaryFontColor":"titleFontColor","tertiaryFontColor":"labelFontColor","axisLabelFontColor":"axisFontColor","axisMarkerFontColor":"labelReverseFontColor","dataZoomHandleStrokeColor":"dataZoomHandlerStrokeColor","sliderHandleColor":"dataZoomHandlerFillColor","sliderRailColor":"dataZoomBackgroundColor","sliderTrackColor":"dataZoomSelectedColor","playerControllerColor":"dataZoomSelectedColor","popupBackgroundColor":"tooltipBackgroundColor","hoverBackgroundColor":"axisGridColor"},SF={"titleFontColor":"primaryFontColor","labelFontColor":"tertiaryFontColor","axisFontColor":"axisLabelFontColor","labelReverseFontColor":"axisMarkerFontColor","dataZoomHandlerStrokeColor":"dataZoomHandleStrokeColor","dataZoomHandlerFillColor":"sliderHandleColor","dataZoomBackgroundColor":"sliderRailColor","dataZoomSelectedColor":"sliderTrackColor","tooltipBackgroundColor":"popupBackgroundColor"};function QO(nt,at){var lt;if(!nt)return[];var Rt=aF(nt,at);if(!Rt||X(Rt))return null!==(lt=Rt)&&void 0!==lt?lt:[];if(V(Rt)){var Bt=Rt.dataScheme;return Bt?nF(Bt)?Bt.map((function(lt){return A(A({},lt),{"scheme":lt.scheme.map((function(lt){return iF(lt)?tF(nt,lt,at):lt})).filter(N)})})):Bt.map((function(lt){return iF(lt)?tF(nt,lt,at):lt})).filter(N):[]}return[]}function $O(nt,at){var lt,Rt;return nF(nt)?null!==(Rt=null===(lt=nt.find((function(nt){return N(nt.isAvailable)?H(nt.isAvailable)?nt.isAvailable(at):!!nt.isAvailable:!N(nt.maxDomainLength)||(null==at?void 0:at.length)<=nt.maxDomainLength})))||void 0===lt?void 0:lt.scheme)&&void 0!==Rt?Rt:nt[nt.length-1].scheme:nt}function tF(nt,at,lt){var Rt,Bt=aF(nt,lt);if(Bt){var Lt,Ht=Bt.palette;if(V(Ht)&&(Lt=null!==(Rt=function(nt,at){var lt=kF[at];if(lt&&nt[lt])return nt[lt];if(nt[at])return nt[at];var Rt=SF[at];return Rt?nt[Rt]:void 0}(Ht,at.key))&&void 0!==Rt?Rt:at.default),Lt){if(j(at.a)&&j(at.l)||!Y(Lt))return Lt;var jt=new Wi(Lt);if(N(at.l)){var $t=jt.color,Kt=yi($t.r,$t.g,$t.b),te=gi(Kt.h,Kt.s,at.l),ne=new Wi("rgb(".concat(te.r,", ").concat(te.g,", ").concat(te.b,")"));ne.setOpacity(jt.color.opacity),jt=ne}return N(at.a)&&jt.setOpacity(at.a),jt.toRGBA()}}}var eF=function(nt,at,lt){if(at&&iF(nt)){var Rt=tF(at,nt,lt);if(Rt)return Rt}return nt};function iF(nt){return nt&&"palette"===nt.type&&!!nt.key}function nF(nt){return!(!X(nt)||0===nt.length)&&nt.every((function(nt){return N(nt.scheme)}))}function rF(nt){return X(nt)?{"dataScheme":nt}:nt}function aF(nt,at){var lt,Rt,Bt,Lt=(null!=at?at:{}).type;if(!at||j(Lt))Bt=null==nt?void 0:nt.default;else{var Ht=qO(at);Bt=null!==(Rt=null!==(lt=null==nt?void 0:nt["".concat(Lt,"_").concat(Ht)])&&void 0!==lt?lt:null==nt?void 0:nt[Lt])&&void 0!==Rt?Rt:null==nt?void 0:nt.default}return Bt}var AF=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.range=function(at){return at?(this._range=at,this._resetRange(),this):nt.prototype.range.call(this)},e.prototype.domain=function(at){return at?(nt.prototype.domain.call(this,at),this._resetRange(),this):nt.prototype.domain.call(this)},e.prototype._resetRange=function(){if(nF(this._range)){var at=$O(this._range,this._domain);nt.prototype.range.call(this,at)}else nt.prototype.range.call(this,this._range)},e}(DI),wF={"linear":EB,"band":LI,"point":OB,"ordinal":DI,"threshold":rO,"colorOrdinal":AF};function lF(nt){var at=wF[nt];return at?new at:null}function uF(nt,at,lt){if(!at)return nt;var Rt=at.range(),Bt=lt&&at._calculateWholeRange?at._calculateWholeRange(Rt):at.range(),Lt=Math.min(Bt[0],Bt[Bt.length-1]),Ht=Math.max(Bt[0],Bt[Bt.length-1]);return Math.min(Math.max(Lt,nt),Ht)}function cF(nt){return N(null==nt?void 0:nt.field)&&N(null==nt?void 0:nt.scale)}function hF(nt){switch(nt){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function dF(nt){return!!Y(nt)&&!!nt.endsWith("%")&&Vk(nt.substring(0,nt.length-1))}function pF(nt,at,lt,Rt){var Bt,Lt;return void 0===Rt&&(Rt=0),Z(nt)?nt:dF(nt)?Number(nt.substring(0,nt.length-1))*at/100:H(nt)?nt(lt):V(nt)?at*(null!==(Bt=nt.percent)&&void 0!==Bt?Bt:0)+(null!==(Lt=nt.offset)&&void 0!==Lt?Lt:0):Rt}function fF(nt,at,lt){var Rt,Bt,Lt,Ht,jt={"top":0,"bottom":0,"left":0,"right":0};return Object.values(nt).every((function(nt){return Z(nt)}))?(jt.top=null!==(Rt=nt.top)&&void 0!==Rt?Rt:0,jt.right=null!==(Bt=nt.right)&&void 0!==Bt?Bt:0,jt.bottom=null!==(Lt=nt.bottom)&&void 0!==Lt?Lt:0,jt.left=null!==(Ht=nt.left)&&void 0!==Ht?Ht:0,jt):([{"orients":["left","right"],"size":at.width},{"orients":["top","bottom"],"size":at.height}].forEach((function(at){at.orients.forEach((function(Rt){jt[Rt]=pF(nt[Rt],at.size,lt)}))})),jt)}function vF(nt){var at,lt={};return X(nt)?(j(nt[0])||(lt.top=lt.left=lt.bottom=lt.right=nt[0]),j(nt[1])||(lt.left=lt.right=nt[1]),j(nt[2])||(lt.bottom=nt[2]),j(nt[3])||(lt.left=nt[3]),lt):Z(nt)||dF(nt)||H(nt)||V(at=nt)&&("percent"in at||"offset"in at)?(lt.top=lt.left=lt.bottom=lt.right=nt,lt):V(nt)?lt=A({},nt):lt}function gF(nt,at,lt){return lt?{"x":nt.x+at.x,"y":nt.y+at.y}:nt}var yF=function(nt,at){var lt=Number(nt),Rt=nt.toString();return isNaN(lt)&&"%"===Rt[Rt.length-1]?at*(Number(Rt.slice(0,Rt.length-1))/100):lt},CF=[{"maxDomainLength":10,"scheme":["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{"scheme":["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],MF={"default":{"dataScheme":CF,"palette":{"backgroundColor":"#ffffff","borderColor":"#e3e5e8","shadowColor":"rgba(33,37,44,0.1)","hoverBackgroundColor":"#f1f2f5","sliderRailColor":"#f1f3f4","sliderHandleColor":"#ffffff","sliderTrackColor":"#0040ff","popupBackgroundColor":"#ffffff","primaryFontColor":"#21252c","secondaryFontColor":"#606773","tertiaryFontColor":"#89909d","axisLabelFontColor":"#89909d","disableFontColor":"#bcc1cb","axisMarkerFontColor":"#ffffff","axisGridColor":"#f1f2f5","axisDomainColor":"#d9dde4","dataZoomHandleStrokeColor":"#aeb5be","dataZoomChartColor":"#c9ced8","playerControllerColor":"#0040ff","scrollBarSliderColor":"rgba(0,0,0,0.3)","axisMarkerBackgroundColor":"#21252c","markLabelBackgroundColor":"#f1f2f5","markLineStrokeColor":"#606773","dangerColor":"#e33232","warningColor":"#ffc528","successColor":"#07a35a","infoColor":"#3073f2","discreteLegendPagerTextColor":"rgb(51, 51, 51)","discreteLegendPagerHandlerColor":"rgb(47, 69, 84)","discreteLegendPagerHandlerDisableColor":"rgb(170, 170, 170)","emptyCircleColor":"#e3e5e8","linearProgressTrackColor":"#E7EBED"}}},bF=function(nt){var at={"label":{"style":{"fill":"white","textBaseline":"middle","lineWidth":2}},"outerLabel":{"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fill":{"type":"palette","key":"secondaryFontColor"}},"line":{"style":{"stroke":{"type":"palette","key":"axisDomainColor"}}}},"transformLabel":{"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fill":{"type":"palette","key":"secondaryFontColor"},"textBaseline":"middle"}}};return at[nt?"transform3d":"transform"]={"style":{"fill":{"type":"palette","key":"axisGridColor"}}},at},TF=bF(),EF=bF(!0),PF="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z",RF={"pointer":{"type":"path","width":.4,"height":.4,"style":{"path":"M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z"}},"pin":{"width":.025,"height":.025,"style":{"path":PF,"fill":"#888"}},"pinBackground":{"width":.06,"height":.06,"style":{"path":PF,"fill":"#ddd"}}},IF={"word":{"padding":1,"style":{"textAlign":"center","textBaseline":"alphabetic"}}},BF={"word":{"padding":1,"style":{"textAlign":"center","textBaseline":"alphabetic"}}},OF="__VCHART",DF=500,LF=500,FF="".concat(OF,"_ARC_TRANSFORM_VALUE"),zF="".concat(OF,"_ARC_RATIO"),HF="".concat(OF,"_ARC_START_ANGLE"),jF="".concat(OF,"_ARC_END_ANGLE"),NF="".concat(OF,"_ARC_K"),VF="".concat(OF,"_ARC_MIDDLE_ANGLE"),WF="".concat(OF,"_ARC_QUADRANT"),GF="".concat(OF,"_ARC_RADIAN"),UF=-Math.PI/2,XF=3*Math.PI/2,qF=.6,ZF={"scatter":{"point":{"style":{"size":8,"symbolType":"circle","lineWidth":0,"fillOpacity":.8}},"label":{"visible":!1,"offset":5,"position":"top","style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"}}}},"line":{"label":{"visible":!1,"position":"top","offset":5,"style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"}}},"point":{"style":{"symbolType":"circle"}}},"area":{"label":{"visible":!1,"offset":5,"position":"top","style":{"stroke":{"type":"palette","key":"backgroundColor"},"lineWidth":2}},"point":{"style":{"symbolType":"circle"}},"seriesMark":"area"},"bar":{"label":{"visible":!1,"position":"outside","offset":5,"style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"}}}},"bar3d":{"bar3d":{"style":{"length":3}},"label":{"visible":!1,"style":{"offset":12,"position":"outside"}}},"pie":{"outerRadius":.6,"pie":{"style":{"fillOpacity":1}},"label":{"visible":!1,"interactive":!0,"position":"outside","style":{"fontWeight":"normal","stroke":{"type":"palette","key":"backgroundColor"},"fillOpacity":1}},"innerLabel":{"style":{"lineWidth":2}},"emptyCircle":{"style":{"fill":{"type":"palette","key":"emptyCircleColor"},"fillOpacity":1}}},"pie3d":{"outerRadius":.6,"pie3d":{"style":{"height":10,"fillOpacity":1}},"label":{"visible":!1,"interactive":!0,"position":"outside"}},"map":{"defaultFillColor":"#f3f3f3","area":{"style":{"lineWidth":.5,"strokeOpacity":1,"stroke":"black","fillOpacity":1}},"label":{"interactive":!1,"style":{"fontSize":{"type":"token","key":"l6FontSize"},"lineHeight":{"type":"token","key":"l6LineHeight"},"textBaseline":"middle","fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"},"stroke":{"type":"palette","key":"backgroundColor"}}}},"radar":{"label":{"visible":!1,"offset":5,"style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"}}},"point":{"style":{"symbolType":"circle"}}},"dot":{"dot":{"style":{"size":10,"fillOpacity":1}},"symbol":{"style":{"size":10}},"title":{"style":{"textAlign":"left","textBaseline":"middle","fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}},"subTitle":{"style":{"textAlign":"left","textBaseline":"top","fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}}},"link":{"arrow":{"style":{"size":10}}},"wordCloud":IF,"wordCloud3d":BF,"funnel":TF,"funnel3d":EF,"linearProgress":{"bandWidth":30,"progress":{"style":{"fillOpacity":1}},"track":{"style":{"fill":{"type":"palette","key":"linearProgressTrackColor"},"fillOpacity":1}}},"circularProgress":{"outerRadius":.8,"innerRadius":.6,"progress":{"style":{"fillOpacity":1}},"track":{"style":{"fillOpacity":.2}},"tickMask":{"visible":!1,"angle":3,"offsetAngle":0,"forceAlign":!0}},"waterfall":{"seriesFieldName":{"total":"total","increase":"increase","decrease":"decrease"},"leaderLine":{"style":{"stroke":"black","lineWidth":1,"lineDash":[4,4]}},"stackLabel":{"visible":!0,"offset":12,"position":"withChange","style":{"fill":"black","fontSize":{"type":"token","key":"l4FontSize"}}},"label":{"visible":!1,"offset":12,"position":"inside","style":{"lineWidth":2}}},"gauge":{"outerRadius":.8,"innerRadius":.6,"padAngle":1.146,"segment":{"style":{"fillOpacity":1}},"tickMask":{"visible":!1,"angle":3,"offsetAngle":0,"forceAlign":!0}},"gaugePointer":RF,"treemap":{"gapWidth":1,"nodePadding":[5],"nonLeaf":{"visible":!1,"style":{"fillOpacity":.5}},"label":{"style":{"fill":"white","textBaseline":"middle","textAlign":"center","fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}},"nonLeafLabel":{"padding":24,"style":{"fill":"black","stroke":{"type":"palette","key":"backgroundColor"},"lineWidth":2,"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"textBaseline":"middle","textAlign":"center"}}},"sunburst":{"innerRadius":0,"outerRadius":1,"startAngle":-90,"endAngle":270,"gap":0,"labelLayout":{"align":"center","offset":0,"rotate":"radial"},"sunburst":{"style":{"stroke":{"type":"palette","key":"backgroundColor"},"fillOpacity":1,"cursor":"pointer"}},"label":{"visible":!0,"style":{"cursor":"pointer","fill":{"type":"palette","key":"primaryFontColor"},"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}}},"rangeColumn":{"label":{"visible":!1,"offset":5,"position":"inside","style":{"lineWidth":2,"fill":{"type":"palette","key":"axisMarkerFontColor"}},"minLabel":{"position":"end"},"maxLabel":{"position":"start"}}},"circlePacking":{"layoutPadding":5,"circlePacking":{"visible":!0,"style":{"cursor":"pointer","stroke":{"type":"palette","key":"backgroundColor"}}},"label":{"visible":!0,"style":{"cursor":"pointer","fill":"black","stroke":{"type":"palette","key":"backgroundColor"},"lineWidth":2,"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}}},"heatmap":{"cell":{"style":{"shape":"square","fillOpacity":1}},"cellBackground":{"visible":!1}},"sankey":{"link":{"style":{"fillOpacity":.15,"round":!0}}},"rose":{"rose":{"style":{"fillOpacity":1}},"label":{"style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"},"textAlign":"center","textBaseline":"middle"}}},"boxPlot":{"boxPlot":{"style":{"lineWidth":1}},"label":{"style":{"lineWidth":2}}},"correlation":{"centerLabel":{"visible":!0,"position":"center","style":{"fill":"#fff","text":""}},"label":{"visible":!0,"position":"bottom","style":{"fill":"#000"}}},"liquid":{"outlinePadding":10,"liquidBackground":{"style":{"lineWidth":0,"fillOpacity":.2}},"liquidOutline":{"style":{"lineWidth":2}}},"venn":{"circle":{"style":{"opacity":.8},"state":{"hover":{"opacity":1}}},"overlap":{"style":{"opacity":.8},"state":{"hover":{"opacity":1,"stroke":"white","lineWidth":2}}},"label":{"visible":!0,"style":{"fill":"white","textBaseline":"middle","textAlign":"center","fontSize":{"type":"token","key":"l4FontSize"},"lineHeight":{"type":"token","key":"l4LineHeight"}}},"overlapLabel":{"visible":!0,"style":{"textBaseline":"middle","textAlign":"center","fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"}}}},"mosaic":{"label":{"visible":!1,"position":"center","style":{"lineWidth":2,"stroke":{"type":"palette","key":"backgroundColor"}}},"bar":{"style":{"lineWidth":1,"stroke":{"type":"palette","key":"backgroundColor"}}}}},QF={"label":{"space":8},"title":{"space":8},"maxHeight":"30%","unit":{"visible":!1,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"fill":{"type":"palette","key":"axisLabelFontColor"},"fontWeight":"normal","fillOpacity":1}}},tz={"label":{"space":12,"autoLimit":!0},"title":{"space":12,"autoRotate":!0},"maxWidth":"30%","unit":{"visible":!1,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"fill":{"type":"palette","key":"axisLabelFontColor"},"fontWeight":"normal","fillOpacity":1}}},ez=A(A({},QF),{"label":{"space":0}}),iz={"trigger":"hover","bandField":{"visible":!1,"line":{"type":"rect","visible":!0,"style":{"fill":{"type":"palette","key":"axisGridColor"},"opacity":.7,"lineWidth":0,"stroke":{"type":"palette","key":"markLineStrokeColor"},"lineDash":[2,3]}},"label":{"visible":!1,"style":{"fontWeight":"normal","fill":{"type":"palette","key":"axisMarkerFontColor"},"fontSize":{"type":"token","key":"l5FontSize"}},"labelBackground":{"padding":{"bottom":0,"top":0,"left":2,"right":2},"style":{"fill":{"type":"palette","key":"axisMarkerBackgroundColor"},"cornerRadius":1}}}},"linearField":{"visible":!1,"line":{"type":"line","visible":!0,"style":{"stroke":{"type":"palette","key":"markLineStrokeColor"},"fill":"transparent","opacity":.7,"lineDash":[2,3]}},"label":{"visible":!1,"style":{"fontWeight":"normal","fill":{"type":"palette","key":"axisMarkerFontColor"},"fontSize":{"type":"token","key":"l5FontSize"}},"labelBackground":{"padding":{"bottom":0,"top":0,"left":2,"right":2},"style":{"fill":{"type":"palette","key":"axisMarkerBackgroundColor"},"cornerRadius":1}}}}},YF=function(nt){return{"area":{"style":{"visible":nt,"stroke":!1,"fill":{"type":"palette","key":"dataZoomChartColor"}}},"line":{"style":{"visible":nt,"stroke":{"type":"palette","key":"dataZoomChartColor"},"lineWidth":1}}}},rz={"padding":[12,0],"showDetail":"auto","brushSelect":!1,"middleHandler":{"visible":!1,"background":{"size":6,"style":{"stroke":{"type":"palette","key":"dataZoomHandleStrokeColor"},"cornerRadius":2}},"icon":{"style":{"size":4,"fill":{"type":"palette","key":"sliderHandleColor"},"stroke":{"type":"palette","key":"dataZoomHandleStrokeColor"},"symbolType":"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z","lineWidth":.5}}},"background":{"size":20,"style":{"fill":{"type":"palette","key":"sliderRailColor"},"lineWidth":0}},"selectedBackground":{"style":{"fill":{"type":"palette","key":"sliderTrackColor"},"fillOpacity":.1,"outerBorder":{"stroke":{"type":"palette","key":"sliderTrackColor"},"strokeOpacity":.2,"distance":-.5,"lineWidth":1}}},"selectedBackgroundChart":YF(!1),"startHandler":{"style":{"symbolType":"M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;","fill":{"type":"palette","key":"sliderHandleColor"},"scaleX":1.2,"scaleY":1.2,"stroke":{"type":"palette","key":"dataZoomHandleStrokeColor"},"lineWidth":1}},"endHandler":{"style":{"symbolType":"M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;","fill":{"type":"palette","key":"sliderHandleColor"},"scaleX":1.2,"scaleY":1.2,"stroke":{"type":"palette","key":"dataZoomHandleStrokeColor"},"lineWidth":1}},"startText":{"padding":8,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"}}},"endText":{"padding":8,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"}}},"backgroundChart":YF(!0)},KF=function(nt,at){return{"fontSize":{"type":"token","key":nt},"fill":{"type":"palette","key":at},"fontWeight":"normal","fillOpacity":1,"textBaseline":"top","textAlign":"center"}},az={"title":{"visible":!0,"autoLimit":!1,"autoFit":!1,"style":KF("l1FontSize","primaryFontColor")},"content":{"visible":!0,"style":KF("l2FontSize","tertiaryFontColor")}},oz={"orient":"right","position":"middle","padding":[16,24],"title":{"visible":!1,"padding":0,"textStyle":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fontWeight":"normal","fill":{"type":"palette","key":"primaryFontColor"}},"space":12},"handler":{"visible":!0},"startText":{"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fontWeight":"normal","fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"}},"space":6},"endText":{"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fontWeight":"normal","fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"}},"space":6},"handlerText":{"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fontWeight":"normal","fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"}},"space":6}},JF=function(nt){var at={"width":200,"height":8,"style":{"fill":{"type":"palette","key":"sliderRailColor"}}};return nt?(at.width=200,at.height=8):(at.width=8,at.height=200),A(A({},oz),{"rail":at,"handler":{"style":{"symbolType":"circle","lineWidth":0,"outerBorder":{"lineWidth":2,"distance":.8,"stroke":"#ffffff"},"shadowBlur":12,"shadowOffsetX":0,"shadowOffsetY":4,"shadowColor":{"type":"palette","key":"shadowColor"}}}})},uz={"horizontal":JF(!0),"vertical":JF(!1)},$F=function(nt){var at={"style":{"fill":{"type":"palette","key":"sliderRailColor"}}};return nt?(at.width=200,at.height=4):(at.height=200,at.width=4),A(A({},oz),{"sizeBackground":{"fill":{"type":"palette","key":"dataZoomChartColor"}},"track":{"style":{"fill":{"type":"palette","key":"sliderTrackColor","a":.8}}},"rail":at,"handler":{"style":{"symbolType":"circle","lineWidth":0,"outerBorder":{"lineWidth":2,"distance":.8,"stroke":{"type":"palette","key":"sliderTrackColor"}},"fill":{"type":"palette","key":"sliderHandleColor"}}}})},cz={"horizontal":$F(!0),"vertical":$F(!1)},hz={"visible":!0,"offset":12,"position":"top","space":10,"nameLabel":{"visible":!0,"style":{"textBaseline":"middle","textAlign":"left","fill":"black","fontSize":{"type":"token","key":"l6FontSize"}}},"valueLabel":{"visible":!0,"style":{"textBaseline":"middle","textAlign":"left","fill":"black","fontSize":{"type":"token","key":"l6FontSize"}}},"background":{"visible":!0,"padding":{"top":4,"bottom":4,"left":6,"right":6},"style":{"cornerRadius":2,"lineWidth":1,"fill":"white","stroke":"grey"}},"leader":{"visible":!1,"style":{"lineWidth":1,"stroke":"red"}}},yz={"area":{"style":{"fill":{"type":"palette","key":"axisDomainColor","a":.25}}},"label":{"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fontWeight":"normal","fontStyle":"normal","fill":{"type":"palette","key":"primaryFontColor"}},"labelBackground":{"padding":{"top":2,"bottom":2,"right":4,"left":4},"style":{"cornerRadius":3,"fill":{"type":"palette","key":"markLabelBackgroundColor"}}}}},nz=function(nt){return{"visible":nt,"symbolType":"triangle","size":10,"style":{"fill":{"type":"palette","key":"markLineStrokeColor"},"stroke":null,"lineWidth":0}}},bz={"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fontWeight":"normal","fontStyle":"normal","fill":{"type":"palette","key":"primaryFontColor"}},"labelBackground":{"padding":{"top":2,"bottom":2,"right":4,"left":4},"style":{"cornerRadius":3,"fill":{"type":"palette","key":"markLabelBackgroundColor"}}},"refY":5},xz={"line":{"style":{"lineDash":[3,3],"stroke":{"type":"palette","key":"markLineStrokeColor"}}},"startSymbol":nz(!1),"endSymbol":nz(!0),"label":bz},Sz={"itemLine":{"decorativeLine":{"visible":!1},"startSymbol":{"size":5,"visible":!0,"style":{"fill":{"type":"palette","key":"markLineStrokeColor"},"stroke":null,"lineWidth":0}},"endSymbol":{"style":{"fill":{"type":"palette","key":"markLineStrokeColor"},"stroke":null,"lineWidth":0}},"line":{"style":{"stroke":{"type":"palette","key":"markLineStrokeColor"}}}},"itemContent":{"offsetY":-50}};function sz(nt,at){return nt&&at.key in nt?nt[at.key]:at.default}function lz(nt){return nt&&"token"===nt.type&&!!nt.key}var Az={"fontFamily":"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol","fontSize":14,"l1FontSize":32,"l1LineHeight":"150%","l2FontSize":20,"l2LineHeight":"140%","l3FontSize":16,"l3LineHeight":"150%","l4FontSize":14,"l4LineHeight":"150%","l5FontSize":12,"l5LineHeight":"130%","l6FontSize":10,"l6LineHeight":"120%"},wz={"name":"light","background":{"type":"palette","key":"backgroundColor"},"padding":20,"fontFamily":{"type":"token","key":"fontFamily"},"colorScheme":MF,"token":Az,"mark":{"text":{"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fontWeight":"normal","fillOpacity":1}}},"markByName":{"label":{"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fontWeight":"normal","fillOpacity":1,"lineJoin":"bevel"}},"area":{"style":{"fillOpacity":.2}},"line":{"style":{"lineWidth":2,"lineCap":"round","lineJoin":"round"}},"point":{"style":{"size":8,"stroke":{"type":"palette","key":"backgroundColor"},"lineWidth":1,"fillOpacity":1}},"word":{"style":{"fontWeight":null,"fontSize":null}},"fillingWord":{"style":{"fontWeight":null,"fontSize":null}},"sunburst":{"style":{"lineWidth":1,"stroke":{"type":"palette","key":"backgroundColor"}}},"circlePacking":{"style":{"lineWidth":1,"stroke":{"type":"palette","key":"backgroundColor"}}},"funnel3d":{"style":{"stroke":!1}},"barBackground":{"visible":!1,"style":{"fill":{"type":"palette","key":"primaryFontColor","a":.06},"stroke":"transparent"}}},"series":ZF,"component":{"discreteLegend":{"orient":"bottom","position":"middle","padding":[16,24],"title":{"visible":!1,"padding":0,"textStyle":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fill":{"type":"palette","key":"primaryFontColor"},"fontWeight":"normal"},"space":12},"pager":{"textStyle":{"fill":{"type":"palette","key":"discreteLegendPagerTextColor"}},"handler":{"style":{"fill":{"type":"palette","key":"discreteLegendPagerHandlerColor"}},"state":{"disable":{"fill":{"type":"palette","key":"discreteLegendPagerHandlerDisableColor"}}}}},"item":{"visible":!0,"spaceCol":10,"spaceRow":6,"padding":2,"background":{"state":{"selectedHover":{"fill":{"type":"palette","key":"hoverBackgroundColor"}},"unSelectedHover":{"fill":{"type":"palette","key":"hoverBackgroundColor"}}}},"shape":{"space":6,"style":{"lineWidth":0,"fillOpacity":1,"opacity":1},"state":{"unSelected":{"fillOpacity":.2,"opacity":1}}},"label":{"space":6,"style":{"fill":{"type":"palette","key":"secondaryFontColor","default":"#89909d"},"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"opacity":1},"state":{"unSelected":{"fill":{"type":"palette","key":"disableFontColor"},"opacity":1}}}},"allowAllCanceled":!1},"colorLegend":uz,"sizeLegend":cz,"axis":{"domainLine":{"visible":!0,"style":{"lineWidth":1,"stroke":{"type":"palette","key":"axisDomainColor"},"strokeOpacity":1}},"grid":{"visible":!0,"style":{"lineWidth":1,"stroke":{"type":"palette","key":"axisGridColor"},"strokeOpacity":1,"lineDash":[]}},"subGrid":{"visible":!1,"style":{"lineWidth":1,"stroke":{"type":"palette","key":"axisGridColor"},"strokeOpacity":1,"lineDash":[4,4]}},"tick":{"visible":!0,"inside":!1,"tickSize":4,"alignWithLabel":!0,"style":{"lineWidth":1,"stroke":{"type":"palette","key":"axisDomainColor"},"strokeOpacity":1}},"subTick":{"visible":!1,"tickSize":2,"style":{"lineWidth":1,"stroke":{"type":"palette","key":"axisDomainColor"},"strokeOpacity":1}},"label":{"visible":!0,"inside":!1,"space":10,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"fill":{"type":"palette","key":"axisLabelFontColor"},"fontWeight":"normal","fillOpacity":1}},"title":{"space":10,"padding":0,"style":{"fontSize":{"type":"token","key":"l5FontSize"},"lineHeight":{"type":"token","key":"l5LineHeight"},"fill":{"type":"palette","key":"secondaryFontColor"},"fontWeight":"normal","fillOpacity":1}}},"axisBand":{"domainLine":{"visible":!0},"grid":{"visible":!1},"subGrid":{"visible":!1},"tick":{"visible":!0},"subTick":{"visible":!1}},"axisLinear":{"domainLine":{"visible":!1},"grid":{"visible":!0},"subGrid":{"visible":!1},"tick":{"visible":!1},"subTick":{"visible":!1}},"axisX":QF,"axisY":tz,"axisZ":ez,"axisAngle":{"grid":{"visible":!0,"style":{"lineDash":[6,6]}},"label":{"space":5}},"axisRadius":{"grid":{"smooth":!0,"visible":!0},"subGrid":{"smooth":!0,"visible":!1}},"markLine":xz,"markArea":yz,"markPoint":Sz,"polarMarkLine":xz,"polarMarkArea":yz,"polarMarkPoint":Sz,"geoMarkPoint":Sz,"tooltip":{"offset":{"x":10,"y":10},"panel":{"padding":{"top":10,"left":10,"right":10,"bottom":10},"backgroundColor":{"type":"palette","key":"popupBackgroundColor"},"border":{"color":{"type":"palette","key":"popupBackgroundColor"},"width":0,"radius":3},"shadow":{"x":0,"y":4,"blur":12,"spread":0,"color":{"type":"palette","key":"shadowColor"}}},"spaceRow":6,"titleLabel":{"fontSize":{"type":"token","key":"l4FontSize"},"lineHeight":{"type":"token","key":"l4LineHeight"},"fontColor":{"type":"palette","key":"primaryFontColor"},"fontWeight":"bold","textBaseline":"middle","spacing":0},"shape":{"size":8,"spacing":6},"keyLabel":{"fontSize":{"type":"token","key":"l4FontSize"},"lineHeight":{"type":"token","key":"l4LineHeight"},"fontColor":{"type":"palette","key":"secondaryFontColor"},"textBaseline":"middle","spacing":26},"valueLabel":{"fontSize":{"type":"token","key":"l4FontSize"},"lineHeight":{"type":"token","key":"l4LineHeight"},"fontColor":{"type":"palette","key":"primaryFontColor"},"fontWeight":"bold","textBaseline":"middle","spacing":0}},"dataZoom":rz,"crosshair":iz,"player":{"visible":!0,"position":"start","padding":{"top":20,"bottom":20},"slider":{"space":10,"trackStyle":{"fill":{"type":"palette","key":"sliderTrackColor"},"fillOpacity":.8},"railStyle":{"fill":{"type":"palette","key":"sliderRailColor"}},"handlerStyle":{"size":15,"stroke":{"type":"palette","key":"backgroundColor"},"lineWidth":2,"fill":{"type":"palette","key":"playerControllerColor"}}},"controller":{"start":{"order":0,"space":10,"position":"start","style":{"size":12,"fill":{"type":"palette","key":"playerControllerColor"},"fillOpacity":.8}},"pause":{"order":0,"space":10,"position":"start","style":{"size":12,"fill":{"type":"palette","key":"playerControllerColor"},"fillOpacity":.8}},"backward":{"order":0,"space":10,"position":"start","style":{"size":12,"fill":{"type":"palette","key":"playerControllerColor"},"fillOpacity":.8}},"forward":{"order":0,"space":10,"position":"start","style":{"size":12,"fill":{"type":"palette","key":"playerControllerColor"},"fillOpacity":.8}}}},"brush":{"style":{"fill":"#B0C8F9","fillOpacity":.2,"stroke":"#B0C8F9","lineWidth":2},"brushMode":"single","brushType":"rect","brushMoved":!0,"removeOnClick":!0,"delayType":"throttle","delayTime":0},"indicator":az,"title":{"padding":{"top":4,"bottom":20},"textStyle":{"fontSize":{"type":"token","key":"l3FontSize"},"lineHeight":{"type":"token","key":"l3LineHeight"},"fill":{"type":"palette","key":"primaryFontColor"}},"subtextStyle":{"fontSize":{"type":"token","key":"l4FontSize"},"lineHeight":{"type":"token","key":"l4LineHeight"},"fill":{"type":"palette","key":"tertiaryFontColor"}}},"mapLabel":hz,"poptip":{"visible":!0,"position":"auto","padding":8,"titleStyle":{"fontSize":{"type":"token","key":"l5FontSize"},"fontWeight":"bold","fill":{"type":"palette","key":"primaryFontColor"}},"contentStyle":{"fontSize":{"type":"token","key":"l5FontSize"},"fill":{"type":"palette","key":"primaryFontColor"}},"panel":{"visible":!0,"fill":{"type":"palette","key":"popupBackgroundColor"},"cornerRadius":3,"lineWidth":0,"shadowBlur":12,"shadowOffsetX":0,"shadowOffsetY":4,"shadowColor":{"type":"palette","key":"shadowColor"},"size":0,"space":12}},"totalLabel":{"visible":!1,"offset":5,"overlap":{"clampForce":!0,"strategy":[]},"smartInvert":!1,"animation":!1,"style":{"fontSize":{"type":"token","key":"l4FontSize"},"fill":{"type":"palette","key":"primaryFontColor"}}},"scrollBar":{"horizontal":{"height":10,"slider":{"style":{"fill":{"type":"palette","key":"scrollBarSliderColor"}}}},"vertical":{"width":10,"slider":{"style":{"fill":{"type":"palette","key":"scrollBarSliderColor"}}}}}},"animationThreshold":2e3},Mz={"name":"dark","colorScheme":{"default":{"dataScheme":CF,"palette":{"backgroundColor":"#202226","borderColor":"#404349","shadowColor":"rgba(0,0,0,0.1)","hoverBackgroundColor":"#404349","sliderRailColor":"#404349","sliderHandleColor":"#202226","sliderTrackColor":"#4284FF","popupBackgroundColor":"#404349","primaryFontColor":"#fdfdfd","secondaryFontColor":"#bbbdc3","tertiaryFontColor":"#888c93","axisLabelFontColor":"#888c93","disableFontColor":"#55595f","axisMarkerFontColor":"#202226","axisGridColor":"#404349","axisDomainColor":"#4b4f54","dataZoomHandleStrokeColor":"#bbbdc3","dataZoomChartColor":"#55595F","playerControllerColor":"#4284FF","scrollBarSliderColor":"rgba(255,255,255,0.3)","axisMarkerBackgroundColor":"#fdfdfd","markLabelBackgroundColor":"#404349","markLineStrokeColor":"#bbbdc3","dangerColor":"#eb4b4b","warningColor":"#f0bd30","successColor":"#14b267","infoColor":"#4284ff","discreteLegendPagerTextColor":"#BBBDC3","discreteLegendPagerHandlerColor":"#BBBDC3","discreteLegendPagerHandlerDisableColor":"#55595F","emptyCircleColor":"#bbbdc3","linearProgressTrackColor":"#404349"}}},"component":{"dataZoom":{"selectedBackground":{"style":{"fillOpacity":.4,"outerBorder":{"strokeOpacity":.4}}}}}},dz=function(nt,at){return nt===at||!H(nt)&&!H(at)&&(X(nt)&&X(at)?at.every((function(at){return nt.some((function(nt){return dz(nt,at)}))})):!(!V(nt)||!V(at))&&Object.keys(at).every((function(lt){return dz(nt[lt],at[lt])})))},pz=function(nt,at,lt){if(j(at))return nt;var Rt=at[0];return j(Rt)?nt:1===at.length?(nt[Rt]=lt,nt):(j(nt[Rt])&&("number"==typeof at[1]?nt[Rt]=[]:nt[Rt]={}),pz(nt[Rt],at.slice(1),lt))},fz=function(nt){return nt instanceof Es||function(nt){try{return nt instanceof Element}catch(lt){var at=Object.keys(nt);return["children","innerHTML","classList","setAttribute","tagName","getBoundingClientRect"].every((function(nt){return at.includes(nt)}))}}(nt)};function vz(nt){return ct(nt,fz,arguments.length>1&&void 0!==arguments[1]?arguments[1]:["data"])}function gz(nt){for(var at=-1,lt=arguments.length<=1?0:arguments.length-1;++at<lt;)ht(nt,at+1<1||arguments.length<=at+1?void 0:arguments[at+1],!0,!0);return nt}var Tz=function(){function t(){}return t.registerChart=function(nt,at){t._charts[nt]=at},t.registerSeries=function(nt,at){t._series[nt]=at},t.registerComponent=function(nt,at,lt){t._components[nt]={"cmp":at,"alwaysCheck":lt}},t.registerMark=function(nt,at){t._marks[nt]=at},t.registerRegion=function(nt,at){t._regions[nt]=at},t.registerTransform=function(nt,at){t.transforms[nt]=at},t.registerLayout=function(nt,at){t._layout[nt]=at},t.registerAnimation=function(nt,at){t._animations[nt]=at},t.registerImplement=function(nt,at){t._implements[nt]=at},t.registerChartPlugin=function(nt,at){t._chartPlugin[nt]=at},t.registerComponentPlugin=function(nt,at){t._componentPlugin[nt]=at},t.createChart=function(nt,at,lt){return t._charts[nt]?new(0,t._charts[nt])(at,lt):null},t.createChartSpecTransformer=function(nt,at){if(!t._charts[nt])return null;var lt=t._charts[nt];return new(0,lt.transformerConstructor)(A({"seriesType":lt.seriesType},at))},t.createRegion=function(nt,at,lt){return t._regions[nt]?new(0,t._regions[nt])(at,lt):null},t.createRegionSpecTransformer=function(nt,at){return t._regions[nt]?new(0,t._regions[nt].transformerConstructor)(at):null},t.createSeries=function(nt,at,lt){return t._series[nt]?new(0,t._series[nt])(at,lt):null},t.createSeriesSpecTransformer=function(nt,at){return t._series[nt]?new(0,t._series[nt].transformerConstructor)(at):null},t.createMark=function(nt,at,lt){if(!t._marks[nt])return null;var Rt=new(0,t._marks[nt])(at,lt);return"group"===Rt.type&&Rt.setMarkConfig({"interactive":!1}),Rt},t.getComponents=function(){return Object.values(t._components)},t.getComponentInKey=function(nt){return t._components[nt].cmp},t.getLayout=function(){return Object.values(t._layout)},t.getLayoutInKey=function(nt){return t._layout[nt]},t.getSeries=function(){return Object.values(t._series)},t.getSeriesInType=function(nt){return t._series[nt]},t.getRegionInType=function(nt){return t._regions[nt]},t.getAnimationInKey=function(nt){return t._animations[nt]},t.getImplementInKey=function(nt){return t._implements[nt]},t.getSeriesMarkMap=function(nt){return t._series[nt]?t._series[nt].mark:{}},t.getChartPlugins=function(){return Object.values(t._chartPlugin)},t.getComponentPlugins=function(){return Object.values(t._componentPlugin)},t.getComponentPluginInType=function(nt){return t._componentPlugin[nt]},t.registerFormatter=function(nt){this._formatter=nt},t.getFormatter=function(){return this._formatter},t._charts={},t._series={},t._components={},t._marks={},t._regions={},t._animations={},t._implements={},t._chartPlugin={},t._componentPlugin={},t.transforms={"fields":wo,"filter":un,"fold":Ao},t.dataParser={"csv":Fo,"dsv":Oo,"tsv":zo},t._layout={},t}();function mz(nt){for(var at=[],lt=1;lt<arguments.length;lt++)at[lt-1]=arguments[lt];return gz.apply(void 0,P([_z(nt)],E(at.map(_z)),!1))}function _z(nt){var at;if(!nt)return nt;var lt=function(nt){return nt&&(nt=Object.keys(nt).reduce((function(at,lt){var Rt=nt[lt];return at[lt]=rF(Rt),at}),{})),nt}(nt.colorScheme);return Object.assign({},nt,{"colorScheme":lt,"token":null!==(at=nt.token)&&void 0!==at?at:{},"series":Object.assign({},nt.series)})}var Iz,Lz=["animationThreshold","colorScheme","name","padding"];function kz(nt,at,lt,Rt){if(!nt)return nt;at||(at=nt.colorScheme),lt||(lt=nt.token);var Bt={};return Object.keys(nt).forEach((function(Lt){var Ht=nt[Lt];Lz.includes(Lt)?Bt[Lt]=Ht:W(Ht)?iF(Ht)?Bt[Lt]=eF(Ht,at,Rt):lz(Ht)?Bt[Lt]=sz(lt,Ht):Bt[Lt]=kz(Ht,at,lt,Rt):Bt[Lt]=Ht})),Bt}var Hz=((Iz={})[wz.name]=wz,Iz),jz=wz.name,Nz=new Map(Object.keys(Hz).map((function(nt){return[nt,Hz[nt]]}))),Vz=new Map(Object.keys(Hz).map((function(nt){return[nt,kz(Hz[nt])]}))),Wz=new Map(Object.keys(Hz).map((function(nt){return[nt,nt===jz]}))),Cz=function(nt,at){if(nt){var lt=Bz(at);Nz.set(nt,lt),Vz.set(nt,kz(lt)),Wz.set(nt,!0)}},Ez=function(nt,at){return void 0===nt&&(nt=jz),void 0===at&&(at=!1),Wz.has(nt)&&!Wz.get(nt)&&Cz(nt,Nz.get(nt)),at?Vz.get(nt):Nz.get(nt)},Pz=function(nt){return Nz.delete(nt)&&Vz.delete(nt)&&Wz.delete(nt)},Rz=function(nt){return!!Y(nt)&&Nz.has(nt)},Bz=function(nt){var at,lt=null!==(at=nt.type)&&void 0!==at?at:jz;return mz({},Ez(lt),nt)},Gz=function(){function t(){}return t.registerInstance=function(nt){t.instances.set(nt.id,nt)},t.unregisterInstance=function(nt){t.instances.delete(nt.id)},t.getInstance=function(nt){return t.instances.get(nt)},t.instanceExist=function(nt){return t.instances.has(nt)},t.forEach=function(nt,at,lt){void 0===at&&(at=[]);var Rt=xt(at);return t.instances.forEach((function(at,lt,Bt){Rt.includes(lt)||nt(at,lt,Bt)}),lt)},t.instances=new Map,t}(),Uz=function(){function t(){}return t.registerTheme=function(nt,at){Cz(nt,at)},t.getTheme=function(nt,at){return void 0===at&&(at=!1),Ez(nt,at)},t.removeTheme=function(nt){return Pz(nt)},t.themeExist=function(nt){return Rz(nt)},t.getDefaultTheme=function(){return t.themes.get(jz)},t.setCurrentTheme=function(nt){t.themeExist(nt)&&(t._currentThemeName=nt,Gz.forEach((function(at){return null==at?void 0:at.setCurrentTheme(nt)})))},t.getCurrentTheme=function(nt){return void 0===nt&&(nt=!1),t.getTheme(t._currentThemeName,nt)},t.getCurrentThemeName=function(){return t._currentThemeName},t.themes=Nz,t._currentThemeName=jz,t}();function Dz(nt,at){return Y(nt)?Uz.themeExist(nt)?Uz.getTheme(nt,at):{}:V(nt)?nt:{}}function Oz(nt,at){if(void 0===at&&(at={"data":function(nt){return nt}}),!nt)return nt;if(nt.constructor===Object){var lt={};for(var Rt in nt)if(Object.prototype.hasOwnProperty.call(nt,Rt)){if(at[Rt]){lt[Rt]=at[Rt](nt[Rt]);continue}lt[Rt]=Oz(nt[Rt],at)}return lt}return X(nt)?nt.map((function(nt){return Oz(nt,at)})):nt}function Fz(nt,at){if(!nt)return nt;if(W(nt)){var lt={};for(var Rt in nt)if(Object.prototype.hasOwnProperty.call(nt,Rt)){if(Y(nt[Rt])&&at.getFunction(nt[Rt])){lt[Rt]=at.getFunction(nt[Rt]);continue}lt[Rt]=Fz(nt[Rt],at)}return lt}return X(nt)?nt.map((function(nt){return Fz(nt,at)})):nt}var zz=function(nt,at,lt,Rt){return function(nt,at,lt){return aR(nt,at,lt,{"fontFamily":Az.fontFamily,"fontSize":Az.fontSize})}(at,lt,Rt).measure(nt)},Yz="".concat(OF,"_MEASURE_CANVAS_ID"),Xz="".concat(OF,"_DEFAULT_DATA_INDEX"),$z="".concat(OF,"_DEFAULT_DATA_KEY"),qz="".concat(OF,"_DEFAULT_DATA_SERIES_FIELD"),Kz="".concat(OF,"_DEFAULT_SERIES_STYLE_NAME"),Zz="".concat(OF,"_STACK_KEY"),Qz="".concat(OF,"_STACK_START"),Jz="".concat(OF,"_STACK_END"),tH="".concat(OF,"_STACK_START_PERCENT"),eH="".concat(OF,"_STACK_END_PERCENT"),iH="".concat(OF,"_STACK_START_OffsetSilhouette"),nH="".concat(OF,"_STACK_END_OffsetSilhouette"),rH="".concat(OF,"_STACK_TOTAL"),aH="".concat(OF,"_STACK_TOTAL_PERCENT"),oH="".concat(OF,"_STACK_TOTAL_TOP"),mH="".concat(OF,"_STACK_TOTAL_BOTTOM"),_H="".concat(OF,"_MOSAIC_VALUE_START_PERCENT"),bH="".concat(OF,"_MOSAIC_VALUE_END_PERCENT"),xH="".concat(OF,"_MOSAIC_CAT_START_PERCENT"),kH="".concat(OF,"_MOSAIC_CAT_END_PERCENT"),SH="".concat(OF,"_SEGMENT_START"),AH="".concat(OF,"_SEGMENT_END");function sH(nt,at){for(var lt=0;lt<at.length;lt++){var Rt=at[lt],Bt=lH(nt,Rt.key);Bt?Bt.operations=P([],E(new Set(Bt.operations.concat(Rt.operations))),!1):nt.push(Rt)}return nt}function lH(nt,at){return nt.find((function(nt){return nt.key===at}))}function uH(nt,at){var lt;if(!nt)return null!=at?at:null;var Rt=nt.getFields();return Rt&&Rt[at]?null!==(lt=Rt[at].alias)&&void 0!==lt?lt:at:null!=at?at:null}function cH(nt,at,lt){var Rt=nt.getStackSort(),Bt={},Lt=null;return Rt&&(Lt={},nt.getSeries().forEach((function(nt){var at=nt.getSeriesField();if(at){var lt=nt.getRawDataStatisticsByField(at);lt.values&&(Lt[at]||(Lt[at]={"lastIndex":0,"sort":{}}),lt.values.forEach((function(nt,lt){nt in Lt[at].sort||(Lt[at].sort[nt]=Lt[at].lastIndex,Lt[at].lastIndex++)})))}}))),nt.getSeries().forEach((function(nt){var Rt,Ht=nt.getStackData(),jt=nt.getStackValue(),$t=nt.getStackValueField(),Kt=!lt||lt(nt);Ht&&$t&&Kt&&(Bt[jt]=null!==(Rt=Bt[jt])&&void 0!==Rt?Rt:{"groupField":Ht.groupField,"nodes":{}},yH(nt,Ht,Bt[jt],$t,at,Lt))})),Rt?hH(Bt):Bt}function hH(nt,at){var lt;for(var Rt in nt)(null===(lt=nt[Rt].sortDatums)||void 0===lt?void 0:lt.length)?(nt[Rt].sortDatums.sort((function(nt,at){return nt.index-at.index})),nt[Rt].values=nt[Rt].sortDatums.map((function(nt){return nt.datum}))):hH(nt[Rt].nodes);return nt}function dH(nt,at){if("values"in nt&&nt.values.length){var lt=OO(nt.values,at),Rt=DO(nt.values,eH);nt.values.forEach((function(nt){nt[rH]=lt,nt[aH]=Rt}))}else for(var Bt in nt.nodes)dH(nt.nodes[Bt],at)}function pH(nt,at){var lt,Rt;if("values"in nt&&nt.values.length)N(null===(lt=nt.values[0])||void 0===lt?void 0:lt[rH])?nt.total=null===(Rt=nt.values[0])||void 0===Rt?void 0:Rt[rH]:nt.total=OO(nt.values,at);else{for(var Bt in nt.nodes)pH(nt.nodes[Bt],at);nt.nodes&&(nt.total=OO(Object.keys(nt.nodes).map((function(at){return nt.nodes[at]})),"total"))}}function fH(nt,at,lt){var Rt;if(at.groupField&&at.nodes){var Bt=(null===(Rt=nt.getRawDataStatisticsByField(at.groupField,!1))||void 0===Rt?void 0:Rt.values)||[],Lt={"key":"".concat(at.groupField),"values":Bt.map((function(nt){var lt=at.nodes[nt];return{"groupValue":nt,"value":lt.total,"end":lt.total}}))};gH(Lt,!1,!0,!1,{"key":"groupField","start":"start","end":"end","startPercent":"startPercent","endPercent":"endPercent"}),Lt.values.forEach((function(nt){at.nodes[nt.groupValue].mosaicData=nt}))}else if("values"in at&&at.values.length&&lt&&lt.length){for(var Ht=lt.length,jt=0,$t=1,Kt=0,te=1,ne=0;ne<Ht;ne++)if(ne%2==0){var re=$t-jt;$t=jt+lt[ne].endPercent*re,jt+=lt[ne].startPercent*re}else{var ae=te-Kt;te=Kt+lt[ne].endPercent*ae,Kt+=lt[ne].startPercent*ae}Ht%2==0?at.values.forEach((function(nt){var at=$t-jt;nt[kH]=jt+at*nt[eH],nt[xH]=jt+at*nt[tH],nt[bH]=te,nt[_H]=Kt})):at.values.forEach((function(nt){var at=te-Kt;nt[bH]=Kt+at*nt[eH],nt[_H]=Kt+at*nt[tH],nt[kH]=$t,nt[xH]=jt}))}for(var oe in at.nodes)fH(nt,at.nodes[oe],at.nodes[oe].mosaicData?lt?P(P([],E(lt),!1),[at.nodes[oe].mosaicData],!1):[at.nodes[oe].mosaicData]:null)}function vH(nt){if(nt.values.length)for(var at=nt.values[nt.values.length-1][Jz]/2,lt=0;lt<nt.values.length;lt++)nt.values[lt][iH]=nt.values[lt][Qz]-at,nt.values[lt][nH]=nt.values[lt][Jz]-at}function gH(nt,at,lt,Rt,Bt){void 0===Bt&&(Bt={"key":Zz,"start":Qz,"end":Jz,"startPercent":tH,"endPercent":eH,"max":oH,"min":mH});var Lt=Rt&&N(Bt.min),Ht=Rt&&N(Bt.max);if(nt.values.length>0){for(var jt=0,$t=0,Kt=1,te=0,ne=null,re=null,ae=nt.values.length,oe=0;oe<ae;oe++)(te=(se=nt.values[at?ae-1-oe:oe])[Bt.end])>=0?(se[Bt.start]=jt,jt+=se[Bt.end],se[Bt.end]=jt):(se[Bt.start]=$t,$t+=se[Bt.end],se[Bt.end]=$t),se[Bt.key]=nt.key,Ht&&(delete se[Bt.max],(!re||se[Bt.end]>re[Bt.end])&&(re=se)),Lt&&(delete se[Bt.min],(!ne||se[Bt.start]<ne[Bt.start])&&(ne=se));if(Ht&&re&&(re[Bt.max]=!0),Lt&&ne&&(ne[Bt.min]=!0),lt)for(oe=0;oe<ae;oe++){var se,le=(te=(se=nt.values[at?ae-1-oe:oe])[Bt.end])>=0?jt:$t;Kt=te>=0?1:-1,se[Bt.startPercent]=0===le?0:Math.min(1,se[Bt.start]/le)*Kt,se[Bt.endPercent]=0===le?0:Math.min(1,se[Bt.end]/le)*Kt}}for(var ue in nt.nodes)gH(nt.nodes[ue],at,lt,Rt,Bt)}function yH(nt,at,lt,Rt,Bt,Lt,Ht){var jt,$t;if("values"in at)if(Bt&&at.values.forEach((function(nt){return nt[Jz]=function(nt){if(Q(nt))return nt;var at=+nt;return Q(at)?at:0}(nt[Rt])})),lt.series.push({"s":nt,"values":at.values}),Lt){var Kt=nt.getSeriesField();at.values.forEach((function(at){lt.sortDatums.push({"series":nt,"datum":at,"index":Kt?Lt[Kt].sort[at[Kt]]:0})}))}else(jt=lt.values).push.apply(jt,P([],E(at.values),!1));else for(var te in at.nodes){var ne=Ht?"".concat(Ht,"_").concat(te):te;lt.nodes[te]||(lt.nodes[te]={"values":[],"series":[],"nodes":{},"sortDatums":[],"key":ne},N(null===($t=at.nodes[te])||void 0===$t?void 0:$t.groupField)&&(lt.nodes[te].groupField=at.nodes[te].groupField)),yH(nt,at.nodes[te],lt.nodes[te],Rt,Bt,Lt,ne)}}var wH,CH,MH,TH,EH,PH,RH,BH,jH,NH,VH,WH,GH,UH,YH,IH=function(nt,at,lt,Rt){void 0===lt&&(lt="key"),void 0===Rt&&(Rt="children");for(var Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt];if(Lt[lt]===at)return Lt;if(Lt[Rt]){var Ht=IH(Lt[Rt],at,lt,Rt);if(Ht)return Ht}}return null},LH=function(nt,at,lt,Rt){void 0===lt&&(lt="key"),void 0===Rt&&(Rt="children");for(var Bt=0;Bt<nt.length;Bt++){var Lt=nt[Bt];if(Lt[Rt])for(var Ht=0;Ht<Lt[Rt].length;Ht++){var jt=Lt[Rt][Ht];if(jt[lt]===at)return Lt;var $t=LH([jt],at,lt,Rt);if($t)return $t}}return null};function DH(nt,at,lt,Rt,Bt){return void 0===Rt&&(Rt="value"),void 0===Bt&&(Bt="children"),Array.isArray(nt)?nt.map((function(nt){var Lt=A({},nt);return Array.isArray(Lt[Bt])&&(Lt[Bt]=DH(Lt[Bt],at,lt,Rt,Bt)),Lt})).filter((function(nt){return+nt[Rt]>=at&&+nt[Rt]<=lt||nt[Bt]&&nt[Bt].length>0})):nt}function OH(nt){void 0===nt&&(nt={});var at=A({},nt);if(H(nt.style)?at.style=function(at,lt,Rt,Bt){return HH(nt.style(at,lt,Rt,Bt))}:ot(nt.style)||(at.style=HH(nt.style)),!ot(nt.state)){var lt={};Object.keys(nt.state).forEach((function(at){H(nt.state[at])?lt[at]=function(lt,Rt,Bt,Lt){return HH(nt.state[at](lt,Rt,Bt,Lt))}:ot(nt.state[at])||(lt[at]=HH(nt.state[at]))})),at.state=lt}return at}function FH(nt){if(ot(nt))return null;var at={};return Object.keys(nt).forEach((function(lt){H(nt[lt])?at[lt]=function(at,Rt,Bt,Lt){return HH(nt[lt](at,Rt,Bt,Lt))}:ot(nt[lt])||(at[lt]=HH(nt[lt]))})),at}function zH(nt,at){if(ot(nt))return null;var lt={};return Object.keys(nt).forEach((function(Rt){H(nt[Rt])?lt[Rt]=nt[Rt](at):lt[Rt]=nt[Rt]})),HH(lt)}function HH(nt){return(null==nt?void 0:nt.angle)&&(nt.angle=Me(nt.angle)),nt}!function(nt){nt.enter="enter",nt.update="update",nt.exit="exit",nt.group="group",nt.connectNulls="connectNulls"}(wH||(wH={})),function(nt){nt.enter="enter",nt.update="update",nt.exit="exit",nt.unChange="unChange"}(CH||(CH={})),function(nt){nt.arc="arc",nt.arc3d="arc3d",nt.area="area",nt.image="image",nt.line="line",nt.path="path",nt.rect="rect",nt.rect3d="rect3d",nt.rule="rule",nt.shape="shape",nt.symbol="symbol",nt.text="text",nt.richtext="richtext",nt.polygon="polygon",nt.pyramid3d="pyramid3d",nt.circle="circle",nt.cell="cell",nt.interval="interval",nt.group="group",nt.glyph="glyph",nt.component="component",nt.largeRects="largeRects",nt.largeSymbols="largeSymbols"}(MH||(MH={})),function(nt){nt.axis="axis",nt.grid="grid",nt.legend="legend",nt.slider="slider",nt.label="label",nt.datazoom="datazoom",nt.player="player",nt.title="title",nt.scrollbar="scrollbar"}(TH||(TH={})),function(nt){nt[nt.player=1]="player",nt[nt.rollUp=2]="rollUp",nt[nt.drillDown=3]="drillDown",nt[nt.slider=4]="slider",nt[nt.datazoom=5]="datazoom",nt[nt.legend=6]="legend",nt[nt.scrollbar=7]="scrollbar",nt[nt.brush=8]="brush",nt[nt.normal=9]="normal"}(EH||(EH={})),function(nt){nt.lineAxis="lineAxis",nt.circleAxis="circleAxis"}(PH||(PH={})),function(nt){nt.lineAxisGrid="lineAxisGrid",nt.circleAxisGrid="circleAxisGrid"}(RH||(RH={})),function(nt){nt.discreteLegend="discreteLegend",nt.colorLegend="colorLegend",nt.sizeLegend="sizeLegend"}(BH||(BH={})),function(nt){nt.lineCrosshair="lineCrosshair",nt.rectCrosshair="rectCrosshair",nt.sectorCrosshair="sectorCrosshair",nt.circleCrosshair="circleCrosshair",nt.polygonCrosshair="polygonCrosshair",nt.ringCrosshair="ringCrosshair"}(jH||(jH={})),function(nt){nt.symbolLabel="symbolLabel",nt.rectLabel="rectLabel",nt.lineLabel="lineLabel",nt.dataLabel="dataLabel"}(NH||(NH={})),function(nt){nt.continuousPlayer="continuousPlayer",nt.discretePlayer="discretePlayer"}(VH||(VH={})),function(nt){nt.before="before",nt.layouting="layouting",nt.reevaluate="reevaluate",nt.after="after"}(WH||(WH={})),function(nt){nt.BEFORE_EVALUATE_DATA="beforeEvaluateData",nt.AFTER_EVALUATE_DATA="afterEvaluateData",nt.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",nt.AFTER_EVALUATE_SCALE="afterEvaluateScale",nt.BEFORE_PARSE_VIEW="beforeParseView",nt.AFTER_PARSE_VIEW="afterParseView",nt.BEFORE_TRANSFORM="beforeTransform",nt.AFTER_TRANSFORM="afterTransform",nt.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",nt.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",nt.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",nt.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",nt.BEFORE_STAGE_RESIZE="beforeStageResize",nt.AFTER_STAGE_RESIZE="afterStageResize",nt.BEFORE_VRENDER_DRAW="beforeVRenderDraw",nt.AFTER_VRENDER_DRAW="afterVRenderDraw",nt.BEFORE_MARK_JOIN="beforeMarkJoin",nt.AFTER_MARK_JOIN="afterMarkJoin",nt.BEFORE_MARK_UPDATE="beforeMarkUpdate",nt.AFTER_MARK_UPDATE="afterMarkUpdate",nt.BEFORE_MARK_STATE="beforeMarkState",nt.AFTER_MARK_STATE="afterMarkState",nt.BEFORE_MARK_ENCODE="beforeMarkEncode",nt.AFTER_MARK_ENCODE="afterMarkEncode",nt.BEFORE_DO_LAYOUT="beforeDoLayout",nt.AFTER_DO_LAYOUT="afterDoLayout",nt.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",nt.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",nt.BEFORE_DO_RENDER="beforeDoRender",nt.AFTER_DO_RENDER="afterDoRender",nt.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",nt.AFTER_MARK_RENDER_END="afterMarkRenderEnd",nt.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",nt.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",nt.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",nt.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",nt.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",nt.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",nt.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",nt.BEFORE_ELEMENT_STATE="beforeElementState",nt.AFTER_ELEMENT_STATE="afterElementState",nt.BEFORE_ELEMENT_ENCODE="beforeElementEncode",nt.AFTER_ELEMENT_ENCODE="afterElementEncode",nt.ANIMATION_START="animationStart",nt.ANIMATION_END="animationEnd",nt.ELEMENT_ANIMATION_START="elementAnimationStart",nt.ELEMENT_ANIMATION_END="elementAnimationEnd",nt.ALL_ANIMATION_START="allAnimationStart",nt.ALL_ANIMATION_END="allAnimationEnd"}(GH||(GH={})),function(nt){nt.signal="signal",nt.data="data",nt.scale="scale",nt.coordinate="coordinate",nt.mark="mark"}(UH||(UH={})),function(nt){nt.active="active",nt.selected="selected",nt.highlight="highlight",nt.blur="blur"}(YH||(YH={}));var XH="__vgrammar_scene_item__",$H=[MH.line,MH.area],qH=[MH.arc3d,MH.rect3d,MH.pyramid3d],KH="key",ZH=[{}],QH=["key"],JH="VGRAMMAR_IMMEDIATE_ANIMATION",tj=0,ej=1e3,vj=0,gj=0,_j=!1,xj=!1,Aj="quintInOut",wj={"stopWhenStateChange":!1,"immediatelyApply":!0},Cj="_mo_hide_";function ij(nt,at){return xt(nt).reduce((function(nt,lt){var Rt=Y(lt)?at.getGrammarById(lt):lt;return Rt&&nt.push(Rt),nt}),[])}function nj(nt,at){if(j(nt))return[];if(function(nt){return!H(nt)&&!!(null==nt?void 0:nt.signal)}(nt)){var lt=nt.signal;if(Y(lt))return xt(at.getGrammarById(lt));if("signal"===(null==lt?void 0:lt.grammarType))return[lt]}else if(function(nt){return!H(nt)&&!!(null==nt?void 0:nt.callback)}(nt))return ij(nt.dependency,at);return[]}function rj(nt){return H(nt)||(null==nt?void 0:nt.signal)||!!(null==nt?void 0:nt.callback)}function aj(nt,at,lt,Rt){if(j(nt))return nt;if(H(nt))return Rt?nt.call(null,lt,Rt,at):nt.call(null,lt,at);if(nt.signal){var Bt=nt.signal;return Y(Bt)?null==at?void 0:at[Bt]:Bt.output()}return nt.callback?Rt?nt.callback.call(null,lt,Rt,at):nt.callback.call(null,lt,at):nt}function oj(nt,at){return sj(nt)?nt.output():at[nt]}var sj=function(nt){return nt&&!j(nt.grammarType)},lj=function(nt){return H(nt)?nt:function(at){return at[nt]}};function uj(nt){return!!(null==nt?void 0:nt.scale)}function cj(nt){return!!(null==nt?void 0:nt.field)}function hj(nt,at){if(!nt)return[];var lt=[];return nt.scale&&(lt=sj(nt.scale)?[nt.scale]:xt(at.getScaleById(nt.scale))),lt.concat(nj(nt,at))}function dj(nt,at){switch(at){case"line":return nt.some((function(nt){return["x","y","defined"].includes(nt)}));case"area":return nt.some((function(nt){return["x","y","x1","y1","defined"].includes(nt)}));case"largeRects":return nt.some((function(nt){return["x","y","width","y1"].includes(nt)}));case"largeSymbols":return nt.some((function(nt){return["x","y"].includes(nt)}))}return!1}function pj(nt,at,lt,Rt,Bt){lt&&(rj(lt)?at.forEach((function(at){var Bt=aj(lt,Rt,at.datum,nt);Object.assign(at.nextAttrs,Bt)})):Object.keys(lt).forEach((function(Lt){var Ht,jt,$t=lt[Lt],Kt=Bt&&!function(nt,at){if(["x","y","dx","dy"].includes(at))return!0;switch(nt){case MH.arc:return["innerRadius","outerRadius","startAngle","endAngle"].includes(at);case MH.group:case MH.rect:case MH.image:return["width","height","y1"].includes(at);case MH.path:case MH.shape:return["path","customPath"].includes(at);case MH.line:return"defined"===at;case MH.area:return["x1","y1","defined"].includes(at);case MH.rule:return["x1","y1"].includes(at);case MH.symbol:return"size"===at;case MH.polygon:return"points"===at;case MH.text:return"text"===at}return!1}(nt.mark.markType,Lt)?[at[0]]:at;if(uj($t)){var te=oj($t.scale,Rt),ne=null!==(Ht=null==$t?void 0:$t.offset)&&void 0!==Ht?Ht:0,re=!j($t.band)&&te.bandwidth?te.bandwidth()*$t.band:null,ae=Y(null==$t?void 0:$t.field),oe=ae?qk($t.field):null,se=ae?null:j(null==$t?void 0:$t.value)?0:null===(jt=te.scale)||void 0===jt?void 0:jt.call(te,$t.value);Kt.forEach((function(nt){var at;ae&&(se=null===(at=te.scale)||void 0===at?void 0:at.call(te,oe(nt.datum))),nt.nextAttrs[Lt]=Z(se)||Z(re)?se+ne+re:se}))}else if(cj($t)){var le=qk($t.field);Kt.forEach((function(nt){nt.nextAttrs[Lt]=le(nt.datum)}))}else Kt.forEach((function(at){at.nextAttrs[Lt]=aj($t,Rt,at.datum,nt)}))})))}function fj(nt,at,lt,Rt){if(!nt)return null;if(rj(nt))return aj(nt,Rt,at,lt);var Bt={};return Object.keys(nt).forEach((function(Lt){var Ht,jt,$t,Kt=nt[Lt];if(uj(Kt)){var te=oj(Kt.scale,Rt),ne=null!==(Ht=null==Kt?void 0:Kt.offset)&&void 0!==Ht?Ht:0,re=!j(Kt.band)&&te.bandwidth?te.bandwidth()*Kt.band:null,ae=Y(null==Kt?void 0:Kt.field),oe=ae?qk(Kt.field):null,se=ae?null===(jt=te.scale)||void 0===jt?void 0:jt.call(te,oe(at)):j(null==Kt?void 0:Kt.value)?0:null===($t=te.scale)||void 0===$t?void 0:$t.call(te,Kt.value);Bt[Lt]=Z(se)||Z(re)?se+ne+re:se}else if(cj(Kt)){var le=qk(Kt.field);Bt[Lt]=le(at)}else Bt[Lt]=aj(Kt,Rt,at,lt)})),Bt}var Ej=o((function t(nt,at,lt,Rt){r(this,t),this.channelEncoder={},this.marks=nt,at&&this.registerChannelEncoder(at),lt&&this.registerDefaultEncoder(lt),this.progressiveChannels&&this.registerProgressiveChannels(Rt)}),[{"key":"getMarks","value":function(){return this.marks}},{"key":"registerChannelEncoder","value":function(nt,at){return Y(nt)?this.channelEncoder[nt]=at:Object.assign(this.channelEncoder,nt),this}},{"key":"registerFunctionEncoder","value":function(nt){return this.functionEncoder=nt,this}},{"key":"registerDefaultEncoder","value":function(nt){return this.defaultEncoder=nt,this}},{"key":"registerProgressiveChannels","value":function(nt){return this.progressiveChannels=xt(nt),this}},{"key":"getChannelEncoder","value":function(){return this.channelEncoder}},{"key":"getFunctionEncoder","value":function(){return this.functionEncoder}},{"key":"getDefaultEncoder","value":function(){return this.defaultEncoder}},{"key":"getProgressiveChannels","value":function(){return this.progressiveChannels}}]),Pj=function(){function t(){r(this,t)}return o(t,null,[{"key":"registerPlotMarks","value":function(nt,at){t._plotMarks[nt]=at}},{"key":"createPlotMark","value":function(nt,at){return t._plotMarks[nt]?new t._plotMarks[nt](at):null}},{"key":"registerMark","value":function(nt,at){t._marks[nt]=at}},{"key":"createMark","value":function(nt,at,lt){return t._marks[nt]?new t._marks[nt](at,nt,lt):null}},{"key":"hasMark","value":function(nt){return!!t._marks[nt]}},{"key":"getMark","value":function(nt){return t._marks[nt]}},{"key":"registerComponent","value":function(nt,at){t._components[nt]=at}},{"key":"createComponent","value":function(nt,at,lt,Rt){var Bt=t._components[nt];return Bt?new Bt(at,lt,Rt):null}},{"key":"hasComponent","value":function(nt){return!!t._components[nt]}},{"key":"registerGraphicComponent","value":function(nt,at){t._graphicComponents[nt]=at}},{"key":"createGraphicComponent","value":function(nt,at,lt){var Rt=t._graphicComponents[nt];return Rt?Rt(at,lt):null}},{"key":"registerTransform","value":function(nt,at,lt){t._transforms[nt]=Object.assign(at,{"type":nt,"isBuiltIn":!!lt})}},{"key":"getTransform","value":function(nt){return t._transforms[nt]}},{"key":"unregisterRuntimeTransforms","value":function(){Object.keys(t._transforms).forEach((function(nt){t._transforms[nt]&&!t._transforms[nt].isBuiltIn&&(t._transforms[nt]=null)}))}},{"key":"registerGrammar","value":function(nt,at,lt){t._grammars[nt]={"grammarClass":at,"specKey":null!=lt?lt:nt}}},{"key":"createGrammar","value":function(nt,at,lt){var Rt,Bt=null===(Rt=t._grammars[nt])||void 0===Rt?void 0:Rt.grammarClass;return Bt?new Bt(at,lt):null}},{"key":"getGrammars","value":function(){return this._grammars}},{"key":"getGlyph","value":function(nt){return t._glyphs[nt]}},{"key":"createInteraction","value":function(nt,at,lt){var Rt=t._interactions[nt];return Rt?new Rt(at,lt):null}},{"key":"hasInteraction","value":function(nt){return!!t._interactions[nt]}}])}();function yj(nt,at){var lt,Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Bt=Pj.getGraphicType(at)?Pj.createGraphic(at,Rt):Pj.createGraphicComponent(at,Rt,{"skipDefault":null===(lt=null==nt?void 0:nt.spec)||void 0===lt?void 0:lt.skipTheme});return Bt||te.getInstance().error("create ".concat(at," graphic failed!")),Bt}Pj._plotMarks={},Pj._marks={},Pj._components={},Pj._graphicComponents={},Pj._transforms={},Pj._grammars={},Pj._glyphs={},Pj._animations={},Pj._interactions={},Pj._graphics={},Pj._stageEventPlugins={},Pj.registerGlyph=function(nt,at,lt,Rt,Bt){return Pj._glyphs[nt]=new Ej(at,lt,Rt,Bt),Pj._glyphs[nt]},Pj.registerAnimationType=function(nt,at){Pj._animations[nt]=at},Pj.getAnimationType=function(nt){return Pj._animations[nt]},Pj.registerInteraction=function(nt,at){Pj._interactions[nt]=at},Pj.registerGraphic=function(nt,at){Pj._graphics[nt]=at},Pj.getGraphicType=function(nt){return Pj._graphics[nt]},Pj.createGraphic=function(nt,at){var lt=Pj._graphics[nt];return lt?lt(at):null},Pj.registerDefaultLayout=function(nt){Pj.defaultLayout=nt},Pj.getDefaultLayout=function(){return Pj.defaultLayout},Pj.registerStageEventPlugin=function(nt,at){Pj._stageEventPlugins[nt]=at},Pj.getStageEventPlugin=function(nt){return Pj._stageEventPlugins[nt]};var mj=function(nt){nt&&(nt[XH]=null,nt.release(),nt.parent&&nt.parent.removeChild(nt))},Ij=["fillOpacity"],bj=function(nt,at,lt){var Rt;return"fillOpacity"===at?(nt.fillOpacity=null!==(Rt=lt.fillOpacity)&&void 0!==Rt?Rt:1,["fillOpacity"]):[]},Oj=l(l(l({"rect3d":[{"channels":["x","y","z","x1","y1","width","height","length"],"transform":function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe;Q(at.width)||!Q(at.x1)&&Q(lt.width)?(nt.x=Math.min(null!==(Rt=lt.x)&&void 0!==Rt?Rt:0,null!==(Bt=lt.x1)&&void 0!==Bt?Bt:1/0),nt.width=lt.width):Q(at.x1)||!Q(at.width)&&Q(lt.x1)?(nt.x=Math.min(lt.x,lt.x1),nt.width=Math.abs(lt.x1-lt.x)):(nt.x=Math.min(null!==(Lt=lt.x)&&void 0!==Lt?Lt:0,null!==(Ht=lt.x1)&&void 0!==Ht?Ht:1/0),nt.width=lt.width),Q(at.height)||!Q(at.y1)&&Q(lt.height)?(nt.y=Math.min(null!==(jt=lt.y)&&void 0!==jt?jt:0,null!==($t=lt.y1)&&void 0!==$t?$t:1/0),nt.height=lt.height):Q(at.y1)||!Q(at.height)&&Q(lt.y1)?(nt.y=Math.min(lt.y,lt.y1),nt.height=Math.abs(lt.y1-lt.y)):(nt.y=Math.min(null!==(Kt=lt.y)&&void 0!==Kt?Kt:0,null!==(te=lt.y1)&&void 0!==te?te:1/0),nt.height=lt.height),Q(at.length)||!Q(at.z1)&&Q(lt.length)?(nt.z=Math.min(null!==(ne=lt.z)&&void 0!==ne?ne:0,null!==(re=lt.z1)&&void 0!==re?re:1/0),nt.length=lt.length):Q(at.z1)||!Q(at.length)&&Q(lt.z1)?(nt.z=Math.min(lt.z,lt.z1),nt.length=Math.abs(lt.z1-lt.z)):(nt.z=Math.min(null!==(ae=lt.z)&&void 0!==ae?ae:0,null!==(oe=lt.z1)&&void 0!==oe?oe:1/0),nt.length=lt.length)},"storedAttrs":"sizeAttrs"}]},MH.text,[{"channels":["text","limit","autoLimit","maxLineWidth","textType","_originText"],"transform":function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=null!==(Rt=lt.limit)&&void 0!==Rt?Rt:1/0,$t=null!==(Bt=lt.autoLimit)&&void 0!==Bt?Bt:1/0,Kt=Math.min(jt,$t),te=W(lt.text)&&!j(lt.text.text),ne=te?lt.text.text:lt.text;nt.maxLineWidth=Kt===1/0?lt.maxLineWidth:Kt,te||lt.textType?"rich"===lt.text.type||"rich"===lt.textType?nt.textConfig=ne:"html"===lt.text.type?(nt.html=ne,nt.text=null!==(Lt=lt._originText)&&void 0!==Lt?Lt:"",nt.renderable=!1):"react"===lt.text.type?(nt.react=ne,nt.text=null!==(Ht=lt._originText)&&void 0!==Ht?Ht:"",nt.renderable=!1):nt.text=ne:nt.text=ne},"storedAttrs":"limitAttrs"}]),MH.rule,[{"channels":["x","y","x1","y1"],"transform":function(nt,at,lt){var Rt=function(nt){var at=nt.x,lt=nt.y,Rt=nt.x1,Bt=nt.y1;return Q(at)&&Q(lt)&&Q(Rt)&&Q(Bt)?[{"x":at,"y":lt},{"x":Rt,"y":Bt}]:[]}(lt);nt.points=Rt,nt.x=0,nt.y=0},"storedAttrs":"pointAttrs"}]),MH.symbol,[{"channels":["shape","symbolType"],"transform":function(nt,at,lt){var Rt;nt.symbolType=null!==(Rt=at.shape)&&void 0!==Rt?Rt:at.symbolType}},{"channels":["image","fill","background"],"transform":function(nt,at,lt){at.image?(nt.background=at.image,nt.fill=!1):lt.image?(nt.background=lt.image,nt.fill=!1):(nt.fill=lt.fill,nt.background=lt.background)},"storedAttrs":"imageAttrs"}]),kj=function(nt,at,lt,Rt){var Bt={},Lt=at?Object.keys(at):[],Ht=Y(nt)?Oj[nt]:nt;if(Ht&&Ht.length){var jt=[];Lt.forEach((function(nt){var Lt=!1;Ht.forEach((function(Ht,$t){if(Ht.channels.includes(nt)){if(!jt[$t])if(Ht.storedAttrs){var Kt=function(nt,at,lt,Rt,Bt,Lt){var Ht=Bt.getGraphicAttribute(nt,!1,Lt);if(Ht)return at.forEach((function(nt){nt in Rt&&(Ht[nt]=Rt[nt])})),Ht;var jt={};return at.forEach((function(nt){jt[nt]=Rt[nt]})),lt[nt]=jt,jt}(Ht.storedAttrs,Ht.channels,Bt,at,lt,Rt);Ht.transform(Bt,at,Kt)}else Ht.transform(Bt,at,null);jt[$t]=!0,Lt=!0}})),Lt||(Ij.includes(nt)?bj(Bt,nt,at):Bt[nt]=at[nt])}))}else Lt.forEach((function(nt){Ij.includes(nt)?bj(Bt,nt,at):Bt[nt]=at[nt]}));return Bt},Sj=function(nt,at,lt){return!(!j(nt)||!j(at))||!j(nt)&&!j(at)&&("lineDash"===lt?function(nt,at){return nt.length===at.length&&nt.join("-")===at.join("-")}(nt,at):"stroke"===lt||"fill"===lt?function(nt,at){if(nt===at)return!0;if(b(nt)!=b(at))return!1;if(Y(nt))return!1;if(nt.gradient!==at.gradient)return!1;var lt=Object.keys(nt),Rt=Object.keys(at);return lt.length===Rt.length&&lt.every((function(lt){return"stops"===lt?function(nt,at){var lt,Rt;if(nt===at)return!0;var Bt=null!==(lt=nt&&nt.length)&&void 0!==lt?lt:0;return Bt===(null!==(Rt=at&&at.length)&&void 0!==Rt?Rt:0)&&0!==Bt&&nt.every((function(nt,lt){return!nt&&!at[lt]||nt&&at[lt]&&nt.color===at[lt].color&&nt.offset===at[lt].offset}))}(nt[lt],at[lt]):nt[lt]===at[lt]}))}(nt,at):nt===at)},Dj=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"],Lj=["fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"].concat(Dj);function Mj(nt,at,lt){var Rt;if(!nt||nt.length<=1)return null;var Bt="area"===(null===(Rt=null==lt?void 0:lt.mark)||void 0===Rt?void 0:Rt.markType)?Lj:Dj,Lt=[],Ht=null;return nt.forEach((function(nt,at){Ht&&Bt.every((function(at){return Sj(Ht[at],nt[at],at)}))||(Lt.length&&(Lt[Lt.length-1].endIndex=at),Ht=nt,Lt.push({"attrs":Ht,"startIndex":at}))})),Lt.length>=2?Lt.map((function(nt){var lt=Tj(nt.attrs);return lt.points=at.slice(nt.startIndex,j(nt.endIndex)?at.length:nt.endIndex),lt})):null}function Tj(nt){var at={};if(!nt)return at;var lt=["x","y","x1","y1","defined","size","width","height","context"];return Object.keys(nt).forEach((function(Rt){lt.includes(Rt)||(at[Rt]=nt[Rt])})),at}var Fj=o((function t(nt){var at=this;r(this,t),this.data=null,this.states=[],this.diffState=CH.enter,this.isReserved=!1,this.runtimeStatesEncoder=null,this.items=[],this.getStateAttrs=function(nt,lt){var Rt,Bt,Lt,Ht,jt=!j(null===(Rt=at.runtimeStatesEncoder)||void 0===Rt?void 0:Rt[nt]),$t=jt?Object.assign(Object.assign({},null===(Bt=at.mark.getSpec().encode)||void 0===Bt?void 0:Bt[nt]),at.runtimeStatesEncoder[nt]):null===(Lt=at.mark.getSpec().encode)||void 0===Lt?void 0:Lt[nt];if(!$t)return{};if(H($t))return $t(at.getDatum(),at,nt,lt);if(!jt&&(null===(Ht=at.graphicItem.states)||void 0===Ht?void 0:Ht[nt]))return at.graphicItem.states[nt];var Kt=at.items.map((function(nt){return Object.assign({},nt,{"nextAttrs":{}})}));pj(at,Kt,$t,at.mark.parameters());var te=at.transformElementItems(Kt,at.mark.markType);return at.graphicItem.states?at.graphicItem.states[nt]||(at.graphicItem.states[nt]=te):at.graphicItem.states=l({},nt,te),te},this.mark=nt}),[{"key":"initGraphicItem","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.graphicItem){var lt=this.mark.getAttributeTransforms();if(this.graphicItem=this.mark.addGraphicItem(lt?kj(lt,at,this):at,this.groupKey),this.graphicItem){var Rt=this.mark.getSpec().graphicName;Y(Rt)?this.graphicItem.name=Rt:H(Rt)&&(this.graphicItem.name=Rt(this)),this.graphicItem[XH]=this,lt&&(this.graphicItem.onBeforeAttributeUpdate=function(at){return nt.mark?kj(lt,at,nt):at}),this.clearGraphicAttributes(),this.mark.needAnimate()&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(Object.assign({},at)),this.setFinalGraphicAttributes(Object.assign({},at)))}}}},{"key":"updateGraphicItem","value":function(){var nt;if(this.graphicItem){this.diffState===CH.exit?this.graphicItem.releaseStatus="willRelease":this.graphicItem.releaseStatus=void 0;var at=null===(nt=this.mark.animate)||void 0===nt?void 0:nt.getAnimationConfigs("state");at&&0!==at.length&&(this.graphicItem.stateAnimateConfig=at[0].originConfig)}}},{"key":"getGraphicItem","value":function(){return this.graphicItem}},{"key":"removeGraphicItem","value":function(){var nt,at;this.graphicItem&&(null===(at=null===(nt=this.graphicItem.animates)||void 0===nt?void 0:nt.forEach)||void 0===at||at.call(nt,(function(nt){return nt.stop()}))),this.graphicItem&&(mj(this.graphicItem),this.graphicItem[XH]=null,this.graphicItem=null)}},{"key":"resetGraphicItem","value":function(){this.graphicItem&&(this.graphicItem=null)}},{"key":"getBounds","value":function(){var nt;return null===(nt=this.graphicItem)||void 0===nt?void 0:nt.AABBBounds}},{"key":"getStates","value":function(){return this.states}},{"key":"updateData","value":function(nt,at,lt){var Rt,Bt=this;this.mark.emit(GH.BEFORE_ELEMENT_UPDATE_DATA,{"groupKey":nt,"data":at,"key":lt},this),this.data=at;var Lt=lj(lt);return this.items=at.map((function(nt){return{"datum":nt,"key":Lt(nt),"view":Bt.mark.view,"nextAttrs":{}}})),this.groupKey=nt,this.key=this.mark.isCollectionMark()?nt:null===(Rt=this.items)||void 0===Rt?void 0:Rt[0].key,this.mark.emit(GH.AFTER_ELEMENT_UPDATE_DATA,{"groupKey":nt,"data":at,"key":lt},this),this.items}},{"key":"state","value":function(nt,at){var lt,Rt=this.mark.isCollectionMark(),Bt=this.states,Lt=xt(aj(nt,at,this.getDatum(),this)),Ht=null===(lt=this.mark.getSpec())||void 0===lt?void 0:lt.stateSort;Ht&&Lt.length&&Lt.sort(Ht);var jt=Lt.length!==Bt.length||Lt.some((function(nt,at){return nt!==Bt[at]}));this.states=Lt,!Rt&&jt&&this.diffState===CH.unChange&&(this.diffState=CH.update)}},{"key":"encodeGraphic","value":function(nt){this.coordinateTransformEncode(this.items);var at=this.transformElementItems(this.items,this.mark.markType);nt&&Object.assign(at,nt),this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null,Cj in this.graphicItem.attribute&&"visible"in at&&delete this.graphicItem.attribute[Cj],this.applyGraphicAttributes(at)):this.initGraphicItem(at),this.diffState!==CH.enter&&this.diffState!==CH.update||!this.states.length||this.useStates(this.states),this.mark.markType===MH.shape&&(this.graphicItem.datum=this.items[0].datum),this.items.forEach((function(nt){nt.nextAttrs={}})),this._setCustomizedShape()}},{"key":"_setCustomizedShape","value":function(){var nt,at=this;if(this.graphicItem){var lt=null===(nt=this.mark.getSpec())||void 0===nt?void 0:nt.setCustomizedShape;lt&&(this.graphicItem.pathProxy=function(nt){return lt(at.data,nt,new Ou)})}}},{"key":"encodeItems","value":function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Rt=arguments.length>3?arguments[3]:void 0,Bt=this.mark.isCollectionMark(),Lt=at[wH.update],Ht=at[wH.enter],jt=at[wH.exit],$t=this.mark.isLargeMode()||Bt&&!this.mark.getSpec().enableSegments;this.diffState===CH.enter?(Ht&&pj(this,nt,Ht,Rt,$t),Lt&&pj(this,nt,Lt,Rt,$t)):this.diffState===CH.update?((Bt&&Ht||lt)&&pj(this,nt,Ht,Rt,$t),Lt&&pj(this,nt,Lt,Rt,$t)):this.diffState===CH.exit&&jt&&(lt&&pj(this,nt,Ht,Rt,$t),pj(this,nt,jt,Rt,$t))}},{"key":"coordinateTransformEncode","value":function(nt){if(this.mark.coord&&"arc"!==this.mark.markType&&!0!==this.mark.disableCoordinateTransform){var at=this.mark.coord.output();nt.forEach((function(nt){var lt=nt.nextAttrs,Rt=at.convert(lt);Object.assign(lt,Rt)}))}}},{"key":"hasStateAnimation","value":function(){var nt,at=null===(nt=this.mark.animate)||void 0===nt?void 0:nt.getAnimationConfigs("state");return at&&at.length>0}},{"key":"clearStates","value":function(nt){var at=z(nt)?nt:this.hasStateAnimation();this.states=[],this.graphicItem&&this.graphicItem.clearStates(at),this.runtimeStatesEncoder&&(this.runtimeStatesEncoder={})}},{"key":"_updateRuntimeStates","value":function(nt,at){this.runtimeStatesEncoder||(this.runtimeStatesEncoder={}),this.runtimeStatesEncoder[nt]=at}},{"key":"hasState","value":function(nt){return this.states&&nt&&this.states.includes(nt)}},{"key":"updateStates","value":function(nt){var at=this;if(!this.graphicItem)return!1;var lt=this.states.slice(),Rt=this.mark.getSpec().encode,Bt=!1,Lt=!1;return Object.keys(nt).forEach((function(Ht){var jt;if(Ht){var $t=nt[Ht];if(V($t)&&!mt($t,null===(jt=at.runtimeStatesEncoder)||void 0===jt?void 0:jt[Ht]))lt.includes(Ht)?Bt=!0:lt.push(Ht),at._updateRuntimeStates(Ht,$t),Lt=!0;else if($t)!lt.includes(Ht)&&(null==Rt?void 0:Rt[Ht])&&(lt.push(Ht),Lt=!0);else if(lt.length){var Kt=lt.filter((function(nt){return nt!==Ht}));Kt.length!==lt.length&&(Lt=!0,lt=Kt),at.runtimeStatesEncoder&&at.runtimeStatesEncoder[Ht]&&(at.runtimeStatesEncoder[Ht]=null)}}})),Bt&&this.graphicItem.clearStates(),!!Lt&&(this.useStates(lt),!0)}},{"key":"addState","value":function(nt,at){var lt;if(!this.graphicItem)return!1;if(at&&Y(nt)&&!mt(at,null===(lt=this.runtimeStatesEncoder)||void 0===lt?void 0:lt[nt])){var Rt=this.states.slice();return Rt.includes(nt)?this.graphicItem.clearStates():Rt.push(nt),this._updateRuntimeStates(nt,at),this.useStates(Rt),!0}var Bt=this.mark.getSpec().encode,Lt=xt(nt).reduce((function(nt,at){return at&&!nt.includes(at)&&(null==Bt?void 0:Bt[at])&&nt.push(at),nt}),this.states.slice());return Lt.length!==this.states.length&&(this.useStates(Lt),!0)}},{"key":"removeState","value":function(nt){var at=this;if(!this.graphicItem)return!1;var lt=xt(nt);if(!lt.length)return!1;var Rt=this.states.filter((function(nt){return!lt.includes(nt)}));return Rt.length!==this.states.length&&(this.runtimeStatesEncoder&&lt.forEach((function(nt){at.runtimeStatesEncoder[nt]=null})),this.useStates(Rt),!0)}},{"key":"useStates","value":function(nt,at){var lt;if(!this.graphicItem)return!1;this.mark.emit(GH.BEFORE_ELEMENT_STATE,{"states":nt},this);var Rt=null===(lt=this.mark.getSpec())||void 0===lt?void 0:lt.stateSort;Rt&&nt.sort(Rt),this.states=nt;var Bt=z(at)?at:this.hasStateAnimation();return this.graphicItem.stateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,Bt),this.mark.emit(GH.AFTER_ELEMENT_STATE,{"states":nt},this),!0}},{"key":"diffAttributes","value":function(nt){var at={},lt=this.getFinalGraphicAttributes();for(var Rt in nt)ut(lt,Rt)&&mt(lt[Rt],nt[Rt])||(at[Rt]=nt[Rt]);return at}},{"key":"transformElementItems","value":function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t=nt[0];if(!$t.nextAttrs||0===Object.keys($t.nextAttrs).length)return{};var Kt=$t.nextAttrs;if(function(nt){return[MH.line,MH.area,MH.largeRects,MH.largeSymbols].includes(nt)}(at)&&nt&&nt.length&&j(null===(Rt=$t.nextAttrs)||void 0===Rt?void 0:Rt.points)&&(!0===lt||dj(Object.keys($t.nextAttrs),this.mark.markType))){var te=this.mark.getSpec(),ne=this.getGraphicAttribute("points",!1),re=this.getGraphicAttribute("segments",!1),ae=te.enableSegments,oe=null===(Bt=this.mark.getSpec().encode)||void 0===Bt?void 0:Bt[wH.connectNulls],se=nt.map((function(nt){return nt.nextAttrs})),le=this.mark.isProgressive();if(Kt=Tj(Kt),at===MH.line||at===MH.area){var ue=function(nt,at,lt,Rt){return nt&&nt.length&&(1!==nt.length||at)?nt.some((function(nt){return dj(Object.keys(nt.nextAttrs),"line")}))?nt.map((function(nt,at){var Bt,Lt=nt.nextAttrs,Ht=null!==(Bt=null==lt?void 0:lt[at])&&void 0!==Bt?Bt:{},jt=Ht.x,$t=Ht.y,Kt=Ht.x1,te=Ht.y1,ne=Ht.defined;return j(Lt.x)&&(Lt.x=jt),j(Lt.y)&&(Lt.y=$t),j(Lt.defined)&&!1===ne&&(Lt.defined=!1),Lt.context=nt.key,Rt&&(j(Lt.x1)&&(Lt.x1=Kt),j(Lt.y1)&&(Lt.y1=te)),Lt})):null!=lt?lt:[]:[]}(nt,!0,ne,at===MH.area);if(le)Kt.segments=(null!==(jt=null===(Ht=null===(Lt=this.graphicItem)||void 0===Lt?void 0:Lt.attribute)||void 0===Ht?void 0:Ht.segments)&&void 0!==jt?jt:[]).concat([{"points":ue}]);else if(oe){if(Kt.segments=function(nt,at,lt){if(!nt||nt.length<=1)return null;var Rt,Bt,Lt=!!lt&&lt.mark.getSpec().enableSegments,Ht=[],jt=null;if(nt.forEach((function(nt,lt){(jt=at[lt])&&!1!==jt.defined?(Rt||(Bt={"items":[],"points":[]},Ht.push(Bt)),Bt.points.push(jt),Bt.items.push(nt),!1===Rt&&(Bt.isConnect=!0,Bt={"items":[],"points":[]},Ht.push(Bt)),Rt=!0):Rt=!1})),(Ht=Ht.filter((function(nt){return nt.points.length>0}))).length>=2){var $t=[];return Ht.forEach((function(nt){if(nt.isConnect)$t.push({"points":nt.points,"isConnect":!0});else{if(Lt){var at=Mj(nt.items,nt.points,lt);if(at)return void at.forEach((function(nt){$t.push(nt)}))}var Rt=Tj(nt.items[0]);Rt.points=nt.points,$t.push(Rt)}})),$t}return Lt?Mj(nt,at,lt):null}(se,ue,this),Kt.segments&&Kt.segments.some((function(nt){return nt.isConnect}))){var ce=fj(oe,this.getDatum(),this,this.mark.parameters());ce&&Kt.segments.forEach((function(nt){nt.isConnect&&Object.assign(nt,ce)}))}Kt.points=ue}else if(ae){var he=ue&&0!==ue.length?ue:function(nt){return nt?nt.reduce((function(nt,at){return nt.concat(at.points)}),[]):null}(re),de=Mj(se,he,this);de?(Kt.segments=de,Kt.points=null):(Kt.segments=null,Kt.points=he),Kt=function(nt,at){var lt;if(!nt||!nt.segments||!nt.segments.length)return nt;var Rt="area"===(null===(lt=null==at?void 0:at.mark)||void 0===lt?void 0:lt.markType)?["fillOpacity","strokeOpacity"]:["strokeOpacity"],Bt={};return Object.keys(nt).forEach((function(at){Rt.includes(at)||(Bt[at]=nt[at])})),Bt}(Kt,this)}else Kt.points=ue,Kt.segments=null}else at===MH.largeRects?Kt.points=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!nt||!nt.length||1===nt.length&&!at)return[];var Rt=new Float32Array(4*nt.length);return nt.forEach((function(nt,at){var Bt,Lt,Ht,jt,$t=nt.nextAttrs,Kt=null!==(Bt=$t.x)&&void 0!==Bt?Bt:lt[4*at],te=null!==(Lt=$t.y)&&void 0!==Lt?Lt:lt[4*at+1],ne=null!==(Ht=$t.width)&&void 0!==Ht?Ht:lt[4*at+2],re=null!==(jt=$t.y1)&&void 0!==jt?jt:lt[4*at+3];Rt[4*at]=Kt,Rt[4*at+1]=te,Rt[4*at+2]=ne,Rt[4*at+3]=re-te})),Rt}(nt,!0,ne):at===MH.largeSymbols&&(Kt.points=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!nt||!nt.length||1===nt.length&&!at)return[];var Rt=new Float32Array(2*nt.length);return nt.forEach((function(nt,at){var Bt,Lt,Ht=nt.nextAttrs,jt=null!==(Bt=Ht.x)&&void 0!==Bt?Bt:lt[2*at],$t=null!==(Lt=Ht.y)&&void 0!==Lt?Lt:lt[2*at+1];Rt[2*at]=jt,Rt[2*at+1]=$t})),Rt}(nt,!0,ne))}return Kt}},{"key":"applyGraphicAttributes","value":function(nt){var at,lt,Rt,Bt=this;if(!ot(nt))if(this.mark.needAnimate()){var Lt=this.diffAttributes(nt),Ht=null!==(at=this.getPrevGraphicAttributes())&&void 0!==at?at:{},jt=null!==(lt=this.getFinalGraphicAttributes())&&void 0!==lt?lt:{};Object.keys(Lt).forEach((function(nt){Ht[nt]=Bt.getGraphicAttribute(nt),jt[nt]=Lt[nt]})),this.setNextGraphicAttributes(Lt),this.setPrevGraphicAttributes(Ht),this.setFinalGraphicAttributes(jt);var $t=null===(Rt=this.mark.animate)||void 0===Rt?void 0:Rt.getElementAnimators(this).filter((function(nt){var at;return!(null===(at=nt.animationOptions.timeline.controlOptions)||void 0===at?void 0:at.ignoreLoopFinalAttributes)||!nt.animationOptions.timeline.loop})),Kt=($t||[]).reduce((function(nt,at){return Object.assign(nt,at.getEndAttributes())}),{}),te=Object.assign({},Kt,jt);this.graphicItem.setAttributes(te)}else this.graphicItem.setAttributes(nt)}},{"key":"getGraphicAttribute","value":function(nt){var at,lt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.graphicItem){if(lt){var Rt,Bt=this.getPrevGraphicAttributes();if(!j(Rt=st(Bt,nt)))return Rt}var Lt=this.mark.getAttributeTransforms(),Ht=[nt];if(Lt&&Lt.length){var jt=Lt.find((function(at){return at.storedAttrs&&at.channels.includes(nt)}));jt&&(Ht=[jt.storedAttrs,nt])}return st(null===(at=this.graphicItem)||void 0===at?void 0:at.attribute,Ht)}}},{"key":"setGraphicAttribute","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.graphicItem){var Rt=this.getFinalGraphicAttributes(),Bt=this.getPrevGraphicAttributes();lt&&Rt&&(Rt[nt]=at),Bt&&!ut(Bt,nt)&&(Bt[nt]=this.graphicItem.attribute[nt]),this.graphicItem.setAttribute(nt,at)}}},{"key":"setGraphicAttributes","value":function(nt){var at=this,lt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.graphicItem){var Rt=this.getFinalGraphicAttributes(),Bt=this.getPrevGraphicAttributes();Object.keys(nt).forEach((function(Lt){Rt&&lt&&(Rt[Lt]=nt[Lt]),Bt&&!ut(Bt,Lt)&&(Bt[Lt]=at.graphicItem.attribute[Lt])})),this.graphicItem.setAttributes(nt)}}},{"key":"getFinalGraphicAttributes","value":function(){return this.graphicItem.finalAttrs}},{"key":"setFinalGraphicAttributes","value":function(nt){this.graphicItem.finalAttrs=nt}},{"key":"getPrevGraphicAttributes","value":function(){return this.graphicItem.prevAttrs}},{"key":"setPrevGraphicAttributes","value":function(nt){this.graphicItem.prevAttrs=nt}},{"key":"getNextGraphicAttributes","value":function(){return this.graphicItem.nextAttrs}},{"key":"getFinalAnimationAttribute","value":function(nt){var at,lt;return null!==(lt=null===(at=this.getFinalGraphicAttributes())||void 0===at?void 0:at[nt])&&void 0!==lt?lt:this.getGraphicAttribute(nt)}},{"key":"getFinalAnimationAttributes","value":function(){var nt;return null!==(nt=this.getFinalGraphicAttributes())&&void 0!==nt?nt:this.graphicItem.attribute}},{"key":"setNextGraphicAttributes","value":function(nt){this.graphicItem.nextAttrs=nt}},{"key":"clearChangedGraphicAttributes","value":function(){this.graphicItem&&(this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null))}},{"key":"clearGraphicAttributes","value":function(){this.graphicItem&&(this.graphicItem.prevAttrs&&this.setPrevGraphicAttributes(null),this.graphicItem.nextAttrs&&this.setNextGraphicAttributes(null),this.graphicItem.finalAttrs&&this.setFinalGraphicAttributes(null))}},{"key":"remove","value":function(){this.graphicItem&&(mj(this.graphicItem),this.graphicItem=null)}},{"key":"release","value":function(){this.removeGraphicItem(),this.mark=null,this.data=null,this.items=null}},{"key":"getItemAttribute","value":function(nt){var at,lt;if(null===(at=this.items)||void 0===at?void 0:at.length)return this.mark.isCollectionMark()?j(nt)?this.items.map((function(nt){return nt.nextAttrs})):this.items.map((function(at){var lt;return null===(lt=at.nextAttrs)||void 0===lt?void 0:lt[nt]})):j(nt)?this.items[0].nextAttrs:null===(lt=this.items[0].nextAttrs)||void 0===lt?void 0:lt[nt]}},{"key":"setItemAttributes","value":function(nt){var at;(null===(at=this.items)||void 0===at?void 0:at.length)&&(this.mark.isCollectionMark()?X(nt)&&this.items.forEach((function(at,lt){Object.assign(at.nextAttrs,nt[lt])})):Object.assign(this.items[0].nextAttrs,nt))}},{"key":"getItem","value":function(){var nt,at;return this.mark&&this.mark.isCollectionMark()?null!==(nt=this.items)&&void 0!==nt?nt:[]:null===(at=this.items)||void 0===at?void 0:at[0]}},{"key":"getDatum","value":function(){var nt,at;return this.mark&&this.mark.isCollectionMark()?null!==(nt=this.data)&&void 0!==nt?nt:[]:null===(at=this.data)||void 0===at?void 0:at[0]}}]),zj=o((function t(nt,at){r(this,t),this.references=new Map,this.view=nt,this.depend(null==at?void 0:at.dependency)}),[{"key":"getStartState","value":function(){return null}},{"key":"depend","value":function(nt){var at=this;this.references.clear(),xt(nt).map((function(nt){return Y(nt)?at.view.getGrammarById(nt):nt})).filter((function(nt){return!j(nt)})).forEach((function(nt){var lt;at.references.set(nt,(null!==(lt=at.references.get(nt))&&void 0!==lt?lt:0)+1)}))}},{"key":"parameters","value":function(){var nt={};return this.references.forEach((function(at,lt){N(lt.id())&&(nt[lt.id()]=lt.output())})),nt}},{"key":"bind","value":function(){var nt=this,at=this.getEvents();(null!=at?at:[]).forEach((function(at){at.type&&at.handler&&(X(at.type)?at.type.forEach((function(lt){lt&&"none"!==lt&&nt.view.addEventListener(lt,at.handler)})):"none"!==at.type&&nt.view.addEventListener(at.type,at.handler))}))}},{"key":"unbind","value":function(){var nt=this,at=this.getEvents();(null!=at?at:[]).forEach((function(at){at.type&&at.handler&&(X(at.type)?at.type.forEach((function(lt){lt&&"none"!==lt&&nt.view.removeEventListener(lt,at.handler)})):"none"!==at.type&&nt.view.removeEventListener(at.type,at.handler))}))}},{"key":"start","value":function(nt){}},{"key":"reset","value":function(nt){}},{"key":"dispatchEvent","value":function(nt,at){this.view.emit("".concat(this.type,":").concat(nt),at),"start"===nt&&this.options.onStart?this.options.onStart(at):"reset"===nt&&this.options.onReset?this.options.onReset(at):"update"===nt&&this.options.onUpdate?this.options.onUpdate(at):"end"===nt&&this.options.onEnd&&this.options.onEnd(at)}}]),Hj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){lt.start(nt.element)},lt.handleReset=function(nt){lt.reset(nt.element)},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getEvents","value":function(){return[{"type":this.options.trigger,"handler":this.handleStart},{"type":this.options.triggerOff,"handler":this.handleReset}]}},{"key":"getStartState","value":function(){return this.options.state}},{"key":"start","value":function(nt){nt&&this._marks&&this._marks.includes(nt.mark)&&(nt.addState(this.options.state),this._prevActiveElement=nt)}},{"key":"reset","value":function(nt){var at=null!=nt?nt:this._prevActiveElement;at&&this._marks&&this._marks.includes(at.mark)&&at.removeState(this.options.state)}}])}(zj);Hj.type="element-active",Hj.defaultOptions={"state":YH.active,"trigger":"pointerover","triggerOff":"pointerout"};var Rj=function(nt){return nt.filterField?function(at){var lt;return null===(lt=at.getDatum())||void 0===lt?void 0:lt[nt.filterField]}:function(at){return at[nt.filterType]}},Bj=function(nt,at){if(!at||!nt)return null;var lt={};return nt.forEach((function(nt){var Rt=nt&&nt.getSpec(),Bt=Rt&&Rt.encode;Bt&&at.forEach((function(at){at&&Bt[at]&&(lt[at]||(lt[at]=[]),lt[at].push(nt))}))})),lt},jj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt._resetType=[],lt.resetAll=function(){var nt=lt.options,at=nt.state,Rt=nt.reverseState;lt._statedElements&&lt._statedElements.length&&(lt.clearAllStates(at,Rt),lt.dispatchEvent("reset",{"elements":lt._statedElements,"options":lt.options}),lt._statedElements=[])},lt.handleStart=function(nt){lt.start(nt.element)},lt.handleReset=function(nt){if(lt._statedElements&&lt._statedElements.length){var at=nt.element,Rt=at&&lt._marks&&lt._marks.includes(at.mark);(lt._resetType.includes("view")&&!Rt||lt._resetType.includes("self")&&Rt)&&lt.resetAll()}},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt._stateMarks=Bj(lt._marks,[lt.options.state,lt.options.reverseState]),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.state}},{"key":"getEvents","value":function(){var nt=this,at=this.options.triggerOff,lt=this.options.trigger,Rt=[{"type":lt,"handler":this.handleStart}],Bt=function(nt){var at=xt(nt),lt=[],Rt=[];return at.forEach((function(nt){"empty"===nt?lt.push("view"):Y(nt)&&"none"!==nt?nt.includes("view:")?(Rt.push(nt.replace("view:","")),lt.push("view")):(Rt.push(nt),lt.push("self")):Z(nt)&&lt.push("timeout")})),{"eventNames":Rt,"resetType":lt}}(at),Lt=Bt.eventNames,Ht=Bt.resetType;return Lt.forEach((function(at){at&&(X(lt)?!lt.includes(at):at!==lt)&&Rt.push({"type":at,"handler":nt.handleReset})})),this._resetType=Ht,Rt}},{"key":"start","value":function(nt){var at=this,lt=this.options,Rt=lt.state,Bt=lt.reverseState,Lt=lt.isMultiple;if(nt&&this._marks&&this._marks.includes(nt.mark))if(nt.hasState(Rt)){if(this._resetType.includes("self")){var Ht=this._statedElements&&this._statedElements.filter((function(at){return at!==nt}));Ht&&Ht.length?this._statedElements=this.updateStates(Ht,this._statedElements,Rt,Bt):this.resetAll()}}else this._timer&&clearTimeout(this._timer),nt.addState(Rt),this._statedElements=this.updateStates(Lt&&this._statedElements?[].concat(m(this._statedElements),[nt]):[nt],this._statedElements,Rt,Bt),this.dispatchEvent("start",{"elements":this._statedElements,"options":this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout((function(){at.resetAll()}),this.options.triggerOff));else this._resetType.includes("view")&&this._statedElements&&this._statedElements.length&&this.resetAll()}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.state,this.options.reverseState]):this.resetAll()}}])}(zj);jj.type="element-select",jj.defaultOptions={"state":YH.selected,"trigger":"click"};var Nj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){lt.start(nt.element)},lt.handleReset=function(nt){if(lt._statedElements&&lt._statedElements.length){var at=nt.element;if(at){var Rt=lt._marks&&lt._marks.includes(at.mark);"view"!==lt._resetType||Rt?"self"===lt._resetType&&Rt&&lt.resetAll():lt.resetAll()}}},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt._stateMarks=Bj(lt._marks,[lt.options.highlightState,lt.options.blurState]),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.highlightState}},{"key":"getEvents","value":function(){var nt=this.options.triggerOff,at=[{"type":this.options.trigger,"handler":this.handleStart}],lt=nt;return Y(nt)&&nt.includes("view:")?(lt=nt.replace("view:",""),this._resetType="view"):this._resetType="self",at.push({"type":lt,"handler":this.handleReset}),at}},{"key":"resetAll","value":function(){var nt=this.options,at=nt.highlightState,lt=nt.blurState;this._lastElement&&(this.clearAllStates(at,lt),this.dispatchEvent("reset",{"elements":[this._lastElement],"options":this.options}),this._lastElement=null,this._statedElements=null)}},{"key":"start","value":function(nt){if(nt&&this._marks&&this._marks.includes(nt.mark)){var at=this.options,lt=at.highlightState,Rt=at.blurState;if(this._lastElement===nt)return;this._statedElements=this.updateStates([nt],this._statedElements,lt,Rt),this._lastElement=nt,this.dispatchEvent("start",{"elements":[nt],"options":this.options})}else this._lastElement&&"view"===this._resetType&&this.resetAll()}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}])}(zj);Nj.type="element-highlight",Nj.defaultOptions={"highlightState":YH.highlight,"blurState":YH.blur,"trigger":"pointerover","triggerOff":"pointerout"};var Gj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){lt.start(nt.element)},lt.handleReset=function(nt){nt.element&&lt._marks&&lt._marks.includes(nt.element.mark)&&lt.resetAll()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.highlightState}},{"key":"getEvents","value":function(){return[{"type":this.options.trigger,"handler":this.handleStart},{"type":this.options.triggerOff,"handler":this.handleReset}]}},{"key":"resetAll","value":function(){var nt=[this.options.highlightState,this.options.blurState];this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt)}))}))}},{"key":"start","value":function(nt){var at=this;if(nt&&this._marks&&this._marks.includes(nt.mark)){var lt=nt.key;if(j(lt))return;this._marks.forEach((function(nt){nt.elements.forEach((function(nt){nt.key===lt?nt.updateStates(l(l({},at.options.blurState,!1),at.options.highlightState,!0)):nt.updateStates(l(l({},at.options.blurState,!0),at.options.highlightState,!1))}))}))}}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}])}(zj);Gj.type="element-highlight-by-key",Gj.defaultOptions={"highlightState":YH.highlight,"blurState":YH.blur,"trigger":"pointerover","triggerOff":"pointerout"};var Yj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){lt.start(nt.element)},lt.handleReset=function(nt){var at=nt.element;at&&lt._marks&&lt._marks.includes(at.mark)&&lt.resetAll()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.highlightState}},{"key":"getEvents","value":function(){return[{"type":this.options.trigger,"handler":this.handleStart},{"type":this.options.triggerOff,"handler":this.handleReset}]}},{"key":"resetAll","value":function(){var nt=[this.options.highlightState,this.options.blurState];this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt)}))}))}},{"key":"start","value":function(nt){var at=this;if(nt&&this._marks&&this._marks.includes(nt.mark)){var lt=nt.groupKey;if(j(lt))return;this._marks.forEach((function(nt){nt.elements.forEach((function(nt){nt.groupKey===lt?nt.updateStates(l(l({},at.options.blurState,!1),at.options.highlightState,!0)):nt.updateStates(l(l({},at.options.blurState,!0),at.options.highlightState,!1))}))}))}}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}])}(zj);Yj.type="element-highlight-by-group",Yj.defaultOptions={"highlightState":YH.highlight,"blurState":YH.blur,"trigger":"pointerover","triggerOff":"pointerout"};var Xj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){var at,Rt;lt.start(null===(Rt=null===(at=nt.detail)||void 0===at?void 0:at.data)||void 0===Rt?void 0:Rt.id)},lt.handleReset=function(nt){lt.resetAll()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getEvents","value":function(){return[{"type":UD.legendItemHover,"handler":this.handleStart},{"type":UD.legendItemUnHover,"handler":this.handleReset}]}},{"key":"getStartState","value":function(){return this.options.state}},{"key":"start","value":function(nt){var at=this,lt=nt;if(!j(lt)){var Rt=Rj(this.options);this._marks.forEach((function(nt){nt.elements.forEach((function(nt){Rt(nt)===lt?nt.addState(at.options.state):nt.removeState(at.options.state)}))}))}}},{"key":"resetAll","value":function(){var nt=this;this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt.options.state)}))}))}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState(this.options.state):this.resetAll()}}])}(zj);Xj.type="element-active-by-legend",Xj.defaultOptions={"state":YH.active,"filterType":"groupKey"};var Qj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt,at){var Rt,Bt;lt.start(null===(Bt=null===(Rt=nt.detail)||void 0===Rt?void 0:Rt.data)||void 0===Bt?void 0:Bt.id)},lt.handleReset=function(nt){lt.resetAll()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.highlightState}},{"key":"getEvents","value":function(){return[{"type":UD.legendItemHover,"handler":this.handleStart},{"type":UD.legendItemUnHover,"handler":this.handleReset}]}},{"key":"start","value":function(nt){var at=this;if(!j(nt)){var lt=Rj(this.options);this._marks.forEach((function(Rt){Rt.elements.forEach((function(Rt){lt(Rt)===nt?Rt.updateStates(l(l({},at.options.blurState,!1),at.options.highlightState,!0)):Rt.updateStates(l(l({},at.options.blurState,!0),at.options.highlightState,!1))}))}))}}},{"key":"resetAll","value":function(){var nt=[this.options.highlightState,this.options.blurState];this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt)}))}))}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}])}(zj);Qj.type="element-highlight-by-legend",Qj.defaultOptions={"highlightState":YH.highlight,"blurState":YH.blur,"filterType":"groupKey"};var Jj=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt,at){if(lt.options.shouldStart?lt.options.shouldStart(nt):lt._filterByName(nt)){var Rt=lt._parseTargetKey(nt,at);lt.start(Rt)}},lt.handleReset=function(nt){(lt.options.shouldReset?lt.options.shouldReset(nt):lt._filterByName(nt))&&lt.resetAll()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"getStartState","value":function(){return this.options.highlightState}},{"key":"getEvents","value":function(){return[{"type":this.options.trigger,"handler":this.handleStart},{"type":this.options.triggerOff,"handler":this.handleReset}]}},{"key":"_filterByName","value":function(nt){var at,lt=xt(this.options.graphicName);return(null===(at=null==nt?void 0:nt.target)||void 0===at?void 0:at.name)&&lt.includes(nt.target.name)}},{"key":"_parseTargetKey","value":function(nt,at){return this.options.parseData?this.options.parseData(nt):"text"===nt.target.type?nt.target.attribute.text:null}},{"key":"start","value":function(nt){var at=this;if(!j(nt)){var lt=Rj(this.options);this._marks.forEach((function(Rt){Rt.elements.forEach((function(Rt){lt(Rt)===nt?Rt.updateStates(l(l({},at.options.blurState,!1),at.options.highlightState,!0)):Rt.updateStates(l(l({},at.options.blurState,!0),at.options.highlightState,!1))}))}))}}},{"key":"resetAll","value":function(){var nt=[this.options.blurState,this.options.highlightState];this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt)}))}))}},{"key":"reset","value":function(nt){nt?this._marks&&this._marks.includes(nt.mark)&&nt.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}])}(zj);Jj.type="element-highlight-by-name",Jj.defaultOptions={"trigger":"pointerover","triggerOff":"pointerout","highlightState":YH.highlight,"blurState":YH.blur,"filterType":"groupKey"};var eN=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,at])).type=e.type,lt.handleStart=function(nt){if(nt&&nt.element&&lt._marks.includes(nt.element.mark)&&(lt.options.shouldStart?lt.options.shouldStart(nt):lt._filterByName(nt))){var at=lt._parseTargetKey(nt,nt.element);lt.start(at)}},lt.handleReset=function(nt){nt&&nt.element&&lt._marks.includes(nt.element.mark)&&lt.reset()},lt.options=Object.assign({},e.defaultOptions,at),lt._marks=nt.getMarksBySelector(lt.options.selector),lt}return h(e,nt),o(e,[{"key":"_filterByName","value":function(nt){var at;return!!(null===(at=null==nt?void 0:nt.target)||void 0===at?void 0:at.name)}},{"key":"_parseTargetKey","value":function(nt,at){return nt.target.name}},{"key":"start","value":function(nt){var at=this;j(nt)||this._marks.forEach((function(lt){lt.elements.forEach((function(lt){var Rt;(null===(Rt=lt.getGraphicItem())||void 0===Rt?void 0:Rt.name)===nt?lt.updateStates(l(l({},at.options.blurState,!1),at.options.highlightState,!0)):lt.updateStates(l(l({},at.options.blurState,!0),at.options.highlightState,!1))}))}))}},{"key":"reset","value":function(){var nt=[this.options.blurState,this.options.highlightState];this._marks.forEach((function(at){at.elements.forEach((function(at){at.removeState(nt)}))}))}}])}(Nj);eN.type="element-highlight-by-graphic-name";var iN=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).type=e.type,nt}return h(e,nt),o(e,[{"key":"start","value":function(nt){var at,lt=this,Rt=null===(at=nt.getGraphicItem())||void 0===at?void 0:at.name;Rt&&this._marks.forEach((function(nt){nt.elements.forEach((function(nt){var at;(null===(at=nt.getGraphicItem())||void 0===at?void 0:at.name)===Rt&&y(e,"start",lt,3)([nt])}))}))}}])}(jj);function Vj(nt){if(nt)return nt.type===TI.Band?nt.bandwidth():nt.type===TI.Point?nt.step():void 0}iN.type="element-select-by-graphic-name";var nN=o((function t(){r(this,t)}),[{"key":"updateStates","value":function(nt,at,lt,Rt){return nt&&nt.length?(lt&&Rt?at&&at.length?(this.toggleReverseStateOfElements(nt,at,Rt),this.toggleStateOfElements(nt,at,lt)):this.addBothStateOfElements(nt,lt,Rt):lt&&(at&&at.length?this.toggleStateOfElements(nt,at,lt):this.addStateOfElements(nt,lt)),nt):null}},{"key":"toggleReverseStateOfElements","value":function(nt,at,lt){var Rt=this;at.forEach((function(nt){lt&&Rt._stateMarks[lt]&&Rt._stateMarks[lt].includes(nt.mark)&&nt.addState(lt)})),nt.forEach((function(nt){lt&&Rt._stateMarks[lt]&&Rt._stateMarks[lt].includes(nt.mark)&&nt.removeState(lt)}))}},{"key":"toggleStateOfElements","value":function(nt,at,lt){var Rt=this;at.forEach((function(nt){lt&&Rt._stateMarks[lt]&&Rt._stateMarks[lt].includes(nt.mark)&&nt.removeState(lt)})),nt.forEach((function(nt){lt&&Rt._stateMarks[lt]&&Rt._stateMarks[lt].includes(nt.mark)&&nt.addState(lt)}))}},{"key":"addBothStateOfElements","value":function(nt,at,lt){var Rt=this;this._marks.forEach((function(Bt){var Lt,Ht=lt&&Rt._stateMarks[lt]&&Rt._stateMarks[lt].includes(Bt),jt=at&&Rt._stateMarks[at]&&Rt._stateMarks[at].includes(Bt);(Ht||jt)&&(null===(Lt=Bt.elements)||void 0===Lt||Lt.forEach((function(Rt){nt&&nt.includes(Rt)?jt&&Rt.addState(at):Ht&&Rt.addState(lt)})))}))}},{"key":"addStateOfElements","value":function(nt,at){var lt=this;this._marks.forEach((function(Rt){var Bt,Lt=at&&lt._stateMarks[at]&&lt._stateMarks[at].includes(Rt);Lt&&(null===(Bt=Rt.elements)||void 0===Bt||Bt.forEach((function(lt){nt&&nt.includes(lt)&&Lt&&lt.addState(at)})))}))}},{"key":"clearAllStates","value":function(nt,at){var lt=this;this._statedElements&&this._statedElements.length&&this._marks.forEach((function(Rt){Rt&&Rt.elements&&(at&&lt._stateMarks[at]&&lt._stateMarks[at].includes(Rt)&&Rt.elements.forEach((function(nt){nt.removeState(at)})),nt&&lt._stateMarks[nt]&&lt._stateMarks[nt].includes(Rt)&&Rt.elements.forEach((function(at){lt._statedElements.includes(at)&&at.removeState(nt)})))}))}}]),Wj=function(nt,at){return sj(nt)?nt.output():nt&&V(nt)?H(nt.callback)?function(lt){return nt.callback(lt,at)}:H(nt.value)?nt.value(at):nt:nt},Uj=function(nt,at){return nt?V(nt)?Object.keys(nt).reduce((function(lt,Rt){var Bt=nt[Rt];return lt[Rt]=Wj(Bt,at),lt}),{}):nt.map((function(nt){return Wj(nt,at)})):nt},aN=-1,lN=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e)).spec={},at.references=new Map,at.targets=[],at.transforms=[],at.view=nt,at.uid=++aN,at}return h(e,nt),o(e,[{"key":"parse","value":function(nt){return this.id(nt.id),this.name(nt.name),this.depend(nt.dependency),this}},{"key":"depend","value":function(nt){var at,lt=this;if(null===(at=this.spec)||void 0===at?void 0:at.dependency){var Rt=xt(this.spec.dependency).map((function(nt){return Y(nt)?lt.view.getGrammarById(nt):nt}));this.detach(Rt)}this.spec.dependency=nt;var Bt=xt(nt).map((function(nt){return Y(nt)?lt.view.getGrammarById(nt):nt}));return this.attach(Bt),this.commit(),this}},{"key":"addEventListener","value":function(nt,at,lt){var Rt=at;return lt&&!1===lt.trap||((Rt=at).raw=at),lt&&lt.target&&(Rt.target=lt.target),this.on(nt,Rt),this}},{"key":"removeEventListener","value":function(nt,at){return at?this.off(nt,at):this.off(nt),this}},{"key":"emit","value":function(nt){for(var at,lt,Rt,Bt=arguments.length,Lt=new Array(Bt>1?Bt-1:0),Ht=1;Ht<Bt;Ht++)Lt[Ht-1]=arguments[Ht];return null===(Rt=null===(lt=this.view)||void 0===lt?void 0:lt.emit)||void 0===Rt||(at=Rt).call.apply(at,[lt,nt].concat(Lt)),y(e,"emit",this,3)([nt].concat(Lt))}},{"key":"emitGrammarEvent","value":function(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];return y(e,"emit",this,3)([nt].concat(lt))}},{"key":"evaluateTransform","value":function(nt,at,lt){if(!nt||!nt.length)return at;for(var Rt=at,Bt=0,Lt=nt.length;Bt<Lt;){var Ht=nt[Bt];this.emit(GH.BEFORE_TRANSFORM,Ht.type),Rt=Ht.transform(Ht.isRawOptions?Ht.options:Uj(Ht.options,lt),Rt,lt,this.view),Bt++,this.emit(GH.AFTER_TRANSFORM,Ht.type)}return Rt}},{"key":"set","value":function(nt){return!1}},{"key":"id","value":function(nt){return arguments.length?(this.view.grammars.unrecord(this),this._id=nt,this.view.grammars.record(this),this):this._id}},{"key":"name","value":function(nt){return arguments.length?(this._name=nt,this):this._name}},{"key":"attach","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return xt(nt).filter((function(nt){return!j(nt)})).forEach((function(Rt){var Bt;j(nt)||(Rt.targets.includes(at)||Rt.targets.push(at),at.references.set(Rt,(null!==(Bt=at.references.get(Rt))&&void 0!==Bt?Bt:0)+lt))})),this}},{"key":"detach","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return xt(nt).filter((function(nt){return!j(nt)})).forEach((function(nt){var Rt=at.references.get(nt)-lt;Rt>0?at.references.set(nt,Rt-1):(at.references.delete(nt),nt.targets.includes(at)&&(nt.targets=nt.targets.filter((function(nt){return nt!==at}))))})),this}},{"key":"detachAll","value":function(){var nt=this;this.references.forEach((function(at,lt){nt.detach(lt,at)}))}},{"key":"link","value":function(nt){this.grammarSource=nt}},{"key":"run","value":function(){var nt,at=null===(nt=this.grammarSource)||void 0===nt?void 0:nt.output(),lt=this.parameters();return this.evaluate(at,lt)}},{"key":"commit","value":function(){this.view.commit(this)}},{"key":"parameters","value":function(){var nt={};return this.references.forEach((function(at,lt){N(lt.id())&&(nt[lt.id()]=lt.output())})),nt}},{"key":"getSpec","value":function(){return this.spec}},{"key":"reuse","value":function(nt){return this}},{"key":"clear","value":function(){this.spec=null,this.view=null}},{"key":"release","value":function(){this.clear()}},{"key":"setFunctionSpec","value":function(nt,at){return j(this.spec[at])||this.detach(nj(this.spec[at],this.view)),this.spec[at]=nt,this.attach(nj(nt,this.view)),this.commit(),this}}])}(Bt),Kj=function(nt,at,lt){var Rt,Bt;if("callback"===nt&&H(at))return{"references":[],"value":{"callback":at,"dependency":[]}};if(!j(at.data)){var Lt=lt.getDataById(at.data);return{"references":[Lt],"value":Lt}}if(!j(at.customized)){var Ht=lt.getCustomizedById(at.customized);return{"references":[Ht],"value":Ht}}if(!j(at.scale)){var jt=lt.getScaleById(at.scale);return{"references":[jt],"value":jt}}if((Bt=at)&&(Bt.signal||Bt.callback)){var $t=nj(at,lt);return{"references":$t,"value":at.callback?{"value":at.callback,"dependency":$t}:null!==(Rt=null==$t?void 0:$t[0])&&void 0!==Rt?Rt:at}}return{"value":at}},qj=function(nt,at){var lt=Pj.getTransform(nt.type);if(lt){var Rt={},Bt=[];return Object.keys(nt).forEach((function(lt){var Lt;if("type"!==lt){var Ht=nt[lt];if("dependency"!==lt){var jt=function(nt,at,lt){if(j(at))return{"value":at};if(X(at)){var Rt=at.map((function(at){return Kj(nt,at,lt)}));return{"references":Rt.reduce((function(nt,at){return at.references&&nt.concat(at.references),nt}),[]),"value":Rt.map((function(nt){return nt.value}))}}return Kj(nt,at,lt)}(lt,Ht,at);jt&&((null===(Lt=jt.references)||void 0===Lt?void 0:Lt.length)&&(Bt=Bt.concat(jt.references)),Rt[lt]=jt.value)}else(null==Ht?void 0:Ht.length)&&(Bt=Bt.concat(ij(Ht,at)))}})),{"markPhase":lt.markPhase,"transform":lt.transform,"canProgressive":lt.canProgressive,"type":lt.type,"options":Rt,"references":Bt}}},Zj=function(nt,at){if(null==nt?void 0:nt.length){var lt=[],Rt=[];return nt.forEach((function(nt){var Bt,Lt=qj(nt,at);Lt&&((null===(Bt=Lt.references)||void 0===Bt?void 0:Bt.length)&&(Rt=Rt.concat(Lt.references)),lt.push(Lt))})),{"transforms":lt,"refs":Rt}}return null},uN={"csv":Fo,"dsv":Oo,"tsv":zo,"json":function(nt){if(!Y(nt))return xt(nt);try{return xt(JSON.parse(nt))}catch(nt){return[]}}},cN=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[nt])).grammarType="data",Rt.spec={},Rt._dataIDKey="VGRAMMAR_DATA_ID_KEY_".concat(Rt.uid),Rt._loadTasks=[],Rt._postFilters=[],Rt.ingest=function(nt){var at=function(nt,at){if(j(nt))return nt;if(H(nt))return nt.call(null,at);if(nt.signal){var lt=nt.signal;return Y(lt)?null==at?void 0:at[lt]:lt.output()}return nt.callback?nt.callback.call(null,at):nt}(nt.format,Rt.parameters());return Rt._input=function(nt,at){if(!at||!uN[at.type])return xt(nt);var lt="dsv"===at.type?{"delimiter":at.delimiter}:{};return uN[at.type](nt,lt,new Es(new Ms))}(nt.values,at),Rt._input},Rt.load=function(nt){if(nt.values)return Rt.ingest(nt)},Rt.relay=function(nt){return nt[0]},Rt._loadTasks=[],j(at)||Rt.values(at,lt),Rt}return h(e,nt),o(e,[{"key":"parse","value":function(nt){return y(e,"parse",this,3)([nt]),this._isLoaded=!1,this.source(nt.source,nt.format,!1),this.url(nt.url,nt.format,!1),this.values(nt.values,nt.format,!1),this.transform(nt.transform),this.parseLoad(nt),this.commit(),this}},{"key":"parseDataSource","value":function(nt){var at=this,lt=[],Rt=[],Bt=nt.format?nj(nt.format,this.view)[0]:null;if(Bt&&lt.push(Bt),nt.values){var Lt=nj(nt.values,this.view)[0];Lt&&lt.push(Lt),Rt.push({"type":"ingest","transform":this.ingest,"isRawOptions":!0,"options":{"values":nt.values,"format":nt.format}})}else if(nt.url){var Ht=nj(nt.url,this.view)[0];Ht&&lt.push(Ht),Rt.push({"type":"load","transform":this.load,"options":{"url":null!=Ht?Ht:nt.url,"format":null!=Bt?Bt:nt.format}})}else if(nt.source){var jt=[];xt(nt.source).forEach((function(nt){var Rt=sj(nt)?nt:at.view.getDataById(nt);Rt&&(lt.push(Rt),jt.push(Rt))})),jt.length&&(Rt.push({"type":"relay","transform":this.relay,"options":jt}),this.grammarSource=jt[0])}return{"transforms":Rt,"refs":lt}}},{"key":"evaluate","value":function(nt,at){this.view.emit(GH.BEFORE_EVALUATE_DATA);var lt=this._isLoaded?this.transforms:this._loadTasks.concat(this.transforms);this.grammarSource&&(this._input=nt);var Rt=this.evaluateTransform(lt,this._input,at),Bt=this._evaluateFilter(Rt,at);return this.setValues(Bt),this._isLoaded=!0,this.view.emit(GH.AFTER_EVALUATE_DATA),this}},{"key":"output","value":function(){return this._values}},{"key":"getDataIDKey","value":function(){return this._dataIDKey}},{"key":"values","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Rt=Object.assign({},this.spec,{"values":nt,"format":at});return j(nt)||(Rt.url=void 0,Rt.source=void 0),lt?this.parseLoad(Rt):this}},{"key":"url","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Rt=Object.assign({},this.spec,{"url":nt,"format":at});return j(nt)||(Rt.values=void 0,Rt.source=void 0),lt?this.parseLoad(Rt):this}},{"key":"source","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Rt=Object.assign({},this.spec,{"source":nt,"format":at});return j(nt)||(Rt.values=void 0,Rt.url=void 0),lt?this.parseLoad(Rt):this}},{"key":"parseLoad","value":function(nt){this.detach(this.parseDataSource(this.spec).refs),this.spec=nt;var at=this.parseDataSource(this.spec);return this.attach(at.refs),this._loadTasks=at.transforms,this._isLoaded=!1,this.commit(),this}},{"key":"setValues","value":function(nt){var at=this;this._values=xt(nt).map((function(nt,lt){var Rt=nt===Object(nt)?nt:{"data":nt};return Rt[at._dataIDKey]=lt,Rt}))}},{"key":"field","value":function(nt){return this._values.map((function(at){return at[nt]}))}},{"key":"transform","value":function(nt){var at=Zj(this.spec.transform,this.view);at&&(this.detach(at.refs),this.transforms=[]),this.spec.transform=nt;var lt=Zj(this.spec.transform,this.view);return lt&&(this.attach(lt.refs),this.transforms=lt.transforms),this.commit(),this}},{"key":"getValue","value":function(){return this._values}},{"key":"getInput","value":function(){return this._input}},{"key":"addDataFilter","value":function(nt){return this._postFilters=this._postFilters.concat(xt(nt)),this._postFilters.sort((function(nt,at){var lt,Rt;return(null!==(lt=nt.rank)&&void 0!==lt?lt:0)-(null!==(Rt=at.rank)&&void 0!==Rt?Rt:0)})),this}},{"key":"removeDataFilter","value":function(nt){var at=xt(nt);return this._postFilters=this._postFilters.filter((function(nt){return!at.includes(nt)})),this}},{"key":"_evaluateFilter","value":function(nt,at){return this._postFilters.reduce((function(nt,lt){return lt.filter(nt,at)}),nt)}},{"key":"reuse","value":function(nt){return nt.grammarType!==this.grammarType||(this._isLoaded=!1,this._values=nt.output()),this}},{"key":"clear","value":function(){y(e,"clear",this,3)([]),this._input=null,this._values=null}}])}(lN);function $j(nt,at,lt,Rt){for(var Bt,Lt,Ht=nt[at];at>lt&&(Bt=nt[Lt=Math.floor((at-1)/2)],Ht&&Bt&&Rt(Ht,Bt)<0);)nt[at]=Bt,at=Lt;return nt[at]=Ht}function tN(nt,at,lt,Rt){for(var Bt,Lt=at,Ht=null!=lt?lt:nt.length,jt=nt[at],$t=2*at+1;$t<Ht;)(Bt=$t+1)<Ht&&Rt(nt[$t],nt[Bt])>=0&&($t=Bt),nt[at]=nt[$t],$t=2*(at=$t)+1;return nt[at]=jt,$j(nt,at,Lt,Rt)}var hN=o((function t(nt){r(this,t),this.compare=nt,this.nodes=[]}),[{"key":"size","value":function(){return this.nodes.length}},{"key":"last","value":function(){return this.nodes[0]}},{"key":"validate","value":function(){for(var nt=this.nodes.length-1;nt>0;nt-=1){var at=Math.floor((nt-1)/2);if(this.compare(this.nodes[at],this.nodes[nt])>0)return!1}return!0}},{"key":"push","value":function(nt){if(this.nodes.includes(nt)){var at=this.nodes.indexOf(nt);return $j(this.nodes,at,0,this.compare),tN(this.nodes,at,null,this.compare)}return this.nodes.push(nt),$j(this.nodes,this.nodes.length-1,0,this.compare)}},{"key":"remove","value":function(nt){if(this.nodes.includes(nt)){var at=this.nodes.indexOf(nt);this.nodes=this.nodes.slice(0,at).concat(this.nodes.slice(at+1)),$j(this.nodes,at,0,this.compare),tN(this.nodes,at,null,this.compare)}}},{"key":"pop","value":function(){var nt,at=this.nodes.pop();return this.nodes.length?(nt=this.nodes[0],this.nodes[0]=at,tN(this.nodes,0,null,this.compare)):nt=at,nt}},{"key":"clear","value":function(){this.nodes=[]}}]),dN=o((function t(nt){r(this,t),this.list=[],this.ids={},this.idFunc=nt||Uk}),[{"key":"add","value":function(nt){var at=this.idFunc(nt);return this.ids[at]||(this.ids[at]=1,this.list.push(nt)),this}},{"key":"remove","value":function(nt){var at=this.idFunc(nt);return this.ids[at]&&(this.ids[at]=0,this.list=this.list.filter((function(at){return at!==nt}))),this}},{"key":"forEach","value":function(nt,at){at?this.list.slice().reverse().forEach(nt):this.list.forEach(nt)}},{"key":"filter","value":function(nt){return this.list.filter(nt)}},{"key":"length","get":function(){return this.list.length}},{"key":"getElementByIndex","value":function(nt){return this.list[nt]}}]),fN=o((function t(){r(this,t),this.grammars=[],this.logger=te.getInstance(),this._curRank=0,this._committed=new dN((function(nt){return nt.uid})),this._heap=new hN((function(nt,at){return(null==nt?void 0:nt.qrank)-(null==at?void 0:at.qrank)})),this._beforeRunner=null,this._afterRunner=null,this._updateCounter=0,this._finishFirstRender=!1}),[{"key":"add","value":function(nt){if(nt)return this._setRankOfGrammar(nt),this.commit(nt),!this.grammars.includes(nt)&&(this.grammars.push(nt),!0)}},{"key":"remove","value":function(nt){nt&&(this._committed.remove(nt),this._heap.remove(nt),this.grammars=this.grammars.filter((function(at){return at!==nt})))}},{"key":"_setRankOfGrammar","value":function(nt){nt&&(nt.rank=++this._curRank)}},{"key":"_reRank","value":function(nt){for(var at=this,lt=[nt];lt.length;){var Rt=lt.pop();this._setRankOfGrammar(Rt);var Bt=Rt.targets;Bt&&Bt.forEach((function(Rt){lt.push(Rt),Rt===nt&&at.logger.error("Cycle detected in dataflow graph.")}))}}},{"key":"_enqueue","value":function(nt){nt&&(nt.qrank=nt.rank,this._heap.push(nt))}},{"key":"_logGrammarRunInfo","value":function(nt){if(this.logger.canLogError()){var at=[{"key":"id","value":nt.id()},{"key":"name","value":nt.name()}].reduce((function(nt,at,lt){return j(at.value)?nt:"".concat(nt).concat(lt?" , ":"").concat(at.key,": ").concat(at.value)}),"");this.logger.debug("Run Operator: ",nt,at)}}},{"key":"hasCommitted","value":function(){return!!this._committed.length}},{"key":"commit","value":function(nt){return this._committed.add(nt),this}},{"key":"_beforeEvaluate","value":function(){var nt=this;this.grammars.forEach((function(at){at.targets.some((function(nt){return(null==nt?void 0:nt.rank)<(null==at?void 0:at.rank)}))&&nt._reRank(at)})),this._committed.forEach((function(at){return nt._enqueue(at)})),this._committed=new dN((function(nt){return nt.uid}))}},{"key":"_enqueueTargets","value":function(nt){var at=this;nt.targets&&nt.targets.length&&this._finishFirstRender&&nt.targets.forEach((function(nt){return at._enqueue(nt)}))}},{"key":"evaluate","value":function(){if(this._beforeRunner&&this._beforeRunner(this),!this._committed.length)return this.logger.info("Dataflow invoked, but nothing to do."),!1;this._updateCounter+=1;var nt,at,lt=0;for(this.logger.canLogInfo()&&(at=Date.now(),this.logger.debug("-- START PROPAGATION (".concat(this._updateCounter,") -----"))),this._beforeEvaluate();this._heap.size()>0;)(nt=this._heap.pop())&&(nt.rank===nt.qrank?(nt.run(),this._logGrammarRunInfo(nt),this._enqueueTargets(nt),lt+=1):this._enqueue(nt));return this.logger.canLogInfo()&&(at=Date.now()-at,this.logger.info("> ".concat(lt," grammars updated; ").concat(at," ms"))),this._afterRunner&&this._afterRunner(this),this._finishFirstRender=!0,!0}},{"key":"runBefore","value":function(nt){this._beforeRunner=nt}},{"key":"runAfter","value":function(nt){this._afterRunner=nt}},{"key":"release","value":function(){this._heap&&(this._heap.clear(),this._heap=null),this.logger=null,this._committed=null}}]),rN=function(nt,at,lt,Rt,Bt){var a=function(nt){if(Bt||!nt||Rt&&!Rt(nt)||lt.call(null,nt),nt.markType===MH.group){var Lt=nt[at];Lt&&Lt.forEach((function(nt){a(nt)}))}Bt&&(!nt||Rt&&!Rt(nt)||lt.call(null,nt))};a(nt)},pN=o((function t(nt){var at=this;r(this,t),this.handleAfterNextRender=function(){at._stage&&!at._viewOptions.disableDirtyBounds&&at._stage.enableDirtyBounds(),at._view.emit(GH.AFTER_VRENDER_DRAW),at._view.emit(GH.AFTER_VRENDER_NEXT_RENDER)},this._view=nt}),[{"key":"initialize","value":function(nt,at,lt,Rt){return this._width=nt,this._height=at,this._viewOptions=lt,this._eventConfig=Rt,this.initStage(),this}},{"key":"stage","value":function(){var nt;return null!==(nt=this._stage)&&void 0!==nt?nt:null}},{"key":"gestureController","value":function(){var nt;return null!==(nt=this._gestureController)&&void 0!==nt?nt:null}},{"key":"canvas","value":function(){return this._stage?this._stage.window.getNativeHandler().nativeCanvas:null}},{"key":"context","value":function(){return this._stage?this._stage.window.getContext().nativeContext:null}},{"key":"combineIncrementalLayers","value":function(){var nt=this;return this._stage&&function(nt){return Wf(this,void 0,void 0,f().mark((function e(){var at,lt;return f().wrap((function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return at=[],lt=nt.getChildren(),Rt.next=3,new Promise((function(nt){oc.global.getRequestAnimationFrame()((function(){nt(null)}))}));case 3:return lt.forEach((function(nt){nt.subLayers.size&&nt.subLayers.forEach((function(nt){nt.drawContribution&&nt.drawContribution.hooks&&nt.drawContribution.rendering&&at.push(new Promise((function(at){nt.drawContribution.hooks.completeDraw.tap("outWait",(function(){nt.drawContribution.hooks.completeDraw.taps=nt.drawContribution.hooks.completeDraw.taps.filter((function(nt){return"outWait"!==nt.name})),at(null)}))})))}))})),Rt.next=6,Promise.all(at);case 6:case"end":return Rt.stop()}}),e)})))}(this._stage).then((function(){nt._stage&&nt._stage.defaultLayer.combineSubLayer()})),this}},{"key":"background","value":function(nt){if(this._stage)return this._stage.background=nt,this}},{"key":"setDpr","value":function(nt,at){var lt,Rt;return null===(Rt=null===(lt=this._stage)||void 0===lt?void 0:lt.setDpr)||void 0===Rt||Rt.call(lt,nt),at&&this.renderNextFrame(),this}},{"key":"shouldResize","value":function(nt,at){return nt!==this._width||at!==this._height}},{"key":"resize","value":function(nt,at){return this._view.emit(GH.BEFORE_STAGE_RESIZE),this.shouldResize(nt,at)&&(this._width=nt,this._height=at,this._stage&&this._stage.resize(nt,at)),this._view.emit(GH.AFTER_STAGE_RESIZE),this}},{"key":"setViewBox","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._stage?(!nt||this._viewBox&&nt.x1===this._viewBox.x1&&nt.x2===this._viewBox.x2&&nt.y1===this._viewBox.y1&&nt.y2===this._viewBox.y2||(this._viewBox=nt,this._stage.setViewBox(nt.x1,nt.y1,nt.x2-nt.x1,nt.y2-nt.y1,at)),this):this}},{"key":"render","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._view.emit(GH.BEFORE_VRENDER_DRAW),this.initStage(),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this.handleAfterNextRender),nt&&(this._stage.render(),this._view.emit(GH.AFTER_VRENDER_DRAW)),this}},{"key":"renderNextFrame","value":function(){return this.initStage(),this._stage.renderNextFrame(),this}},{"key":"toCanvas","value":function(){return this._stage?this._stage.toCanvas():null}},{"key":"preventRender","value":function(nt){this._stage&&this._stage.preventRender(nt)}},{"key":"release","value":function(){var nt;this._view.traverseMarkTree((function(nt){nt.release()})),this._dragController&&this._dragController.release(),this._gestureController&&this._gestureController.release(),this._stage!==(null===(nt=this._viewOptions)||void 0===nt?void 0:nt.stage)&&this._stage.release(),this._stage=null,this._layer=null,this._dragController=null,this._gestureController=null}},{"key":"createStage","value":function(){var nt,at,lt,Rt,Bt;this._view.emit(GH.BEFORE_CREATE_VRENDER_STAGE);var Lt,Ht=this._viewOptions,jt=null!==(nt=Ht.stage)&&void 0!==nt?nt:(Lt={"width":this._width,"height":this._height,"renderStyle":Ht.renderStyle,"viewBox":Ht.viewBox,"dpr":Ht.dpr,"canvas":Ht.renderCanvas,"canvasControled":Ht.canvasControled,"container":Ht.container,"title":Ht.rendererTitle,"beforeRender":Ht.beforeRender,"afterRender":Ht.afterRender,"disableDirtyBounds":!0,"autoRender":!0,"pluginList":Ht.pluginList,"enableHtmlAttribute":Ht.enableHtmlAttribute,"optimize":Ht.optimize,"ticker":Ht.ticker,"supportsTouchEvents":Ht.supportsTouchEvents,"supportsPointerEvents":Ht.supportsPointerEvents,"event":{"clickInterval":this._eventConfig.clickInterval,"autoPreventDefault":!!this._eventConfig.autoPreventDefault},"ReactDOM":Ht.ReactDOM,"autoRefresh":Ht.autoRefresh},new kx(Lt));(null===(at=Ht.options3d)||void 0===at?void 0:at.enable)&&jt.set3dOptions(Ht.options3d),jt.enableIncrementalAutoRender(),this._viewBox=Ht.viewBox,this._view.emit(GH.AFTER_CREATE_VRENDER_STAGE),this._view.emit(GH.BEFORE_CREATE_VRENDER_LAYER);var $t=null!==(lt=Ht.layer)&&void 0!==lt?lt:jt.defaultLayer;if(this._view.emit(GH.AFTER_CREATE_VRENDER_LAYER),(null===(Rt=this._eventConfig)||void 0===Rt?void 0:Rt.drag)&&Pj.getStageEventPlugin("drag")&&(this._dragController=new(Pj.getStageEventPlugin("drag"))(jt)),(null===(Bt=this._eventConfig)||void 0===Bt?void 0:Bt.gesture)&&Pj.getStageEventPlugin("gesture")){var Kt=V(this._eventConfig.gesture)?this._eventConfig.gesture:{};this._gestureController=new(Pj.getStageEventPlugin("gesture"))(jt,Kt)}return{"stage":jt,"layer":$t}}},{"key":"initStage","value":function(){if(!this._stage){var nt=this.createStage(),at=nt.stage,lt=nt.layer;this._stage=at,this._layer=lt;var Rt=this._view.background();this.background(Rt)}}}]);function oN(nt){return j(nt.offsetX)?j(nt.x)?nt.changedTouches&&nt.changedTouches.length?function(nt){var at=nt.changedTouches[0];return{"canvasX":at.x,"canvasY":at.y}}(nt):{"canvasX":0,"canvasY":0}:function(nt){return{"canvasX":nt.x,"canvasY":nt.y}}(nt):function(nt){return{"canvasX":nt.offsetX,"canvasY":nt.offsetY}}(nt)}function sN(nt,at){var lt=["canvasX","canvasY"];return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(lt.push("clientX"),lt.push("clientY")),lt.forEach((function(lt){Q(at[lt])&&Object.defineProperty(nt,lt,{"value":at[lt],"writable":!0})})),[at.canvasX,at.canvasY]}var vN="window",gN="view",mN="width",_N="height",bN="viewWidth",SN="viewHeight",AN="padding",wN="viewBox",CN="autoFit";function yN(nt,at,lt,Rt){var Bt,Lt;Rt===vN&&function(nt){["touches","changedTouches","targetTouches"].forEach((function(at){nt[at]&&nt[at].length&&Array.from(nt[at]).forEach((function(nt){sN(nt,oN(nt),!1)}))}));var at=oN(nt);sN(nt,at)}(at.changedTouches?at.changedTouches[0]:at);var Ht=null===(Bt=at.target)||void 0===Bt?void 0:Bt[XH];if(!Ht&&Rt===gN)for(var jt=at.target,$t=null===(Lt=nt.rootMark)||void 0===Lt?void 0:Lt.graphicItem;(null==jt?void 0:jt.parent)&&jt.parent!==$t;)if((jt=jt.parent)[XH]){Ht=jt[XH];break}return at.element=Ht,at}var MN=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments)).grammarType="signal",nt.spec={"value":null,"update":null},nt}return h(e,nt),o(e,[{"key":"parse","value":function(nt){return y(e,"parse",this,3)([nt]),this.value(nt.value),this.update(nt.update),this.commit(),this}},{"key":"evaluate","value":function(nt,at){return this._signal=this.spec.update?aj(this.spec.update,at,this._signal):this.spec.value,this.spec.value=this._signal,this}},{"key":"output","value":function(){return this._signal}},{"key":"getValue","value":function(){return this.output()}},{"key":"set","value":function(nt){if(X(nt)&&X(this.value)&&nt.length===this.value.length){for(var at=0;at<nt.length;at++)if(this.value[at]!==nt[at])return this._signal=nt,this.spec.value=nt,!0;return!1}return this._signal!==nt&&(this._signal=nt,this.spec.value=nt,!0)}},{"key":"update","value":function(nt){return j(nt)||this.value(void 0),this.setFunctionSpec(nt,"update")}},{"key":"value","value":function(nt){return j(nt)||this.update(void 0),this.spec.value=nt,this.commit(),this}},{"key":"reuse","value":function(nt){return nt.grammarType!==this.grammarType||(this._signal=nt.output()),this}},{"key":"clear","value":function(){y(e,"clear",this,3)([]),this._signal=null}}])}(lN),TN=-1,EN=[mN,_N,AN,bN,SN,wN,CN],xN=function(nt){var at,lt,Rt,Bt;return Z(nt)?{"top":nt,"bottom":nt,"left":nt,"right":nt}:{"top":null!==(at=null==nt?void 0:nt.top)&&void 0!==at?at:0,"bottom":null!==(lt=null==nt?void 0:nt.bottom)&&void 0!==lt?lt:0,"left":null!==(Rt=null==nt?void 0:nt.left)&&void 0!==Rt?Rt:0,"right":null!==(Bt=null==nt?void 0:nt.right)&&void 0!==Bt?Bt:0}};function kN(nt,at,lt){var Rt=new Map;if(!nt||0===nt.length)return{"keys":[],"data":Rt};if(!at)return Rt.set(KH,lt?nt.slice().sort(lt):nt.slice()),{"keys":QH,"data":Rt};var Bt=lj(at);if(1===nt.length){var Lt=Bt(nt[0]);return Rt.set(Lt,[nt[0]]),{"keys":[Lt],"data":Rt}}var Ht=new Set;return nt.forEach((function(nt){var at,lt=Bt(nt),Lt=null!==(at=Rt.get(lt))&&void 0!==at?at:[];Lt.push(nt),Rt.set(lt,Lt),Ht.add(lt)})),lt&&Ht.forEach((function(nt){Rt.get(nt).sort(lt)})),{"keys":Array.from(Ht),"data":Rt}}var PN=o((function t(nt,at,lt){r(this,t),this.prevData=(null==nt?void 0:nt.length)?kN(nt,null!=at?at:null,lt):null}),[{"key":"setCurrentData","value":function(nt){this.currentData=nt}},{"key":"getCurrentData","value":function(){return this.currentData}},{"key":"doDiff","value":function(){var nt=this;if(this.callback)if(this.currentData&&this.prevData){var at=new Map(this.prevData.data);this.currentData.keys.forEach((function(lt){nt.callback(lt,nt.currentData.data.get(lt),at.get(lt)),at.delete(lt)})),this.prevData.keys.forEach((function(lt){at.has(lt)&&nt.callback(lt,null,at.get(lt))}))}else this.currentData?this.currentData.keys.forEach((function(at){nt.callback(at,nt.currentData.data.get(at),null)})):this.prevData&&this.prevData.keys.forEach((function(at){nt.callback(at,null,nt.prevData.data.get(at))}))}},{"key":"setCallback","value":function(nt){this.callback=nt}},{"key":"updateToCurrent","value":function(){this.prevData=this.currentData,this.currentData=null}},{"key":"reset","value":function(){this.prevData=null}}]),RN=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[nt])).grammarType="mark",Rt.elements=[],Rt.elementMap=new Map,Rt.isUpdated=!0,Rt._isReentered=!1,Rt.differ=new PN([]),Rt.markType=at,Rt.spec.type=at,Rt.spec.encode={"update":{}},Rt.spec.group=lt,lt&&(Rt.group=lt,Rt.attach(lt),lt.appendChild(i(Rt))),Rt}return h(e,nt),o(e,[{"key":"parse","value":function(nt){var at,lt,Rt,Bt=this;if(y(e,"parse",this,3)([nt]),this.spec.group){var Lt=Y(this.spec.group)?this.view.getMarkById(this.spec.group):this.spec.group;this.detach(Lt)}var Ht=Y(nt.group)?this.view.getMarkById(nt.group):nt.group;return this.attach(Ht),this.join(null===(at=nt.from)||void 0===at?void 0:at.data,nt.key,nt.sort,nt.groupBy,nt.groupSort),this.coordinate(nt.coordinate),this.state(nt.state,this.spec.stateSort),Object.keys(null!==(lt=this.spec.encode)&&void 0!==lt?lt:{}).forEach((function(nt){Bt.encodeState(nt,{},!0)})),Object.keys(null!==(Rt=nt.encode)&&void 0!==Rt?Rt:{}).forEach((function(at){Bt.encodeState(at,nt.encode[at])})),this.animation(nt.animation),this.animationState(nt.animationState),this.morph(nt.morph,nt.morphKey,nt.morphElementKey),this.layout(nt.layout),this.configure(nt),this.transform(nt.transform),this.parseAddition(nt),this.spec=nt,this.markType=nt.type,this.commit(),this}},{"key":"parameters","value":function(){var nt;return null!==(nt=this._finalParameters)&&void 0!==nt?nt:y(e,"parameters",this,3)([])}},{"key":"parseAddition","value":function(nt){return this}},{"key":"reuse","value":function(nt){var at,lt=this;if(nt.grammarType!==this.grammarType)return this;var Rt=nt;return this.markType=Rt.markType,this.coord=Rt.coord,this.elementMap=Rt.elementMap,this.elements=Rt.elements,this.elementMap.forEach((function(nt){return nt.mark=lt})),this.differ=Rt.differ,null===(at=this.reuseAnimate)||void 0===at||at.call(this,Rt),this._context=Rt._context,this.graphicItem=Rt.graphicItem,this.graphicIndex=Rt.graphicIndex,this.graphicParent=Rt.graphicParent,this.needClear=Rt.needClear,this.isUpdated=Rt.isUpdated,this}},{"key":"needLayout","value":function(){return!j(this.spec.layout)}},{"key":"handleLayoutEnd","value":function(){}},{"key":"handleRenderEnd","value":function(){this.needClear&&(this.cleanExitElements(),this.elementMap.forEach((function(nt){nt.diffState===CH.exit?nt.clearGraphicAttributes():nt.clearChangedGraphicAttributes()})),this.differ.updateToCurrent(),this.needClear=!1)}},{"key":"evaluateMainTasks","value":function(nt,at){var lt,Rt;if(this.needSkipBeforeLayout()&&this.view.getLayoutState()===WH.before)return this;var Bt=null===(lt=this.view.renderer)||void 0===lt?void 0:lt.stage();this.init(Bt,at);var Lt=this.evaluateTransform(this._getTransformsBeforeJoin(),null!=nt?nt:ZH,at),Ht=null==Lt?void 0:Lt.progressive;if(Ht?this.renderContext={"large":!1}:(this.evaluateGroup(Lt),this.renderContext=this.parseRenderContext(Lt,at)),null===(Rt=this.renderContext)||void 0===Rt?void 0:Rt.progressive)this.differ.reset(),this.elementMap.clear(),this.evaluateProgressive();else{var jt=null;if(Ht){if(this.renderContext.parameters=at,this.renderContext.beforeTransformProgressive=Lt.progressive,jt=Lt.progressive.output(),Lt.progressive.canAnimate&&Lt.progressive.unfinished())return this.update(this.spec),this}else jt=Lt;this.emit(GH.BEFORE_MARK_JOIN),this.evaluateJoin(jt),this.emit(GH.AFTER_MARK_JOIN),this.emit(GH.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,at),this.emit(GH.AFTER_MARK_STATE),this.emit(GH.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),at),this.emit(GH.AFTER_MARK_ENCODE)}return this.update(this.spec),this}},{"key":"evaluateGroup","value":function(nt){if(this.markType!==MH.group){var at=kN(null!=nt?nt:ZH,this.spec.groupBy,this.spec.groupSort);this._groupEncodeResult=null,this._groupedData=at}}},{"key":"_getTransformsAfterEncodeItems","value":function(){return this.transforms&&this.transforms.filter((function(nt){return"afterEncodeItems"===nt.markPhase}))}},{"key":"_getTransformsAfterEncode","value":function(){return this.transforms&&this.transforms.filter((function(nt){return j(nt.markPhase)||"afterEncode"===nt.markPhase}))}},{"key":"_getTransformsBeforeJoin","value":function(){return this.transforms?this.transforms.filter((function(nt){return"beforeJoin"===nt.markPhase})):[]}},{"key":"evaluate","value":function(nt,at){var lt;return this.evaluateMainTasks(nt,at),(null===(lt=this.renderContext)||void 0===lt?void 0:lt.progressive)||this.evaluateTransform(this._getTransformsAfterEncode(),this.elements,at),this}},{"key":"output","value":function(){return this}},{"key":"join","value":function(nt,at,lt,Rt,Bt){return this.grammarSource&&(this.detach(this.grammarSource),this.grammarSource=null),this.spec.from=null,j(nt)||(Y(nt)?this.grammarSource=this.view.getDataById(nt):this.grammarSource=nt,this.spec.from={"data":nt},this.attach(this.grammarSource)),this.spec.key=at,this.spec.sort=lt,this.spec.groupBy=Rt,this.spec.groupSort=Bt,this.commit(),this}},{"key":"coordinate","value":function(nt){return Y(nt)?this.coord=this.view.getCoordinateById(nt):this.coord=nt,this.attach(this.coord),this.commit(),this}},{"key":"state","value":function(nt,at){return this.spec.stateSort=at,this.setFunctionSpec(nt,"state")}},{"key":"encode","value":function(nt,at,lt){return this.encodeState(CH.update,nt,at,lt)}},{"key":"encodeState","value":function(nt,at,lt,Rt){var Bt=this;if(nt===CH.enter&&(this._isReentered=!0),this.spec.encode[nt]){var Lt=this.spec.encode[nt];if(rj(Lt))this.detach(hj(Lt,this.view));else{var Ht=Y(at);Ht&&Rt||!Ht&&lt?(Object.keys(Lt).forEach((function(nt){Bt.detach(hj(Lt[nt],Bt.view))})),this.spec.encode[nt]={}):Ht?this.detach(hj(Lt[at],this.view)):Object.keys(at).forEach((function(nt){Bt.detach(hj(Lt[nt],Bt.view))}))}}return at&&(this.spec.encode[nt]||(this.spec.encode[nt]={}),Y(at)?(this.spec.encode[nt][at]=lt,this.attach(hj(lt,this.view))):rj(at)?(this.spec.encode[nt]=at,this.attach(hj(at,this.view))):at&&(Object.assign(this.spec.encode[nt],at),Object.values(at).forEach((function(nt){Bt.attach(hj(nt,Bt.view))})))),this.commit(),this}},{"key":"_getEncoders","value":function(){var nt;return null!==(nt=this.spec.encode)&&void 0!==nt?nt:{}}},{"key":"animation","value":function(nt){return this.spec.animation=nt,this}},{"key":"animationState","value":function(nt){return this.setFunctionSpec(nt,"animationState")}},{"key":"layout","value":function(nt){return this.spec.layout=nt,this.commit(),this}},{"key":"morph","value":function(nt,at,lt){return this.spec.morph=nt,this.spec.morphKey=at,this.spec.morphElementKey=lt,this}},{"key":"transform","value":function(nt){var at=Zj(this.spec.transform,this.view);at&&(this.detach(at.refs),this.transforms=[]);var lt=Zj(nt,this.view);return lt&&(this.attach(lt.refs),this.transforms=lt.transforms),this.spec.transform=nt,this.commit(),this}},{"key":"configure","value":function(nt){var at=this,lt=["clip","clipPath","zIndex","interactive","context","setCustomizedShape","large","largeThreshold","progressiveStep","progressiveThreshold","support3d","morph","morphKey","morphElementKey","attributeTransforms","skipTheme","enableSegments","stateSort","graphicName","overflow"];return null===nt?(lt.forEach((function(nt){j(at.spec[nt])||(at.spec[nt]=void 0)})),this):(lt.forEach((function(lt){j(nt[lt])||(at.spec[lt]=nt[lt])})),this)}},{"key":"context","value":function(nt){return this.spec.context=nt,this._context=nt,this}},{"key":"isCollectionMark","value":function(){return $H.includes(this.markType)}},{"key":"needAnimate","value":function(){var nt;return!(null===(nt=this.renderContext)||void 0===nt?void 0:nt.progressive)&&!j(this.spec.animation)}},{"key":"getAllElements","value":function(){var nt=this,at=this.elements.slice();return this.elementMap.forEach((function(nt){nt.diffState!==CH.exit||at.includes(nt)||at.push(nt)})),this.spec.sort&&at.sort((function(at,lt){return nt.spec.sort(at.getDatum(),lt.getDatum())})),at}},{"key":"getScales","value":function(){var nt={};return this.references.forEach((function(at,lt){lt.grammarType===UH.scale&&(nt[lt.id()]=lt.output())})),nt}},{"key":"getScalesByChannel","value":function(){var nt=this.spec.encode;if(!nt)return{};var at={},lt=this.parameters();return Object.keys(nt).forEach((function(Rt){var Bt=nt[Rt];Bt&&!rj(Bt)&&Object.keys(Bt).forEach((function(nt){uj(Bt[nt])&&(at[nt]=oj(Bt[nt].scale,lt))}))})),at}},{"key":"getFieldsByChannel","value":function(){var nt=this.spec.encode;if(!nt)return{};var at={};return Object.keys(nt).forEach((function(lt){var Rt=nt[lt];rj(Rt)||Object.keys(Rt).forEach((function(nt){cj(Rt[nt])&&(at[nt]=Rt[nt].field)}))})),at}},{"key":"init","value":function(nt,at){var lt,Rt,Bt,Lt,Ht,jt=this;if(this._delegateEvent||(this._delegateEvent=function(nt,at){var lt=yN(jt.view,nt,0,gN),Rt=nt.element;(null==Rt?void 0:Rt.mark)===jt&&jt.emitGrammarEvent(at,lt,Rt)},this.initEvent()),null===(lt=this.initAnimate)||void 0===lt||lt.call(this,this.spec),!this.group){var $t=oj(this.spec.group,at);this.group=$t,$t&&$t.appendChild(this)}var Kt=this.group?this.group.getGroupGraphicItem():nt.defaultLayer,te=null!==(Lt=null===(Bt=null===(Rt=this.group)||void 0===Rt?void 0:Rt.children)||void 0===Bt?void 0:Bt.indexOf(this))&&void 0!==Lt?Lt:0;if(this.markType!==MH.group){if(!this.graphicItem){var ne=yj(this,MH.group,{"pickable":!1,"zIndex":null!==(Ht=this.spec.zIndex)&&void 0!==Ht?Ht:0,"overflow":this.spec.overflow});(this.spec.support3d||qH.includes(this.markType))&&ne.setMode("3d"),ne.name="".concat(this.id()||this.markType),this.graphicItem=ne}this.graphicParent=this.graphicItem,!Kt||this.graphicIndex===te&&this.graphicItem.parent===Kt||Kt.insertIntoKeepIdx(this.graphicItem,te)}else this.graphicParent=Kt,this.graphicParent.setAttributes({"overflow":this.spec.overflow});this.graphicIndex=te}},{"key":"update","value":function(nt){var at;if(this.emit(GH.BEFORE_MARK_UPDATE),this._context=this.spec.context,this.isUpdated=!0,this.renderContext.progressive||null===(at=this.updateAnimate)||void 0===at||at.call(this,nt),this.markType!==MH.group){if(j(nt.zIndex)||this.graphicItem.setAttribute("zIndex",nt.zIndex),j(nt.clip)||this.graphicItem.setAttribute("clip",nt.clip),!j(nt.clipPath)){var lt=X(nt.clipPath)?nt.clipPath:nt.clipPath(this.elements);lt&&lt.length?this.graphicItem.setAttribute("path",lt):this.graphicItem.setAttributes({"path":lt,"clip":!1})}j(nt.overflow)||this.graphicItem.setAttribute("overflow",nt.overflow),this.elementMap.forEach((function(nt){nt.updateGraphicItem()}))}else this.elementMap.forEach((function(nt){nt.updateGraphicItem()}));this.emit(GH.AFTER_MARK_UPDATE)}},{"key":"createElement","value":function(){return new Fj(this)}},{"key":"evaluateJoin","value":function(nt){var at,lt,Rt,Bt,Lt=this;this.needClear=!0;var Ht=lj(null!==(Rt=null!==(at=this.spec.key)&&void 0!==at?at:null===(lt=this.grammarSource)||void 0===lt?void 0:lt.getDataIDKey())&&void 0!==Rt?Rt:function(){return KH}),jt=lj(null!==(Bt=this.spec.groupBy)&&void 0!==Bt?Bt:function(){return KH}),$t=this.spec.sort,Kt=this.isCollectionMark(),te=new Set(this.elements.filter((function(nt){return nt.diffState===CH.enter}))),ne=[];this.differ.setCallback((function(nt,at,lt){var Rt,Bt,$t=nt;if(j(at))(Bt=Lt.elementMap.get($t))&&(Bt.diffState=CH.exit);else if(j(lt)){if((Bt=Lt.elementMap.has($t)?Lt.elementMap.get($t):Lt.createElement()).diffState===CH.exit){Bt.diffState=CH.enter;var re=null===(Rt=Lt.animate)||void 0===Rt?void 0:Rt.getElementAnimators(Bt,CH.exit);re&&re.forEach((function(nt){return nt.stop("start")}))}Bt.diffState=CH.enter;var ae=Kt?nt:jt(at[0]);Bt.updateData(ae,at,Ht),Lt.elementMap.set($t,Bt),ne.push(Bt)}else if(Bt=Lt.elementMap.get($t)){Bt.diffState=CH.update;var oe=Kt?nt:jt(at[0]);Bt.updateData(oe,at,Ht),ne.push(Bt)}te.delete(Bt)}));var re=null!=nt?nt:ZH;Kt?this.differ.setCurrentData(this._groupedData):this.differ.setCurrentData(kN(re,(function(nt){return"".concat(jt(nt),"-").concat(Ht(nt))}),void 0)),this.differ.doDiff(),te.forEach((function(nt){Lt.elementMap.delete(Kt?nt.groupKey:"".concat(nt.groupKey,"-").concat(nt.key)),nt.remove(),nt.release()})),this.elements=ne,$t&&this.elements.length>=2&&this.elements.sort((function(nt,at){return $t(nt.getDatum(),at.getDatum())}))}},{"key":"evaluateState","value":function(nt,at,lt){at&&nt.forEach((function(nt){nt.state(at,lt)}))}},{"key":"evaluateGroupEncode","value":function(nt,at,lt){if(this._groupedData&&at){var Rt={};return this._groupedData.keys.forEach((function(Bt){var Lt=nt.find((function(nt){return nt.groupKey===Bt}));Lt&&(Rt[Bt]=fj(at,Lt.items&&Lt.items[0]&&Lt.items[0].datum,Lt,lt))})),this._groupEncodeResult=Rt,Rt}}},{"key":"getChannelsFromConfig","value":function(nt){var at=this.spec;return j(at.interactive)?null:{"pickable":at.interactive}}},{"key":"evaluateEncode","value":function(nt,at,lt,Rt){var Bt=this,Lt=this.getChannelsFromConfig();if(at){this.emit(GH.BEFORE_ELEMENT_ENCODE,{"encoders":at,"parameters":lt},this);var Ht=Rt?null:this.evaluateGroupEncode(nt,at[wH.group],lt);nt.forEach((function(nt){Bt.markType===MH.glyph&&Bt._groupEncodeResult?nt.items.forEach((function(at){at.nextAttrs=Object.assign(at.nextAttrs,Lt,Bt._groupEncodeResult[nt.groupKey])})):(null==Ht?void 0:Ht[nt.groupKey])&&!Bt.isCollectionMark()?nt.items.forEach((function(at){at.nextAttrs=Object.assign(at.nextAttrs,Lt,Ht[nt.groupKey])})):Lt&&nt.items.forEach((function(nt){nt.nextAttrs=Object.assign(nt.nextAttrs,Lt)})),nt.encodeItems(nt.items,at,Bt._isReentered,lt),Bt.isCollectionMark()&&(null==Ht?void 0:Ht[nt.groupKey])&&N(Ht[nt.groupKey].defined)&&(nt.items.forEach((function(at){at.nextAttrs.defined=Ht[nt.groupKey].defined})),delete Ht[nt.groupKey].defined)})),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),nt,lt),nt.forEach((function(nt){nt.encodeGraphic(Bt.isCollectionMark()?null==Ht?void 0:Ht[nt.groupKey]:null)})),this.emit(GH.AFTER_ELEMENT_ENCODE,{"encoders":at,"parameters":lt},this)}else nt.forEach((function(nt){nt.initGraphicItem(Lt)}))}},{"key":"addGraphicItem","value":function(nt,at,lt){var Rt,Bt=null!=lt?lt:yj(this,this.markType,nt);if(Bt){if(null===(Rt=this.renderContext)||void 0===Rt?void 0:Rt.progressive){var Lt;if(this._groupedData){var Ht=this._groupedData.keys.indexOf(at);Ht>=0&&(Lt=this.graphicParent.getChildAt(Ht))}else Lt=this.graphicParent.at(0);this.isCollectionMark()?(Bt.incremental=1,Lt.appendChild(Bt)):Lt.incrementalAppendChild(Bt)}else this.graphicParent.appendChild(Bt);return Bt}}},{"key":"parseRenderContext","value":function(nt,at){var lt=this,Rt=this.markType!==MH.group&&this.spec.progressiveStep>0&&this.spec.progressiveThreshold>0&&this.spec.progressiveStep<this.spec.progressiveThreshold,Bt=this.spec.large&&this.spec.largeThreshold>0&&nt.length>=this.spec.largeThreshold;if(Rt){var Lt=this._groupedData;return Lt&&Lt.keys&&Lt.keys.some((function(nt){return Lt.data.get(nt).length>lt.spec.progressiveThreshold}))?{"large":Bt,"parameters":at,"progressive":{"data":nt,"step":this.spec.progressiveStep,"currentIndex":0,"totalStep":Lt.keys.reduce((function(nt,at){return Math.max(Math.ceil(Lt.data.get(at).length/lt.spec.progressiveStep),nt)}),1),"groupedData":Lt.data}}:{"large":Bt}}return{"large":Bt}}},{"key":"isProgressive","value":function(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}},{"key":"canAnimateAfterProgressive","value":function(){return this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.canAnimate()}},{"key":"isDoingProgressive","value":function(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}},{"key":"clearProgressive","value":function(){this.renderContext&&this.renderContext.progressive&&(this.elements=[],this.graphicParent.children.forEach((function(nt){nt.incrementalClearChild()})),this.graphicParent.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}},{"key":"restartProgressive","value":function(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}},{"key":"evaluateJoinProgressive","value":function(){var nt,at,lt,Rt=this,Bt=this.renderContext.progressive.currentIndex,Lt=lj(null!==(lt=null!==(nt=this.spec.key)&&void 0!==nt?nt:null===(at=this.grammarSource)||void 0===at?void 0:at.getDataIDKey())&&void 0!==lt?lt:function(){return KH}),Ht=[];if(this.isCollectionMark())return this._groupedData.keys.forEach((function(nt,at){var lt=Rt.renderContext.progressive.groupedData.get(nt),jt=Rt.renderContext.progressive.step,$t=lt.slice(Bt*jt,(Bt+1)*jt);if(0===Bt){var Kt=Rt.createElement();Kt.diffState=CH.enter,Kt.updateData(nt,$t,Lt),Ht.push(Kt)}else{var te=Rt.elements[at];te.updateData(nt,$t,Lt),Ht.push(te)}})),Ht;var jt={};return this._groupedData.keys.forEach((function(nt){var at=Rt.renderContext.progressive.groupedData.get(nt),lt=Rt.renderContext.progressive.step,$t=at.slice(Bt*lt,(Bt+1)*lt),Kt=[];$t.forEach((function(at){var lt=Rt.createElement();lt.diffState=CH.enter,lt.updateData(nt,[at],Lt),Kt.push(lt),Ht.push(lt)})),jt[nt]=Kt})),{"groupElements":jt,"elements":Ht}}},{"key":"evaluateEncodeProgressive","value":function(nt,at,lt){var Rt=this.renderContext.progressive.currentIndex;if(0===Rt){if(this.evaluateEncode(nt,at,lt),0===Rt&&this._groupEncodeResult&&!this.isCollectionMark()&&this.markType!==MH.glyph){var Bt=nt[0],Lt=Bt.getGraphicItem(),Ht=null==Lt?void 0:Lt.parent;Ht&&this._groupEncodeResult[Bt.groupKey]&&Ht.setTheme({"common":this._groupEncodeResult[Bt.groupKey]})}}else this.evaluateEncode(nt,at,lt,!0)}},{"key":"evaluateProgressive","value":function(){var nt,at,lt,Rt=this;if(null===(nt=this.renderContext)||void 0===nt?void 0:nt.beforeTransformProgressive){var Bt=this.renderContext.beforeTransformProgressive;Bt.progressiveRun();var Lt=Bt.output();if(Bt.canAnimate){if(Bt.unfinished())return;this.evaluateGroup(Lt)}return this.emit(GH.BEFORE_MARK_JOIN),this.evaluateJoin(Lt),this.emit(GH.AFTER_MARK_JOIN),this.emit(GH.BEFORE_MARK_STATE),this.evaluateState(this.elements,this.spec.state,this.renderContext.parameters),this.emit(GH.AFTER_MARK_STATE),this.emit(GH.BEFORE_MARK_ENCODE),this.evaluateEncode(this.elements,this._getEncoders(),this.renderContext.parameters),void this.emit(GH.AFTER_MARK_ENCODE)}if(null===(at=this.renderContext)||void 0===at?void 0:at.progressive){var Ht=this.renderContext.parameters;this.emit(GH.BEFORE_MARK_JOIN);var jt=this.evaluateJoinProgressive(),$t=Array.isArray(jt)?jt:jt.elements;if(this.emit(GH.AFTER_MARK_JOIN),0===this.renderContext.progressive.currentIndex?(this.graphicParent.removeAllChild(),this._groupedData.keys.forEach((function(nt){var at=yj(Rt,MH.group,{"pickable":!1,"zIndex":Rt.spec.zIndex});at.incremental=Rt.renderContext.progressive.step,Rt.graphicParent.appendChild(at)})),this.elements=$t):this.elements=this.elements.concat($t),this.emit(GH.BEFORE_MARK_STATE),this.evaluateState($t,this.spec.state,Ht),this.emit(GH.AFTER_MARK_STATE),this.emit(GH.BEFORE_MARK_ENCODE),Array.isArray(jt))this.evaluateEncodeProgressive($t,this._getEncoders(),Ht);else{var Kt=jt.groupElements;Object.keys(Kt).forEach((function(nt){Rt.evaluateEncodeProgressive(Kt[nt],Rt._getEncoders(),Ht)}))}this.emit(GH.AFTER_MARK_ENCODE);var te=null===(lt=this._getTransformsAfterEncode())||void 0===lt?void 0:lt.filter((function(nt){return!0===nt.canProgressive}));(null==te?void 0:te.length)&&this.evaluateTransform(te,this.elements,Ht),this.renderContext.progressive.currentIndex+=1}}},{"key":"isLargeMode","value":function(){return this.renderContext&&this.renderContext.large}},{"key":"cleanExitElements","value":function(){var nt=this;this.elementMap.forEach((function(at,lt){at.diffState!==CH.exit||at.isReserved||(nt.elementMap.delete(lt),at.remove(),at.release())}))}},{"key":"getGroupGraphicItem","value":function(){if(this.elements&&this.elements[0]&&this.elements[0].getGraphicItem)return this.elements[0].getGraphicItem()}},{"key":"getBounds","value":function(){var nt;return this.graphicItem?this.graphicItem.AABBBounds:null===(nt=this.getGroupGraphicItem())||void 0===nt?void 0:nt.AABBBounds}},{"key":"getMorphConfig","value":function(){var nt;return{"morph":null!==(nt=this.spec.morph)&&void 0!==nt&&nt,"morphKey":this.spec.morphKey,"morphElementKey":this.spec.morphElementKey}}},{"key":"getAttributeTransforms","value":function(){var nt;return null!==(nt=this.spec.attributeTransforms)&&void 0!==nt?nt:Oj[this.markType]}},{"key":"getContext","value":function(){return this._context}},{"key":"needSkipBeforeLayout","value":function(){var nt,at;if(!0===(null===(nt=this.spec.layout)||void 0===nt?void 0:nt.skipBeforeLayouted))return!0;for(var lt=this.group;lt;){if(!0===(null===(at=lt.getSpec().layout)||void 0===at?void 0:at.skipBeforeLayouted))return!0;lt=lt.group}return!1}},{"key":"initEvent","value":function(){if(this._delegateEvent){var nt=this.view.renderer.stage();nt&&nt.on("*",this._delegateEvent)}}},{"key":"releaseEvent","value":function(){if(this._delegateEvent){var nt=this.view.renderer.stage();nt&&nt.off("*",this._delegateEvent)}}},{"key":"clear","value":function(){var nt;this.releaseEvent(),this.transforms=null,this.elementMap=null,this.elements=null,this.graphicItem=null,this.animate=null,null===(nt=this.group)||void 0===nt||nt.removeChild(this),this.group=null,y(e,"clear",this,3)([])}},{"key":"prepareRelease","value":function(){var nt;this.differ.setCurrentData(null),null===(nt=this.animate)||void 0===nt||nt.stop(),this.elementMap.forEach((function(nt){return nt.diffState=CH.exit})),this._finalParameters=this.parameters()}},{"key":"release","value":function(){this.releaseEvent(),this.elements.forEach((function(nt){return nt.release()})),this.differ=null,this.elements=[],this.elementMap.clear(),this._finalParameters=null,this.animate&&this.animate.release(),this.graphicItem&&mj(this.graphicItem),this.detachAll(),y(e,"release",this,3)([])}}])}(lN),IN=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,MH.group,at])).children=[],lt}return h(e,nt),o(e,[{"key":"parseRenderContext","value":function(){return{"large":!1}}},{"key":"appendChild","value":function(nt){return this.children.push(nt),this}},{"key":"removeChild","value":function(nt){return this.children=this.children.filter((function(at){return at!==nt})),this}},{"key":"includesChild","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!this.children.includes(nt)||!!at&&this.children.some((function(at){return at.markType===MH.group&&at.includesChild(nt,!0)}))}},{"key":"updateLayoutChildren","value":function(){return this.children.length?(this.layoutChildren||(this.layoutChildren=[]),this.layoutChildren=this.children.filter((function(nt){return nt.needLayout()})),this):this}},{"key":"getAttributeTransforms","value":function(){return Oj.rect}},{"key":"evaluateJoin","value":function(nt){if(!this.elements.length){var at=this.createElement();at.updateData(KH,ZH,(function(){return""})),this.elements=[at],this.elementMap.set(KH,at)}}},{"key":"getChannelsFromConfig","value":function(nt){var at=this.spec,lt={};if(j(at.clip)||(lt.clip=at.clip),j(at.zIndex)||(lt.zIndex=at.zIndex),!j(at.clipPath)){var Rt=H(at.clipPath)?at.clipPath([nt]):at.clipPath;Rt&&Rt.length?lt.path=Rt:(lt.path=null,lt.clip=!1)}return j(at.interactive)||(lt.pickable=at.interactive),lt}},{"key":"evaluateGroupEncode","value":function(nt,at,lt){var Rt,Bt=this.elements[0],Lt={};return pj(Bt,[Object.assign({},null===(Rt=Bt.items)||void 0===Rt?void 0:Rt[0],{"nextAttrs":Lt})],at,lt),this._groupEncodeResult=Lt,Lt}},{"key":"evaluateEncode","value":function(nt,at,lt,Rt){var Bt=this,Lt=this.getChannelsFromConfig();if(at){this.emit(GH.BEFORE_ELEMENT_ENCODE,{"encoders":at,"parameters":lt},this);var Ht=Rt?null:this.evaluateGroupEncode(nt,at[wH.group],lt);nt.forEach((function(nt){nt.items.forEach((function(nt){nt.nextAttrs=Object.assign(nt.nextAttrs,Lt,Ht)})),nt.encodeItems(nt.items,at,Bt._isReentered,lt)})),this._isReentered=!1,this.evaluateTransform(this._getTransformsAfterEncodeItems(),nt,lt),nt.forEach((function(nt){nt.encodeGraphic()})),this.emit(GH.AFTER_ELEMENT_ENCODE,{"encoders":at,"parameters":lt},this)}else nt.forEach((function(nt){nt.initGraphicItem(Lt)}))}},{"key":"addGraphicItem","value":function(nt,at,lt){var Rt=null!=lt?lt:yj(this,this.markType,nt);if(Rt)return this.emit(GH.BEFORE_ADD_VRENDER_MARK,{"graphicItem":Rt}),Rt.name="".concat(this.id()||this.markType),this.graphicParent.insertIntoKeepIdx(Rt,this.graphicIndex),this.emit(GH.AFTER_ADD_VRENDER_MARK,{"graphicItem":Rt}),Rt}}])}(RN),BN=o((function t(nt,at){r(this,t),this._grammars={"signal":[],"data":[],"scale":[],"coordinate":[],"mark":[],"customized":[]},this._grammarMap={"signal":{},"data":{},"scale":{},"coordinate":{},"mark":{},"customized":{}},this._size=0,this._mapKey=Y(nt)?function(at){return at[nt]}:nt,this._warning=at}),[{"key":"record","value":function(nt){var at,lt,Rt=nt.grammarType,Bt=this._mapKey(nt);return this._grammarMap[Rt]?(this._grammars[Rt].push(nt),j(Bt)||(this._grammarMap[Rt][Bt]?null===(at=this._warning)||void 0===at||at.call(this,Bt,nt):this._grammarMap[Rt][Bt]=nt)):(this._grammars.customized.push(nt),j(Bt)||(this._grammarMap.customized[Bt]?null===(lt=this._warning)||void 0===lt||lt.call(this,Bt,nt):this._grammarMap.customized[Bt]=nt)),this._size+=1,this}},{"key":"unrecord","value":function(nt){var at=nt.grammarType,lt=this._mapKey(nt);return this._grammarMap[at]?(this._grammars[at]=this._grammars[at].filter((function(at){return at!==nt})),j(lt)||this._grammarMap[at][lt]!==nt||delete this._grammarMap[at][lt]):(this._grammars.customized=this._grammars.customized.filter((function(at){return at!==nt})),j(lt)||this._grammarMap.customized[lt]!==nt||delete this._grammarMap.customized[lt]),this._size-=1,this}},{"key":"size","value":function(){return this._size}},{"key":"getSignal","value":function(nt){var at;return null!==(at=this._grammarMap.signal[nt])&&void 0!==at?at:null}},{"key":"getData","value":function(nt){var at;return null!==(at=this._grammarMap.data[nt])&&void 0!==at?at:null}},{"key":"getScale","value":function(nt){var at;return null!==(at=this._grammarMap.scale[nt])&&void 0!==at?at:null}},{"key":"getCoordinate","value":function(nt){var at;return null!==(at=this._grammarMap.coordinate[nt])&&void 0!==at?at:null}},{"key":"getMark","value":function(nt){var at;return null!==(at=this._grammarMap.mark[nt])&&void 0!==at?at:null}},{"key":"getCustomized","value":function(nt){var at;return null!==(at=this._grammarMap.customized[nt])&&void 0!==at?at:null}},{"key":"getGrammar","value":function(nt){return this._grammarMap.data[nt]?this._grammarMap.data[nt]:this._grammarMap.signal[nt]?this._grammarMap.signal[nt]:this._grammarMap.scale[nt]?this._grammarMap.scale[nt]:this._grammarMap.coordinate[nt]?this._grammarMap.coordinate[nt]:this._grammarMap.mark[nt]?this._grammarMap.mark[nt]:this._grammarMap.customized[nt]?this._grammarMap.customized[nt]:null}},{"key":"getAllSignals","value":function(){return this._grammars.signal}},{"key":"getAllData","value":function(){return this._grammars.data}},{"key":"getAllScales","value":function(){return this._grammars.scale}},{"key":"getAllCoordinates","value":function(){return this._grammars.coordinate}},{"key":"getAllMarks","value":function(){return this._grammars.mark}},{"key":"getAllCustomized","value":function(){return this._grammars.customized}},{"key":"traverse","value":function(nt){var at;Object.values(null!==(at=this._grammars)&&void 0!==at?at:{}).forEach((function(at){return(null!=at?at:[]).forEach((function(at){nt.call(null,at)}))}))}},{"key":"find","value":function(nt){var at=null;return this.traverse((function(lt){return!0===nt.call(null,lt)&&(at=lt,!0)})),at}},{"key":"filter","value":function(nt){var at=[];return this.traverse((function(lt){!0===nt.call(null,lt)&&at.push(lt)})),at}},{"key":"clear","value":function(){this._size=0,this._grammars={"signal":[],"data":[],"scale":[],"coordinate":[],"mark":[],"customized":[]},this._grammarMap={"signal":{},"data":{},"scale":{},"coordinate":{},"mark":{},"customized":{}}}},{"key":"release","value":function(){this._size=0,this._grammars=null,this._grammarMap=null}}]),ON=function(nt){function e(){var nt;return r(this,e),(nt=n(this,e,arguments))._markNodes=[],nt}return h(e,nt),o(e,[{"key":"record","value":function(nt){if(y(e,"record",this,3)([nt]),"mark"===nt.grammarType){var at=nt,lt={"mark":at,"parent":null,"children":[]};this._markNodes.forEach((function(nt){var Rt=nt.mark;Rt.markType===MH.group&&Rt.includesChild(at,!1)?(nt.children.push(lt),lt.parent=nt):at.markType===MH.group&&at.includesChild(Rt,!1)&&(lt.children.push(nt),nt.parent=lt)})),this._markNodes.push(lt)}return this}},{"key":"unrecord","value":function(nt){if(y(e,"unrecord",this,3)([nt]),"mark"===nt.grammarType){var at=nt,lt=this._markNodes.find((function(nt){return nt.mark===at}));this._markNodes.forEach((function(nt){nt.mark.markType===MH.group&&nt.children.includes(lt)?(nt.children=nt.children.filter((function(nt){return nt!==lt})),lt.parent=null):at.markType===MH.group&&lt.children.includes(nt)&&(lt.children=lt.children.filter((function(at){return at!==nt})),nt.parent=null)})),this._markNodes=this._markNodes.filter((function(nt){return nt!==lt}))}return this}},{"key":"getAllMarkNodes","value":function(){return this._markNodes}},{"key":"clear","value":function(){y(e,"clear",this,3)([]),this._markNodes=[]}},{"key":"release","value":function(){y(e,"release",this,3)([]),this._markNodes=null}}])}(BN),DN=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"addGraphicItem","value":function(nt,at){var lt=nt&&nt.limitAttrs,Rt=yj(this,lt&&("rich"===lt.textType||lt.text&&"rich"===lt.text.type)?MH.richtext:MH.text,nt);return y(e,"addGraphicItem",this,3)([nt,at,Rt])}},{"key":"release","value":function(){y(e,"release",this,3)([])}}])}(RN);DN.markType=MH.text;var LN={"axis":{"label":{"visible":!0,"inside":!1,"space":4,"style":{"fontSize":12,"fill":"#89909d","fontWeight":"normal","fillOpacity":1}},"tick":{"visible":!0,"inside":!1,"alignWithLabel":!0,"length":4,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"subTick":{"visible":!1,"inside":!1,"count":4,"length":2,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"line":{"visible":!0,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"items":[],"start":{"x":0,"y":0},"end":{"x":100,"y":0},"x":0,"y":0},"circleAxis":{"title":{"space":4,"padding":[0,0,0,0],"textStyle":{"fontSize":12,"fill":"#333333","fontWeight":"normal","fillOpacity":1},"text":"theta"},"label":{"visible":!0,"inside":!1,"space":4,"style":{"fontSize":12,"fill":"#6F6F6F","fontWeight":"normal","fillOpacity":1}},"tick":{"visible":!0,"inside":!1,"alignWithLabel":!0,"length":4,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"subTick":{"visible":!1,"inside":!1,"count":4,"length":2,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"line":{"visible":!0,"style":{"lineWidth":1,"stroke":"#D9DDE4","strokeOpacity":1}},"items":[],"startAngle":0,"endAngle":2*Math.PI,"radius":100,"innerRadius":0,"center":{"x":0,"y":0},"x":0,"y":0},"grid":{"style":{"stroke":"#f1f2f5"}},"circleGrid":{"style":{"stroke":"#f1f2f5"}},"discreteLegend":{"layout":"vertical","title":{"align":"start","space":12,"textStyle":{"fontSize":12,"fontWeight":"bold","fill":"#2C3542"}},"item":{"spaceCol":10,"spaceRow":10,"shape":{"space":4,"style":{"size":10,"cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"fill":"#D8D8D8","stroke":"#D8D8D8","fillOpacity":.5}}},"label":{"space":4,"style":{"fontSize":12,"fill":"black","cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"fill":"#D8D8D8","fillOpacity":.5}}},"value":{"alignRight":!1,"style":{"fontSize":12,"fill":"#ccc","cursor":"pointer"},"state":{"selectedHover":{"opacity":.85},"unSelected":{"fill":"#D8D8D8"}}},"background":{"style":{"cursor":"pointer"},"state":{"selectedHover":{"fillOpacity":.7,"fill":"gray"},"unSelectedHover":{"fillOpacity":.2,"fill":"gray"}}},"focus":!1,"focusIconStyle":{"size":10,"fill":"#333","cursor":"pointer"},"visible":!0,"padding":{"top":2,"bottom":2,"left":2,"right":2}},"autoPage":!0,"pager":{"space":12,"handler":{"style":{"size":10},"space":4}},"hover":!0,"select":!0,"selectMode":"multiple","allowAllCanceled":!1,"items":[{"index":0,"id":"","label":"","shape":{"fill":"#6690F2","stroke":"#6690F2","symbolType":"circle"}}]},"colorLegend":{"title":{"visible":!1,"text":""},"colors":[],"layout":"horizontal","railWidth":200,"railHeight":8,"railStyle":{"cornerRadius":5}},"sizeLegend":{"title":{"visible":!1,"text":""},"trackStyle":{"fill":"#ccc"},"layout":"horizontal","align":"bottom","railWidth":200,"railHeight":6,"min":0,"max":1,"value":[0,1]},"lineCrosshair":{"start":{"x":0,"y":0},"end":{"x":0,"y":0}},"rectCrosshair":{"start":{"x":0,"y":0},"end":{"x":0,"y":0},"rectStyle":{"width":10,"height":10}},"sectorCrosshair":{"center":{"x":0,"y":0},"radius":100,"startAngle":0,"endAngle":Math.PI/6},"circleCrosshair":{"center":{"x":0,"y":0},"radius":100,"startAngle":0,"endAngle":2*Math.PI},"polygonCrosshair":{"center":{"x":0,"y":0},"radius":100,"startAngle":0,"endAngle":2*Math.PI,"sides":6},"slider":{"layout":"horizontal","railWidth":200,"railHeight":10,"railStyle":{"cornerRadius":5},"range":{"draggableTrack":!0},"startText":{"visible":!0,"text":"","space":8},"endText":{"visible":!0,"text":"","space":8},"min":0,"max":1,"value":[0,1]},"dataLabel":{"size":{"width":400,"height":400},"dataLabels":[]},"pointLabel":{"data":[{"text":"","fill":"#606773","data":{}}],"overlap":{"avoidBaseMark":!1,"clampForce":!1,"size":{"width":1e3,"height":1e3}},"smartInvert":!1},"lineLabel":{"type":"line","data":[{"text":"","data":{}}],"position":"start","overlap":{"avoidBaseMark":!1,"clampForce":!1,"size":{"width":1e3,"height":1e3}},"smartInvert":!1},"areaLabel":{"type":"area","data":[{"text":"","data":{}}],"position":"end","overlap":{"avoidBaseMark":!1,"clampForce":!1,"size":{"width":1e3,"height":1e3}},"smartInvert":!1},"rectLabel":{"type":"rect","data":[{"text":"","fill":"#606773","data":{}}],"position":"top","overlap":{"size":{"width":1e3,"height":1e3},"strategy":[{"type":"position"}]},"smartInvert":!1},"symbolLabel":{"type":"symbol","data":[{"text":"","fill":"#606773","data":{}}],"position":"top","overlap":{"avoidBaseMark":!0,"size":{"width":1e3,"height":1e3},"strategy":[{"type":"position"}]},"smartInvert":!1},"arcLabel":{"type":"arc","data":[{"text":"","fill":"#606773","data":{}}],"width":800,"height":600,"position":"outside","zIndex":302},"lineDataLabel":{"type":"line-data","data":[{"text":""}],"position":"top","overlap":{"avoidBaseMark":!1,"clampForce":!1},"smartInvert":!1},"datazoom":{"orient":"bottom","showDetail":"auto","brushSelect":!0,"start":0,"end":1,"position":{"x":0,"y":0},"size":{"width":500,"height":40},"previewData":[]},"continuousPlayer":{},"discretePlayer":{},"tooltip":{},"title":{"textStyle":{"fill":"#21252c"},"subtextStyle":{"fill":"#606773"}},"scrollbar":{"width":12,"height":12,"padding":[2,2],"railStyle":{"fill":"rgba(0, 0, 0, .1)"}}},FN={"symbol":{"shape":"circle","size":8},"text":{"fontSize":14,"fill":"#000000"}},zN=Object.assign({},LN);zN.axis=Object.assign({},zN.axis,{"label":{"style":{"fill":"#bbbdc3"}},"line":{"style":{"stroke":"#4b4f54"}},"tick":{"style":{"stroke":"#4b4f54"}},"subTick":{"style":{"stroke":"#4b4f54"}}}),zN.circleAxis=Object.assign({},zN.circleAxis,{"label":{"style":{"fill":"#bbbdc3"}},"line":{"style":{"stroke":"#4b4f54"}},"tick":{"style":{"stroke":"#4b4f54"}},"subTick":{"style":{"stroke":"#4b4f54"}}}),zN.grid=Object.assign({},zN.grid,{"style":{"stroke":"#404349"}}),zN.circleGrid=Object.assign({},zN.circleGrid,{"style":{"stroke":"#404349"}}),zN.rectLabel=Object.assign({},zN.rectLabel,{"data":[{"text":"","fill":"#888c93","data":{}}]}),zN.lineLabel=Object.assign({},zN.lineLabel,{"data":[{"text":"","fill":"#888c93","data":{}}]}),zN.symbolLabel=Object.assign({},zN.symbolLabel,{"data":[{"text":"","fill":"#888c93","data":{}}]}),zN.title=Object.assign({},zN.title,{"textStyle":{"fill":"#fdfdfd"},"subtextStyle":{"fill":"#888c93"}});var GN={"name":"dark","padding":5,"background":"#202226","palette":{"default":["#5383F4","#7BCF8E","#FF9D2C","#FFDB26","#7568D9","#80D8FB","#1857A3","#CAB0E8","#FF8867","#B9E493","#2CB4A8","#B9E4E3"]},"marks":FN,"components":zN},$N={"name":"default","padding":5,"palette":{"default":["#6690F2","#70D6A3","#B4E6E2","#63B5FC","#FF8F62","#FFDC83","#BCC5FD","#A29BFE","#63C4C7","#F68484"]},"marks":FN,"components":LN},QN=function(){function t(){r(this,t)}return o(t,null,[{"key":"registerTheme","value":function(nt,at){nt&&t._themes.set(nt,at)}},{"key":"unregisterTheme","value":function(nt){t._themes.delete(nt)}},{"key":"getTheme","value":function(nt){return t._themes.get(nt)}},{"key":"getDefaultTheme","value":function(){return t.getTheme("default")}}])}();QN._themes=new Map,QN.registerTheme("default",$N),QN.registerTheme("dark",GN);var aV=function(nt){function e(nt,at,lt,Rt){var Bt;return r(this,e),(Bt=n(this,e,[nt,MH.component,lt]))._componentDatum=l({},KH,0),Bt.componentType=at,Bt.spec.type="component",Bt.spec.componentType=at,Bt.mode=Rt,Bt._updateComponentEncoders(),Bt}return h(e,nt),o(e,[{"key":"configureComponent","value":function(nt){return this.spec.componentConfig=nt,this.commit(),this}},{"key":"addGraphicItem","value":function(nt,at,lt){var Rt=null!=lt?lt:Pj.createGraphicComponent(this.componentType,nt,{"mode":this.mode,"skipDefault":this.spec.skipTheme});return Rt&&(this.emit(GH.BEFORE_ADD_VRENDER_MARK,{"graphicItem":Rt}),this.graphicParent.appendChild(Rt),this.emit(GH.AFTER_ADD_VRENDER_MARK,{"graphicItem":Rt})),Rt}},{"key":"join","value":function(nt){return y(e,"join",this,3)([nt,KH])}},{"key":"encodeState","value":function(nt,at,lt){return y(e,"encodeState",this,3)([nt,at,lt]),this._updateComponentEncoders(),this}},{"key":"parseRenderContext","value":function(){return{"large":!1}}},{"key":"_prepareRejoin","value":function(){this._componentDatum[KH]+=1}},{"key":"evaluateJoin","value":function(nt){return this.spec.key=KH,nt?(nt[KH]=this._componentDatum[KH],this._componentDatum=nt):this._componentDatum=l({},KH,this._componentDatum[KH]),y(e,"evaluateJoin",this,3)([[this._componentDatum]])}},{"key":"_updateComponentEncoders","value":function(){this._encoders=this.spec.encode}},{"key":"_getEncoders","value":function(){var nt;return null!==(nt=this._encoders)&&void 0!==nt?nt:{}}}])}(RN),oV=Symbol.for("key"),uV=o((function t(){r(this,t)}),[{"key":"diffGrammar","value":function(nt,at){return function(nt,at,lt){var Rt={"enter":[],"exit":[],"update":[]},Bt=new PN(nt,lt);return Bt.setCallback((function(nt,at,lt){j(at)?Rt.exit.push({"prev":lt[0]}):j(lt)?Rt.enter.push({"next":at[0]}):Rt.update.push({"next":at[0],"prev":lt[0]})})),Bt.setCurrentData(kN(at,lt)),Bt.doDiff(),Rt}(nt,at,(function(nt){var at;return null!==(at=nt.id())&&void 0!==at?at:Symbol()}))}},{"key":"diffMark","value":function(nt,at,lt){var Rt={"enter":[],"exit":[],"update":[]},Bt=[],Lt=[];nt.forEach((function(nt){nt.markType!==MH.group&&(lt.morph&&nt.getMorphConfig().morph||lt.morphAll||lt.reuse)?Bt.push(nt):Rt.exit.push({"prev":[nt]})})),at.forEach((function(nt){nt.markType!==MH.group&&(lt.morph&&nt.getMorphConfig().morph||lt.morphAll||lt.reuse)?Lt.push(nt):Rt.enter.push({"next":[nt]})}));var Ht=this.diffUpdateByGroup(Bt,Lt,(function(nt){return nt.getMorphConfig().morphKey}),(function(nt){return nt.getMorphConfig().morphKey}));Bt=Ht.prev,Lt=Ht.next,Rt.update=Rt.update.concat(Ht.update);var jt=this.diffUpdateByGroup(Bt,Lt,(function(nt){return nt.id()}),(function(nt){return nt.id()}));Bt=jt.prev,Lt=jt.next,Rt.update=Rt.update.concat(jt.update);var $t=kN(Bt,(function(nt){var at,lt;return null===(lt=null===(at=nt.group)||void 0===at?void 0:at.id)||void 0===lt?void 0:lt.call(at)})),Kt=kN(Lt,(function(nt){var at,lt;return null===(lt=null===(at=nt.group)||void 0===at?void 0:at.id)||void 0===lt?void 0:lt.call(at)}));return Object.keys(Kt).forEach((function(nt){var at=$t.data.get(nt),lt=Kt.data.get(nt);if(at&&lt){for(var Ht=0;Ht<Math.max(at.length,lt.length);Ht+=1){var jt=at[Ht],te=lt[Ht];jt&&te?Rt.update.push({"prev":[jt],"next":[te]}):jt?Rt.exit.push({"prev":[jt]}):te&&Rt.enter.push({"next":[te]})}Bt=Bt.filter((function(nt){return!at.includes(nt)})),Lt=Lt.filter((function(nt){return!lt.includes(nt)}))}})),Bt.forEach((function(nt){return Rt.exit.push({"prev":[nt]})})),Lt.forEach((function(nt){return Rt.enter.push({"next":[nt]})})),Rt}},{"key":"diffUpdateByGroup","value":function(nt,at,lt,Rt){var Bt=kN(nt,(function(nt){var at;return null!==(at=lt(nt))&&void 0!==at?at:oV})),Lt=kN(at,(function(nt){var at;return null!==(at=Rt(nt))&&void 0!==at?at:oV})),Ht=nt,jt=at,$t=[];return Lt.keys.forEach((function(nt){if(nt!==oV){var at=Bt.data.get(nt),lt=Lt.data.get(nt);at&&lt&&($t.push({"prev":at,"next":lt}),Ht=Ht.filter((function(nt){return!at.includes(nt)})),jt=jt.filter((function(nt){return!lt.includes(nt)})))}})),{"prev":Ht,"next":jt,"update":$t}}}]),cV=function(nt){function e(){var nt,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,e),(nt=n(this,e))._observer=null,nt._onResize=qt((function(){var at=nt._getContainerSize();at&&nt.resize(at.width,at.height)}),100),nt.delegateEvent=function(at,lt){var Rt=yN(i(nt),at,0,gN);nt.emit(lt,Rt,at.element)},nt.handleProgressiveFrame=function(){nt._progressiveMarks.length&&nt._progressiveMarks.forEach((function(nt){nt.isDoingProgressive()&&nt.evaluateProgressive()})),nt.doPreProgressive()},nt._config=lt,nt._options=Object.assign({"mode":"browser"},at),nt.initialize(),nt}return h(e,nt),o(e,[{"key":"getGrammarById","value":function(nt){return this.grammars.getGrammar(nt)}},{"key":"getSignalById","value":function(nt){return this.grammars.getSignal(nt)}},{"key":"getDataById","value":function(nt){return this.grammars.getData(nt)}},{"key":"getScaleById","value":function(nt){return this.grammars.getScale(nt)}},{"key":"getCoordinateById","value":function(nt){return this.grammars.getCoordinate(nt)}},{"key":"getMarkById","value":function(nt){return this.grammars.getMark(nt)}},{"key":"getCustomizedById","value":function(nt){return this.grammars.getCustomized(nt)}},{"key":"getGrammarsByName","value":function(nt){return this.grammars.filter((function(at){return at.name()===nt}))}},{"key":"getGrammarsByType","value":function(nt){return this.grammars.filter((function(at){return at.grammarType===nt}))}},{"key":"getMarksByType","value":function(nt){return this.grammars.getAllMarks().filter((function(at){return at.markType===nt}))}},{"key":"getMarksByName","value":function(nt){return this.grammars.getAllMarks().filter((function(at){return at.name()===nt}))}},{"key":"getMarksBySelector","value":function(nt){var at=this;if(!nt)return null;var lt=xt(nt),Rt=[];return lt.forEach((function(nt){if(sj(nt))Rt.push(nt);else if("#"!==nt[0]){var lt="@"===nt[0]?at.getMarksByName(nt.slice(1)):MH[nt]?at.getMarksByType(nt):null;lt&&lt.length&&lt.forEach((function(nt){Rt.push(nt)}))}else{var Bt=at.getMarkById(nt.slice(1));Bt&&Rt.push(Bt)}})),Rt}},{"key":"updateSignal","value":function(nt,at){Y(nt)&&(nt=this.getSignalById(nt)),nt.set(at),this.commit(nt)}},{"key":"signal","value":function(nt,at){var lt=new MN(this);return arguments.length>=1&&lt.value(nt),arguments.length>=2&&lt.update(at),this.grammars.record(lt),this._dataflow.add(lt),lt}},{"key":"data","value":function(nt){var at=new cN(this,nt);return this.grammars.record(at),this._dataflow.add(at),at}},{"key":"scale","value":function(nt){var at=Pj.createGrammar("scale",this,nt);return at&&(this.grammars.record(at),this._dataflow.add(at)),at}},{"key":"coordinate","value":function(nt){var at=Pj.createGrammar("coordinate",this,nt);return at&&(this.grammars.record(at),this._dataflow.add(at)),at}},{"key":"mark","value":function(nt,at,lt){var Rt,Bt=Y(at)?this.getMarkById(at):at;switch(nt){case MH.group:Rt=new IN(this,Bt);break;case MH.glyph:var Lt=Pj.getMark(MH.glyph);Lt&&(Rt=new Lt(this,null==lt?void 0:lt.glyphType,Bt));break;case MH.component:Rt=Pj.hasComponent(null==lt?void 0:lt.componentType)?Pj.createComponent(null==lt?void 0:lt.componentType,this,Bt,null==lt?void 0:lt.mode):new aV(this,null==lt?void 0:lt.componentType,Bt,null==lt?void 0:lt.mode);break;case MH.text:Rt=new DN(this,nt,Bt);break;default:Rt=Pj.hasMark(nt)?Pj.createMark(nt,this,Bt):new RN(this,nt,Bt)}return this.grammars.record(Rt),this._dataflow.add(Rt),Rt}},{"key":"group","value":function(nt){return this.mark(MH.group,nt)}},{"key":"glyph","value":function(nt,at){return this.mark(MH.glyph,at,{"glyphType":nt})}},{"key":"component","value":function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2d";return this.mark(MH.component,at,{"componentType":nt,"mode":lt})}},{"key":"axis","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2d";return this.mark(MH.component,nt,{"componentType":TH.axis,"mode":at})}},{"key":"grid","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2d";return this.mark(MH.component,nt,{"componentType":TH.grid,"mode":at})}},{"key":"legend","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.legend})}},{"key":"slider","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.slider})}},{"key":"label","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.label})}},{"key":"datazoom","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.datazoom})}},{"key":"player","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.player})}},{"key":"title","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.title})}},{"key":"scrollbar","value":function(nt){return this.mark(MH.component,nt,{"componentType":TH.scrollbar})}},{"key":"customized","value":function(nt,at){var lt=Pj.createGrammar(nt,this,null==at?void 0:at.type);if(lt)return lt.parse(at),this.grammars.record(lt),this._dataflow.add(lt),lt}},{"key":"addGrammar","value":function(nt){return this.grammars.find((function(at){return at.uid===nt.uid}))||(this.grammars.record(nt),this._dataflow.add(nt),nt.parse(nt.getSpec()),this._needBuildLayoutTree=!0),this}},{"key":"removeGrammar","value":function(nt){var at=Y(nt)?this.getGrammarById(nt):nt;return at&&this.grammars.find((function(nt){return nt.uid===at.uid}))?("mark"===at.grammarType&&at.prepareRelease(),this._cachedGrammars.record(at),this._dataflow.remove(at),this.grammars.unrecord(at),this._needBuildLayoutTree=!0,this):this}},{"key":"removeAllGrammars","value":function(){var nt=this;return this.grammars.traverse((function(at){"signal"===at.grammarType&&EN.includes(at.id())||"mark"===at.grammarType&&"root"===at.id()||nt.removeGrammar(at)})),this}},{"key":"removeAllGraphicItems","value":function(){return this.traverseMarkTree((function(nt){nt.graphicItem&&(mj(nt.graphicItem),nt.elementMap.forEach((function(nt){nt.resetGraphicItem()})),nt.graphicItem=null)})),this}},{"key":"parseSpec","value":function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt=this;if(this.emit(GH.BEFORE_PARSE_VIEW),this._spec=nt,function(nt){var at,i=function(nt,at){var lt,Rt;nt.group=at;var Bt=null!==(lt=nt.id)&&void 0!==lt?lt:"VGRAMMAR_MARK_"+ ++TN;nt.id=Bt,(null!==(Rt=nt.marks)&&void 0!==Rt?Rt:[]).forEach((function(nt){return i(nt,Bt)}))};(null!==(at=nt.marks)&&void 0!==at?at:[]).forEach((function(nt){return i(nt,"root")}))}(nt),nt.theme?this.theme(nt.theme):this.theme(QN.getDefaultTheme()),nt.width&&this.width(nt.width),nt.height&&this.height(nt.height),this.padding(null!==(lt=null!==(at=nt.padding)&&void 0!==at?at:this._options.padding)&&void 0!==lt?lt:this._theme.padding),!this.width()||!this.height()){var te=this._getContainerSize();te&&(this.updateSignal(mN,te.width),this.updateSignal(_N,te.height))}(null===(Rt=nt.signals)||void 0===Rt?void 0:Rt.length)&&nt.signals.forEach((function(nt){Kt.signal().parse(nt)})),(null===(Bt=nt.data)||void 0===Bt?void 0:Bt.length)&&nt.data.forEach((function(nt){Kt.data(null).parse(nt)})),(null===(Lt=nt.coordinates)||void 0===Lt?void 0:Lt.length)&&nt.coordinates.forEach((function(nt){var at;null===(at=Kt.coordinate(nt.type))||void 0===at||at.parse(nt)})),(null===(Ht=nt.scales)||void 0===Ht?void 0:Ht.length)&&nt.scales.forEach((function(nt){var at;null===(at=Kt.scale(nt.type))||void 0===at||at.parse(nt)}));var ne=Pj.getGrammars();return Object.keys(ne).forEach((function(at){var lt=ne[at].specKey;nt[lt]&&nt[lt].length&&nt[lt].forEach((function(nt){Kt.customized(at,nt)}))})),nt.marks&&nt.marks.length&&nt.marks.forEach((function(nt){Kt.parseMarkSpec(nt)})),nt.events&&nt.events.length&&nt.events.forEach((function(nt){var at;null===(at=Kt.event)||void 0===at||at.call(Kt,nt)})),nt.interactions&&nt.interactions.length&&nt.interactions.forEach((function(nt){Kt.interaction(nt.type,nt)})),!1===nt.animation?null===(jt=this.animate)||void 0===jt||jt.disable():null===($t=this.animate)||void 0===$t||$t.enable(),this.emit(GH.AFTER_PARSE_VIEW),this._needBuildLayoutTree=!0,this._layoutState=WH.before,this}},{"key":"updateSpec","value":function(nt){return this.removeAllInteractions(),this.removeAllGrammars(),this.parseSpec(nt)}},{"key":"parseBuiltIn","value":function(){var nt=this;(function(nt,at,lt){var Rt,Bt,Lt,Ht,jt;return[{"id":mN,"value":null!==(Rt=nt[mN])&&void 0!==Rt?Rt:0},{"id":_N,"value":null!==(Bt=nt[_N])&&void 0!==Bt?Bt:0},{"id":AN,"value":xN(null!==(Ht=null!==(Lt=nt[AN])&&void 0!==Lt?Lt:at[AN])&&void 0!==Ht?Ht:null==lt?void 0:lt.padding)},{"id":bN,"update":{"callback":function(nt,at){var lt=xN(at[AN]);return at[mN]-lt.left-lt.right},"dependency":[mN,AN]}},{"id":SN,"update":{"callback":function(nt,at){var lt=xN(at[AN]);return at[_N]-lt.top-lt.bottom},"dependency":[_N,AN]}},{"id":wN,"update":{"callback":function(nt,at){var lt=xN(at[AN]);return(nt||new mi).setValue(lt.left,lt.top,lt.left+at[bN],lt.top+at[SN])},"dependency":[bN,SN,AN]}},{"id":CN,"value":null!==(jt=nt[CN])&&void 0!==jt?jt:at[CN]}]})(this._options,this._config,this.getCurrentTheme()).forEach((function(at){var lt=nt.signal().parse(at);at.value&&lt.set(at.value)})),this.parseMarkSpec({"id":"root","type":"group","encode":{"enter":{"x":0,"y":0},"update":{"width":{"signal":"width"},"height":{"signal":"height"}}}}),this.rootMark=this.getMarkById("root")}},{"key":"parseMarkSpec","value":function(nt){var at,lt=this,Rt=nt.type===MH.glyph?{"glyphType":nt.glyphType}:nt.type===MH.component?{"componentType":nt.componentType,"mode":nt.mode}:null;this.mark(nt.type,nt.group,Rt).parse(nt),null===(at=nt.marks)||void 0===at||at.forEach((function(nt){lt.parseMarkSpec(nt)}))}},{"key":"theme","value":function(nt){var at,lt,Rt,Bt,Lt,Ht;Y(nt)?this._theme=null!==(at=QN.getTheme(nt))&&void 0!==at?at:QN.getDefaultTheme():this._theme=nt;var jt=null!==(lt=this._spec)&&void 0!==lt?lt:{},$t=jt.background,Kt=jt.padding;return this._theme?(this.background(null!==(Rt=null!=$t?$t:this._options.background)&&void 0!==Rt?Rt:this._theme.background),this.padding(null!==(Bt=null!=Kt?Kt:this._options.padding)&&void 0!==Bt?Bt:this._theme.padding),null===(Ht=null===(Lt=this.renderer.stage())||void 0===Lt?void 0:Lt.setTheme)||void 0===Ht||Ht.call(Lt,Object.assign({},this._theme.marks))):(this.background(null!=$t?$t:this._options.background),this.padding(null!=Kt?Kt:this._options.padding)),this}},{"key":"getCurrentTheme","value":function(){return this._theme}},{"key":"setCurrentTheme","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.theme(nt),this.grammars.getAllMarks().forEach((function(nt){nt.commit()})),at?(this.evaluate(),this.renderer.render(!0)):this._dataflow.evaluate(),this}},{"key":"background","value":function(nt){return arguments.length?(this._background=nt,this.renderer.background(nt),nt):this._background}},{"key":"width","value":function(nt){var at=this.getSignalById(mN);return arguments.length?(this._options.width=nt,this.updateSignal(at,nt),nt):at.output()}},{"key":"height","value":function(nt){var at=this.getSignalById(_N);return arguments.length?(this._options.height=nt,this.updateSignal(at,nt),nt):at.output()}},{"key":"viewWidth","value":function(nt){var at=this.getSignalById(bN);if(arguments.length){var lt=this.padding();return this.width(nt+lt.left+lt.right),nt}return at.output()}},{"key":"viewHeight","value":function(nt){var at=this.getSignalById(SN);if(arguments.length){var lt=this.padding();return this.height(nt+lt.top+lt.bottom),nt}return at.output()}},{"key":"padding","value":function(nt){var at=this.getSignalById(AN);if(arguments.length){var lt=xN(nt);return this.updateSignal(at,lt),lt}return xN(at.output())}},{"key":"autoFit","value":function(nt){var at=this.getSignalById(CN);return arguments.length?(this.updateSignal(at,nt),nt):at.output()}},{"key":"getViewBox","value":function(){var nt=this.getSignalById(wN);return null==nt?void 0:nt.output()}},{"key":"updateLayoutTag","value":function(){return this._layoutState=WH.before,this}},{"key":"getLayoutState","value":function(){return this._layoutState}},{"key":"buildLayoutTree","value":function(){var nt={},at=[];this.traverseMarkTree((function(lt){nt[lt.id()]=!0,lt.group&&nt[lt.group.id()]||at.push(lt),lt.markType===MH.group&&lt.updateLayoutChildren()}),(function(nt){return nt.needLayout()})),this._layoutMarks=at}},{"key":"doLayout","value":function(){var nt,at=this._options.doLayout||Pj.getDefaultLayout();at&&(null===(nt=this._layoutMarks)||void 0===nt?void 0:nt.length)&&(this.emit(GH.BEFORE_DO_LAYOUT),at(this._layoutMarks,this._options,this),this.emit(GH.AFTER_DO_LAYOUT))}},{"key":"handleLayoutEnd","value":function(){this.emit(GH.BEFORE_MARK_LAYOUT_END),this._layoutMarks.forEach((function(nt){rN(nt,"layoutChildren",(function(nt){nt.handleLayoutEnd()}),(function(at){return at!==nt}))})),this.emit(GH.AFTER_MARK_LAYOUT_END)}},{"key":"handleRenderEnd","value":function(){this.emit(GH.BEFORE_MARK_RENDER_END),rN(this.rootMark,"children",(function(nt){nt.handleRenderEnd()})),this.emit(GH.AFTER_MARK_RENDER_END)}},{"key":"commit","value":function(nt){return this._dataflow.commit(nt),this}},{"key":"run","value":function(nt){return this.evaluate(nt),this}},{"key":"doRender","value":function(nt){this.emit(GH.BEFORE_DO_RENDER),this.renderer&&(!this._progressiveMarks&&this.animate?this.animate.animate():this.traverseMarkTree((function(nt){nt.cleanExitElements()}),null,!0),this.renderer.render(nt),this.handleRenderEnd()),this.emit(GH.AFTER_DO_RENDER)}},{"key":"evaluate","value":function(nt){var at,lt,Rt=function(nt){var at,lt,Rt,Bt,Lt,Ht=null!=nt?nt:{},jt=Ht.reuse,$t=void 0===jt||jt,Kt=Ht.morph,te=void 0===Kt||Kt,ne=Ht.morphAll,re=void 0!==ne&&ne,ae=Ht.animation,oe=void 0===ae?{}:ae,se=Ht.enableExitAnimation,le=void 0===se||se;return{"reuse":$t,"morph":te,"morphAll":re,"animation":{"easing":null!==(at=oe.easing)&&void 0!==at?at:Aj,"delay":null!==(lt=oe.delay)&&void 0!==lt?lt:vj,"duration":null!==(Rt=oe.duration)&&void 0!==Rt?Rt:ej,"oneByOne":null!==(Bt=oe.oneByOne)&&void 0!==Bt?Bt:xj,"splitPath":null!==(Lt=oe.splitPath)&&void 0!==Lt?Lt:null},"enableExitAnimation":le}}(nt),Bt=this._cachedGrammars.size()>0;Bt&&(this.reuseCachedGrammars(Rt),this.detachCachedGrammar());var Lt=this._resizeRenderer(),Ht=this._dataflow.hasCommitted();return Bt||Ht||this._layoutState||Lt?(this.clearProgressive(),this._dataflow.evaluate(),this._needBuildLayoutTree&&(this.buildLayoutTree(),this._needBuildLayoutTree=!1),this._layoutState&&(this._layoutState=WH.layouting,this.doLayout(),this._dataflow.hasCommitted()&&(this._layoutState=WH.reevaluate,this._dataflow.evaluate()),this._layoutState=WH.after,(null===(at=this._layoutMarks)||void 0===at?void 0:at.length)&&this.handleLayoutEnd()),this._layoutState=null,this.findProgressiveMarks(),this._resizeRenderer(),null===(lt=this.morph)||void 0===lt||lt.call(this,Rt),this.releaseCachedGrammars(Rt),this.doRender(!0),this.doPreProgressive(),this):this}},{"key":"reuseCachedGrammars","value":function(nt){var at=this;if(nt.reuse){var i=function(nt){nt.next.reuse(nt.prev),nt.prev.detachAll(),nt.prev.clear(),at._cachedGrammars.unrecord(nt.prev)};this._differ.diffGrammar(this._cachedGrammars.getAllSignals(),this.grammars.getAllSignals().filter((function(nt){return!EN.includes(nt.id())}))).update.forEach(i),this._differ.diffGrammar(this._cachedGrammars.getAllData(),this.grammars.getAllData()).update.forEach(i),this._differ.diffGrammar(this._cachedGrammars.getAllScales(),this.grammars.getAllScales()).update.forEach(i),this._differ.diffGrammar(this._cachedGrammars.getAllCoordinates(),this.grammars.getAllCoordinates()).update.forEach(i)}this._differ.diffMark(this._cachedGrammars.getAllMarks(),this.grammars.getAllMarks().filter((function(nt){return"root"!==nt.id()})),nt).update.forEach((function(lt){var Rt,Bt=1===lt.prev.length&&1===lt.next.length&&lt.prev[0].markType===lt.next[0].markType,Lt=lt.prev.every((function(nt){return nt.getMorphConfig().morph}))&&lt.next.every((function(nt){return nt.getMorphConfig().morph}));at.morph&&(nt.morph&&Lt||nt.morphAll)?null===(Rt=at.addMorphMarks)||void 0===Rt||Rt.call(at,{"prev":lt.prev,"next":lt.next}):Bt&&nt.reuse&&(lt.next[0].reuse(lt.prev[0]),lt.prev[0].detachAll(),lt.prev[0].clear(),at._cachedGrammars.unrecord(lt.prev[0]))}))}},{"key":"detachCachedGrammar","value":function(){this._cachedGrammars.traverse((function(nt){var at,lt;if(nt.detachAll(),"mark"===nt.grammarType){var Rt=nt;null===(lt=null===(at=Rt.group)||void 0===at?void 0:at.removeChild)||void 0===lt||lt.call(at,Rt)}}))}},{"key":"releaseCachedGrammars","value":function(nt){var at=this;this._cachedGrammars.traverse((function(nt){"mark"!==nt.grammarType&&nt.release()}));var lt=this._cachedGrammars.getAllMarkNodes();lt.forEach((function(lt){var Rt;null===(Rt=lt.mark.animate)||void 0===Rt||Rt.stop(),nt.enableExitAnimation&&at.animate&&at.animate.animateAddition(lt.mark)}));var n=function(nt){if(nt.mark.view&&(!nt.mark.animate||0===nt.mark.animate.getAnimatorCount())&&(!nt.children||0===nt.children.length)){nt.mark.release();var at=nt.parent;at&&(nt.parent.children=nt.parent.children.filter((function(at){return at!==nt})),nt.parent=null,n(at))}};lt.forEach((function(nt){var at=nt.mark;at.animate&&0!==at.animate.getAnimatorCount()?at.addEventListener("animationEnd",(function(){at.animate&&0===at.animate.getAnimatorCount()&&n(nt)})):n(nt)})),this._cachedGrammars.clear()}},{"key":"runAfter","value":function(nt){var at=this;return this._dataflow.runAfter((function(){nt.call(null,at)})),this}},{"key":"runBefore","value":function(nt){var at=this;return this._dataflow.runBefore((function(){nt.call(null,at)})),this}},{"key":"getImageBuffer","value":function(){var nt,at;if("node"===this._options.mode){var lt=null===(at=null===(nt=this.renderer)||void 0===nt?void 0:nt.stage)||void 0===at?void 0:at.call(nt);return lt?(lt.render(),lt.window.getImageBuffer()):(this.logger.error(new ReferenceError("render is not defined")),null)}this.logger.error(new TypeError("getImageBuffer() now only support node environment."))}},{"key":"traverseMarkTree","value":function(nt,at,lt){return rN(this.rootMark,"children",nt,at,lt),this}},{"key":"_bindResizeEvent","value":function(){var nt,at,lt,Rt,Bt,Lt;if(this.autoFit()){var Ht=null===(Bt=null===(Rt=null===(lt=null===(at=null===(nt=this.renderer)||void 0===nt?void 0:nt.stage)||void 0===at?void 0:at.call(nt))||void 0===lt?void 0:lt.window)||void 0===Rt?void 0:Rt.getContainer)||void 0===Bt?void 0:Bt.call(Rt);if(Ht){var jt=window.ResizeObserver;this._observer=new jt(this._onResize),null===(Lt=this._observer)||void 0===Lt||Lt.observe(Ht)}window.addEventListener("resize",this._onResize)}}},{"key":"_unBindResizeEvent","value":function(){this.autoFit()&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}},{"key":"_getContainerSize","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne=null===(Bt=null===(Rt=null===(lt=null===(at=null===(nt=this.renderer)||void 0===nt?void 0:nt.stage)||void 0===at?void 0:at.call(nt))||void 0===lt?void 0:lt.window)||void 0===Rt?void 0:Rt.getContainer)||void 0===Bt?void 0:Bt.call(Rt);if(ne){var re=Ei(ne),ae=re.width,oe=re.height;return{"width":null!==(jt=null!==(Ht=null===(Lt=this._spec)||void 0===Lt?void 0:Lt.width)&&void 0!==Ht?Ht:this._options.width)&&void 0!==jt?jt:ae,"height":null!==(te=null!==(Kt=null===($t=this._spec)||void 0===$t?void 0:$t.height)&&void 0!==Kt?Kt:this._options.height)&&void 0!==te?te:oe}}return null}},{"key":"resize","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Rt=!1;return nt!==this.width()&&(Rt=!0,this.updateSignal(mN,nt)),at!==this.height()&&(Rt=!0,this.updateSignal(_N,at)),Rt&&(lt?this.evaluate({"morph":!1}):this._dataflow.evaluate()),this}},{"key":"_resizeRenderer","value":function(){var nt=this.width(),at=this.height();return!!this.renderer.shouldResize(nt,at)&&(this.renderer.resize(nt,at),this.emit("resize",{},{"width":nt,"height":at}),!0)}},{"key":"interaction","value":function(nt,at){var lt=Pj.createInteraction(nt,this,at);return lt&&(lt.bind(),this._boundInteractions||(this._boundInteractions=[]),this._boundInteractions.push(lt)),lt}},{"key":"removeInteraction","value":function(nt,at){if(this._boundInteractions){var lt=this._boundInteractions.filter((function(lt){var Rt;return j(at)?Y(nt)?lt.type===nt:nt?lt===nt:void 0:(null===(Rt=lt.options)||void 0===Rt?void 0:Rt.id)===at}));lt.length&&lt.forEach((function(nt){nt.unbind()}))}return this}},{"key":"removeAllInteractions","value":function(){return this._boundInteractions&&(this._boundInteractions.forEach((function(nt){nt.unbind()})),this._boundInteractions=null),this}},{"key":"initializeEventConfig","value":function(nt){var at=Object.assign({"defaults":{}},nt),i=function(nt,at){at.forEach((function(at){X(nt[at])&&(nt[at]=nt[at].reduce((function(nt,at){return nt[at]=!0,nt}),{}))}))};return i(at.defaults,["prevent","allow"]),i(at,[gN,vN]),at}},{"key":"initEvent","value":function(){var nt=this.renderer.stage();nt&&nt.on("*",this.delegateEvent)}},{"key":"releaseStageEvent","value":function(){var nt=this.renderer.stage();nt&&nt.off("*",this.delegateEvent)}},{"key":"addEventListener","value":function(nt,at,lt){var Rt=at;return lt&&!1===lt.trap||((Rt=at).raw=at),lt&&lt.target&&(Rt.target=lt.target),this.on(nt,Rt),this}},{"key":"removeEventListener","value":function(nt,at){return at?this.off(nt,at):this.off(nt),this}},{"key":"initializeRenderer","value":function(){var nt=this._options.width,at=this._options.height;this.renderer=new pN(this),this.renderer.initialize(nt,at,this._options,this._eventConfig).background(this._background)}},{"key":"initialize","value":function(){var nt,at,lt,Rt=this;this.grammars=new BN((function(nt){return nt.id()}),(function(nt,at){return Rt.logger.warn("Grammar id '".concat(nt,"' has been occupied"),at)})),this._cachedGrammars=new ON((function(nt){return nt.id()})),this._options.logger&&te.setInstance(this._options.logger),this.logger=te.getInstance(null!==(nt=this._options.logLevel)&&void 0!==nt?nt:0),this._dataflow=new fN,this.animate=null===(at=this.initAnimate)||void 0===at?void 0:at.call(this,this),this._differ=new uV,this._options.hooks&&(Object.keys(this._options.hooks).forEach((function(nt){Rt.on(nt,Rt._options.hooks[nt])})),this.hooks=this._options.hooks),this.container=null,this.renderer=null,this._eventListeners=[],this._eventConfig=this.initializeEventConfig(this._options.eventConfig),this._theme=this._options.disableTheme?null:QN.getDefaultTheme(),this.parseBuiltIn(),(lt=this._options).mode&&ax.setEnv(lt.mode,lt.modeParams||{}),this.initializeRenderer(),this._eventConfig.disable||this.initEvent(),this._bindResizeEvent(),this._needBuildLayoutTree=!0,this._layoutState=WH.before,this.theme(this._theme)}},{"key":"pauseProgressive","value":function(){return!1}},{"key":"resumeProgressive","value":function(){return!1}},{"key":"restartProgressive","value":function(){return!1}},{"key":"findProgressiveMarks","value":function(){var nt=[];return this.traverseMarkTree((function(at){nt.push(at)}),(function(nt){return nt.markType!==MH.group&&nt.isProgressive()})),nt.length?(this._progressiveMarks=nt,this.renderer&&this.renderer.combineIncrementalLayers(),nt):(this._progressiveMarks=null,null)}},{"key":"doPreProgressive","value":function(){if(this._progressiveMarks&&this._progressiveMarks.some((function(nt){return nt.isDoingProgressive()}))){var nt=ax.getRequestAnimationFrame();this._progressiveRafId=nt(this.handleProgressiveFrame)}else this._progressiveMarks&&this.animate&&this._progressiveMarks.every((function(nt){return nt.canAnimateAfterProgressive()}))?this.animate.animate():this._progressiveMarks&&(this._progressiveMarks=null)}},{"key":"clearProgressive","value":function(){this._progressiveRafId&&ax.getCancelAnimationFrame()(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach((function(nt){nt.clearProgressive()})),this._progressiveMarks=null)}},{"key":"release","value":function(){var nt,at,lt,Rt;this.removeAllInteractions(),this.releaseStageEvent(),this._unBindResizeEvent(),this.clearProgressive(),Pj.unregisterRuntimeTransforms(),te.setInstance(null),null===(nt=this.animate)||void 0===nt||nt.stop(),this.grammars.release(),this._cachedGrammars.release(),this._dataflow.release(),this._dataflow=null,null===(lt=null===(at=this.renderer)||void 0===at?void 0:at.release)||void 0===lt||lt.call(at),this.renderer=null,this._boundInteractions=null,this.removeAllListeners(),null===(Rt=this._eventListeners)||void 0===Rt||Rt.forEach((function(nt){nt.source.removeEventListener(nt.type,nt.handler)})),this._eventListeners=null}}],[{"key":"useRegisters","value":function(nt){nt.forEach((function(nt){nt()}))}}])}(Bt),HN=function(nt,at,lt,Rt,Bt){var Lt,Ht,jt={"prev":nt.map((function(nt){return nt.getDatum()})),"next":at.map((function(nt){return nt.getDatum()}))},$t={"prev":nt.slice(),"next":at.slice()},Kt=lt.animation.easing,te=aj(lt.animation.delay,Bt,jt,$t),ne=aj(lt.animation.duration,Bt,jt,$t),re=aj(lt.animation.oneByOne,Bt,jt,$t),ae=aj(lt.animation.splitPath,Bt,jt,$t),oe=Q(re)&&re>0?function(nt){return Z(re)?nt*re:!0===re?nt*ne:0}:void 0;1!==nt.length&&0!==nt.length||1!==at.length?1===nt.length&&at.length>1?function(nt,at,lt){var Rt,Bt=at.filter((function(nt){return nt&&nt.toCustomPath&&nt.valid}));Bt.length||__DEV__&&console.error(Bt," is not validate"),nt.valid&&nt.toCustomPath||__DEV__&&console.error(nt," is not validate");var Lt=("clone"===(null==lt?void 0:lt.splitPath)?tp:null!==(Rt=null==lt?void 0:lt.splitPath)&&void 0!==Rt?Rt:ep)(nt,Bt.length,!1),Ht=null==lt?void 0:lt.onEnd,jt=Bt.length,l=function(){0==--jt&&Ht&&Ht()};Bt.forEach((function(at,Rt){var Ht,jt=Lt[Rt],$t=(null!==(Ht=null==lt?void 0:lt.delay)&&void 0!==Ht?Ht:0)+((null==lt?void 0:lt.individualDelay)?lt.individualDelay(Rt,Bt.length,jt,at):0);Zd(jt,at,Object.assign({},lt,{"onEnd":l,"delay":$t}),nt.globalTransMatrix)}))}(nt[0].getGraphicItem(),at.map((function(nt){return nt.getGraphicItem()})),{"delay":te,"duration":ne,"easing":Kt,"onEnd":Rt,"individualDelay":oe,"splitPath":ae}):nt.length>1&&1===at.length&&function(nt,at,lt){var Rt,Bt,Lt,Ht=nt.filter((function(nt){return nt.toCustomPath&&nt.valid}));Ht.length||__DEV__&&console.error(nt," is not validate"),at.valid&&at.toCustomPath||__DEV__&&console.error(at," is not validate");var jt=("clone"===(null==lt?void 0:lt.splitPath)?tp:null!==(Rt=null==lt?void 0:lt.splitPath)&&void 0!==Rt?Rt:ep)(at,Ht.length,!0),$t=at.attribute;at.setAttribute("visible",!1);var Kt=Ht.map((function(nt,at){return Yd(nt.toCustomPath(),jt[at].toCustomPath(),{"fromTransform":nt.globalTransMatrix,"toTransfrom":jt[at].globalTransMatrix})})),te=Ht.map((function(nt,at){return Kd(nt.attribute,$t)}));if(null==lt?void 0:lt.individualDelay){var ne=lt.onEnd,re=Ht.length,p=function(){0==--re&&(at.setAttributes({"visible":!0,"ratio":null},!1,{"type":Tl.ANIMATE_END}),at.detachShadow(),ne&&ne())};jt.forEach((function(at,Rt){var Bt,Lt,jt,$t=(null!==(Bt=lt.delay)&&void 0!==Bt?Bt:0)+lt.individualDelay(Rt,Ht.length,nt[Rt],at),ne=at.animate(Object.assign({},lt,{"onEnd":p}));ne.wait($t),ne.play(new of({"morphingData":Kt[Rt],"saveOnEnd":!0,"otherAttrs":te[Rt]},null!==(Lt=lt.duration)&&void 0!==Lt?Lt:id,null!==(jt=lt.easing)&&void 0!==jt?jt:od))}))}else{var ae=null==lt?void 0:lt.onEnd,oe=lt?Object.assign({},lt):{};oe.onEnd=function(){at.setAttribute("visible",!0,!1,{"type":Tl.ANIMATE_END}),at.detachShadow(),ae&&ae()};var se=at.animate(oe);(null==lt?void 0:lt.delay)&&se.wait(lt.delay),se.play(new sf({"morphingData":Kt,"otherAttrs":te},null!==(Bt=null==lt?void 0:lt.duration)&&void 0!==Bt?Bt:id,null!==(Lt=null==lt?void 0:lt.easing)&&void 0!==Lt?Lt:od))}}(nt.map((function(nt){return nt.getGraphicItem()})),at[0].getGraphicItem(),{"delay":te,"duration":ne,"easing":Kt,"onEnd":Rt,"individualDelay":oe,"splitPath":ae}):Zd(null===(Ht=null===(Lt=nt[0])||void 0===Lt?void 0:Lt.getGraphicItem)||void 0===Ht?void 0:Ht.call(Lt),at[0].getGraphicItem(),{"delay":te,"duration":ne,"easing":Kt,"onEnd":Rt})},jN=function(nt,at){var lt=Math.floor(nt.length/at);return new Array(at).fill(0).map((function(Rt,Bt){return nt.slice(lt*Bt,Bt===at-1?nt.length:lt*(Bt+1))}))},NN=function(nt){var at=nt.getMorphConfig();if(!j(at.morphElementKey)){var lt=lj(at.morphElementKey);nt.elements&&nt.elements.forEach((function(nt){nt.morphKey=lt(nt.getDatum())}))}},VN=function(nt,at,lt){var Rt=function(nt,at,lt){var Rt={"enter":[],"exit":[],"update":[]},Bt=new PN(nt,lt);return Bt.setCallback((function(nt,at,lt){j(at)?Rt.exit.push({"prev":lt}):j(lt)?Rt.enter.push({"next":at}):Rt.update.push({"next":at,"prev":lt})})),Bt.setCurrentData(kN(at,lt)),Bt.doDiff(),Rt}(nt.reduce((function(nt,at){return NN(at),nt.concat(at.elements)}),[]),at.reduce((function(nt,at){return NN(at),nt.concat(at.elements)}),[]),(function(nt){var at;return null!==(at=nt.morphKey)&&void 0!==at?at:nt.key}));nt.forEach((function(nt){var at,lt;return null===(lt=null===(at=nt.animate)||void 0===at?void 0:at.disable)||void 0===lt?void 0:lt.call(at)})),at.forEach((function(nt){var at,lt;return null===(lt=null===(at=nt.animate)||void 0===at?void 0:at.disable)||void 0===lt?void 0:lt.call(at)}));var Bt=nt.concat(at).reduce((function(nt,at){return Object.assign(nt,at.parameters()),nt}),{}),Lt=0,o=function(){0==(Lt-=1)&&at.forEach((function(nt){var at,lt;null===(lt=null===(at=nt.animate)||void 0===at?void 0:at.enable)||void 0===lt||lt.call(at)}))};Rt.enter.forEach((function(nt){nt.next.forEach((function(nt){HN([],[nt],lt,o,Bt)})),Lt+=1})),Rt.update.forEach((function(nt){for(var at=Math.min(nt.prev.length,nt.next.length),Rt=jN(nt.prev,at),Ht=jN(nt.next,at),jt=0;jt<at;jt++)HN(Rt[jt],Ht[jt],lt,o,Bt),Lt+=1}))},yV=o((function t(){r(this,t)}),[{"key":"morph","value":function(nt){var at;null===(at=this._willMorphMarks)||void 0===at||at.forEach((function(at){VN(at.prev,at.next,nt)})),this._willMorphMarks=null}},{"key":"addMorphMarks","value":function(nt){this._willMorphMarks||(this._willMorphMarks=[]),this._willMorphMarks.push(nt)}}]),WN=function(){LP(),hP(),Pj.registerGraphic(MH.arc,yy),kL("arc",AO)},UN=function(){LP(),vP(),Pj.registerGraphic(MH.area,fy),RL(),ML()},YN=function(){LP(),TP(),Pj.registerGraphic(MH.path,hy)},XN=function(){LP(),BP(),kL("rect",_O),Pj.registerGraphic(MH.rect,Wg)},KN=function(){LP(),wP(),Pj.registerGraphic(MH.rule,Ng)},qN=function(){LP(),FP(),ML(),Pj.registerGraphic(MH.symbol,zg)},ZN=function(){LP(),zP(),DP(),Pj.registerGraphic(MH.text,Dg)},JN=function(){LP(),_P(),Pj.registerGraphic(MH.glyph,qg)},_V=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).getStateAttrs=function(nt,lt){var Rt,Bt,Lt,Ht,jt=!j(null===(Rt=at.runtimeStatesEncoder)||void 0===Rt?void 0:Rt[nt]),$t=jt?Object.assign(Object.assign({},null===(Bt=at.mark.getSpec().encode)||void 0===Bt?void 0:Bt[nt]),at.runtimeStatesEncoder[nt]):null===(Lt=at.mark.getSpec().encode)||void 0===Lt?void 0:Lt[nt],Kt={};if(!$t)return Kt;if(H($t))return Kt.attributes=$t(at.getDatum(),i(at),nt,lt),Kt;if(!jt&&(null===(Ht=at.graphicItem.glyphStates)||void 0===Ht?void 0:Ht[nt]))return at.graphicItem.glyphStates[nt];if($t){var te=at.items[0],ne=[Object.assign({},te,{"nextAttrs":{}})];return pj(i(at),ne,$t,at.mark.parameters()),at.coordinateTransformEncode(ne),Kt.attributes=ne[0].nextAttrs,at.graphicItem.glyphStates?at.graphicItem.glyphStates[nt]||(at.graphicItem.glyphStates[nt]=Kt):at.graphicItem.glyphStates=l({},nt,Kt),Kt}return Kt},at.glyphMeta=at.mark.getGlyphMeta(),at}return h(e,nt),o(e,[{"key":"getGlyphGraphicItems","value":function(){return this.glyphGraphicItems}},{"key":"initGraphicItem","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.graphicItem){this.graphicItem=this.mark.addGraphicItem(at,this.groupKey),this.graphicItem[XH]=this,this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1);var lt=this.glyphMeta.getMarks();this.glyphGraphicItems={},this.graphicItem.getSubGraphic().forEach((function(at){var Rt=lt[at.name];nt.glyphGraphicItems[at.name]=at,at.onBeforeAttributeUpdate=function(lt){return nt.mark?kj(Rt,lt,nt,at.name):lt}})),this.clearGraphicAttributes()}}},{"key":"useStates","value":function(nt,at){if(!this.graphicItem)return!1;this.mark.emit(GH.BEFORE_ELEMENT_STATE,{"states":nt},this),this.states=nt.slice();var lt=z(at)?at:this.hasStateAnimation();return this.graphicItem.glyphStateProxy=this.getStateAttrs,this.graphicItem.useStates(this.states,lt),this.mark.emit(GH.AFTER_ELEMENT_STATE,{"states":nt},this),!0}},{"key":"encodeGraphic","value":function(){this.coordinateTransformEncode(this.items);var nt=this.transformElementItems(this.items,this.mark.markType),at=!this.graphicItem;this.graphicItem?(this.graphicItem.clearStates(),this.graphicItem.states={},this.graphicItem.stateProxy=null):this.initGraphicItem(),this.diffState===CH.enter||at?(this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!0),this.applyGraphicAttributes(nt),this.graphicItem.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(!1)):this.applyGraphicAttributes(nt),this.diffState!==CH.enter&&this.diffState!==CH.update||!this.states.length||(Object.values(this.glyphGraphicItems).forEach((function(nt){nt.states={}})),this.useStates(this.states)),this.items.map((function(nt){nt.nextAttrs={}}))}},{"key":"encodeCustom","value":function(nt){var at,lt,Rt=this,Bt={},Lt=this.glyphMeta.getChannelEncoder(),Ht=this.glyphMeta.getFunctionEncoder();return Ht&&(Bt=Ht.call(null,Object.assign({},null===(at=this.graphicItem)||void 0===at?void 0:at.attribute,nt),this.getDatum(),this,this.mark.getGlyphConfig())),Lt&&Object.keys(Lt).forEach((function(at){var Ht;if(!j(nt[at])){lt||(lt=Object.assign({},null===(Ht=Rt.graphicItem)||void 0===Ht?void 0:Ht.attribute,nt));var jt=Lt[at].call(null,at,nt[at],lt,Rt.getDatum(),Rt,Rt.mark.getGlyphConfig());Object.keys(null!=jt?jt:{}).forEach((function(nt){var at;Bt[nt]=Object.assign(null!==(at=Bt[nt])&&void 0!==at?at:{},jt[nt])}))}})),Bt}},{"key":"encodeDefault","value":function(){var nt={};if(this.glyphMeta.getDefaultEncoder()){var at=this.glyphMeta.getDefaultEncoder().call(null,this.getDatum(),this,this.mark.getGlyphConfig());Object.assign(nt,at)}return nt}},{"key":"_onGlyphAttributeUpdate","value":function(){var nt=this,at=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(lt){if(!nt.mark)return lt;var Rt=nt.glyphMeta.getMarks(),Bt=kj(nt.mark.getAttributeTransforms(),lt,nt),Lt=at?nt.encodeDefault():null,Ht=nt.encodeCustom(lt);return Object.keys(Rt).forEach((function(Bt){var jt=Rt[Bt],$t=nt.glyphGraphicItems[Bt],Kt=null==Ht?void 0:Ht[Bt],te=Object.assign({},Kt);if(at){var ne=null==Lt?void 0:Lt[Bt];Object.keys(null!=ne?ne:{}).forEach((function(at){ut(nt.items[0].nextAttrs,at)||ut(te,at)||(te[at]=ne[at])}))}var re=Object.assign({},function(nt,at){var lt;return(null!==(lt=Oj[nt])&&void 0!==lt?lt:[]).reduce((function(nt,lt){return lt.channels.forEach((function(lt){ut(at,lt)&&(nt[lt]=at[lt])})),nt}),{})}(jt,lt),te),ae=nt._generateGlyphItems(jt,nt.items,re);nt.coordinateTransformEncode(ae);var oe=nt.transformElementItems(ae,jt);nt.applyGlyphGraphicAttributes(oe,Bt,$t),jt===MH.shape&&($t.datum=ae[0].datum)})),Bt}}},{"key":"_generateGlyphItems","value":function(nt,at,lt){var Rt=at.map((function(nt){return Object.assign({},nt,{"nextAttrs":lt})}));return $H.includes(nt)&&this.mark.getSpec().enableSegments&&Rt.forEach((function(nt,Rt){nt.nextAttrs=Object.assign({},at[Rt].nextAttrs,lt)})),Rt}},{"key":"getGraphicAttribute","value":function(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lt=arguments.length>2?arguments[2]:void 0;if(this.graphicItem){var Rt=this.getPrevGraphicAttributes(lt);return at&&ut(Rt,nt)?Rt[nt]:(lt?this.glyphGraphicItems[lt]:this.graphicItem).attribute[nt]}}},{"key":"setGraphicAttribute","value":function(nt,at){var lt=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Rt=arguments.length>3?arguments[3]:void 0;if(this.graphicItem){var Bt=Rt?this.glyphGraphicItems[Rt]:this.graphicItem,Lt=this.getFinalGraphicAttributes(Rt),Ht=this.getPrevGraphicAttributes(Rt);lt&&(Lt[nt]=at),ut(Ht,nt)||(Ht[nt]=Bt.attribute[nt]),Bt.setAttribute(nt,at)}}},{"key":"setGraphicAttributes","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=arguments.length>2?arguments[2]:void 0;if(this.graphicItem){var Rt=lt?this.glyphGraphicItems[lt]:this.graphicItem,Bt=this.getFinalGraphicAttributes(lt),Lt=this.getPrevGraphicAttributes(lt);Object.keys(nt).forEach((function(lt){at&&(Bt[lt]=nt[lt]),ut(Lt,lt)||(Lt[lt]=Rt.attribute[lt])})),Rt.setAttributes(nt)}}},{"key":"diffAttributes","value":function(nt,at){var lt={},Rt=this.getFinalGraphicAttributes(at);for(var Bt in nt)ut(Rt,Bt)&&mt(Rt[Bt],nt[Bt])||(lt[Bt]=nt[Bt]);return lt}},{"key":"applyGlyphGraphicAttributes","value":function(nt,at,lt){var Rt,Bt;if(this.mark.needAnimate()){var Lt=this.diffAttributes(nt,at),Ht=null!==(Rt=this.getPrevGraphicAttributes(at))&&void 0!==Rt?Rt:{},jt=null!==(Bt=this.getFinalGraphicAttributes(at))&&void 0!==Bt?Bt:{};Object.keys(Lt).forEach((function(nt){Ht[nt]=lt.attribute[nt],jt[nt]=Lt[nt]})),this.setNextGraphicAttributes(Lt,at),this.setPrevGraphicAttributes(Ht,at),this.setFinalGraphicAttributes(jt,at),lt.setAttributes(Lt)}else lt.setAttributes(nt)}},{"key":"getFinalGraphicAttributes","value":function(nt){return(nt?this.glyphGraphicItems[nt]:this.graphicItem).finalAttrs}},{"key":"setFinalGraphicAttributes","value":function(nt,at){(at?this.glyphGraphicItems[at]:this.graphicItem).finalAttrs=nt}},{"key":"getPrevGraphicAttributes","value":function(nt){return(nt?this.glyphGraphicItems[nt]:this.graphicItem).prevAttrs}},{"key":"setPrevGraphicAttributes","value":function(nt,at){(at?this.glyphGraphicItems[at]:this.graphicItem).prevAttrs=nt}},{"key":"getNextGraphicAttributes","value":function(nt){return(nt?this.glyphGraphicItems[nt]:this.graphicItem).nextAttrs}},{"key":"setNextGraphicAttributes","value":function(nt,at){(at?this.glyphGraphicItems[at]:this.graphicItem).nextAttrs=nt}},{"key":"clearChangedGraphicAttributes","value":function(){var nt=this;this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach((function(at){nt.setPrevGraphicAttributes(null,at),nt.setNextGraphicAttributes(null,at)}))}},{"key":"clearGraphicAttributes","value":function(){var nt=this;this.setPrevGraphicAttributes(null),this.setNextGraphicAttributes(null),this.setFinalGraphicAttributes(null),Object.keys(this.glyphGraphicItems).forEach((function(at){nt.setPrevGraphicAttributes(null,at),nt.setNextGraphicAttributes(null,at),nt.setFinalGraphicAttributes(null,at)}))}},{"key":"remove","value":function(){this.glyphGraphicItems=null,y(e,"remove",this,3)([])}},{"key":"release","value":function(){this.glyphGraphicItems&&(Object.values(this.glyphGraphicItems).forEach((function(nt){nt[XH]=null})),this.glyphGraphicItems=null),y(e,"release",this,3)([])}}])}(Fj),SV=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[nt,MH.glyph,lt])).glyphType=at,Rt.glyphMeta=Pj.getGlyph(at),Rt}return h(e,nt),o(e,[{"key":"configureGlyph","value":function(nt){return this.spec.glyphConfig=nt,this.commit(),this}},{"key":"getGlyphMeta","value":function(){return this.glyphMeta}},{"key":"getGlyphConfig","value":function(){return this.spec.glyphConfig}},{"key":"addGraphicItem","value":function(nt,at){var lt=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Pj.getGraphicType(MH.glyph)){var Rt=Pj.createGraphic(MH.glyph,lt),Bt=at.getMarks(),Lt=Object.keys(Bt).map((function(nt){if(Pj.getGraphicType(Bt[nt])){var at=Pj.createGraphic(Bt[nt]);if(at)return at.name=nt,at}}));return Rt.setSubGraphic(Lt),Rt}}(this,this.glyphMeta,nt);return y(e,"addGraphicItem",this,3)([nt,at,lt])}},{"key":"createElement","value":function(){return new _V(this)}}])}(RN);SV.markType=MH.glyph;var tV=function(){Pj.registerMark(MH.glyph,SV)},eV=function(nt){return function(at,lt,Rt){var Bt,Lt,Ht,jt=null!==(Ht=null!==(Bt=at.getGraphicAttribute("direction",!1))&&void 0!==Bt?Bt:null===(Lt=at.mark.getGlyphConfig())||void 0===Lt?void 0:Lt.direction)&&void 0!==Ht?Ht:"vertical",$t=nt(at,jt,lt);if(!Q($t))return{};var Kt=at.getGraphicAttribute("x",!1),te=at.getGraphicAttribute("y",!1),ne=at.getGraphicAttribute("min",!1),re=at.getGraphicAttribute("max",!1),ae=at.getGraphicAttribute("q1",!1),oe=at.getGraphicAttribute("q3",!1),se=at.getGraphicAttribute("median",!1),le={"from":{"x":Kt,"y":te},"to":{"x":Kt,"y":te}};return Q(ne)&&(le.from.min=$t,le.to.min=ne),Q(re)&&(le.from.max=$t,le.to.max=re),Q(ae)&&(le.from.q1=$t,le.to.q1=ae),Q(oe)&&(le.from.q3=$t,le.to.q3=oe),Q(se)&&(le.from.median=$t,le.to.median=se),le}},iV=function(nt){return function(at,lt,Rt){var Bt,Lt,Ht,jt=null!==(Ht=null!==(Bt=at.getGraphicAttribute("direction",!1))&&void 0!==Bt?Bt:null===(Lt=at.mark.getGlyphConfig())||void 0===Lt?void 0:Lt.direction)&&void 0!==Ht?Ht:"vertical",$t=nt(at,jt,lt);if(!Q($t))return{};var Kt=at.getGraphicAttribute("x",!0),te=at.getGraphicAttribute("y",!0),ne=at.getGraphicAttribute("min",!0),re=at.getGraphicAttribute("max",!0),ae=at.getGraphicAttribute("q1",!0),oe=at.getGraphicAttribute("q3",!0),se=at.getGraphicAttribute("median",!0),le={"from":{"x":Kt,"y":te},"to":{"x":Kt,"y":te}};return Q(ne)&&(le.to.min=$t,le.from.min=ne),Q(re)&&(le.to.max=$t,le.from.max=re),Q(ae)&&(le.to.q1=$t,le.from.q1=ae),Q(oe)&&(le.to.q3=$t,le.from.q3=oe),Q(se)&&(le.to.median=$t,le.from.median=se),le}},nV=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he;if(lt&&Q(lt.center))return lt.center;if(eS(at)){se=null===(Bt=null===(Rt=nt.getGraphicAttribute("points",!1,"median"))||void 0===Rt?void 0:Rt[0])||void 0===Bt?void 0:Bt.x,le=null===(Ht=null===(Lt=nt.getGraphicAttribute("points",!1,"max"))||void 0===Lt?void 0:Lt[0])||void 0===Ht?void 0:Ht.x,ue=null===($t=null===(jt=nt.getGraphicAttribute("points",!1,"min"))||void 0===jt?void 0:jt[0])||void 0===$t?void 0:$t.x;var de=nt.getGraphicAttribute("width",!1,"box"),fe=nt.getGraphicAttribute("x",!1,"box");ce=fe,he=fe+de}else{se=null===(te=null===(Kt=nt.getGraphicAttribute("points",!1,"median"))||void 0===Kt?void 0:Kt[0])||void 0===te?void 0:te.y,le=null===(re=null===(ne=nt.getGraphicAttribute("points",!1,"max"))||void 0===ne?void 0:ne[0])||void 0===re?void 0:re.y,ue=null===(oe=null===(ae=nt.getGraphicAttribute("points",!1,"min"))||void 0===ae?void 0:ae[0])||void 0===oe?void 0:oe.y;var pe=nt.getGraphicAttribute("height",!1,"box"),ve=nt.getGraphicAttribute("y",!1,"box");ce=ve,he=ve+pe}return Q(se)?se:Q(ce)&&Q(he)?(ce+he)/2:Q(le)&&Q(ue)?(le+ue)/2:Q(ue)?ue:Q(le)?le:NaN},rV=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te,ne,re={"shaft":{},"box":{},"max":{},"min":{},"median":{}},ae=null!==(Bt=nt.x)&&void 0!==Bt?Bt:lt.getGraphicAttribute("x",!1),oe=null!==(Lt=nt.y)&&void 0!==Lt?Lt:lt.getGraphicAttribute("y",!1),se=null!==(Ht=nt.width)&&void 0!==Ht?Ht:lt.getGraphicAttribute("width",!1),le=null!==(jt=nt.height)&&void 0!==jt?jt:lt.getGraphicAttribute("height",!1),ue=null!==($t=nt.boxWidth)&&void 0!==$t?$t:lt.getGraphicAttribute("boxWidth",!1),ce=null!==(Kt=nt.boxHeight)&&void 0!==Kt?Kt:lt.getGraphicAttribute("boxHeight",!1),he=null!==(te=nt.ruleWidth)&&void 0!==te?te:lt.getGraphicAttribute("ruleWidth",!1),de=null!==(ne=nt.ruleHeight)&&void 0!==ne?ne:lt.getGraphicAttribute("ruleHeight",!1);return Rt&&eS(Rt.direction)?(Q(ce)?(Object.assign(re.box,{"y":oe-ce/2,"y1":oe+ce/2}),Object.assign(re.median,{"y":oe-ce/2,"y1":oe+ce/2})):(Object.assign(re.box,{"y":oe-le/2,"y1":oe+le/2}),Object.assign(re.median,{"y":oe-le/2,"y1":oe+le/2})),Q(de)?(Object.assign(re.max,{"y":oe-de/2,"y1":oe+de/2}),Object.assign(re.min,{"y":oe-de/2,"y1":oe+de/2})):(Object.assign(re.max,{"y":oe-le/2,"y1":oe+le/2}),Object.assign(re.min,{"y":oe-le/2,"y1":oe+le/2}))):(Q(ue)?(Object.assign(re.box,{"x":ae-ue/2,"x1":ae+ue/2}),Object.assign(re.median,{"x":ae-ue/2,"x1":ae+ue/2})):(Object.assign(re.box,{"x":ae-se/2,"x1":ae+se/2}),Object.assign(re.median,{"x":ae-se/2,"x1":ae+se/2})),Q(he)?(Object.assign(re.max,{"x":ae-he/2,"x1":ae+he/2}),Object.assign(re.min,{"x":ae-he/2,"x1":ae+he/2})):(Object.assign(re.max,{"x":ae-se/2,"x1":ae+se/2}),Object.assign(re.min,{"x":ae-se/2,"x1":ae+se/2}))),re},wV=eV(nV),RV=iV(nV),sV=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne;if(Q(null==lt?void 0:lt.center))return lt.center;if(eS(at)){jt=null===(Bt=null===(Rt=nt.getGraphicAttribute("points",!1,"median"))||void 0===Rt?void 0:Rt[0])||void 0===Bt?void 0:Bt.x;var re=nt.getGraphicAttribute("width",!1,"minMaxBox"),ae=nt.getGraphicAttribute("x",!1,"minMaxBox");Kt=ae,$t=ae+re;var oe=nt.getGraphicAttribute("width",!1,"q1q3Box"),se=nt.getGraphicAttribute("x",!1,"q1q3Box");te=se,ne=se+oe}else{jt=null===(Ht=null===(Lt=nt.getGraphicAttribute("points",!1,"median"))||void 0===Lt?void 0:Lt[0])||void 0===Ht?void 0:Ht.y;var le=nt.getGraphicAttribute("height",!1,"minMaxBox"),ue=nt.getGraphicAttribute("y",!1,"minMaxBox");Kt=ue,$t=ue+le;var ce=nt.getGraphicAttribute("height",!1,"q1q3Box"),he=nt.getGraphicAttribute("y",!1,"q1q3Box");te=he,ne=he+ce}return Q(jt)?jt:Q(te)&&Q(ne)?(te+ne)/2:Q($t)&&Q(Kt)?($t+Kt)/2:Q(Kt)?Kt:Q($t)?$t:NaN},lV=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te,ne,re={"minMaxBox":{},"q1q3Box":{},"median":{}},ae=null!==(Bt=nt.x)&&void 0!==Bt?Bt:lt.getGraphicAttribute("x",!1),oe=null!==(Lt=nt.y)&&void 0!==Lt?Lt:lt.getGraphicAttribute("y",!1),se=null!==(Ht=nt.width)&&void 0!==Ht?Ht:lt.getGraphicAttribute("width",!1),le=null!==(jt=nt.minMaxWidth)&&void 0!==jt?jt:lt.getGraphicAttribute("minMaxWidth",!1),ue=null!==($t=nt.q1q3Width)&&void 0!==$t?$t:lt.getGraphicAttribute("q1q3Width",!1),ce=null!==(Kt=nt.height)&&void 0!==Kt?Kt:lt.getGraphicAttribute("height",!1),he=null!==(te=nt.minMaxHeight)&&void 0!==te?te:lt.getGraphicAttribute("minMaxHeight",!1),de=null!==(ne=nt.q1q3Height)&&void 0!==ne?ne:lt.getGraphicAttribute("q1q3Height",!1);return Rt&&eS(Rt.direction)?(Q(he)?Object.assign(re.minMaxBox,{"y":oe-he/2,"y1":oe+he/2}):Object.assign(re.minMaxBox,{"y":oe-ce/2,"y1":oe+ce/2}),Q(de)?(Object.assign(re.q1q3Box,{"y":oe-de/2,"y1":oe+de/2}),Object.assign(re.median,{"y":oe-de/2,"y1":oe+de/2})):(Object.assign(re.q1q3Box,{"y":oe-ce/2,"y1":oe+ce/2}),Object.assign(re.median,{"y":oe-ce/2,"y1":oe+ce/2}))):(Q(le)?Object.assign(re.minMaxBox,{"x":ae-le/2,"x1":ae+le/2}):Object.assign(re.minMaxBox,{"x":ae-se/2,"x1":ae+se/2}),Q(ue)?(Object.assign(re.q1q3Box,{"x":ae-ue/2,"x1":ae+ue/2}),Object.assign(re.median,{"x":ae-ue/2,"x1":ae+ue/2})):(Object.assign(re.q1q3Box,{"x":ae-se/2,"x1":ae+se/2}),Object.assign(re.median,{"x":ae-se/2,"x1":ae+se/2}))),re},eW=eV(sV),aW=iV(sV),hV=function(nt,at){var lt,Rt=null!==(lt=nt.curvature)&&void 0!==lt?lt:.5,Bt="number"==typeof at?nt.thickness*at:nt.thickness,Lt=nt.x0,Ht=nt.x1,jt=nt.y0,$t=nt.y1,Kt=Lt+Rt*(Ht-Lt),te=Ht+Rt*(Lt-Ht),h=function(nt){return nt};!1!==nt.round&&(Lt=Math.round(Lt),Ht=Math.round(Ht),jt=Math.round(jt),$t=Math.round($t),Kt=Math.round(Kt),te=Math.round(te),h=Math.round),"line"===nt.pathType||nt.pathType,"center"===nt.align?(jt=h(nt.y0-Bt/2),$t=h(nt.y1-Bt/2)):"end"===nt.align?(jt=h(nt.y0+nt.thickness/2-Bt),$t=h(nt.y1+nt.thickness/2-Bt)):(jt=h(nt.y0-nt.thickness/2),$t=h(nt.y1-nt.thickness/2));var ne=h(jt+Bt),re=h($t+Bt),ae=Math.abs(Ht-Lt)>1e-6,oe=nt.endArrow&&ae?"L".concat(Ht,",").concat(h($t-Bt/2),"L").concat(h(Ht+Bt),",").concat(h(($t+re)/2),"L").concat(Ht,",").concat(h(re+Bt/2)):"",se=nt.startArrow&&ae?"L".concat(Lt,",").concat(h(ne+Bt/2),"L").concat(h(Lt-Bt),",").concat(h((jt+ne)/2),"L").concat(Lt,",").concat(h(jt-Bt/2)):"";return"line"===nt.pathType?"M".concat(Lt,",").concat(jt,"L").concat(Ht,",").concat($t).concat(oe,"L").concat(Ht,",").concat(re,"L").concat(Lt,",").concat(ne).concat(se,"Z"):"polyline"===nt.pathType?"M".concat(Lt,",").concat(jt,"L").concat(Kt,",").concat(jt,"L").concat(Kt,",").concat($t,"L").concat(Ht,",").concat($t,"\n    ").concat(oe,"L").concat(Ht,",").concat(re,"L").concat(Kt,",").concat(re,"L").concat(Kt,",").concat(ne,"L").concat(Lt,",").concat(ne).concat(se,"Z"):"M".concat(Lt,",").concat(jt,"C").concat(Kt,",").concat(jt,",").concat(te,",").concat($t,",").concat(Ht,",").concat($t,"\n  ").concat(oe,"L").concat(Ht,",").concat(re,"C").concat(te,",").concat(re,",").concat(Kt,",").concat(ne,",").concat(Lt,",").concat(ne).concat(se,"Z")},dV=function(nt,at){var lt,Rt=null!==(lt=nt.curvature)&&void 0!==lt?lt:.5,Bt="number"==typeof at?nt.thickness*at:nt.thickness,Lt=nt.y0,Ht=nt.y1,jt=nt.x0,$t=nt.x1,Kt=Lt+Rt*(Ht-Lt),te=Ht+Rt*(Lt-Ht),h=function(nt){return nt};!1!==nt.round&&(h=Math.round,Lt=Math.round(Lt),Ht=Math.round(Ht),jt=Math.round(jt),$t=Math.round($t),Kt=Math.round(Kt),te=Math.round(te)),"line"===nt.pathType||nt.pathType,"center"===nt.align?(jt=h(nt.x0-Bt/2),$t=h(nt.x1-Bt/2)):"end"===nt.align?(jt=h(nt.x0+nt.thickness/2-Bt),$t=h(nt.x1+nt.thickness/2-Bt)):(jt=h(nt.x0-nt.thickness/2),$t=h(nt.x1-nt.thickness/2));var ne=h(jt+Bt),re=h($t+Bt),ae=Math.abs(Ht-Lt)>1e-6,oe=nt.endArrow&&ae?"L".concat(h($t-Bt/2),",").concat(Ht,"L").concat(h(($t+re)/2),",").concat(h(Ht+Bt),"L").concat(h(re+Bt/2),",").concat(Ht):"",se=nt.startArrow&&ae?"L".concat(h(ne+Bt/2),",").concat(Lt,"L").concat(h((ne+jt)/2),",").concat(h(Lt-Bt),"L").concat(h(jt-Bt/2),",").concat(Lt):"";return"line"===nt.pathType?"M".concat(jt,",").concat(Lt,"L").concat($t,",").concat(Ht).concat(oe,"L").concat(re,",").concat(Ht,"L").concat(ne,",").concat(Lt).concat(se,"Z"):"polyline"===nt.pathType?"M".concat(jt,",").concat(Lt,"L").concat(jt,",").concat(Kt,"L").concat($t,",").concat(Kt,"L").concat($t,",").concat(Ht,"\n    ").concat(oe,"L").concat(re,",").concat(Ht,"L").concat(re,",").concat(Kt,"L").concat(ne,",").concat(Kt,"L").concat(ne,",").concat(Lt).concat(se,"Z"):"M".concat(jt,",").concat(Lt,"C").concat(jt,",").concat(Kt,",").concat($t,",").concat(te,",").concat($t,",").concat(Ht,"\n  ").concat(oe,"L").concat(re,",").concat(Ht,"C").concat(re,",").concat(te,",").concat(ne,",").concat(Kt,",").concat(ne,",").concat(Lt).concat(se,"Z")},pV=function(nt,at,lt,Rt){var Bt,Lt=null!==(Bt=nt.direction)&&void 0!==Bt?Bt:null==Rt?void 0:Rt.direction,Ht=["vertical","TB","BT"].includes(Lt)?dV:hV,jt="number"==typeof nt.ratio&&nt.ratio>=0&&nt.ratio<=1,$t=Object.keys(nt);return["x0","y0","x1","y1"].every((function(nt){return $t.includes(nt)}))?{"back":{"path":jt?Ht(nt,1):""},"front":{"path":Ht(nt,jt?nt.ratio:1)}}:{}},fV=function(nt,at,lt){var Rt={"x0":nt.getGraphicAttribute("x0",!1),"x1":nt.getGraphicAttribute("x1",!1),"y0":nt.getGraphicAttribute("y0",!1),"y1":nt.getGraphicAttribute("y1",!1),"thickness":nt.getGraphicAttribute("thickness",!1),"round":nt.getGraphicAttribute("round",!1),"align":nt.getGraphicAttribute("align",!1),"pathType":nt.getGraphicAttribute("pathType",!1),"endArrow":nt.getGraphicAttribute("endArrow",!1),"startArrow":nt.getGraphicAttribute("startArrow",!1)};return Object.keys(Rt).forEach((function(nt){j(Rt[nt])&&delete Rt[nt]})),{"from":Object.assign({},Rt,{"x1":Rt.x0,"y1":Rt.y0}),"to":Rt}},vV=function(nt,at,lt){var Rt={"x0":nt.getGraphicAttribute("x0",!0),"x1":nt.getGraphicAttribute("x1",!0),"y0":nt.getGraphicAttribute("y0",!0),"y1":nt.getGraphicAttribute("y1",!0),"thickness":nt.getGraphicAttribute("thickness",!0),"round":nt.getGraphicAttribute("round",!0),"align":nt.getGraphicAttribute("align",!0),"pathType":nt.getGraphicAttribute("pathType",!0),"endArrow":nt.getGraphicAttribute("endArrow",!0),"startArrow":nt.getGraphicAttribute("startArrow",!0)};return Object.keys(Rt).forEach((function(nt){j(Rt[nt])&&delete Rt[nt]})),{"from":Rt,"to":Object.assign({},Rt,{"x1":Rt.x0,"y1":Rt.y0})}},gV=function(nt,at,lt){var Rt={"thickness":nt.getGraphicAttribute("thickness",!1),"round":nt.getGraphicAttribute("round",!1),"align":nt.getGraphicAttribute("align",!1),"pathType":nt.getGraphicAttribute("pathType",!1),"endArrow":nt.getGraphicAttribute("endArrow",!1),"startArrow":nt.getGraphicAttribute("startArrow",!1)};return Object.keys(Rt).forEach((function(nt){j(Rt[nt])&&delete Rt[nt]})),{"from":Object.assign(Object.assign({"x0":nt.getGraphicAttribute("x0",!0),"x1":nt.getGraphicAttribute("x1",!0),"y0":nt.getGraphicAttribute("y0",!0),"y1":nt.getGraphicAttribute("y1",!0)},Rt),Rt),"to":Object.assign({"x0":nt.getGraphicAttribute("x0",!1),"x1":nt.getGraphicAttribute("x1",!1),"y0":nt.getGraphicAttribute("y0",!1),"y1":nt.getGraphicAttribute("y1",!1)},Rt)}},oW=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"parseAddition","value":function(nt){return y(e,"parseAddition",this,3)([nt]),this.scale(nt.scale),this}},{"key":"scale","value":function(nt){if(this.spec.scale){var at=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this.detach(at),this.spec.scale=void 0}var lt=Y(nt)?this.view.getScaleById(nt):nt;return this.spec.scale=lt,this.attach(lt),this._updateComponentEncoders(),this.commit(),this}},{"key":"getScale","value":function(){return Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale}}])}(aV),mV=function(nt,at,lt,Rt,Bt,Lt){var Ht,jt=nt.getCoordinateAxisPosition();Bt&&"auto"===Bt.position&&(Bt.position=lt?"content":jt);var $t=nt.getCoordinateAxisPoints(Rt);if($t){var Kt={"start":$t[0],"end":$t[1],"verticalFactor":("top"===jt||"left"===jt?-1:1)*(lt?-1:1)*((null===(Ht=nt.getSpec().range)||void 0===Ht?void 0:Ht.reversed)?-1:1)};if(Lt&&"polar"===at.type){var te=at.angle();Kt.center=at.origin(),Kt.startAngle=te[0],Kt.endAngle=te[1]}return Kt}var ne=at.radius(),re=at.angle();return{"center":at.origin(),"radius":ne[1],"innerRadius":ne[0],"inside":lt,"startAngle":re[0],"endAngle":re[1]}},sW=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[nt,TH.axis,at])).spec.componentType=TH.axis,Rt.mode=lt,Rt}return h(e,nt),o(e,[{"key":"parseAddition","value":function(nt){return y(e,"parseAddition",this,3)([nt]),this.axisType(nt.axisType),this.tickCount(nt.tickCount),this.inside(nt.inside),this.baseValue(nt.baseValue),this}},{"key":"scale","value":function(nt){return y(e,"scale",this,3)([nt]),this._axisComponentType=null,this}},{"key":"axisType","value":function(nt){return this.spec.axisType=nt,this._axisComponentType=null,this._prepareRejoin(),this.commit(),this}},{"key":"addGraphicItem","value":function(nt,at){var lt=ft({"x":0,"y":0,"start":{"x":0,"y":0},"end":{"x":0,"y":0}},nt),Rt=Pj.createGraphicComponent(this._getAxisComponentType(),lt,{"mode":this.mode,"skipDefault":this.spec.skipTheme});return y(e,"addGraphicItem",this,3)([lt,at,Rt])}},{"key":"tickCount","value":function(nt){var at=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return at&&at.tickCount(nt),this.setFunctionSpec(nt,"tickCount")}},{"key":"inside","value":function(nt){return this.setFunctionSpec(nt,"inside")}},{"key":"baseValue","value":function(nt){return this.setFunctionSpec(nt,"baseValue")}},{"key":"getAxisComponentType","value":function(){return this._axisComponentType}},{"key":"_updateComponentEncoders","value":function(){var nt=this,at=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale,lt=Object.assign({"update":{}},this.spec.encode),Rt=Object.keys(lt).reduce((function(Rt,Bt){var Lt=lt[Bt];return Lt&&(Rt[Bt]={"callback":function(lt,Rt,Bt){var Ht,jt,$t=nt.spec.skipTheme?null:nt.view.getCurrentTheme(),Kt=fj(Lt,lt,Rt,Bt),te=aj(nt.spec.inside,Bt,lt,Rt),ne=aj(nt.spec.baseValue,Bt,lt,Rt),re=null===(Ht=null==at?void 0:at.getCoordinate)||void 0===Ht?void 0:Ht.call(at);re&&(Kt=Object.assign(mV(at,re,te,ne,nt.spec.layout),Kt));var ae=null===(jt=null==at?void 0:at.getScale)||void 0===jt?void 0:jt.call(at),oe=aj(nt.spec.tickCount,Bt,lt,Rt);switch(nt._getAxisComponentType()){case PH.lineAxis:return function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=null!==(Lt=null===(Bt=null==at?void 0:at.components)||void 0===Bt?void 0:Bt.axis)&&void 0!==Lt?Lt:{};return nt?ft({},$t,{"items":[(null!==(jt=null===(Ht=nt.tickData)||void 0===Ht?void 0:Ht.call(nt,Rt))&&void 0!==jt?jt:[]).map((function(nt){return{"id":nt.index,"label":nt.tick,"value":nt.value,"rawValue":nt.tick}}))]},null!=lt?lt:{}):ft({},$t,null!=lt?lt:{})}(ae,$t,Kt,oe);case PH.circleAxis:return function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=null!==(Lt=null===(Bt=null==at?void 0:at.components)||void 0===Bt?void 0:Bt.circleAxis)&&void 0!==Lt?Lt:{};return nt?ft({},$t,{"items":[(null!==(jt=null===(Ht=nt.tickData)||void 0===Ht?void 0:Ht.call(nt,Rt))&&void 0!==jt?jt:[]).map((function(nt){return{"id":nt.index,"label":nt.tick,"value":nt.value,"rawValue":nt.tick}}))]},null!=lt?lt:{}):ft({},$t,null!=lt?lt:{})}(ae,$t,Kt,oe)}return Kt}}),Rt}),{});this._encoders=Rt}},{"key":"_getAxisComponentType","value":function(){var nt;if(this._axisComponentType)return this._axisComponentType;var at=this.spec.axisType;if(j(at)){var lt=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;at=(null===(nt=null==lt?void 0:lt.getCoordinate)||void 0===nt?void 0:nt.call(lt))?lt.getCoordinateAxisPoints()?"line":"circle":"line"}return this._axisComponentType="circle"===at?PH.circleAxis:PH.lineAxis,this._axisComponentType}}])}(oW);sW.componentType=TH.axis;var bV=function(){Pj.registerGraphicComponent(PH.lineAxis,(function(nt,at){return new _I(nt,at)})),Pj.registerComponent(TH.axis,sW)},xV=function(){Pj.registerGraphicComponent(PH.circleAxis,(function(nt){return new MI(nt)})),Pj.registerComponent(TH.axis,sW)},kV=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt},lW=function(nt){function e(nt,at){var lt;return r(this,e),(lt=n(this,e,[nt,TH.label,at])).spec.componentType=TH.label,lt}return h(e,nt),o(e,[{"key":"parseAddition","value":function(nt){return y(e,"parseAddition",this,3)([nt]),this.labelStyle(nt.labelStyle),this.size(nt.size),this.target(nt.target),this}},{"key":"labelStyle","value":function(nt){return this.setFunctionSpec(nt,"labelStyle")}},{"key":"size","value":function(nt){return this.setFunctionSpec(nt,"size")}},{"key":"target","value":function(nt){var at=this;if(this.spec.target){var lt=xt(this.spec.target).map((function(nt){return Y(nt)?at.view.getMarkById(nt):nt}));this.detach(lt)}if(this.spec.target=nt,nt){var Rt=xt(nt).map((function(nt){return Y(nt)?at.view.getMarkById(nt):nt}));this.attach(Rt)}return this.commit(),this}},{"key":"_updateComponentEncoders","value":function(){var nt=this,at=Object.assign({"update":{}},this.spec.encode),lt=Object.keys(at).reduce((function(lt,Rt){var Bt=at[Rt];return Bt&&(lt[Rt]={"callback":function(at,lt,Rt){var Lt,Ht,jt,$t,Kt=xt(nt.spec.target).map((function(at){return Y(at)?nt.view.getMarkById(at):at})),te=null===(Ht=null===(Lt=nt.group)||void 0===Lt?void 0:Lt.getGroupGraphicItem)||void 0===Ht?void 0:Ht.call(Lt),ne=aj(nt.spec.size,Rt);ne||(ne=te?{"width":null!==(jt=te.attribute.width)&&void 0!==jt?jt:te.AABBBounds.width(),"height":null!==($t=te.attribute.height)&&void 0!==$t?$t:te.AABBBounds.height()}:{"width":1/0,"height":1/0});var re=nt.spec.skipTheme?null:nt.view.getCurrentTheme();return function(nt,at,lt,Rt,Bt){var Lt,Ht=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},jt=null===(Lt=Ht.components)||void 0===Lt?void 0:Lt.dataLabel,$t=nt.map((function(nt,at){var Lt,jt,$t,Kt,te,ne=Object.assign(Object.assign({},Bt),{"labelIndex":at}),re=null!==(Lt=aj(Rt,ne,nt))&&void 0!==Lt?Lt:{},ae=Ht.components,oe=void 0===ae?{}:ae,se={};switch(nt.markType){case MH.line:case MH.area:se="line"===re.type?oe.lineLabel:"area"===re.type?oe.areaLabel:oe.lineDataLabel;break;case MH.rect:case MH.rect3d:case MH.interval:se=oe.rectLabel;break;case MH.symbol:case MH.circle:case MH.cell:se=oe.symbolLabel;break;case MH.arc:case MH.arc3d:se=oe.arcLabel;break;case MH.polygon:case MH.path:default:se=oe.pointLabel}var le=null!==(jt=re.data)&&void 0!==jt?jt:[],ue=null!==(Kt=null===($t=null==se?void 0:se.data)||void 0===$t?void 0:$t[0])&&void 0!==Kt?Kt:{};if(le&&le.length>0)le.forEach((function(at,Rt){if(nt.elements[Rt]){var Bt=fj(lt,at,nt.elements[Rt],ne);ft(at,ue,Bt)}}));else{var m=function(nt,at){var lt=nt.data,Rt=kV(nt,["data"]);return Object.assign(Object.assign({},ft({},at,Rt)),{"data":lt})};nt.elements.forEach((function(at){if("willRelease"!==at.getGraphicItem().releaseStatus)if(nt.isCollectionMark())at.getDatum().forEach((function(nt){var Rt=fj(lt,nt,at,ne);le.push(m(Rt,ue))}));else{var Rt=fj(lt,at.getDatum(),at,ne);le.push(m(Rt,ue))}}))}var ce=ft({},se,{"baseMarkGroupName":null===(te=nt.graphicItem)||void 0===te?void 0:te.name,"getBaseMarks":function(){return nt.elements.map((function(nt){return nt.getGraphicItem()}))}},null!=re?re:{});return ce.data=null!=le?le:se.data,ce})).filter((function(nt){return!j(nt)})),Kt=ft({},jt,{"size":at});return Kt.dataLabels=$t,Kt}(Kt,ne,Bt,nt.spec.labelStyle,Rt,re)}}),lt}),{});this._encoders=lt}}])}(aV);lW.componentType=TH.label;var AV=function(){Pj.registerGraphicComponent(TH.label,(function(nt){return new wO(nt)})),Pj.registerComponent(TH.label,lW)},uW=function(nt){function e(nt,at,lt){var Rt;return r(this,e),(Rt=n(this,e,[nt,TH.grid,at])).spec.componentType=TH.grid,Rt.mode=lt,Rt}return h(e,nt),o(e,[{"key":"parseAddition","value":function(nt){return y(e,"parseAddition",this,3)([nt]),this.target(nt.target),this.gridType(nt.gridType),this.gridShape(nt.gridShape),this}},{"key":"scale","value":function(nt){return y(e,"scale",this,3)([nt]),this._gridComponentType=null,this}},{"key":"gridType","value":function(nt){return this.spec.gridType=nt,this._gridComponentType=null,this._prepareRejoin(),this.commit(),this}},{"key":"gridShape","value":function(nt){return this.spec.gridShape=nt,this.commit(),this}},{"key":"target","value":function(nt){if(this.spec.target){var at=Y(this.spec.target)?this.view.getMarkById(this.spec.target):this.spec.target;this.detach(at)}this.spec.target=nt;var lt=Y(nt)?this.view.getMarkById(nt):nt;return this.attach(lt),this._targetAxis=lt,this._gridComponentType=null,this._updateComponentEncoders(),this.commit(),this}},{"key":"tickCount","value":function(nt){var at=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;return at&&at.tickCount(nt),this.setFunctionSpec(nt,"tickCount")}},{"key":"inside","value":function(nt){return this.setFunctionSpec(nt,"inside")}},{"key":"baseValue","value":function(nt){return this.setFunctionSpec(nt,"baseValue")}},{"key":"addGraphicItem","value":function(nt,at){var lt=ft({"x":0,"y":0,"start":{"x":0,"y":0},"end":{"x":0,"y":0}},nt),Rt=Pj.createGraphicComponent(this._getGridComponentType(),lt,{"mode":this.mode,"skipDefault":this.spec.skipTheme});return y(e,"addGraphicItem",this,3)([lt,at,Rt])}},{"key":"_updateComponentEncoders","value":function(){var nt=this,at=Object.assign({"update":{}},this.spec.encode),lt=Object.keys(at).reduce((function(lt,Rt){var Bt=at[Rt];return Bt&&(lt[Rt]={"callback":function(at,lt,Rt){var Lt,Ht,jt,$t,Kt,te=nt.spec.skipTheme?null:nt.view.getCurrentTheme(),ne=fj(Bt,at,lt,Rt),re=aj(nt.spec.baseValue,Rt,at,lt);if(nt._targetAxis){var ae=null===(Lt=nt._targetAxis.getSpec())||void 0===Lt?void 0:Lt.scale;Kt=Y(ae)?nt.view.getScaleById(ae):ae;var oe=nt._targetAxis.elements[0];if(oe)switch(nt._getGridComponentType()){case RH.lineAxisGrid:ne=Object.assign({"x":oe.getGraphicAttribute("x"),"y":oe.getGraphicAttribute("y"),"start":oe.getGraphicAttribute("start"),"end":oe.getGraphicAttribute("end"),"verticalFactor":null!==(Ht=oe.getGraphicAttribute("verticalFactor"))&&void 0!==Ht?Ht:1},ne);break;case RH.circleAxisGrid:ne=Object.assign({"x":oe.getGraphicAttribute("x"),"y":oe.getGraphicAttribute("y"),"center":oe.getGraphicAttribute("center"),"radius":oe.getGraphicAttribute("radius"),"innerRadius":oe.getGraphicAttribute("innerRadius"),"inside":oe.getGraphicAttribute("inside"),"startAngle":oe.getGraphicAttribute("startAngle"),"endAngle":oe.getGraphicAttribute("endAngle")},ne)}}else{Kt=Y(nt.spec.scale)?nt.view.getScaleById(nt.spec.scale):nt.spec.scale;var se=aj(nt.spec.inside,Rt,at,lt),le=null===(jt=null==Kt?void 0:Kt.getCoordinate)||void 0===jt?void 0:jt.call(Kt);le&&(ne=Object.assign(mV(Kt,le,se,re,nt.spec.layout,!0),ne))}nt._getGridComponentType()===RH.lineAxisGrid&&(ne="line"!==nt.spec.gridShape&&nt.spec.gridShape?Object.assign({"center":ne.start,"closed":!0},ne,{"type":nt.spec.gridShape}):Object.assign({},ne,{"type":"line"}));var ue=null===($t=null==Kt?void 0:Kt.getScale)||void 0===$t?void 0:$t.call(Kt),ce=aj(nt.spec.tickCount,Rt,at,lt);switch(nt._getGridComponentType()){case RH.lineAxisGrid:return function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=null!==(Lt=null===(Bt=null==at?void 0:at.components)||void 0===Bt?void 0:Bt.grid)&&void 0!==Lt?Lt:{};return nt?ft({},$t,{"items":(null!==(jt=null===(Ht=nt.tickData)||void 0===Ht?void 0:Ht.call(nt,Rt))&&void 0!==jt?jt:[]).map((function(nt){return{"id":nt.index,"label":nt.tick,"value":nt.value,"rawValue":nt.tick}}))},null!=lt?lt:{}):ft({},$t,null!=lt?lt:{})}(ue,te,ne,ce);case RH.circleAxisGrid:return function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=null!==(Lt=null===(Bt=null==at?void 0:at.components)||void 0===Bt?void 0:Bt.circleGrid)&&void 0!==Lt?Lt:{};return nt?ft({},$t,{"items":(null!==(jt=null===(Ht=nt.tickData)||void 0===Ht?void 0:Ht.call(nt,Rt))&&void 0!==jt?jt:[]).map((function(nt){return{"id":nt.index,"label":nt.tick,"value":nt.value,"rawValue":nt.tick}}))},null!=lt?lt:{}):ft({},$t,null!=lt?lt:{})}(ue,te,ne,ce)}return ne}}),lt}),{});this._encoders=lt}},{"key":"_getGridComponentType","value":function(){var nt;if(this._gridComponentType)return this._gridComponentType;if(this.spec.gridType)"circle"===this.spec.gridType?this._gridComponentType=RH.circleAxisGrid:this._gridComponentType=RH.lineAxisGrid;else if(this._targetAxis)switch(this._targetAxis.getAxisComponentType()){case PH.circleAxis:this._gridComponentType=RH.circleAxisGrid;break;case PH.lineAxis:default:this._gridComponentType=RH.lineAxisGrid}else if(this.spec.scale){var at=Y(this.spec.scale)?this.view.getScaleById(this.spec.scale):this.spec.scale;this._gridComponentType=(null===(nt=null==at?void 0:at.getCoordinate)||void 0===nt?void 0:nt.call(at))?at.getCoordinateAxisPoints()?RH.lineAxisGrid:RH.circleAxisGrid:RH.lineAxisGrid}else this._gridComponentType=RH.lineAxisGrid;return this._gridComponentType}}])}(oW);uW.componentType=TH.grid;var MV=function(){Pj.registerGraphicComponent(RH.lineAxisGrid,(function(nt,at){return new TO(nt,at)})),Pj.registerComponent(TH.grid,uW)},TV=function(){Pj.registerGraphicComponent(RH.circleAxisGrid,(function(nt,at){return new PO(nt,at)})),Pj.registerComponent(TH.grid,uW)},CV=function(nt,at,lt){return at.filter((function(at){return nt.callback(at,lt)}))},EV=function(nt,at,lt){var Rt=nt.callback,Bt=nt.as;if(!nt.all)return at.forEach((function(nt){var at=Rt(nt,lt);if(!j(Bt)){if(j(nt))return;nt[Bt]=at}return at})),at;var Lt=Rt(at,lt);return j(Bt)||j(at)?Lt:(at[Bt]=Lt,at)};function PV(nt){return nt.reduce((function(nt,at){return nt+at}),0)}var cW={"min":At,"max":St,"average":function(nt){return 0===nt.length?0:PV(nt)/nt.length},"sum":PV};function BV(nt,at,lt,Rt){var Bt,Lt,Ht,jt=Math.floor(at.length/nt),$t=[],Kt=at.length,te=0,ne=0;$t[ne++]=te;for(var re=1;re<Kt-1;re+=jt){for(var ae=Math.min(re+jt,Kt-1),oe=Math.min(re+2*jt,Kt),se=(oe+ae)/2,le=0,ue=ae;ue<oe;ue++){var ce=at[ue][Rt];Number.isNaN(ce)||(le+=ce)}le/=oe-ae;var he=re,de=Math.min(re+jt,Kt),fe=re-1,pe=at[te][Rt];Bt=-1,Ht=he;for(var ve=he;ve<de;ve++){var Ae=at[ve][Rt];Number.isNaN(Rt)||(Lt=Math.abs((fe-se)*(Ae-pe)-(fe-ve)*(le-pe)))>Bt&&(Bt=Lt,Ht=ve)}$t[ne++]=Ht,te=Ht}return $t[ne-1]!==Kt-1&&($t[ne++]=Kt-1),$t.map((function(nt){return lt?at[nt].i:nt}))}function IV(nt,at,lt,Rt,Bt){var Lt=Math.floor(at.length/nt),Ht=[],jt=at.length,$t=0,Kt=[];Ht.push($t),at[$t][Bt]=at[$t][Bt];for(var te=1;te<jt-1;te+=Lt){Lt>jt-te&&(Lt=jt-te,Kt.length=Lt),Kt=[];for(var ne=0;ne<Lt;ne++)Kt.push(at[te+ne][Bt]);var re=cW[Rt](Kt);$t=Math.min(Math.round(te+Kt.length/2)||0,jt-1),at[$t][Bt]=re,Ht.push($t)}return Ht.map((function(nt){return lt?at[nt].i:nt}))}function LV(nt,at,lt,Rt){return IV(nt,at,lt,"min",Rt)}function DV(nt,at,lt,Rt){return IV(nt,at,lt,"max",Rt)}function OV(nt,at,lt,Rt){return IV(nt,at,lt,"average",Rt)}function FV(nt,at,lt,Rt){return IV(nt,at,lt,"sum",Rt)}var zV=function(nt,at){var lt=nt.size,Rt=nt.factor||1;if(Array.isArray(lt)&&(lt=Math.floor(lt[1]-lt[0])),(lt*=Rt)<=0)return[];if(at.length<=lt)return at;if(nt.skipfirst)return at.slice(0,1);var Bt=nt.mode,Lt=nt.yfield,Ht=nt.groupBy,jt=null!=Lt?Lt:"y",$t=BV;if("min"===Bt?$t=LV:"max"===Bt?$t=DV:"average"===Bt?$t=OV:"sum"===Bt&&($t=FV),at.length){var Kt={};if(Ht){for(var te=0,ne=at.length;te<ne;te++){var re=at[te],ae=re[Ht];Kt[ae]||(Kt[ae]=[]),Kt[ae].push(l(l({},jt,re[jt]),"i",te))}var oe=[];return Object.keys(Kt).forEach((function(nt){var Rt=Kt[nt];if(Rt.length<=lt){var Bt=Rt.map((function(nt){return nt.i}));oe=oe.concat(Bt)}else{var Lt=$t(lt,Rt,!0,jt);oe=oe.concat(Lt),Rt.forEach((function(nt){return at[nt.i][jt]=nt[jt]}))}})),oe.sort((function(nt,at){return nt-at})),oe.map((function(nt){return at[nt]}))}return $t(lt,at,!1,jt).map((function(nt){return at[nt]}))}return[]},HV=function(nt,at){if(at&&0!==at.length){var lt=nt.radius;j(lt)&&"symbol"===at[0].mark.markType&&(lt=!0);var Rt=nt.direction,Bt=nt.delta,Lt=nt.deltaMul,Ht=void 0===Lt?1:Lt,jt=nt.groupBy,l=function(at){!function(nt){nt.forEach((function(nt){nt.getGraphicAttribute(Cj)&&(nt.setGraphicAttribute("visible",!0),nt.setGraphicAttribute(Cj,!1))}))}(at);var Lt=nt.sort?at.slice().sort((function(nt,at){return nt.getGraphicAttribute("x")-at.getGraphicAttribute("x")})):at;0===Rt?function(nt,at,lt,Rt){if(Rt){var Bt=-1/0,Lt=0,Ht=j(at),jt=at;nt.forEach((function(nt){if(!1!==nt.getGraphicAttribute("visible")){var at=nt.getGraphicAttribute("size")/2,Rt=nt.getGraphicAttribute("x"),$t=nt.getGraphicAttribute("y");Ht&&(jt=(at+Lt)*lt),Math.pow(-1/0-Rt,2)+Math.pow(Bt-$t,2)<Math.pow(jt+Lt+at,2)?nt.getGraphicAttribute("forceShow")||(nt.setGraphicAttribute(Cj,!0),nt.setGraphicAttribute("visible",!1)):Bt=$t,Lt=at}}))}}(Lt,Bt,Ht,lt):1===Rt?function(nt,at,lt,Rt){if(Rt){var Bt=-1/0,Lt=0,Ht=j(at),jt=at;nt.forEach((function(nt){if(!1!==nt.getGraphicAttribute("visible")){var at=nt.getGraphicAttribute("size")/2,Rt=nt.getGraphicAttribute("x");Ht&&(jt=(at+Lt)*lt),Math.abs(Rt-Bt)<jt+Lt+at?nt.getGraphicAttribute("forceShow")||(nt.setGraphicAttribute(Cj,!0),nt.setGraphicAttribute("visible",!1)):Bt=Rt,Lt=at}}))}}(Lt,Bt,Ht,lt):function(nt,at,lt,Rt){if(Rt){var Bt=-1/0,Lt=0,Ht=j(at),jt=at;nt.forEach((function(nt){if(!1!==nt.getGraphicAttribute("visible")){var at=nt.getGraphicAttribute("size")/2,Rt=nt.getGraphicAttribute("y");Ht&&(jt=(at+Lt)*lt),Math.abs(Rt-Bt)<jt+Lt+at?nt.getGraphicAttribute("forceShow")||(nt.setGraphicAttribute(Cj,!0),nt.setGraphicAttribute("visible",!1)):Bt=Rt,Lt=at}}))}}(Lt,Bt,Ht,lt)};if(jt){var $t=at.reduce((function(nt,at){var lt=at.getDatum()[jt];return nt[lt]?nt[lt].push(at):nt[lt]=[at],nt}),{});Object.keys($t).forEach((function(nt){l($t[nt])}))}else l(at);return at}},jV=function(){Pj.registerTransform("sampling",{"transform":zV,"markPhase":"afterEncode"},!0)},NV=function(){Pj.registerTransform("markoverlap",{"transform":HV,"markPhase":"afterEncode"},!0)},VV=function(nt,at,lt){var Rt,Bt=nt.getGraphicAttribute("clipRangeByDimension",!1),Lt=null!==(Rt=nt.getGraphicAttribute("clipRange",!1))&&void 0!==Rt?Rt:1;return at&&at.clipDimension?{"from":{"clipRange":0,"clipRangeByDimension":at.clipDimension},"to":{"clipRange":Lt,"clipRangeByDimension":Bt}}:{"from":{"clipRange":0},"to":{"clipRange":Lt}}},GV=function(nt,at,lt){var Rt,Bt=nt.getGraphicAttribute("clipRangeByDimension",!0),Lt=null!==(Rt=nt.getGraphicAttribute("clipRange",!0))&&void 0!==Rt?Rt:1;return at&&at.clipDimension?{"from":{"clipRange":Lt,"clipRangeByDimension":at.clipDimension},"to":{"clipRange":0,"clipRangeByDimension":Bt}}:{"from":{"clipRange":Lt},"to":{"clipRange":0}}},WV=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=null!==(Rt=nt.getFinalAnimationAttributes())&&void 0!==Rt?Rt:{};return{"from":{"opacity":0,"fillOpacity":0,"strokeOpacity":0},"to":{"opacity":null!==(Bt=jt.opacity)&&void 0!==Bt?Bt:1,"fillOpacity":null!==(Lt=jt.fillOpacity)&&void 0!==Lt?Lt:1,"strokeOpacity":null!==(Ht=jt.strokeOpacity)&&void 0!==Ht?Ht:1}}},UV=function(nt,at,lt){var Rt,Bt,Lt;return{"from":{"opacity":null!==(Rt=nt.getGraphicAttribute("opacity",!0))&&void 0!==Rt?Rt:1,"fillOpacity":null!==(Bt=nt.getGraphicAttribute("fillOpacity",!0))&&void 0!==Bt?Bt:1,"strokeOpacity":null!==(Lt=nt.getGraphicAttribute("strokeOpacity",!0))&&void 0!==Lt?Lt:1},"to":{"opacity":0,"fillOpacity":0,"strokeOpacity":0}}},YV=function(nt,at,lt){switch(null==at?void 0:at.direction){case"x":var Rt=nt.getFinalAnimationAttribute("x"),Bt=nt.getFinalAnimationAttribute("x1"),Lt=nt.getFinalAnimationAttribute("width");return{"from":N(Lt)?{"x":Rt+Lt/2,"x1":void 0,"width":0}:{"x":(Rt+Bt)/2,"x1":(Rt+Bt)/2,"width":void 0},"to":{"x":Rt,"x1":Bt,"width":Lt}};case"y":var Ht=nt.getFinalAnimationAttribute("y"),jt=nt.getFinalAnimationAttribute("y1"),$t=nt.getFinalAnimationAttribute("height");return{"from":N($t)?{"y":Ht+$t/2,"y1":void 0,"height":0}:{"y":(Ht+jt)/2,"y1":(Ht+jt)/2,"height":void 0},"to":{"y":Ht,"y1":jt,"height":$t}};default:var Kt=nt.getFinalAnimationAttribute("x"),te=nt.getFinalAnimationAttribute("x1"),ne=nt.getFinalAnimationAttribute("width"),re=nt.getFinalAnimationAttribute("y"),ae=nt.getFinalAnimationAttribute("y1"),oe=nt.getFinalAnimationAttribute("height"),se={};return N(ne)?(se.x=Kt+ne/2,se.width=0,se.x1=void 0):(se.x=(Kt+te)/2,se.x1=(Kt+te)/2,se.width=void 0),N(oe)?(se.y=re+oe/2,se.height=0,se.y1=void 0):(se.y=(re+ae)/2,se.y1=(re+ae)/2,se.height=void 0),{"from":se,"to":{"x":Kt,"y":re,"x1":te,"y1":ae,"width":ne,"height":oe}}}},XV=function(nt,at,lt){switch(null==at?void 0:at.direction){case"x":var Rt=nt.getFinalAnimationAttribute("x"),Bt=nt.getFinalAnimationAttribute("x1"),Lt=nt.getFinalAnimationAttribute("width");return{"to":N(Lt)?{"x":Rt+Lt/2,"x1":void 0,"width":0}:{"x":(Rt+Bt)/2,"x1":(Rt+Bt)/2,"width":void 0}};case"y":var Ht=nt.getFinalAnimationAttribute("y"),jt=nt.getFinalAnimationAttribute("y1"),$t=nt.getFinalAnimationAttribute("height");return{"to":N($t)?{"y":Ht+$t/2,"y1":void 0,"height":0}:{"y":(Ht+jt)/2,"y1":(Ht+jt)/2,"height":void 0}};default:var Kt=nt.getFinalAnimationAttribute("x"),te=nt.getFinalAnimationAttribute("y"),ne=nt.getFinalAnimationAttribute("x1"),re=nt.getFinalAnimationAttribute("y1"),ae=nt.getFinalAnimationAttribute("width"),oe=nt.getFinalAnimationAttribute("height"),se={};return N(ae)?(se.x=Kt+ae/2,se.width=0,se.x1=void 0):(se.x=(Kt+ne)/2,se.x1=(Kt+ne)/2,se.width=void 0),N(oe)?(se.y=te+oe/2,se.height=0,se.y1=void 0):(se.y=(te+re)/2,se.y1=(te+re)/2,se.height=void 0),{"to":se}}},KV=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at,lt){var Rt,Bt,Lt=nt.getFinalAnimationAttribute("x"),Ht=nt.getFinalAnimationAttribute("x1"),jt=nt.getFinalAnimationAttribute("width");return at&&"negative"===at.orient?Z(at.overall)?Bt=at.overall:lt.group?(Bt=null!==(Rt=lt.groupWidth)&&void 0!==Rt?Rt:lt.group.getBounds().width(),lt.groupWidth=Bt):Bt=lt.width:Bt=Z(null==at?void 0:at.overall)?null==at?void 0:at.overall:0,{"from":{"x":Bt,"x1":j(Ht)?void 0:Bt,"width":j(jt)?void 0:0},"to":{"x":Lt,"x1":Ht,"width":jt}}}(nt,at,lt):function(nt,at){var lt=nt.getFinalAnimationAttribute("x"),Rt=nt.getFinalAnimationAttribute("x1"),Bt=nt.getFinalAnimationAttribute("width");if(at&&"negative"===at.orient){var Lt=N(Bt)?Math.max(lt,lt+Bt):Math.max(lt,Rt);return{"from":{"x":Lt,"x1":j(Rt)?void 0:Lt,"width":j(Bt)?void 0:0},"to":{"x":lt,"x1":Rt,"width":Bt}}}var Ht=N(Bt)?Math.min(lt,lt+Bt):Math.min(lt,Rt);return{"from":{"x":Ht,"x1":j(Rt)?void 0:Ht,"width":j(Bt)?void 0:0},"to":{"x":lt,"x1":Rt,"width":Bt}}}(nt,at)},qV=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at,lt){var Rt,Bt,Lt=nt.getFinalAnimationAttribute("x1"),Ht=nt.getFinalAnimationAttribute("width");return at&&"negative"===at.orient?Z(at.overall)?Bt=at.overall:lt.group?(Bt=null!==(Rt=lt.groupWidth)&&void 0!==Rt?Rt:lt.group.getBounds().width(),lt.groupWidth=Bt):Bt=lt.width:Bt=Z(null==at?void 0:at.overall)?at.overall:0,{"to":{"x":Bt,"x1":j(Lt)?void 0:Bt,"width":j(Ht)?void 0:0}}}(nt,at,lt):function(nt,at){var lt=nt.getFinalAnimationAttribute("x"),Rt=nt.getFinalAnimationAttribute("x1"),Bt=nt.getFinalAnimationAttribute("width");if(at&&"negative"===at.orient){var Lt=N(Bt)?Math.max(lt,lt+Bt):Math.max(lt,Rt);return{"to":{"x":Lt,"x1":j(Rt)?void 0:Lt,"width":j(Bt)?void 0:0}}}var Ht=N(Bt)?Math.min(lt,lt+Bt):Math.min(lt,Rt);return{"to":{"x":Ht,"x1":j(Rt)?void 0:Ht,"width":j(Bt)?void 0:0}}}(nt,at)},ZV=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at,lt){var Rt,Bt,Lt=nt.getFinalAnimationAttribute("y"),Ht=nt.getFinalAnimationAttribute("y1"),jt=nt.getFinalAnimationAttribute("height");return at&&"negative"===at.orient?Z(at.overall)?Bt=at.overall:lt.group?(Bt=null!==(Rt=lt.groupHeight)&&void 0!==Rt?Rt:lt.group.getBounds().height(),lt.groupHeight=Bt):Bt=lt.height:Bt=Z(null==at?void 0:at.overall)?at.overall:0,{"from":{"y":Bt,"y1":j(Ht)?void 0:Bt,"height":j(jt)?void 0:0},"to":{"y":Lt,"y1":Ht,"height":jt}}}(nt,at,lt):function(nt,at){var lt=nt.getFinalAnimationAttribute("y"),Rt=nt.getFinalAnimationAttribute("y1"),Bt=nt.getFinalAnimationAttribute("height");if(at&&"negative"===at.orient){var Lt=N(Bt)?Math.max(lt,lt+Bt):Math.max(lt,Rt);return{"from":{"y":Lt,"y1":j(Rt)?void 0:Lt,"height":j(Bt)?void 0:0},"to":{"y":lt,"y1":Rt,"height":Bt}}}var Ht=N(Bt)?Math.min(lt,lt+Bt):Math.min(lt,Rt);return{"from":{"y":Ht,"y1":j(Rt)?void 0:Ht,"height":j(Bt)?void 0:0},"to":{"y":lt,"y1":Rt,"height":Bt}}}(nt,at)},JV=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at,lt){var Rt,Bt,Lt=nt.getFinalAnimationAttribute("y1"),Ht=nt.getFinalAnimationAttribute("height");return at&&"negative"===at.orient?Z(at.overall)?Bt=at.overall:lt.group?(Bt=null!==(Rt=lt.groupHeight)&&void 0!==Rt?Rt:lt.group.getBounds().height(),lt.groupHeight=Bt):Bt=lt.height:Bt=Z(null==at?void 0:at.overall)?at.overall:0,{"to":{"y":Bt,"y1":j(Lt)?void 0:Bt,"height":j(Ht)?void 0:0}}}(nt,at,lt):function(nt,at){var lt=nt.getFinalAnimationAttribute("y"),Rt=nt.getFinalAnimationAttribute("y1"),Bt=nt.getFinalAnimationAttribute("height");if(at&&"negative"===at.orient){var Lt=N(Bt)?Math.max(lt,lt+Bt):Math.max(lt,Rt);return{"to":{"y":Lt,"y1":j(Rt)?void 0:Lt,"height":j(Bt)?void 0:0}}}var Ht=N(Bt)?Math.min(lt,lt+Bt):Math.min(lt,Rt);return{"to":{"y":Ht,"y1":j(Rt)?void 0:Ht,"height":j(Bt)?void 0:0}}}(nt,at)},QV=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at){var lt=nt.getFinalAnimationAttributes();if(at&&"anticlockwise"===at.orient){var Rt=Z(at.overall)?at.overall:2*Math.PI;return{"from":{"startAngle":Rt,"endAngle":Rt},"to":{"startAngle":null==lt?void 0:lt.startAngle,"endAngle":null==lt?void 0:lt.endAngle}}}var Bt=Z(null==at?void 0:at.overall)?at.overall:0;return{"from":{"startAngle":Bt,"endAngle":Bt},"to":{"startAngle":null==lt?void 0:lt.startAngle,"endAngle":null==lt?void 0:lt.endAngle}}}(nt,at):function(nt,at){var lt=nt.getFinalAnimationAttributes();return at&&"anticlockwise"===at.orient?{"from":{"startAngle":null==lt?void 0:lt.endAngle},"to":{"startAngle":null==lt?void 0:lt.startAngle}}:{"from":{"endAngle":null==lt?void 0:lt.startAngle},"to":{"endAngle":null==lt?void 0:lt.endAngle}}}(nt,at)},$V=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at){if(at&&"anticlockwise"===at.orient){var lt=Z(at.overall)?at.overall:2*Math.PI;return{"from":{"startAngle":nt.getGraphicAttribute("startAngle",!0),"endAngle":nt.getGraphicAttribute("endAngle",!0)},"to":{"startAngle":lt,"endAngle":lt}}}var Rt=Z(null==at?void 0:at.overall)?at.overall:0;return{"from":{"startAngle":nt.getGraphicAttribute("startAngle",!0),"endAngle":nt.getGraphicAttribute("endAngle",!0)},"to":{"startAngle":Rt,"endAngle":Rt}}}(nt,at):function(nt,at){var lt=nt.getFinalAnimationAttributes();return at&&"anticlockwise"===at.orient?{"from":{"startAngle":nt.getGraphicAttribute("startAngle",!0)},"to":{"startAngle":null==lt?void 0:lt.endAngle}}:{"from":{"endAngle":nt.getGraphicAttribute("endAngle",!0)},"to":{"endAngle":null==lt?void 0:lt.startAngle}}}(nt,at)},tG=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at){var lt=nt.getFinalAnimationAttributes(),Rt=Z(null==at?void 0:at.overall)?at.overall:0;return{"from":{"innerRadius":Rt,"outerRadius":Rt},"to":{"innerRadius":null==lt?void 0:lt.innerRadius,"outerRadius":null==lt?void 0:lt.outerRadius}}}(nt,at):function(nt,at){var lt=nt.getFinalAnimationAttributes();return at&&"inside"===at.orient?{"from":{"innerRadius":null==lt?void 0:lt.outerRadius},"to":{"innerRadius":null==lt?void 0:lt.innerRadius}}:{"from":{"outerRadius":null==lt?void 0:lt.innerRadius},"to":{"outerRadius":null==lt?void 0:lt.outerRadius}}}(nt,at)},eG=function(nt,at,lt){var Rt;return!1!==(null!==(Rt=null==at?void 0:at.overall)&&void 0!==Rt&&Rt)?function(nt,at){var lt=Z(null==at?void 0:at.overall)?at.overall:0;return{"from":{"innerRadius":nt.getGraphicAttribute("innerRadius",!0),"outerRadius":nt.getGraphicAttribute("outerRadius",!0)},"to":{"innerRadius":lt,"outerRadius":lt}}}(nt,at):function(nt,at){var lt=nt.getFinalAnimationAttributes();return at&&"inside"===at.orient?{"from":{"innerRadius":nt.getGraphicAttribute("innerRadius",!0)},"to":{"innerRadius":null==lt?void 0:lt.outerRadius}}:{"from":{"outerRadius":nt.getGraphicAttribute("outerRadius",!0)},"to":{"outerRadius":null==lt?void 0:lt.innerRadius}}}(nt,at)},iG=function(nt,at,lt){var Rt=nt.getGraphicAttribute("points",!1),Bt={"x":0,"y":0};return Rt.forEach((function(nt){Bt.x+=nt.x,Bt.y+=nt.y})),Bt.x/=Rt.length,Bt.y/=Rt.length,at&&at.center&&(Q(at.center.x)&&(Bt.x=at.center.x),Q(at.center.y)&&(Bt.y=at.center.y)),"area"===nt.mark.markType&&(Bt.x1=Bt.x,Bt.y1=Bt.y),Rt.map((function(nt){return Object.assign({},nt,Bt)}))},nG=function(nt,at,lt){return{"from":{"points":iG(nt,at)},"to":{"points":nt.getGraphicAttribute("points",!1)}}},rG=function(nt,at,lt){return{"from":{"points":nt.getGraphicAttribute("points",!0)},"to":{"points":iG(nt,at)}}},aG=function(nt,at,lt){return nt.getGraphicAttribute("points",!1).map((function(nt){var Rt;if(at&&"negative"===at.orient){var Bt=lt.width;return lt.group&&(Bt=null!==(Rt=lt.groupWidth)&&void 0!==Rt?Rt:lt.group.getBounds().width(),lt.groupWidth=Bt),Object.assign(Object.assign({},nt),{"x":Bt,"y":nt.y,"x1":Bt,"y1":nt.y1,"defined":!1!==nt.defined})}return Object.assign(Object.assign({},nt),{"x":0,"y":nt.y,"x1":0,"y1":nt.y1,"defined":!1!==nt.defined})}))},oG=function(nt,at,lt){return{"from":{"points":aG(nt,at,lt)},"to":{"points":nt.getGraphicAttribute("points",!1)}}},sG=function(nt,at,lt){return{"from":{"points":nt.getGraphicAttribute("points",!0)},"to":{"points":aG(nt,at,lt)}}},lG=function(nt,at,lt){return nt.getGraphicAttribute("points",!1).map((function(nt){var Rt;if(at&&"negative"===at.orient){var Bt=lt.height;return lt.group&&(Bt=null!==(Rt=lt.groupHeight)&&void 0!==Rt?Rt:lt.group.getBounds().height(),lt.groupHeight=Bt),Object.assign(Object.assign({},nt),{"x":nt.x,"y":Bt,"x1":nt.x1,"y1":Bt,"defined":!1!==nt.defined})}return Object.assign(Object.assign({},nt),{"x":nt.x,"y":0,"x1":nt.x1,"y1":0,"defined":!1!==nt.defined})}))},uG=function(nt,at,lt){return{"from":{"points":lG(nt,at,lt)},"to":{"points":nt.getGraphicAttribute("points",!1)}}},cG=function(nt,at,lt){return{"from":{"points":nt.getGraphicAttribute("points",!0)},"to":{"points":lG(nt,at,lt)}}},hG=function(nt,at,lt){var Rt,Bt,Lt=null!=at?at:{},Ht=Lt.offset,jt=void 0===Ht?0:Ht,$t=Lt.orient,Kt=Lt.direction,te=Lt.point,ne=Lt.excludeChannels,re=void 0===ne?[]:ne,ae=0,oe=0;"negative"===$t&&(lt.group?(ae=null!==(Rt=lt.groupWidth)&&void 0!==Rt?Rt:lt.group.getBounds().width(),oe=null!==(Bt=lt.groupHeight)&&void 0!==Bt?Bt:lt.group.getBounds().height(),lt.groupWidth=ae,lt.groupHeight=oe):(ae=lt.width,oe=lt.height)),ae+=jt,oe+=jt;var se=H(te)?te.call(null,nt.getDatum(),nt,lt):te,le=se&&Q(se.x)?se.x:ae,ue=se&&Q(se.y)?se.y:oe,ce=re.includes("x")?nt.getGraphicAttribute("x"):nt.getFinalAnimationAttribute("x"),he=re.includes("y")?nt.getGraphicAttribute("y"):nt.getFinalAnimationAttribute("y");switch(Kt){case"x":return{"from":{"x":le},"to":{"x":ce}};case"y":return{"from":{"y":ue},"to":{"y":he}};default:return{"from":{"x":le,"y":ue},"to":{"x":ce,"y":he}}}},dG=function(nt,at,lt){var Rt,Bt,Lt=null!=at?at:{},Ht=Lt.offset,jt=void 0===Ht?0:Ht,$t=Lt.orient,Kt=Lt.direction,te=Lt.point,ne=lt.group?lt.group.getBounds():null,re=null!==(Rt=null==ne?void 0:ne.width())&&void 0!==Rt?Rt:lt.width,ae=null!==(Bt=null==ne?void 0:ne.height())&&void 0!==Bt?Bt:lt.height,oe=("negative"===$t?re:0)+jt,se=("negative"===$t?ae:0)+jt,le=H(te)?te.call(null,nt.getDatum(),nt,lt):te,ue=le&&Q(le.x)?le.x:oe,ce=le&&Q(le.y)?le.y:se;switch(Kt){case"x":return{"from":{"x":nt.getGraphicAttribute("x",!0)},"to":{"x":ue}};case"y":return{"from":{"y":nt.getGraphicAttribute("y",!0)},"to":{"y":ce}};default:return{"from":{"x":nt.getGraphicAttribute("x",!0),"y":nt.getGraphicAttribute("y",!0)},"to":{"x":ue,"y":ce}}}},pG=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=nt.getFinalAnimationAttributes();switch(null==at?void 0:at.direction){case"x":return{"from":{"scaleX":0},"to":{"scaleX":null!==(Rt=null==jt?void 0:jt.scaleX)&&void 0!==Rt?Rt:1}};case"y":return{"from":{"scaleY":0},"to":{"scaleY":null!==(Bt=null==jt?void 0:jt.scaleY)&&void 0!==Bt?Bt:1}};default:return{"from":{"scaleX":0,"scaleY":0},"to":{"scaleX":null!==(Lt=null==jt?void 0:jt.scaleX)&&void 0!==Lt?Lt:1,"scaleY":null!==(Ht=null==jt?void 0:jt.scaleY)&&void 0!==Ht?Ht:1}}}},fG=function(nt,at,lt){var Rt,Bt,Lt,Ht;switch(null==at?void 0:at.direction){case"x":return{"from":{"scaleX":null!==(Rt=nt.getGraphicAttribute("scaleX",!0))&&void 0!==Rt?Rt:1},"to":{"scaleX":0}};case"y":return{"from":{"scaleY":null!==(Bt=nt.getGraphicAttribute("scaleY",!0))&&void 0!==Bt?Bt:1},"to":{"scaleY":0}};default:return{"from":{"scaleX":null!==(Lt=nt.getGraphicAttribute("scaleX",!0))&&void 0!==Lt?Lt:1,"scaleY":null!==(Ht=nt.getGraphicAttribute("scaleY",!0))&&void 0!==Ht?Ht:1},"to":{"scaleX":0,"scaleY":0}}}},pW={"symbol":["_mo_hide_","visible"]},gG=function(nt,at,lt){var Rt,Bt=Object.assign({},nt.getPrevGraphicAttributes()),Lt=Object.assign({},nt.getNextGraphicAttributes());at&&xt(at.excludeChannels).forEach((function(nt){delete Bt[nt],delete Lt[nt]})),nt.mark&&nt.mark.markType&&(Rt=pW[nt.mark.markType])&&Rt.forEach((function(nt){delete Bt[nt],delete Lt[nt]})),Object.keys(Lt).forEach((function(nt){mt(Bt[nt],Lt[nt])&&(delete Bt[nt],delete Lt[nt])}));var Ht=nt.getFinalGraphicAttributes();return Object.keys(Bt).forEach((function(nt){j(Lt[nt])&&(j(Ht[nt])||mt(Bt[nt],Ht[nt])?delete Bt[nt]:Lt[nt]=Ht[nt])})),{"from":Bt,"to":Lt}},yG=function(nt,at,lt){var Rt,Bt=null!==(Rt=nt.getFinalAnimationAttribute("angle"))&&void 0!==Rt?Rt:0;return{"from":{"angle":Nt(Bt/(2*Math.PI),0)?Math.round(Bt/(2*Math.PI))*Math.PI*2:Q(null==at?void 0:at.angle)?at.angle:"anticlockwise"===(null==at?void 0:at.orient)?Math.ceil(Bt/(2*Math.PI))*Math.PI*2:Math.floor(Bt/(2*Math.PI))*Math.PI*2},"to":{"angle":Bt}}},mG=function(nt,at,lt){var Rt,Bt=null!==(Rt=nt.getGraphicAttribute("angle",!0))&&void 0!==Rt?Rt:0;return{"from":{"angle":Bt},"to":{"angle":Nt(Bt/(2*Math.PI),0)?Math.round(Bt/(2*Math.PI))*Math.PI*2:Q(null==at?void 0:at.angle)?at.angle:"anticlockwise"===(null==at?void 0:at.orient)?Math.ceil(Bt/(2*Math.PI))*Math.PI*2:Math.floor(Bt/(2*Math.PI))*Math.PI*2}}},_G=function(){Pj.registerAnimationType("clipIn",VV)},bG=function(){Pj.registerAnimationType("clipOut",GV)},xG=function(){Pj.registerAnimationType("fadeIn",WV)},kG=function(){Pj.registerAnimationType("fadeOut",UV)},SG=function(){Pj.registerAnimationType("growCenterIn",YV)},AG=function(){Pj.registerAnimationType("growCenterOut",XV)},wG=function(){Pj.registerAnimationType("growHeightIn",ZV)},MG=function(){Pj.registerAnimationType("growHeightOut",JV)},TG=function(){Pj.registerAnimationType("growWidthIn",KV)},CG=function(){Pj.registerAnimationType("growWidthOut",qV)},EG=function(){Pj.registerAnimationType("growPointsIn",nG)},PG=function(){Pj.registerAnimationType("growPointsOut",rG)},RG=function(){Pj.registerAnimationType("growPointsXIn",oG)},BG=function(){Pj.registerAnimationType("growPointsXOut",sG)},IG=function(){Pj.registerAnimationType("growPointsYIn",uG)},LG=function(){Pj.registerAnimationType("growPointsYOut",cG)},DG=function(){Pj.registerAnimationType("growAngleIn",QV)},OG=function(){Pj.registerAnimationType("growAngleOut",$V)},FG=function(){Pj.registerAnimationType("growRadiusIn",tG)},zG=function(){Pj.registerAnimationType("growRadiusOut",eG)},HG=function(){Pj.registerAnimationType("moveIn",hG)},jG=function(){Pj.registerAnimationType("moveOut",dG)},NG=function(){Pj.registerAnimationType("scaleIn",pG)},VG=function(){Pj.registerAnimationType("scaleOut",fG)},GG=function(){Pj.registerAnimationType("rotateIn",yG)},WG=function(){Pj.registerAnimationType("rotateOut",mG)},UG=function(){Pj.registerAnimationType("update",gG)},wW=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"encodeState","value":function(nt,at,lt){return y(e,"encodeState",this,3)([nt,at,lt]),this._updateComponentEncoders(nt),this}},{"key":"_updateComponentEncoders","value":function(nt){this._encoders||(this._encoders={});var at=this.spec.encode[nt];if(at&&"update"===nt){var lt=this.parameters(),Rt=rj(at)?null:Object.keys(at).reduce((function(nt,Rt){return uj(at[Rt])&&(nt[Rt]=oj(at[Rt].scale,lt)),nt}),{});this._encoders[nt]={"callback":function(nt,lt,Bt){var Lt=fj(at,nt,lt,Bt);if(j(Lt.size)){var Ht=Rt.x?Vj(Rt.x):void 0,jt=Rt.y?Vj(Rt.y):void 0;j(Ht)&&j(jt)?Lt.size=10:j(Ht)?Lt.size=jt:j(jt)&&(Lt.size=Ht),Lt.size=[Ht,jt]}return j(Lt.shape)&&(Lt.shape="rect"),Lt}}}else this._encoders[nt]=at}},{"key":"_getEncoders","value":function(){var nt;return null!==(nt=this._encoders)&&void 0!==nt?nt:{}}},{"key":"getAttributeTransforms","value":function(){return[{"channels":["size","padding"],"transform":function(nt,at,lt){if(Z(lt.padding)&&lt.padding>0)nt.size=X(lt.size)?lt.size.map((function(nt){return Math.max(nt-lt.padding,1)})):Math.max(lt.size-lt.padding,1);else if(X(lt.padding)&&2===lt.padding.length){var Rt=X(lt.size)?lt.size:[lt.size,lt.size];nt.size=[Math.max(Rt[0]-lt.padding[0],1),Math.max(Rt[1]-lt.padding[1],1)]}else nt.size=lt.size},"storedAttrs":"paddingAttrs"}].concat(Oj.symbol)}},{"key":"release","value":function(){y(e,"release",this,3)([]),this._encoders=null}}])}(RN);wW.markType=MH.cell;var MW=o((function t(nt){var at=this;r(this,t),this._animations=[],this._additionalAnimateMarks=[],this.isEnabled=!0,this._onAnimationStart=function(nt){at._additionalAnimateMarks=at._additionalAnimateMarks.filter((function(nt){var at;return null===(at=null==nt?void 0:nt.animate)||void 0===at?void 0:at.isAnimating()})),0===at._animations.length&&0===at._additionalAnimateMarks.length&&at._view.emit(GH.ALL_ANIMATION_START,{}),at._animations=at._animations.concat({"config":nt.animationConfig,"mark":nt.mark})},this._onAnimationEnd=function(nt){at._additionalAnimateMarks=at._additionalAnimateMarks.filter((function(nt){var at;return null===(at=null==nt?void 0:nt.animate)||void 0===at?void 0:at.isAnimating()})),at._animations=at._animations.filter((function(at){return at.config!==nt.animationConfig||at.mark!==nt.mark})),0===at._animations.length&&0===at._additionalAnimateMarks.length&&at._view.emit(GH.ALL_ANIMATION_END,{})},this._view=nt,this._view.addEventListener(GH.ANIMATION_START,this._onAnimationStart),this._view.addEventListener(GH.ANIMATION_END,this._onAnimationEnd)}),[{"key":"stop","value":function(){return this._view.traverseMarkTree((function(nt){var at,lt;nt.animate&&(null===(lt=(at=nt.animate).stop)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks.forEach((function(nt){var at,lt;nt.view&&nt.animate&&(null===(lt=(at=nt.animate).stop)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks=[],this}},{"key":"pause","value":function(){return this._view.traverseMarkTree((function(nt){var at,lt;nt.animate&&(null===(lt=(at=nt.animate).pause)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks.forEach((function(nt){var at,lt;nt.view&&nt.animate&&(null===(lt=(at=nt.animate).pause)||void 0===lt||lt.call(at))})),this}},{"key":"resume","value":function(){return this._view.traverseMarkTree((function(nt){var at,lt;nt.animate&&(null===(lt=(at=nt.animate).resume)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks.forEach((function(nt){var at,lt;nt.view&&nt.animate&&(null===(lt=(at=nt.animate).resume)||void 0===lt||lt.call(at))})),this}},{"key":"enable","value":function(){return this.isEnabled=!0,this._view.traverseMarkTree((function(nt){var at,lt;nt.animate&&(null===(lt=(at=nt.animate).enable)||void 0===lt||lt.call(at))})),this}},{"key":"disable","value":function(){return this.isEnabled=!1,this._view.traverseMarkTree((function(nt){var at,lt;nt.animate&&(null===(lt=(at=nt.animate).disable)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks.forEach((function(nt){var at,lt;nt.view&&nt.animate&&(null===(lt=(at=nt.animate).stop)||void 0===lt||lt.call(at))})),this._additionalAnimateMarks=[],this}},{"key":"enableAnimationState","value":function(nt){return this._view.traverseMarkTree((function(at){var lt,Rt;at.animate&&(null===(Rt=(lt=at.animate).enableAnimationState)||void 0===Rt||Rt.call(lt,nt))})),this}},{"key":"disableAnimationState","value":function(nt){return this._view.traverseMarkTree((function(at){var lt,Rt;at.animate&&(null===(Rt=(lt=at.animate).disableAnimationState)||void 0===Rt||Rt.call(lt,nt))})),this}},{"key":"isAnimating","value":function(){return 0!==this._animations.length||this._additionalAnimateMarks.some((function(nt){var at;return(null===(at=null==nt?void 0:nt.animate)||void 0===at?void 0:at.isAnimating())||!1}))}},{"key":"animate","value":function(){return this.isEnabled?(this._view.traverseMarkTree((function(nt){nt.isUpdated&&nt.animate&&nt.animate.animate(),nt.cleanExitElements(),nt.isUpdated=!1}),null,!0),this):this}},{"key":"animateAddition","value":function(nt){var at,lt=null===(at=nt.animate)||void 0===at?void 0:at.animate();return lt&&lt.isAnimating()&&this._additionalAnimateMarks.push(nt),this}},{"key":"release","value":function(){this._additionalAnimateMarks=[],this._animations=[],this._view.removeEventListener(GH.ALL_ANIMATION_START,this._onAnimationStart),this._view.removeEventListener(GH.ALL_ANIMATION_END,this._onAnimationEnd),this._view=null}}]),OW=o((function t(){r(this,t)}),[{"key":"initAnimate","value":function(nt){return this.animate=new MW(nt),this.animate}}]),qG=function(nt,at){if(!nt)return null;if(nt.from){var lt=nt.from,Rt=Object.keys(lt);Rt.forEach((function(nt){j(lt[nt])&&delete lt[nt]}));var Bt=dj(Rt,at.mark.markType)&&!N(lt.segments);if(Bt){var Lt=at.items.map((function(nt){return Object.assign({},nt,{"nextAttrs":Object.assign({},lt)})}));nt.from=at.transformElementItems(Lt,at.mark.markType,Bt)}}if(nt.to){var Ht=nt.to,jt=Object.keys(Ht);jt.forEach((function(nt){j(Ht[nt])&&delete Ht[nt]}));var $t=dj(jt,at.mark.markType)&&!N(Ht.segments);if($t){var Kt=at.items.map((function(nt){return Object.assign({},nt,{"nextAttrs":Object.assign({},Ht)})}));nt.to=at.transformElementItems(Kt,at.mark.markType,$t)}}return nt},ZG=function(nt,at,lt,Rt,Bt){return H(lt)?lt(nt.getDatum(),nt,Bt):lt},DW=function(nt){function e(nt,at,lt,Rt,Bt){var Lt;return r(this,e),(Lt=n(this,e,[nt,at,lt,Rt,Bt]))._interpolator=null==Bt?void 0:Bt.interpolator,Lt._element=null==Bt?void 0:Bt.element,Lt}return h(e,nt),o(e,[{"key":"onBind","value":function(){var nt,at;this.from=null!==(nt=this.from)&&void 0!==nt?nt:{},this.to=null!==(at=this.to)&&void 0!==at?at:{}}},{"key":"getEndProps","value":function(){return this.to}},{"key":"onUpdate","value":function(nt,at,lt){this._interpolator&&this._element&&this._interpolator.call(this,at,this.from,this.to,lt,this._element.getDatum(),this._element,this.params.parameters)}}])}(Xh),FW=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"getEndProps","value":function(){return this.to}},{"key":"onBind","value":function(){var nt,at=this,lt=null!==(nt=this.target.constructor.NOWORK_ANIMATE_ATTR)&&void 0!==nt?nt:Ov,Rt=Object.keys(lt).filter((function(nt){return 0!==lt[nt]}));this.subAnimate.animate.preventAttrs(Rt);var Bt=Object.assign({},this.from),Lt=Object.assign({},this.to),Ht=[];Object.keys(Lt).forEach((function(nt){Rt.includes(nt)?(Bt[nt]=Lt[nt],at.from[nt]=Lt[nt]):j(Bt[nt])?Bt[nt]=at.target.getComputedAttribute(nt):Ht.push(nt)})),this.target.animates.forEach((function(nt){nt!==at.subAnimate.animate&&nt.preventAttrs(Ht)})),this._fromAttribute=Bt,this._toAttribute=Lt}},{"key":"onStart","value":function(){var nt=this;if(this._fromAttribute){var at={};Object.keys(this._fromAttribute).forEach((function(lt){nt.subAnimate.animate.validAttr(lt)&&(at[lt]=nt._fromAttribute[lt])})),this.target.setAttributes(at,!1,{"type":Tl.ANIMATE_UPDATE,"animationState":{"ratio":0,"end":!1}})}}},{"key":"onEnd","value":function(){var nt=this;if(this._toAttribute){var at={};Object.keys(this._toAttribute).forEach((function(lt){nt.subAnimate.animate.validAttr(lt)&&(at[lt]=nt._toAttribute[lt])})),this.target.setAttributes(at,!1,{"type":Tl.ANIMATE_END})}}},{"key":"update","value":function(nt,at,lt){var Rt=this;0===this.updateCount&&this.onFirstRun(),this.updateCount+=1;var Bt=this.step.getLastProps();Object.keys(Bt).forEach((function(nt){Rt.subAnimate.animate.validAttr(nt)&&(lt[nt]=Bt[nt])})),this.onUpdate(nt,at,lt),nt&&this.onEnd()}},{"key":"onUpdate","value":function(nt,at,lt){this.target.stepInterpolate(this.subAnimate,this.subAnimate.animate,lt,this.step,at,nt,this._toAttribute,this._fromAttribute)}}])}(Xh);qh.mode|=Pl.SET_ATTR_IMMEDIATELY;var zW=0,tW=function(nt){var at;if(j(nt)||j(nt.prototype))return!1;var lt=null!==(at=nt.prototype)&&void 0!==at?at:{};return lt instanceof Xh||"onBind"in lt&&"onStart"in lt&&"onEnd"in lt&&"onUpdate"in lt},HW=o((function t(nt,at,lt){r(this,t),this.id=zW++,this.isAnimating=!1,this.runnings=[],this.element=nt,this.animationOptions=lt,this.unit=at}),[{"key":"callback","value":function(nt){return this.callbackFunction=nt,this}},{"key":"animate","value":function(nt,at){return this.isAnimating=!0,this.animateElement(nt,at),0===this.runnings.length&&this.animationEnd(),this}},{"key":"stop","value":function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"end",at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.runnings.forEach((function(at){return at.stop(nt)})),this.animationEnd(at),this}},{"key":"pause","value":function(){return this.runnings.forEach((function(nt){return nt.pause()})),this}},{"key":"resume","value":function(){return this.runnings.forEach((function(nt){return nt.resume()})),this}},{"key":"startAt","value":function(nt){var at=this;return this.runnings.forEach((function(lt){var Rt=at.unit.initialDelay;lt.startAt(Rt+nt)})),this}},{"key":"getTotalAnimationTime","value":function(){var nt,at=this.unit.initialDelay+this.unit.loopDuration*this.unit.loopCount;return null!==(nt=this.unit.totalTime)&&void 0!==nt?nt:at}},{"key":"getEndAttributes","value":function(){return this.runnings.reduce((function(nt,at){return Object.assign(nt,at.getEndProps())}),{})}},{"key":"animationEnd","value":function(){var nt,at=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isAnimating=!1,this.runnings=null,at&&(null===(nt=this.callbackFunction)||void 0===nt||nt.call(null))}},{"key":"animateElement","value":function(nt,at){var lt=this,Rt=this.element.getGraphicItem();if(Rt){var Bt=Rt.animate();this.runnings.push(Bt),Bt.startAt(this.unit.initialDelay),Bt.wait(this.unit.loopDelay),this.unit.timeSlices.forEach((function(Rt){lt.animateTimeSlice(Bt,Rt,nt,at)})),Bt.wait(this.unit.loopDelayAfter),Bt.loop(this.unit.loopCount-1),Q(this.unit.totalTime)&&setTimeout((function(){Bt&&Bt.stop("end")}),this.unit.totalTime),Bt.onEnd((function(){lt.runnings=lt.runnings.filter((function(nt){return nt!==Bt})),0===lt.runnings.length&&lt.animationEnd()}))}}},{"key":"animateTimeSlice","value":function(nt,at,lt,Rt){var Bt=this,Lt=at.delay,Ht=at.delayAfter,jt=at.duration,$t=at.effects;if(Lt>0&&nt.wait(Lt),$t.length<0)nt.wait(jt);else{var Kt=$t.map((function(nt,at){var Lt,Ht=null!==(Lt=nt.type?function(nt,at,lt,Rt){var Bt=H(at.options)?at.options.call(null,nt.getDatum(),nt,Rt):at.options;if(!at.type||!Pj.getAnimationType(at.type))return null;var Lt=Pj.getAnimationType(at.type)(nt,Bt,lt);return qG(Lt,nt)}(Bt.element,nt,lt,Rt):nt.channel?function(nt,at,lt,Rt){var Bt=at.channel,Lt=null;return X(Bt)?Lt=Bt.reduce((function(at,lt){return at.from[lt]=nt.getGraphicAttribute(lt,!0),at.to[lt]=nt.getGraphicAttribute(lt,!1),at}),{"from":{},"to":{}}):V(Bt)&&(Lt=Object.keys(Bt).reduce((function(at,lt){var Lt,Ht,jt=!j(null===(Lt=Bt[lt])||void 0===Lt?void 0:Lt.from),$t=!j(null===(Ht=Bt[lt])||void 0===Ht?void 0:Ht.to);return(jt||$t)&&(at.from[lt]=jt?ZG(nt,0,Bt[lt].from,0,Rt):void 0,at.to[lt]=$t?ZG(nt,0,Bt[lt].to,0,Rt):nt.getGraphicAttribute(lt,!1)),at}),{"from":{},"to":{}})),qG(Lt,nt)}(Bt.element,nt,0,Rt):void 0)&&void 0!==Lt?Lt:{},$t=Ht.custom||(null==nt?void 0:nt.custom),Kt=(null==Ht?void 0:Ht.customParameters)||(null==nt?void 0:nt.customParameters);Ht.from&&Object.keys(Ht.from).length&&Bt.unit&&Bt.animationOptions.timeline.controlOptions.immediatelyApply&&"component"!==Bt.element.mark.markType&&Bt.element.getGraphicItem().setAttributes(Ht.from);var te=tW($t);return j($t)||tW($t)?te?new $t(Ht.from,Ht.to,jt,nt.easing,Kt):Ht.to?new FW(Ht.from,Ht.to,jt,nt.easing):void 0:new DW(Ht.from,Ht.to,jt,nt.easing,{"interpolator":$t,"element":Bt.element,"parameters":Kt})})).filter((function(nt){return!j(nt)}));1===Kt.length?nt.play(Kt[0]):Kt.length>1&&nt.play(new Xd(jt,Kt))}Ht>0&&nt.wait(Ht)}}]);function iW(nt){var at=[];return Object.keys(nt).forEach((function(lt){at=at.concat(nW(lt,nt[lt]))})),at}function nW(nt,at){var lt=[],Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xt(at).forEach((function(at){var Bt,Lt=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re;if(j(nt.timeSlices)){var ae=nt;return{"startTime":null!==(at=ae.startTime)&&void 0!==at?at:tj,"totalTime":ae.totalTime,"oneByOne":null!==(lt=ae.oneByOne)&&void 0!==lt?lt:xj,"loop":null!==(Rt=ae.loop)&&void 0!==Rt?Rt:_j,"controlOptions":ft({},wj,null!==(Bt=ae.controlOptions)&&void 0!==Bt?Bt:{}),"timeSlices":[{"duration":null!==(Lt=ae.duration)&&void 0!==Lt?Lt:ej,"delay":null!==(Ht=ae.delay)&&void 0!==Ht?Ht:vj,"delayAfter":null!==(jt=ae.delayAfter)&&void 0!==jt?jt:gj,"effects":[{"type":ae.type,"channel":ae.channel,"custom":ae.custom,"easing":null!==($t=ae.easing)&&void 0!==$t?$t:Aj,"customParameters":ae.customParameters,"options":ae.options}]}]}}var oe=xt(nt.timeSlices).filter((function(nt){return nt.effects&&xt(nt.effects).filter((function(nt){return nt.channel||nt.type})).length}));if(oe.length)return{"startTime":null!==(Kt=nt.startTime)&&void 0!==Kt?Kt:tj,"totalTime":nt.totalTime,"oneByOne":null!==(te=nt.oneByOne)&&void 0!==te?te:xj,"loop":null!==(ne=nt.loop)&&void 0!==ne?ne:_j,"controlOptions":ft({},wj,null!==(re=nt.controlOptions)&&void 0!==re?re:{}),"timeSlices":oe.map((function(nt){var at,lt;return{"duration":nt.duration,"delay":null!==(at=nt.delay)&&void 0!==at?at:vj,"delayAfter":null!==(lt=nt.delayAfter)&&void 0!==lt?lt:gj,"effects":xt(nt.effects).filter((function(nt){return nt.channel||nt.type})).map((function(nt){var at;return{"type":nt.type,"channel":nt.channel,"custom":nt.custom,"easing":null!==(at=nt.easing)&&void 0!==at?at:Aj,"customParameters":nt.customParameters,"options":nt.options}}))}})),"partitioner":nt.partitioner,"sort":nt.sort}}(at);Lt&&(lt.push({"state":nt,"id":null!==(Bt=Lt.id)&&void 0!==Bt?Bt:"".concat(nt,"-").concat(Rt),"timeline":Lt,"originConfig":at}),Rt+=1)})),lt}function rW(nt,at,lt){return H(nt)?nt.call(null,at.getDatum(),at,lt):nt}var jW,NW,VW,UW=o((function t(nt){r(this,t),this.parallelArrangers=[this],this.totalTime=0,this.startTime=0,this.endTime=0,this.animators=nt.filter((function(nt){return!j(nt)})),this.totalTime=this.animators.reduce((function(nt,at){return Math.max(nt,at.getTotalAnimationTime())}),0)}),[{"key":"parallel","value":function(nt){var at=Array.from(new Set(this.parallelArrangers.concat(nt.parallelArrangers)));return at.forEach((function(nt){nt.parallelArrangers=at})),this.arrangeTime(),this}},{"key":"after","value":function(nt){return this.afterArranger=nt,this.arrangeTime(),this}},{"key":"arrangeTime","value":function(){var nt=this.parallelArrangers.reduce((function(nt,at){return Math.max(nt,at.totalTime)}),this.totalTime),at=this.parallelArrangers.reduce((function(nt,at){var lt,Rt;return Math.max(nt,null!==(Rt=null===(lt=at.afterArranger)||void 0===lt?void 0:lt.endTime)&&void 0!==Rt?Rt:0)}),0);this.parallelArrangers.forEach((function(lt){lt.startTime=at,lt.endTime=at+nt,lt.animators.forEach((function(nt){nt.startAt(at)}))}))}}]),YW=o((function t(nt,at){r(this,t),this.state=null,this.immediateConfigs=[],this.isEnabled=!0,this.disabledStates=[],this.animators=new Map,this.elementRecorder=new WeakMap,this.timelineCount={},this.mark=nt,this.configs=iW(null!=at?at:{})}),[{"key":"getAnimationConfigs","value":function(nt){var at;return this.isEnabled?(null!==(at=this.configs)&&void 0!==at?at:[]).filter((function(at){return at.state===nt})):[]}},{"key":"updateConfig","value":function(nt){this.configs=iW(null!=nt?nt:{})}},{"key":"updateState","value":function(nt){this.state=nt}},{"key":"animate","value":function(){var nt=this;if(this.isEnabled&&this.configs&&this.configs.length){var at=this.mark.getAllElements(),lt=this.mark.parameters();return at.forEach((function(at){var lt;at.isReserved&&at.diffState!==CH.exit&&(at.isReserved=!1);var Rt=null===(lt=nt.elementRecorder.get(at))||void 0===lt?void 0:lt.prevState;(nt.configs.some((function(nt){return Rt!==at.diffState&&nt.state===Rt&&nt.timeline.controlOptions.stopWhenStateChange}))||at.diffState===CH.exit)&&nt.clearElementAnimation(at,!1)})),this.configs.forEach((function(Rt){nt.animateByTimeline(Rt,at,lt)})),this.mark.cleanExitElements(),this}}},{"key":"runAnimationByState","value":function(nt){var at=this;if(this.isEnabled){var lt=this.configs.filter((function(at){return at.state===nt})),Rt=this.mark.getAllElements(),Bt=this.mark.parameters(),Lt=lt.reduce((function(nt,lt){return nt.concat(at.animateByTimeline(lt,Rt,Bt,!0))}),[]);return new UW(Lt)}}},{"key":"stopAnimationByState","value":function(nt){var at=this.animators.get(nt);return at&&at.forEach((function(nt){return nt.stop("end")})),this}},{"key":"pauseAnimationByState","value":function(nt){var at=this.animators.get(nt);return at&&at.forEach((function(nt){return nt.pause()})),this}},{"key":"resumeAnimationByState","value":function(nt){var at=this.animators.get(nt);return at&&at.forEach((function(nt){return nt.resume()})),this}},{"key":"run","value":function(nt){var at=this;if(this.isEnabled){var lt=nW(JH,nt,this.immediateConfigs.length);this.immediateConfigs=this.immediateConfigs.concat(lt);var Rt=this.mark.getAllElements(),Bt=this.mark.parameters(),Lt=lt.reduce((function(nt,lt){return nt.concat(at.animateByTimeline(lt,Rt,Bt,!0))}),[]);return new UW(Lt)}}},{"key":"stop","value":function(){return this.animators.forEach((function(nt){nt.forEach((function(nt){return nt.stop("end")}))})),this}},{"key":"pause","value":function(){return this.animators.forEach((function(nt){return nt.forEach((function(nt){return nt.pause()}))})),this}},{"key":"resume","value":function(){return this.animators.forEach((function(nt){return nt.forEach((function(nt){return nt.resume()}))})),this}},{"key":"reverse","value":function(){return this}},{"key":"restart","value":function(){return this}},{"key":"record","value":function(){return this}},{"key":"recordEnd","value":function(){return this}},{"key":"isAnimating","value":function(){var nt=!1;return this.animators.forEach((function(at){nt=nt||at.some((function(nt){return nt.isAnimating}))})),nt}},{"key":"isElementAnimating","value":function(nt){var at,lt=null===(at=this.elementRecorder.get(nt))||void 0===at?void 0:at.count;return j(lt)||Object.values(lt).every((function(nt){return 0===nt}))}},{"key":"getAnimatorCount","value":function(){var nt=0;return this.animators.forEach((function(at){return nt+=at.length})),nt}},{"key":"getAllAnimators","value":function(){var nt=[];return this.animators.forEach((function(at){nt.push.apply(nt,m(at))})),nt}},{"key":"getElementAnimators","value":function(nt,at){var lt,Rt=xt(nt),Bt=[];return at?Bt=null!==(lt=this.animators.get(at))&&void 0!==lt?lt:[]:this.animators.forEach((function(nt){Bt=Bt.concat(nt)})),Bt.filter((function(nt){return Rt.includes(nt.element)}))}},{"key":"enable","value":function(){return this.isEnabled=!0,this}},{"key":"disable","value":function(){return this.isEnabled=!1,this.stop(),this.animators.clear(),this}},{"key":"enableAnimationState","value":function(nt){var at=xt(nt);return this.disabledStates=this.disabledStates.filter((function(nt){return!at.includes(nt)})),this}},{"key":"disableAnimationState","value":function(nt){var at=xt(nt);return this.disabledStates=this.disabledStates.concat(at),this}},{"key":"release","value":function(){this.stop(),this.animators.clear(),this.configs=null,this.animators=null,this.elementRecorder=null,this.timelineCount=null}},{"key":"animateByTimeline","value":function(nt,at,lt){var Rt,Bt=this,Lt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Ht=[],jt=at.filter((function(at){var Rt=!(at.isReserved&&at.diffState===CH.exit),Ht=Bt.getAnimationState(at),jt=!Bt.disabledStates.includes(Ht),$t=Lt||Ht===nt.state,Kt=!nt.timeline.partitioner||nt.timeline.partitioner(at.getDatum(),at,lt);return Rt&&jt&&$t&&Kt}));if(jt.length){j(this.timelineCount[nt.id])&&(this.timelineCount[nt.id]=0),nt.timeline.sort&&jt.sort((function(at,Rt){return nt.timeline.sort(at.getDatum(),Rt.getDatum(),at,Rt,lt)}));var $t={"width":this.mark.view.width(),"height":this.mark.view.height(),"group":null!==(Rt=this.mark.group)&&void 0!==Rt?Rt:null,"mark":this.mark,"view":this.mark.view,"elementCount":jt.length,"elementIndex":0};jt.forEach((function(at){var lt;(null!==(lt=Bt.animators.get(nt.state))&&void 0!==lt?lt:[]).filter((function(lt){return lt.element===at&&lt.animationOptions.id===nt.id})).forEach((function(nt){nt.stop(null,!1),Bt.handleAnimatorEnd(nt,!1)}))})),jt.forEach((function(at,Rt){$t.elementIndex=Rt;var Lt=Object.assign(l({},"VGRAMMAR_ANIMATION_PARAMETERS",$t),lt),Kt=Bt.getAnimationUnit(nt.timeline,at,Rt,jt.length,Lt);Ht.push(Bt.animateElement(nt,Kt,at,$t,Lt))}))}return Ht}},{"key":"animateElement","value":function(nt,at,lt,Rt,Bt){var Lt,Ht,jt=this,$t=new HW(lt,at,nt);if($t.animate(Rt,Bt),$t.isAnimating){lt.diffState===CH.exit&&(lt.isReserved=!0);var Kt=0===this.timelineCount[nt.id];this.timelineCount[nt.id]+=1;var te=null!==(Lt=this.elementRecorder.get(lt))&&void 0!==Lt?Lt:{"prevState":nt.state,"count":{}};te.prevState=nt.state,te.count[nt.state]=(null!==(Ht=te.count[nt.state])&&void 0!==Ht?Ht:0)+1,this.elementRecorder.set(lt,te);var ne=this.animators.get(nt.state);ne?ne.push($t):this.animators.set(nt.state,[$t]),$t.callback((function(){jt.handleAnimatorEnd($t)}));var re={"mark":this.mark,"animationState":nt.state,"animationConfig":nt.originConfig};return Kt&&this.mark.emit(GH.ANIMATION_START,re),this.mark.emit(GH.ELEMENT_ANIMATION_START,re,lt),$t}}},{"key":"getAnimationState","value":function(nt){var at=aj(this.state,this.mark.parameters(),nt.getDatum(),nt);return null!=at?at:nt.diffState}},{"key":"getAnimationUnit","value":function(nt,at,lt,Rt,Bt){var Lt=[],Ht=rW(nt.startTime,at,Bt),jt=rW(nt.totalTime,at,Bt),$t=rW(nt.oneByOne,at,Bt),Kt=rW(nt.loop,at,Bt),te=0;nt.timeSlices.forEach((function(nt){var lt,Ht=rW(nt.delay,at,Bt),$t=rW(nt.delayAfter,at,Bt),Kt=null!==(lt=rW(nt.duration,at,Bt))&&void 0!==lt?lt:jt/Rt,ne=xt(nt.effects).map((function(nt){return Object.assign({},nt,{"customParameters":rW(nt.customParameters,at,Bt)})}));Lt.push({"effects":ne,"duration":Kt,"delay":Ht,"delayAfter":$t}),te+=Ht+Kt+$t}));var ne=Z($t)?$t:!0===$t?te:0;return{"initialDelay":Ht,"loopCount":Z(Kt)?Kt:!0===Kt?1/0:1,"loopDelay":ne*lt,"loopDelayAfter":ne*(Rt-lt-1),"loopAnimateDuration":te,"loopDuration":te+ne*(Rt-1),"totalTime":jt,"timeSlices":Lt}}},{"key":"clearElementAnimation","value":function(nt){var at=this,lt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.animators.forEach((function(Rt){Rt.forEach((function(Rt){Rt.element===nt&&(Rt.animationOptions.state===CH.exit?Rt.stop("start",!1):Rt.stop("end",!1),at.handleAnimatorEnd(Rt,lt))}))})),this.elementRecorder.delete(nt)}},{"key":"clearAllElements","value":function(){var nt=this,at=this.mark.getAllElements();at&&at.forEach((function(lt,Rt){nt.clearElement(lt,Rt===at.length-1)}))}},{"key":"clearElement","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clearElementAnimation(nt),nt.getGraphicItem()&&(nt.clearGraphicAttributes(),nt.diffState===CH.exit&&(nt.isReserved=!1),at&&this.mark.cleanExitElements())}},{"key":"handleAnimatorEnd","value":function(nt){var at=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],lt=nt.element,Rt=nt.animationOptions,Bt=Rt.state,Lt=Bt===JH,Ht=this.elementRecorder.get(lt).count;Ht[Bt]-=1,this.animators.set(Bt,this.animators.get(Bt).filter((function(at){return at!==nt}))),0===this.animators.get(Bt).length&&this.animators.delete(Bt),this.timelineCount[Rt.id]-=1;var jt=0===this.timelineCount[Rt.id],$t=Lt?this.immediateConfigs.find((function(nt){return nt.id===Rt.id})).originConfig:this.configs.find((function(nt){return nt.id===Rt.id})).originConfig;jt&&(delete this.timelineCount[Rt.id],Lt&&(this.immediateConfigs=this.immediateConfigs.filter((function(nt){return nt.id!==Rt.id})))),at&&(0===Object.keys(this.timelineCount).length?this.clearAllElements():Bt===CH.exit&&0===Ht[CH.exit]&&this.clearElement(lt));var Kt={"mark":this.mark,"animationState":Bt,"animationConfig":$t};jt&&this.mark.emit(GH.ANIMATION_END,Kt),this.mark.emit(GH.ELEMENT_ANIMATION_END,Kt,lt)}}]),$W=o((function t(){r(this,t),this.animate=new YW(this,{})}),[{"key":"initAnimate","value":function(nt){this.animate||(this.animate=new YW(this,nt.animation),this.needAnimate()&&this.animate.updateState(nt.animationState))}},{"key":"reuseAnimate","value":function(nt){this.animate=nt.animate,this.animate.mark=this}},{"key":"updateAnimate","value":function(nt){this.animate.updateConfig(nt.animation),this.animate.updateState(nt.animationState)}}]),hW=function(){Pj.registerStageEventPlugin("gesture",uA)},dW=function(){bt(cV,OW),bt(RN,$W)},QW=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];!function(nt){nt.initialized="initialized",nt.rendered="rendered",nt.renderFinished="renderFinished",nt.animationFinished="animationFinished",nt.regionSeriesDataFilterOver="regionSeriesDataFilterOver",nt.afterInitData="afterInitData",nt.afterInitEvent="afterInitEvent",nt.afterInitMark="afterInitMark",nt.rawDataUpdate="rawDataUpdate",nt.viewDataFilterOver="viewDataFilterOver",nt.viewDataUpdate="viewDataUpdate",nt.viewDataStatisticsUpdate="viewDataStatisticsUpdate",nt.markDeltaYUpdate="markDeltaYUpdate",nt.viewDataLabelUpdate="viewDataLabelUpdate",nt.scaleDomainUpdate="scaleDomainUpdate",nt.scaleUpdate="scaleUpdate",nt.dataZoomChange="dataZoomChange",nt.drill="drill",nt.layoutStart="layoutStart",nt.layoutEnd="layoutEnd",nt.layoutRectUpdate="layoutRectUpdate",nt.playerPlay="playerPlay",nt.playerPause="playerPause",nt.playerEnd="playerEnd",nt.playerChange="playerChange",nt.playerForward="playerForward",nt.playerBackward="playerBackward",nt.scrollBarChange="scrollBarChange",nt.brushStart="brushStart",nt.brushChange="brushChange",nt.brushEnd="brushEnd",nt.brushClear="brushClear",nt.legendSelectedDataChange="legendSelectedDataChange",nt.legendFilter="legendFilter",nt.legendItemClick="legendItemClick",nt.legendItemHover="legendItemHover",nt.legendItemUnHover="legendItemUnHover",nt.tooltipShow="tooltipShow",nt.tooltipHide="tooltipHide",nt.tooltipRelease="tooltipRelease",nt.afterResize="afterResize",nt.afterRender="afterRender",nt.afterLayout="afterLayout"}(jW||(jW={})),function(nt){nt.chart="chart",nt.window="window",nt.canvas="canvas"}(NW||(NW={})),function(nt){nt.vchart="vchart",nt.chart="chart",nt.model="model",nt.mark="mark"}(VW||(VW={}));var fW=function(nt,at){var lt,Rt;return nt===at||!j(nt)&&!j(at)&&nt.value===at.value&&(null===(lt=nt.axis)||void 0===lt?void 0:lt.id)===(null===(Rt=at.axis)||void 0===Rt?void 0:Rt.id)},vW=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt=at.getScale(),$t=HB(jt.type),Kt=[],te=at.getOption().getChart().getSeriesInIndex(at.getSpecInfo().seriesIndexes),h=function(Bt){if(Bt.coordinate===lt){var Lt=xt(Rt(Bt)),te=null===(Ht=Bt.getViewData())||void 0===Ht?void 0:Ht.latestData;if(Lt&&te)if($t){var ne=[],re=[];te.forEach((function(at,lt){var Rt;(null===(Rt=at[Lt[0]])||void 0===Rt?void 0:Rt.toString())===(null==nt?void 0:nt.toString())&&(ne.push(at),re.push(lt))})),Kt.push({"series":Bt,"datum":ne,"key":gW(Bt,re)})}else if(N(Lt[1])){var ae=[],oe=[];te.forEach((function(at,lt){var Rt;((null===(Rt=at[Lt[0]])||void 0===Rt?void 0:Rt.toString())===(null==nt?void 0:nt.toString())||N(at[Lt[0]])&&N(at[Lt[1]])&&nt>=at[Lt[0]]&&nt<at[Lt[1]])&&(ae.push(at),oe.push(lt))})),Kt.push({"series":Bt,"datum":ae,"key":gW(Bt,oe)})}else{var se=function(nt,at){var lt=nt.tooltipFilterRange,Rt="function"==typeof lt?lt({"scale":at}):lt;return Q(Rt)?[-Rt,Rt]:Rt}(at.getSpec(),jt),le=[],ue=[];if(se)te.forEach((function(at,lt){if(N(at[Lt[0]])){var Rt=at[Lt[0]]-nt;Rt>=se[0]&&Rt<=se[1]&&(le.push(at),ue.push(lt))}}));else{var ce=1/0,he=0;te.forEach((function(at,lt){if(N(at[Lt[0]])){var Rt=Math.abs(at[Lt[0]]-nt),Bt=Math.sign(at[Lt[0]]-nt);Rt<ce?(ce=Rt,le=[at],ue=[lt],he=Bt):Rt===ce&&Bt===he&&(le.push(at),ue.push(lt))}}))}Kt.push({"series":Bt,"datum":le,"key":gW(Bt,ue)})}}};try{for(var ne=C(te),re=ne.next();!re.done;re=ne.next())h(re.value)}catch(nt){Bt={"error":nt}}finally{try{re&&!re.done&&(Lt=ne.return)&&Lt.call(ne)}finally{if(Bt)throw Bt.error}}return Kt},gW=function(nt,at){return"".concat(nt.id,"_").concat(at.join("_"))},yW=function(nt,at,lt){var Rt=nt.getAllComponents().filter((function(Rt){return"axes"===Rt.specKey&&at(Rt)&&function(nt,at,lt){var Rt=nt.getRegionsInIds(xt(at.layout.layoutBindRegionID));return null==Rt?void 0:Rt.some((function(nt){var at=nt.getLayoutRect(),Rt=nt.getLayoutStartPoint();return function(nt,at,lt){return nt.x>=at.x&&nt.x<=lt.x&&nt.y>=at.y&&nt.y<=lt.y}(lt,{"x":Rt.x,"y":Rt.y},{"x":at.width+Rt.x,"y":at.height+Rt.y})}))}(nt,Rt,lt)}));return Rt.length?Rt:null},mW=function(nt,at){if(!nt)return null;var lt=yW(nt,(function(nt){return"angle"===nt.getOrient()}),at),Rt=yW(nt,(function(nt){return"radius"===nt.getOrient()}),at);if(!(lt&&lt.length||Rt&&Rt.length))return null;var Bt=[],a=function(nt){return nt.getDimensionField()[0]},Lt=at.x,Ht=at.y;return lt&&lt.forEach((function(nt){var at,lt=nt.getScale();if(lt&&HB(lt.type)){var jt=lt.domain(),$t=lt.range(),Kt=nt.getCenter(),te={"x":Lt-nt.getLayoutStartPoint().x-Kt.x,"y":Ht-nt.getLayoutStartPoint().y-Kt.y},ne=HO({"x":1,"y":0},te);ne=function(nt,at){var lt=2*Math.PI,Rt=At(at),Bt=St(at);return nt<Rt?nt+=Math.ceil((Rt-nt)/lt)*lt:nt>Bt&&(nt-=Math.ceil((nt-Bt)/lt)*lt),nt}(ne,$t);var re=jO(te),ae=null===(at=Rt[0])||void 0===at?void 0:at.getScale(),oe=null==ae?void 0:ae.range();if((ne-(null==$t?void 0:$t[0]))*(ne-(null==$t?void 0:$t[1]))>0||(re-(null==oe?void 0:oe[0]))*(re-(null==oe?void 0:oe[1]))>0)return;var se=nt.invert(ne);if(j(se))return;var le=jt.findIndex((function(nt){return(null==nt?void 0:nt.toString())===se.toString()}));le<0&&(le=void 0);var ue=vW(se,nt,"polar",a);Bt.push({"index":le,"value":se,"position":lt.scale(se),"axis":nt,"data":ue})}})),Rt&&Rt.forEach((function(nt){var at,Rt=nt.getScale(),jt=null==Rt?void 0:Rt.range();if(Rt&&HB(Rt.type)){var $t=nt.getCenter(),Kt={"x":Lt-nt.getLayoutStartPoint().x-$t.x,"y":Ht-nt.getLayoutStartPoint().y-$t.y},te=HO({"x":1,"y":0},Kt);te<-Math.PI/2&&(te=2*Math.PI+te);var ne=jO(Kt),re=null===(at=lt[0])||void 0===at?void 0:at.getScale(),ae=null==re?void 0:re.range();if((te-(null==ae?void 0:ae[0]))*(te-(null==ae?void 0:ae[1]))>0||(ne-(null==jt?void 0:jt[0]))*(ne-(null==jt?void 0:jt[1]))>0)return;var oe=Rt.invert(ne);if(j(oe))return;var se=Rt.domain().findIndex((function(nt){return(null==nt?void 0:nt.toString())===oe.toString()}));se<0&&(se=void 0);var le=vW(oe,nt,"polar",a);Bt.push({"index":se,"value":oe,"position":Rt.scale(oe),"axis":nt,"data":le})}})),Bt.length?Bt:null};function _W(nt){return"bottom"===nt||"top"===nt}function bW(nt){return"left"===nt||"right"===nt}function xW(nt){return"z"===nt}function kW(nt,at){return hF(nt.orient)||at&&at.includes(nt.orient)?nt.orient:"left"}function SW(nt){return"top"===nt||"bottom"===nt?"horizontal":"vertical"}function AW(nt,at){var Rt,Bt=null!==(Rt=nt.type)&&void 0!==Rt?Rt:function(nt,at){return at?_W(nt)?"linear":"band":_W(nt)?"band":"linear"}(nt.orient,at);return{"axisType":Bt,"componentName":"".concat(lt.cartesianAxis,"-").concat(Bt)}}var JW,vG,TW=function(nt){return nt.fieldX[0]},CW=function(nt){return nt.fieldY[0]},EW=function(nt){var at;return[nt.fieldX[0],null!==(at=nt.fieldX2)&&void 0!==at?at:nt.fieldX[1]]},PW=function(nt){var at;return[nt.fieldY[0],null!==(at=nt.fieldY2)&&void 0!==at?at:nt.fieldY[1]]},RW=function(nt,at){return nt?at?TW:EW:at?CW:PW},BW=function(nt,at,lt){var Rt,Bt;if(!nt)return null;var Lt=at.x,Ht=at.y,jt=null!==(Rt=yW(nt,(function(nt){return _W(nt.getOrient())}),at))&&void 0!==Rt?Rt:[],$t=null!==(Bt=yW(nt,(function(nt){return bW(nt.getOrient())}),at))&&void 0!==Bt?Bt:[];if(!jt.length&&!$t.length)return null;var Kt=new Set,te=new Set,ne=new Set;[jt,$t].forEach((function(nt){return nt.forEach((function(nt){HB(nt.getScale().type)?Kt.add(nt):te.add(nt),lt&&nt.getSpec().hasDimensionTooltip&&ne.add(nt)}))}));var re=[],p=function(nt){var at="x"===nt,lt=at?Lt:Ht;(at?jt:$t).forEach((function(nt){if(ne.size>0)ne.has(nt)&&(Rt=IW(nt,lt,RW(at,HB(nt.getScale().type))))&&re.push(Rt);else{var Rt,Bt=Kt.size>0;(Bt?Kt:te).has(nt)&&(Rt=IW(nt,lt,RW(at,Bt)))&&re.push(Rt)}}))};return"horizontal"===nt.getSpec().direction?(p("y"),0===re.length&&p("x")):(p("x"),0===re.length&&p("y")),re.length?re:null},IW=function(nt,at,lt){var Rt=nt.positionToData(at,!0);return j(Rt)?null:LW(nt,Rt,lt)},LW=function(nt,at,lt){var Rt=nt.getScale();if(j(at))return null;var Bt=Rt.domain().findIndex((function(nt){return(null==nt?void 0:nt.toString())===at.toString()}));Bt<0&&(Bt=void 0);var Lt=vW(at,nt,"cartesian",null!=lt?lt:_W(nt.getOrient())?TW:CW);return{"index":Bt,"value":at,"position":Rt.scale(at),"axis":nt,"data":Lt}},YG=function(){function t(nt,at){this._eventDispatcher=nt,this._mode=at}return Object.defineProperty(t.prototype,"chart",{"get":function(){var nt,at;return this._chart||(this._chart=null===(at=(nt=this._eventDispatcher.globalInstance).getChart)||void 0===at?void 0:at.call(nt)),this._chart},"enumerable":!1,"configurable":!0}),t.prototype.register=function(nt,at){var lt,Rt;(null!==(Rt=null===(lt=this.chart)||void 0===lt?void 0:lt.getOption().onError)&&void 0!==Rt?Rt:Ik)("Method not implemented.")},t.prototype.unregister=function(){var nt,at;(null!==(at=null===(nt=this.chart)||void 0===nt?void 0:nt.getOption().onError)&&void 0!==at?at:Ik)("Method not implemented.")},t.prototype.getTargetDimensionInfo=function(nt,at){var lt,Rt,Bt=null!==(lt=BW(this.chart,{"x":nt,"y":at}))&&void 0!==lt?lt:[],Lt=null!==(Rt=mW(this.chart,{"x":nt,"y":at}))&&void 0!==Rt?Rt:[],Ht=[].concat(Bt,Lt);return 0===Ht.length?null:Ht},t.prototype.dispatch=function(nt,at){var lt,Rt=null===(lt=this.chart)||void 0===lt?void 0:lt.getAllComponents().filter((function(nt){return"axes"===nt.specKey&&(!(null==at?void 0:at.filter)||at.filter(nt))})),Bt=Rt.filter((function(nt){return HB(nt.getScale().type)})),Lt=Bt.length?Bt:Rt.filter((function(nt){var at=nt.getOrient();return _W(at)||"angle"===at})),Ht=[];return Lt.forEach((function(at){var lt=LW(at,nt);lt&&Ht.push(lt)})),this._callback.call(null,{"action":"enter","dimensionInfo":Ht}),Ht},t}(),XG=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.onClick=function(nt){if(nt){var lt=nt.event.viewX,Rt=nt.event.viewY,Bt=at.getTargetDimensionInfo(lt,Rt);Bt&&at._callback.call(null,A(A({},nt),{"action":"click","dimensionInfo":Bt.slice()}))}},at}return S(e,nt),e.prototype.register=function(nt,at){this._callback=at.callback,this._eventDispatcher.register("pointertap",{"query":A(A({},at.query),{"source":NW.chart}),"callback":this.onClick})},e.prototype.unregister=function(){this._eventDispatcher.unregister("pointertap",{"query":null,"callback":this.onClick})},e}(YG),$G=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._cacheDimensionInfo=null,at.onMouseMove=function(nt){if(nt){var lt=nt.event.viewX,Rt=nt.event.viewY,Bt=at.getTargetDimensionInfo(lt,Rt);null===Bt&&null!==at._cacheDimensionInfo?(at._callback.call(null,A(A({},nt),{"action":"leave","dimensionInfo":at._cacheDimensionInfo.slice()})),at._cacheDimensionInfo=Bt):null===Bt||null!==at._cacheDimensionInfo&&Bt.length===at._cacheDimensionInfo.length&&!Bt.some((function(nt,lt){return!fW(nt,at._cacheDimensionInfo[lt])}))?null!==Bt&&at._callback.call(null,A(A({},nt),{"action":"move","dimensionInfo":Bt.slice()})):(at._callback.call(null,A(A({},nt),{"action":"enter","dimensionInfo":Bt.slice()})),at._cacheDimensionInfo=Bt)}},at.onMouseOut=function(nt){nt&&(at._callback.call(null,A(A({},nt),{"action":"leave","dimensionInfo":at._cacheDimensionInfo?at._cacheDimensionInfo.slice():[]})),at._cacheDimensionInfo=null)},at}return S(e,nt),e.prototype.register=function(nt,at){this._callback=at.callback,this._eventDispatcher.register("pointermove",{"query":A(A({},at.query),{"source":NW.chart}),"callback":this.onMouseMove}),this._eventDispatcher.register("pointerout",{"query":A(A({},at.query),{"source":NW.canvas}),"callback":this.onMouseOut}),zk(this._mode)&&this._eventDispatcher.register("pointerdown",{"query":A(A({},at.query),{"source":NW.chart}),"callback":this.onMouseMove})},e.prototype.unregister=function(){this._eventDispatcher.unregister("pointermove",{"query":null,"callback":this.onMouseMove}),zk(this._mode)&&this._eventDispatcher.unregister("pointerdown",{"query":null,"callback":this.onMouseMove})},e}(YG);nt.DimensionEventEnum=void 0,(JW=nt.DimensionEventEnum||(nt.DimensionEventEnum={})).dimensionHover="dimensionHover",JW.dimensionClick="dimensionClick";var KG=((vG={})[nt.DimensionEventEnum.dimensionHover]=$G,vG[nt.DimensionEventEnum.dimensionClick]=XG,vG),QG=function(){function t(nt,at){this._composedEventMap=new Map,this._eventDispatcher=nt,this._mode=at}return t.prototype.getComposedEventMap=function(){return this._composedEventMap},t.prototype.on=function(nt,at,lt){var Rt="function"==typeof at?{"query":null,"callback":at}:{"query":at,"callback":lt};if(KG[nt]){var Bt=new KG[nt](this._eventDispatcher,this._mode);Bt.register(nt,Rt),this._composedEventMap.set(lt,{"eventType":nt,"event":Bt})}else this._eventDispatcher.register(nt,Rt);return this},t.prototype.off=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt=null!=lt?lt:at;if(KG[nt])if(jt)null===(Lt=this._composedEventMap.get(jt))||void 0===Lt||Lt.event.unregister(),this._composedEventMap.delete(jt);else try{for(var $t=C(this._composedEventMap.entries()),Kt=$t.next();!Kt.done;Kt=$t.next()){var te=Kt.value;te[1].eventType===nt&&(null===(Ht=this._composedEventMap.get(te[0]))||void 0===Ht||Ht.event.unregister(),this._composedEventMap.delete(te[0]))}}catch(nt){Rt={"error":nt}}finally{try{Kt&&!Kt.done&&(Bt=$t.return)&&Bt.call($t)}finally{if(Rt)throw Rt.error}}else if(jt){var ne={"callback":jt,"query":null,"filter":{"nodeName":null,"type":nt,"level":null,"source":at.source,"markName":null,"filter":null,"userId":null}};this._eventDispatcher.unregister(nt,ne)}else this._eventDispatcher.unregister(nt);return this},t.prototype.emit=function(nt,at,lt){return this._eventDispatcher.dispatch(nt,at,lt),this},t.prototype.prevent=function(nt,at){return this._eventDispatcher.prevent(nt,at),this},t.prototype.allow=function(nt){return this._eventDispatcher.allow(nt),this},t.prototype.release=function(){this._eventDispatcher.clear(),this._composedEventMap.clear()},t}(),JG=function(){function t(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(VW.vchart,[]),this._levelNodes.set(VW.chart,[]),this._levelNodes.set(VW.model,[]),this._levelNodes.set(VW.mark,[])}return t.prototype.addHandler=function(nt,at){var lt,Rt={"level":at,"handler":nt};return null===(lt=this._levelNodes.get(at))||void 0===lt||lt.push(Rt),this._map.set(nt.callback,Rt),this},t.prototype.removeHandler=function(nt){var at=this._map.get(nt.callback);if(!at)return this;this._map.delete(nt.callback);var lt=this._levelNodes.get(at.level),Rt=null==lt?void 0:lt.findIndex((function(at){return at.handler.callback===nt.callback}));return void 0!==Rt&&Rt>=0&&(null==lt||lt.splice(Rt,1)),this},t.prototype.preventHandler=function(nt){return nt&&(nt.prevented=!0),this},t.prototype.allowHandler=function(nt){return nt&&(nt.prevented=!1),this},t.prototype.getHandlers=function(nt){var at;return(null===(at=this._levelNodes.get(nt))||void 0===at?void 0:at.map((function(nt){return nt.handler})))||[]},t.prototype.getAllHandlers=function(){return Array.from(this._map.values()).map((function(nt){return nt.handler}))||[]},t.prototype.getCount=function(){return this._map.size},t.prototype.release=function(){this._map.clear(),this._levelNodes.clear()},t}(),aU={"cartesianAxis":"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis","polarAxis":"axis","polarAxis-band":"axis","polarAxis-linear":"axis","discreteLegend":"legend","continuousLegend":"legend","colorLegend":"legend","sizeLegend":"legend"},oU=function(){function t(nt,at){var lt=this;this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=function(nt){var at,Rt,Bt=lt.globalInstance.getChart(),Lt=N(nt.modelId)&&(null==Bt?void 0:Bt.getModelById(nt.modelId))||void 0,Ht=N(nt.markId)&&(null==Bt?void 0:Bt.getMarkById(nt.markId))||null,jt=new Map,$t=null===(at=nt.item)||void 0===at?void 0:at.mark;for($t&&N($t.id())&&jt.set($t.id(),nt.item);null==$t?void 0:$t.elements;){var Kt=$t.id();N(Kt)&&!jt.has(Kt)&&jt.set(Kt,$t.elements[0]),$t=$t.group}var te=st(nt.event,"target"),ne=nt.datum;Lt&&"component"===Lt.modelType&&(ne=null!==(Rt=Lt.getDatum(te))&&void 0!==Rt?Rt:ne);var re={"event":nt.event,"item":nt.item,"source":nt.source,"datum":ne,"itemMap":jt,"chart":Bt,"model":Lt,"mark":null!=Ht?Ht:void 0,"node":st(nt.event,"target")};lt.dispatch(nt.type,re)},this._onDelegateInteractionEvent=function(nt){var at=lt.globalInstance.getChart(),Rt=nt.event,Bt=null;Rt.elements&&(Bt=Rt.elements);var Lt={"event":nt.event,"chart":at,"items":Bt,"datums":Bt&&Bt.map((function(nt){return nt.getDatum()}))};lt.dispatch(nt.type,Lt)},this.globalInstance=nt,this._compiler=at}return t.prototype.register=function(nt,at){var lt,Rt,Bt,Lt,Ht;this._parseQuery(at);var jt=this.getEventBubble((null===(lt=at.filter)||void 0===lt?void 0:lt.source)||NW.chart),$t=this.getEventListeners((null===(Rt=at.filter)||void 0===Rt?void 0:Rt.source)||NW.chart);if(jt.get(nt)||jt.set(nt,new JG),jt.get(nt).addHandler(at,null===(Bt=at.filter)||void 0===Bt?void 0:Bt.level),this._isValidEvent(nt)&&!$t.has(nt)){var Kt=this._onDelegate.bind(this);this._compiler.addEventListener(null===(Lt=at.filter)||void 0===Lt?void 0:Lt.source,nt,Kt),$t.set(nt,Kt)}else this._isInteractionEvent(nt)&&!$t.has(nt)&&(Kt=this._onDelegateInteractionEvent.bind(this),this._compiler.addEventListener(null===(Ht=at.filter)||void 0===Ht?void 0:Ht.source,nt,Kt),$t.set(nt,Kt));return this},t.prototype.unregister=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt=!1,$t=this.getEventBubble((null===(lt=null==at?void 0:at.filter)||void 0===lt?void 0:lt.source)||NW.chart),Kt=this.getEventListeners((null===(Rt=null==at?void 0:at.filter)||void 0===Rt?void 0:Rt.source)||NW.chart);if(at?(null==(Ht=$t.get(nt))||Ht.removeHandler(at),0===(null==Ht?void 0:Ht.getCount())&&(null==Ht||Ht.release(),$t.delete(nt),jt=!0),(null===(Bt=null==at?void 0:at.wrappedCallback)||void 0===Bt?void 0:Bt.cancel)&&at.wrappedCallback.cancel()):(null==(Ht=$t.get(nt))||Ht.release(),$t.delete(nt),jt=!0),jt&&this._isValidEvent(nt)){var te=Kt.get(nt);this._compiler.removeEventListener((null===(Lt=null==at?void 0:at.filter)||void 0===Lt?void 0:Lt.source)||NW.chart,nt,te),Kt.delete(nt)}return this},t.prototype.dispatch=function(nt,at,lt){var Rt=this.getEventBubble(at.source||NW.chart).get(nt);if(!Rt)return this;var Bt=!1;if(lt){var Lt=Rt.getHandlers(lt);Bt=this._invoke(Lt,nt,at)}else for(var Ht=[VW.mark,VW.model,VW.chart,VW.vchart],jt=0;!Bt&&jt<Ht.length;)Bt=this._invoke(Rt.getHandlers(Ht[jt]),nt,at),jt++;return this},t.prototype.prevent=function(nt,at){var lt=this;return["canvas","chart","window"].forEach((function(Rt){var Bt=lt.getEventBubble(Rt).get(nt);Bt&&Bt.getAllHandlers().forEach((function(nt){at&&nt.callback===at||Bt.preventHandler(nt)}))})),this},t.prototype.allow=function(nt){var at=this;return["canvas","chart","window"].forEach((function(lt){var Rt=at.getEventBubble(lt).get(nt);Rt&&Rt.getAllHandlers().forEach((function(nt){return Rt.allowHandler(nt)}))})),this},t.prototype.clear=function(){var nt=this;[NW.chart,NW.window,NW.canvas].forEach((function(at){var lt,Rt,Bt=nt.getEventListeners(at);try{for(var Lt=C(Bt.entries()),Ht=Lt.next();!Ht.done;Ht=Lt.next()){var jt=Ht.value;nt._compiler.removeEventListener(at,jt[0],jt[1])}}catch(nt){lt={"error":nt}}finally{try{Ht&&!Ht.done&&(Rt=Lt.return)&&Rt.call(Lt)}finally{if(lt)throw lt.error}}Bt.clear()})),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach((function(nt){var at,lt;try{for(var Rt=C(nt.values()),Bt=Rt.next();!Bt.done;Bt=Rt.next())Bt.value.release()}catch(nt){at={"error":nt}}finally{try{Bt&&!Bt.done&&(lt=Rt.return)&&lt.call(Rt)}finally{if(at)throw at.error}}nt.clear()}))},t.prototype.release=function(){this.clear(),this.globalInstance=null,this._compiler=null},t.prototype._filter=function(nt,at,lt){var Rt,Bt,Lt;if(H(nt.filter)&&!nt.filter(lt))return!1;if(nt.nodeName&&st(lt,"node.name")!==nt.nodeName)return!1;if(nt.markName&&(null===(Rt=null==lt?void 0:lt.mark)||void 0===Rt?void 0:Rt.name)!==nt.markName)return!1;var Ht=null===(Bt=lt.model)||void 0===Bt?void 0:Bt.type;return aU[Ht]&&(Ht=aU[Ht]),!(nt.type&&Ht!==nt.type||"mark"===nt.level&&!nt.type&&!(null==lt?void 0:lt.mark)||"model"===nt.level&&!nt.type&&!(null==lt?void 0:lt.model)||N(nt.userId)&&(null===(Lt=lt.model)||void 0===Lt?void 0:Lt.userId)!==nt.userId)},t.prototype._prepareParams=function(nt,at){if(nt.markName&&at.mark&&at.itemMap){var lt=at.mark.getProductId(),Rt=at.itemMap.get(lt),Bt=null==Rt?void 0:Rt.getDatum();return A(A({},at),{"item":Rt,"datum":Bt})}return A({},at)},t.prototype._invoke=function(nt,at,lt){var Rt=this,Bt=nt.map((function(nt){var Bt,Lt,Ht,jt=nt.filter;if(!nt.prevented&&(!nt.query||Rt._filter(jt,at,lt))){var $t=(nt.wrappedCallback||nt.callback).call(null,Rt._prepareParams(jt,lt)),Kt=null!=$t?$t:null===(Bt=nt.query)||void 0===Bt?void 0:Bt.consume;return Kt&&(null===(Lt=lt.event)||void 0===Lt||Lt.stopPropagation(),null===(Ht=lt.event)||void 0===Ht||Ht.preventDefault()),!!Kt}}));return Bt.some((function(nt){return!0===nt}))},t.prototype._getQueryLevel=function(nt){return nt?nt.level?nt.level:N(nt.id)?VW.model:VW.vchart:VW.vchart},t.prototype._parseQuery=function(nt){var at,lt=nt.query;(null==lt?void 0:lt.throttle)?nt.wrappedCallback=Zt(nt.callback,lt.throttle):(null==lt?void 0:lt.debounce)&&(nt.wrappedCallback=qt(nt.callback,lt.debounce));var Rt=this._getQueryLevel(lt),Bt=null,Lt=NW.chart,Ht=null,jt=null,$t=null;return(null==lt?void 0:lt.nodeName)&&(Ht=lt.nodeName),(null==lt?void 0:lt.markName)&&(jt=lt.markName),!(null==lt?void 0:lt.type)||Rt!==VW.model&&Rt!==VW.mark||(Bt=lt.type),(null==lt?void 0:lt.source)&&(Lt=lt.source),N(null==lt?void 0:lt.id)&&($t=null==lt?void 0:lt.id,Rt=VW.model),nt.filter={"level":Rt,"markName":jt,"type":Bt,"source":Lt,"nodeName":Ht,"userId":$t,"filter":null!==(at=null==lt?void 0:lt.filter)&&void 0!==at?at:null},nt},t.prototype.getEventBubble=function(nt){switch(nt){case NW.chart:return this._viewBubbles;case NW.window:return this._windowBubbles;case NW.canvas:return this._canvasBubbles;default:return this._viewBubbles}},t.prototype.getEventListeners=function(nt){switch(nt){case NW.chart:return this._viewListeners;case NW.window:return this._windowListeners;case NW.canvas:return this._canvasListeners;default:return this._viewListeners}},t.prototype._isValidEvent=function(nt){return QW.includes(nt)||Object.values(GH).includes(nt)},t.prototype._isInteractionEvent=function(nt){var at;return nt&&(at=nt.split(":")[0])&&Pj.hasInteraction(at)},t}();function GW(nt,at,lt){nt.getTransform(at)||nt.registerTransform(at,lt)}function WW(nt,at,lt){nt.getParser(at)||nt.registerParser(at,lt)}var sU,fU=new Map;function XW(){sU||(WW(sU=new Ms,"geojson",is),WW(sU,"topojson",rs),GW(sU,"simplify",So))}function KW(nt,at,lt){void 0===lt&&(lt={"type":"geojson","centroid":!0}),fU.has(nt)&&Bk("map type of '".concat(nt,"' already exists, will be overwritten.")),XW();var Rt=new Es(sU),Bt=ft({},{"centroid":!0,"simplify":!1},lt);"topojson"===lt.type?Rt.parse(at,{"type":"topojson","options":Bt}):Rt.parse(at,{"type":"geojson","options":Bt});var Lt=lt.simplify;!0===Lt?Rt.transform({"type":"simplify"}):V(Lt)&&Rt.transform({"type":"simplify","options":Lt}),fU.set(nt,Rt)}function qW(nt){fU.has(nt)?fU.delete(nt):Bk("map type of '".concat(nt,"' does not exists."))}function ZW(nt,at){void 0===at&&(at=!1);var lt=at;return nt.latestData instanceof Es&&(lt=!1),lt?ct(nt.latestData):nt.latestData&&nt.latestData.slice()}var vU,gU,yU,tU=function(nt,at){return 0===nt.length?[]:1===nt.length?ZW(nt[0],null==at?void 0:at.deep):nt.map((function(nt){return ZW(nt,null==at?void 0:at.deep)}))};function eU(nt,at,lt){GW(at=at instanceof Ms?at:nt.dataSet,"copyDataView",tU);var Rt=new Es(at,lt);return Rt.parse([nt],{"type":"dataview"}),Rt.transform({"type":"copyDataView","level":vU.copyDataView}),Rt}function iU(nt,at,lt){var Rt;if(void 0===lt&&(lt=[]),nt instanceof Es)return nt;var Bt,Lt=nt.id,Ht=nt.values,jt=void 0===Ht?[]:Ht,$t=nt.fromDataIndex,Kt=nt.fromDataId,te=nt.transforms,ne=void 0===te?[]:te,re=nt.parser?ct(nt.parser):{"clone":!0},ae=ct(nt.fields);re.clone=!(!1===re.clone);var oe=lt.find((function(nt){return nt.name===Lt}));if(oe)Bt=oe;else{var se={"name":Lt};if(ae&&(se.fields=ae),Bt=new Es(at,se),"string"==typeof Kt){if(!(le=lt.find((function(nt){return nt.name===Kt}))))return Bk("no data matches fromDataId ".concat(Kt)),null;Bt.parse([le],{"type":"dataview"}),Bt.transform({"type":"copyDataView"})}else if("number"==typeof $t){var le;if(!(le=lt[$t]))return Bk("no data matches fromDataIndex ".concat($t)),null;Bt.parse([le],{"type":"dataview"}),Bt.transform({"type":"copyDataView"})}else Array.isArray(jt)?Bt.parse(jt,re):!Y(jt)||re&&!["csv","dsv","tsv"].includes(re.type)?(Bt.parse([]),Bk("values should be array")):Bt.parse(jt,null!==(Rt=re)&&void 0!==Rt?Rt:{"type":"csv"});ne&&ne.length&&ne.forEach((function(nt){at.getTransform(nt.type)&&Bt.transform(nt)}))}return Bt}function nU(nt,at,lt){nt&&(at.fields&&nt.setFields(at.fields,lt),nt.parseNewData(at.values,at.parser))}function rU(at){switch(at){case nt.RenderModeEnum["desktop-browser"]:case nt.RenderModeEnum["mobile-browser"]:return"browser";case nt.RenderModeEnum.node:case nt.RenderModeEnum.worker:return"node";case nt.RenderModeEnum.miniApp:case nt.RenderModeEnum["desktop-miniApp"]:return"feishu";case nt.RenderModeEnum.lynx:return"lynx";case nt.RenderModeEnum.wx:return"wx";case nt.RenderModeEnum.tt:return"tt";case nt.RenderModeEnum.harmony:return"harmony"}return"browser"}!function(nt){nt[nt.copyDataView=-10]="copyDataView",nt[nt.treemapFilter=-8]="treemapFilter",nt[nt.treemapFlatten=-7]="treemapFlatten",nt[nt.dotObjFlat=-7]="dotObjFlat",nt[nt.linkDotInfo=-7]="linkDotInfo",nt[nt.sankeyLayout=-7]="sankeyLayout",nt[nt.dataZoomFilter=-6]="dataZoomFilter",nt[nt.legendFilter=-5]="legendFilter"}(vU||(vU={})),function(nt){nt.appear="appear",nt.disappear="disappear",nt.enter="enter",nt.update="update",nt.state="state",nt.exit="exit",nt.normal="normal",nt.none="none"}(gU||(gU={})),function(nt){nt.data="data",nt.signal="signal",nt.mark="mark"}(yU||(yU={}));var mU,bU,xU=function(){function t(nt,at){var lt,Rt=this;this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._model=((lt={})[yU.signal]={},lt[yU.data]={},lt[yU.mark]={},lt),this._compileChart=null,this.handleStageRender=function(){var nt,at;null===(at=null===(nt=Rt._compileChart)||void 0===nt?void 0:nt.getEvent())||void 0===at||at.emit(jW.afterRender,{"chart":Rt._compileChart})},this._container=nt,this._option=at}return t.prototype.getVGrammarView=function(){return this._view},t.prototype.getModel=function(){return this._model},t.prototype.getRenderer=function(){var nt;return null===(nt=this._view)||void 0===nt?void 0:nt.renderer},t.prototype.getCanvas=function(){var nt;return null===(nt=this._view)||void 0===nt?void 0:nt.renderer.canvas()},t.prototype.getStage=function(){var nt;return null===(nt=this._view)||void 0===nt?void 0:nt.renderer.stage()},t.prototype.initView=function(){var nt,at,lt,Rt,Bt=this;if(!this._released&&(this.isInited=!0,!this._view)){var Lt=new te(null!==(nt=this._option.logLevel)&&void 0!==nt?nt:$t.Error);(null===(at=this._option)||void 0===at?void 0:at.onError)&&Lt.addErrorHandler((function(){for(var nt,at,lt=[],Rt=0;Rt<arguments.length;Rt++)lt[Rt]=arguments[Rt];null===(at=null===(nt=Bt._option)||void 0===nt?void 0:nt.onError)||void 0===at||at.call.apply(at,P([nt],E(lt),!1))}));var Ht=this._option,jt=Ht.performanceHook,Kt=Ht.autoRefreshDpr,ne=Ht.dpr,re=Ht.mode,ae=Ht.gestureConfig,oe=Ht.interactive,se=Ht.clickInterval,le=Ht.autoPreventDefault,ue=w(Ht,["performanceHook","autoRefreshDpr","dpr","mode","gestureConfig","interactive","clickInterval","autoPreventDefault"]);this._view=new cV(A(A({"width":this._width,"height":this._height,"container":null!==(lt=this._container.dom)&&void 0!==lt?lt:null,"renderCanvas":null!==(Rt=this._container.canvas)&&void 0!==Rt?Rt:null,"hooks":jt},ue),{"dpr":ne,"autoRefresh":N(Kt)?Kt:!N(ne),"mode":rU(re),"autoFit":!1,"eventConfig":{"gesture":N(ae)?ae:zk(re),"disable":!1===oe,"clickInterval":se,"autoPreventDefault":le},"doLayout":function(){var nt;null===(nt=Bt._compileChart)||void 0===nt||nt.onLayout(Bt._view)},"logger":Lt,"logLevel":Lt.level()})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),!1!==oe&&this._viewListeners.forEach((function(nt){var at;null===(at=Bt._view)||void 0===at||at.addEventListener(nt.type,nt.callback)}))}},t.prototype._setCanvasStyle=function(){if(this._view&&this._container.dom&&!Y(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";var nt=this.getCanvas();nt&&(nt.style.display="block")}},t.prototype.compileInteractions=function(){var nt,at=this;if(this._view.removeAllInteractions(),null===(nt=this._interactions)||void 0===nt?void 0:nt.length){var lt={};this._interactions.forEach((function(nt){var Rt;if(nt.regionId){var Bt="".concat(nt.regionId,"-").concat(nt.type,"-").concat(null!==(Rt=nt.id)&&void 0!==Rt?Rt:""),Lt=lt[Bt];lt[Bt]=Lt?A(A(A({},Lt),nt),{"selector":P(P([],E(Lt.selector),!1),E(nt.selector),!1)}):nt}else at._view.interaction(nt.type,nt)})),Object.keys(lt).forEach((function(nt){var Rt=at._view.interaction(lt[nt].type,lt[nt]);if(at._compileChart){var Bt=at._compileChart.getRegionsInIds([lt[nt].regionId])[0];Bt&&Bt.interaction.addVgrammarInteraction(Rt.getStartState(),Rt)}}))}},t.prototype.compile=function(nt,at){if(!this._released){var lt=nt.chart;this._compileChart=lt,this.initView(),this._view&&(lt.compile(),lt.afterCompile(),this.updateDepend(),this.compileInteractions())}},t.prototype.clearNextRender=function(){return!!this._nextRafId&&(ax.getCancelAnimationFrame()(this._nextRafId),this._nextRafId=null,!0)},t.prototype.clear=function(nt,at){void 0===at&&(at=!1);var lt=nt.chart;this.clearNextRender(),lt.clear(),this.releaseGrammar(at)},t.prototype.renderNextTick=function(nt){var at=this;this._released||this._nextRafId||(this._nextRafId=ax.getRequestAnimationFrame()((function(){at._nextRafId=null,at.render(nt)})))},t.prototype.render=function(nt){var at,lt;this._released||(this.initView(),this._view&&(null===(at=this._view)||void 0===at||at.run(nt),this.clearNextRender()&&(null===(lt=this._view)||void 0===lt||lt.run(nt))))},t.prototype.updateViewBox=function(nt,at){void 0===at&&(at=!0),this._view&&this._view.renderer.setViewBox(nt,at)},t.prototype.resize=function(nt,at,lt){void 0===lt&&(lt=!0),this._view&&(this._width=nt,this._height=at,this._view.resize(nt,at),lt&&this.render({"morph":!1}))},t.prototype.setBackground=function(nt){var at;null===(at=this._view)||void 0===at||at.background(nt)},t.prototype.setSize=function(nt,at){this._width=nt,this._height=at,this._view&&(this._view.width(nt),this._view.height(at))},t.prototype.setViewBox=function(nt,at){void 0===at&&(at=!0),this._view&&this._view.renderer.setViewBox(nt,at)},t.prototype.addEventListener=function(nt,at,lt){var Rt,Bt;if(!1!==this._option.interactive)if(nt===NW.chart){var Lt=function(Rt,Bt){var Lt,Ht,jt,$t=null!==(Ht=null===(Lt=null==Bt?void 0:Bt.mark)||void 0===Lt?void 0:Lt.getContext())&&void 0!==Ht?Ht:{},Kt=N($t.modelId)?$t.modelId:null,te=N($t.markId)?$t.markId:null,ne=N($t.modelUserId)?$t.modelUserId:null,re=N($t.markUserId)?$t.markUserId:null,ae={"event":Rt,"type":at,"source":nt,"item":Bt,"datum":(null===(jt=null==Bt?void 0:Bt.getDatum)||void 0===jt?void 0:jt.call(Bt))||null,"markId":te,"modelId":Kt,"markUserId":re,"modelUserId":ne};lt.call(null,ae)}.bind(this);this._viewListeners.set(lt,{"type":at,"callback":Lt}),null===(Rt=this._view)||void 0===Rt||Rt.addEventListener(at,Lt)}else if(nt===NW.window){Lt=function(Rt){var Bt={"event":Rt,"type":at,"source":nt,"item":null,"datum":null,"markId":null,"modelId":null,"markUserId":null,"modelUserId":null};lt.call(null,Bt)}.bind(this),this._windowListeners.set(lt,{"type":at,"callback":Lt});var Ht=this._getGlobalThis();null==Ht||Ht.addEventListener(at,Lt)}else if(nt===NW.canvas){Lt=function(Rt){var Bt={"event":Rt,"type":at,"source":nt,"item":null,"datum":null,"markId":null,"modelId":null,"markUserId":null,"modelUserId":null};lt.call(null,Bt)}.bind(this),this._canvasListeners.set(lt,{"type":at,"callback":Lt});var jt=null===(Bt=this.getStage())||void 0===Bt?void 0:Bt.window;null==jt||jt.addEventListener(at,Lt)}},t.prototype.removeEventListener=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt;if(!1!==this._option.interactive)if(nt===NW.chart)(te=null===(Rt=this._viewListeners.get(lt))||void 0===Rt?void 0:Rt.callback)&&(null===(Bt=this._view)||void 0===Bt||Bt.removeEventListener(at,te)),this._viewListeners.delete(lt);else if(nt===NW.window){var $t=this._getGlobalThis();(te=null===(Lt=this._windowListeners.get(lt))||void 0===Lt?void 0:Lt.callback)&&(null==$t||$t.removeEventListener(at,te)),this._windowListeners.delete(lt)}else if(nt===NW.canvas){var Kt=null===(Ht=this.getStage())||void 0===Ht?void 0:Ht.window,te=null===(jt=this._canvasListeners.get(lt))||void 0===jt?void 0:jt.callback;Kt&&te&&(null==Kt||Kt.removeEventListener(at,te)),this._canvasListeners.delete(lt)}},t.prototype.releaseEvent=function(){var nt=this.getStage();nt&&nt.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()},t.prototype.release=function(){var nt;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this._releaseModel(),null===(nt=this._view)||void 0===nt||nt.release(),this._view=null,this.isInited=!1,this._compileChart=null,this._released=!0},t.prototype.releaseGrammar=function(nt){var at,lt;void 0===nt&&(nt=!1),this._releaseModel(),nt&&(null===(at=this._view)||void 0===at||at.removeAllGraphicItems()),null===(lt=this._view)||void 0===lt||lt.removeAllGrammars()},t.prototype._releaseModel=function(){var nt=this;Object.keys(this._model).forEach((function(at){Object.values(nt._model[at]).forEach((function(nt){Object.values(nt).forEach((function(nt){nt.removeProduct(!0)}))})),nt._model[at]={}}))},t.prototype.addGrammarItem=function(nt){var at=nt.getProduct();if(!j(at)){var lt=at.id(),Rt=nt.grammarType;j(this._model[Rt][lt])&&(this._model[Rt][lt]={}),this._model[Rt][lt][nt.id]=nt}},t.prototype.removeGrammarItem=function(nt,at){var lt,Rt=nt.getProduct();if(!j(Rt)){var Bt=Rt.id(),Lt=nt.grammarType,Ht=this._model[Lt][Bt];N(Ht)&&(delete Ht[nt.id],0===Object.keys(Ht).length&&delete this._model[Lt][Bt]),at||null===(lt=this._view)||void 0===lt||lt.removeGrammar(Rt)}},t.prototype.addInteraction=function(nt){this._interactions||(this._interactions=[]),this._interactions.push(nt)},t.prototype.removeInteraction=function(nt){this._interactions&&(this._interactions=this._interactions.filter((function(at){return at.seriesId!==nt})))},t.prototype.updateDepend=function(nt){return N(nt)&&nt.length>0?nt.every((function(nt){return nt.updateDepend()})):(Object.values(this._model).forEach((function(nt){Object.values(nt).forEach((function(nt){var at=Object.values(nt),lt=at[0].getProduct(),Rt=at.reduce((function(nt,at){return at.getDepend().length>0?nt.concat(at.getDepend()):nt}),[]).filter((function(nt){return!!nt})).map((function(nt){return nt.getProduct()}));lt.depend(Rt)}))})),!0)},t.prototype._getGlobalThis=function(){var nt;return Fk(this._option.mode)?globalThis:null===(nt=this.getStage())||void 0===nt?void 0:nt.window},t}();function lU(nt){return new Promise((function(at){nt.convertToBlob().then((function(nt){var lt=new FileReader;lt.readAsDataURL(nt),lt.onload=function(){at(lt.result)}}))}))}function uU(nt,at){var lt;return M(this,void 0,void 0,(function(){return T(this,(function(Rt){if(!nt)return[2,""];try{if(void 0!==OffscreenCanvas&&nt instanceof OffscreenCanvas)return[2,lU(nt)]}catch(nt){(null!==(lt=null==at?void 0:at.onError)&&void 0!==lt?lt:Ik)("getCanvasDataURL error : ".concat(nt.toString()))}return[2,nt.toDataURL()]}))}))}function cU(nt){nt.crosshair=xt(nt.crosshair||{}).map((function(at){var lt;return gz(((lt={})["horizontal"===nt.direction?"yField":"xField"]={"visible":!0,"line":{"visible":!0,"type":"rect"}},lt),at)}))}function hU(nt,at,lt){var Rt,Bt=nt.width,Lt=nt.height;if(N(Bt)&&N(Lt))return{"width":Bt,"height":Lt};var Ht=lt.width,jt=lt.height,$t=at.container,Kt=at.canvas;if($t){var te=Ei($t,lt.width,lt.height);Ht=te.width,jt=te.height}else if(Kt&&Fk(at.mode)){var ne=Ei(Y(Kt)?ax.getElementById(Kt):Kt,lt.width,lt.height);Ht=ne.width,jt=ne.height}else if(Hk(at.mode)&&(null===(Rt=at.modeParams)||void 0===Rt?void 0:Rt.domref)){var re=at.modeParams.domref;Ht=re.width,jt=re.height}return{"width":Ht=null!=Bt?Bt:Ht,"height":jt=null!=Lt?Lt:jt}}function dU(nt){for(var at=[],lt=1;lt<arguments.length;lt++)at[lt-1]=arguments[lt];var n=function(lt){return at.reduce((function(nt,at){return nt||(null==at?void 0:at[lt])}),nt[lt])};return Object.assign(nt,{"change":n("change"),"reCompile":n("reCompile"),"reMake":n("reMake"),"reRender":n("reRender"),"reSize":n("reSize"),"reTransformSpec":n("reTransformSpec"),"changeTheme":n("changeTheme"),"changeBackground":n("changeBackground")}),nt}function pU(nt,at){return"line"===nt||"area"===nt||"common"===nt&&at.series.every((function(nt){return"area"===nt.type||"line"===nt.type}))?{"paddingInner":1,"paddingOuter":0}:{"paddingOuter":0}}!function(nt){nt.STATE_NORMAL="normal",nt.STATE_HOVER="hover",nt.STATE_HOVER_REVERSE="hover_reverse",nt.STATE_DIMENSION_HOVER="dimension_hover",nt.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",nt.STATE_SELECTED="selected",nt.STATE_SELECTED_REVERSE="selected_reverse",nt.STATE_SANKEY_EMPHASIS="selected",nt.STATE_SANKEY_EMPHASIS_REVERSE="blur"}(mU||(mU={})),function(nt){nt.STATE_HOVER_REVERSE="hover_reverse",nt.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",nt.STATE_SELECTED_REVERSE="selected_reverse"}(bU||(bU={}));var kU,SU=function(){function t(){this._children=[],this._markNameMap={},this._infoMap=new Map}return t.prototype.getMarkNameMap=function(){return this._markNameMap},t.prototype.addMark=function(nt,at){j(nt)||(this._children.push(nt),this._markNameMap[nt.name]=nt,this._infoMap.set(nt,ft({},t.defaultMarkInfo,at)))},t.prototype.removeMark=function(nt){var at=this._children.findIndex((function(at){return at.name===nt}));at>=0&&(this._infoMap.delete(this._children[at]),delete this._markNameMap[nt],this._children.splice(at,1))},t.prototype.clear=function(){this._children=[],this._markNameMap={},this._infoMap.clear()},t.prototype.forEach=function(nt){this._children.forEach(nt)},t.prototype.includes=function(nt,at){return this._children.includes(nt,at)},t.prototype.get=function(nt){return isNaN(Number(nt))?this._markNameMap[nt]:this._children[nt]},t.prototype.getMarks=function(){return this._children.slice()},t.prototype.getMarksInType=function(nt){var at=xt(nt);return this._children.filter((function(nt){return at.includes(nt.type)}))},t.prototype.getMarkInId=function(nt){return this._children.find((function(at){return at.id===nt}))},t.prototype.getMarkWithInfo=function(nt){var at=this;return this._children.find((function(lt){return Object.keys(nt).every((function(Rt){return nt[Rt]===at._infoMap.get(lt)[Rt]}))}))},t.defaultMarkInfo={},t}(),AU=function(){function e(nt){var at=this;this._marks=new SU,this._markReverse=new SU,this.onHover=function(nt){switch(nt.action){case"enter":at.interaction.getEventElement(mU.STATE_DIMENSION_HOVER).forEach((function(nt){return at.interaction.addEventElement(mU.STATE_DIMENSION_HOVER_REVERSE,nt)})),at.interaction.clearEventElement(mU.STATE_DIMENSION_HOVER,!1),at.getEventElement(nt).forEach((function(nt){return at.interaction.addEventElement(mU.STATE_DIMENSION_HOVER,nt)})),at.interaction.reverseEventElement(mU.STATE_DIMENSION_HOVER);break;case"leave":at.interaction.clearEventElement(mU.STATE_DIMENSION_HOVER,!0),nt=null}},this._option=nt,this.event=this._option.model.getOption().getChart().getEvent(),this.interaction=nt.interaction,this.initConfig(nt.mode)}return Object.defineProperty(e.prototype,"hover",{"get":function(){return this._hover},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"select",{"get":function(){return this._select},"enumerable":!1,"configurable":!0}),e.prototype.setStateKeys=function(nt){},e.prototype.registerMark=function(nt){ot(nt.stateStyle[mU.STATE_DIMENSION_HOVER])||this._marks.addMark(nt),ot(nt.stateStyle[mU.STATE_DIMENSION_HOVER_REVERSE])||this._markReverse.addMark(nt)},e.prototype.init=function(){this.initEvent()},e.prototype.release=function(){this.releaseEvent()},e.prototype.initEvent=function(){this.event.on(nt.DimensionEventEnum.dimensionHover,this.onHover)},e.prototype.releaseEvent=function(){this.event.release()},e.prototype.initConfig=function(nt){},e.prototype.getEventElement=function(nt,at){var lt=this;void 0===at&&(at=!1);var Rt=[];return nt.dimensionInfo.forEach((function(nt){nt.data.forEach((function(nt){var Bt=(at?lt._markReverse:lt._marks).getMarks().filter((function(at){return at.model===nt.series&&at.getVisible()}));Bt.forEach((function(lt){var Bt=lt.getProduct();if(Bt&&Bt.elements){var Lt=Bt.elements.filter((function(lt){var Rt,Bt=lt.getDatum();return Rt=X(Bt)?Bt.every((function(at,lt){return at===nt.datum[lt]})):nt.datum.some((function(nt){return nt===Bt})),at?!Rt:Rt}));Rt.push.apply(Rt,P([],E(Lt),!1))}}))}))})),Rt},e}(),wU={};Object.values(mU).forEach((function(nt){wU[nt]=!0}));var CU=((kU={})[mU.STATE_HOVER]=mU.STATE_HOVER_REVERSE,kU[mU.STATE_SELECTED]=mU.STATE_SELECTED_REVERSE,kU[mU.STATE_DIMENSION_HOVER]=mU.STATE_DIMENSION_HOVER_REVERSE,kU);function _U(nt){return CU[nt]}var MU,TU,EU,PU=function(){function t(){this._stateMarks=new Map,this._stateElements=new Map,this._vgrammarInteractions=new Map,this._disableTriggerEvent=!1}return t.prototype.addVgrammarInteraction=function(nt,at){nt&&(this._vgrammarInteractions.get(nt)?this._vgrammarInteractions.get(nt).push(at):this._vgrammarInteractions.set(nt,[at]))},t.markStateEnable=function(nt,at){return!ot(nt.stateStyle[at])},t.prototype.setDisableActiveEffect=function(nt){this._disableTriggerEvent=nt},t.prototype.registerMark=function(nt,at){var lt;this._stateMarks.has(nt)||this._stateMarks.set(nt,[]),null===(lt=this._stateMarks.get(nt))||void 0===lt||lt.push(at)},t.prototype.getStateMark=function(nt){return this._stateMarks.get(nt)},t.prototype.filterEventMark=function(nt,at){var lt;return!(!nt.mark||!(null===(lt=this._stateMarks.get(at))||void 0===lt?void 0:lt.includes(nt.mark)))},t.prototype.getEventElement=function(nt){var at;return null!==(at=this._stateElements.get(nt))&&void 0!==at?at:[]},t.prototype.getEventElementData=function(nt){return this.getEventElement(nt).map((function(nt){return nt.getDatum()}))},t.prototype.exchangeEventElement=function(nt,at){var lt,Rt=this;if(!this._disableTriggerEvent){var Bt=_U(nt);null===(lt=this._stateElements.get(nt))||void 0===lt||lt.forEach((function(at){at.removeState(nt),Bt&&Rt.addEventElement(Bt,at)})),at.getStates().includes(nt)||(at.addState(nt),Bt&&at.removeState(Bt)),this._stateElements.set(nt,[at])}},t.prototype.removeEventElement=function(nt,at){var lt,Rt;if(!this._disableTriggerEvent){at.removeState(nt);var Bt=null!==(Rt=null===(lt=this._stateElements.get(nt))||void 0===lt?void 0:lt.filter((function(nt){return nt!==at})))&&void 0!==Rt?Rt:[];this._stateElements.set(nt,Bt);var Lt=_U(nt);Lt&&(0===Bt.length?this.clearEventElement(Lt,!1):this.addEventElement(Lt,at))}},t.prototype.addEventElement=function(nt,at){var lt;if(!this._disableTriggerEvent){at.getStates().includes(nt)||at.addState(nt);var Rt=null!==(lt=this._stateElements.get(nt))&&void 0!==lt?lt:[];Rt.push(at),this._stateElements.set(nt,Rt)}},t.prototype.clearEventElement=function(nt,at){var lt;if(!this._disableTriggerEvent&&(null===(lt=this._stateElements.get(nt))||void 0===lt||lt.forEach((function(at){at.removeState(nt)})),this._stateElements.set(nt,[]),at)){var Rt=_U(nt);Rt&&this.clearEventElement(Rt,!1)}},t.prototype.clearAllEventElement=function(){var nt,at;if(!this._disableTriggerEvent)try{for(var lt=C(this._stateElements),Rt=lt.next();!Rt.done;Rt=lt.next()){var Bt=E(Rt.value,2),Lt=Bt[0];Bt[1].forEach((function(nt){nt.clearStates()})),this._stateElements.set(Lt,[])}}catch(at){nt={"error":at}}finally{try{Rt&&!Rt.done&&(at=lt.return)&&at.call(lt)}finally{if(nt)throw nt.error}}},t.prototype.reverseEventElement=function(nt){var at=this;if(!this._disableTriggerEvent){var lt=_U(nt);if(lt){var Rt=this.getStateMark(lt);if(Rt){var Bt=this.getEventElement(nt);Bt.length&&(this.getEventElement(lt).length||(1===Bt.length?Rt.forEach((function(nt){nt.getProduct().elements.filter((function(nt){return nt!==Bt[0]})).forEach((function(nt){at.addEventElement(lt,nt)}))})):Rt.forEach((function(nt){nt.getProduct().elements.filter((function(nt){return!Bt.includes(nt)})).forEach((function(nt){at.addEventElement(lt,nt)}))}))))}}}},t.prototype.startInteraction=function(nt,at){var lt=this._vgrammarInteractions.get(nt);lt&&lt.forEach((function(nt){nt.start(at)}))},t.prototype.resetInteraction=function(nt,at){var lt=this._vgrammarInteractions.get(nt);lt&&lt.forEach((function(nt){nt.reset(at)}))},t.prototype.resetAllInteraction=function(){var nt,at;try{for(var lt=C(this._vgrammarInteractions),Rt=lt.next();!Rt.done;Rt=lt.next()){var Bt=E(Rt.value,2),Lt=(Bt[0],Bt[1]);Lt&&Lt.forEach((function(nt){nt.reset(null)}))}}catch(at){nt={"error":at}}finally{try{Rt&&!Rt.done&&(at=lt.return)&&at.call(lt)}finally{if(nt)throw nt.error}}},t}();!function(nt){nt[nt.SeriesGroup=0]="SeriesGroup",nt[nt.Axis_Grid=50]="Axis_Grid",nt[nt.CrossHair_Grid=100]="CrossHair_Grid",nt[nt.Region=450]="Region",nt[nt.Mark=300]="Mark",nt[nt.Node=400]="Node",nt[nt.Axis=100]="Axis",nt[nt.MarkLine=500]="MarkLine",nt[nt.MarkArea=100]="MarkArea",nt[nt.MarkPoint=500]="MarkPoint",nt[nt.DataZoom=500]="DataZoom",nt[nt.ScrollBar=500]="ScrollBar",nt[nt.Player=500]="Player",nt[nt.Legend=500]="Legend",nt[nt.CrossHair=500]="CrossHair",nt[nt.Indicator=500]="Indicator",nt[nt.Title=500]="Title",nt[nt.Label=500]="Label",nt[nt.Brush=500]="Brush",nt[nt.CustomMark=500]="CustomMark",nt[nt.Interaction=700]="Interaction"}(MU||(MU={})),function(nt){nt[nt.Indicator=10]="Indicator",nt[nt.Region=20]="Region",nt[nt.Axis=30]="Axis",nt[nt.DataZoom=40]="DataZoom",nt[nt.Player=40]="Player",nt[nt.ScrollBar=40]="ScrollBar",nt[nt.Legend=50]="Legend",nt[nt.Title=70]="Title",nt[nt.CustomMark=70]="CustomMark"}(TU||(TU={})),function(nt){nt[nt.Default=0]="Default",nt[nt.Theme=1]="Theme",nt[nt.Chart=2]="Chart",nt[nt.Base_Series=3]="Base_Series",nt[nt.Series=4]="Series",nt[nt.Mark=5]="Mark",nt[nt.User_Chart=6]="User_Chart",nt[nt.User_Series=7]="User_Series",nt[nt.User_Mark=8]="User_Mark",nt[nt.User_SeriesStyle=9]="User_SeriesStyle",nt[nt.Built_In=99]="Built_In"}(EU||(EU={}));var RU=function(){function t(nt){this._option=nt,this.getCompiler=this._option.getCompiler}return t.prototype.getOption=function(){return this._option},t.prototype.getVGrammarView=function(){var nt;return null===(nt=this.getCompiler())||void 0===nt?void 0:nt.getVGrammarView()},t.prototype.release=function(){this._option=null,this.getCompiler=null},t}(),IU=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.id=Nk(),at._compiledProductId=null,at._depend=[],at}return S(e,nt),e.prototype.getProduct=function(){if(N(this._product))return this._product;var nt=this.getVGrammarView(),at=this.getProductId();return N(at)&&N(nt)&&(this._product=this._lookupGrammar(at)),this._product},e.prototype.getProductId=function(){var nt;return null!==(nt=this._compiledProductId)&&void 0!==nt?nt:this.generateProductId()},e.prototype.getDepend=function(){return this._depend},e.prototype.setDepend=function(){for(var nt=[],at=0;at<arguments.length;at++)nt[at]=arguments[at];this._depend=nt},e.prototype.compile=function(nt){this._compileProduct(nt),this._afterCompile(nt)},e.prototype._afterCompile=function(nt){var at;N(this._product)&&(null===(at=this.getCompiler())||void 0===at||at.addGrammarItem(this))},e.prototype.updateDepend=function(){if(N(this._product)){var nt=this.getDepend().map((function(nt){return nt.getProduct()})).filter(N);return this._product.depend(nt),nt.length===this.getDepend().length}return!1},e.prototype.release=function(){this.removeProduct(),nt.prototype.release.call(this),this._depend=[]},e.prototype.removeProduct=function(nt){this.getCompiler().removeGrammarItem(this,nt),this._product=null,this._compiledProductId=null},e}(RU),BU=function(nt){function e(at,lt,Rt,Bt){var Lt=nt.call(this,at)||this;return Lt.grammarType=yU.signal,Lt.name=lt,Lt._value=Rt,Lt._updateFunc=Bt,Lt}return S(e,nt),e.prototype.getValue=function(){return this._value},e.prototype.getUpdateFunc=function(){return this._updateFunc},e.prototype.updateSignal=function(nt,at){this._value=nt,this._updateFunc=at,this.compile()},e.prototype._compileProduct=function(){var nt=this.getVGrammarView();if(nt){if(!this.getProduct()){var at=this.getProductId();this._product=nt.signal().id(at),this._compiledProductId=at}N(this._value)&&this._product.value(this._value),N(this._updateFunc)&&this._product.update(this._updateFunc)}},e.prototype.generateProductId=function(){return this.name},e.prototype._lookupGrammar=function(nt){var at;return null===(at=this.getCompiler().getVGrammarView())||void 0===at?void 0:at.getSignalById(nt)},e}(IU),DU=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._signalMap={},at}return S(e,nt),e.prototype.getSignalMap=function(){return this._signalMap},e.prototype.getSignal=function(nt){return this._signalMap[nt]},e.prototype.updateSignal=function(nt,at,lt){this._signalMap[nt]?this._signalMap[nt].updateSignal(at,lt):(this._signalMap[nt]=new BU(this._option,nt,at,lt),this._signalMap[nt].compile())},e.prototype.compile=function(){Object.values(this._signalMap).forEach((function(nt){nt.compile()}))},e.prototype.release=function(){nt.prototype.release.call(this),Object.values(this._signalMap).forEach((function(nt){nt.release()})),this._signalMap={}},e}(RU),LU=function(nt){function e(at){var lt=nt.call(this,at)||this;return at.stateKeyToSignalName?lt.stateKeyToSignalName=at.stateKeyToSignalName:lt.stateKeyToSignalName=function(){return"state_signal"},lt.initStateMap(),lt}return S(e,nt),e.prototype.getStateMap=function(){return this._stateMap},e.prototype._getDefaultStateMap=function(){return{}},e.prototype.initStateMap=function(nt){this._stateMap=null!=nt?nt:this._getDefaultStateMap()},e.prototype.compile=function(nt){var at=this,lt=null!=nt?nt:this._stateMap;Object.keys(lt).forEach((function(nt){var Rt=at.stateKeyToSignalName(nt),Bt=lt[nt];at.updateSignal(Rt,Bt)}))},e.prototype.updateState=function(nt,at){if(nt&&(ft(this._stateMap,nt),this.compile(nt),!at))return this.getCompiler().renderNextTick()},e}(DU),WU=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.id=Nk(),at.stateKeyToSignalName=function(nt){return"".concat(OF,"_animate_").concat(at.id,"_").concat(nt)},at}return S(e,nt),e.prototype.getAnimationStateSignalName=function(){return this.stateKeyToSignalName("animationState")},e.prototype.updateAnimateState=function(nt,at){nt===gU.update?this.updateState({"animationState":{"callback":function(nt,at){return at.diffState}}},at):nt===gU.appear?this.updateState({"animationState":{"callback":function(nt,at){return"exit"===at.diffState?gU.none:gU.appear}}},at):this.updateState({"animationState":{"callback":function(at,lt){return nt}}},at)},e.prototype._getDefaultStateMap=function(){return{"animationState":{"callback":function(nt,at){return"exit"===at.diffState?gU.exit:"update"===at.diffState?gU.update:gU.appear}}}},e}(LU),GU=function(){function t(nt){this._option=nt,this.type=nt.type}return t.prototype._initTheme=function(nt,at){return this._theme=this.getTheme(nt,at),this._mergeThemeToSpec(nt,at)},t.prototype.getTheme=function(nt,at){},t.prototype.transformSpec=function(nt,at,lt){this._transformSpecBeforeMergingTheme(nt,at,lt);var Rt=this._initTheme(nt,at);return this._transformSpecAfterMergingTheme(Rt.spec,at,lt),Rt},t.prototype._transformSpecBeforeMergingTheme=function(nt,at,lt){},t.prototype._transformSpecAfterMergingTheme=function(nt,at,lt){},t.prototype._mergeThemeToSpec=function(nt,at){var lt=this._theme;if(this._shouldMergeThemeToSpec()){var Rt=this._getDefaultSpecFromChart(at),r=function(nt){return gz({},lt,Rt,nt)};return X(nt)?{"spec":nt.map((function(nt){return r(nt)})),"theme":lt}:{"spec":r(nt),"theme":lt}}return{"spec":nt,"theme":lt}},t.prototype._shouldMergeThemeToSpec=function(){return!0},t.prototype._getDefaultSpecFromChart=function(nt){},t}(),UU=function(nt){function e(at,lt){var Rt,Bt=this;return(Bt=nt.call(this,lt)||this).transformerConstructor=GU,Bt.type="null",Bt.modelType="null",Bt.userId=void 0,Bt._data=null,Bt._layout=null,Bt.specKey="",Bt._marks=new SU,Bt._lastLayoutRect=null,Bt.id=Nk(),Bt.userId=at.id,Bt._spec=at,Bt.effect={},Bt.event=new QG(lt.eventDispatcher,lt.mode),null===(Rt=lt.map)||void 0===Rt||Rt.set(Bt.id,Bt),Bt}return S(e,nt),e.prototype.getSpec=function(){return this._spec||{}},e.prototype.getSpecPath=function(){var nt;return null===(nt=this._option)||void 0===nt?void 0:nt.specPath},e.prototype.getSpecInfoPath=function(){var nt,at,lt;return null!==(at=null===(nt=this._option)||void 0===nt?void 0:nt.specInfoPath)&&void 0!==at?at:null===(lt=this._option)||void 0===lt?void 0:lt.specPath},e.prototype.getData=function(){return this._data},Object.defineProperty(e.prototype,"layout",{"get":function(){return this._layout},"enumerable":!1,"configurable":!0}),e.prototype.getOption=function(){return this._option},e.prototype.getMarks=function(){var nt,at;return null!==(at=null===(nt=this._marks)||void 0===nt?void 0:nt.getMarks())&&void 0!==at?at:[]},e.prototype.getMarkNameMap=function(){var nt;return null===(nt=this._marks)||void 0===nt?void 0:nt.getMarkNameMap()},e.prototype.getMarkSet=function(){return this._marks},e.prototype.getChart=function(){return this._option.getChart()},Object.defineProperty(e.prototype,"_theme",{"get":function(){var nt;return null===(nt=this.getSpecInfo())||void 0===nt?void 0:nt.theme},"enumerable":!1,"configurable":!0}),e.prototype._releaseEvent=function(){this.event.release()},e.prototype.created=function(){this.setAttrFromSpec()},e.prototype.init=function(nt){},e.prototype.afterInit=function(){},e.prototype.getVisible=function(){var nt;return!1!==(null===(nt=this._spec)||void 0===nt?void 0:nt.visible)},e.prototype.onLayoutStart=function(nt,at,lt){var Rt;null===(Rt=this._layout)||void 0===Rt||Rt.onLayoutStart(nt,at,lt)},e.prototype.onLayoutEnd=function(nt){var at;null===(at=this._layout)||void 0===at||at.onLayoutEnd(nt),this.getMarks().forEach((function(nt){return nt.updateLayoutState(!0,!0)}))},e.prototype.onEvaluateEnd=function(nt){},e.prototype.onDataUpdate=function(){},e.prototype.beforeRelease=function(){},e.prototype.release=function(){var at;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach((function(nt){return nt.release()})),null===(at=this._data)||void 0===at||at.release(),this._data=null,this._marks.clear(),nt.prototype.release.call(this)},e.prototype.updateSpec=function(nt){var at=this._compareSpec(nt,this._spec);return this._spec=nt,at},e.prototype._compareSpec=function(nt,at){return{"change":!1,"reMake":!1,"reRender":!1,"reSize":!1,"reCompile":!1}},e.prototype.reInit=function(nt){nt&&(this._spec=nt),this.setAttrFromSpec()},e.prototype.updateLayoutAttribute=function(){},e.prototype.setAttrFromSpec=function(){var nt;null===(nt=this._layout)||void 0===nt||nt.setAttrFromSpec(this._spec,this._option.getChartViewRect())},e.prototype._convertMarkStyle=function(nt){return A({},nt)},e.prototype.setMarkStyle=function(nt,at,lt,Rt){N(nt)&&N(at)&&nt.setStyle(this._convertMarkStyle(at),lt,Rt)},e.prototype.initMarkStyleWithSpec=function(nt,at,lt){var Rt=this;if(N(nt)&&N(at)){var Bt=at.style,Lt=at.state,Ht=A({},at);Bt&&(Ht.style=this._convertMarkStyle(Bt)),Lt&&(Ht.state={},Object.keys(Lt).forEach((function(nt){Ht.state[nt]=Rt._convertMarkStyle(Lt[nt])}))),nt.initStyleWithSpec(Ht,lt)}},e.prototype.stateKeyToSignalName=function(nt,at){var lt="".concat(OF,"_").concat(this.modelType,"_").concat(this.type,"_").concat(this.id,"_").concat(nt);return at&&(lt+="_".concat(at)),lt},e.prototype.compileData=function(){var nt;null===(nt=this._data)||void 0===nt||nt.compile()},e.prototype.compileMarks=function(nt){this.getMarks().forEach((function(at){at.compile({"group":nt})}))},e.prototype._createMark=function(nt,at,lt){void 0===at&&(at={});var Rt=nt.type,Bt=nt.name,Lt=Tz.createMark(Rt,Bt,A({"model":this,"map":this._option.map,"getCompiler":this.getCompiler,"globalScale":this._option.globalScale},at));return Lt&&(Lt.created(),lt&&Lt.setMarkConfig(lt)),Lt},e.prototype._getDataIdKey=function(){},e.prototype.getColorScheme=function(){var nt,at;return null===(at=(nt=this._option).getTheme)||void 0===at?void 0:at.call(nt).colorScheme},e.prototype.getSpecInfo=function(){var nt,at,lt;return function(nt,at,lt){if(!j(at))return st(nt,at,lt)}(null!==(lt=null===(at=(nt=this._option).getSpecInfo)||void 0===at?void 0:at.call(nt))&&void 0!==lt?lt:{},this.getSpecInfoPath())},e.prototype.getSpecIndex=function(){var nt=this.getSpecPath();if(!(null==nt?void 0:nt.length))return 0;var at=Number(nt[nt.length-1]);return isNaN(at)?0:at},e}(RU),YU=function(){function t(nt,at){var lt,Rt=this;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={"x":0,"y":0},this._layoutRect={"width":0,"height":0},this._layoutRectLevelMap={"width":0,"height":0},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={"x1":0,"x2":0,"y1":0,"y2":0},this.getLayoutRect=function(){return Rt._layoutRect},this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=TU.Region,this._model=nt,this._option=at,this.layoutLevel=at.layoutLevel,this.layoutType=at.layoutType,at.layoutOrient&&(this.layoutOrient=at.layoutOrient),this._spec=null===(lt=null==nt?void 0:nt.getSpec)||void 0===lt?void 0:lt.call(nt)}return t.prototype.getSpec=function(){return this._spec||{}},t.prototype.getLayoutStartPoint=function(){return this._layoutStartPoint},Object.defineProperty(t.prototype,"layoutRectLevelMap",{"get":function(){return this._layoutRectLevelMap},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"minWidth",{"get":function(){return this._minWidth},"set":function(nt){this._minWidth=nt},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"maxWidth",{"get":function(){return this._maxWidth},"set":function(nt){this._maxWidth=nt},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"minHeight",{"get":function(){return this._minHeight},"set":function(nt){this._minHeight=nt},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"maxHeight",{"get":function(){return this._maxHeight},"set":function(nt){this._maxHeight=nt},"enumerable":!1,"configurable":!0}),t.prototype.getLastComputeOutBounds=function(){return this._lastComputeOutBounds},Object.defineProperty(t.prototype,"layoutOrient",{"get":function(){return this._layoutOrient},"set":function(nt){this._layoutOrient=nt},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"model",{"get":function(){return this._model},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"type",{"get":function(){return this._model.type},"enumerable":!1,"configurable":!0}),t.prototype._setLayoutAttributeFromSpec=function(nt,at){var lt,Rt,Bt,Lt;if(this._spec&&!1!==this._spec.visible){var Ht=fF(vF(nt.padding),at,at);this.layoutPaddingLeft=Ht.left,this.layoutPaddingRight=Ht.right,this.layoutPaddingTop=Ht.top,this.layoutPaddingBottom=Ht.bottom,this._minHeight=j(nt.minHeight)?null!==(lt=this._minHeight)&&void 0!==lt?lt:null:pF(nt.minHeight,at.height,at),this._maxHeight=j(nt.maxHeight)?null!==(Rt=this._maxHeight)&&void 0!==Rt?Rt:null:pF(nt.maxHeight,at.height,at),this._minWidth=j(nt.minWidth)?null!==(Bt=this._minWidth)&&void 0!==Bt?Bt:null:pF(nt.minWidth,at.width,at),this._maxWidth=j(nt.maxWidth)?null!==(Lt=this._maxWidth)&&void 0!==Lt?Lt:null:pF(nt.maxWidth,at.width,at),nt.width&&this.setLayoutRect({"width":pF(nt.width,at.width,at)},{"width":9}),nt.height&&this.setLayoutRect({"height":pF(nt.height,at.height,at)},{"height":9}),j(nt.offsetX)||(this.layoutOffsetX=pF(nt.offsetX,at.width,at)),j(nt.offsetY)||(this.layoutOffsetY=pF(nt.offsetY,at.height,at)),nt.alignSelf&&(this.alignSelf=nt.alignSelf)}},t.prototype.setAttrFromSpec=function(nt,at){var lt,Rt,Bt,Lt;this._spec=nt,this.layoutType=null!==(lt=nt.layoutType)&&void 0!==lt?lt:this.layoutType,this.layoutLevel=null!==(Rt=nt.layoutLevel)&&void 0!==Rt?Rt:this.layoutLevel,this.layoutOrient=null!==(Bt=nt.orient)&&void 0!==Bt?Bt:this.layoutOrient,this._setLayoutAttributeFromSpec(nt,at),this.layoutClip=null!==(Lt=nt.clip)&&void 0!==Lt?Lt:this.layoutClip},t.prototype.onLayoutStart=function(nt,at,lt){this._setLayoutAttributeFromSpec(this._spec,at)},t.prototype.onLayoutEnd=function(nt){},t.prototype._getAbsoluteSpecValue=function(nt){var at=this,lt={"top":null,"bottom":null,"left":null,"right":null};return["top","bottom","left","right"].forEach((function(Rt){j(at._spec[Rt])||(lt[Rt]=pF(at._spec[Rt],"top"===Rt||"bottom"===Rt?nt.height:nt.width,nt))})),lt},t.prototype.absoluteLayoutInRect=function(nt){var at=this._getAbsoluteSpecValue(nt),lt=at.top,Rt=at.bottom,Bt=at.left,Lt=at.right,Ht={"width":nt.width-this.layoutPaddingLeft-this.layoutPaddingRight,"height":nt.height-this.layoutPaddingTop-this.layoutPaddingBottom};j(Bt)||(Ht.width-=Bt),j(Lt)||(Ht.width-=Lt),j(lt)||(Ht.height-=lt),j(Rt)||(Ht.height-=Rt),this.setLayoutRect(Ht);var jt=this.computeBoundsInRect(this.getLayoutRect()),$t=jt.width,Kt=jt.height;this.setLayoutRect({"width":$t,"height":Kt});var te={"x":nt.x,"y":nt.y};!0===this._spec.center?(te.x=nt.x+.5*nt.width-.5*$t,te.y=nt.y+.5*nt.height-.5*Kt):(j(Bt)?j(Lt)||(te.x=nt.x+nt.width-this.layoutPaddingRight-Lt-$t):te.x=nt.x+Bt+this.layoutPaddingLeft,j(lt)?j(Rt)||(te.y=nt.y+nt.height-this.layoutPaddingBottom-Rt-Kt):te.y=nt.y+lt+this.layoutPaddingTop),this.setLayoutStartPosition(te)},t.prototype.setLayoutStartPosition=function(nt){var at,lt;this._option.transformLayoutPosition&&(nt=this._option.transformLayoutPosition(nt)),Q(nt.x)&&(this._layoutStartPoint.x=nt.x),Q(nt.y)&&(this._layoutStartPoint.y=nt.y),null===(lt=(at=this._model).afterSetLayoutStartPoint)||void 0===lt||lt.call(at,this._layoutStartPoint)},t.prototype.setLayoutRect=function(nt,at){var lt,Rt,Bt,Lt,Ht=nt.width,jt=nt.height;Q(Ht)&&(null!==(lt=null==at?void 0:at.width)&&void 0!==lt?lt:0)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=Ht,this._layoutRectLevelMap.width=null!==(Rt=null==at?void 0:at.width)&&void 0!==Rt?Rt:0),Q(jt)&&(null!==(Bt=null==at?void 0:at.height)&&void 0!==Bt?Bt:0)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=jt,this._layoutRectLevelMap.height=null!==(Lt=null==at?void 0:at.height)&&void 0!==Lt?Lt:0),this.setRectInSpec(this._layoutRect)},t.prototype.getLayout=function(){return{"x":this._layoutStartPoint.x,"y":this._layoutStartPoint.y,"width":this._layoutRect.width,"height":this._layoutRect.height}},t.prototype.mergeLayoutRect=function(nt){var at={"width":nt.width,"height":nt.height};return this._layoutRectLevelMap.width>0&&(at.width=this._layoutRect.width),this._layoutRectLevelMap.height>0&&(at.height=this._layoutRect.height),at},t.prototype.getOrientPosAttribute=function(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"x":"y"},t.prototype.getOrientSizeAttribute=function(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"width":"height"},t.prototype.changeBoundsBySetting=function(nt){return this._layoutRectLevelMap.width>0&&(nt.x2=nt.x1+this._layoutRect.width),this._layoutRectLevelMap.height>0&&(nt.y2=nt.y1+this._layoutRect.height),nt.x1-=this._layoutStartPoint.x,nt.x2-=this._layoutStartPoint.x,nt.y1-=this._layoutStartPoint.y,nt.y2-=this._layoutStartPoint.y,nt},t.prototype.setRectInSpec=function(nt){var at=A({},nt);return this._layoutRectLevelMap.width<9?(j(this._minWidth)||(at.width=Math.max(at.width,this._minWidth)),j(this._maxWidth)||(at.width=Math.min(at.width,this._maxWidth))):at.width=this._layoutRect.width,this._layoutRectLevelMap.height<9?(j(this._minHeight)||(at.height=Math.max(at.height,this._minHeight)),j(this._maxHeight)||(at.height=Math.min(at.height,this._maxHeight))):at.height=this._layoutRect.height,at},t.prototype.computeBoundsInRect=function(nt){if(this._lastComputeRect=nt,!("region-relative"!==this.layoutType&&"region-relative-overlap"!==this.layoutType||(9!==this._layoutRectLevelMap.width||"left"!==this.layoutOrient&&"right"!==this.layoutOrient)&&(9!==this._layoutRectLevelMap.height||"bottom"!==this.layoutOrient&&"top"!==this.layoutOrient)))return this._layoutRect;var at=A({},this._model.getBoundsInRect(this.setRectInSpec(nt),nt));this.changeBoundsBySetting(at),this.autoIndent&&at.x2-at.x1>0&&at.y2-at.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-at.x1),this._lastComputeOutBounds.x2=Math.ceil(at.x2-nt.width),this._lastComputeOutBounds.y1=Math.ceil(-at.y1),this._lastComputeOutBounds.y2=Math.ceil(at.y2-nt.height));var lt=this.setRectInSpec(function(nt,at){return nt?{"width":Math.ceil(Math.min(nt.x2-nt.x1,at.width)),"height":Math.ceil(Math.min(nt.y2-nt.y1,at.height))}:{"width":0,"height":0}}(at,nt));return this._option.transformLayoutRect&&(lt=this._option.transformLayoutRect(lt)),lt},t.prototype.getModelId=function(){return this._model.id},t.prototype.getModelVisible=function(){return this._model.getVisible()},t}(),$U=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutType="normal",at.layoutLevel=0,at.layoutZIndex=0,at._forceLayoutTag=!1,at._layout=null,at._orient=null,at._layoutRect={"width":0,"height":0},at._layoutStartPos={"x":0,"y":0},at._isLayout=!0,at.getGraphicBounds=function(){return at._layout?{"x1":at._layout.getLayoutStartPoint().x,"y1":at._layout.getLayoutStartPoint().y,"x2":at._layout.getLayoutStartPoint().x+at._layout.getLayoutRect().width,"y2":at._layout.getLayoutStartPoint().y+at._layout.getLayoutRect().height}:{"x1":0,"x2":0,"y1":0,"y2":0}},at._transformLayoutRect=null,at._transformLayoutPosition=null,at}return S(e,nt),Object.defineProperty(e.prototype,"layoutOrient",{"get":function(){return this._orient},"set":function(nt){this._orient=nt,this._layout&&(this._layout.layoutOrient=nt)},"enumerable":!1,"configurable":!0}),e.prototype.initLayout=function(){"none"!==this.layoutType&&(this._layout=new YU(this,{"layoutType":this.layoutType,"layoutLevel":this.layoutLevel,"layoutOrient":this._orient,"transformLayoutRect":this._transformLayoutRect,"transformLayoutPosition":this._transformLayoutPosition}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this._layout&&(this._layout.layoutOrient=this._orient))},e.prototype.onLayoutStart=function(at,lt,Rt){this._isLayout=!0,nt.prototype.onLayoutStart.call(this,at,lt,Rt)},e.prototype.onLayoutEnd=function(at){nt.prototype.onLayoutEnd.call(this,at),this.updateLayoutAttribute();var lt=this.getLayoutRect();!this._forceLayoutTag&&mt(this._lastLayoutRect,lt)||(this._lastLayoutRect=A({},lt)),this._forceLayoutTag=!1,this._isLayout=!1},e.prototype.afterSetLayoutStartPoint=function(nt){},e.prototype._forceLayout=function(){var nt;this._isLayout||(this._forceLayoutTag=!0,null===(nt=this._option.globalInstance.getChart())||void 0===nt||nt.setLayoutTag(!0))},e.prototype.getLayoutStartPoint=function(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos},e.prototype.setLayoutStartPosition=function(nt){return this._layout?this._layout.setLayoutStartPosition(nt):this._layoutStartPos=ft(this._layoutStartPos,nt)},e.prototype.getLayoutRect=function(){return this._layout?this._layout.getLayoutRect():this._layoutRect},e.prototype.setLayoutRect=function(nt,at){return this._layout?this._layout.setLayoutRect(nt):this._lastLayoutRect=ft(this._layoutRect,nt)},e.prototype.getLastComputeOutBounds=function(){var nt;return null===(nt=this._layout)||void 0===nt?void 0:nt.getLastComputeOutBounds()},e.prototype.setAttrFromSpec=function(){var at,lt,Rt,Bt,Lt;nt.prototype.setAttrFromSpec.call(this),this.layoutClip=null!==(at=this._spec.clip)&&void 0!==at?at:this.layoutClip,this.layoutZIndex=null!==(lt=this._spec.zIndex)&&void 0!==lt?lt:this.layoutZIndex,this.layoutType=null!==(Rt=this._spec.layoutType)&&void 0!==Rt?Rt:this.layoutType,this._orient=null!==(Bt=this._spec.orient)&&void 0!==Bt?Bt:this._orient,this.layoutLevel=null!==(Lt=this._spec.layoutLevel)&&void 0!==Lt?Lt:this.layoutLevel},e}(UU),qU=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._initTheme=function(nt,at){return{"spec":nt,"theme":this._theme}},e}(GU),KU=function(nt){function e(at,lt){var Rt,Bt=this;return(Bt=nt.call(this,at,lt)||this).transformerConstructor=qU,Bt.modelType="region",Bt.specKey="region",Bt.type=e.type,Bt._series=[],Bt.layoutType="region",Bt.layoutZIndex=MU.Region,Bt.interaction=new PU,Bt.seriesDataFilterOver=function(){Bt.event.emit(jW.regionSeriesDataFilterOver,{"model":Bt,"chart":Bt.getChart()}),Bt._series.forEach((function(nt){nt.getViewDataFilter()&&nt.reTransformViewData()}))},Bt.getBoundsInRect=function(){return{"x1":Bt._layout.getLayoutStartPoint().x,"y1":Bt._layout.getLayoutStartPoint().y,"x2":Bt._layout.getLayoutStartPoint().x+Bt._layout.getLayoutRect().width,"y2":Bt._layout.getLayoutStartPoint().y+Bt._layout.getLayoutRect().height}},Bt.userId=at.id,Bt.coordinate=null!==(Rt=at.coordinate)&&void 0!==Rt?Rt:"cartesian",Bt._option.animation&&(Bt.animate=new WU({"getCompiler":lt.getCompiler})),Bt.interaction.setDisableActiveEffect(Bt._option.disableTriggerEvent),Bt}return S(e,nt),e.prototype.getMaxWidth=function(){return this._layout.maxWidth},e.prototype.setMaxWidth=function(nt){this._layout.maxWidth=nt},e.prototype.getMaxHeight=function(){return this._layout.maxHeight},e.prototype.setMaxHeight=function(nt){this._layout.maxHeight=nt},e.prototype.getGroupMark=function(){return this._groupMark},e.prototype.getInteractionMark=function(){return this._interactionMark},e.prototype.getStackInverse=function(){return!0===this._spec.stackInverse},e.prototype.getStackSort=function(){return!0===this._spec.stackSort},e.prototype._getClipDefaultValue=function(){var nt,at,lt,Rt,Bt=this._option.getChart().getSpec(),Lt=null===(at=null===(nt=Bt.dataZoom)||void 0===nt?void 0:nt.some)||void 0===at?void 0:at.call(nt,(function(nt){var at;return"axis"===(null!==(at=nt.filterMode)&&void 0!==at?at:"filter")})),Ht=null===(Rt=null===(lt=Bt.scrollBar)||void 0===lt?void 0:lt.some)||void 0===Rt?void 0:Rt.call(lt,(function(nt){var at;return"axis"===(null!==(at=nt.filterMode)&&void 0!==at?at:"axis")}));return!(!Lt&&!Ht)||this._layout.layoutClip},e.prototype.created=function(){var at,lt,Rt=this;this.initLayout(),nt.prototype.created.call(this);var Bt=null!==(at=this._spec.clip)&&void 0!==at?at:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({"interactive":!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",(null!==(lt=this.userId)&&void 0!==lt?lt:this.type)+"_interaction",MU.Interaction),ot(this._spec.style)||(this._backgroundMark=this._createMark({"type":"rect","name":"regionBackground"}),Bt&&(this._foregroundMark=this._createMark({"type":"rect","name":"regionForeground"})),[this._backgroundMark,this._foregroundMark].forEach((function(nt){nt&&(nt.created(),Rt.setMarkStyle(nt,{"width":function(){return Rt.getLayoutRect().width},"height":function(){return Rt.getLayoutRect().height}},"normal",EU.Built_In),Rt._groupMark.addMark(nt))})),this._backgroundMark&&this._backgroundMark.setMarkConfig({"zIndex":MU.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({"zIndex":MU.Mark+1})),this.createTrigger()},e.prototype._createGroupMark=function(nt,at,lt){var Rt,Bt,Lt=this,Ht=this._createMark({"type":"group","name":nt});Ht.setUserId(at),Ht.setMarkConfig({"zIndex":lt});var jt=null!==(Rt=this._spec.clip)&&void 0!==Rt?Rt:this._getClipDefaultValue();return this.setMarkStyle(Ht,{"x":function(){return Lt.getLayoutStartPoint().x},"y":function(){return Lt.getLayoutStartPoint().y},"width":function(){return Lt.getLayoutRect().width},"height":function(){return Lt.getLayoutRect().height},"clip":jt},"normal",EU.Built_In),this.setMarkStyle(Ht,{"cornerRadius":null===(Bt=this._spec.style)||void 0===Bt?void 0:Bt.cornerRadius},"normal",EU.User_Mark),this._marks.addMark(Ht),Ht},e.prototype.init=function(at){nt.prototype.init.call(this,at),this.initMark(),this.initSeriesDataflow(),this.initInteraction(),this.initTrigger()},e.prototype.initMark=function(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()},e.prototype._initBackgroundMarkStyle=function(){var nt,at;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,A({"fillOpacity":(null===(nt=this._spec.style)||void 0===nt?void 0:nt.fill)?1:0},this._spec.style),"normal",EU.User_Mark),(null!==(at=this._spec.clip)&&void 0!==at?at:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{"strokeOpacity":0},"normal",EU.Built_In))},e.prototype._initForegroundMarkStyle=function(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,A(A({},this._spec.style),{"fillOpacity":0,"pickable":!1}),"normal",EU.User_Mark)},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return mt(null==lt?void 0:lt.style,null==at?void 0:at.style)||(Rt.reMake=!0),Rt},e.prototype.reInit=function(at){nt.prototype.reInit.call(this,at),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()},e.prototype.addSeries=function(nt){nt&&(this._series.includes(nt)||this._series.push(nt))},e.prototype.removeSeries=function(nt){if(nt){var at=this._series.findIndex((function(at){return at===nt}));at>=0&&this._series.splice(at,1)}},e.prototype.getSeries=function(nt){return void 0===nt&&(nt={}),this._series.filter((function(at){var lt,Rt;return(!nt.name||(null==at?void 0:at.name)===nt.name)&&(!nt.userId||xt(nt.userId).includes(at.userId))&&(!N(nt.specIndex)||xt(nt.specIndex).includes(at.getSpecIndex()))&&(!nt.id||at.id===nt.id)&&(!nt.type||at.type===nt.type)&&(!nt.coordinateType||at.coordinate===nt.coordinateType)&&(!nt.dataName||(null===(Rt=null===(lt=at.getRawData)||void 0===lt?void 0:lt.call(at))||void 0===Rt?void 0:Rt.name)===nt.dataName)}))},e.prototype.getSeriesInName=function(nt){return this.getSeries({"name":nt})[0]},e.prototype.getSeriesInUserId=function(nt){return this.getSeries({"userId":nt})[0]},e.prototype.getSeriesInId=function(nt){return this.getSeries({"id":nt})[0]},e.prototype.getSeriesInType=function(nt){return this.getSeries({"type":nt})},e.prototype.getSeriesInCoordinateType=function(nt){return this.getSeries({"coordinateType":nt})},e.prototype.getSeriesInDataName=function(nt){return this.getSeries({"dataName":nt})},e.prototype.onRender=function(nt){},e.prototype.initSeriesDataflow=function(){var nt=this._series.map((function(nt){var at;return null!==(at=nt.getViewDataFilter())&&void 0!==at?at:nt.getViewData()})).filter((function(nt){return!!nt}));this._option.dataSet.multipleDataViewAddListener(nt,"change",this.seriesDataFilterOver)},e.prototype.release=function(){nt.prototype.release.call(this),this._series=[]},e.prototype.createTrigger=function(){var nt=A(A({},this._option),{"model":this,"interaction":this.interaction});this._trigger=new AU(nt)},e.prototype.initTrigger=function(){var nt=this;this._series.forEach((function(at){at.getMarksWithoutRoot().forEach((function(at){nt._trigger.registerMark(at)}))})),this._trigger.init()},e.prototype.initInteraction=function(){var nt=this;this._option.disableTriggerEvent||this._series.forEach((function(at){at.getMarksWithoutRoot().forEach((function(at){for(var lt in bU)ot(at.stateStyle[bU[lt]])||nt.interaction.registerMark(bU[lt],at)}))}))},e.prototype.compileMarks=function(nt){var at=this;this.getMarks().forEach((function(lt){var Rt;lt.compile({"group":nt,"context":{"model":at}}),null===(Rt=lt.getProduct())||void 0===Rt||Rt.layout((function(nt,at,lt,Rt){}))}))},e.prototype.compile=function(){var nt;null===(nt=this.animate)||void 0===nt||nt.compile(),this.compileMarks()},e.prototype.onLayoutEnd=function(at){this._series.forEach((function(nt){return nt.onLayoutEnd(at)})),nt.prototype.onLayoutEnd.call(this,at)},e.type="region",e.transformerConstructor=qU,e.specKey="region",e}($U);function OU(nt){var at=[],lt=[],Rt=[];return nt.forEach((function(nt){j(nt.getSpec().position)||"start"===nt.getSpec().position?at.push(nt):"middle"===nt.getSpec().position?lt.push(nt):"end"===nt.getSpec().position&&Rt.push(nt)})),{"startItems":at,"endItems":Rt,"middleItems":lt}}function FU(nt,at,lt){at?nt.forEach((function(nt){var at=kt(nt),Rt=at.getLayoutStartPoint().y+at.getLayoutRect().height-nt[0].getLayoutStartPoint().y,Bt=(lt-Rt)/2;nt.forEach((function(nt){nt.setLayoutStartPosition({"x":nt.getLayoutStartPoint().x,"y":nt.getLayoutStartPoint().y+Bt})}))})):nt.forEach((function(nt){var at=kt(nt),Rt=at.getLayoutStartPoint().x+at.getLayoutRect().width-nt[0].getLayoutStartPoint().x,Bt=(lt-Rt)/2;nt.forEach((function(nt){nt.setLayoutStartPosition({"x":nt.getLayoutStartPoint().x+Bt,"y":nt.getLayoutStartPoint().y})}))}))}function zU(nt,at,lt,Rt){var Bt;nt.forEach((function(nt,Lt){nt.length>1&&(Bt=lt[Lt],nt.forEach((function(nt){if(nt.alignSelf&&"start"!==nt.alignSelf){var lt=nt.getLayoutStartPoint(),Lt="middle"===nt.alignSelf?.5:1,Ht=at?Bt-(nt.getLayoutRect().width+nt.layoutPaddingLeft+nt.layoutPaddingRight):Bt-(nt.getLayoutRect().height+nt.layoutPaddingTop+nt.layoutPaddingBottom);at?nt.setLayoutStartPosition({"x":lt.x+Rt*Ht*Lt,"y":lt.y}):nt.setLayoutStartPosition({"x":lt.x,"y":lt.y+Rt*Ht*Lt})}})))}))}function HU(nt,at,lt,Rt,Bt){if(nt.length){var Lt=0,Ht="right"===Bt,jt=Ht?-1:1,$t=Ht?at.rightCurrent:at.leftCurrent,Kt=at.topCurrent,te=[],ne=[],re=[];nt.forEach((function(nt){var Rt=at.getItemComputeLayoutRect(nt),Bt=nt.computeBoundsInRect(Rt);nt.setLayoutRect(Bt);var ae=Bt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,oe=Bt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,se=Ht?-Bt.width-nt.layoutPaddingRight:nt.layoutPaddingLeft;nt.setLayoutStartPosition({"x":$t+nt.layoutOffsetX+se,"y":Kt+nt.layoutOffsetY+nt.layoutPaddingTop}),(Kt+=ae)>lt&&ne.length?(re.push(Lt),$t+=jt*Lt,Lt=oe,Kt=at.topCurrent+ae,nt.setLayoutStartPosition({"x":$t+nt.layoutOffsetX+se,"y":at.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}),te.push(ne),ne=[nt]):(Lt=Math.max(Lt,oe),ne.push(nt))})),re.push(Lt),te.push(ne),zU(te,!0,re,jt),Rt&&FU(te,!0,lt),Ht?at.rightCurrent=$t+jt*Lt:at.leftCurrent=$t+jt*Lt}}function jU(nt,at,lt,Rt){if(nt.length){var Bt=0,Lt="right"===Rt,Ht=Lt?-1:1,jt=Lt?at.rightCurrent:at.leftCurrent,$t=at.bottomCurrent,Kt=[],te=[],ne=[];nt.forEach((function(nt){var lt=at.getItemComputeLayoutRect(nt),Rt=nt.computeBoundsInRect(lt);nt.setLayoutRect(Rt);var re=Rt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,ae=Rt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,oe=Lt?-Rt.width-nt.layoutPaddingRight:nt.layoutPaddingLeft;$t<re&&te.length?(ne.push(Bt),jt+=Ht*Bt,Bt=ae,$t=at.bottomCurrent,nt.setLayoutStartPosition({"x":jt+nt.layoutOffsetX+oe,"y":$t+nt.layoutOffsetY-Rt.height-nt.layoutPaddingBottom}),Kt.push(te),te=[nt]):(nt.setLayoutStartPosition({"x":jt+nt.layoutOffsetX+oe,"y":$t+nt.layoutOffsetY-Rt.height-nt.layoutPaddingBottom}),Bt=Math.max(Bt,ae),$t-=re,te.push(nt))})),ne.push(Bt),Kt.push(te),zU(Kt,!0,ne,Ht),Lt?at.rightCurrent=jt+Ht*Bt:at.leftCurrent=jt+Ht*Bt}}function NU(nt,at,lt,Rt,Bt){if(nt.length){var Lt="top"===Bt,Ht=Lt?1:-1,jt=0,$t=at.leftCurrent,Kt=Lt?at.topCurrent:at.bottomCurrent,te=[],ne=[],re=[];nt.forEach((function(nt){var Rt=at.getItemComputeLayoutRect(nt),Bt=nt.computeBoundsInRect(Rt);nt.setLayoutRect(Bt);var ae=Bt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,oe=Bt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,se=Lt?nt.layoutPaddingTop:-Bt.height-nt.layoutPaddingBottom;nt.setLayoutStartPosition({"x":$t+nt.layoutOffsetX+nt.layoutPaddingLeft,"y":Kt+nt.layoutOffsetY+se}),($t+=oe)>lt&&ne.length?(re.push(jt),$t=at.leftCurrent+oe,Kt+=Ht*jt,jt=ae,nt.setLayoutStartPosition({"x":at.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft,"y":Kt+nt.layoutOffsetY+se}),te.push(ne),ne=[nt]):(jt=Math.max(jt,ae),ne.push(nt))})),re.push(jt),te.push(ne),zU(te,!1,re,Ht),Rt&&FU(te,!1,lt),Lt?at.topCurrent=Kt+Ht*jt:at.bottomCurrent=Kt+Ht*jt}}function VU(nt,at,lt,Rt){if(nt.length){var Bt="top"===Rt,Lt=Bt?1:-1,Ht=0,jt=at.rightCurrent,$t=Bt?at.topCurrent:at.bottomCurrent,Kt=[],te=[],ne=[];nt.forEach((function(nt){var lt=at.getItemComputeLayoutRect(nt),Rt=nt.computeBoundsInRect(lt);nt.setLayoutRect(Rt);var ne=Rt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,re=Rt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,ae=Bt?nt.layoutPaddingTop:-Rt.height-nt.layoutPaddingBottom;jt<re&&te.length?(jt=at.rightCurrent,$t+=Lt*Ht,Ht=ne,nt.setLayoutStartPosition({"x":at.rightCurrent+nt.layoutOffsetX-Rt.width-nt.layoutPaddingRight,"y":$t+nt.layoutOffsetY+ae}),Kt.push(te),te=[nt]):(te.push(nt),nt.setLayoutStartPosition({"x":jt+nt.layoutOffsetX-Rt.width-nt.layoutPaddingRight,"y":$t+nt.layoutOffsetY+ae}),Ht=Math.max(Ht,ne),jt-=re)})),ne.push(Ht),Kt.push(te),zU(Kt,!1,ne,Lt),Bt?at.topCurrent=$t+Lt*Ht:at.bottomCurrent=$t+Lt*Ht}}var ZU=function(){function t(nt,at){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this._onError=null==at?void 0:at.onError}return t.prototype._layoutInit=function(nt,at,lt,Rt){this._chartLayoutRect=lt,this._chartViewBox=Rt,this.leftCurrent=lt.x,this.topCurrent=lt.y,this.rightCurrent=lt.x+lt.width,this.bottomCurrent=lt.height+lt.y,at.sort((function(nt,at){return at.layoutLevel-nt.layoutLevel}))},t.prototype._layoutNormalItems=function(nt){this.layoutNormalInlineItems(nt.filter((function(nt){return"normal-inline"===nt.layoutType}))),this.layoutNormalItems(nt.filter((function(nt){return"normal"===nt.layoutType})))},t.prototype._groupItems=function(nt){var at=nt.filter((function(nt){return"region"===nt.layoutType})),lt=nt.filter((function(nt){return"region-relative"===nt.layoutType})),Rt=nt.filter((function(nt){return"region-relative-overlap"===nt.layoutType})),Bt=lt.concat(Rt),Lt={"left":{"items":[],"rect":{"width":0,"height":0}},"right":{"items":[],"rect":{"width":0,"height":0}},"top":{"items":[],"rect":{"width":0,"height":0}},"bottom":{"items":[],"rect":{"width":0,"height":0}},"z":{"items":[],"rect":{"width":0,"height":0}}};return Rt.forEach((function(nt){Lt[nt.layoutOrient].items.push(nt)})),{"regionItems":at,"relativeItems":lt,"relativeOverlapItems":Rt,"allRelatives":Bt,"overlapItems":Lt}},t.prototype.layoutItems=function(nt,at,lt,Rt){this._layoutInit(nt,at,lt,Rt),this._layoutNormalItems(at);var Bt={"left":this.leftCurrent,"top":this.topCurrent,"right":this.rightCurrent,"bottom":this.bottomCurrent},Lt=this._groupItems(at),Ht=Lt.regionItems,jt=Lt.relativeItems,$t=Lt.relativeOverlapItems,Kt=Lt.allRelatives,te=Lt.overlapItems;this.layoutRegionItems(Ht,jt,$t,te),this._processAutoIndent(Ht,jt,$t,te,Kt,Bt),this.layoutAbsoluteItems(at.filter((function(nt){return"absolute"===nt.layoutType})))},t.prototype._processAutoIndent=function(nt,at,lt,Rt,Bt,Lt){if(void 0===Rt&&(Rt={"left":{"items":[],"rect":{"width":0,"height":0}},"right":{"items":[],"rect":{"width":0,"height":0}},"top":{"items":[],"rect":{"width":0,"height":0}},"bottom":{"items":[],"rect":{"width":0,"height":0}},"z":{"items":[],"rect":{"width":0,"height":0}}}),Bt.some((function(nt){return nt.autoIndent}))){var Ht=this._checkAutoIndent(Bt,Lt),jt=Ht.top,$t=Ht.bottom,Kt=Ht.left,te=Ht.right;(jt||$t||Kt||te)&&(this.topCurrent=Lt.top+jt,this.bottomCurrent=Lt.bottom-$t,this.leftCurrent=Lt.left+Kt,this.rightCurrent=Lt.right-te,this.layoutRegionItems(nt,at,lt,Rt))}},t.prototype.layoutNormalItems=function(nt){var at=this;nt.forEach((function(nt){var lt=at.getItemComputeLayoutRect(nt),Rt=nt.computeBoundsInRect(lt);nt.setLayoutRect(Rt),"left"===nt.layoutOrient?(nt.setLayoutStartPosition({"x":at.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft,"y":at.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}),at.leftCurrent+=Rt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight):"top"===nt.layoutOrient?(nt.setLayoutStartPosition({"x":at.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft,"y":at.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}),at.topCurrent+=Rt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom):"right"===nt.layoutOrient?(nt.setLayoutStartPosition({"x":at.rightCurrent+nt.layoutOffsetX-Rt.width-nt.layoutPaddingRight,"y":at.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}),at.rightCurrent-=Rt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight):"bottom"===nt.layoutOrient&&(nt.setLayoutStartPosition({"x":at.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingRight,"y":at.bottomCurrent+nt.layoutOffsetY-Rt.height-nt.layoutPaddingBottom}),at.bottomCurrent-=Rt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom)}))},t.prototype.layoutNormalInlineItems=function(nt){var at=nt.filter((function(nt){return"left"===nt.layoutOrient})),lt=nt.filter((function(nt){return"right"===nt.layoutOrient})),Rt=nt.filter((function(nt){return"top"===nt.layoutOrient})),Bt=nt.filter((function(nt){return"bottom"===nt.layoutOrient})),Lt=this._chartLayoutRect.width+this._chartLayoutRect.x,Ht=this._chartLayoutRect.height+this._chartLayoutRect.y;at.length&&function(nt,at,lt){var Rt=OU(nt),Bt=Rt.startItems,Lt=Rt.middleItems,Ht=Rt.endItems;Bt.length&&HU(Bt,at,lt,!1,"left"),Lt.length&&HU(Lt,at,lt,!0,"left"),Ht.length&&jU(Ht,at,0,"left")}(at,this,Ht),Rt.length&&function(nt,at,lt){var Rt=OU(nt),Bt=Rt.startItems,Lt=Rt.middleItems,Ht=Rt.endItems;Bt.length&&NU(Bt,at,lt,!1,"top"),Lt.length&&NU(Lt,at,lt,!0,"top"),Ht.length&&VU(Ht,at,0,"top")}(Rt,this,Lt),lt.length&&function(nt,at,lt){var Rt=OU(nt),Bt=Rt.startItems,Lt=Rt.middleItems,Ht=Rt.endItems;Bt.length&&HU(Bt,at,lt,!1,"right"),Lt.length&&HU(Lt,at,lt,!0,"right"),Ht.length&&jU(Ht,at,0,"right")}(lt,this,Ht),Bt.length&&function(nt,at,lt){var Rt=OU(nt),Bt=Rt.startItems,Lt=Rt.middleItems,Ht=Rt.endItems;Bt.length&&NU(Bt,at,lt,!1,"bottom"),Lt.length&&NU(Lt,at,lt,!0,"bottom"),Ht.length&&VU(Ht,at,0,"bottom")}(Bt,this,Lt)},t.prototype._layoutRelativeOverlap=function(nt,at){var lt=this;at.items.forEach((function(nt){var Rt=lt.getItemComputeLayoutRect(nt),Bt=nt.computeBoundsInRect(Rt);at.rect.width=Math.max(Bt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,at.rect.width),at.rect.height=Math.max(Bt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,at.rect.height)})),at.items.forEach((function(Rt){Rt.setLayoutRect(at.rect),"left"===nt?Rt.setLayoutStartPosition({"x":lt.leftCurrent+Rt.layoutOffsetX}):"right"===nt?Rt.setLayoutStartPosition({"x":lt.rightCurrent-at.rect.width+Rt.layoutOffsetX}):"top"===nt?Rt.setLayoutStartPosition({"x":lt.topCurrent+Rt.layoutOffsetY}):Rt.setLayoutStartPosition({"x":lt.bottomCurrent-at.rect.height+Rt.layoutOffsetY})})),"left"===nt?this.leftCurrent+=at.rect.width:"right"===nt?this.rightCurrent-=at.rect.width:"top"===nt?this.topCurrent+=at.rect.height:this.bottomCurrent-=at.rect.height},t.prototype._layoutRelativeItem=function(nt,at){var lt=nt.computeBoundsInRect(at);"left"===nt.layoutOrient||"right"===nt.layoutOrient?nt.setLayoutRect({"width":lt.width}):nt.setLayoutRect({"height":lt.height}),"left"===nt.layoutOrient?(nt.setLayoutStartPosition({"x":this.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft}),this.leftCurrent+=lt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight):"right"===nt.layoutOrient?(this.rightCurrent-=lt.width+nt.layoutPaddingLeft+nt.layoutPaddingRight,nt.setLayoutStartPosition({"x":this.rightCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft})):"top"===nt.layoutOrient?(nt.setLayoutStartPosition({"y":this.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}),this.topCurrent+=lt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom):"bottom"===nt.layoutOrient&&(this.bottomCurrent-=lt.height+nt.layoutPaddingTop+nt.layoutPaddingBottom,nt.setLayoutStartPosition({"y":this.bottomCurrent+nt.layoutOffsetY+nt.layoutPaddingTop}))},t.prototype._layoutRegionItem=function(nt,at,lt){var Rt=this,Bt=Math.max(Math.min.apply(Math,P([at],E(nt.map((function(nt){var at;return null!==(at=nt.maxWidth)&&void 0!==at?at:Number.MAX_VALUE}))),!1)),0),Lt=Math.max(Math.min.apply(Math,P([lt],E(nt.map((function(nt){var at;return null!==(at=nt.maxHeight)&&void 0!==at?at:Number.MAX_VALUE}))),!1)),0);return nt.forEach((function(nt){var at=Bt-nt.layoutPaddingLeft-nt.layoutPaddingRight,lt=Lt-nt.layoutPaddingTop-nt.layoutPaddingBottom;nt.setLayoutRect({"width":at,"height":lt}),nt.setLayoutStartPosition({"x":Rt.leftCurrent+nt.layoutOffsetX+nt.layoutPaddingLeft,"y":Rt.topCurrent+nt.layoutOffsetY+nt.layoutPaddingTop})})),{"regionHeight":Lt,"regionWidth":Bt}},t.prototype.layoutRegionItems=function(nt,at,lt,Rt){var Bt=this;void 0===Rt&&(Rt={"left":{"items":[],"rect":{"width":0,"height":0}},"right":{"items":[],"rect":{"width":0,"height":0}},"top":{"items":[],"rect":{"width":0,"height":0}},"bottom":{"items":[],"rect":{"width":0,"height":0}},"z":{"items":[],"rect":{"width":0,"height":0}}});var Lt=(this.rightCurrent,this.leftCurrent),Ht=(this.bottomCurrent,this.topCurrent);at.filter((function(nt){return"left"===nt.layoutOrient||"right"===nt.layoutOrient})).forEach((function(nt){Bt._layoutRelativeItem(nt,Bt.getItemComputeLayoutRect(nt))})),this._layoutRelativeOverlap("left",Rt.left),this._layoutRelativeOverlap("right",Rt.right),Lt=this.rightCurrent-this.leftCurrent,at.filter((function(nt){return"top"===nt.layoutOrient||"bottom"===nt.layoutOrient})).forEach((function(nt){Bt._layoutRelativeItem(nt,Bt.getItemComputeLayoutRect(nt))})),this._layoutRelativeOverlap("top",Rt.top),this._layoutRelativeOverlap("bottom",Rt.bottom),Ht=this.bottomCurrent-this.topCurrent;var jt=this._layoutRegionItem(nt,Lt,Ht),$t=jt.regionWidth,Kt=jt.regionHeight;at.concat(lt).forEach((function(at){if(["left","right"].includes(at.layoutOrient)){var lt=Bt.filterRegionsWithID(nt,at.layoutBindRegionID[0]);at.setLayoutRect({"height":lt.getLayoutRect().height}),at.setLayoutStartPosition({"y":lt.getLayoutStartPoint().y+at.layoutOffsetY+at.layoutPaddingTop}),"right"===at.layoutOrient&&at.setLayoutStartPosition({"x":at.getLayoutStartPoint().x+$t-Lt})}else["top","bottom"].includes(at.layoutOrient)&&(lt=Bt.filterRegionsWithID(nt,at.layoutBindRegionID[0]),at.setLayoutRect({"width":lt.getLayoutRect().width}),at.setLayoutStartPosition({"x":lt.getLayoutStartPoint().x+at.layoutOffsetX+at.layoutPaddingLeft}),"bottom"===at.layoutOrient&&at.setLayoutStartPosition({"y":at.getLayoutStartPoint().y+Kt-Ht}))}))},t.prototype.layoutAbsoluteItems=function(nt){var at=this;nt.forEach((function(nt){nt.absoluteLayoutInRect(at._chartLayoutRect)}))},t.prototype.filterRegionsWithID=function(nt,at){var lt,Rt=nt.find((function(nt){return nt.getModelId()===at}));return Rt||(null!==(lt=this._onError)&&void 0!==lt?lt:Ik)("can not find target region item, invalid id"),Rt},t.prototype.getItemComputeLayoutRect=function(nt){return{"width":this.rightCurrent-this.leftCurrent-nt.layoutPaddingLeft-nt.layoutPaddingRight,"height":this.bottomCurrent-this.topCurrent-nt.layoutPaddingTop-nt.layoutPaddingBottom}},t.prototype._checkAutoIndent=function(nt,at){var lt=this,Rt={"top":0,"left":0,"bottom":0,"right":0};return nt.forEach((function(nt){if(nt.getModelVisible()&&nt.autoIndent){var Bt="left"===nt.layoutOrient||"right"===nt.layoutOrient,Lt=nt.getLastComputeOutBounds(),Ht=lt._getOutInLayout(Lt,nt,at);Bt?(Rt.top=Math.max(Rt.top,Ht.top),Rt.bottom=Math.max(Rt.bottom,Ht.bottom)):(Rt.left=Math.max(Rt.left,Ht.left),Rt.right=Math.max(Rt.right,Ht.right))}})),Rt},t.prototype._getOutInLayout=function(nt,at,lt){var Rt=at.getLayoutStartPoint(),Bt=Rt.x,Lt=Rt.y,Ht=at.getLayoutRect(),jt=Ht.width,$t=Ht.height;return{"left":lt.left-(Bt-nt.x1),"right":Bt+jt+nt.x2-lt.right,"top":lt.top-(Lt-nt.y1),"bottom":Lt+$t+nt.y2-lt.bottom}},t.type="base",t}(),QU=["linear","radial","conical"],JU={"linear":{"x0":0,"y0":0,"x1":1,"y1":1},"radial":{"x0":0,"y0":0,"x1":1,"y1":1,"r0":0,"r1":1},"conical":{"x":.5,"y":.5,"startAngle":0,"endAngle":2*Math.PI}},tY=["line","area","trail"];function XU(nt){return tY.includes(nt)}var iY,nY=function(nt){function e(at,lt){var Rt=nt.call(this,at)||this;return Rt._stateInfoList=[],Rt._mark=lt,Rt}return S(e,nt),e.prototype.getStateInfoList=function(){return this._stateInfoList},e.prototype._getDefaultStateMap=function(){return{"markUpdateRank":1}},e.prototype.getStateInfo=function(nt){return this._stateInfoList.find((function(at){return at.stateValue===nt}))},e.prototype.addStateInfo=function(nt){if(!this.getStateInfo(nt.stateValue)){nt.level=nt.level||0;for(var at=!0,lt=0;lt<this._stateInfoList.length;lt++){var Rt=this._stateInfoList[lt].level;if(Rt&&Rt>nt.level){this._stateInfoList.splice(lt,0,nt),at=!1;break}}at&&this._stateInfoList.push(nt)}},e.prototype._clearStateBeforeSet=function(nt){nt.datums=null,nt.items=null,nt.fields=null,nt.filter=null},e.prototype.changeStateInfo=function(nt){var at=this.getStateInfo(nt.stateValue);if(at){if(void 0!==nt.datums&&(this._clearStateBeforeSet(at),at.datums=nt.datums,at.datumKeys=nt.datumKeys),void 0!==nt.items&&(this._clearStateBeforeSet(at),at.items=nt.items),void 0!==nt.fields)if(this._clearStateBeforeSet(at),null===nt.fields)at.fields=nt.fields;else for(var lt in at.fields=at.fields||{},nt.fields){var Rt=nt.fields[lt];at.fields[lt]=at.fields[lt]||{};var Bt=at.fields[lt];N(Rt.domain)&&(Bt.domain=Rt.domain),N(Rt.type)&&(Bt.type=Rt.type)}nt.filter&&(this._clearStateBeforeSet(at),at.filter=nt.filter)}else this.addStateInfo(nt)},e.prototype.clearStateInfo=function(nt){var at=this;nt.forEach((function(nt){at.getStateInfo(nt)&&at.changeStateInfo({"stateValue":nt,"datumKeys":null,"datums":null,"fields":null,"items":null,"filter":null,"cache":{}})}))},e.prototype.checkOneState=function(nt,at,lt,Rt){var Bt;Rt=z(XU)?Rt:!nt.mark||XU(nt.mark.markType);var Lt=!1,Ht=!1;if(N(lt.datums)&&lt.datums.length>0)Lt=this.checkDatumState(lt,at,Rt),Ht=!0;else if(lt.items)Lt=null!==(Bt=this.checkItemsState(lt,nt))&&void 0!==Bt&&Bt,Ht=!0;else if(lt.fields)Lt=this.checkFieldsState(lt,at,nt,Rt),Ht=!0;else if(!Lt&&lt.filter){var jt={"mark":this._mark,"renderNode":nt,"type":nt.mark.markType};Lt=lt.filter(at,jt),Ht=!0}return Ht?Lt?"in":"out":"skip"},e.prototype.checkState=function(nt,at){for(var lt=nt.getStates().filter((function(nt){return function(nt){return!!wU[nt]}(nt)})).map((function(nt){return[nt,10]})),Rt=!nt.mark||XU(nt.mark.markType),Bt=0;Bt<this._stateInfoList.length;Bt++){var Lt=this._stateInfoList[Bt],Ht=this.checkOneState(nt,at,Lt,Rt);"skip"!==Ht&&"in"===Ht&&lt.push([Lt.stateValue,Lt.level])}return lt.map((function(nt){return nt[0]}))},e.prototype.checkDatumState=function(nt,at,lt){var Rt=!1,Bt=lt?at[0]:at;if(X(nt.datums)){var Lt=nt.datumKeys||Object.keys(nt.datums[0]).filter((function(nt){return!nt.startsWith(OF)}));Rt=nt.datums.some((function(nt){return lt&&X(null==nt?void 0:nt.items)?Lt.every((function(at){var lt,Rt;return(null===(Rt=null===(lt=null==nt?void 0:nt.items)||void 0===lt?void 0:lt[0])||void 0===Rt?void 0:Rt[at])===(null==Bt?void 0:Bt[at])})):Lt.every((function(at){return(null==nt?void 0:nt[at])===(null==Bt?void 0:Bt[at])}))}))}else if(V(nt.datums)){var Ht=nt.datumKeys||Object.keys(nt.datums).filter((function(nt){return!nt.startsWith(OF)}));Rt=Ht.every((function(at){var Rt,Lt;return lt?(null===(Rt=nt.datums.items)||void 0===Rt?void 0:Rt[0][at])===Bt[at]:(null===(Lt=nt.datums)||void 0===Lt?void 0:Lt[at])===Bt[at]}))}else Rt=at===nt.datums;return Rt},e.prototype.checkItemsState=function(nt,at){var lt;return null===(lt=nt.items)||void 0===lt?void 0:lt.includes(at)},e.prototype.checkFieldsState=function(nt,at,lt,Rt){var Bt,Lt=!0,o=function(jt){var $t=nt.fields[jt],Kt=$t.type,te=$t.domain,ne=Rt?null===(Bt=at[0])||void 0===Bt?void 0:Bt[jt]:at[jt];if(FB(Kt)&&te.length>1){if(Ht.checkLinearFieldState(te,jt,at,lt,Rt))return Lt=!1,"break";Lt=!0}else{if(!te.some((function(nt){return nt===ne})))return Lt=!1,"break";Lt=!0}},Ht=this;for(var jt in nt.fields)if("break"===o(jt))break;return Lt},e.prototype.checkLinearFieldState=function(nt,at,lt,Rt,Bt){var Lt,Ht=Bt?null===(Lt=lt[0])||void 0===Lt?void 0:Lt[at]:lt[at];return Ht<nt[0]||Ht>nt[nt.length-1]},e.prototype.updateLayoutState=function(nt){return this._stateMap.markUpdateRank++,this.updateState({"markUpdateRank":this._stateMap.markUpdateRank},nt)},e.prototype.compileState=function(nt,at){var lt=this;nt.state({"callback":function(nt,at){return lt.checkState(at,nt)}},at)},e}(LU),oY=function(nt){function e(at,lt){var Rt=nt.call(this,at)||this;return Rt.grammarType=yU.data,Rt._data=null,Rt._data=lt,Rt}return S(e,nt),e.prototype.getDataView=function(){return this._data},e.prototype.setDataView=function(nt){this._data=nt},e.prototype.getLatestData=function(){var nt;return null===(nt=this._data)||void 0===nt?void 0:nt.latestData},e.prototype.release=function(){nt.prototype.release.call(this),this._data=null},e.prototype.updateData=function(nt){var at=this.getProduct(),lt=this.getLatestData();if(at&&lt&&(at.values(lt),!nt))return this.getCompiler().renderNextTick()},e.prototype._compileProduct=function(){var nt=this.getLatestData();j(nt)||(j(this.getProduct())?this._initProduct(nt):this._product.values(nt))},e.prototype._initProduct=function(nt){var at,lt,Rt=this.getVGrammarView();if(Rt&&nt){var Bt=this.getProductId();this._product=null===(lt=null===(at=null==Rt?void 0:Rt.data)||void 0===at?void 0:at.call(Rt,nt))||void 0===lt?void 0:lt.id(Bt),this._compiledProductId=Bt}},e.prototype.generateProductId=function(){var nt;return"".concat(null===(nt=this.getDataView())||void 0===nt?void 0:nt.name)},e.prototype._lookupGrammar=function(nt){var at,lt;return null===(lt=null===(at=this.getCompiler().getVGrammarView())||void 0===at?void 0:at.getDataById)||void 0===lt?void 0:lt.call(at,nt)},e}(IU),sY=function(nt){function e(at){var lt=nt.call(this,at)||this;return lt._mark=at.mark,lt}return S(e,nt),e.prototype.setCompiledProductId=function(nt){this._compiledProductId=nt},e.prototype.generateProductId=function(){var at=nt.prototype.generateProductId.call(this);return N(at)?at:"".concat(OF,"_markData_").concat(this._mark.id)},e.prototype._compileProduct=function(){var nt,at=null===(nt=this._data)||void 0===nt?void 0:nt.latestData;j(at)||N(this.getProduct())||this._initProduct(at)},e}(oY),lY=function(nt){function e(at,lt,Rt){var Bt=nt.call(this,at)||this;return Bt.grammarType=yU.mark,Bt.type=void 0,Bt.name="mark",Bt._markConfig={"zIndex":MU.Mark,"morph":!1},Bt._visible=!0,Bt.stateStyle={},Bt._unCompileChannel={},Bt._skipBeforeLayouted=!1,Bt.name=lt,Bt.model=Rt,Bt.key=at.key,Bt.state=new nY(A(A({},at),{"stateKeyToSignalName":Bt.stateKeyToSignalName.bind(Bt)}),Bt),Bt._event=new QG(Rt.getOption().eventDispatcher,Rt.getOption().mode),Bt}return S(e,nt),e.prototype.getMarkConfig=function(){return this._markConfig},e.prototype.setMarkConfig=function(nt){var at=this;Object.keys(nt).forEach((function(lt){at._markConfig[lt]=nt[lt]}))},e.prototype.getVisible=function(){return this._visible},e.prototype.setVisible=function(nt){this._visible=nt},e.prototype.getUserId=function(){return this._userId},e.prototype.setUserId=function(nt){N(nt)&&(this._userId=nt)},e.prototype.getDataView=function(){var nt;return null===(nt=this._data)||void 0===nt?void 0:nt.getDataView()},e.prototype.setDataView=function(nt,at){j(this._data)&&this.initMarkData(A(A({},this._option),{"mark":this})),N(at)&&this._data.setCompiledProductId(at),this._data.setDataView(nt)},e.prototype.getData=function(){return this._data},e.prototype.setData=function(nt){this._data=nt},e.prototype.hasState=function(nt){return nt in this.state.getStateMap()},e.prototype.getState=function(nt){return this.state.getStateMap()[nt]},e.prototype.getAnimationConfig=function(){return this._animationConfig},e.prototype.setAnimationConfig=function(nt){this._animationConfig=nt},e.prototype.setSkipBeforeLayouted=function(nt){this._skipBeforeLayouted=nt},e.prototype.getSkipBeforeLayouted=function(){return this._skipBeforeLayouted},e.prototype.getGroupKey=function(){return this._groupKey},e.prototype.setGroupKey=function(nt){this._groupKey=nt},e.prototype.setStateSortCallback=function(nt){this._stateSort=nt},e.prototype.setTransform=function(nt){this._transform=nt},e.prototype.initMarkData=function(nt){this._data=new sY(nt)},e.prototype.stateKeyToSignalName=function(nt){return"".concat(OF,"_").concat(this.type,"_").concat(this.id,"_").concat(nt)},e.prototype.getAttribute=function(nt,at,lt,Rt){},e.prototype._compileProduct=function(nt){var at=this.getProduct();this.getVisible()?N(at)||this.getCompiler().isInited&&(this._initProduct(null==nt?void 0:nt.group),j(this._product)||(this.compileSignal(),this.compileData(),this.compileState(),this.compileEncode(),this.compileAnimation(),this.compileContext(null==nt?void 0:nt.context),this.compileTransform())):N(at)&&this.removeProduct()},e.prototype._initProduct=function(nt){var at=this.getVGrammarView(),lt=this.getProductId();this._product=at.mark(this.type,null!=nt?nt:at.rootMark).id(lt),this.name&&this._product&&this._product.name(this.name),this._compiledProductId=lt},e.prototype.generateProductId=function(){return this._userId?"".concat(this._userId):"".concat(this.name,"_").concat(this.id)},e.prototype.compileData=function(){if(!j(this._data)){this._data.compile();var nt=this._data.getProduct();N(this._product)&&N(nt)&&this._product.join(nt,this.key,void 0,this.getGroupKey())}},e.prototype.updateStaticEncode=function(){if(this._product){var nt=this._separateStyle(),at=nt.enterStyles,lt=nt.updateStyles;this._product.encodeState("group",at,!0),this._product.encode(lt,!0)}},e.prototype._separateStyle=function(){var nt=this,at=this.stateStyle,lt=mU.STATE_NORMAL,Rt=at[lt];w(at,["symbol"==typeof lt?lt:lt+""]);var Bt=this._option.noSeparateStyle?null:{},Lt={};return Object.keys(Rt).forEach((function(at){nt._unCompileChannel[at]||(nt._option.noSeparateStyle||function(nt,at,lt){var Rt,Bt=null===(Rt=at[nt])||void 0===Rt?void 0:Rt.style,Lt=function(nt,at){return("fill"===nt||"stroke"===nt)&&(null==at?void 0:at.gradient)&&(null==at?void 0:at.stops)}(nt,Bt);return!!Lt||!!H(Bt)||!(!(null==Bt?void 0:Bt.scale)||Bt.field===lt)}(at,Rt,nt.getGroupKey())?Lt[at]={"callback":nt.compileCommonAttributeCallback(at,"normal"),"dependency":[nt.stateKeyToSignalName("markUpdateRank")]}:Bt[at]=nt.compileCommonAttributeCallback(at,"normal"))})),{"enterStyles":Bt,"updateStyles":Lt}},e.prototype.compileEncode=function(){var nt=this,at=this.stateStyle,lt=mU.STATE_NORMAL;at[lt];var Rt=w(at,["symbol"==typeof lt?lt:lt+""]),Bt=this._separateStyle(),Lt=Bt.enterStyles,Ht=Bt.updateStyles;this._product.encode(Ht,!0),this._product.encodeState("group",Lt,!0),Object.keys(Rt).forEach((function(at){var lt={};Object.keys(Rt[at]).forEach((function(Rt){nt._unCompileChannel[Rt]||(lt[Rt]={"callback":nt.compileCommonAttributeCallback(Rt,at),"dependency":[nt.stateKeyToSignalName("markUpdateRank")]})})),nt._product.encodeState(at,lt,!0)})),this._skipBeforeLayouted&&this._product.layout({"skipBeforeLayouted":this._skipBeforeLayouted})},e.prototype.compileState=function(){this.state.compileState(this._product,this._stateSort)},e.prototype.compileAnimation=function(){var nt,at,lt,Rt,Bt=this;if(this._animationConfig){var Lt;if("component"===this.type)Lt=null===(nt=this.model.animate)||void 0===nt?void 0:nt.getAnimationStateSignalName();else{var Ht=null===(lt=(at=this.model).getRegion)||void 0===lt?void 0:lt.call(at);Lt=null===(Rt=null==Ht?void 0:Ht.animate)||void 0===Rt?void 0:Rt.getAnimationStateSignalName()}this._product.animation(this._animationConfig),this._product.animationState({"callback":function(nt,at,lt){var Rt;return null===(Rt=lt[Lt])||void 0===Rt?void 0:Rt.callback(nt,at)},"dependency":Lt}),this._animationConfig.normal&&(this._animationConfig.appear?this._event.on(GH.ANIMATION_END,(function(nt){var at=nt.event;at.mark===Bt.getProduct()&&at.animationState===gU.appear&&Bt.runAnimationByState(gU.normal)})):this._event.on(GH.AFTER_DO_RENDER,(function(){Bt.runAnimationByState(gU.normal)})))}},e.prototype.compileContext=function(nt){var at=A(A({},this._markConfig),{"context":A({"markId":this.id,"modelId":this.model.id,"markUserId":this._userId,"modelUserId":this.model.userId},nt)});this._product.configure(at)},e.prototype.compileSignal=function(){this.state.compile()},e.prototype._computeAttribute=function(nt,at){return function(nt,at){}},e.prototype.compileCommonAttributeCallback=function(nt,at){var lt=this._computeAttribute(nt,at),Rt={"mark":null,"parent":null,"element":null};return function(nt,at){return Rt.mark=at.mark,Rt.parent=at.mark.group,Rt.element=at,lt(nt,Rt)}},e.prototype.compileTransform=function(){var nt;(null===(nt=this._transform)||void 0===nt?void 0:nt.length)&&this.getProduct().transform(this._transform)},e.prototype._lookupGrammar=function(nt){var at;return null===(at=this.getCompiler().getVGrammarView())||void 0===at?void 0:at.getMarkById(nt)},e.prototype.updateState=function(nt,at){return this.state.updateState(nt,at)},e.prototype.updateLayoutState=function(nt,at){return at&&this.getMarks().length>0&&this.getMarks().forEach((function(nt){return nt.state.updateLayoutState(!0)})),this.state.updateLayoutState(nt)},e.prototype.updateMarkState=function(nt){var at=this;if(this._product){var lt=this.state.getStateInfo(nt);this._product.elements.forEach((function(Rt){"in"===at.state.checkOneState(Rt,Rt.getDatum(),lt)?Rt.addState(nt):Rt.removeState(nt)}))}},e.prototype.getMarks=function(){return[]},e.prototype.runAnimationByState=function(nt){var at,lt;return null===(lt=null===(at=this.getProduct())||void 0===at?void 0:at.animate)||void 0===lt?void 0:lt.runAnimationByState(nt)},e.prototype.stopAnimationByState=function(nt){var at,lt;return null===(lt=null===(at=this.getProduct())||void 0===at?void 0:at.animate)||void 0===lt?void 0:lt.stopAnimationByState(nt)},e.prototype.pauseAnimationByState=function(nt){var at,lt;return null===(lt=null===(at=this.getProduct())||void 0===at?void 0:at.animate)||void 0===lt?void 0:lt.pauseAnimationByState(nt)},e.prototype.resumeAnimationByState=function(nt){var at,lt;return null===(lt=null===(at=this.getProduct())||void 0===at?void 0:at.animate)||void 0===lt?void 0:lt.resumeAnimationByState(nt)},e.prototype.getProductElements=function(){var nt=this.getProduct();if(nt)return nt.elements},e.prototype.release=function(){nt.prototype.release.call(this),this.state.release()},e}(IU),dY=function(nt){function e(at,lt){var Rt,Bt=this;return(Bt=nt.call(this,lt,at,lt.model)||this)._extensionChannel={},Bt._computeExChannel={},Bt._attributeContext=lt.attributeContext,null===(Rt=lt.map)||void 0===Rt||Rt.set(Bt.id,Bt),Bt}return S(e,nt),e.prototype.created=function(){this._initStyle()},e.prototype.initStyleWithSpec=function(nt,at){nt&&(N(nt.id)&&(this._userId=nt.id),z(nt.interactive)&&(this._markConfig.interactive=nt.interactive),N(nt.zIndex)&&(this._markConfig.zIndex=nt.zIndex),z(nt.visible)&&this.setVisible(nt.visible),this._initSpecStyle(nt,this.stateStyle,at))},e.prototype._transformStyleValue=function(nt,at){if(nt.scale){var lt=nt.scale,Rt=lt.range();return lt.range(Rt.map(at)),nt}return"function"==typeof nt?function(){for(var lt=[],Rt=0;Rt<arguments.length;Rt++)lt[Rt]=arguments[Rt];return at(nt.apply(void 0,P([],E(lt),!1)))}:at(nt)},e.prototype.convertAngleToRadian=function(nt){return this._transformStyleValue(nt,Me)},e.prototype.isUserLevel=function(nt){return[EU.User_Mark,EU.User_Series,EU.User_Chart,EU.User_SeriesStyle].includes(nt)},e.prototype.setStyle=function(nt,at,lt,Rt){var Bt=this;if(void 0===at&&(at="normal"),void 0===lt&&(lt=0),void 0===Rt&&(Rt=this.stateStyle),!j(nt)){void 0===Rt[at]&&(Rt[at]={});var Lt=this.isUserLevel(lt);Object.keys(nt).forEach((function(Ht){var jt=nt[Ht];j(jt)||(jt=Bt._filterAttribute(Ht,jt,at,lt,Lt,Rt),Bt.setAttribute(Ht,jt,at,lt,Rt))}))}},e.prototype.getStyle=function(nt,at){var lt;return void 0===at&&(at="normal"),null===(lt=this.stateStyle[at][nt])||void 0===lt?void 0:lt.style},e.prototype._filterAttribute=function(nt,at,lt,Rt,Bt,Lt){var Ht=this;void 0===Lt&&(Lt=this.stateStyle);var jt=this._styleConvert(at);if(Bt)switch(nt){case"angle":jt=this.convertAngleToRadian(jt);break;case"innerPadding":case"outerPadding":jt=this._transformStyleValue(jt,(function(nt){return-nt}));break;case"curveType":jt=this._transformStyleValue(jt,(function(nt){return at=nt,lt=Ht._option.model.direction,"monotone"===at?"horizontal"===lt?"monotoneY":"monotoneX":at;var at,lt}))}return jt},e.prototype.setReferer=function(nt,at,lt,Rt){var Bt,Lt;if(void 0===Rt&&(Rt=this.stateStyle),nt)if(at&&lt){var Ht=null!==(Lt=Rt[lt])&&void 0!==Lt?Lt:((Bt={})[at]={},Bt);Rt[lt][at]=A(A({},Ht[at]),{"referer":nt})}else Object.entries(Rt).forEach((function(at){var lt=E(at,2),Bt=lt[0],Lt=lt[1];Object.entries(Lt).forEach((function(at){var lt=E(at,2),Lt=lt[0];lt[1],Rt[Bt][Lt].referer=nt}))}))},e.prototype.setPostProcess=function(nt,at,lt){var Rt;void 0===lt&&(lt="normal"),(null===(Rt=this.stateStyle[lt])||void 0===Rt?void 0:Rt[nt])&&(this.stateStyle[lt][nt].postProcess=at)},e.prototype.getAttribute=function(nt,at,lt,Rt){return void 0===lt&&(lt="normal"),this._computeAttribute(nt,lt)(at,Rt)},e.prototype.setAttribute=function(nt,at,lt,Rt,Bt){var Lt;void 0===lt&&(lt="normal"),void 0===Rt&&(Rt=0),void 0===Bt&&(Bt=this.stateStyle),void 0===Bt[lt]&&(Bt[lt]={}),void 0===Bt[lt][nt]&&(Bt[lt][nt]={"level":Rt,"style":at,"referer":void 0});var Ht=null===(Lt=Bt[lt][nt])||void 0===Lt?void 0:Lt.level;N(Ht)&&Ht<=Rt&&gz(Bt[lt][nt],{"style":at,"level":Rt}),"normal"!==lt&&nt in this._extensionChannel&&this._extensionChannel[nt].forEach((function(nt){void 0===Bt[lt][nt]&&(Bt[lt][nt]=Bt.normal[nt])}))},e.prototype._getDefaultStyle=function(){return{"visible":!0,"x":0,"y":0}},e.prototype._styleConvert=function(nt){if(!nt)return nt;if(zB(nt.type)||nt.scale){var at=function(nt,at){if("scale"in nt&&nt.scale)return Y(nt.scale)&&(null==at?void 0:at.globalScale)?at.globalScale.registerMarkAttributeScale(nt,at.seriesId):nt.scale;var lt=lF(nt.type);return lt&&function(nt,at){nt&&at&&(at.domain&&nt.domain(at.domain),at.range&&nt.range(at.range),at.specified&&nt.specified&&nt.specified(at.specified),at.clamp&&nt.clamp&&nt.clamp(at.clamp))}(lt,nt),lt}(nt,{"globalScale":this._option.globalScale,"seriesId":this._option.seriesId});if(at)return{"scale":at,"field":nt.field,"changeDomain":nt.changeDomain}}return nt},e.prototype._computeAttribute=function(nt,at){var lt,Rt=this,Bt=null===(lt=this.stateStyle[at])||void 0===lt?void 0:lt[nt];Bt||(Bt=this.stateStyle.normal[nt]);var Lt=this._computeStateAttribute(Bt,nt,at),Ht=H(null==Bt?void 0:Bt.postProcess),jt=nt in this._computeExChannel;if(Ht&&jt){var $t=this._computeExChannel[nt];return function(lt,Ht){var jt=Lt(lt,Ht);return jt=Bt.postProcess(jt,lt,Rt._attributeContext,Ht,Rt.getDataView()),$t(nt,lt,at,Ht,jt)}}if(Ht)return function(nt,at){return Bt.postProcess(Lt(nt,at),nt,Rt._attributeContext,at,Rt.getDataView())};if(jt){var Kt=this._computeExChannel[nt];return function(lt,Rt){return Kt(nt,lt,at,Rt,Lt(lt,Rt))}}return Lt},e.prototype._computeStateAttribute=function(nt,at,lt){var Rt,Bt=this;return nt?nt.referer?nt.referer._computeAttribute(at,lt):nt.style?"function"==typeof nt.style?function(at,lt){return nt.style(at,Bt._attributeContext,lt,Bt.getDataView())}:QU.includes(nt.style.gradient)?this._computeGradientAttr(nt.style):["outerBorder","innerBorder"].includes(at)?this._computeBorderAttr(nt.style):zB(null===(Rt=nt.style.scale)||void 0===Rt?void 0:Rt.type)?function(at,lt){var Rt=at;return"series"===Bt.model.modelType&&Bt.model.getMarkData&&(Rt=Bt.model.getMarkData(at)),nt.style.scale.scale(Rt[nt.style.field])}:function(at,lt){return nt.style}:function(at,lt){return nt.style}:function(nt,at){}},e.prototype._initStyle=function(){var nt=this._getDefaultStyle();this.setStyle(nt,"normal",0)},e.prototype._initSpecStyle=function(nt,at,lt){var Rt=this;nt.style&&this.setStyle(nt.style,"normal",EU.User_Mark,at);var Bt=nt.state;Bt&&Object.keys(Bt).forEach((function(nt){var lt=Bt[nt];if("style"in lt){var Lt=lt.style,Ht={"stateValue":nt};"level"in lt&&(Ht.level=lt.level),"filter"in lt&&(Ht=H(lt.filter)?A({"filter":lt.filter},Ht):A(A({},lt.filter),Ht)),Rt.state.addStateInfo(Ht),Rt.setStyle(Lt,nt,EU.User_Mark,at)}else Rt.setStyle(lt,nt,EU.User_Mark,at)}))},e.prototype._computeGradientAttr=function(nt){var at,lt,Rt=this,Bt=nt.gradient,Lt=nt.scale,Ht=nt.field,jt=w(nt,["gradient","scale","field"]),$t=Lt,Kt=Ht;if(!(Lt&&Ht||"series"!==this.model.modelType)){var te=this.model.getColorAttribute(),ne=te.scale,re=te.field;Lt||($t=ne),Kt||(Kt=re)}var ae=$O(QO(this.model.getColorScheme(),"series"===this.model.modelType?null===(lt=(at=this.model).getSpec)||void 0===lt?void 0:lt.call(at):void 0),this.model.getDefaultColorDomain()),oe=A(A({},JU[Bt]),jt);return function(nt,at){var lt={},Lt=Rt.getDataView();return Object.keys(oe).forEach((function(Bt){var Ht=oe[Bt];"stops"===Bt?lt.stops=Ht.map((function(lt){var Bt=lt.opacity,Ht=lt.color,jt=lt.offset,te=null!=Ht?Ht:null==$t?void 0:$t.scale(nt[Kt]);return H(Ht)&&(te=Ht(nt,Rt._attributeContext,at,Lt)),N(Bt)&&(te=Wi.SetOpacity(te,Bt)),{"offset":H(jt)?jt(nt,Rt._attributeContext,at,Lt):jt,"color":te||ae[0]}})):H(Ht)?lt[Bt]=Ht(nt,Rt._attributeContext,at,Lt):lt[Bt]=Ht})),lt.gradient=Bt,lt}},e.prototype._computeBorderAttr=function(nt){var at=this,lt=nt.scale,Rt=nt.field,Bt=w(nt,["scale","field"]);return function(nt,Lt){var Ht,jt,$t,Kt={};if(Object.keys(Bt).forEach((function(lt){var Rt=Bt[lt];H(Rt)?Kt[lt]=Rt(nt,at._attributeContext,Lt,at.getDataView()):Kt[lt]=Rt})),"stroke"in Kt)QU.includes(null===($t=Bt.stroke)||void 0===$t?void 0:$t.gradient)&&(Kt.stroke=at._computeGradientAttr(Bt.stroke)(nt,Lt));else{var te=$O(QO(at.model.getColorScheme(),"series"===at.model.modelType?null===(jt=(Ht=at.model).getSpec)||void 0===jt?void 0:jt.call(Ht):void 0),at.model.getDefaultColorDomain()),ne=lt,re=Rt;if(!(lt&&Rt||"series"!==at.model.modelType)){var ae=at.model.getColorAttribute(),oe=ae.scale,se=ae.field;lt||(ne=oe),re||(re=se),Kt.stroke=(null==ne?void 0:ne.scale(nt[re]))||te[0]}}return Kt}},e}(lY),kY=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at._marks=[],at}return S(e,nt),e.prototype.getMarks=function(){return this._marks},e.prototype._getDefaultStyle=function(){return A({},nt.prototype._getDefaultStyle.call(this))},e.prototype.isMarkExist=function(nt){return void 0!==this._marks.find((function(at){return at.id===nt.id}))},e.prototype.addMark=function(nt){return this.isMarkExist(nt)?(Bk("Mark already exists, add mark failed."),!1):(this._marks.push(nt),!0)},e.prototype.removeMark=function(nt){var at=this._marks.findIndex((function(at){return at.id===nt.id||at.name===nt.name}));return-1===at?(Bk("Mark does not exists, removeMark failed."),!1):(this._marks.splice(at,1),!0)},e.prototype.getMarkInType=function(nt){return this._marks.filter((function(at){return at.type===nt}))},e.prototype.getMarkInId=function(nt){return this._marks.find((function(at){return at.id===nt}))},e.prototype.getMarkInUserId=function(nt){var at;if(this._marks.forEach((function(lt){lt.getUserId()===nt&&(at=lt)})),!at)for(var lt=0;lt<this._marks.length;lt++){var Rt=this._marks[lt];if("group"===Rt.type&&(at=Rt.getMarkInUserId(nt)),at)break}return at},e.prototype.getMarkInName=function(nt){return this._marks.filter((function(at){return at.name===nt}))},e.prototype._compileProduct=function(at){var lt=this;nt.prototype._compileProduct.call(this,at),this._product.configure({"zIndex":this._markConfig.zIndex}),(null==at?void 0:at.ignoreChildren)||this.getMarks().forEach((function(nt){nt.getProduct()&&nt.removeProduct(),nt.compile({"group":lt._product})}))},e.type="group",e}(dY),eY=function(){LP(),xP(),Pj.registerGraphic(MH.group,Pv),Tz.registerMark(kY.type,kY)},AY={"measureText":zz},wY=function(){function t(){this.functions={}}return t.instance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.registerFunction=function(nt,at){nt&&at&&(this.functions[nt]=at)},t.prototype.unregisterFunction=function(nt){nt&&delete this.functions[nt]},t.prototype.getFunction=function(nt){return this.functions[nt]||null},t.prototype.getFunctionNameList=function(){return Object.keys(this.functions)},t}(),rY=function(){wA(Mc)},aY=function(){YM(Mc)},EY=function(){function t(){this.id=Nk(),this._plugins=[]}return t.prototype.add=function(nt){var at=this;if(!nt||0===nt.length)return null;var lt=[];return nt.forEach((function(nt){at._plugins.find((function(at){return at.id===nt.id}))?Bk("plugin"):(at._plugins.push(nt),lt.push(nt),nt.onAdd&&nt.onAdd(at))})),lt},t.prototype.load=function(nt){var at=this.add(nt);at&&at.length&&this.activate(nt)},t.prototype.activate=function(nt){nt.length&&nt.forEach((function(nt){nt.init&&nt.init()}))},t.prototype.get=function(nt){return this._plugins.find((function(at){return at.id===nt}))},t.prototype.getAll=function(){return this._plugins.slice()},t.prototype.release=function(nt){var at=this.get(nt);at&&(at.release(this),this._plugins=this._plugins.filter((function(nt){return nt!==at})))},t.prototype.releaseAll=function(){var nt=this;this._plugins.forEach((function(at){at.release(nt)})),this._plugins=[]},t.prototype.clear=function(nt){var at=this.get(nt);at&&at.clear(this)},t.prototype.clearAll=function(){var nt=this;this._plugins.forEach((function(at){var lt;null===(lt=at.clear)||void 0===lt||lt.call(at,nt)}))},t}(),PY=function(nt){function e(at){var lt=nt.call(this)||this;return lt.globalInstance=at,lt}return S(e,nt),e.prototype.onInit=function(nt){var at=this;this._plugins.forEach((function(lt){lt.onInit&&lt.onInit(at,nt)}))},e.prototype.onBeforeResize=function(nt,at){var lt=this;this._plugins.forEach((function(Rt){Rt.onBeforeResize&&Rt.onBeforeResize(lt,nt,at)}))},e.prototype.onAfterChartSpecTransform=function(nt,at){var lt=this;this._plugins.forEach((function(Rt){Rt.onAfterChartSpecTransform&&Rt.onAfterChartSpecTransform(lt,nt,at)}))},e.prototype.onAfterModelSpecTransform=function(nt,at,lt){var Rt=this;this._plugins.forEach((function(Bt){Bt.onAfterModelSpecTransform&&Bt.onAfterModelSpecTransform(Rt,nt,at,lt)}))},e.prototype.onBeforeInitChart=function(nt,at){var lt=this;this._plugins.forEach((function(Rt){Rt.onBeforeInitChart&&Rt.onBeforeInitChart(lt,nt,at)}))},e.prototype.releaseAll=function(){nt.prototype.releaseAll.call(this),this.globalInstance=null},e}(EY),RY=new Map;function uY(nt,at){RY.has(nt)&&Bk("svg source key of '".concat(nt,"' already exists, will be overwritten.")),iY||WW(iY=new Ms,"svg",ps);var lt=new Es(iY);lt.parse(at,{"type":"svg"}),RY.set(nt,lt)}function cY(nt){RY.has(nt)?RY.delete(nt):Bk("map type of '".concat(nt,"' does not exists."))}function hY(nt){return RY.get(nt)}var BY=function(){function e(at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne=this;this.id=Nk(),this._userEvents=[],this._autoSize=!0,this._option={"mode":nt.RenderModeEnum["desktop-browser"],"onError":function(nt){throw new Error(nt)},"optimize":{"disableCheckGraphicWidthOutRange":!0}},this._observer=null,this._context={},this._doResize=function(){var nt=ne.getCurrentSize(),at=nt.width,lt=nt.height;ne._currentSize.width===at&&ne._currentSize.height===lt||(ne._currentSize={"width":at,"height":lt},ne.resizeSync(at,lt))},this._renderSync=function(nt){var at;void 0===nt&&(nt={});var lt=ne;return ne._beforeRender(nt)?(null===(at=ne._compiler)||void 0===at||at.render(nt.morphConfig),ne._afterRender(),lt):lt},this._updateSpec=function(nt,at,lt){var Rt,Bt;void 0===at&&(at=!1);var Lt=ne._spec,Ht={"changeBackground":!1,"reTransformSpec":!1,"change":!1,"reMake":!1,"reCompile":!1,"reSize":!1,"changeTheme":!1};if(ne._setNewSpec(nt,at)){mt(Lt.theme,ne._spec.theme)?mt(ne._spec.background,Lt.background)||(Ht.reMake=!0,Ht.changeBackground=!0):Ht.changeTheme=!0;var jt=ne._shouldChartResize(Lt);if(Ht.reSize=jt,ne._spec.type!==Lt.type)return null===(Bt=null===(Rt=ne._compiler)||void 0===Rt?void 0:Rt.getVGrammarView())||void 0===Bt||Bt.updateLayoutTag(),Ht.reMake=!0,Ht.reTransformSpec=!0,Ht.change=!0,Ht.changeTheme=!0,Ht;ne._initChartSpec(ne._spec,"updateSpec");var $t=dU(ne._chart.updateSpec(ne._spec),Ht);return lt?A(A({},$t),lt):$t}},this._option=A(A(A({},this._option),{"animation":!1!==at.animation}),lt),(null==lt?void 0:lt.optimize)&&(this._option.optimize=A(A({},this._option.optimize),lt.optimize)),this._onError=null===(Rt=this._option)||void 0===Rt?void 0:Rt.onError;var re=this._option,ae=re.dom,oe=re.renderCanvas,se=re.mode,le=re.stage,ue=re.poptip,ce=w(re,["dom","renderCanvas","mode","stage","poptip"]),he=Fk(se);if(he?rY():"node"===se&&aY(),he&&ae&&(this._container=Y(ae)?ax.getElementById(ae):ae),oe&&(this._canvas=oe),le&&(this._stage=le),"node"===se||this._container||this._canvas||this._stage){this._viewBox=this._option.viewBox,this._currentThemeName=Uz.getCurrentThemeName(),this._setNewSpec(at),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();var de=[];0!=!ue&&de.push("poptipForText"),"sankey"===at.type&&de.push("scrollbar");var fe=A({},ce.performanceHook||{});Object.keys(fe).forEach((function(nt){ce.performanceHook[nt]=function(){for(var at=[],lt=0;lt<arguments.length;lt++)at[lt]=arguments[lt];fe[nt].apply(fe,P(P([],E(at),!1),[ne],!1))}})),this._compiler=new xU({"dom":null!==(Lt=this._container)&&void 0!==Lt?Lt:"none","canvas":oe},A(A({"mode":this._option.mode,"stage":le,"pluginList":de},ce),{"background":this._getBackground(),"onError":this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new oU(this,this._compiler),this._event=new QG(this._eventDispatcher,se),this._compiler.initView(),this._setFontFamilyTheme(null===(Ht=this._currentTheme)||void 0===Ht?void 0:Ht.fontFamily),this._initDataSet(this._option.dataSet),this._autoSize=!!he&&(null===($t=null!==(jt=at.autoFit)&&void 0!==jt?jt:this._option.autoFit)||void 0===$t||$t),this._bindResizeEvent(),this._bindVGrammarViewEvent(),this._initChartPlugin(),Gz.registerInstance(this),null===(te=null===(Kt=this._option.performanceHook)||void 0===Kt?void 0:Kt.afterCreateVChart)||void 0===te||te.call(Kt,this)}else null===(Bt=this._option)||void 0===Bt||Bt.onError("please specify container or renderCanvas!")}return e.useRegisters=function(nt){nt.forEach((function(nt){"function"==typeof nt?nt():console.error("Invalid function:",nt)}))},e.useChart=function(nt){nt.forEach((function(nt){return Tz.registerChart(nt.type,nt)}))},e.useSeries=function(nt){nt.forEach((function(nt){return Tz.registerSeries(nt.type,nt)}))},e.useComponent=function(nt){nt.forEach((function(nt){return Tz.registerComponent(nt.type,nt)}))},e.useMark=function(nt){nt.forEach((function(nt){var at;return Tz.registerMark(null!==(at=nt.constructorType)&&void 0!==at?at:nt.type,nt)}))},e.useLayout=function(nt){nt.forEach((function(nt){return Tz.registerLayout(nt.type,nt)}))},e.registerDataSetTransform=function(nt,at){Tz.registerTransform(nt,at)},e.registerFunction=function(nt,at){nt&&at&&wY.instance().registerFunction(nt,at)},e.unregisterFunction=function(nt){nt&&wY.instance().unregisterFunction(nt)},e.getFunction=function(nt){return nt?wY.instance().getFunction(nt):null},e.getFunctionList=function(){return wY.instance().getFunctionNameList()},e.registerMap=function(nt,at,lt){var Rt=Tz.getImplementInKey("registerMap");Rt&&Rt(nt,at,lt)},e.unregisterMap=function(nt){var at=Tz.getImplementInKey("unregisterMap");at&&at(nt)},e.getMap=function(nt){return at=nt,fU.get(at);var at},e.registerSVG=function(nt,at,lt){var Rt=Tz.getImplementInKey("registerSVG");Rt&&Rt(nt,at,lt)},e.unregisterSVG=function(nt){var at=Tz.getImplementInKey("unregisterSVG");at&&at(nt)},e.getSVG=function(nt){return hY(nt)},e.hideTooltip=function(nt){void 0===nt&&(nt=[]),Gz.forEach((function(nt){var at;return null===(at=null==nt?void 0:nt.hideTooltip)||void 0===at?void 0:at.call(nt)}),nt)},e.getLogger=function(){return te.getInstance()},e.prototype.getSpec=function(){return this._spec},e.prototype.getSpecInfo=function(){return this._specInfo},e.prototype.getDataSet=function(){return this._dataSet},e.prototype._setNewSpec=function(nt,at){return!!nt&&(Y(nt)&&(nt=JSON.parse(nt)),at&&this._originalSpec&&(nt=gz({},this._originalSpec,nt)),this._originalSpec=nt,this._spec=this._getSpecFromOriginalSpec(),!0)},e.prototype._getSpecFromOriginalSpec=function(){var nt,at=Oz(this._originalSpec);return at.data=null!==(nt=at.data)&&void 0!==nt?nt:[],at},e.prototype._initChartSpec=function(nt,at){var lt,Rt;e.getFunctionList()&&e.getFunctionList().length&&(nt=Fz(nt,e)),this._spec=nt,this._chartSpecTransformer||(this._chartSpecTransformer=Tz.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),null===(lt=this._chartSpecTransformer)||void 0===lt||lt.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,at),this._specInfo=null===(Rt=this._chartSpecTransformer)||void 0===Rt?void 0:Rt.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,at)},e.prototype._updateSpecInfo=function(){var nt;this._chartSpecTransformer||(this._chartSpecTransformer=Tz.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=null===(nt=this._chartSpecTransformer)||void 0===nt?void 0:nt.createSpecInfo(this._spec)},e.prototype._initChart=function(nt){var at,lt,Rt;if(this._compiler)if(this._chart)null===(lt=this._option)||void 0===lt||lt.onError("chart is already initialized");else{var Bt=Tz.createChart(nt.type,nt,this._getChartOption(nt.type));Bt?(this._chart=Bt,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(jW.initialized,{"chart":Bt,"vchart":this})):null===(Rt=this._option)||void 0===Rt||Rt.onError("init chart fail")}else null===(at=this._option)||void 0===at||at.onError("compiler is not initialized")},e.prototype._releaseData=function(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)},e.prototype._bindVGrammarViewEvent=function(){var nt=this;if(this._compiler){var at=this._compiler.getVGrammarView();at.addEventListener(GH.ALL_ANIMATION_END,(function(){nt._event.emit(jW.animationFinished,{"chart":nt._chart,"vchart":nt})})),at.addEventListener(GH.AFTER_VRENDER_NEXT_RENDER,(function(){nt._event.emit(jW.renderFinished,{"chart":nt._chart,"vchart":nt})}))}},e.prototype._bindResizeEvent=function(){var nt,at;if(this._autoSize){if(this._onResize=Zt(this._doResize,null!==(nt=this._option.resizeDelay)&&void 0!==nt?nt:100),this._container){var lt=window.ResizeObserver;lt&&(this._observer=new lt(this._onResize),null===(at=this._observer)||void 0===at||at.observe(this._container))}window.addEventListener("resize",this._onResize)}},e.prototype._unBindResizeEvent=function(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))},e.prototype.getCurrentSize=function(){var nt,at,lt,Rt;return hU(this._spec,{"container":this._container,"canvas":this._canvas,"mode":this._getMode(),"modeParams":this._option.modeParams},{"width":null!==(at=null===(nt=this._currentSize)||void 0===nt?void 0:nt.width)&&void 0!==at?at:DF,"height":null!==(Rt=null===(lt=this._currentSize)||void 0===lt?void 0:lt.height)&&void 0!==Rt?Rt:LF})},e.prototype._initDataSet=function(nt){for(var at in this._dataSet=nt instanceof Ms?nt:new Ms,WW(this._dataSet,"dataview",as),WW(this._dataSet,"array",I),GW(this._dataSet,"copyDataView",tU),Tz.transforms)GW(this._dataSet,at,Tz.transforms[at]);for(var at in Tz.dataParser)WW(this._dataSet,at,Tz.dataParser[at])},e.prototype.updateCustomConfigAndRerender=function(nt,at,lt){if(void 0===lt&&(lt={}),!this._isReleased&&nt)return H(nt)&&(nt=nt()),nt.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(nt),at?this._renderSync(lt):this._renderAsync(lt)},e.prototype._updateCustomConfigAndRecompile=function(nt,at){return void 0===at&&(at={}),!!nt&&(this._reCompile(nt),this._beforeRender(at))},e.prototype._reCompile=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re=this;if(nt.reMake&&(this._releaseData(),this._initDataSet(),null===(lt=this._chart)||void 0===lt||lt.release(),this._chart=null),nt.reTransformSpec&&(this._chartSpecTransformer=null),nt.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(null===(Rt=this._currentTheme)||void 0===Rt?void 0:Rt.fontFamily)):nt.changeBackground&&(null===(Bt=this._compiler)||void 0===Bt||Bt.setBackground(this._getBackground())),nt.reMake)null===(Lt=this._compiler)||void 0===Lt||Lt.releaseGrammar(!1===(null===(Ht=this._option)||void 0===Ht?void 0:Ht.animation)||!1===(null===(jt=this._spec)||void 0===jt?void 0:jt.animation)),this._userEvents.forEach((function(nt){var at;return null===(at=re._event)||void 0===at?void 0:at.on(nt.eType,nt.query,nt.handler)})),nt.reSize&&this._doResize();else if(nt.reCompile&&(null===($t=this._compiler)||void 0===$t||$t.clear({"chart":this._chart,"vChart":this},!1===(null===(Kt=this._option)||void 0===Kt?void 0:Kt.animation)||!1===(null===(te=this._spec)||void 0===te?void 0:te.animation)),null===(ne=this._compiler)||void 0===ne||ne.compile({"chart":this._chart,"vChart":this},{})),nt.reSize){var ae=this.getCurrentSize(),oe=ae.width,se=ae.height;this._chart.onResize(oe,se,!1),this._compiler.resize(oe,se,!1)}},e.prototype._beforeRender=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t;if(void 0===nt&&(nt={}),this._isReleased)return!1;if(this._chart)return!0;var Kt=nt.transformSpec,te=nt.actionSource;return Kt&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,te),null===(lt=null===(at=this._option.performanceHook)||void 0===at?void 0:at.beforeInitializeChart)||void 0===lt||lt.call(at,this),this._initChart(this._spec),null===(Bt=null===(Rt=this._option.performanceHook)||void 0===Rt?void 0:Rt.afterInitializeChart)||void 0===Bt||Bt.call(Rt,this),!(!this._chart||!this._compiler||(null===(Ht=null===(Lt=this._option.performanceHook)||void 0===Lt?void 0:Lt.beforeCompileToVGrammar)||void 0===Ht||Ht.call(Lt),this._compiler.compile({"chart":this._chart,"vChart":this},{"performanceHook":this._option.performanceHook}),null===($t=null===(jt=this._option.performanceHook)||void 0===jt?void 0:jt.afterCompileToVGrammar)||void 0===$t||$t.call(jt),0))},e.prototype._afterRender=function(){return!this._isReleased&&(this._updateAnimateState(),this._event.emit(jW.rendered,{"chart":this._chart,"vchart":this}),!0)},e.prototype.renderSync=function(nt){return this._renderSync({"morphConfig":nt,"transformSpec":!0,"actionSource":"render"})},e.prototype.renderAsync=function(nt){return M(this,void 0,void 0,(function(){return T(this,(function(at){return[2,this._renderAsync({"morphConfig":nt,"transformSpec":!0,"actionSource":"render"})]}))}))},e.prototype._renderAsync=function(nt){return void 0===nt&&(nt={}),M(this,void 0,void 0,(function(){return T(this,(function(at){return[2,this._renderSync(nt)]}))}))},e.prototype._updateAnimateState=function(nt){var at,lt;if(this._option.animation){var Rt=nt?gU.appear:gU.update;null===(at=this._chart)||void 0===at||at.getAllRegions().forEach((function(nt){var at;null===(at=nt.animate)||void 0===at||at.updateAnimateState(Rt,!0)})),null===(lt=this._chart)||void 0===lt||lt.getAllComponents().forEach((function(nt){var at;null===(at=nt.animate)||void 0===at||at.updateAnimateState(Rt,!0)}))}},e.prototype.release=function(){var nt,at,lt,Rt;(null===(nt=this._onResize)||void 0===nt?void 0:nt.cancel)&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,null===(at=this._chart)||void 0===at||at.release(),null===(lt=this._eventDispatcher)||void 0===lt||lt.release(),null===(Rt=this._compiler)||void 0===Rt||Rt.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,Gz.unregisterInstance(this)},e.prototype.updateData=function(nt,at,lt,Rt){return M(this,void 0,void 0,(function(){return T(this,(function(Bt){return[2,this.updateDataSync(nt,at,lt,Rt)]}))}))},e.prototype._updateDataById=function(nt,at,lt){var Rt=this._spec.data.find((function(at){return at.name===nt||at.id===nt}));Rt?Rt.id===nt?Rt.values=at:Rt.name===nt&&Rt.parse(at,lt):X(at)?this._spec.data.push({"id":nt,"values":at}):this._spec.data.push(at)},e.prototype.updateDataInBatches=function(nt){return M(this,void 0,void 0,(function(){var at=this;return T(this,(function(lt){return this._chart?(this._chart.updateFullData(nt.map((function(nt){return{"id":nt.id,"values":nt.data,"parser":nt.options}}))),this._chart.updateGlobalScaleDomain(),this._compiler.render(),[2,this]):(this._spec.data=xt(this._spec.data),nt.forEach((function(nt){var lt=nt.id,Rt=nt.data,Bt=nt.options;at._updateDataById(lt,Rt,Bt)})),[2,this])}))}))},e.prototype.updateDataSync=function(nt,at,lt,Rt){return j(this._dataSet)?this:this._chart?((null==Rt?void 0:Rt.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateData(nt,at,!0,lt),this._compiler.render(),this):(this._spec.data=xt(this._spec.data),this._updateDataById(nt,at,lt),this)},e.prototype.updateFullDataSync=function(nt,at,lt){var Rt=this;if(void 0===at&&(at=!0),this._chart)return(null==lt?void 0:lt.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._chart.updateFullData(nt),at&&this._compiler.render(),this;var Bt=xt(this._spec.data);return xt(nt).forEach((function(nt){var at=nt.id,lt=nt.values,Lt=nt.parser,Ht=nt.fields,jt=Bt.find((function(nt){return nt.name===at}));if(jt)jt instanceof Es?(jt.setFields(ct(Ht)),jt.parse(lt,ct(Lt))):(jt.values=lt,N(Lt)&&(jt.parser=Lt),N(Ht)&&(jt.fields=Ht));else{var $t=iU(nt,Rt._dataSet,Bt);X(Rt._spec.data)&&Rt._spec.data.push($t)}})),this},e.prototype.updateFullData=function(nt,at){return void 0===at&&(at=!0),M(this,void 0,void 0,(function(){return T(this,(function(lt){return[2,this.updateFullDataSync(nt,at)]}))}))},e.prototype.updateSpec=function(nt,at,lt,Rt){return void 0===at&&(at=!1),M(this,void 0,void 0,(function(){var Bt;return T(this,(function(Lt){switch(Lt.label){case 0:return(Bt=this._updateSpec(nt,at,Rt))?[4,this.updateCustomConfigAndRerender(Bt,!1,{"morphConfig":lt,"transformSpec":Bt.reTransformSpec,"actionSource":"updateSpec"})]:[2,this];case 1:return Lt.sent(),[2,this]}}))}))},e.prototype.updateSpecSync=function(nt,at,lt,Rt){void 0===at&&(at=!1);var Bt=this._updateSpec(nt,at,Rt);return Bt?(this.updateCustomConfigAndRerender(Bt,!0,{"morphConfig":lt,"transformSpec":Bt.reTransformSpec,"actionSource":"updateSpec"}),this):this},e.prototype.updateSpecAndRecompile=function(nt,at,lt){void 0===at&&(at=!1),void 0===lt&&(lt={});var Rt=this._updateSpec(nt,at);return this._updateCustomConfigAndRecompile(Rt,A({"actionSource":"updateSpecAndRecompile"},lt))},e.prototype.updateModelSpec=function(nt,at,lt,Rt){return void 0===lt&&(lt=!1),M(this,void 0,void 0,(function(){return T(this,(function(Bt){return[2,this.updateModelSpecSync(nt,at,lt,Rt)]}))}))},e.prototype.updateModelSpecSync=function(nt,at,lt,Rt){if(void 0===lt&&(lt=!1),!at||!this._spec)return this;if(Y(at)&&(at=JSON.parse(at)),H(nt)||function(nt,at,lt,Rt){Object.keys(nt).forEach((function(Bt){if(V(at))at.type===Bt&&(X(nt[Bt])?nt[Bt].length>=at.index&&(nt[Bt][at.index]=Rt?gz({},nt[Bt][at.index],lt):lt):nt[Bt]=Rt?gz({},nt[Bt],lt):lt);else if(X(nt[Bt])){var Lt=nt[Bt].findIndex((function(nt){return nt.id===at}));Lt>=0&&(nt[Bt][Lt]=Rt?gz({},nt[Bt][Lt],lt):lt)}else nt.id===at&&(nt[Bt]=Rt?gz({},nt[Bt],lt):lt)}))}(this._spec,nt,at,lt),this._chart){var Bt=this._chart.getModelInFilter(nt);if(Bt)return this._updateModelSpec(Bt,at,!0,lt,Rt)}return this},e.prototype._updateModelSpec=function(nt,at,lt,Rt,Bt){void 0===lt&&(lt=!1),void 0===Rt&&(Rt=!1),Rt&&(at=gz({},nt.getSpec(),at));var Lt=nt.updateSpec(at);return nt.reInit(at),(Lt.change||Lt.reCompile||Lt.reMake||Lt.reSize||Lt.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(Lt,lt,{"morphConfig":Bt,"transformSpec":!1,"actionSource":"updateModelSpec"})},e.prototype.resize=function(nt,at){return M(this,void 0,void 0,(function(){return T(this,(function(lt){return[2,this.resizeSync(nt,at)]}))}))},e.prototype.resizeSync=function(nt,at){var lt,Rt;return this._beforeResize(nt,at)?(null===(Rt=(lt=this._compiler).resize)||void 0===Rt||Rt.call(lt,nt,at),this._afterResize()):this},e.prototype._beforeResize=function(nt,at){var lt,Rt,Bt,Lt;if(!this._chart||!this._compiler)return!1;var Ht=this._chart.getCanvasRect();return!(Ht&&Ht.width===nt&&Ht.height===at||(this._chartPluginApply("onBeforeResize",nt,at),null===(Rt=null===(lt=this._option.performanceHook)||void 0===lt?void 0:lt.beforeResizeWithUpdate)||void 0===Rt||Rt.call(lt),this._chart.onResize(nt,at,!1),null===(Lt=null===(Bt=this._option.performanceHook)||void 0===Bt?void 0:Bt.afterResizeWithUpdate)||void 0===Lt||Lt.call(Bt),0))},e.prototype._afterResize=function(){return this._isReleased||this._event.emit(jW.afterResize,{"chart":this._chart}),this},e.prototype.updateViewBox=function(nt,at,lt){return void 0===at&&(at=!0),void 0===lt&&(lt=!0),this._chart&&this._compiler?(this._viewBox=nt,this._chart.updateViewBox(nt,lt),lt&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(nt,at),this):this},e.prototype.on=function(nt,at,lt){var Rt;this._userEvents&&(this._userEvents.push({"eType":nt,"query":"function"==typeof at?null:at,"handler":"function"==typeof at?at:lt}),null===(Rt=this._event)||void 0===Rt||Rt.on(nt,at,lt))},e.prototype.off=function(nt,at){var lt,Rt=this;if(this._userEvents&&0!==this._userEvents.length)if(at){var Bt=this._userEvents.findIndex((function(lt){return lt.eType===nt&&lt.handler===at}));Bt>=0&&(this._userEvents.splice(Bt,1),null===(lt=this._event)||void 0===lt||lt.off(nt,at))}else this._userEvents.forEach((function(at){var lt;at.eType===nt&&(null===(lt=Rt._event)||void 0===lt||lt.off(nt,at.handler))})),this._userEvents=this._userEvents.filter((function(at){return at.eType!==nt}))},e.prototype.updateState=function(nt,at){this._chart&&this._chart.updateState(nt,at)},e.prototype.setSelected=function(nt,at,lt){this._chart&&this._chart.setSelected(nt,at,lt)},e.prototype.setHovered=function(nt,at,lt){this._chart&&this._chart.setHovered(nt,at,lt)},e.prototype.clearState=function(nt){this._chart&&this._chart.clearState(nt)},e.prototype.clearAllStates=function(){this._chart&&this._chart.clearAllStates()},e.prototype.clearSelected=function(){this._chart&&this._chart.clearSelected()},e.prototype.clearHovered=function(){this._chart&&this._chart.clearHovered()},e.prototype._updateCurrentTheme=function(nt){var at,lt,Rt,Bt=this._option.theme,Lt=null===(at=this._spec)||void 0===at?void 0:at.theme,Ht=null===(lt=this._spec)||void 0===lt?void 0:lt.type;nt&&(this._currentThemeName=nt);var jt,$t,u=function(nt,at){var lt;return(null===(lt=at.chart)||void 0===lt?void 0:lt[nt])&&(at=mz({},at,at.chart[nt])),at};if(ot(Bt)&&ot(Lt))jt=Dz(this._currentThemeName,!0),this._currentTheme=u(Ht,jt);else if(Y(Bt)&&(!Lt||Y(Lt))||Y(Lt)&&(!Bt||Y(Bt))){var Kt=mz({},Dz(this._currentThemeName,!0),Dz(Bt,!0),Dz(Lt,!0));this._currentTheme=u(Ht,Kt)}else Kt=mz({},Dz(this._currentThemeName),Dz(Bt),Dz(Lt)),this._currentTheme=kz(u(Ht,Kt));$t=st(this._currentTheme,"component.poptip"),ft(CR.poptip,wR,$t),null===(Rt=this._compiler)||void 0===Rt||Rt.setBackground(this._getBackground())},e.prototype._shouldChartResize=function(nt){var at,lt,Rt=!1;j(this._spec.width)?!j(nt.width)&&(this._spec.width=nt.width):this._spec.width!==nt.width&&(Rt=!0),j(this._spec.height)?!j(nt.height)&&(this._spec.height=nt.height):this._spec.height!==nt.height&&(Rt=!0);var Bt=this._autoSize;return this._autoSize=!!Fk(this._option.mode)&&(null===(lt=null!==(at=this._spec.autoFit)&&void 0!==at?at:this._option.autoFit)||void 0===lt||lt),this._autoSize!==Bt&&(Rt=!0),Rt},e.prototype._getBackground=function(){return("string"==typeof this._spec.background||V(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this._currentTheme.background||this._option.background},e.prototype.getCurrentTheme=function(){return Dz(this._currentThemeName)},e.prototype.getCurrentThemeName=function(){return this._currentThemeName},e.prototype.setCurrentTheme=function(nt){return M(this,void 0,void 0,(function(){return T(this,(function(at){return[2,this.setCurrentThemeSync(nt)]}))}))},e.prototype.setCurrentThemeSync=function(nt){var at;if(!Uz.themeExist(nt))return this;var lt=this._setCurrentTheme(nt);return this._setFontFamilyTheme(null===(at=this._currentTheme)||void 0===at?void 0:at.fontFamily),this.updateCustomConfigAndRerender(lt,!0,{"transformSpec":!1,"actionSource":"setCurrentTheme"}),this},e.prototype._setCurrentTheme=function(nt){var at;return this._updateCurrentTheme(nt),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null===(at=this._chart)||void 0===at||at.setCurrentTheme(),{"change":!0,"reMake":!1}},e.prototype._setFontFamilyTheme=function(nt){var at;nt&&(null===(at=this.getStage())||void 0===at||at.setTheme({"text":{"fontFamily":nt},"richtext":{"fontFamily":nt}}))},e.prototype._getTooltipComponent=function(){var nt;return null===(nt=this._chart)||void 0===nt?void 0:nt.getComponentsByType(lt.tooltip)[0]},e.prototype.setTooltipHandler=function(nt){var at,lt;this._context.tooltipHandler=nt;var Rt=this._getTooltipComponent();Rt&&(null===(lt=null===(at=Rt.tooltipHandler)||void 0===at?void 0:at.release)||void 0===lt||lt.call(at),Rt.tooltipHandler=nt)},e.prototype.getTooltipHandlerByUser=function(){var nt;return null===(nt=this._context)||void 0===nt?void 0:nt.tooltipHandler},e.prototype.getTooltipHandler=function(){var nt=this._getTooltipComponent();return nt?nt.tooltipHandler:this._context.tooltipHandler},e.prototype.showTooltip=function(nt,at){var lt,Rt=this._getTooltipComponent();return null!==(lt=N(nt)&&"none"!==(null==Rt?void 0:Rt.showTooltip(nt,at)))&&void 0!==lt&&lt},e.prototype.hideTooltip=function(){var nt,at=this._getTooltipComponent();return null!==(nt=null==at?void 0:at.hideTooltip())&&void 0!==nt&&nt},e.prototype.getLegendDataById=function(nt){var at,lt=null===(at=this._chart)||void 0===at?void 0:at.getComponentByUserId(nt);return lt?lt.getLegendData():[]},e.prototype.getLegendDataByIndex=function(nt){var at;void 0===nt&&(nt=0);var Rt=null===(at=this._chart)||void 0===at?void 0:at.getComponentsByType(lt.discreteLegend);return Rt&&Rt[nt]?Rt[nt].getLegendData():[]},e.prototype.getLegendSelectedDataById=function(nt){var at,lt=null===(at=this._chart)||void 0===at?void 0:at.getComponentByUserId(nt);return lt?lt.getSelectedData():[]},e.prototype.getLegendSelectedDataByIndex=function(nt){var at;void 0===nt&&(nt=0);var Rt=null===(at=this._chart)||void 0===at?void 0:at.getComponentsByType(lt.discreteLegend);return Rt&&Rt[nt]?Rt[nt].getSelectedData():[]},e.prototype.setLegendSelectedDataById=function(nt,at){var lt,Rt=null===(lt=this._chart)||void 0===lt?void 0:lt.getComponentByUserId(nt);Rt&&Rt.setSelectedData(at)},e.prototype.setLegendSelectedDataByIndex=function(nt,at){var Rt;void 0===nt&&(nt=0);var Bt=null===(Rt=this._chart)||void 0===Rt?void 0:Rt.getComponentsByType(lt.discreteLegend);Bt&&Bt[nt]&&Bt[nt].setSelectedData(at)},e.prototype.getDataURL=function(){var nt;return M(this,void 0,void 0,(function(){var at;return T(this,(function(lt){switch(lt.label){case 0:return at=this.getStage(),this._chart&&at?(at.render(),[4,uU(this._chart.getCanvas(),{"onError":this._onError})]):[3,2];case 1:return[2,lt.sent()];case 2:return null===(nt=this._option)||void 0===nt||nt.onError(new ReferenceError("render is not defined")),[2,null]}}))}))},e.prototype.exportImg=function(nt){var at,lt;return M(this,void 0,void 0,(function(){var Rt;return T(this,(function(Bt){switch(Bt.label){case 0:return Fk(this._option.mode)?[4,this.getDataURL()]:(null===(at=this._option)||void 0===at||at.onError(new TypeError("non-browser environment can not export img")),[2]);case 1:return(Rt=Bt.sent())?function(nt,at){void 0===nt&&(nt="vchart");var lt=document.createElement("a");lt.setAttribute("href",at),lt.setAttribute("target","_blank"),lt.setAttribute("download","".concat(nt,".png")),lt.dispatchEvent(new MouseEvent("click"))}(nt,Rt):null===(lt=this._option)||void 0===lt||lt.onError(new ReferenceError("render is not defined")),[2]}}))}))},e.prototype.exportCanvas=function(){var nt,at=this.getStage();if(this._chart&&at)return at.toCanvas();null===(nt=this._option)||void 0===nt||nt.onError(new ReferenceError("render is not defined"))},e.prototype.getImageBuffer=function(){var nt,at;if("node"===this._option.mode){var lt=this.getStage();return lt?(lt.render(),lt.window.getImageBuffer()):(null===(at=this._option)||void 0===at||at.onError(new ReferenceError("render is not defined")),null)}null===(nt=this._option)||void 0===nt||nt.onError(new TypeError("getImageBuffer() now only support node environment."))},e.prototype.setLayout=function(nt){var at;this._option.layout=nt,null===(at=this._chart)||void 0===at||at.setLayout(nt)},e.prototype.reLayout=function(){var nt;null===(nt=this._chart)||void 0===nt||nt.setLayoutTag(!0)},e.prototype.getCompiler=function(){return this._compiler},e.prototype.getChart=function(){return this._chart},e.prototype.getStage=function(){return this._compiler.getStage()},e.prototype.getCanvas=function(){var nt;return null===(nt=this._compiler)||void 0===nt?void 0:nt.getCanvas()},e.prototype.getContainer=function(){var nt,at;return N(this._container)?this._container:(at=Y(this._canvas)?ax.getElementById(this._canvas):this._canvas,N(at)?at.parentElement:null===(nt=this.getCanvas())||void 0===nt?void 0:nt.parentElement)},e.prototype.getComponents=function(){return this._chart.getAllComponents()},e.prototype.getScale=function(nt){var at,lt=null===(at=this._chart)||void 0===at?void 0:at.getGlobalScale();return null==lt?void 0:lt.getScale(nt)},e.prototype.setDimensionIndex=function(nt,at){var lt;return void 0===at&&(at={}),null===(lt=this._chart)||void 0===lt?void 0:lt.setDimensionIndex(nt,at)},e.prototype.stopAnimation=function(){var nt,at,lt;null===(lt=null===(at=null===(nt=this._compiler)||void 0===nt?void 0:nt.getVGrammarView())||void 0===at?void 0:at.animate)||void 0===lt||lt.stop()},e.prototype.pauseAnimation=function(){var nt,at,lt;null===(lt=null===(at=null===(nt=this._compiler)||void 0===nt?void 0:nt.getVGrammarView())||void 0===at?void 0:at.animate)||void 0===lt||lt.pause()},e.prototype.resumeAnimation=function(){var nt,at,lt;null===(lt=null===(at=null===(nt=this._compiler)||void 0===nt?void 0:nt.getVGrammarView())||void 0===at?void 0:at.animate)||void 0===lt||lt.resume()},e.prototype.convertDatumToPosition=function(nt,at,lt,Rt){var Bt;if(void 0===at&&(at={}),void 0===lt&&(lt=!1),!this._chart)return null;if(ot(nt))return null;var Lt,Ht=at.seriesId,jt=at.seriesIndex,$t=void 0===jt?0:jt;if(N(Ht)?Lt=this._chart.getSeriesInUserId(Ht):N($t)&&(Lt=null===(Bt=this._chart.getSeriesInIndex([$t]))||void 0===Bt?void 0:Bt[0]),Lt){var Kt=Object.keys(nt),te=Lt.getViewData().latestData.find((function(at){return Kt.every((function(lt){return at[lt]==nt[lt]}))})),ne=Lt.getRegion().getLayoutStartPoint(),re=void 0;return(re=te?Lt.dataToPosition(te,Rt):Lt.dataToPosition(nt,Rt))?gF(re,ne,lt):null}return null},e.prototype.convertValueToPosition=function(nt,at,lt){var Rt,Bt;if(void 0===lt&&(lt=!1),!this._chart||j(nt)||ot(at))return null;if(!X(nt)){var Lt=at,Ht=Lt.axisId,jt=Lt.axisIndex,$t=void 0;if(N(Ht)?$t=this._chart.getComponentsByKey("axes").find((function(nt){return nt.userId===Ht})):N(jt)&&($t=null===(Rt=this._chart.getComponentsByKey("axes"))||void 0===Rt?void 0:Rt[jt]),!$t)return Bk("Please check whether the `axisId` or `axisIndex` is set!"),null;var Kt=null==$t?void 0:$t.valueToPosition(nt);if(lt){var te=$t.getLayoutStartPoint(),ne=$t.getOrient();return Kt+("bottom"===ne||"top"===ne?te.x:te.y)}return Kt}var re,ae=at,oe=ae.seriesId,se=ae.seriesIndex;return N(oe)?re=this._chart.getSeriesInUserId(oe):N(se)&&(re=null===(Bt=this._chart.getSeriesInIndex([se]))||void 0===Bt?void 0:Bt[0]),re?gF(re.valueToPosition(nt[0],nt[1]),re.getRegion().getLayoutStartPoint(),lt):(Bk("Please check whether the `seriesId` or `seriesIndex` is set!"),null)},e.prototype.getFunction=function(nt){return wY.instance().getFunction(nt)},e.prototype.registerFunction=function(nt,at){nt&&at&&wY.instance().registerFunction(nt,at)},e.prototype.unregisterFunction=function(nt){nt&&wY.instance().unregisterFunction(nt)},e.prototype.getFunctionList=function(){return wY.instance().getFunctionNameList()},e.prototype.setRuntimeSpec=function(nt){this._spec=nt,this._updateSpecInfo()},e.prototype.updateIndicatorDataById=function(nt,at){var lt,Rt=null===(lt=this._chart)||void 0===lt?void 0:lt.getComponentByUserId(nt);Rt&&Rt.updateDatum(at)},e.prototype.updateIndicatorDataByIndex=function(nt,at){var Rt;void 0===nt&&(nt=0);var Bt=null===(Rt=this._chart)||void 0===Rt?void 0:Rt.getComponentsByType(lt.indicator);Bt&&Bt[nt]&&Bt[nt].updateDatum(at)},e.prototype.geoZoomByIndex=function(nt,at,lt){void 0===nt&&(nt=0),this._geoZoomByQuery({"regionIndex":nt},at,lt)},e.prototype.geoZoomById=function(nt,at,lt){this._geoZoomByQuery({"regionId":nt},at,lt)},e.prototype._geoZoomByQuery=function(nt,at,Rt){var Bt,Lt,Ht=null===(Bt=this._chart)||void 0===Bt?void 0:Bt.getRegionsInQuerier(nt)[0],jt=null===(Lt=this._chart)||void 0===Lt?void 0:Lt.getComponentsByType(lt.geoCoordinate),$t=null==jt?void 0:jt.find((function(nt){var at;return null===(at=nt.getRegions())||void 0===at?void 0:at.includes(Ht)}));$t&&$t.dispatchZoom(at,Rt)},e.prototype._initChartPlugin=function(){var nt=Tz.getChartPlugins();nt.length>0&&(this._chartPlugin=new PY(this),this._chartPlugin.load(nt.map((function(nt){return new nt}))),this._chartPluginApply("onInit",this._spec))},e.prototype._chartPluginApply=function(nt){for(var at=[],lt=1;lt<arguments.length;lt++)at[lt-1]=arguments[lt];this._chartPlugin&&this._chartPlugin[nt]&&this._chartPlugin[nt].apply(this._chartPlugin,at)},e.prototype._getMode=function(){return this._option.mode||nt.RenderModeEnum["desktop-browser"]},e.prototype._getChartOption=function(nt){var at=this;return{"type":nt,"globalInstance":this,"eventDispatcher":this._eventDispatcher,"dataSet":this._dataSet,"container":this._container,"canvas":this._canvas,"map":new Map,"mode":this._getMode(),"modeParams":this._option.modeParams,"getCompiler":function(){return at._compiler},"performanceHook":this._option.performanceHook,"viewBox":this._viewBox,"animation":this._option.animation,"getTheme":function(){var nt;return null!==(nt=at._currentTheme)&&void 0!==nt?nt:{}},"getSpecInfo":function(){var nt;return null!==(nt=at._specInfo)&&void 0!==nt?nt:{}},"layout":this._option.layout,"onError":this._onError,"disableTriggerEvent":!0===this._option.disableTriggerEvent}},e.InstanceManager=Gz,e.ThemeManager=Uz,e.globalConfig={"uniqueTooltip":!0},e.Utils=AY,e.vglobal=ax,e}();Tz.registerRegion("region",KU),Tz.registerLayout("base",ZU),eY(),cV.useRegisters([hW]),bt(Nj,nN),Pj.registerInteraction(Nj.type,Nj),bt(jj,nN),Pj.registerInteraction(jj.type,jj),Cz(Mz.name,Mz),te.getInstance($t.Error);var pY=function(nt,at){var lt=at.beforeCall();return nt&&nt.forEach((function(nt,Rt){return at.call(nt,Rt,lt)})),lt.keyMap&&(lt.keyMap.clear(),lt.keyMap=null),nt};function fY(nt,at){return st(at,"component.".concat(nt))}function vY(nt,at,lt,Rt){if(nt)return{"formatFunc":nt,"args":[lt,Rt]};var Bt=Tz.getFormatter();return at&&Bt?{"formatFunc":Bt,"args":[lt,Rt,at]}:{}}var gY=function(nt,at,lt,Rt){if(!j(nt[at])){var Bt=X(nt[at]),Lt=Bt?nt[at]:[nt[at]],Ht=[];return Lt.forEach((function(nt,Lt){!nt||Rt&&!Rt(nt)||Ht.push({"spec":nt,"specPath":Bt?[at,Lt]:[at],"specInfoPath":["component",at,Lt],"type":lt})})),Ht}},yY=function(nt,at,lt,Rt){var Bt;if(Bt=H(nt)?nt(at,lt):W(nt)&&N(nt.field)?st(at,nt.field):nt,Rt){var Lt=vY(void 0,Rt,nt,at),Ht=Lt.formatFunc,jt=Lt.args;Ht&&jt&&(Bt=Ht.apply(void 0,P([],E(jt),!1)))}return Bt},mY=function(nt,at,lt){return j(nt)?nt:H(nt)?nt(at,lt):nt},_Y=function(nt,at){return!(at&&(!1===at.visible||at[nt]&&!1===at[nt].visible||at.activeType&&!(X(at.activeType)?at.activeType.includes(nt):at.activeType===nt)))};function bY(nt,at,lt,Rt,Bt,Lt){var o=function(at){if(at){var Ht={"datum":Bt},jt=j(at.key)&&j(at.value)&&!ot(at)?A(A(A({},Rt),lt),at):A(A({},Rt),at),$t=jt.key,Kt=jt.keyFormatter,te=jt.keyTimeFormat,ne=jt.keyTimeFormatMode,re=jt.value,ae=jt.valueFormatter,oe=jt.valueTimeFormat,se=jt.valueTimeFormatMode,le=w(jt,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);Ht.key=SY(yY($t,Bt,Lt,Kt),te,ne),Ht.value=SY(yY(re,Bt,Lt,ae),oe,se),Object.keys(le).forEach((function(nt){Ht[nt]=yY(jt[nt],Bt,Lt)})),!1!==Ht.visible&&(N(Ht.key)||N(Ht.value))&&nt.push(Ht)}};X(at)?at.forEach((function(nt){o(nt)})):o(at)}function xY(nt,at,lt,Rt,Bt,Lt,Ht){H(at)?bY(nt,at(Bt,Ht),lt,Rt,Lt,Ht):at&&bY(nt,at,lt,Rt,Lt,Ht)}var FY,SY=function(nt,at,lt){if(!at&&!lt)return"object"!=typeof nt?null==nt?void 0:nt.toString():nt;var Rt=Ji.getInstance();return at=at||"%Y%m%d",("local"===(lt=lt||"local")?Rt.timeFormat:Rt.timeUTCFormat)(at,nt)},zY=function(){function t(nt){var at=this;this.activeTriggerSet={"mark":new Set,"group":new Set},this.ignoreTriggerSet={"mark":new Set},this._getSeriesCacheInfo=function(){var nt,lt,Rt,Bt=at.series,Lt=Bt.getSeriesField();return{"seriesFields":N(Lt)?xt(Lt):null!==(nt=Bt.getSeriesKeys())&&void 0!==nt?nt:[],"dimensionFields":null!==(lt=Bt.getDimensionField())&&void 0!==lt?lt:[],"measureFields":null!==(Rt=Bt.getMeasureField())&&void 0!==Rt?Rt:[],"type":Bt.type}},this._getDimensionData=function(nt){var lt=at._seriesCacheInfo.dimensionFields;return lt[0]&&(null==nt?void 0:nt[lt[0]])},this._getMeasureData=function(nt){var lt=at._seriesCacheInfo.measureFields;return lt[0]&&(null==nt?void 0:nt[lt[0]])},this._getSeriesFieldData=function(nt){var lt=at._seriesCacheInfo,Rt=lt.dimensionFields,Bt=lt.seriesFields;if(N(Bt[0])&&(null==nt?void 0:nt[Bt[0]]))return null==nt?void 0:nt[Bt[0]];var Lt=Rt[Rt.length-1];return Rt.length>1&&(0===Bt.length||at.series.getSeriesKeys().length),null==nt?void 0:nt[Lt]},this._getSeriesStyle=function(nt,lt,Rt){var Bt,Lt,Ht;try{for(var jt=C(xt(lt)),$t=jt.next();!$t.done;$t=jt.next()){var Kt=$t.value,te=null===(Ht=at.series.getSeriesStyle(nt))||void 0===Ht?void 0:Ht(Kt);if(N(te))return te}}catch(nt){Bt={"error":nt}}finally{try{$t&&!$t.done&&(Lt=jt.return)&&Lt.call(jt)}finally{if(Bt)throw Bt.error}}return Rt},this.markTooltipKeyCallback=function(nt,lt){return at._getSeriesFieldData(nt)},this.markTooltipValueCallback=function(nt,lt){return at._getMeasureData(nt)},this.shapeTypeCallback=function(nt,lt){var Rt;return null!==(Rt=at._getSeriesStyle(nt,"shape",null))&&void 0!==Rt?Rt:at._getSeriesStyle(nt,"symbolType",at.series.getDefaultShapeType())},this.shapeColorCallback=function(nt,lt){return at._getSeriesStyle(nt,["fill","stroke"])},this.shapeStrokeCallback=function(nt,lt){return at._getSeriesStyle(nt,["stroke","fill"])},this.dimensionTooltipTitleCallback=function(nt,lt){return at._getDimensionData(nt)},this.groupTooltipTitleCallback=function(nt,lt){return at._getSeriesFieldData(nt)},this.groupTooltipKeyCallback=function(nt,lt){var Rt=at._seriesCacheInfo.seriesFields,Bt=at._seriesCacheInfo.dimensionFields;return Rt[0]&&(Bt=Bt.filter((function(nt){return nt!==Rt[0]}))),Bt.map((function(at){return null==nt?void 0:nt[at]})).join("-")},this.getHasShape=function(nt){return!!nt},this.series=nt,this.updateTooltipSpec()}return t.prototype.updateTooltipSpec=function(){var nt,at=null===(nt=this.series.getSpec())||void 0===nt?void 0:nt.tooltip;this.spec=at,this._seriesCacheInfo=this._getSeriesCacheInfo()},t.prototype.getShapeAttrs=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se=at?"content":"title",le=A(A(A(A(A({},null===(Rt=null==lt?void 0:lt.style)||void 0===Rt?void 0:Rt.shape),null==lt?void 0:lt[nt]),null===(Bt=null==lt?void 0:lt[nt])||void 0===Bt?void 0:Bt[se]),null===(Lt=this.spec)||void 0===Lt?void 0:Lt[nt]),null===(jt=null===(Ht=this.spec)||void 0===Ht?void 0:Ht[nt])||void 0===jt?void 0:jt[se]);return{"shapeType":null!==($t=le.shapeType)&&void 0!==$t?$t:this.shapeTypeCallback,"shapeFill":null!==(te=null!==(Kt=le.shapeFill)&&void 0!==Kt?Kt:le.shapeColor)&&void 0!==te?te:this.shapeColorCallback,"shapeStroke":null!==(ne=le.shapeStroke)&&void 0!==ne?ne:this.shapeStrokeCallback,"shapeHollow":null!==(re=le.shapeHollow)&&void 0!==re&&re,"shapeLineWidth":le.shapeLineWidth,"shapeSize":null!==(ae=le.shapeSize)&&void 0!==ae?ae:le.size,"hasShape":null!==(oe=le.hasShape)&&void 0!==oe?oe:this.getHasShape(at)}},t.prototype.enableByType=function(nt){return!0},t.prototype.getDefaultContentList=function(nt){return[this.getDefaultContentPattern(nt)]},t.prototype.getContentList=function(nt,at,lt,Rt,Bt,Lt){var Ht;return function(nt,at,lt,Rt,Bt,Lt){if(Bt&&Bt.length){var Ht=[];return Bt.forEach((function(Bt){X(nt)?nt.forEach((function(nt){xY(Ht,nt,at,lt,Rt,Bt,Lt)})):H(nt)?xY(Ht,nt,at,lt,Rt,Bt,Lt):nt&&bY(Ht,nt,at,lt,Bt,Lt)})),Ht}return null}(null!==(Ht=null==at?void 0:at.content)&&void 0!==Ht?Ht:this.getDefaultContentList(nt),this.getDefaultContentPattern(nt),lt,Rt,Bt,Lt)},t.prototype.getTitleResult=function(nt,at,lt,Rt,Bt){var Lt=H(at)?at(Rt,Bt):at;if(Lt?j(Lt.value)&&(Lt=A(A({},this.getDefaultTitlePattern(nt)),Lt)):Lt=this.getDefaultTitlePattern(nt),Lt&&!1!==Lt.visible){var Ht=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t=(null===(jt=nt[0])||void 0===jt?void 0:jt.series)?[{"data":nt,"value":""}]:nt;try{for(var Kt=C($t),te=Kt.next();!te.done;te=Kt.next()){var ne=te.value.data;try{for(var re=(Rt=void 0,C(ne)),ae=re.next();!ae.done;ae=re.next()){var oe=ae.value.datum;try{for(var se=(Lt=void 0,C(null!=oe?oe:[])),le=se.next();!le.done;le=se.next()){var ue=le.value;if(ue)return ue}}catch(nt){Lt={"error":nt}}finally{try{le&&!le.done&&(Ht=se.return)&&Ht.call(se)}finally{if(Lt)throw Lt.error}}}}catch(nt){Rt={"error":nt}}finally{try{ae&&!ae.done&&(Bt=re.return)&&Bt.call(re)}finally{if(Rt)throw Rt.error}}}}catch(nt){at={"error":nt}}finally{try{te&&!te.done&&(lt=Kt.return)&&lt.call(Kt)}finally{if(at)throw at.error}}}(Rt),jt={"visible":yY(Lt.visible,Ht,Bt),"value":SY(yY(Lt.value,Ht,Bt,Lt.valueFormatter),Lt.valueTimeFormat,Lt.valueTimeFormatMode),"valueStyle":yY(Lt.valueStyle,Ht,Bt),"hasShape":Lt.hasShape};return Object.keys(lt).forEach((function(nt){jt[nt]=yY(lt[nt],Ht,Bt)})),jt}return{"hasShape":!1,"visible":!1}},t.prototype.getTooltipData=function(nt,at,lt,Rt,Bt){var Lt,Ht;if(!(this.enableByType(nt)&&_Y(nt,this.spec)&&("dimension"!==nt||Rt&&Rt.length)))return null;var jt,$t=null!==(Ht=null===(Lt=this.spec)||void 0===Lt?void 0:Lt[nt])&&void 0!==Ht?Ht:null==at?void 0:at[nt],Kt=this.getShapeAttrs(nt,!0,at),te=this.getShapeAttrs(nt,!1,at);return"dimension"===nt?(jt=[],this.getContentList(nt,$t,Kt,lt,Rt,Bt).forEach((function(nt){jt.push(nt)}))):jt=this.getContentList(nt,$t,Kt,lt,Rt,Bt),{"visible":!0,"activeType":nt,"data":lt,"title":this.getTitleResult(nt,null==$t?void 0:$t.title,te,lt,Bt),"content":jt}},t.prototype.getDefaultTitlePattern=function(nt){return{"key":void 0,"value":"group"===nt?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}},t.prototype.getDefaultContentPattern=function(nt){return{"seriesId":this.series.id,"key":"group"===nt?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,"value":this.markTooltipValueCallback}},t}(),HY={"min":function(nt){return nt.length?At(nt.map((function(nt){return 1*nt}))):0},"max":function(nt){return nt.length?St(nt.map((function(nt){return 1*nt}))):0},"array-min":function(nt){return nt.length?At(nt.map((function(nt){return 1*nt}))):0},"array-max":function(nt){return nt.length?St(nt.map((function(nt){return 1*nt}))):0},"values":function(nt){var at,lt,Rt={},Bt=[];try{for(var Lt=C(nt),Ht=Lt.next();!Ht.done;Ht=Lt.next()){var jt=Ht.value;Rt[jt]||(Bt.push(jt),Rt[jt]=1)}}catch(nt){at={"error":nt}}finally{try{Ht&&!Ht.done&&(lt=Lt.return)&&lt.call(Lt)}finally{if(at)throw at.error}}return Bt}},MY=function(nt,at){var lt,Rt,Bt=at.fields;if(H(Bt)&&(Bt=Bt()),!(null==Bt?void 0:Bt.length)||!(null==nt?void 0:nt.length))return{};Bt=sH([],Bt);var Lt="parser"===at.target?"parserData":"latestData",Ht=nt[0][Lt]?nt[0][Lt]:nt||[],jt=null===(Rt=(lt=nt[0]).getFields)||void 0===Rt?void 0:Rt.call(lt);return TY(Ht,Bt,jt)},TY=function(nt,at,lt){var Rt={},Bt=[],Lt=[];return at.forEach((function(at){var Ht=at.key;Rt[Ht]={};var jt=null==lt?void 0:lt[Ht],$t=at.operations,Kt=$t.some((function(nt){return"min"===nt||"max"===nt||"allValid"===nt})),te=!0;Bt.length=0,nt&&nt.forEach((function(nt){nt&&Bt.push(nt[Ht])}));var ne=Bt.length;if(Kt){Lt.length=0,Bt.forEach((function(nt,at){Vk(nt)&&Lt.push(nt)}));var re=Bt;Bt=Lt,Lt=re,te=Bt.length===ne}else Bt=$t.some((function(nt){return"array-min"===nt||"array-max"===nt}))?Bt.reduce((function(nt,at){return at&&at.forEach((function(at){Vk(at)&&nt.push(at)})),nt}),[]):Bt.filter((function(nt){return void 0!==nt}));at.filter&&(Bt=Bt.filter(at.filter)),$t.forEach((function(nt){if(at.customize)Rt[Ht][nt]=at.customize;else{if(jt&&jt.lockStatisticsByDomain&&!j(jt.domain)){if("values"===nt)return void(Rt[Ht][nt]=jt.domain.slice())}else if("allValid"===nt)return;Rt[Ht][nt]=HY[nt](Bt),"array-max"===nt&&(Rt[Ht].max=Rt[Ht][nt]),"array-min"===nt&&(Rt[Ht].min=Rt[Ht][nt])}})),Kt&&(Rt[Ht].allValid=te)})),Rt},CY=function(nt,at){var lt=at.config;if(!lt)return nt;var Rt=lt(),Bt=Rt.invalidType,Lt=Rt.checkField;return"zero"!==Bt||Lt&&Lt.length&&nt.forEach((function(nt){Lt.forEach((function(at){Vk(nt[at])||(nt[at]=0)}))})),nt},jY=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._compileProduct=function(){var nt,at=null===(nt=this._data)||void 0===nt?void 0:nt.latestData;j(at)||N(this.getProduct())||this._initProduct([])},e.prototype.generateProductId=function(){var nt;return null===(nt=this._data)||void 0===nt?void 0:nt.name},e}(oY),NY="".concat(OF,"_HIERARCHY_DEPTH"),VY="".concat(OF,"_HIERARCHY_ROOT"),WY="".concat(OF,"_HIERARCHY_ROOT_INDEX");function IY(){return{"keyMap":new Map,"needDefaultSeriesField":!this._seriesField,"defaultSeriesField":this._seriesField?null:this.getSeriesKeys()[0],"getKey":this.generateDefaultDataKey(this._spec.dataKey)}}function LY(nt,at,lt){nt&&(lt.needDefaultSeriesField&&(nt[qz]=lt.defaultSeriesField),nt[Xz]=at,nt[$z]=lt.getKey(nt,at,lt))}function DY(){return{"keyMap":new Map,"needDefaultSeriesField":!0,"defaultSeriesField":this.getSeriesKeys()[0],"getKey":this.generateDefaultDataKey(this._spec.dataKey),"categoryField":this.getCategoryField()}}function OY(nt,at,lt,Rt,Bt,Lt){void 0===Rt&&(Rt=0),void 0===Lt&&(Lt=at),LY(nt,at,lt),nt[NY]=Rt,nt[VY]=Bt||nt[lt.categoryField],nt[WY]=Lt,nt.children&&nt.children.length&&nt.children.forEach((function(at,Rt){return OY(at,Rt,lt,nt[NY]+1,nt[VY],Lt)}))}var GY=((FY={}).label={"name":"label","type":"text"},FY),YY="".concat(OF,"_rect_x"),XY="".concat(OF,"_rect_x1"),KY="".concat(OF,"_rect_y"),nX="".concat(OF,"_rect_y1"),dX={"data":!0},pX={"invalidType":!0,"animation":!0,"animationAppear":!0,"animationEnter":!0,"animationUpdate":!0,"animationExit":!0,"animationNormal":!0},gX={"type":"fadeIn"};function UY(nt,at){switch(at){case"grow":return function(nt){return{"type":"horizontal"===nt.direction?"growPointsXIn":"growPointsYIn","options":{"orient":"horizontal"===nt.direction?"positive":"negative"}}}(nt);case"fadeIn":return gX;default:return function(nt){return{"type":"clipIn","options":{"clipDimension":"horizontal"===nt.direction?"y":"x"}}}(nt)}}var yX={"appear":{"duration":1e3,"easing":"cubicOut"},"update":{"type":"update","duration":300,"easing":"linear"},"enter":{"duration":300,"easing":"linear"},"exit":{"duration":300,"easing":"linear"},"disappear":{"duration":500,"easing":"cubicIn"},"state":{"duration":300,"easing":"linear"}},mX={"appear":{"type":"scaleIn"},"enter":{"type":"scaleIn"},"exit":{"type":"scaleOut"},"disappear":{"type":"scaleOut"}},_X={"appear":{"type":"fadeIn"},"enter":{"type":"fadeIn"},"exit":{"type":"fadeOut"},"disappear":{"type":"fadeOut"}},qY=function(){Tz.registerAnimation("scaleInOut",(function(){return mX}))},ZY=function(){Tz.registerAnimation("fadeInOut",(function(){return _X}))},JY=function(nt,at){return{"appear":UY(nt,at),"enter":{"type":"fadeIn"},"exit":{"type":"fadeOut"},"update":[{"type":"update","options":{"excludeChannels":["points","defined","segments"]}},{"channel":["points","segments"],"custom":_d,"duration":yX.update.duration,"easing":yX.update.easing,"customParameters":{"clipRangeByDimension":"horizontal"===nt.direction?"y":"x"}}],"disappear":{"type":"clipOut"}}},QY=function(){Tz.registerAnimation("line",JY)},$Y=function(){cV.useRegisters([wG,MG,TG,CG,SG,AG])},tX=function(){cV.useRegisters([FG,zG,DG,OG])},eX=function(){cV.useRegisters([EG,PG,RG,BG,IG,LG,_G,bG])},iX=function(){cV.useRegisters([EG,PG])},bX=P(P([],E(Object.keys(yX)),!1),["normal"],!1);function rX(nt,at,lt){void 0===nt&&(nt={});for(var Rt={},r=function(Bt){var Lt,Ht=bX[Bt],jt=at?at[Ht]:void 0;if(!1===jt)return"continue";if("normal"===Ht)return jt&&(Rt.normal=jt),"continue";if("state"===Ht)return!1!==jt&&(Rt.state=null!=jt?jt:yX.state),"continue";if("update"!==Ht&&!jt&&!nt[Ht])return"continue";if(Lt=X(nt[Ht])?nt[Ht]:[A(A({},yX[Ht]),nt[Ht])],"exit"===Ht&&Lt.forEach((function(nt){nt.controlOptions={"stopWhenStateChange":!0}})),!jt)return Rt[Ht]=Lt,"continue";var $t=void 0;$t=X(jt)?jt.map((function(nt,at){var Rt,Bt=nt;return uX(Bt)&&delete Bt.type,Bt.oneByOne&&(Bt=oX(Bt,null!==(Rt=null==lt?void 0:lt.dataIndex)&&void 0!==Rt?Rt:sX,null==lt?void 0:lt.dataCount)),Bt})):Lt.map((function(nt,at){var Rt,Bt=gz({},Lt[at],jt);return uX(Bt)&&delete Bt.type,Bt.oneByOne&&(Bt=oX(Bt,null!==(Rt=null==lt?void 0:lt.dataIndex)&&void 0!==Rt?Rt:sX,null==lt?void 0:lt.dataCount)),Bt})),Rt[Ht]=$t},Bt=0;Bt<bX.length;Bt++)r(Bt);return Rt}function aX(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt={};return N(at.animationAppear)&&(Kt.appear=null!==(Rt=at.animationAppear[nt])&&void 0!==Rt?Rt:at.animationAppear),N(at.animationDisappear)&&(Kt.disappear=null!==(Bt=at.animationDisappear[nt])&&void 0!==Bt?Bt:at.animationDisappear),N(at.animationEnter)&&(Kt.enter=null!==(Lt=at.animationEnter[nt])&&void 0!==Lt?Lt:at.animationEnter),N(at.animationExit)&&(Kt.exit=null!==(Ht=at.animationExit[nt])&&void 0!==Ht?Ht:at.animationExit),N(at.animationUpdate)&&(Kt.update=null!==(jt=at.animationUpdate[nt])&&void 0!==jt?jt:at.animationUpdate),N(at.animationState)&&(Kt.state=null!==($t=at.animationState[nt])&&void 0!==$t?$t:at.animationState),at.animationNormal&&at.animationNormal[nt]&&(Kt.normal=at.animationNormal[nt]),function(nt,at){if(!nt)return nt;var lt=["custom","customParameters"];return cX(nt=ct(nt,null,lt),(function(nt){var lt;if(H(nt)&&(null===(lt=nt.prototype)||void 0===lt?void 0:lt.constructor)!==nt){var n=function(){for(var lt=[],Rt=0;Rt<arguments.length;Rt++)lt[Rt]=arguments[Rt];return nt.apply(void 0,P(P([],E(lt),!1),[at],!1))};return n}return nt}),lt),nt}(Kt,lt)}function oX(nt,at,lt){var Rt=nt.oneByOne,Bt=nt.duration,Lt=nt.delay,Ht=nt.delayAfter;return nt.delay=function(nt,lt,Ht){var jt=at(nt,Ht),$t=H(Bt)?Bt(nt,lt,Ht):Q(Bt)?Bt:0,Kt=H(Lt)?Lt(nt,lt,Ht):Q(Lt)?Lt:0,te=H(Rt)?Rt(nt,lt,Ht):Rt;return!1===te?Kt:Kt+jt*($t+(te=!0===te?0:te))},nt.delayAfter=function(nt,Lt,jt){var $t=at(nt,jt),Kt=H(Bt)?Bt(nt,Lt,jt):Q(Bt)?Bt:0,te=H(Ht)?Ht(nt,Lt,jt):Q(Ht)?Ht:0,ne=H(Rt)?Rt(nt,Lt,jt):Rt;return!1===ne?te:te+((lt?lt():Lt.mark.elements.length)-$t)*(Kt+(ne=!0===ne?0:ne))},delete nt.oneByOne,nt}function sX(nt,at){var lt,Rt;return null!==(lt=null==nt?void 0:nt[Xz])&&void 0!==lt?lt:null===(Rt=null==at?void 0:at.VGRAMMAR_ANIMATION_PARAMETERS)||void 0===Rt?void 0:Rt.elementIndex}function lX(nt,at){var lt,Rt,Bt,Lt,Ht;if(!1===nt.animation)return!1;if(!1===(null===(lt=nt.morph)||void 0===lt?void 0:lt.enable))return!1;var jt=!1!==(null!==(Bt=null===(Rt=nt.animationAppear)||void 0===Rt?void 0:Rt[at])&&void 0!==Bt?Bt:nt.animationAppear),$t=!1!==(null!==(Ht=null===(Lt=nt.animationUpdate)||void 0===Lt?void 0:Lt[at])&&void 0!==Ht?Ht:nt.animationUpdate);return!(!jt||!$t)}function uX(nt){return!function(nt){return N(nt.timeSlices)}(nt)&&N(nt.channel)}function cX(nt,at,lt){if(void 0===lt&&(lt=[]),X(nt))nt.forEach((function(Rt,Bt){nt[Bt]=at(nt[Bt],Bt),cX(nt[Bt],at,lt)}));else if(V(nt))for(var Rt in nt)lt.includes(Rt)||(nt[Rt]=at(nt[Rt],Rt),cX(nt[Rt],at,lt))}function hX(nt){var at,lt,Rt,Bt,Lt=nt.getSpec();if(!1===Lt.animation)return!1;if(!N(nt.getRegion().animate))return!1;var Ht=null!==(at=Lt.animationThreshold)&&void 0!==at?at:Number.MAX_SAFE_INTEGER;return null===(lt=nt.getMarks())||void 0===lt||lt.forEach((function(nt){var at=nt.getMarkConfig();at&&(at.large&&at.largeThreshold&&(Ht=Math.min(Ht,at.largeThreshold)),at.progressiveThreshold&&(Ht=Math.min(Ht,at.progressiveThreshold)))})),!((null===(Bt=null===(Rt=nt.getRawData())||void 0===Rt?void 0:Rt.latestData)||void 0===Bt?void 0:Bt.length)>=Ht)}var xX=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.markLabelSpec={},at}return S(e,nt),e.prototype.getLabelSpec=function(nt){return this.markLabelSpec[nt]},e.prototype.setLabelSpec=function(nt,at){this.markLabelSpec[nt]=xt(at)},e.prototype.addLabelSpec=function(nt,at,lt){void 0===lt&&(lt=!1),this.markLabelSpec[nt]||(this.markLabelSpec[nt]=[]),lt?this.markLabelSpec[nt].unshift(at):this.markLabelSpec[nt].push(at)},e.prototype.getTheme=function(nt,at){var lt,Rt,Bt,Lt=qO(nt),Ht=null===(lt=this._option)||void 0===lt?void 0:lt.getTheme(),jt=Ht.markByName,$t=Ht.mark,Kt=this._option.type,te=Tz.getSeriesMarkMap(Kt)?function(nt,at,lt,Rt){var Bt=Tz.getSeriesMarkMap(at);if(!Bt)return nt;var Lt={};return Object.values(Bt).forEach((function(at){var Bt=at.type,Ht=at.name;Lt[Ht]=gz({},null==lt?void 0:lt[xt(Bt)[0]],null==Rt?void 0:Rt[Ht],null==nt?void 0:nt[Ht])})),A(A({},nt),Lt)}(st(Ht,"series.".concat(Kt)),Kt,$t,jt):{},ne=st(Ht,"series.".concat(Kt,"_").concat(Lt));return gz({},te,ne,(null!==(Bt=null!==(Rt=this.stack)&&void 0!==Rt?Rt:null==ne?void 0:ne.stack)&&void 0!==Bt?Bt:null==te?void 0:te.stack)?st(Ht,"series.".concat(Kt,"_stack")):void 0)},e.prototype.transformSpec=function(at,lt,Rt){this._transformStack(at);var Bt=nt.prototype.transformSpec.call(this,at,lt,Rt);return this._transformLabelSpec(Bt.spec),A(A({},Bt),{"markLabelSpec":this.markLabelSpec,"stack":this.stack})},e.prototype._transformLabelSpec=function(nt){},e.prototype._transformStack=function(nt){z(nt.stack)&&(this.stack=nt.stack),z(nt.percent)&&(this.stack=nt.percent||this.stack),j(this.stack)&&this._supportStack&&nt.seriesField&&(this.stack=!0)},e.prototype._addMarkLabelSpec=function(nt,at,lt,Rt,Bt,Lt){var Ht=this;void 0===lt&&(lt="label"),void 0===Rt&&(Rt="initLabelMarkStyle"),void 0===Bt&&(Bt=!0),nt&&xt(nt[lt]).forEach((function(lt){var jt,$t,Kt;if(lt&&lt.visible){var te=lt.animation,ne=void 0===te||te,re=lt.animationUpdate,ae=void 0===re||re,oe=lt.animationEnter,se=void 0===oe||oe,le=lt.animationExit,ue=void 0===le||le,ce=nt,he=ce.animationUpdate,de=void 0===he||he,fe=ce.animationEnter,pe=void 0===fe||fe,ve=ce.animationExit,Ae=void 0===ve||ve,we=!!(null!==(Kt=null!==($t=null===(jt=Ht._option)||void 0===jt?void 0:jt.animation)&&void 0!==$t?$t:nt.animation)&&void 0!==Kt?Kt:lt.animation)&&!!Bt;Ht.addLabelSpec(H(at)?at(lt):at,A(A({},lt),{"animation":!!we&&ne,"animationUpdate":!!(we&&de&&ae)&&de,"animationEnter":!!(we&&pe&&se)&&pe,"animationExit":!!(we&&pe&&ue)&&Ae,"getStyleHandler":function(nt){var at;return null===(at=nt[Rt])||void 0===at?void 0:at.bind(nt)}}),Lt)}}))},e.prototype._getDefaultSpecFromChart=function(at){var lt,Rt=null!==(lt=nt.prototype._getDefaultSpecFromChart.call(this,at))&&void 0!==lt?lt:{},Bt=at.outerRadius,Lt=at.innerRadius,Ht=at.direction;return N(Bt)&&(Rt.outerRadius=Bt),N(Lt)&&(Rt.innerRadius=Lt),N(Ht)&&(Rt.direction=Ht),Object.keys(Rt).length>0?Rt:void 0},e.prototype._mergeThemeToSpec=function(nt,at){var lt=this._theme;if(this._shouldMergeThemeToSpec()){var Rt=this._getDefaultSpecFromChart(at),r=function(nt){var at=gz({},lt,Rt,nt),Bt=lt.label;return Bt&&V(Bt)&&X(at.label)&&(at.label=at.label.map((function(nt){return gz({},Bt,nt)}))),at};return X(nt)?{"spec":nt.map((function(nt){return r(nt)})),"theme":lt}:{"spec":r(nt),"theme":lt}}return{"spec":nt,"theme":lt}},e}(GU),kX=function(at){function i(nt,lt){var Rt,Bt=this;return(Bt=at.call(this,nt,lt)||this).specKey="series",Bt.type="series",Bt.layoutType="absolute",Bt.modelType="series",Bt.name=void 0,Bt.transformerConstructor=xX,Bt.coordinate="none",Bt._region=null,Bt._layoutStartPoint={"x":0,"y":0},Bt._layoutRect={"width":null,"height":null},Bt.getLayoutRect=function(){var nt,at;return{"width":null!==(nt=Bt._layoutRect.width)&&void 0!==nt?nt:Bt._region.getLayoutRect().width,"height":null!==(at=Bt._layoutRect.height)&&void 0!==at?at:Bt._region.getLayoutRect().height}},Bt._rootMark=null,Bt._seriesMark=null,Bt._viewDataMap=new Map,Bt._viewDataFilter=null,Bt._data=null,Bt.layoutZIndex=MU.SeriesGroup,Bt._invalidType="break",Bt._region=lt.region,Bt._dataSet=lt.dataSet,(null===(Rt=Bt._spec)||void 0===Rt?void 0:Rt.name)&&(Bt.name=Bt._spec.name),Bt}return S(i,at),i.prototype.getRegion=function(){return this._region},i.prototype.getLayoutStartPoint=function(){return this._region.getLayoutStartPoint()},i.prototype.getRootMark=function(){return this._rootMark},i.prototype.getSeriesMark=function(){return this._seriesMark},i.prototype.getRawData=function(){return this._rawData},i.prototype.getViewDataFilter=function(){return this._viewDataFilter},i.prototype.getViewData=function(){var nt;return null===(nt=this._data)||void 0===nt?void 0:nt.getDataView()},i.prototype.getViewDataProductId=function(){var nt;return null===(nt=this._data)||void 0===nt?void 0:nt.getProductId()},i.prototype.getViewDataStatistics=function(){return this._viewDataStatistics},i.prototype.getViewStackData=function(){return this._viewStackData},i.prototype.getSeriesField=function(){return this._seriesField},i.prototype.setSeriesField=function(nt){N(nt)&&(this._seriesField=nt)},i.prototype.getGroups=function(){return this._groups},i.prototype.getStack=function(){var nt;return null===(nt=this.getSpecInfo())||void 0===nt?void 0:nt.stack},i.prototype.getStackValue=function(){var nt;return null!==(nt=this._spec.stackValue)&&void 0!==nt?nt:"".concat(OF,"_series_").concat(this.type)},i.prototype.getPercent=function(){return this._spec.percent},i.prototype.getStackOffsetSilhouette=function(){return this._spec.stackOffsetSilhouette},Object.defineProperty(i.prototype,"tooltipHelper",{"get":function(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper},"enumerable":!1,"configurable":!0}),i.prototype.getInvalidType=function(){return this._invalidType},i.prototype.setInvalidType=function(nt){var at;this._invalidType=nt,null===(at=this.getViewData())||void 0===at||at.reRunAllTransform()},i.prototype.getMarkAttributeContext=function(){return this._markAttributeContext},i.prototype.created=function(){at.prototype.created.call(this),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(jW.afterInitData,{"model":this}),this.initRootMark(),this.initMark();var nt=hX(this);this._initExtensionMark({"hasAnimation":nt}),this.initMarkStyle(),this.initMarkState(),nt&&this.initAnimation(),this._option.disableTriggerEvent||this.initInteraction(),this.afterInitMark(),this.initEvent(),this.event.emit(jW.afterInitEvent,{"model":this})},i.prototype._buildMarkAttributeContext=function(){var nt=this;this._markAttributeContext={"vchart":this._option.globalInstance,"globalScale":function(at,lt){var Rt;return null===(Rt=nt._option.globalScale.getScale(at))||void 0===Rt?void 0:Rt.scale(lt)},"seriesColor":function(at){var lt;return j(at)&&(at=nt.getSeriesKeys()[0]),null===(lt=nt._option.globalScale.getScale("color"))||void 0===lt?void 0:lt.scale(at)},"getRegion":function(){return nt._region}}},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.setSeriesField(this._spec.seriesField),N(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)},i.prototype.getInvalidCheckFields=function(){return[this.getStackValueField()]},i.prototype.initInvalidDataTransform=function(){var nt,at,lt=this;"zero"===this._invalidType&&(null===(nt=this._rawData)||void 0===nt?void 0:nt.dataSet)&&(GW(this._rawData.dataSet,"invalidTravel",CY),null===(at=this._rawData)||void 0===at||at.transform({"type":"invalidTravel","options":{"config":function(){return{"invalidType":lt._invalidType,"checkField":lt.getInvalidCheckFields()}}}},!1))},i.prototype.initData=function(){var nt,at,lt,Rt=null!==(nt=this._spec.data)&&void 0!==nt?nt:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(Rt&&(this._rawData=iU(Rt,this._dataSet,this._option.sourceDataList)),null===(lt=null===(at=this._rawData)||void 0===at?void 0:at.target)||void 0===lt||lt.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=eU(this._rawData,this._dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_viewDataFilter")}));var Bt=eU(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_viewData")});this._data=new jY(this._option,Bt),this.getStack()&&this._viewDataFilter.target.removeListener("change",Bt.reRunAllTransform)}this.initInvalidDataTransform()},i.prototype.initGroups=function(){var nt=this.getGroupFields();nt&&nt.length&&(this._groups={"fields":nt})},i.prototype.initStatisticalData=function(){this._data&&this._statisticViewData()},i.prototype.getRawDataStatisticsByField=function(nt,at){var lt,Rt,Bt;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[nt]||at&&(j(this._rawStatisticsCache[nt].min)||j(this._rawStatisticsCache[nt].max))||!at&&j(this._rawStatisticsCache[nt].values))if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null===(lt=this._viewDataStatistics.latestData)||void 0===lt?void 0:lt[nt]))this._rawStatisticsCache[nt]=this._viewDataStatistics.latestData[nt];else if(this._rawData){var Lt=null===(Rt=this._rawData.getFields())||void 0===Rt?void 0:Rt[nt];if(Lt&&Lt.lockStatisticsByDomain&&Lt.domain)this._rawStatisticsCache[nt]={},at?(this._rawStatisticsCache[nt].min=At(Lt.domain),this._rawStatisticsCache[nt].max=St(Lt.domain)):this._rawStatisticsCache[nt].values=Lt.domain;else{var Ht=TY(this._rawData.latestData,[{"key":nt,"operations":at?["min","max"]:["values"]}])[nt];this._rawStatisticsCache[nt]=ft(null!==(Bt=this._rawStatisticsCache[nt])&&void 0!==Bt?Bt:{},Ht)}}return this._rawStatisticsCache[nt]},i.prototype._statisticViewData=function(){var nt=this;GW(this._dataSet,"dimensionStatistics",MY);var at="".concat(this.type,"_").concat(this.id,"_viewDataStatic");this._viewDataStatistics=new Es(this._dataSet,{"name":at}),this._viewDataStatistics.parse([this._data.getDataView()],{"type":"dataview"}),this._viewDataStatistics.transform({"type":"dimensionStatistics","options":{"fields":function(){var at=nt.getStatisticFields();return nt._seriesField&&sH(at,[{"key":nt._seriesField,"operations":["values"]}]),at},"target":"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()},i.prototype.createStatisticalData=function(nt,at,lt){var Rt=this;GW(this._dataSet,"dimensionStatistics",MY);var Bt=new Es(this._dataSet,{"name":nt});return Bt.parse([at],{"type":"dataview"}),Bt.transform({"type":"dimensionStatistics","options":{"operations":["max","min","values"],"fields":function(){var nt,Bt=sH(Rt.getStatisticFields(),null!==(nt=null==lt?void 0:lt(at.name))&&void 0!==nt?nt:[]);return Rt._seriesField&&sH(Bt,[{"key":Rt._seriesField,"operations":["values"]}]),Bt},"target":"latest"}},!1),Bt},i.prototype.createdStackData=function(){var nt="".concat(this.type,"_").concat(this.id,"_viewStackData");this._viewStackData=new Es(this._dataSet,{"name":nt}),this._viewStackData.parse([this._viewDataFilter],{"type":"dataview"}),this._viewStackData.transform({"type":"stackSplit","options":{"fields":this.getStackGroupFields()}},!1)},i.prototype._noAnimationDataKey=function(nt,at){return at},i.prototype.generateDefaultDataKey=function(nt){var at,lt=this;return j(nt)?function(nt,at,Rt){if(!1===lt._spec.animation){var Bt=lt._noAnimationDataKey(nt,at);if(void 0!==Bt)return Bt}var Lt=Rt.keyMap,Ht=lt._getSeriesDataKey(nt);return void 0===Lt.get(Ht)?(Lt.set(Ht,0),Ht):(Lt.set(Ht,Lt.get(Ht)+1),"".concat(Ht,"_").concat(Lt.get(Ht)))}:Y(nt)?function(at){return at[nt]}:X(nt)&&nt.every((function(nt){return Y(nt)}))?function(at){return nt.map((function(nt){return at[nt]})).join("-")}:H(nt)?function(at,lt){return nt(at,lt)}:(null===(at=this._option)||void 0===at||at.onError("invalid dataKey: ".concat(nt)),function(nt,at){})},i.prototype._addDataIndexAndKey=function(){var nt;(null===(nt=this._rawData)||void 0===nt?void 0:nt.dataSet)&&(GW(this._rawData.dataSet,"addVChartProperty",pY),this._rawData.transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1))},i.prototype.updateRawData=function(nt){this._rawData&&this._rawData.updateRawData(nt)},i.prototype.rawDataUpdate=function(nt){var at;null===(at=this._rawDataStatistics)||void 0===at||at.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(jW.rawDataUpdate,{"model":this})},i.prototype.viewDataFilterOver=function(nt){this.event.emit(jW.viewDataFilterOver,{"model":this})},i.prototype.viewDataUpdate=function(nt){var at;this.event.emit(jW.viewDataUpdate,{"model":this}),null===(at=this._data)||void 0===at||at.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()},i.prototype.viewDataStatisticsUpdate=function(nt){this.event.emit(jW.viewDataStatisticsUpdate,{"model":this})},i.prototype.getDatumPositionValue=function(nt,at){return!nt||j(at)?null:nt[at]},i.prototype.getDatumPositionValues=function(nt,at){return!nt||j(at)?[]:Y(at)?[nt[at]]:at.map((function(at){return nt[at]}))},i.prototype.setValueFieldToStack=function(){},i.prototype.setValueFieldToPercent=function(){},i.prototype.setValueFieldToStackOffsetSilhouette=function(){},i.prototype.initRootMark=function(){var nt,at,lt;this._rootMark=this._createMark({"type":"group","name":"seriesGroup_".concat(this.type,"_").concat(this.id)},{"parent":null===(at=(nt=this._region).getGroupMark)||void 0===at?void 0:at.call(nt),"dataView":!1}),this._rootMark.setMarkConfig({"zIndex":null!==(lt=this._spec.zIndex)&&void 0!==lt?lt:this.layoutZIndex})},i.prototype._getExtensionMarkNamePrefix=function(){return"".concat(this.type,"_").concat(this.id,"_extensionMark")},i.prototype._initExtensionMark=function(nt){var at,lt=this;if(this._spec.extensionMark){var Rt=this.getMarksWithoutRoot();nt.depend=Rt,null===(at=this._spec.extensionMark)||void 0===at||at.forEach((function(at,Rt){lt._createExtensionMark(at,null,lt._getExtensionMarkNamePrefix(),Rt,nt)}))}},i.prototype._createExtensionMark=function(nt,at,lt,Rt,Bt){var Lt,Ht=this,jt=this._createMark({"type":nt.type,"name":N(nt.name)?"".concat(nt.name):"".concat(lt,"_").concat(Rt)},{"skipBeforeLayouted":!0,"markSpec":nt,"parent":at,"dataView":!1,"componentType":nt.componentType,"depend":Bt.depend,"key":nt.dataKey},{"setCustomizedShape":null==nt?void 0:nt.customShape});if(jt){if(N(nt.id)&&jt.setUserId(nt.id),Bt.hasAnimation){var $t=rX({},aX(nt.type,nt,this._markAttributeContext));jt.setAnimationConfig($t)}if("group"===nt.type)lt="".concat(lt,"_").concat(Rt),null===(Lt=nt.children)||void 0===Lt||Lt.forEach((function(nt,at){Ht._createExtensionMark(nt,jt,lt,at,Bt)}));else if(!(at||j(nt.dataId)&&j(nt.dataIndex))){var Kt=this._option.getSeriesData(nt.dataId,nt.dataIndex);Kt===this._rawData?jt.setDataView(this.getViewData(),this.getViewDataProductId()):(jt.setDataView(Kt),Kt.target.addListener("change",(function(){jt.getData().updateData()})))}}},i.prototype._updateExtensionMarkSpec=function(){var nt,at=this;null===(nt=this._spec.extensionMark)||void 0===nt||nt.forEach((function(nt,lt){var Rt=at._marks.getMarkWithInfo({"name":N(nt.name)?"".concat(nt.name):"".concat(at._getExtensionMarkNamePrefix(),"_").concat(lt)});Rt&&(at.initMarkStyleWithSpec(Rt,nt),Rt.updateStaticEncode(),Rt.updateLayoutState())}))},i.prototype.getStackData=function(){var nt;return null===(nt=this._viewStackData)||void 0===nt?void 0:nt.latestData},i.prototype._parseSelectorOfInteraction=function(nt,at){if(!at||!at.length)return[];var lt=[];return nt.markIds?at.filter((function(at){nt.markIds.includes(at.getProductId())&&lt.push("#".concat(at.getProductId()))})):nt.markNames?at.forEach((function(at){nt.markNames.includes(at.name)&&lt.push("#".concat(at.getProductId()))})):at.forEach((function(nt){lt.push("#".concat(nt.getProductId()))})),lt},i.prototype._parseDefaultInteractionConfig=function(at){if(!(null==at?void 0:at.length))return[];var lt,Rt=(lt=this._option.mode)===nt.RenderModeEnum["desktop-browser"]||lt===nt.RenderModeEnum["desktop-miniApp"]?{"hover":{"enable":!0,"trigger":"pointermove","triggerOff":"view:pointerleave"},"select":{"enable":!0,"trigger":"pointertap"}}:zk(lt)||Hk(lt)?{"hover":{"enable":!0,"trigger":["pointerdown","pointermove"],"triggerOff":"view:pointerleave"},"select":{"enable":!0,"trigger":"tap"}}:null,Bt=A({},null==Rt?void 0:Rt.hover),Lt=A({},null==Rt?void 0:Rt.select),Ht=this._spec.hover;z(Ht)?Bt.enable=Ht:V(Ht)&&(Bt.enable=!0,Bt=gz(Bt,Ht));var jt=this._spec.select;z(jt)?Lt.enable=jt:V(jt)&&(Lt.enable=!0,Lt=gz(Lt,jt));var $t,Kt=[];return Bt.enable&&($t=this._parseSelectorOfInteraction(Bt,at)).length&&Kt.push(this._defaultHoverConfig($t,Bt)),Lt.enable&&($t=this._parseSelectorOfInteraction(Lt,at)).length&&Kt.push(this._defaultSelectConfig($t,Lt)),Kt},i.prototype._defaultHoverConfig=function(nt,at){return{"seriesId":this.id,"regionId":this._region.id,"selector":nt,"type":"element-highlight","trigger":at.trigger,"triggerOff":at.triggerOff,"blurState":mU.STATE_HOVER_REVERSE,"highlightState":mU.STATE_HOVER}},i.prototype._defaultSelectConfig=function(nt,at){var lt="multiple"===at.mode,Rt=N(at.triggerOff)?at.triggerOff:lt?["empty"]:["empty",at.trigger];return{"type":"element-select","seriesId":this.id,"regionId":this._region.id,"selector":nt,"trigger":at.trigger,"triggerOff":Rt,"reverseState":mU.STATE_SELECTED_REVERSE,"state":mU.STATE_SELECTED,"isMultiple":lt}},i.prototype._parseInteractionConfig=function(nt){var at=this,lt=this.getCompiler();if(lt){var Rt=this._spec.interactions,Bt=this._parseDefaultInteractionConfig(nt);Bt&&Bt.length&&Bt.forEach((function(nt){lt.addInteraction(nt)})),Rt&&Rt.length&&Rt.forEach((function(nt){var Rt=at._parseSelectorOfInteraction(nt,at.getMarks());Rt.length&&lt.addInteraction(A(A({},nt),{"selector":Rt,"seriesId":at.id,"regionId":at._region.id}))}))}},i.prototype.initInteraction=function(){var nt=this.getMarksWithoutRoot();this._parseInteractionConfig(nt)},i.prototype.initAnimation=function(){},i.prototype.initMarkState=function(){this.initSeriesStyleState()},i.prototype.initSeriesStyleState=function(){var nt,at=this,lt=this._spec.seriesStyle;if(lt&&lt.length){var Rt=null!==(nt=this._seriesField)&&void 0!==nt?nt:qz;this.getMarksWithoutRoot().forEach((function(nt){var Bt={},Lt={},Ht={};lt.forEach((function(at){var lt,Rt=null===(lt=at[nt.name])||void 0===lt?void 0:lt.style;Rt&&(Bt[at.name]=!0,Ht[at.name]=Ht[at.name]||{},Object.keys(Rt).forEach((function(nt){Lt[nt]=!0,Ht[at.name][nt]=Rt[nt]})))})),nt.state.addStateInfo({"stateValue":Kz,"level":-1,"filter":function(nt){return Array.isArray(nt)?0!==nt.length&&!0===Bt[nt[0][Rt]]:!0===Bt[nt[Rt]]}});var jt={};Object.keys(Lt).forEach((function(at){jt[at]=function(lt){var Bt,Lt,jt;if(Array.isArray(lt)){if(0===lt.length)return;jt=null===(Bt=Ht[lt[0][Rt]])||void 0===Bt?void 0:Bt[at]}return jt=null===(Lt=Ht[lt[Rt]])||void 0===Lt?void 0:Lt[at],N(jt)?jt:nt.getAttribute(at,lt)}})),at.setMarkStyle(nt,jt,Kz,EU.User_SeriesStyle)}))}},i.prototype.afterInitMark=function(){var nt=this;this.event.emit(jW.afterInitMark,{"model":this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach((function(at){var lt,Rt;(null===(Rt=null===(lt=at.stateStyle)||void 0===lt?void 0:lt.normal)||void 0===Rt?void 0:Rt.lineWidth)&&at.setAttribute("stroke",nt.getColorAttribute(),"normal",EU.Base_Series)}))},i.prototype.getMarksWithoutRoot=function(){return this.getMarks().filter((function(nt){var at;return!(null===(at=nt.name)||void 0===at?void 0:at.includes("seriesGroup"))}))},i.prototype.getMarksInType=function(nt){return this._marks.getMarksInType(nt)},i.prototype.getMarkInName=function(nt){return this._marks.get(nt)},i.prototype.getMarkInId=function(nt){return this.getMarks().find((function(at){return at.id===nt}))},i.prototype.initEvent=function(){var nt,at,lt;null===(at=null===(nt=this._data)||void 0===nt?void 0:nt.getDataView())||void 0===at||at.target.addListener("change",this.viewDataUpdate.bind(this)),null===(lt=this._viewDataStatistics)||void 0===lt||lt.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))},i.prototype._releaseEvent=function(){at.prototype._releaseEvent.call(this),this.getCompiler().removeInteraction(this.id)},i.prototype.initTooltip=function(){this._tooltipHelper=new zY(this)},i.prototype._compareExtensionMarksSpec=function(nt,at,lt){nt.length!==at.length||at.some((function(at,lt){return at.type!==nt[lt].type||at.id!==nt[lt].id||at.name!==nt[lt].name}))?lt.reMake=!0:at.some((function(at,lt){return at.visible!==nt[lt].visible}))&&(lt.reCompile=!0)},i.prototype._compareLabelSpec=function(nt,at,lt){nt.length!==at.length||at.some((function(at,lt){return at.labelLayout!==nt[lt].labelLayout||at.visible!==nt[lt].visible}))?lt.reMake=!0:!lt.reCompile&&at.some((function(at,lt){return!mt(at,nt[lt])}))&&(lt.reCompile=!0)},i.prototype._compareSpec=function(nt,lt,Rt){var Bt=at.prototype._compareSpec.call(this,nt,lt),Lt=Object.keys(lt||{}).sort();if(!mt(Lt,Object.keys(nt||{}).sort()))return Bt.reMake=!0,Bt;var Ht=A(A(A(A({},dX),pX),Rt),{"extensionMark":!0,"label":!0,"totalLabel":!0});return this._compareExtensionMarksSpec(xt(nt.extensionMark),xt(lt.extensionMark),Bt),!Bt.reMake&&this._compareLabelSpec(xt(nt.label),xt(lt.label),Bt),!Bt.reMake&&this._compareLabelSpec(xt(nt.totalLabel),xt(lt.totalLabel),Bt),Bt.reMake?Bt:(!Bt.reCompile&&this._marks.getMarks().some((function(at){var Rt,Bt;return Ht[at.name]=!0,(null===(Rt=lt[at.name])||void 0===Rt?void 0:Rt.visible)!==(null===(Bt=nt[at.name])||void 0===Bt?void 0:Bt.visible)}))&&(Bt.reCompile=!0),!Bt.reCompile&&Lt.some((function(at){return pX[at]&&!mt(nt[at],lt[at])}))&&(Bt.reCompile=!0),Lt.some((function(at){return!Ht[at]&&!mt(nt[at],lt[at])}))?(Bt.reMake=!0,Bt):Bt)},i.prototype._updateSpecData=function(){!this._rawData||!this._spec.data||this._spec.data instanceof Es||nU(this._rawData,this._spec.data,!0)},i.prototype.reInit=function(nt){var lt=this;at.prototype.reInit.call(this,nt);var Rt=this.getMarksWithoutRoot();Rt.forEach((function(nt){lt._spec[nt.name]&&lt.initMarkStyleWithSpec(nt,lt._spec[nt.name])})),this.initMarkStyle(),Rt.forEach((function(nt){nt.updateStaticEncode(),nt.updateLayoutState(!0)})),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),hX(this)&&this.initAnimation()},i.prototype.onEvaluateEnd=function(nt){this._data.updateData()},i.prototype.onRender=function(nt){},i.prototype.release=function(){var nt,lt,Rt;at.prototype.release.call(this),this._viewDataMap.clear();var Bt=null===(lt=null===(nt=this._rawData)||void 0===nt?void 0:nt.transformsArr)||void 0===lt?void 0:lt.findIndex((function(nt){return"addVChartProperty"===nt.type}));Bt>=0&&this._rawData.transformsArr.splice(Bt,1),null===(Rt=this._data)||void 0===Rt||Rt.release(),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null},i.prototype.setLayoutStartPosition=function(nt){Q(nt.x)&&(this._layoutStartPoint.x=nt.x),Q(nt.y)&&(this._layoutStartPoint.y=nt.y)},i.prototype.setLayoutRect=function(nt,at){var lt=nt.width,Rt=nt.height;Q(lt)&&(this._layoutRect.width=lt),Q(Rt)&&(this._layoutRect.height=Rt)},i.prototype.getSeriesKeys=function(){var nt,at;return this._seriesField?null!==(at=null===(nt=this.getRawDataStatisticsByField(this._seriesField))||void 0===nt?void 0:nt.values)&&void 0!==at?at:[]:this.name?[this.name]:this.userId?["".concat(this.userId)]:["".concat(this.type,"_").concat(this.id)]},i.prototype.getSeriesStyle=function(nt){var at=this;return function(lt){var Rt,Bt;return null!==(Bt=null===(Rt=at._seriesMark)||void 0===Rt?void 0:Rt.getAttribute(lt,nt))&&void 0!==Bt?Bt:void 0}},i.prototype._getSeriesInfo=function(nt,at){var lt=this,Rt=this.getDefaultShapeType();return at.map((function(at){var Bt;return{"key":at,"originalKey":at,"style":lt.getSeriesStyle((Bt={},Bt[nt]=at,Bt)),"shapeType":Rt}}))},i.prototype.getSeriesInfoInField=function(nt){var at,lt;return this._getSeriesInfo(nt,null!==(lt=null===(at=this.getRawDataStatisticsByField(nt))||void 0===at?void 0:at.values)&&void 0!==lt?lt:[])},i.prototype.getSeriesInfoList=function(){var nt;return this._getSeriesInfo(null!==(nt=this._seriesField)&&void 0!==nt?nt:qz,this.getSeriesKeys())},i.prototype._getDefaultColorScale=function(){var nt,at,lt=this.getDefaultColorDomain(),Rt=this._getDataScheme();return null===(at=(nt=(new AF).domain(lt)).range)||void 0===at?void 0:at.call(nt,Rt)},i.prototype._getDataScheme=function(){return QO(this.getColorScheme(),this.type)},i.prototype.getDefaultColorDomain=function(){var nt,at;return this._seriesField?null===(at=null===(nt=this.getViewDataStatistics())||void 0===nt?void 0:nt.latestData[this._seriesField])||void 0===at?void 0:at.values:[]},i.prototype.getColorAttribute=function(){var nt,at;return{"scale":null!==(nt=this._option.globalScale.getScale("color"))&&void 0!==nt?nt:this._getDefaultColorScale(),"field":null!==(at=this._seriesField)&&void 0!==at?at:qz}},i.prototype.getDimensionField=function(){return[]},i.prototype.getMeasureField=function(){return[]},i.prototype.onMarkPositionUpdate=function(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())},i.prototype.onMarkTreePositionUpdate=function(nt){},i.prototype._createMark=function(nt,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt;void 0===lt&&(lt={}),void 0===Rt&&(Rt={});var te,ne=lt.key,re=lt.groupKey,ae=lt.skipBeforeLayouted,oe=lt.themeSpec,se=void 0===oe?{}:oe,le=lt.markSpec,ue=lt.dataView,ce=lt.dataProductId,he=lt.parent,de=lt.isSeriesMark,fe=lt.depend,pe=lt.stateSort,ve=lt.noSeparateStyle,Ae=void 0!==ve&&ve,we=at.prototype._createMark.call(this,nt,{"key":null!=ne?ne:this._getDataIdKey(),"seriesId":this.id,"attributeContext":this._markAttributeContext,"componentType":lt.componentType,"noSeparateStyle":Ae});if(N(we)){var Ce=this.getSpec()||{};this._marks.addMark(we,{"name":nt.name}),de&&(this._seriesMark=we),j(he)?null===(Bt=this._rootMark)||void 0===Bt||Bt.addMark(we):!1!==he&&he.addMark(we),j(ue)?(we.setDataView(this.getViewData(),this.getViewDataProductId()),we.setSkipBeforeLayouted(!0)):!1!==ue&&we.setDataView(ue,ce),z(ae)&&we.setSkipBeforeLayouted(ae),N(fe)&&we.setDepend.apply(we,P([],E(xt(fe)),!1)),j(re)||we.setGroupKey(re),pe&&we.setStateSortCallback(pe);var je=A(A({},Rt),{"morph":null!==(Lt=Rt.morph)&&void 0!==Lt&&Lt,"support3d":(te=nt.type,["arc3d","rect3d","pyramid3d"].includes(te)||(null!==(Ht=Rt.support3d)&&void 0!==Ht?Ht:Ce.support3d||!!Ce.zField)),"morphKey":(null===(jt=Ce.morph)||void 0===jt?void 0:jt.morphKey)||"".concat(this.getSpecIndex(),"_").concat(this.getMarks().length),"morphElementKey":null!==(Kt=null===($t=Ce.morph)||void 0===$t?void 0:$t.morphElementKey)&&void 0!==Kt?Kt:Rt.morphElementKey});we.setMarkConfig(je),this.initMarkStyleWithSpec(we,gz({},se,le||Ce[we.name]))}return we},i.prototype._getDataIdKey=function(){var nt;return null!==(nt=at.prototype._getDataIdKey.call(this))&&void 0!==nt?nt:$z},i.prototype._getSeriesDataKey=function(nt){var at="";if(!nt)return at;var lt=this.getDimensionField();at=lt.map((function(at){return nt[at]})).join("_");var Rt=this.getSeriesField();return Rt&&!lt.includes(Rt)&&(at+="_".concat(nt[Rt])),at},i.prototype.addViewDataFilter=function(nt){var at,lt;null===(lt=null!==(at=this._viewDataFilter)&&void 0!==at?at:this.getViewData())||void 0===lt||lt.transform(nt,!1)},i.prototype.reFilterViewData=function(){var nt,at;null===(at=null!==(nt=this._viewDataFilter)&&void 0!==nt?nt:this.getViewData())||void 0===at||at.reRunAllTransform()},i.prototype.reTransformViewData=function(){var nt,at;null===(at=null===(nt=this._data)||void 0===nt?void 0:nt.getDataView())||void 0===at||at.reRunAllTransform()},i.prototype.fillData=function(){var nt;null===(nt=this.getRawData())||void 0===nt||nt.reRunAllTransform()},i.prototype.compile=function(){this.compileData()},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getFieldAlias=function(nt){var at;return nt!==Jz&&nt!==eH&&nt!==Qz&&nt!==tH||(nt=this.getStackValueField()),null!==(at=uH(this.getRawData(),nt))&&void 0!==at?at:nt},i.prototype._getInvalidConnectType=function(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"},i.prototype._getInvalidDefined=function(nt){var at=this.getInvalidCheckFields();return!at.length||at.every((function(at){return Vk(nt[at])}))},i.prototype._getRelatedComponentSpecInfo=function(nt){var at,lt=this.getSpecIndex(),Rt=null===(at=this._option.getSpecInfo().component[nt])||void 0===at?void 0:at.filter((function(nt){return nt.seriesIndexes.includes(lt)}));return null!=Rt?Rt:[]},i.prototype._forEachStackGroup=function(nt,at){var lt,Rt,Bt=this;(at=null!=at?at:null===(lt=this._viewStackData)||void 0===lt?void 0:lt.latestData)&&((null===(Rt=at.values)||void 0===Rt?void 0:Rt.length)?nt(at):at.nodes&&Object.values(at.nodes).forEach((function(at){Bt._forEachStackGroup(nt,at)})))},i.prototype.isDatumInViewData=function(nt){if(!nt)return!1;var at=this.getViewData().latestData;return!!at&&(!!at.includes(nt)||at.some((function(at){return Object.keys(nt).every((function(lt){return nt[lt]===at[lt]}))})))},i.prototype.getSeriesFieldValue=function(nt,at){var lt;return nt[null!==(lt=null!=at?at:this.getSeriesField())&&void 0!==lt?lt:qz]},i.mark=GY,i.transformerConstructor=xX,i}(UU);function fX(nt,at,lt){var Rt=nt.getScale(0),Bt="isInverse"in nt&&nt.isInverse();FB(Rt.type)?lt.sort((function(nt,lt){return(nt[at]-lt[at])*(Bt?-1:1)})):lt.sort((function(nt,lt){return(Rt.index(nt[at])-Rt.index(lt[at]))*(Bt?-1:1)}))}function vX(nt){return{"dataIndex":function(at){var lt,Rt,Bt="horizontal"===nt.direction?nt.fieldY[0]:nt.fieldX[0],Lt=null==at?void 0:at[Bt],Ht="horizontal"===nt.direction?nt.scaleY:nt.scaleX;return(null!==(Rt=null===(lt=null==Ht?void 0:Ht.domain)||void 0===lt?void 0:lt.call(Ht))&&void 0!==Rt?Rt:[]).indexOf(Lt)||0},"dataCount":function(){var at,lt,Rt,Bt="horizontal"===nt.direction?nt.scaleY:nt.scaleX;return null!==(Rt=(null!==(lt=null===(at=null==Bt?void 0:Bt.domain)||void 0===at?void 0:at.call(Bt))&&void 0!==lt?lt:[]).length)&&void 0!==Rt?Rt:0}}}var SX,AX=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.coordinate="cartesian",at._bandPosition=.5,at._scaleConfig={"bandPosition":at._bandPosition},at._direction="vertical",at._sortDataByAxis=!1,at._getPositionXEncoder=function(){var nt;return null===(nt=at._positionXEncoder)||void 0===nt?void 0:nt.bind(at)},at._setPositionXEncoder=function(nt){at._positionXEncoder=nt.bind(at)},at._getPositionYEncoder=function(){var nt;return null===(nt=at._positionYEncoder)||void 0===nt?void 0:nt.bind(at)},at._setPositionYEncoder=function(nt){at._positionYEncoder=nt.bind(at)},at}return S(e,nt),e.prototype._buildScaleConfig=function(){this._scaleConfig={"bandPosition":this._bandPosition}},Object.defineProperty(e.prototype,"fieldX",{"get":function(){return this._fieldX},"enumerable":!1,"configurable":!0}),e.prototype.setFieldX=function(nt){this._fieldX=xt(nt)},Object.defineProperty(e.prototype,"fieldY",{"get":function(){return this._fieldY},"enumerable":!1,"configurable":!0}),e.prototype.setFieldY=function(nt){this._fieldY=xt(nt)},Object.defineProperty(e.prototype,"fieldZ",{"get":function(){return this._fieldZ},"enumerable":!1,"configurable":!0}),e.prototype.setFieldZ=function(nt){this._fieldZ=nt&&xt(nt)},Object.defineProperty(e.prototype,"fieldX2",{"get":function(){return this._fieldX2},"enumerable":!1,"configurable":!0}),e.prototype.setFieldX2=function(nt){this._fieldX2=nt},Object.defineProperty(e.prototype,"fieldY2",{"get":function(){return this._fieldY2},"enumerable":!1,"configurable":!0}),e.prototype.setFieldY2=function(nt){this._fieldY2=nt},Object.defineProperty(e.prototype,"direction",{"get":function(){return this._direction},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"scaleX",{"get":function(){return this._scaleX},"enumerable":!1,"configurable":!0}),e.prototype.setScaleX=function(nt){this._scaleX=nt},Object.defineProperty(e.prototype,"scaleY",{"get":function(){return this._scaleY},"enumerable":!1,"configurable":!0}),e.prototype.setScaleY=function(nt){this._scaleY=nt},Object.defineProperty(e.prototype,"scaleZ",{"get":function(){return this._scaleZ},"enumerable":!1,"configurable":!0}),e.prototype.setScaleZ=function(nt){this._scaleZ=nt},e.prototype.getXAxisHelper=function(){return this._xAxisHelper},e.prototype.setXAxisHelper=function(nt){this._xAxisHelper=nt,this.onXAxisHelperUpdate()},e.prototype.getYAxisHelper=function(){return this._yAxisHelper},e.prototype.setYAxisHelper=function(nt){this._yAxisHelper=nt,this.onYAxisHelperUpdate()},e.prototype.getZAxisHelper=function(){return this._zAxisHelper},e.prototype.setZAxisHelper=function(nt){this._zAxisHelper=nt,this.onYAxisHelperUpdate()},Object.defineProperty(e.prototype,"sortDataByAxis",{"get":function(){return this._sortDataByAxis},"enumerable":!1,"configurable":!0}),e.prototype.getStatisticFields=function(){var nt=[];return[{"axisHelper":this.getXAxisHelper(),"fields":this._fieldX2?P(P([],E(this._fieldX),!1),[this._fieldX2],!1):this._fieldX},{"axisHelper":this.getYAxisHelper(),"fields":this._fieldY2?P(P([],E(this._fieldY),!1),[this._fieldY2],!1):this._fieldY},{"axisHelper":this.getZAxisHelper(),"fields":this._fieldZ}].forEach((function(at){at.axisHelper&&at.axisHelper.getScale&&at.fields&&at.fields.forEach((function(lt){var Rt={"key":lt,"operations":[]},Bt=at.axisHelper.getScale(0);FB(Bt.type)?(Rt.operations=["max","min"],"log"===Bt.type&&(Rt.filter=function(nt){return nt>0})):Rt.operations=["values"],nt.push(Rt)}))})),this.getStack()&&nt.push({"key":this.getStackValueField(),"operations":["allValid"]}),nt},e.prototype.getGroupFields=function(){return"vertical"===this.direction?this._fieldX:this._fieldY},e.prototype.getStackGroupFields=function(){return this.getGroupFields()},e.prototype.getStackValue=function(){var nt,at,lt=null===(nt="horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper())||void 0===nt?void 0:nt.getAxisId();return null!==(at=this._spec.stackValue)&&void 0!==at?at:"".concat(OF,"_series_").concat(this.type,"_").concat(lt)},e.prototype.getStackValueField=function(){return"horizontal"===this.direction?xt(this._spec.xField)[0]:xt(this._spec.yField)[0]},e.prototype.setValueFieldToStack=function(){"horizontal"===this.direction?(this.setFieldX(Jz),this.setFieldX2(Qz)):(this.setFieldY(Jz),this.setFieldY2(Qz))},e.prototype.setValueFieldToPercent=function(){"horizontal"===this.direction?(this.setFieldX(eH),this.setFieldX2(tH)):(this.setFieldY(eH),this.setFieldY2(tH))},e.prototype.setValueFieldToStackOffsetSilhouette=function(){"horizontal"===this.direction?(this.setFieldX(nH),this.setFieldX2(iH)):(this.setFieldY(nH),this.setFieldY2(iH))},e.prototype.onXAxisHelperUpdate=function(){this.onMarkPositionUpdate()},e.prototype.onYAxisHelperUpdate=function(){this.onMarkPositionUpdate()},e.prototype.onZAxisHelperUpdate=function(){this.onMarkPositionUpdate()},e.prototype.setAttrFromSpec=function(){var at,lt;nt.prototype.setAttrFromSpec.call(this),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=xt(this._spec.xField),this._specYField=xt(this._spec.yField),N(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null===(at=this._spec)||void 0===at?void 0:at.x2Field),this.setFieldY2(null===(lt=this._spec)||void 0===lt?void 0:lt.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),N(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)},e.prototype.dataToPosition=function(nt,at){return nt?at&&!this.isDatumInViewData(nt)?null:{"x":this.dataToPositionX(nt),"y":this.dataToPositionY(nt)}:null},e.prototype._buildMarkAttributeContext=function(){var at=this;nt.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=function(nt){var lt,Rt,Bt;return void 0===nt&&(nt=0),null!==(Bt=null===(Rt=(lt=at.getXAxisHelper()).getBandwidth)||void 0===Rt?void 0:Rt.call(lt,nt))&&void 0!==Bt?Bt:0},this._markAttributeContext.yBandwidth=function(nt){var lt,Rt,Bt;return void 0===nt&&(nt=0),null!==(Bt=null===(Rt=(lt=at.getYAxisHelper()).getBandwidth)||void 0===Rt?void 0:Rt.call(lt,nt))&&void 0!==Bt?Bt:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)},e.prototype.valueToPosition=function(nt,at){return{"x":this.valueToPositionX(nt),"y":this.valueToPositionY(at)}},e.prototype._axisPosition=function(nt,at,lt){return this._scaleConfig.datum=lt,nt.isContinuous?nt.valueToPosition(at,this._scaleConfig):nt.dataToPosition(xt(at),this._scaleConfig)},e.prototype.valueToPositionX=function(nt,at){return this._axisPosition(this._xAxisHelper,nt,at)},e.prototype.valueToPositionY=function(nt,at){return this._axisPosition(this._yAxisHelper,nt,at)},e.prototype._dataToPosition=function(nt,at,lt,Rt,Bt,Lt){var Ht=this,jt=Bt();if(jt)return jt(nt);if(!at)return Lt((function(nt){return Number.NaN})),Number.NaN;var $t=(at.getFields?at.getFields():lt).slice(0,Rt);return $t&&0!==$t.length?(at.isContinuous?Lt((function(nt){return Ht._scaleConfig.datum=nt,at.valueToPosition(Ht.getDatumPositionValue(nt,$t[0]),Ht._scaleConfig)})):Lt((function(nt){return Ht._scaleConfig.datum=nt,at.dataToPosition(xt(Ht.getDatumPositionValues(nt,$t)),Ht._scaleConfig)})),Bt()(nt)):(Lt((function(nt){return null})),null)},e.prototype.dataToPositionX=function(nt){return this._dataToPosition(nt,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)},e.prototype.dataToPositionY=function(nt){return this._dataToPosition(nt,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)},e.prototype.dataToPositionZ=function(nt){return this._zAxisHelper?(0,this._zAxisHelper.dataToPosition)(this.getDatumPositionValues(nt,this._fieldZ),{"bandPosition":this._bandPosition}):Number.NaN},e.prototype.dataToPositionX1=function(nt){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in nt?this.valueToPositionX(this.getDatumPositionValues(nt,this._fieldX2)):this.valueToPositionX(0):Number.NaN},e.prototype.dataToPositionY1=function(nt){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in nt?this.valueToPositionY(this.getDatumPositionValues(nt,this._fieldY2)):this.valueToPositionY(0):Number.NaN},e.prototype.positionToData=function(nt){return nt?{"x":this.positionToDataX(nt.x),"y":this.positionToDataY(nt.y)}:null},e.prototype.positionToDataX=function(nt){return this._scaleX?this._scaleX.invert(nt):null},e.prototype.positionToDataY=function(nt){return this._scaleY?this._scaleY.invert(nt):null},e.prototype.getRegionRectLeft=function(){return this._xAxisHelper?(0,this._xAxisHelper.getScale)(0).range()[0]:Number.NaN},e.prototype.getRegionRectRight=function(){return this._xAxisHelper?(0,this._xAxisHelper.getScale)(0).range()[1]:Number.NaN},e.prototype.afterInitMark=function(){nt.prototype.afterInitMark.call(this),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()},e.prototype.getDimensionField=function(){return"horizontal"===this._direction?this._specYField:this._specXField},e.prototype.getDimensionContinuousField=function(){return"horizontal"===this._direction?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]},e.prototype.getMeasureField=function(){return"horizontal"===this._direction?this._specXField:this._specYField},e.prototype.initEvent=function(){var at=this;nt.prototype.initEvent.call(this),this.sortDataByAxis&&this.event.on(jW.scaleDomainUpdate,{"filter":function(nt){var lt;return nt.model.id===(null===(lt="horizontal"===at._direction?at._yAxisHelper:at._xAxisHelper)||void 0===lt?void 0:lt.getAxisId())}},(function(){at._sortDataInAxisDomain()}))},e.prototype._sortDataInAxisDomain=function(){var nt,at,lt;(null===(at=null===(nt=this.getViewData())||void 0===nt?void 0:nt.latestData)||void 0===at?void 0:at.length)&&(fX("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null===(lt=this._data)||void 0===lt||lt.updateData(!0))},e.prototype.getInvalidCheckFields=function(){var nt=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==lt.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach((function(at){nt.push(at)})),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==lt.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach((function(at){nt.push(at)})),nt},e.prototype.reInit=function(at){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),nt.prototype.reInit.call(this,at)},e}(kX),MX="monotone",TX="linear",EX=((SX={}).point={"name":"point","type":"symbol"},SX.line={"name":"line","type":"line"},SX),FX=function(){function e(){}return e.prototype.addSamplingCompile=function(){if(this._spec.sampling){var nt=this._region.getLayoutRect(),at=nt.width,lt=nt.height,Rt=[],Bt=this._fieldY,Lt=this._fieldX;Rt.push({"type":"sampling","size":"horizontal"===this._direction?lt:at,"factor":this._spec.samplingFactor,"yfield":"horizontal"===this._direction?Lt[0]:Bt[0],"groupBy":this._seriesField,"mode":this._spec.sampling}),this._data.getProduct().transform(Rt)}},e.prototype.addOverlapCompile=function(){var nt;if(this._spec.markOverlap){var at=[];at.push({"type":"markoverlap","direction":"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,"delta":this._spec.pointDis,"deltaMul":this._spec.pointDisMul,"groupBy":this._seriesField}),null===(nt=this._symbolMark)||void 0===nt||nt.getProduct().transform(at)}},e.prototype.reCompileSampling=function(){this._spec.sampling&&this.compile()},e.prototype.initLineMark=function(nt,at){var lt,Rt;return this._lineMark=this._createMark(EX.line,{"groupKey":this._seriesField,"isSeriesMark":null==at||at,"stateSort":null===(lt=this._spec.line)||void 0===lt?void 0:lt.stateSort},A(A({},nt),{"setCustomizedShape":null===(Rt=this._spec.line)||void 0===Rt?void 0:Rt.customShape,"morphElementKey":this.getDimensionField()[0]})),this._lineMark},e.prototype.initLineMarkStyle=function(nt,at){var lt,Rt,Bt=this,Lt=this._lineMark;if(Lt){if(this.setMarkStyle(Lt,{"stroke":this.getColorAttribute()},"normal",EU.Series),"zero"!==this._invalidType&&this.setMarkStyle(Lt,{"defined":this._getInvalidDefined.bind(this),"connectedType":this._getInvalidConnectType()},"normal",EU.Series),this.event.on(jW.viewDataStatisticsUpdate,{"filter":function(nt){return nt.model===Bt}},(function(){Bt.encodeDefined(Lt,"defined")})),"polar"===this.coordinate)this.setMarkStyle(Lt,{"lineJoin":"bevel","curveType":TX,"closePath":!0},"normal",EU.Series);else{var Ht=null!=at?at:null===(Rt=null===(lt=this.getSpec().line)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.curveType,jt=Ht===MX?"horizontal"===nt?"monotoneY":"monotoneX":Ht;this.setMarkStyle(Lt,{"curveType":jt},"normal",EU.Built_In)}this.setMarkStyle(Lt,{"x":this.dataToPositionX.bind(this),"y":this.dataToPositionY.bind(this),"z":this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",EU.Series)}return Lt},e.prototype._getEventElement=function(nt,at){var lt=this,Rt=[];return nt.dimensionInfo.some((function(nt){return nt.data.some((function(nt){return nt.series===lt&&(Rt=nt.datum,!0)})),!Rt.length})),Rt},e.prototype._dimensionTrigger=function(nt){var at=this._getEventElement(nt);switch(nt.action){case"enter":this._symbolActiveMark.getDataView().parse(at),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}},e.prototype.initSymbolMark=function(nt,at){var lt=this._spec.point||{};if(!1!==lt.visible&&(this._symbolMark=this._createMark(EX.point,{"groupKey":this._seriesField,"isSeriesMark":!!at,"stateSort":lt.stateSort},A(A({},nt),{"setCustomizedShape":lt.customShape,"morph":lX(this._spec,EX.point.name),"morphElementKey":this.getDimensionField()[0]}))),!0===this._spec.activePoint){var Rt=new Es(this._option.dataSet,{"name":"".concat(OF,"_series_").concat(this.id,"_active_point")});Rt.parse([]),this._symbolActiveMark=this._createMark({"name":"active_point_".concat(this.id),"type":"symbol"},{"groupKey":this._seriesField,"isSeriesMark":!1,"dataView":Rt,"parent":this._region.getInteractionMark(),"stateSort":lt.stateSort},{"setCustomizedShape":lt.customShape,"morph":!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark},e.prototype.initSymbolMarkStyle=function(){var at=this._symbolMark;if(!at)return this._initSymbolActiveMarkAlone(),at;if(this._initSymbolMark(at),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){for(var lt in this._symbolActiveMark.setVisible(!0),this.event.on(nt.DimensionEventEnum.dimensionHover,this._dimensionTrigger.bind(this)),this._symbolMark.stateStyle)for(var Rt in this._symbolActiveMark.stateStyle[lt]={},this._symbolMark.stateStyle[lt])"visible"!==Rt&&(this._symbolActiveMark.stateStyle[lt][Rt]={"style":null,"level":EU.Series,"referer":at});this._symbolActiveMark.state.changeStateInfo({"stateValue":mU.STATE_DIMENSION_HOVER,"filter":function(){return!0}})}return at},e.prototype._initSymbolMark=function(nt){var at=this;nt&&(this.setMarkStyle(nt,{"fill":this.getColorAttribute()},"normal",EU.Series),this.setMarkStyle(nt,{"x":function(nt){return"zero"===at._invalidType||at._getInvalidDefined(nt)?at.dataToPositionX(nt):Number.NaN},"y":function(nt){return"zero"===at._invalidType||at._getInvalidDefined(nt)?at.dataToPositionY(nt):Number.NaN},"z":this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",EU.Series))},e.prototype._initSymbolActiveMarkAlone=function(){var at,lt,Rt=this._symbolActiveMark;Rt&&(this._initSymbolMark(Rt),Rt&&(null===(lt=null===(at=this._spec[EX.point.name])||void 0===at?void 0:at.state)||void 0===lt?void 0:lt.dimension_hover)&&(Rt.setVisible(!0),this.event.on(nt.DimensionEventEnum.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(Rt,gz({},this._spec[EX.point.name],{"visible":!0})),this._symbolActiveMark.state.changeStateInfo({"stateValue":mU.STATE_DIMENSION_HOVER,"filter":function(){return!0}})))},e.prototype.initLabelMarkStyle=function(nt){var at,lt=this;nt&&("symbol"!==(null===(at=nt.getTarget())||void 0===at?void 0:at.type)&&nt.setRule("line-data"),this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){return nt[lt.getStackValueField()]},"z":this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(nt,{"visible":this._getInvalidDefined.bind(this)},"normal",EU.Series),this.event.on(jW.viewDataStatisticsUpdate,{"filter":function(nt){return nt.model===lt}},(function(){lt.encodeDefined(nt,"visible")})))},e.prototype.initLineLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){var lt;return null!==(lt=nt[at.getSeriesField()])&&void 0!==lt?lt:at.getSeriesKeys()[0]},"z":this._fieldZ?this.dataToPositionZ.bind(this):null})},e.prototype.encodeDefined=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt;if(nt){var $t=this._isFieldAllValid();if("zero"===this._invalidType||$t){if(!0===(null===(Lt=null===(Bt=nt.stateStyle.normal)||void 0===Bt?void 0:Bt[at])||void 0===Lt?void 0:Lt.style))return;this.setMarkStyle(nt,((lt={})[at]=!0,lt),"normal",EU.Series)}else{if(!0!==(null===(jt=null===(Ht=nt.stateStyle.normal)||void 0===Ht?void 0:Ht[at])||void 0===jt?void 0:jt.style))return;this.setMarkStyle(nt,((Rt={})[at]=this._getInvalidDefined.bind(this),Rt),"normal",EU.Series)}nt.getProduct()&&nt.compileEncode()}},e.prototype._isFieldAllValid=function(){var nt=this.getViewDataStatistics(),at=this.getStackValueField();return!!(nt&&nt.latestData&&at)&&nt.latestData[at]&&nt.latestData[at].allValid},e}(),zX=A(A({},GY),EX),HX=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.setStyle=function(nt,at,lt,Rt){var Bt=this;if(void 0===at&&(at="normal"),void 0===lt&&(lt=0),void 0===Rt&&(Rt=this.stateStyle),!j(nt)){void 0===Rt[at]&&(Rt[at]={});var Lt=this._getIgnoreAttributes(),Ht=["strokeWidth","lineWidth","lineDash","strokeDash","lineJoin","stroke","strokeOpacity","opacity","fill","fillOpacity","texture","texturePadding","textureSize","textureColor"],jt=this.isUserLevel(lt),$t=!1;Object.keys(nt).forEach((function(Kt){var te=nt[Kt];if(!j(te)&&!Lt.includes(Kt)){jt&&Ht.includes(Kt)&&(zB(null==te?void 0:te.type)||(null==te?void 0:te.scale)||H(te))&&($t=!0);var ne=Bt._filterAttribute(Kt,te,at,lt,jt,Rt);Bt.setAttribute(Kt,ne,at,lt,Rt)}})),$t&&this.setMarkConfig({"enableSegments":!0})}},e}(dY),$X=function(at){function i(){var nt=null!==at&&at.apply(this,arguments)||this;return nt.type=i.type,nt}return S(i,at),i.prototype._getDefaultStyle=function(){return A(A({},at.prototype._getDefaultStyle.call(this)),{"lineWidth":1})},i.prototype._getIgnoreAttributes=function(){var at,lt;return(null===(at=this.model)||void 0===at?void 0:at.type)===nt.SeriesTypeEnum.radar&&"polar"===(null===(lt=this.model)||void 0===lt?void 0:lt.coordinate)?[]:["fill","fillOpacity"]},i.type="line",i}(HX),wX=function(){Tz.registerMark($X.type,$X),LP(),wP(),RL(),ML(),Pj.registerGraphic(MH.line,Ng),eX()},KX=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"size":1,"symbolType":"circle","fill":void 0,"lineWidth":0})},e}(dY),QX=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.type="symbol",e}(KX),CX=function(){Tz.registerMark(QX.type,QX),qN()},JX=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){var at,lt,Rt;!1!==(null===(at=nt.point)||void 0===at?void 0:at.visible)&&!1!==(null===(Rt=null===(lt=nt.point)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.visible)?this._addMarkLabelSpec(nt,"point"):this._addMarkLabelSpec(nt,"line"),this._addMarkLabelSpec(nt,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)},e}(xX);function PX(nt){return nt.length>=2&&Q(nt[0])&&Q(kt(nt))&&kt(nt)>=nt[0]}function RX(nt,at){var lt,Rt=kt(at)-at[0],Bt=kt(at)*at[0]<0,Lt=at[0]<=0?0-at[0]:0,Ht=kt(at)>0?kt(at)-0:0;0===Rt?at[0]<0?(Lt=1,Ht=0):at[0]>0&&(Lt=0,Ht=1):(Lt/=Rt,Ht/=Rt);var jt=nt.getDomainSpec(),$t={"total":Rt,"negative":Lt,"positive":Ht,"includeZero":Bt,"domain":at,"extendable_min":!Q(jt.min),"extendable_max":!Q(jt.max)};if(null===(lt=nt._break)||void 0===lt?void 0:lt.scope){var Kt=at.findIndex((function(nt){return nt>=0})),te=void 0,ne=void 0;0===Kt?(te=nt._break.scope[Kt],ne=[at[0],at[1]],$t.positive=1,$t.negative=0):kt(at)<=0?($t.positive=0,$t.negative=1,ne=[at[at.length-2],at[at.length-1]]):(te=nt._break.scope[Kt-1],ne=[at[Kt-1],at[Kt]],$t.negative=te[0]+(0-ne[0])/(ne[1]-ne[0])*(te[1]-te[0]),$t.positive=1-$t.negative),$t.break=!0,$t.extendable_max=!1,$t.extendable_min=!1,$t.domain=ne}return $t}function BX(nt,at){var lt=nt.positive,Rt=nt.negative,Bt=nt.extendable_min,Lt=nt.extendable_max,Ht=nt.domain,jt=at.positive,$t=at.negative,Kt=at.extendable_min,te=at.extendable_max,ne=at.domain;if(jt>0){if(!Kt)return!1;var re=Rt/lt;Lt&&(re=Rt/Math.max(lt,jt),Ht[1]=-Ht[0]/re),ne[0]=-ne[1]*re}else if($t>0){if(!te)return!1;re=lt/Rt,Bt&&(re=lt/Math.max(Rt,Rt),Ht[0]=-Ht[1]/re),ne[1]=-ne[0]*re}return!0}function IX(nt,at){var lt=nt.extendable_min,Rt=nt.extendable_max,Bt=nt.domain,Lt=at.positive,Ht=at.negative,jt=at.domain;return!(0===Lt&&0===Ht||Lt>0&&!Rt||Ht>0&&!lt||(Bt[0]=jt[0],Bt[1]=jt[1],0))}function LX(nt,at){var lt=nt.positive,Rt=nt.negative,Bt=nt.extendable_max,Lt=nt.domain,Ht=at.positive,jt=at.negative,$t=at.extendable_min,Kt=at.domain;if(Bt&&$t){var te=Math.max(Rt,jt)/Math.max(lt,Ht);Lt[1]=-Lt[0]/te,Kt[0]=-Kt[1]*te}else if($t)te=Rt/lt,Kt[0]=-Kt[1]*te;else{if(!Bt)return!1;te=jt/Ht,Lt[1]=-Lt[0]/te}return!0}function DX(nt,at){var lt=nt.extendable_min,Rt=nt.domain,Bt=at.extendable_max,Lt=at.domain;return!(!lt||!Bt||(Rt[0]=-Rt[1],Lt[1]=-Lt[0],0))}var OX=function(nt,at){var lt,Rt,Bt,Lt,Ht;if(!nt)return nt;var jt=null===(lt=null==at?void 0:at.targetAxis)||void 0===lt?void 0:lt.call(at);if(!jt)return nt;var $t=null===(Rt=null==at?void 0:at.currentAxis)||void 0===Rt?void 0:Rt.call(at);if(!$t)return nt;var Kt=null===(Bt=$t.getTickData())||void 0===Bt?void 0:Bt.getDataView();if(!Kt)return nt;if(!Kt.transformsArr.find((function(nt){return nt.type.includes("ticks")})))return nt;var te=$t.getScale();if(!te)return nt;var ne=null===(Ht=null===(Lt=jt.getTickData())||void 0===Lt?void 0:Lt.getDataView())||void 0===Ht?void 0:Ht.latestData;if(!(null==ne?void 0:ne.length))return nt;var re=jt.getScale();if(!re)return nt;var ae=re.domain(),oe=kt(ae)-ae[0];if(0===oe)return nt;var se=te.domain(),le=kt(se)-se[0];if(0===oe)return nt;var ue=ne.map((function(nt){return function(nt,at,lt,Rt,Bt){var Lt=Se(nt,at),Ht=Math.max(xe(lt),xe(Lt));return Bt*(Math.round(Lt*Math.pow(10,Ht))/Math.round(lt*Math.pow(10,Ht)))+Rt}(nt.value,ae[0],oe,se[0],le)}));return BB(ue)},e$=function(){function t(nt){this.id=Nk(),this.name="".concat(nt,"_").concat(this.id)}return t.prototype.onAdd=function(nt){this.service=nt},t.prototype.release=function(){this.service=null},t}(),i$=function(nt){function e(){var at=nt.call(this,e.type)||this;return at.type="AxisSyncPlugin",at}return S(e,nt),e.prototype._checkEnableSync=function(nt){if(!FB(nt.getScale().type))return!1;var at=nt.getSpec().sync;return!!(null==at?void 0:at.axisId)&&at},e.prototype._getTargetAxis=function(nt,at){var lt=nt.getOption().getChart().getComponentByUserId(at.axisId);return(null==lt?void 0:lt.type.startsWith("cartesianAxis"))?lt:null},e.prototype.onInit=function(nt,at){var lt=this._checkEnableSync(at);if(lt&&lt.zeroAlign){var Rt=this._getTargetAxis(at,lt);Rt&&at.event.on(jW.scaleDomainUpdate,{"filter":function(nt){var lt=nt.model;return lt.id===at.id||lt.id===Rt.id}},(function(){!function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t=nt.getScale(),Kt=at.getScale();if($t&&Kt){var te=null!==(Bt=null===(Rt=(lt=nt).getDomainAfterSpec)||void 0===Rt?void 0:Rt.call(lt))&&void 0!==Bt?Bt:[0,1],ne=null!==(jt=null===(Ht=(Lt=at).getDomainAfterSpec)||void 0===Ht?void 0:Ht.call(Lt))&&void 0!==jt?jt:[0,1];if(te&&ne&&PX(te)&&PX(ne)){var re=RX(nt,te),ae=RX(at,ne);if(!0!==re.break||!0!==ae.break){var oe=re.positive,se=re.negative,le=re.extendable_min,ue=re.extendable_max,ce=re.includeZero,he=ae.positive,de=ae.negative,fe=ae.extendable_min,pe=ae.extendable_max,ve=ae.includeZero;if(0===oe&&0===se){if(!IX(re,ae))return}else if(0===he&&0===de){if(!IX(ae,re))return}else if(ce||ve)if(ce&&!ve){if(!BX(re,ae))return}else if(ve&&!ce){if(!BX(ae,re))return}else{if(se===de)return;if(se>de){if(!LX(re,ae))return}else if(!LX(ae,re))return}else{if(0===se&&0===he){if(!DX(re,ae))return}else if(0===de&&0===oe&&!DX(ae,re))return;if(0===se&&0===de)if(0===te[0]&&ne[0]>0){if(!fe)return;ne[0]=0}else{if(!(0===ne[0]&&te[0]>0))return;if(!le)return;te[0]=0}if(0===oe&&0===he)if(0===te[1]&&ne[1]>0){if(!pe)return;ne[1]=0}else{if(!(0===ne[1]&&te[1]>0))return;if(!ue)return;te[1]=0}}$t.domain(te),Kt.domain(ne)}}}}(Rt,at)}))}},e.prototype.onDidCompile=function(nt,at){var lt=this._checkEnableSync(at);if(lt){var Rt=this._getTargetAxis(at,lt);if(Rt&&lt.tickAlign){GW(at.getOption().dataSet,"tickAlign",OX);var Bt={"targetAxis":function(){return Rt},"currentAxis":function(){return at}};at.addTransformToTickData({"type":"tickAlign","options":Bt,"level":Number.MAX_SAFE_INTEGER},!1)}}},e.pluginType="component",e.type="AxisSyncPlugin",e}(e$),n$={"left":{"textAlign":"center","textBaseline":"bottom"},"right":{"textAlign":"center","textBaseline":"bottom"},"radius":{},"angle":{}};function jX(nt){var at=0;return st(nt,"tick.visible")&&(at+=st(nt,"tick.tickSize")),st(nt,"label.visible")&&(at+=st(nt,"label.space")),at}function NX(nt,at){var lt,Rt,Bt,Lt,Ht,jt;return{"min":null!==(Bt=null!==(lt=nt.min)&&void 0!==lt?lt:null===(Rt=nt.range)||void 0===Rt?void 0:Rt.min)&&void 0!==Bt?Bt:null==at?void 0:at.min,"max":null!==(jt=null!==(Lt=nt.max)&&void 0!==Lt?Lt:null===(Ht=nt.range)||void 0===Ht?void 0:Ht.max)&&void 0!==jt?jt:null==at?void 0:at.max}}function VX(nt){var at=null==nt?void 0:nt.orient;return"top"===at||"bottom"===at||"left"===at||"right"===at||"z"===at}var GX=function(nt,at,lt){var Rt,Bt=null!==(Rt="band"===at?fY("axisBand",lt):["linear","log","symlog"].includes(at)?fY("axisLinear",lt):{})&&void 0!==Rt?Rt:{},Lt=_W(nt)?fY("axisX",lt):bW(nt)?fY("axisY",lt):fY("axisZ",lt);return gz({},fY("axis",lt),Bt,Lt)},WX=function(nt,at,lt){var Rt,Bt=null!==(Rt="band"===at?fY("axisBand",lt):"linear"===at?fY("axisLinear",lt):{})&&void 0!==Rt?Rt:{},Lt=fY("angle"===nt?"axisAngle":"axisRadius",lt);return gz({},fY("axis",lt),Bt,Lt)},UX=function(nt){return"band"===nt||"ordinal"===nt||"point"===nt};function YX(nt,at){return{"id":nt,"label":nt,"value":at,"rawValue":nt}}function XX(nt,at,lt){return lt||!nt||nt.getAxisId()===at.getAxisId()}var r$=function(nt){function e(at){var lt=nt.call(this)||this;return lt.component=at,lt}return S(e,nt),e.prototype.releaseAll=function(){nt.prototype.releaseAll.call(this),this.component=null},e}(EY);function qX(nt,at,Rt,Bt){switch(nt){case lt.cartesianBandAxis:return GX(kW(Rt,["z"]),"band",at);case lt.cartesianLinearAxis:return GX(kW(Rt,["z"]),"linear",at);case lt.cartesianLogAxis:return GX(kW(Rt,["z"]),"log",at);case lt.cartesianSymlogAxis:return GX(kW(Rt,["z"]),"symlog",at);case lt.cartesianAxis:case lt.cartesianTimeAxis:return GX(kW(Rt),void 0,at);case lt.polarBandAxis:return WX(Rt.orient,"band",at);case lt.polarLinearAxis:return WX(Rt.orient,"linear",at);case lt.polarAxis:return WX(Rt.orient,void 0,at);case lt.cartesianCrosshair:return function(nt,at){var Rt,Bt,Lt,Ht=xt(null!==(Rt=at.axes)&&void 0!==Rt?Rt:[]),jt=null!==(Bt=fY(lt.crosshair,nt))&&void 0!==Bt?Bt:{},$t=jt.bandField,Kt=jt.linearField,te=jt.xField,ne=jt.yField,re=Ht.find((function(nt){return _W(nt.orient)}));Lt=N(re)?gz({},UX(re.type)?$t:Kt,te):te;var ae=Ht.find((function(nt){return bW(nt.orient)}));return{"xField":Lt,"yField":N(ae)?gz({},HB(ae.type)?$t:Kt,ne):ne}}(at,Bt);case lt.polarCrosshair:return function(nt,at){var Rt,Bt,Lt,Ht=xt(null!==(Rt=at.axes)&&void 0!==Rt?Rt:[]),jt=null!==(Bt=fY(lt.crosshair,nt))&&void 0!==Bt?Bt:{},$t=jt.bandField,Kt=jt.linearField,te=jt.categoryField,ne=jt.valueField,re=Ht.find((function(nt){return"angle"===nt.orient}));Lt=N(re)?gz({},UX(re.type)?$t:Kt,te):te;var ae=Ht.find((function(nt){return"radius"===nt.orient}));return{"categoryField":Lt,"valueField":N(ae)?gz({},HB(ae.type)?$t:Kt,ne):ne}}(at,Bt);case lt.colorLegend:case lt.sizeLegend:case lt.discreteLegend:case lt.dataZoom:case lt.scrollBar:return ZX(Rt,fY(nt,at));default:return fY(nt,at)}}var ZX=function(nt,at){var lt,Rt=gz({},at,at[SW(null!==(lt=nt.orient)&&void 0!==lt?lt:at.orient)]);return delete Rt.horizontal,delete Rt.vertical,Rt},a$=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.getTheme=function(nt,at){return qX(this.type,this._option.getTheme(),nt,at)},e.prototype._mergeThemeToSpec=function(at,lt){var Rt=nt.prototype._mergeThemeToSpec.call(this,at,lt),Bt=Rt.spec,Lt=Rt.theme;return this._adjustPadding(Bt),{"spec":Bt,"theme":Lt}},e.prototype._adjustPadding=function(nt){var at,lt=nt.padding,Rt=nt.noOuterPadding,Bt=void 0===Rt||Rt,Lt=nt.orient;Bt&&lt&&Lt&&(nt.padding=A(A({},vF(lt)),((at={})[Lt]=0,at)))},e}(GU),s$=function(nt){function e(at,lt){var Rt=nt.call(this,at,lt)||this;return Rt.name="component",Rt.modelType="component",Rt.transformerConstructor=a$,Rt._delegateEvent=function(nt,at,lt,Bt,Lt){var Ht,jt;void 0===Bt&&(Bt=null),void 0===Lt&&(Lt=null),at instanceof Ph||Rt.event.emit(lt,{"model":Rt,"node":nt,"event":at,"item":Bt,"datum":Lt,"source":NW.chart,"chart":null===(jt=null===(Ht=Rt._option)||void 0===Ht?void 0:Ht.globalInstance)||void 0===jt?void 0:jt.getChart()},"model")},Rt._option.animation&&(Rt.animate=new WU({"getCompiler":lt.getCompiler})),Rt}return S(e,nt),e.createComponent=function(nt,at){var lt=nt.spec,Rt=w(nt,["spec"]);return new this(lt,A(A({},at),Rt))},e.prototype.getRegions=function(){return this._regions},e.prototype.created=function(){nt.prototype.created.call(this),this.initLayout(),this.pluginService=new r$(this)},e.prototype.initLayout=function(){var at;nt.prototype.initLayout.call(this),this._regions=null!==(at=this._regions)&&void 0!==at?at:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map((function(nt){return null==nt?void 0:nt.id})))},e.prototype.changeRegions=function(nt){throw new Error("Method not implemented.")},e.prototype._getNeedClearVRenderComponents=function(){throw new Error("Method not implemented.")},e.prototype.onRender=function(nt){throw new Error("Method not implemented.")},e.prototype.getVRenderComponents=function(){return this._getNeedClearVRenderComponents()},e.prototype.callPlugin=function(nt){this.pluginService&&this.pluginService.getAll().forEach((function(at){return nt(at)}))},e.prototype.getContainer=function(){var nt;return this._container||(this._container=null===(nt=this._option)||void 0===nt?void 0:nt.globalInstance.getStage().find((function(nt){return"root"===nt.name}),!0)),this._container},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return Rt.reMake||(Rt.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some((function(nt){return!mt(null==lt?void 0:lt[nt],at[nt])}))),(null==lt?void 0:lt.visible)!==at.visible&&(Rt.reCompile=!0),Rt},e.prototype.release=function(){var at;nt.prototype.release.call(this),this.clear(),null===(at=this.pluginService)||void 0===at||at.releaseAll(),this.pluginService=null},e.prototype.clear=function(){var nt,at=this,lt=this._getNeedClearVRenderComponents();lt&&lt.length&&lt.forEach((function(nt){var lt;nt&&(null===(lt=at.getContainer())||void 0===lt||lt.removeChild(nt),nt=null)})),this._container=null,null===(nt=this.pluginService)||void 0===nt||nt.clearAll()},e.prototype.compile=function(){this.compileMarks(),this.reAppendComponents()},e.prototype.compileMarks=function(nt){var at=this;this.getMarks().forEach((function(lt){lt.compile({"group":nt,"context":{"model":at}})}))},e.prototype.reAppendComponents=function(){var nt=this,at=this._getNeedClearVRenderComponents();at&&at.length&&at.forEach((function(at){var lt;at&&!at.stage&&(null===(lt=nt.getContainer())||void 0===lt||lt.appendChild(at))}))},e.prototype.getBoundsInRect=function(nt,at){return{"x1":0,"x2":0,"y1":0,"y2":0}},e.prototype.getDatum=function(nt){},e.transformerConstructor=a$,e}($U),l$=function(nt){function e(at,lt){var Rt=nt.call(this,at,lt)||this;return Rt.type="component",Rt._componentType=lt.componentType,Rt._mode=lt.mode,Rt}return S(e,nt),e.prototype._initProduct=function(nt){var at=this.getVGrammarView(),lt=this.getProductId();this._product=at.mark(MH.component,null!=nt?nt:at.rootMark,{"componentType":this._componentType,"mode":this._mode}).id(lt),this._compiledProductId=lt},e.type="component",e}(dY),tK=function(){Tz.registerMark(l$.type,l$)},eK=function(nt){return nt},u$=function(nt){function e(at,lt){var Rt,Bt=this;return(Bt=nt.call(this,at,lt)||this).specKey="axes",Bt._scales=[],Bt._tickData=[],Bt._visible=!0,Bt._tick=void 0,Bt._visible=null===(Rt=at.visible)||void 0===Rt||Rt,Bt._coordinateType="none",Bt}return S(e,nt),e.prototype.getOrient=function(){return this._orient},e.prototype.getScale=function(){return this._scale},e.prototype.getScales=function(){return this._scales},e.prototype.getTickData=function(nt){return void 0===nt&&(nt=0),this._tickData[nt]},Object.defineProperty(e.prototype,"visible",{"get":function(){return this._visible},"enumerable":!1,"configurable":!0}),e.prototype.getInverse=function(){return this._inverse},e.prototype.getCoordinateType=function(){return this._coordinateType},e.prototype._getNeedClearVRenderComponents=function(){return[]},e.prototype.getVRenderComponents=function(){var nt,at,lt,Rt;return[null===(at=null===(nt=this._axisMark)||void 0===nt?void 0:nt.getProduct())||void 0===at?void 0:at.getGroupGraphicItem(),null===(Rt=null===(lt=this._gridMark)||void 0===lt?void 0:lt.getProduct())||void 0===Rt?void 0:Rt.getGroupGraphicItem()].filter(N)},e.prototype.created=function(){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce;if(nt.prototype.created.call(this),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){var he=this._createMark({"type":"component","name":"axis-".concat(this.getOrient())},{"componentType":"angle"===this.getOrient()?"circleAxis":"axis","mode":this._spec.mode,"noSeparateStyle":!0},{"skipTheme":!0});if(this._axisMark=he,he.setMarkConfig({"zIndex":this.layoutZIndex}),N(this._spec.id)&&he.setUserId(this._spec.id),he.setMarkConfig({"interactive":null!==(at=this._spec.interactive)&&void 0!==at?at:this.getDefaultInteractive()}),this._marks.addMark(he),null===(lt=this._spec.grid)||void 0===lt?void 0:lt.visible){var de=this._createMark({"type":"component","name":"axis-".concat(this.getOrient(),"-grid")},{"componentType":"angle"===this.getOrient()?RH.circleAxisGrid:RH.lineAxisGrid,"mode":this._spec.mode,"noSeparateStyle":!0},{"skipTheme":!0});de.setMarkConfig({"zIndex":null!==(jt=null!==(Lt=null===(Bt=null===(Rt=this._spec.grid)||void 0===Rt?void 0:Rt.style)||void 0===Bt?void 0:Bt.zIndex)&&void 0!==Lt?Lt:null===(Ht=this._spec.grid)||void 0===Ht?void 0:Ht.zIndex)&&void 0!==jt?jt:MU.Axis_Grid,"interactive":!1}),this._marks.addMark(de),this._gridMark=de}if(!1!==this._option.animation&&!1!==st(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){var fe=rX(null===($t=Tz.getAnimationInKey("axis"))||void 0===$t?void 0:$t(),{"appear":null!==(te=null!==(Kt=this._spec.animationAppear)&&void 0!==Kt?Kt:st(this._option.getChart().getSpec(),"animationAppear.axis"))&&void 0!==te?te:st(this._option.getChart().getSpec(),"animationAppear"),"disappear":null!==(re=null!==(ne=this._spec.animationDisappear)&&void 0!==ne?ne:st(this._option.getChart().getSpec(),"animationDisappear.axis"))&&void 0!==re?re:st(this._option.getChart().getSpec(),"animationDisappear"),"enter":null!==(oe=null!==(ae=this._spec.animationEnter)&&void 0!==ae?ae:st(this._option.getChart().getSpec(),"animationEnter.axis"))&&void 0!==oe?oe:st(this._option.getChart().getSpec(),"animationEnter"),"exit":null!==(le=null!==(se=this._spec.animationExit)&&void 0!==se?se:st(this._option.getChart().getSpec(),"animationExit.axis"))&&void 0!==le?le:st(this._option.getChart().getSpec(),"animationExit"),"update":null!==(ce=null!==(ue=this._spec.animationUpdate)&&void 0!==ue?ue:st(this._option.getChart().getSpec(),"animationUpdate.axis"))&&void 0!==ce?ce:st(this._option.getChart().getSpec(),"animationUpdate")});fe.enter&&(fe.update[0].customParameters={"enter":fe.enter[0]}),this._marks.forEach((function(nt){return nt.setAnimationConfig(fe)}))}}},e.prototype._shouldComputeTickData=function(){return this.getVisible()||this._spec.forceInitTick},e.prototype._initData=function(){var nt=this._initTickDataSet(this._tickTransformOption());nt.target.addListener("change",this._forceLayout.bind(this)),this._tickData=[new oY(this._option,nt)]},e.prototype.collectData=function(nt,at){var Rt=this,Bt=[];return VO(this._regions,(function(Lt){var Ht,jt=Rt.collectSeriesField(nt,Lt);if(jt=X(jt)?FB(Rt._scale.type)?jt:[jt[0]]:[jt],nt||(Rt._dataFieldText=Lt.getFieldAlias(jt[0])),jt){var $t=Lt.getViewData();if(at)jt.forEach((function(nt){Bt.push(Lt.getRawDataStatisticsByField(nt,!1))}));else if($t&&$t.latestData&&$t.latestData.length){var Kt=null===(Ht=Lt.getViewDataStatistics)||void 0===Ht?void 0:Ht.call(Lt),te=Rt.type===lt.cartesianLinearAxis&&Rt._spec.breaks&&Rt._spec.breaks.length;jt.forEach((function(nt){var at;(null===(at=null==Kt?void 0:Kt.latestData)||void 0===at?void 0:at[nt])&&(te?Bt.push(A(A({},Kt.latestData[nt]),{"values":$t.latestData.map((function(at){return at[nt]}))})):Bt.push(Kt.latestData[nt]))}))}}}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),Bt},e.prototype.isSeriesDataEnable=function(){var nt=!0;return VO(this._regions,(function(at){var lt;X(null===(lt=at.getViewDataStatistics())||void 0===lt?void 0:lt.latestData)&&(nt=!1)}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),nt},e.prototype.setSeriesAndRegionsFromSpec=function(){var nt=this._spec,at=nt.seriesId,lt=nt.seriesIndex,Rt=nt.regionId,Bt=nt.regionIndex;N(at)&&(this._seriesUserId=xt(at)),N(Rt)&&(this._regionUserId=xt(Rt)),N(lt)&&(this._seriesIndex=xt(lt)),N(Bt)&&(this._regionIndex=xt(Bt)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map((function(nt){return nt.id}))},e.prototype.getBindSeriesFilter=function(){return{"userId":this._seriesUserId,"specIndex":this._seriesIndex}},e.prototype.initEvent=function(){var nt=this;this.event.on(jW.scaleUpdate,{"filter":function(at){var lt=at.model;return(null==lt?void 0:lt.id)===nt.id}},this.effect.scaleUpdate.bind(this));var at=GO(this._regions,{"userId":this._seriesUserId,"specIndex":this._seriesIndex}).map((function(nt){return nt.getViewDataStatistics()})).filter((function(nt){return!!nt}));at.length>1?this._option.dataSet.multipleDataViewAddListener(at,"change",(function(){nt.updateScaleDomain()})):1===at.length&&at[0].target.addListener("change",(function(){nt.updateScaleDomain()})),VO(this._regions,(function(at){at.event.on(jW.rawDataUpdate,{"filter":function(nt){var lt=nt.model;return(null==lt?void 0:lt.id)===at.id}},(function(){nt._clearRawDomain()}))}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype.updateScaleDomain=function(){},e.prototype._clearRawDomain=function(){},e.prototype.onLayoutEnd=function(at){this.updateScaleRange(),this.event.emit(jW.scaleUpdate,{"model":this,"value":"range"}),nt.prototype.onLayoutEnd.call(this,at)},e.prototype.computeData=function(nt){"force"!==nt||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||"force"!==nt&&mt(this._scale.range(),[0,1])||this._tickData.forEach((function(nt){nt.getDataView().reRunAllTransform(),nt.updateData()})):VO(this._regions,(function(nt){var at;null===(at=nt.getViewData())||void 0===at||at.reRunAllTransform()}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype.initScales=function(){this._scales=[this._scale];var nt=[];if(VO(this._regions,(function(at){var lt=at.getGroups();lt&&nt.push(lt)}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),0!==nt.length)for(var at=St(nt.map((function(nt){return nt.fields.length}))),lt=1;lt<at;lt++){var Rt=this._scale.clone();this._scales.push(Rt)}},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return Rt.reMake?Rt:(Rt.reRender=!0,(null==lt?void 0:lt.type)!==(null==at?void 0:at.type)||(null==lt?void 0:lt.visible)!==(null==at?void 0:at.visible)?(Rt.reMake=!0,Rt):(Rt.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some((function(nt){var Rt,Bt;return(null===(Rt=null==lt?void 0:lt[nt])||void 0===Rt?void 0:Rt.visible)!==(null===(Bt=null==at?void 0:at[nt])||void 0===Bt?void 0:Bt.visible)})),Rt))},e.prototype._getAxisAttributes=function(){var nt,at=this,lt=this._spec,Rt={"orient":this.getOrient(),"select":!0!==this._option.disableTriggerEvent&&lt.select,"hover":!0!==this._option.disableTriggerEvent&&lt.hover};if(lt.domainLine&&lt.domainLine.visible?Rt.line=((nt=OH(nt=lt.domainLine)).startSymbol=OH(nt.startSymbol),nt.endSymbol=OH(nt.endSymbol),nt):Rt.line={"visible":!1},lt.label&&lt.label.visible){var Bt=vt(lt.label,["style","formatMethod","state"]);Rt.label=Bt,lt.label.style&&(Rt.label.style=H(lt.label.style)?function(nt,Rt,Bt,Lt){var Ht,jt=lt.label.style(nt.rawValue,Rt,nt,Bt,Lt);return HH(gz({},null===(Ht=at._theme.label)||void 0===Ht?void 0:Ht.style,jt))}:HH(lt.label.style)),(lt.label.formatMethod||lt.label.formatter)&&(Rt.label.formatMethod=this._getLabelFormatMethod()),lt.label.state&&(Rt.label.state=function(nt){if(ot(nt))return null;var at={};return Object.keys(nt).forEach((function(lt){H(nt[lt])?at[lt]=function(at,Rt,Bt,Lt){return HH(nt[lt](at.rawValue,Rt,at,Bt,Lt))}:ot(nt[lt])||(at[lt]=HH(nt[lt]))})),at}(lt.label.state))}else Rt.label={"visible":!1};if(lt.tick&&lt.tick.visible?(Rt.tick={"visible":lt.tick.visible,"length":lt.tick.tickSize,"inside":lt.tick.inside,"alignWithLabel":lt.tick.alignWithLabel,"dataFilter":lt.tick.dataFilter},lt.tick.style&&(Rt.tick.style=H(lt.tick.style)?function(nt,Rt,Bt,Lt){var Ht,jt=lt.tick.style(nt,Rt,Bt,Lt);return HH(gz({},null===(Ht=at._theme.tick)||void 0===Ht?void 0:Ht.style,jt))}:HH(lt.tick.style)),lt.tick.state&&(Rt.tick.state=FH(lt.tick.state))):Rt.tick={"visible":!1},lt.subTick&&lt.subTick.visible?(Rt.subTick={"visible":lt.subTick.visible,"length":lt.subTick.tickSize,"inside":lt.subTick.inside,"count":lt.subTick.tickCount},lt.subTick.style&&(Rt.subTick.style=H(lt.subTick.style)?function(nt,Rt,Bt,Lt){var Ht,jt=lt.subTick.style(nt,Rt,Bt,Lt);return HH(gz({},null===(Ht=at._theme.subTick)||void 0===Ht?void 0:Ht.style,jt))}:HH(lt.subTick.style)),lt.subTick.state&&(Rt.subTick.state=FH(lt.subTick.state))):Rt.subTick={"visible":!1},lt.title&&lt.title.visible){var Lt=lt.title,Ht=Lt.autoRotate,jt=Lt.angle,$t=Lt.style,Kt=void 0===$t?{}:$t,te=Lt.background,ne=Lt.state,re=Lt.shape,ae=w(Lt,["autoRotate","angle","style","background","state","shape"]),oe=jt,se=void 0;"left"!==lt.orient&&"right"!==lt.orient||Ht&&j(oe)&&(oe="left"===lt.orient?-90:90,se=n$[lt.orient]),Rt.title=A(A({},ae),{"autoRotate":!1,"angle":oe?Me(oe):null,"textStyle":gz({},se,HH(Kt)),"pickable":!1!==Kt.pickable,"childrenPickable":!1!==Kt.pickable,"state":{}}),re&&re.visible?(Rt.title.shape=A(A({},re),{"style":HH(re.style)}),re.state&&(Rt.title.state.shape=FH(re.state))):Rt.title.shape={"visible":!1},te&&te.visible?(Rt.title.background=A(A({},te),{"style":HH(te.style)}),te.state&&(Rt.title.state.background=FH(te.state))):Rt.title.background={"visible":!1},ne&&(Rt.title.state.text=FH(ne))}else Rt.title={"visible":!1};return lt.background&&lt.background.visible?(Rt.panel={"visible":!0},lt.background.style&&(Rt.panel.style=HH(lt.background.style)),lt.background.state&&(Rt.panel.state=FH(lt.background.state))):Rt.panel={"visible":!1},Rt},e.prototype._getGridAttributes=function(){var nt=this,at=this._spec;return{"alternateColor":at.grid.alternateColor,"alignWithLabel":at.grid.alignWithLabel,"style":H(at.grid.style)?function(){return function(lt,Rt){var Bt,Lt,Ht=at.grid.style(null===(Bt=lt.datum)||void 0===Bt?void 0:Bt.rawValue,Rt,lt.datum);return HH(gz({},null===(Lt=nt._theme.grid)||void 0===Lt?void 0:Lt.style,Ht))}}:HH(at.grid.style),"subGrid":!1===at.subGrid.visible?{"visible":!1}:{"type":"line","visible":at.subGrid.visible,"alternateColor":at.subGrid.alternateColor,"style":HH(at.subGrid.style)}}},e.prototype._getLabelFormatMethod=function(){var nt=this._spec.label,at=nt.formatMethod,lt=nt.formatter,Rt=vY(at,lt).formatFunc;return Rt?function(nt,at,Bt){return Rt(at.rawValue,at,lt)}:null},e.prototype._initTickDataSet=function(nt,at){void 0===at&&(at=0),WW(this._option.dataSet,"scale",eK);var lt=this.registerTicksTransform();return new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_ticks_").concat(at)}).parse(this._scales[at],{"type":"scale"}).transform({"type":lt,"options":nt},!1)},e.prototype._tickTransformOption=function(){var nt=this._tick||{},at=this._spec.label||{},lt=nt.tickCount,Rt=nt.forceTickCount,Bt=nt.tickStep,Lt=nt.tickMode,Ht=at.style,jt=at.formatMethod,$t=at.minGap;return{"sampling":!1!==this._spec.sampling,"tickCount":lt,"forceTickCount":Rt,"tickStep":Bt,"tickMode":Lt,"axisOrientType":this._orient,"coordinateType":this._coordinateType,"labelStyle":Ht,"labelFormatter":jt,"labelGap":$t}},e.prototype.addTransformToTickData=function(nt,at){this._tickData.forEach((function(lt){var Rt;null===(Rt=null==lt?void 0:lt.getDataView())||void 0===Rt||Rt.transform(nt,at)}))},e.prototype.dataToPosition=function(nt){return this._scale.scale(nt)},e.prototype.getDatum=function(nt){var at,lt;return nt&&nt.name===nI.label?nt.data:this._axisMark?null===(lt=null===(at=this._axisMark.getProduct())||void 0===at?void 0:at.getGroupGraphicItem())||void 0===lt?void 0:lt.attribute.items:void 0},e.specKey="axes",e}(s$),nK=function(){tK(),Tz.registerAnimation("axis",(function(){return{"appear":{"custom":uf},"update":{"custom":EI},"exit":{"custom":cf}}}))},c$=[i$],h$=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.cartesianAxis,Bt.name=lt.cartesianAxis,Bt._defaultBandPosition=.5,Bt._defaultBandInnerPadding=.1,Bt._defaultBandOuterPadding=.3,Bt.layoutType="region-relative",Bt.layoutZIndex=MU.Axis,Bt.layoutLevel=TU.Axis,Bt._orient="left",Bt._autoIndentOnce=!1,Bt._hasAutoIndent=!1,Bt._scales=[],Bt._tick=void 0,Bt._layoutCache={"width":0,"height":0,"_lastComputeOutBounds":{"x1":0,"x2":0,"y1":0,"y2":0}},Bt._innerOffset={"top":0,"bottom":0,"left":0,"right":0},Bt.effect={"scaleUpdate":function(nt){Bt.computeData(null==nt?void 0:nt.value),VO(Bt._regions,(function(nt){var at=Bt.getOrient();_W(at)?XX(nt.getXAxisHelper(),Bt.axisHelper(),N(Bt._seriesUserId)||N(Bt._seriesIndex))&&nt.setXAxisHelper(Bt.axisHelper()):bW(at)?XX(nt.getYAxisHelper(),Bt.axisHelper(),N(Bt._seriesUserId)||N(Bt._seriesIndex))&&nt.setYAxisHelper(Bt.axisHelper()):xW(at)&&XX(nt.getZAxisHelper(),Bt.axisHelper(),N(Bt._seriesUserId)||N(Bt._seriesIndex))&&nt.setZAxisHelper(Bt.axisHelper())}),{"userId":Bt._seriesUserId,"specIndex":Bt._seriesIndex})}},Bt._transformLayoutPosition=function(nt){var at=nt.x,lt=nt.y;return Q(at)&&(at+=Number("left"===Bt._orient)*Bt.getLayoutRect().width),Q(lt)&&(lt+=Number("top"===Bt._orient)*Bt.getLayoutRect().height),{"x":at,"y":lt}},Bt._transformLayoutRect=function(nt){if(!Bt._visible)return nt;var at=Bt._latestBounds.clone().translate(-Bt.getLayoutStartPoint().x,-Bt.getLayoutStartPoint().y);switch(Bt._layout.layoutOrient){case"left":0===Bt._layout.layoutRectLevelMap.width&&(nt.width=at.x1<0?-at.x1:0);break;case"right":0===Bt._layout.layoutRectLevelMap.width&&(nt.width=at.x2>0?at.x2:0);break;case"top":0===Bt._layout.layoutRectLevelMap.height&&(nt.height=at.y1<0?-at.y1:0);break;case"bottom":0===Bt._layout.layoutRectLevelMap.height&&(nt.height=at.y2>0?at.y2:0)}return nt.width=Math.ceil(nt.width),nt.height=Math.ceil(nt.height),Bt._layout.setRectInSpec(Bt._layoutCacheProcessing(nt))},Bt._updateAxisLayout=function(){var nt=Bt.getLayoutStartPoint(),at=Bt._getUpdateAttribute(!1),lt=at.grid,Rt=w(at,["grid"]),Lt=Bt._axisMark.getProduct(),Ht=gz({"x":nt.x,"y":nt.y},Bt._axisStyle,Rt);Lt.encode(Ht),Bt._gridMark&&Bt._gridMark.getProduct().encode(gz({"x":nt.x,"y":nt.y},Bt._getGridAttributes(),lt))},Bt._fixAxisOnZero=function(){var nt=Bt._spec.domainLine,at=nt.onZero,lt=nt.visible;if(Bt.visible&&at&&!1!==lt){var Rt=Bt._spec.domainLine,Lt=Rt.onZeroAxisId,Ht=Rt.onZeroAxisIndex,jt=Bt._option.getComponentsByKey("axes"),$t=_W(Bt.getOrient()),u=function(nt){var at;return($t?!_W(nt.getOrient()):_W(nt.getOrient()))&&FB(nt.getScale().type)&&(nt.getTickData()?null===(at=nt.getTickData().getLatestData())||void 0===at?void 0:at.find((function(nt){return 0===nt.value})):nt.getScale().domain()[0]<=0&&kt(nt.getScale().domain())>=0)},Kt=jt.filter((function(nt){return u(nt)}));if(Kt.length){var te=void 0;if(N(Lt))te=Kt.find((function(nt){return nt.id===Lt}));else if(N(Ht)){var ne=jt[Ht];u(ne)&&(te=ne)}else te=Kt[0];if(te){var re=Bt._axisMark.getProduct(),ae=te.valueToPosition(0);$t?re.encode({"line":A(A({},Bt._axisStyle.line),{"dy":"bottom"===Bt._orient?-((te.getInverse()?te.getScale().range()[1]:te.getScale().range()[0])-ae):ae})}):re.encode({"line":A(A({},Bt._axisStyle.line),{"dx":"left"===Bt._orient?ae:-((te.getInverse()?te.getScale().range()[0]:te.getScale().range()[1])-ae)})})}}}},Bt._orient=kW(at,["z"]),xW(Bt._orient)&&(Bt.layoutType="absolute"),Bt._dataSet=Rt.dataSet,Bt._coordinateType="cartesian",Bt}return S(e,nt),e.prototype.getOrient=function(){return this._orient},e.prototype.getDefaultInteractive=function(){return!0},Object.defineProperty(e.prototype,"autoIndentOnce",{"set":function(nt){this._autoIndentOnce=nt},"enumerable":!1,"configurable":!0}),e.prototype.getScales=function(){return this._scales},e.getSpecInfo=function(nt){var at=this,lt=nt[this.specKey];if(!lt)return null;var Rt="horizontal"===nt.direction;if(!X(lt)){if(!VX(lt))return null;var Bt=AW(lt,Rt),Lt=Bt.axisType,Ht=Bt.componentName;return lt.type=Lt,[{"spec":lt,"specPath":[this.specKey],"specInfoPath":["component",this.specKey,0],"type":Ht}]}var jt=lt.filter((function(nt){return"z"===nt.orient}))[0],$t=!0;if(jt){var Kt=lt.filter((function(nt){return"bottom"===nt.orient}))[0],te=lt.filter((function(nt){return bW(nt.orient)}))[0];$t=3===lt.length&&Kt&&te}var ne=lt.map((function(nt,at){return{"spec":nt,"index":at}}));$t||(ne=ne.filter((function(nt){return"z"!==nt.spec.orient})));var re=[];return ne.forEach((function(nt){var lt=nt.spec,Bt=nt.index;if(VX(lt)){var Lt=AW(lt,Rt),Ht=Lt.axisType,jt=Lt.componentName;lt.type=Ht,re.push({"spec":lt,"specPath":[at.specKey,Bt],"specInfoPath":["component",at.specKey,Bt],"type":jt})}})),re},e.createComponent=function(nt,at){var lt=nt.spec,Rt=w(nt,["spec"]),Bt=Tz.getComponentInKey(Rt.type);return Bt?new Bt(lt,A(A({},at),Rt)):(at.onError("Component ".concat(Rt.type," not found")),null)},e.prototype.initLayout=function(){nt.prototype.initLayout.call(this),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient},e.prototype.setLayout3dBox=function(nt){this.layout3dBox=nt},e.prototype.getNewScaleRange=function(){var nt=this.getLayoutRect(),at=nt.width,lt=nt.height,Rt=this._innerOffset,Bt=Rt.left,Lt=Rt.right,Ht=Rt.top,jt=Rt.bottom,$t=[];return _W(this.getOrient())?Q(at)&&($t=this._inverse?[at-Lt,Bt]:[Bt,at-Lt]):xW(this.getOrient())?Q(at)&&($t=this._inverse?[at-Lt,Bt]:[Bt,at-Lt],this._scale.range($t)):Q(lt)&&($t=this._inverse?[Ht,lt-jt]:[lt-jt,Ht]),$t},e.prototype.updateScaleRange=function(){var nt=!1,at=this.getNewScaleRange(),lt=this._scale.range();return at.length===lt.length&&at.every((function(nt,at){return nt===lt[at]}))?nt=!1:(nt=!0,this._scale.range(at)),nt},e.prototype.init=function(at){var lt,Rt=this;nt.prototype.init.call(this,at),null===(lt=this.pluginService)||void 0===lt||lt.load(c$.map((function(nt){return new nt}))),this.callPlugin((function(nt){Rt.pluginService&&nt.onInit&&nt.onInit(Rt.pluginService,Rt)}))},e.prototype.setAttrFromSpec=function(){var at;if(nt.prototype.setAttrFromSpec.call(this),this.visible){_W(this.getOrient())?U(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):U(this._spec.maxWidth)&&(this._spec.maxWidth="30%");var lt=this._getAxisAttributes();lt.label.formatMethod=this._getLabelFormatMethod(),lt.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=lt}this._tick=this._spec.tick;var Rt=null===(at=this._option.getChart())||void 0===at?void 0:at.getSpec();this._inverse=function(nt,at){var lt=nt.inverse;return at&&!_W(nt.orient)&&(lt=!N(nt.inverse)||!nt.inverse),lt}(this._spec,"horizontal"===(null==Rt?void 0:Rt.direction))},e.prototype.onLayoutStart=function(at,lt,Rt){var Bt=this;if(nt.prototype.onLayoutStart.call(this,at,lt,Rt),!xW(this.getOrient())&&this._spec.innerOffset){var Lt=this._spec;bW(this.getOrient())?["top","bottom"].forEach((function(nt){Bt._innerOffset[nt]=pF(Lt.innerOffset[nt],lt.height,lt)})):["left","right"].forEach((function(nt){Bt._innerOffset[nt]=pF(Lt.innerOffset[nt],lt.width,lt)}))}},e.prototype.getSeriesStatisticsField=function(nt){var at;return at=_W(this.getOrient())?nt.fieldX:xW(this.getOrient())?nt.fieldZ:nt.fieldY,FB(this._scale.type)?at:[at[0]]},e.prototype._tickTransformOption=function(){var at,lt,Rt,Bt;return A(A({},nt.prototype._tickTransformOption.call(this)),{"noDecimals":null===(at=this._tick)||void 0===at?void 0:at.noDecimals,"labelLastVisible":null===(lt=this._spec.label)||void 0===lt?void 0:lt.lastVisible,"labelFirstVisible":null===(Rt=this._spec.label)||void 0===Rt?void 0:Rt.firstVisible,"labelFlush":null===(Bt=this._spec.label)||void 0===Bt?void 0:Bt.flush})},e.prototype.axisHelper=function(){var nt=this;return{"isContinuous":FB(this._scale.type),"dataToPosition":this.dataToPosition.bind(this),"getScale":function(at){return void 0===at&&(at=0),nt._scales[at]},"getAxisType":function(){return nt.type},"getAxisId":function(){return nt.id},"isInverse":function(){return!0===nt._inverse},"getSpec":function(){return nt._spec}}},e.prototype.afterCompile=function(){var nt,at=this,lt=null===(nt=this._axisMark)||void 0===nt?void 0:nt.getProduct();lt&&lt.addEventListener(GH.AFTER_ELEMENT_ENCODE,(function(){if(!1===at._isLayout&&(_W(at.getOrient())?at.callPlugin((function(nt){at.pluginService&&nt.onDidLayoutHorizontal&&nt.onDidLayoutHorizontal(at.pluginService,at)})):at.callPlugin((function(nt){at.pluginService&&nt.onDidLayoutVertical&&nt.onDidLayoutVertical(at.pluginService,at)})),at._unitText)){var nt=at.getLayoutStartPoint(),lt=nt.x,Rt=nt.y,Bt=_W(at._orient)?{"x":St(at._scale.range())+lt,"y":Rt}:{"x":lt,"y":At(at._scale.range())+Rt};at._unitText.setAttributes(Bt)}})),this.callPlugin((function(nt){at.pluginService&&nt.onDidCompile&&nt.onDidCompile(at.pluginService,at)}))},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(nt){},e.prototype.update=function(nt){},e.prototype.resize=function(nt){},e.prototype.collectScale=function(){var nt=this,at=[];return VO(this._regions,(function(lt){at.push("left"===nt.getOrient()||"right"===nt.getOrient()?lt.scaleY:lt.scaleX)}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),at},e.prototype.collectSeriesField=function(nt,at){var lt,Rt;return nt>0?null===(Rt=null===(lt=at.getGroups())||void 0===lt?void 0:lt.fields)||void 0===Rt?void 0:Rt[nt]:_W(this.getOrient())?at.getSpec().x2Field?P(P([],E(at.fieldX),!1),[at.fieldX2],!1):at.fieldX:xW(this.getOrient())?at.fieldZ:at.getSpec().y2Field?P(P([],E(at.fieldY),!1),[at.fieldY2],!1):at.fieldY},e.prototype.updateSeriesScale=function(){var nt=this,at=this.getOrient();VO(this._regions,(function(lt){_W(at)?XX(lt.getXAxisHelper(),nt.axisHelper(),N(nt._seriesUserId)||N(nt._seriesIndex))&&(lt.setScaleX(nt._scale),lt.setXAxisHelper(nt.axisHelper())):bW(at)?XX(lt.getYAxisHelper(),nt.axisHelper(),N(nt._seriesUserId)||N(nt._seriesIndex))&&(lt.setScaleY(nt._scale),lt.setYAxisHelper(nt.axisHelper())):xW(at)&&XX(lt.getZAxisHelper(),nt.axisHelper(),N(nt._seriesUserId)||N(nt._seriesIndex))&&(lt.setScaleZ(nt._scale),lt.setZAxisHelper(nt.axisHelper()))}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype.getBoundsInRect=function(nt){var at,lt=this,Rt={"x1":0,"y1":0,"x2":0,"y2":0};if(!this._visible)return Rt;this._verticalLimitSize=_W(this.getOrient())?nt.height:nt.width,this.setLayoutRect(nt),!this.updateScaleRange()&&X(null===(at=this.getTickData())||void 0===at?void 0:at.getLatestData())||this.computeData("range");var Bt={"skipLayout":!1},Lt=_W(this.getOrient());this.pluginService&&(Lt?this.callPlugin((function(nt){nt.onWillLayoutHorizontal&&nt.onWillLayoutHorizontal(lt.pluginService,Bt,lt)})):this.callPlugin((function(nt){nt.onWillLayoutVertical&&nt.onWillLayoutVertical(lt.pluginService,Bt,lt)})));var Ht=this._axisMark.getProduct(),jt=this._getUpdateAttribute(!0),$t=Ht.getGroupGraphicItem(),Kt=gz(A({},this.getLayoutStartPoint()),this._axisStyle,jt,{"line":{"visible":!1}}),te=$t.getBoundsWithoutRender(Kt);return te.empty()&&(te=(new mi).set(Kt.x,Kt.y,Kt.x,Kt.y)),this._latestBounds=te,this._appendAxisUnit(te,Lt)},e.prototype.positionToData=function(nt,at){var lt=_W(this.getOrient());at&&(nt-=lt?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(nt=lt?Ut(nt,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):Ut(nt,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));var Rt=this._scale.range();return(nt-Rt[0])*(nt-kt(Rt))>0?null:this._scale.invert(nt)},e.prototype._getTitleLimit=function(nt){var at,lt,Rt,Bt,Lt,Ht=this._spec.title;if(Ht.visible&&j(null===(at=Ht.style)||void 0===at?void 0:at.maxLineWidth)){var jt=null!==(Lt=null!==(Rt=null===(lt=this._axisStyle.title)||void 0===lt?void 0:lt.angle)&&void 0!==Rt?Rt:null===(Bt=Ht.style)||void 0===Bt?void 0:Bt.angle)&&void 0!==Lt?Lt:0;if(nt){var $t=this.getLayoutRect().width,Kt=Math.abs(Math.cos(jt));return Kt<1e-6?1/0:$t/Kt}var te=this.getLayoutRect().height,ne=Math.abs(Math.sin(jt));return ne<1e-6?1/0:te/ne}return null},e.prototype._getUpdateAttribute=function(nt){var at,lt=0,Rt=0;if(!nt){for(var Bt=this.getRegions(),Lt=Bt[0].getLayoutStartPoint(),Ht=Lt.x,jt=Lt.y,$t=Ht+Bt[0].getLayoutRect().width,Kt=jt+Bt[0].getLayoutRect().height,te=1;te<Bt.length;te++){var ne=Bt[te],re=ne.getLayoutStartPoint(),ae=re.x,oe=re.y,se=ne.getLayoutRect(),le=se.width,ue=se.height;Ht=Math.min(Ht,ae),$t=Math.max($t,le+ae),jt=Math.min(jt,oe),Kt=Math.max(Kt,ue+oe)}lt=Math.abs(Kt-jt),Rt=Math.abs($t-Ht)}var ce=this.getLayoutRect(),he=ce.width,de=ce.height,fe=_W(this._orient),pe=bW(this._orient),ve=xW(this._orient),Ae=this.layout3dBox?this.layout3dBox.length:0,we={"x":0,"y":0},Ce=lt,je=he;fe?we={"x":he,"y":0}:pe?(we={"x":0,"y":de},Ce=Rt,je=de):ve&&(we={"x":Ae,"y":0});var Ne=this.getLabelItems(je),Ve={"start":{"x":0,"y":0},"end":we,"title":{"text":this._spec.title.text||this._dataFieldText,"maxWidth":this._getTitleLimit(fe)},"items":Ne};if(nt||(Ve.grid={"type":"line","start":{"x":0,"y":0},"end":we,"items":Ne[0],"verticalFactor":this._axisStyle.verticalFactor,"depth":Ae,"length":Ce}),ve){var Ge=null!==(at=this.directionStr)&&void 0!==at?at:"r2l",ti=this.layout3dBox?this.layout3dBox.width:0,li=[0,0],hi=-Math.PI/2,di=0;"l2r"===Ge&&(di=this.layout3dBox.length,li=[0,0,0],hi=Math.PI/2),Ve.z=di,Ve.alpha=hi,Ve.anchor3d=li,nt||(Ve.grid.depth=ti)}else{var fi=fe?this.layout.minHeight:this.layout.minWidth;(fe&&9===this._layout.layoutRectLevelMap.height||pe&&9===this._layout.layoutRectLevelMap.width)&&(fi=this._verticalLimitSize),Ve.verticalLimitSize=this._verticalLimitSize,Ve.verticalMinSize=fi,Ve.label={"overflowLimitLength":this._getLabelOverflowLimit(fe)}}return Ve},e.prototype.getLabelItems=function(nt){var at,lt=this,Rt=null===(at=this.getTickData())||void 0===at?void 0:at.getLatestData();return Rt&&Rt.length?[Rt.map((function(at){var Rt=lt._getNormalizedValue([at.value],nt);return YX(at.value,Rt)})).filter((function(nt){var at=nt.value,Rt=nt.rawValue,Bt=lt._scale.domain();return"log"===lt.getSpec().type?at>=0&&at<=1:FB(lt._scale.type)?Rt>=Bt[0]&&Rt<=kt(Bt):Bt.includes(Rt)}))]:[]},e.prototype.initEvent=function(){var at=this;nt.prototype.initEvent.call(this),this.visible&&(this.event.on(jW.layoutEnd,this._updateAxisLayout),this.event.on(jW.layoutEnd,this._fixAxisOnZero),this.event.on(jW.layoutRectUpdate,(function(){at._clearLayoutCache()})))},e.prototype._getNormalizedValue=function(nt,at){return 0===at?0:this.dataToPosition(nt)/at},e.prototype._layoutCacheProcessing=function(nt){var at=this;return["width","height"].forEach((function(lt){nt[lt]<at._layoutCache[lt]?nt[lt]=at._layoutCache[lt]:at._layoutCache[lt]=nt[lt]})),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach((function(nt){at.layout.getLastComputeOutBounds()[nt]=at._layoutCache._lastComputeOutBounds[nt]})):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach((function(nt){at.layout.getLastComputeOutBounds()[nt]<at._layoutCache._lastComputeOutBounds[nt]?at.layout.getLastComputeOutBounds()[nt]=at._layoutCache._lastComputeOutBounds[nt]:at._layoutCache._lastComputeOutBounds[nt]=at.layout.getLastComputeOutBounds()[nt]}))),nt},e.prototype._clearLayoutCache=function(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={"x1":0,"x2":0,"y1":0,"y2":0}},e.prototype.onDataUpdate=function(){this._clearLayoutCache()},e.prototype._appendAxisUnit=function(nt,at){var lt;if(this._spec.unit&&this._spec.unit.visible){var Rt=this._spec.unit,Bt=Rt.text,Lt=Rt.style,Ht=void 0,jt=void 0,$t=this.getLayoutStartPoint(),Kt=$t.x,te=$t.y;at?(Ht={"x":St(this._scale.range())+Kt,"y":te},jt={"textAlign":"left","textBaseline":"middle"}):(Ht={"x":Kt,"y":At(this._scale.range())+te},jt={"textAlign":"left"===this._orient?"left":"right","textBaseline":"bottom"}),jt=A(A(A({},jt),Lt),{"x":Ht.x,"y":Ht.y,"text":Bt}),this._unitText?this._unitText.setAttributes(jt):(this._unitText=Dg(jt),this._unitText.name="axis-unit",null===(lt=this.getContainer())||void 0===lt||lt.add(this._unitText));var ne=this._unitText.AABBBounds;at?(nt.x2+=ne.x2>nt.x2?ne.x2-nt.x2:0,nt.y2+=ne.y2>nt.y2?ne.y2-nt.y2:0):(nt.x1+=ne.x1<nt.x1?ne.x1-nt.x1:0,nt.y1+=ne.y1<nt.y1?ne.y1-nt.y1:0)}return nt},e.prototype._getNeedClearVRenderComponents=function(){return this._unitText?[this._unitText]:[]},e.prototype._getLabelOverflowLimit=function(nt){var at,lt;if(nt&&!1!==(null===(at=this._spec.label)||void 0===at?void 0:at.visible)&&!0===(null===(lt=this._spec.label)||void 0===lt?void 0:lt.autoLimit)){var Rt=this._option.getComponentsByKey("axes"),Bt=this.getRegions(),Lt=Rt.filter((function(nt){var at=nt.getOrient();return("left"===at||"right"===at)&&nt.getRegions().some((function(nt){return Bt.includes(nt)}))})),Ht=0,jt=0,$t=this.getLayoutStartPoint().x,Kt=$t+this.getLayoutRect().width;return Lt.forEach((function(nt){var at=nt.getLayoutStartPoint().x;if("left"===nt.getOrient()&&at===$t){var lt=nt.getLayoutRect().width;Ht=Math.max(Ht,lt)}else if(at===Kt){var Rt=nt.getLayoutRect().width;jt=Math.max(jt,Rt)}})),{"left":Ht,"right":jt}}},e.type=lt.cartesianAxis,e.specKey="axes",e}(u$),oK=function(nt,at,lt){return lt.reduce((function(nt,Rt,Bt){return nt.push([Rt,lt.length===Bt+1?at:lt[Bt+1]]),nt}),[[nt,lt[0]]])};function sK(nt,at){var lt=nt[0],Rt=nt[nt.length-1],Bt=at.filter((function(nt){return nt>lt&&nt<Rt}));return 0===Bt.length?[[lt,Rt]]:oK(lt,Rt,Bt)}var lK=function(nt,at){return nt-at},uK=function(nt,at){for(var lt=[{"count":0,"sub":[],"max":at[0],"min":at[0]}],Rt=0,Bt=0;Rt<at.length;)nt[Bt]<=at[Rt]?(lt[Rt].count+=1,lt[Rt].sub.push(nt[Bt]),Bt+=1):lt[Rt+=1]={"count":0,"sub":[],"max":at[Rt],"min":at[Rt]};lt.forEach((function(nt){nt.count&&(nt.min=Math.min.apply(null,nt.sub))}));var Lt=nt.slice(Bt);return lt[Rt]={"count":Lt.length,"sub":Lt,"min":at[at.length-1],"max":Math.max.apply(null,Lt)},lt};function cK(nt,at,lt){void 0===lt&&(lt="count");var Rt=uK(nt,at),Bt="count"===lt?nt.length:Rt.reduce((function(nt,at,lt){return at.count>0?nt+at.max-at.min:nt}),0),Lt=[],Ht=0,jt=0;return Rt.forEach((function(nt,at){if(0===Bt)Lt.push([0,at/Rt.length-1]);else{var $t="count"===lt?nt.count:nt.max-nt.min,Kt=Lt[jt-1]?Lt[jt-1][1]:0,te=at===Rt.length-1?1:Math.min((Ht+$t)/Bt,1);(Kt!==te||0!==Kt&&1!==Kt)&&(jt+=1,Lt.push([Kt,te]),Ht+=$t)}})),Lt}var d$=Math.sqrt(50),f$=Math.sqrt(10),p$=Math.sqrt(2),_$=function(){function t(){this._extend={},this.niceLabelFormatter=null}return t.prototype.setExtraAttrFromSpec=function(){N(this._spec.nice)&&(this._nice=this._spec.nice),N(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=NX(this._spec)},t.prototype.transformScaleDomain=function(){this.setScaleNice()},t.prototype.setLinearScaleNice=function(){var nt;if(!this._nice)return!1;var at=5,lt=this._spec.tick||{};if(Q(lt.forceTickCount))at=lt.forceTickCount;else if(H(lt.tickCount)){var Rt=this._scale.range(),Bt=Math.abs(kt(Rt)-Rt[0]);1===Bt&&this._option&&(Bt=_W(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),at=lt.tickCount({"axisLength":Bt,"labelStyle":this._spec.label&&this._spec.label.style})}else at=Q(lt.tickCount)?lt.tickCount:5;"accurateFirst"===this._spec.niceType&&(at=Math.max(5,at));var Lt=null!==(nt=this._domain)&&void 0!==nt?nt:{},Ht=Lt.min,jt=Lt.max;return j(Ht)&&j(jt)&&j(this._softMaxValue)&&j(this._softMinValue)?this._scale.nice(at):(N(Ht)||N(this._softMinValue))&&j(jt)&&j(this._softMaxValue)?this._scale.niceMax(at):!(!j(Ht)||!j(this._softMinValue)||!N(jt)&&!N(this._softMaxValue))&&this._scale.niceMin(at)},t.prototype.setLogScaleNice=function(){var nt;if(!this._nice)return!1;var at=null!==(nt=this._domain)&&void 0!==nt?nt:{},lt=at.min,Rt=at.max;return j(lt)&&j(Rt)&&j(this._softMaxValue)&&j(this._softMinValue)?this._scale.nice():(N(lt)||N(this._softMinValue))&&j(Rt)&&j(this._softMaxValue)?this._scale.niceMax():!(!j(lt)||!j(this._softMinValue)||!N(Rt)&&!N(this._softMaxValue))&&this._scale.niceMin()},t.prototype.setScaleNice=function(){return"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()},t.prototype.dataToPosition=function(nt,at){return this.valueToPosition(nt[0])},t.prototype.valueToPosition=function(nt){return this._scale.scale(nt)},t.prototype.computeLinearDomain=function(nt){var at=[];if(nt.length){var lt,Rt,Bt=this._spec.breaks&&this._spec.breaks.length,Lt=[];if(nt.forEach((function(nt){var at=nt.min,Ht=nt.max;lt=void 0===lt?at:Math.min(lt,at),Rt=void 0===Rt?Ht:Math.max(Rt,Ht),Bt&&(Lt=Lt.concat(nt.values))})),Bt){for(var Ht=[],jt=[],$t=j(this._domain.max)?Rt:this._domain.max,Kt=0;Kt<this._spec.breaks.length;Kt++){var te=this._spec.breaks[Kt].range;te[0]<=te[1]&&te[1]<=$t&&(Ht.push(te),jt.push(this._spec.breaks[Kt]))}if(Ht.sort((function(nt,at){return nt[0]-at[0]})),Ht.length){var ne=function(nt,at,lt){return nt.sort(lK),at.sort(lK),{"domain":sK(nt,at),"scope":cK(nt,at,lt)}}(Lt,Rk(Ht),this._spec.breaks[0].scopeType),re=ne.domain,ae=ne.scope;at=Rk(re),this._break={"domain":re,"scope":ae,"breakDomains":Ht,"breaks":jt}}else at=[lt,Rt]}else at=[lt,Rt]}else at[0]=0,at[1]=0;return this.setSoftDomainMinMax(at),this.expandDomain(at),this.includeZero(at),this.setDomainMinMax(at),at},t.prototype.expandDomain=function(nt){if(this._expand){var at=nt[0],lt=kt(nt);at===lt&&(0===lt?lt=1:lt>0?at=0:lt<0&&(lt=0)),N(this._expand.min)&&(nt[0]=at-(lt-at)*this._expand.min),N(this._expand.max)&&(nt[nt.length-1]=lt+(lt-at)*this._expand.max)}},t.prototype.niceDomain=function(nt){var at=NX(this._spec),lt=at.min,Rt=at.max;if(N(lt)||N(Rt)||"linear"!==this._spec.type)return nt;if(Math.abs(At(nt)-St(nt))<=1e-12){var Bt=nt[0],Lt=Bt>=0?1:-1;if((Bt=Math.abs(Bt))<1)nt[0]=0,nt[nt.length-1]=1;else{var Ht=Bt/5,jt=Math.floor(Math.log(Ht)/Math.LN10),$t=Ht/Math.pow(10,jt);Ht=($t>=d$?10:$t>=f$?5:$t>=p$?2:1)*Math.pow(10,jt),nt[0]=0,nt[nt.length-1]=10*Ht}Lt<0&&(nt.reverse(),nt[0]*=-1,nt[nt.length-1]*=-1)}return nt},t.prototype.includeZero=function(nt){this._zero&&(nt[0]=Math.min(nt[0],0),nt[nt.length-1]=Math.max(kt(nt),0))},t.prototype.setExtendDomain=function(nt,at){if(void 0!==at){this._extend[nt]=at;var lt=this._scale.domain();this.extendDomain(lt),this.includeZero(lt),this.setDomainMinMax(lt),this.niceDomain(lt),this._scale.domain(lt,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this.event.emit(jW.scaleUpdate,{"model":this,"value":"domain"})}else delete this._extend[nt]},t.prototype.extendDomain=function(nt){var at,lt=nt.length-1,Rt=nt[0]-nt[lt]>0,Bt=Rt?lt:0,Lt=Rt?0:lt;for(var Ht in this._extend)(at=this._extend[Ht])>nt[Lt]&&(nt[Lt]=at),at<nt[Bt]&&(nt[Bt]=at)},t.prototype.getDomainSpec=function(){return this._domain},t.prototype.setDomainMinMax=function(nt){if(this._domain){var at=this._domain,lt=at.min,Rt=at.max;N(lt)&&(nt[0]=lt),N(Rt)&&(nt[nt.length-1]=Rt)}},t.prototype.setSoftDomainMinMax=function(nt){var at=this._spec,lt=at.softMin,Rt=at.softMax;if(N(lt)){var Bt=H(lt)?lt(nt):lt;j(Bt)&&(Bt=nt[0]),Bt<=nt[0]&&(nt[0]=Bt,this._softMinValue=Bt)}if(N(Rt)){var Lt=H(Rt)?Rt(nt):Rt;j(Lt)&&(Lt=kt(nt)),Lt>=kt(nt)&&(nt[nt.length-1]=Lt),this._softMaxValue=Lt}},t.prototype.setZero=function(nt){this._zero!==nt&&(this._zero=nt,this.updateScaleDomain())},t.prototype.updateScaleDomain=function(){if(this.isSeriesDataEnable()){var nt=this.collectData(),at=this.computeLinearDomain(nt);this.updateScaleDomainByModel(at)}},t.prototype.updateScaleDomainByModel=function(nt){nt=null!=nt?nt:this._scale.domain(),this.extendDomain(nt),this.includeZero(nt),this.setDomainMinMax(nt),this.niceDomain(nt),this._scale.domain(nt,this._nice),this._nice&&!this.setScaleNice()&&this._scale.rescale(),this._updateNiceLabelFormatter(nt),this._domainAfterSpec=this._scale.domain(),this.event.emit(jW.scaleDomainUpdate,{"model":this}),this.event.emit(jW.scaleUpdate,{"model":this,"value":"domain"})},t.prototype.getDomainAfterSpec=function(){return this._domainAfterSpec},t.prototype._updateNiceLabelFormatter=function(nt){var at=Math.abs(kt(nt)-nt[0]),lt=Math.max(-Math.floor(Math.log10(at)),0)+2,Rt=Math.pow(10,lt);this.niceLabelFormatter=function(nt){return Q(+nt)?Math.round(+nt*Rt)/Rt:nt}},t}(),b$=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.cartesianLinearAxis,at._zero=!0,at._nice=!0,at._extend={},at._scale=new EB,at}return S(e,nt),e.prototype.setAttrFromSpec=function(){var at,lt,Rt=this;nt.prototype.setAttrFromSpec.call(this),this.setExtraAttrFromSpec();var Bt=null===(lt=null===(at=this._tickData)||void 0===at?void 0:at[0])||void 0===lt?void 0:lt.getDataView().transformsArr.find((function(nt){return nt.type===Rt.registerTicksTransform()}));Bt&&(Bt.options=this._tickTransformOption())},e.prototype.initScales=function(){var at,lt;nt.prototype.initScales.call(this);var Rt=[0,1];N(null===(at=this._domain)||void 0===at?void 0:at.min)&&(Rt[0]=this._domain.min),N(null===(lt=this._domain)||void 0===lt?void 0:lt.max)&&(Rt[1]=this._domain.max),this._scale.domain(Rt)},e.prototype._tickTransformOption=function(){var at,lt=this;return A(A({},nt.prototype._tickTransformOption.call(this)),{"breakData":(null===(at=this._spec.breaks)||void 0===at?void 0:at.length)?function(){return lt._break}:null})},e.prototype._getUpdateAttribute=function(at){var lt,Rt,Bt=this,Lt=nt.prototype._getUpdateAttribute.call(this,at);if(!xW(this._orient)&&(null===(Rt=null===(lt=this._break)||void 0===lt?void 0:lt.breaks)||void 0===Rt?void 0:Rt.length)){var Ht=this.getLayoutRect(),jt=Ht.width,$t=Ht.height,Kt=_W(this._orient),te=Kt?jt:$t;Lt.breaks=this._break.breaks.map((function(nt){var at,lt=nt.range,Rt=nt.breakSymbol,Lt=nt.gap,Ht=void 0===Lt?6:Lt,jt=Bt.valueToPosition((lt[0]+lt[1])/2)/te;at=dF(Ht)?Number(Ht.substring(0,Ht.length-1))/100:Ht/te;var $t=Q(null==Rt?void 0:Rt.angle)?Rt.angle:Kt?60:15;return{"range":[jt-at/2,jt+at/2],"breakSymbol":A(A({"visible":!0},Rt),{"angle":$t*Math.PI/180}),"rawRange":lt}}))}return Lt},e.prototype.getNewScaleRange=function(){var at,lt,Rt=nt.prototype.getNewScaleRange.call(this);return(null===(at=this._spec.breaks)||void 0===at?void 0:at.length)&&(null===(lt=this._break)||void 0===lt?void 0:lt.scope)&&(Rt=Rk(this._break.scope).map((function(nt){return Rt[0]+(kt(Rt)-Rt[0])*nt}))),Rt},e.prototype.computeDomain=function(nt){return this.computeLinearDomain(nt)},e.prototype.axisHelper=function(){var at=nt.prototype.axisHelper.call(this);return at.setExtendDomain=this.setExtendDomain.bind(this),at.valueToPosition=this.valueToPosition.bind(this),at},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,jI),nt},e.type=lt.cartesianLinearAxis,e.specKey="axes",e}(h$);bt(b$,_$);var gK=function(){bV(),MV(),nK(),Tz.registerComponent(b$.type,b$)},x$=function(){function t(){this._rawDomainIndex=[]}return t.prototype._initData=function(){var nt,at;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(var lt=0;lt<this._scales.length;lt++){var Rt=(null!==(nt=this._spec.layers)&&void 0!==nt?nt:[])[this._scales.length-1-lt]||{};if(!1!==Rt.visible&&0!==Rt.tickCount&&0!==Rt.forceTickCount){(at=this._initTickDataSet(A(A({},this._tickTransformOption()),Rt),lt)).target.addListener("change",this._forceLayout.bind(this));var Bt=new oY(this._option,at);this._tickData.push(Bt),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[lt]=Bt}}else(at=this._initTickDataSet(this._tickTransformOption())).target.addListener("change",this._forceLayout.bind(this)),Bt=new oY(this._option,at),this._tickData=[Bt],this._tickDataMap={"0":Bt}},t.prototype.dataToPosition=function(nt,at){var lt,Rt;if(void 0===at&&(at={}),0===nt.length||0===this._scales.length)return 0;var Bt=this.getPosition(nt);return Bt.position+Bt.bandScale.bandwidth()*(null!==(Rt=null!==(lt=at.bandPosition)&&void 0!==lt?lt:this._spec.bandPosition)&&void 0!==Rt?Rt:this._defaultBandPosition)},t.prototype.valueToPosition=function(nt){return this._scale.scale(nt)},t.prototype.updateGroupScaleRange=function(){var nt=this._scale;this._scales.forEach((function(at,lt){lt>0&&(at.range([0,nt.bandwidth()]),nt=at)}))},t.prototype.getPosition=function(nt){var at=0,lt=this._scale;if(1===this._scales.length||1===nt.length)at=this.valueToPosition(nt[0]);else{for(var Rt=Math.min(nt.length,this._scales.length),Bt=0;Bt<Rt;Bt++)at+=this._scales[Bt].scale(nt[Bt]);lt=this._scales[Rt-1]}return{"position":at,"bandScale":lt}},t.prototype.calcScales=function(nt,at){for(var lt,Rt,Bt=this._spec,Lt=Bt.bandPadding,Ht=Bt.paddingInner,jt=Bt.paddingOuter,$t=X(Lt),Kt=X(Ht),te=X(jt),ne=0;ne<this._scales.length;ne++){var re=$t?Lt[ne]:Lt,ae=Kt?Ht[ne]:Ht,oe=te?jt[ne]:jt;this._scales[ne].paddingInner(null!==(lt=null!=ae?ae:re)&&void 0!==lt?lt:nt,!0).paddingOuter(null!==(Rt=null!=oe?oe:re)&&void 0!==Rt?Rt:at,!0)}},t.prototype.computeBandDomain=function(nt){if(!nt.length)return[];if(1===nt.length)return nt[0].values;for(var at=new Set,lt=0;lt<nt.length;lt++)for(var Rt=0;Rt<nt[lt].values.length;Rt++)at.add(nt[lt].values[Rt]);return Array.from(at)},t.prototype.updateScaleDomain=function(){var nt,at=this;if(this.isSeriesDataEnable()){!(null===(nt=this._rawDomainIndex)||void 0===nt?void 0:nt.length)&&this._scales.length&&this._updateRawDomain();for(var lt=this._spec.domain,n=function(nt){if(lt&&lt.length&&0===nt)Rt._scales[nt].domain(lt);else{var Bt=Rt.collectData(nt),Lt=Rt.computeBandDomain(Bt);Rt._scales[nt].domain(Lt.sort((function(lt,Rt){return at._rawDomainIndex[nt][lt]-at._rawDomainIndex[nt][Rt]})))}},Rt=this,Bt=0;Bt<this._scales.length;Bt++)n(Bt);this.transformScaleDomain(),this.event.emit(jW.scaleDomainUpdate,{"model":this}),this.event.emit(jW.scaleUpdate,{"model":this,"value":"domain"})}},t.prototype.getLabelItems=function(nt){var at=this,lt=[],Rt=[];return this._scales.forEach((function(Bt,Lt){var Ht,jt=at._tickDataMap[Lt],$t=null===(Ht=null==jt?void 0:jt.getLatestData())||void 0===Ht?void 0:Ht.length,Kt=$t?jt.getLatestData().map((function(nt){return nt.value})):Bt.domain();if(Kt&&Kt.length)if(Rt&&Rt.length){var te=[],ne=[];Rt.forEach((function(lt){Kt.forEach((function(Rt){var Bt=xt(lt).concat(Rt);if(ne.push(Bt),$t){var Lt=YX(Rt,at._getNormalizedValue(Bt,nt));te.push(Lt)}}))})),$t&&lt.push(te.filter((function(nt){return nt.value>=0&&nt.value<=1}))),Rt=ne}else Kt.forEach((function(nt){Rt.push(nt)})),$t&&lt.push(jt.getLatestData().map((function(lt){return YX(lt.value,at._getNormalizedValue([lt.value],nt))})).filter((function(nt){return nt.value>=0&&nt.value<=1})))})),lt.reverse()},t.prototype._updateRawDomain=function(){var nt=this;this._rawDomainIndex=[];for(var at=this._spec.domain,i=function(Rt){if(at&&at.length&&0===Rt)lt._scales[Rt].domain(at);else{var Bt=lt.collectData(Rt,!0),Lt=lt.computeBandDomain(Bt);lt._rawDomainIndex[Rt]={},Lt.forEach((function(at,lt){return nt._rawDomainIndex[Rt][at]=lt}))}},lt=this,Rt=0;Rt<this._scales.length;Rt++)i(Rt)},t.prototype._clearRawDomain=function(){this._rawDomainIndex=[]},t}(),C$=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.cartesianBandAxis,at._scale=new LI,at}return S(e,nt),e.prototype.computeDomain=function(nt){return this.computeBandDomain(nt)},e.prototype.updateScaleRange=function(){var at=nt.prototype.updateScaleRange.call(this);return this.updateGroupScaleRange(),at},e.prototype.initScales=function(){nt.prototype.initScales.call(this),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)},e.prototype.axisHelper=function(){var nt=this,e=function(at){return void 0===at&&(at=0),nt._scales[at]};return{"isContinuous":!1,"dataToPosition":this.dataToPosition.bind(this),"getScale":e,"getBandwidth":function(nt){return void 0===nt&&(nt=0),e(nt).bandwidth()},"getAxisType":function(){return nt.type},"getAxisId":function(){return nt.id},"isInverse":function(){return nt._inverse},"getSpec":function(){return nt._spec}}},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,UI),nt},e.prototype.transformScaleDomain=function(){this.updateFixedWholeLength()},e.prototype.updateFixedWholeLength=function(){if(this._scale){var nt=this._getOuterBandSizeFromSpec(),at=nt.bandSize,lt=nt.maxBandSize,Rt=nt.minBandSize;if(at&&this._scale.bandwidth(at),lt&&this._scale.maxBandwidth(lt),Rt&&this._scale.minBandwidth(Rt),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(at||lt)){var Bt=$B(this._scale.domain().length,null!=at?at:lt,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach((function(nt){return nt.setMaxWidth(Bt)})):["left","right"].includes(this._orient)&&this._regions.forEach((function(nt){return nt.setMaxHeight(Bt)}))}}},e.prototype._getOuterBandSizeFromSpec=function(){var nt,at=this,lt=this._spec,Rt=lt.bandSize,Bt=lt.maxBandSize,Lt=lt.minBandSize,Ht=lt.bandSizeLevel,jt=void 0===Ht?0:Ht,$t=null!==(nt=this._spec.bandSizeExtend)&&void 0!==nt?nt:{},Kt=$t.gap,te=$t.extend,ne=void 0===te?0:te;jt=Math.min(jt,this._scales.length-1);for(var d=function(nt){var lt=re._scales[nt],Ht=lt.domain(),$t=lt.paddingInner(),te=lt.paddingOuter(),d=function(lt){var Rt=nt===jt?ne:0;return j(Kt)||nt<jt?$B(Ht.length,lt,$t,te)+Rt:(lt+(Y(Kt)?lt*(Number(Kt.substring(0,Kt.length-1))/100):Kt))*Ht.length/(at._scales[nt-1].paddingInner()+1)+Rt};N(Rt)&&(Rt=d(Rt)),N(Bt)&&(Bt=d(Bt)),N(Lt)&&(Lt=d(Lt))},re=this,ae=jt;ae>0;ae--)d(ae);return{"bandSize":Rt,"maxBandSize":Bt,"minBandSize":Lt}},e.type=lt.cartesianBandAxis,e.specKey="axes",e}(h$);bt(C$,x$);var _K=function(){bV(),MV(),nK(),Tz.registerComponent(C$.type,C$)},T$=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.cartesianTimeAxis,at._zero=!1,at.effect={"scaleUpdate":function(nt){at.computeData(null==nt?void 0:nt.value),VO(at._regions,(function(nt){_W(at.getOrient())?XX(nt.getXAxisHelper(),at.axisHelper(),N(at._seriesUserId)||N(at._seriesIndex))&&nt.setXAxisHelper(at.axisHelper()):XX(nt.getYAxisHelper(),at.axisHelper(),N(at._seriesUserId)||N(at._seriesIndex))&&nt.setYAxisHelper(at.axisHelper())}),{"userId":at._seriesUserId,"specIndex":at._seriesIndex})}},at}return S(e,nt),e.prototype.setAttrFromSpec=function(){var at;nt.prototype.setAttrFromSpec.call(this),this._tick=gz({},this._spec.tick,null===(at=this._spec.layers)||void 0===at?void 0:at[0])},e.prototype._initData=function(){var at;if(nt.prototype._initData.call(this),null===(at=this._spec.layers)||void 0===at?void 0:at[1]){var lt=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_layer_1_ticks")}).parse(this._scale,{"type":"scale"}).transform({"type":"".concat(this.type,"-ticks"),"options":A(A({},this._tickTransformOption()),{"tickCount":this._spec.layers[1].tickCount,"forceTickCount":this._spec.layers[1].forceTickCount,"tickStep":this._spec.layers[1].tickStep})},!1);this._layerTickData=new oY(this._option,lt)}},e.prototype.computeData=function(at){nt.prototype.computeData.call(this,at),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())},e.prototype._getLabelFormatMethod=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t=this,Kt=Ji.getInstance(),te=(null===(at=null===(nt=this._spec.layers)||void 0===nt?void 0:nt[1])||void 0===at?void 0:at.timeFormat)||"%Y%m%d",ne="local"===((null===(Rt=null===(lt=this._spec.layers)||void 0===lt?void 0:lt[1])||void 0===Rt?void 0:Rt.timeFormatMode)||"local")?Kt.timeFormat:Kt.timeUTCFormat,re=(null===(Lt=null===(Bt=this._spec.layers)||void 0===Bt?void 0:Bt[0])||void 0===Lt?void 0:Lt.timeFormat)||"%Y%m%d",ae="local"===((null===(jt=null===(Ht=this._spec.layers)||void 0===Ht?void 0:Ht[0])||void 0===jt?void 0:jt.timeFormatMode)||"local")?Kt.timeFormat:Kt.timeUTCFormat;return function(nt,at,lt,Rt,Bt){var Lt,Ht;return Ht=0===Bt?ae(re,nt):ne(te,nt),(null===(Lt=$t._spec.label)||void 0===Lt?void 0:Lt.formatMethod)?$t._spec.label.formatMethod(Ht,at):Ht}},e.prototype.getLabelItems=function(nt){var at,lt,Rt=this,Bt=[],Lt=null===(at=this.getTickData())||void 0===at?void 0:at.getLatestData();Lt&&Lt.length&&Bt.push(Lt.map((function(at){return YX(at.value,Rt._getNormalizedValue([at.value],nt))})));var Ht=null===(lt=this._layerTickData)||void 0===lt?void 0:lt.getLatestData();return Ht&&Ht.length&&Bt.push(Ht.map((function(at){return YX(at.value,Rt._getNormalizedValue([at.value],nt))}))),Bt},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,jI),nt},e.prototype.transformScaleDomain=function(){},e.type=lt.cartesianTimeAxis,e.specKey="axes",e}(b$),xK=function(){bV(),MV(),nK(),Tz.registerComponent(T$.type,T$)},P$=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.cartesianLogAxis,at._zero=!1,at._scale=new RB,at}return S(e,nt),e.prototype.initScales=function(){var at;nt.prototype.initScales.call(this),this._scale.base(null!==(at=this._spec.base)&&void 0!==at?at:10),this._scale.clamp(!0,null,!1)},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,jI),nt},e.prototype.transformScaleDomain=function(){},e.type=lt.cartesianLogAxis,e.specKey="axes",e}(b$);bt(P$,_$);var SK=function(){bV(),MV(),nK(),Tz.registerComponent(P$.type,P$)},F$=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.cartesianSymlogAxis,at._zero=!1,at._scale=new iO,at}return S(e,nt),e.prototype.initScales=function(){var at;nt.prototype.initScales.call(this),this._scale.constant(null!==(at=this._spec.constant)&&void 0!==at?at:10)},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,jI),nt},e.prototype.transformScaleDomain=function(){},e.type=lt.cartesianSymlogAxis,e.specKey="axes",e}(b$);bt(F$,_$);var wK=function(){bV(),MV(),nK(),Tz.registerComponent(F$.type,F$)},$$=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.line,lt.transformerConstructor=JX,lt._sortDataByAxis=!1,lt}return S(i,at),i.prototype.compile=function(){at.prototype.compile.call(this),this.addSamplingCompile(),this.addOverlapCompile()},i.prototype.initMark=function(){var nt,at={"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold},lt=null!==(nt=this._spec.seriesMark)&&void 0!==nt?nt:"line";this.initLineMark(at,"line"===lt),this.initSymbolMark(at,"point"===lt)},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this);var nt=this._tooltipHelper.activeTriggerSet,lt=nt.group,Rt=nt.mark;this._lineMark&&lt.add(this._lineMark),this._symbolMark&&(Rt.add(this._symbolMark),lt.add(this._symbolMark))},i.prototype.initMarkStyle=function(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt={"direction":this.direction},Lt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;if(this._lineMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("line"))||void 0===lt?void 0:lt(Bt,Lt),aX("line",this._spec,this._markAttributeContext))),this._symbolMark){var Ht=vX(this);this._symbolMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("scaleInOut"))||void 0===Rt?void 0:Rt(),aX("point",this._spec,this._markAttributeContext),Ht))}},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this.reCompileSampling()},i.prototype.getSeriesStyle=function(nt){var at,lt=this,Rt="point"!==(null===(at=this._spec)||void 0===at?void 0:at.seriesMark);return function(at){var Bt,Lt;return Rt&&"fill"===at&&(at="stroke"),null!==(Lt=null===(Bt=lt._seriesMark)||void 0===Bt?void 0:Bt.getAttribute(at,nt))&&void 0!==Lt?Lt:void 0}},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[this._lineMark,this._symbolMark]},i.type=nt.SeriesTypeEnum.line,i.mark=zX,i.transformerConstructor=JX,i}(AX);bt($$,FX);var TK=function(){jV(),NV(),wX(),CX(),QY(),qY(),_K(),gK(),Tz.registerSeries($$.type,$$)},q$=function(){function t(nt){this._dataArr=[],this._dataSet=nt}return Object.defineProperty(t.prototype,"dataList",{"get":function(){return this._dataArr},"enumerable":!1,"configurable":!0}),t.prototype.parseData=function(nt){this._dataArr=[];for(var at=xt(nt),lt=0;lt<at.length;lt++)this._dataArr.push(iU(at[lt],this._dataSet,this._dataArr))},t.prototype.updateData=function(nt,at,lt){void 0===at&&(at=!1),void 0===lt&&(lt=!0);var Rt=xt(nt);return!(at&&Rt.length!==this._dataArr.length||(this._dataValueForEach(Rt,(function(nt,at){at.markRunning()})),this._dataValueForEach(Rt,(function(nt,at){nU(at,nt,lt)})),0))},t.prototype._dataValueForEach=function(nt,at){var lt=this;nt.forEach((function(nt,Rt){if(!(nt instanceof Es)){var Bt=lt.getSeriesData(nt.id,Rt);Bt&&at(nt,Bt,Rt)}}))},t.prototype.getSeriesData=function(nt,at){if(!this._dataArr.length)return null;if("string"==typeof nt){var lt=this._dataArr.filter((function(at){return at.name===nt}));if(lt[0])return lt[0];Bk("no data matches dataId ".concat(nt,"!"))}if("number"==typeof at){if(this._dataArr[at])return this._dataArr[at];Bk("no data matches dataIndex ".concat(at,"!"))}return this._dataArr[0]},t}(),K$=function(){function t(nt,at){var lt=this;this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=function(nt){var at=[];return lt._scaleSpecMap.forEach((function(lt,Rt){Gk(lt.domain)&&lt.domain.forEach((function(Rt){Rt.dataId===nt&&Rt.fields.forEach((function(nt){sH(at,[{"key":nt,"operations":FB(lt.type)?["max","min"]:["values"]}])}))}))})),lt._markAttributeScaleMap.forEach((function(Rt,Bt){var Lt=lt.getScale(Bt);Rt.forEach((function(Rt){lt._getSeriesBySeriesId(Rt.seriesId).getRawData().name===nt&&Rt.field&&sH(at,[{"key":Rt.field,"operations":FB(Lt.type)?["max","min"]:["values"]}])}))})),at},this._spec=nt,this._chart=at,this._setAttrFromSpec()}return t.prototype._createFromSpec=function(nt){if(!nt.id)return null;var at=this._scaleMap.get(nt.id);return at||(at="ordinal"===nt.type&&"color"===nt.id?lF("colorOrdinal"):lF(nt.type)),at?(X(nt.range)&&at.range(nt.range),X(nt.domain)&&(Gk(nt.domain)||at.domain(nt.domain)),nt.specified&&at.specified&&at.specified(nt.specified),nt.clamp&&at.clamp&&at.clamp(nt.clamp),at):null},t.prototype._setAttrFromSpec=function(){var nt,at=this;if(null===(nt=this._spec)||void 0===nt?void 0:nt.length){var lt=new Map,Rt=new Map;this._spec.forEach((function(nt){var Bt=at._createFromSpec(nt);Bt&&(lt.set(nt.id,Bt),Rt.set(nt.id,nt))})),this._modelScaleSpecMap.forEach((function(nt){var Bt=at._createFromSpec(nt);Bt&&(lt.set(nt.id,Bt),Rt.set(nt.id,nt))})),this._scaleSpecMap=Rt,this._scaleMap=lt}},t.prototype.updateSpec=function(nt){var at={"change":!1,"reMake":!1,"reRender":!1,"reSize":!1,"reCompile":!1};if(mt(nt,this._spec))return at;at.change=!0;for(var i=function(Rt){var Bt=nt[Rt],Lt=lt._scaleMap.get(Bt.id);if(!Lt)return at.reMake=!0,{"value":at};var Ht=lt._spec.find((function(nt){return nt.id===Bt.id}));return Ht.id?Ht.type!==Bt.type?(at.reMake=!0,{"value":at}):mt(Ht.specified,Bt.specified)?(Bt.range&&!mt(Bt.range,Lt.range())&&(Lt.range(Bt.range),at.reRender=!0),Gk(Bt.domain)?at.reRender=!0:mt(Bt.domain,Lt.domain())||(Lt.domain(Bt.domain),at.reRender=!0),void lt._scaleSpecMap.set(Bt.id,Bt)):(at.reMake=!0,{"value":at}):(at.reMake=!0,{"value":at})},lt=this,Rt=0;Rt<nt.length;Rt++){var Bt=i(Rt);if("object"==typeof Bt)return Bt.value}return this._spec=nt,at},t.prototype.registerModelScale=function(nt){var at=this._createFromSpec(nt);at&&(this._modelScaleSpecMap.set(nt.id,nt),this._scaleSpecMap.set(nt.id,nt),this._scaleMap.set(nt.id,at))},t.prototype.removeModelScale=function(nt){var at=this;this._modelScaleSpecMap.forEach((function(lt){nt(lt)&&(at._modelScaleSpecMap.delete(lt.id),at._scaleSpecMap.delete(lt.id),at._scaleMap.delete(lt.id))}))},t.prototype.getScale=function(nt){return this._scaleMap.get(nt)},t.prototype.getScaleSpec=function(nt){return this._scaleSpecMap.get(nt)},t.prototype._getSeriesByRawDataId=function(nt){for(var at=this._chart.getAllSeries(),lt=0;lt<at.length;lt++){var Rt=at[lt];if(Rt.getRawData().name===nt)return Rt}return null},t.prototype._getSeriesBySeriesId=function(nt){for(var at=this._chart.getAllSeries(),lt=0;lt<at.length;lt++){var Rt=at[lt];if(Rt.id===nt)return Rt}return null},t.prototype.updateScaleDomain=function(nt){var at=this;this._scaleSpecMap.forEach((function(lt,Rt){var Bt=at._scaleMap.get(Rt);if(Bt){if(!Gk(lt.domain))return lt.domain&&0!==lt.domain.length||Bt.domain(nt),void at._updateMarkScale(Rt,Bt,Bt.domain().slice());var Lt;Lt=FB(lt.type)?[null,null]:new Set,lt.domain.forEach((function(nt){var Rt=at._getSeriesByRawDataId(nt.dataId);if(Rt){var Bt=FB(lt.type);nt.fields.forEach((function(nt){var at=Rt.getRawDataStatisticsByField(nt,Bt);at&&(Bt?(j(Lt[0])?Lt[0]=at.min:Lt[0]=Math.min(at.min,Lt[0]),j(Lt[1])?Lt[1]=at.max:Lt[1]=Math.max(at.max,Lt[1])):at.values.forEach((function(nt){Lt.add(nt)})))}))}}));var Ht=Lt;FB(lt.type)||(Lt=Array.from(Lt)),Bt.domain(Lt),at._updateMarkScale(Rt,Bt,Ht)}}))},t.prototype._updateMarkScale=function(nt,at,lt){var Rt=this,Bt=this._markAttributeScaleMap.get(nt);Bt&&0!==Bt.length&&Bt.forEach((function(nt){if(nt.field&&nt.markScale&&nt.markScale!==at)if(j(nt.changeDomain)||"none"===nt.changeDomain||j(nt.seriesId))FB(at.type)?nt.markScale.domain(lt):at.domain(Array.from(lt));else{var Bt=Rt._getSeriesBySeriesId(nt.seriesId),Lt=FB(at.type),Ht=Bt.getRawDataStatisticsByField(nt.field,Lt);if(!ot(Ht))return"expand"===nt.changeDomain?(Lt?(lt[0]=Math.min(lt[0],Ht.min),lt[1]=Math.max(lt[1],Ht.max)):(Ht.values.forEach((function(nt){lt.add(nt)})),lt=Array.from(lt)),void nt.markScale.domain(lt)):void("replace"!==nt.changeDomain||(Lt?nt.markScale.domain([Ht.min,Ht.max]):nt.markScale.domain(Ht.values)));FB(at.type)?nt.markScale.domain(lt):at.domain(Array.from(lt))}}))},t.prototype.registerMarkAttributeScale=function(nt,at){var lt=this._scaleMap.get(nt.scale),Rt=this._markAttributeScaleMap.get(nt.scale);Rt||(Rt=[],this._markAttributeScaleMap.set(nt.scale,Rt));var Bt=lt;return(j(nt.field)||!j(nt.changeDomain)&&"none"!==nt.changeDomain&&!j(at))&&(Bt=lt.clone()),Rt.push(A(A({},nt),{"seriesId":at,"markScale":Bt})),Bt},t}(),eq=function(at){function i(nt,lt){var Rt,Bt,Lt,Ht=this;return(Ht=at.call(this,lt)||this).type="chart",Ht.id=Nk(),Ht._regions=[],Ht._series=[],Ht._components=[],Ht._layoutRect={"x":0,"y":0,"width":DF,"height":LF},Ht._viewRect={"width":DF,"height":LF},Ht._viewBox={"x1":0,"y1":0,"x2":DF,"y2":LF},Ht._layoutTag=!0,Ht._idMap=new Map,Ht.state={"layoutUpdateRank":1},Ht.padding={"top":0,"left":0,"right":0,"bottom":0},Ht.getAllSeries=function(){var nt;return null!==(nt=Ht._series)&&void 0!==nt?nt:[]},Ht.getRegionsInIndex=function(nt){return nt&&0!==nt.length?Ht._regions.filter((function(at,lt){return nt.includes(lt)})):[Ht._regions[0]]},Ht.getAllRegions=function(){return Ht._regions},Ht.getRegionsInIds=function(nt){return nt?Ht._regions.filter((function(at){return nt.includes(at.id)})):[]},Ht.getRegionsInQuerier=function(nt){return nt?Ht._regions.filter((function(at,lt){return xt(nt).some((function(nt){return N(nt.regionId)&&nt.regionId===at.userId||nt.regionIndex===lt}))})):Ht._regions},Ht.getRegionsInUserId=function(nt){if(nt)return Ht._regions.find((function(at){return at.userId===nt}))},Ht.getRegionsInUserIdOrIndex=function(nt,at){return Ht.getAllRegions().filter((function(lt){return(null==nt?void 0:nt.length)?lt.userId&&nt.includes(lt.userId):!(null==at?void 0:at.length)||at.includes(lt.getSpecIndex())}))},Ht.getComponents=function(){return Ht._components},Ht.getSeriesInIndex=function(nt){return nt&&0!==nt.length?Ht._series.filter((function(at,lt){return nt.includes(lt)})):[Ht._series[0]]},Ht.getSeriesInIds=function(nt){return nt?Ht._series.filter((function(at){return nt.includes(at.id)})):[]},Ht.getSeriesInUserId=function(nt){if(nt)return Ht._series.find((function(at){return at.userId===nt}))},Ht.getSeriesInUserIdOrIndex=function(nt,at){return Ht.getAllSeries().filter((function(lt){return(null==nt?void 0:nt.length)?lt.userId&&nt.includes(lt.userId):!(null==at?void 0:at.length)||at.includes(lt.getSpecIndex())}))},Ht.getComponentByIndex=function(nt,at){var lt=Ht._components.filter((function(at){return(at.specKey||at.type)===nt}));if(lt&&0!==lt.length)return lt[at]},Ht.getComponentsByKey=function(nt){return Ht._components.filter((function(at){return(at.specKey||at.type)===nt}))},Ht.getComponentByUserId=function(nt){var at=Ht._components.find((function(at){return at.userId===nt}));if(at)return at},Ht.getComponentsByType=function(nt){return Ht._components.filter((function(at){return at.type===nt}))},Ht._paddingSpec=vF(null!==(Rt=nt.padding)&&void 0!==Rt?Rt:lt.getTheme().padding),Ht._event=new QG(lt.eventDispatcher,lt.mode),Ht._dataSet=lt.dataSet,Ht._chartData=new q$(Ht._dataSet),Ht._modelOption=A(A({},lt),{"mode":Ht._option.mode,"map":Ht._idMap,"getChartLayoutRect":function(){return Ht._layoutRect},"getChartViewRect":function(){return Ht._viewRect},"getChart":function(){return Ht},"globalScale":Ht._globalScale,"onError":null===(Bt=Ht._option)||void 0===Bt?void 0:Bt.onError,"disableTriggerEvent":!0===(null===(Lt=Ht._option)||void 0===Lt?void 0:Lt.disableTriggerEvent),"getSeriesData":Ht._chartData.getSeriesData.bind(Ht._chartData)}),Ht._spec=nt,Ht}return S(i,at),i.prototype.getSpec=function(){return this._spec},i.prototype.setSpec=function(nt){this._spec=nt},i.prototype.getOption=function(){return this._option},i.prototype.getLayoutRect=function(){return this._layoutRect},i.prototype.getViewRect=function(){return this._viewRect},i.prototype.getLayoutTag=function(){return this._layoutTag},i.prototype.setLayoutTag=function(nt,at,lt){void 0===lt&&(lt=!0),this._layoutTag=nt;var Rt=this.getCompiler();return(null==Rt?void 0:Rt.getVGrammarView())&&(Rt.getVGrammarView().updateLayoutTag(),nt&&lt&&Rt.renderNextTick(at)),this._layoutTag},i.prototype.getGlobalScale=function(){return this._globalScale},i.prototype.getEvent=function(){return this._event},Object.defineProperty(i.prototype,"chartData",{"get":function(){return this._chartData},"enumerable":!1,"configurable":!0}),i.prototype.created=function(nt){this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),nt.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),nt.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),nt.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())},i.prototype.init=function(){var nt,at,lt=this;null===(nt=this._beforeInit)||void 0===nt||nt.call(this),this._regions.forEach((function(nt){return nt.init({})})),this._series.forEach((function(nt){return nt.init({})})),this._components.forEach((function(nt){return nt.init({"dataSet":lt._dataSet})})),this._initEvent(),null===(at=this._initStack)||void 0===at||at.call(this),this.reDataFlow()},i.prototype.reDataFlow=function(){this._series.forEach((function(nt){var at;return null===(at=nt.getRawData())||void 0===at?void 0:at.markRunning()})),this._series.forEach((function(nt){return nt.fillData()})),this.updateGlobalScaleDomain()},i.prototype.onResize=function(nt,at,lt){void 0===lt&&(lt=!0);var Rt={"width":nt,"height":at};this._canvasRect=Rt,this._updateLayoutRect(this._option.viewBox),this.setLayoutTag(!0,null,lt)},i.prototype.updateViewBox=function(nt,at){this._option.viewBox=nt,this._updateLayoutRect(nt),this.setLayoutTag(!0,null,at)},i.prototype._createBackground=function(){var nt=this,at=this._spec.background;if(at&&"object"==typeof at&&!N(at.gradient)){var lt=vt(at,["x","y","width","height","x1","y1","image"]);lt.background=at.image,this._backgroundMark=Tz.createMark("group","chart-background",{"model":this,"map":this._option.map,"getCompiler":this.getCompiler,"globalScale":this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(A(A({},lt),{"x":function(){return nt._viewBox.x1},"y":function(){return nt._viewBox.y1},"width":function(){return nt._viewBox.x2-nt._viewBox.x1},"height":function(){return nt._viewBox.y2-nt._viewBox.y1}})),this._backgroundMark.setMarkConfig({"zIndex":MU.SeriesGroup-2})}},i.prototype._createRegion=function(nt,at){if(nt){var lt=at.spec,Rt=w(at,["spec"]),Bt=new nt(lt,A(A({},this._modelOption),Rt));Bt&&(Bt.created(),this._regions.push(Bt))}},i.prototype._createSeries=function(nt,at){if(nt){var lt,Rt=at.spec,Bt=w(at,["spec"]);if(N(Rt.regionId)?lt=this.getRegionsInUserId(Rt.regionId):N(Rt.regionIndex)&&(lt=this.getRegionsInIndex([Rt.regionIndex])[0]),lt||(lt=this._regions[0])){var Lt=new nt(Rt,A(A(A({},this._modelOption),Bt),{"type":Rt.type,"region":lt,"globalScale":this._globalScale,"sourceDataList":this._chartData.dataList}));Lt&&(Lt.created(),this._series.push(Lt),lt.addSeries(Lt))}}},i.prototype.getSeriesById=function(nt){return this._series.find((function(at){return at.id===nt}))},i.prototype._createComponent=function(nt,at){var lt=nt.createComponent(at,A(A({},this._modelOption),{"type":nt.type,"getAllRegions":this.getAllRegions,"getRegionsInIndex":this.getRegionsInIndex,"getRegionsInIds":this.getRegionsInIds,"getRegionsInUserIdOrIndex":this.getRegionsInUserIdOrIndex,"getAllSeries":this.getAllSeries,"getSeriesInIndex":this.getSeriesInIndex,"getSeriesInIds":this.getSeriesInIds,"getSeriesInUserIdOrIndex":this.getSeriesInUserIdOrIndex,"getAllComponents":this.getComponents,"getComponentByIndex":this.getComponentByIndex,"getComponentByUserId":this.getComponentByUserId,"getComponentsByKey":this.getComponentsByKey,"getComponentsByType":this.getComponentsByType}));lt&&(lt.created(),this._components.push(lt))},i.prototype.getAllComponents=function(){return this._components},i.prototype.getAllModels=function(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())},i.prototype.getModelInFilter=function(nt){if(Y(nt))return this.getAllModels().find((function(at){return at.userId===nt}));if(H(nt))return this.getAllModels().find((function(at){return nt(at)}));var at=0;return this.getAllModels().find((function(lt){var Rt;if((null!==(Rt=lt.specKey)&&void 0!==Rt?Rt:lt.type)===nt.type){if(at===nt.index)return!0;at++}return!1}))},i.prototype._createLayout=function(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()},i.prototype.setLayout=function(nt){this._option.layout=nt,this._initLayoutFunc()},i.prototype._initLayoutFunc=function(){var nt,at,lt;if(this._layoutFunc=this._option.layout,!this._layoutFunc){var Rt=!1;(this._spec.zField||this._spec.series&&this._spec.series.some((function(nt){return nt.zField})))&&(Rt=!0);var Bt=Tz.getLayoutInKey(null!==(at=null===(nt=this._spec.layout)||void 0===nt?void 0:nt.type)&&void 0!==at?at:Rt?"layout3d":"base");if(Bt){var Lt=new Bt(this._spec.layout,{"onError":null===(lt=this._option)||void 0===lt?void 0:lt.onError});this._layoutFunc=Lt.layoutItems.bind(Lt)}}},i.prototype.layout=function(nt){var at,lt,Rt,Bt;if(null===(lt=null===(at=this._option.performanceHook)||void 0===at?void 0:at.beforeLayoutWithSceneGraph)||void 0===lt||lt.call(at),this.getLayoutTag()){this._event.emit(jW.layoutStart,{"chart":this,"vchart":this._option.globalInstance}),this.onLayoutStart(nt);var Lt=this.getLayoutElements();this._layoutFunc(this,Lt,this._layoutRect,this._viewBox),this._event.emit(jW.afterLayout,{"elements":Lt,"chart":this}),this.setLayoutTag(!1),this.onLayoutEnd(nt),this._event.emit(jW.layoutEnd,{"chart":this,"vchart":this._option.globalInstance})}null===(Bt=null===(Rt=this._option.performanceHook)||void 0===Rt?void 0:Rt.afterLayoutWithSceneGraph)||void 0===Bt||Bt.call(Rt)},i.prototype.onLayoutStart=function(nt){var at=this;this.getAllModels().forEach((function(lt){return lt.onLayoutStart(at._layoutRect,at._viewRect,nt)}))},i.prototype.onLayoutEnd=function(nt){this.getAllModels().forEach((function(at){"series"!==at.modelType&&at.onLayoutEnd(nt)}))},i.prototype.onEvaluateEnd=function(nt){P(P(P([],E(this._components),!1),E(this._regions),!1),E(this._series),!1).forEach((function(at){return at.onEvaluateEnd(nt)}))},i.prototype.getLayoutElements=function(){return this.getAllModels().map((function(nt){return nt.layout})).filter((function(nt){return!!nt}))},i.prototype.getModelById=function(nt){var at=this._idMap.get(nt);if(at&&at instanceof UU)return at},i.prototype.getModelByUserId=function(nt){var at=this.getSeriesInUserId(nt);if(at)return at;var lt=this.getRegionsInUserId(nt);return lt||this.getComponentByUserId(nt)||void 0},i.prototype.getAllMarks=function(){return Array.from(this._idMap.values()).filter((function(nt){return nt&&nt instanceof dY}))},i.prototype.getMarkById=function(nt){var at=this._idMap.get(nt);if(at&&at instanceof dY)return at},i.prototype.getMarkByUserName=function(nt){return this.getAllMarks().filter((function(at){return at.name&&at.name===nt}))},i.prototype.updateData=function(nt,at,lt,Rt){void 0===lt&&(lt=!0);var Bt=this._dataSet.getDataView(nt);Bt&&(Bt.markRunning(),Bt.parseNewData(at,Rt)),lt&&this.updateGlobalScaleDomain(),this.getAllModels().forEach((function(nt){return nt.onDataUpdate()}))},i.prototype.updateFullData=function(nt,at){var lt=this;void 0===at&&(at=!0),xt(nt).forEach((function(nt){var at=lt._dataSet.getDataView(nt.id);at&&at.markRunning()})),xt(nt).forEach((function(nt){var at=lt._dataSet.getDataView(nt.id);at&&nU(at,nt,!0)})),at&&this.updateGlobalScaleDomain(),this.getAllModels().forEach((function(nt){return nt.onDataUpdate()}))},i.prototype.onRender=function(nt){},i.prototype.setCanvasRect=function(nt,at){this._canvasRect={"width":nt,"height":at}},i.prototype.getCanvasRect=function(){return this._canvasRect||(this._canvasRect=hU(this._spec,this._option,{"width":DF,"height":LF})),this._canvasRect},i.prototype.getSeriesData=function(nt,at){return this._chartData.getSeriesData(nt,at)},i.prototype._transformSpecScale=function(){var nt,at=this._spec.scales?P([],E(this._spec.scales),!1):[],lt=at.find((function(nt){return"color"===nt.id})),Rt=this.getColorScheme();if(!lt&&(lt={"type":"ordinal","id":"color","domain":null,"range":null},at.push(lt),this._spec.color)){var Bt=this._spec.color;if(X(Bt))lt.range=Bt;else{var Lt=Bt;Object.prototype.hasOwnProperty.call(Lt,"type")&&(lt.type=Lt.type),Object.prototype.hasOwnProperty.call(Lt,"domain")&&(lt.domain=Lt.domain),Object.prototype.hasOwnProperty.call(Lt,"range")&&(lt.range=Lt.range),Object.prototype.hasOwnProperty.call(Lt,"specified")&&(lt.specified=Lt.specified),Object.prototype.hasOwnProperty.call(Lt,"clamp")&&(lt.clamp=Lt.clamp)}}return(null===(nt=lt.range)||void 0===nt?void 0:nt.length)||(lt.range=QO(Rt),lt.rangeTheme=!0),at},i.prototype._createGlobalScale=function(){this._globalScale=new K$(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale},i.prototype.updateGlobalScaleDomain=function(){var nt=new Set;this._series.forEach((function(at){var lt=at.getSeriesKeys();lt&&lt.forEach((function(at){return nt.add(at)}))}));var at=Array.from(nt);this._globalScale.updateScaleDomain(at)},i.prototype.updateGlobalScale=function(nt){dU(nt,this._globalScale.updateSpec(this._transformSpecScale()))},i.prototype.updateGlobalScaleTheme=function(){var nt=this._globalScale.getScaleSpec("color"),at=this.getColorScheme();nt.rangeTheme&&(nt.range=QO(at),this._globalScale.getScale("color").range(nt.range))},i.prototype._getSpecKeys=function(nt){var at={"width":!0,"height":!0};return Object.keys(nt).filter((function(nt){return!at[nt]})).sort()},i.prototype.updateSpec=function(nt){var at={"change":!1,"reMake":!1,"reRender":!1,"reSize":!1,"reCompile":!1};if(this.setLayoutTag(!0,null,!1),nt.type!==this.type)return at.reMake=!0,at;var lt=this._getSpecKeys(this._spec);if(!mt(lt,this._getSpecKeys(nt)))return at.reMake=!0,at;for(var Rt=0;Rt<lt.length;Rt++){var Bt=lt[Rt];if(X(this._spec[Bt])&&this._spec[Bt].length!==xt(nt[Bt]).length)return at.reMake=!0,at}var Lt=this._spec;return this._spec=nt,this.updateChartConfig(at,Lt),at.reMake||(this.updateGlobalScale(at),at.reMake||(this.updateRegionSpec(at),at.reMake||(this.updateComponentSpec(at),at.reMake||(this.updateSeriesSpec(at),at.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain()))))),at},i.prototype.updateChartConfig=function(nt,at){var lt,Rt;this._paddingSpec=vF(null!==(lt=this._spec.padding)&&void 0!==lt?lt:null===(Rt=this._option)||void 0===Rt?void 0:Rt.getTheme().padding),this._updateLayoutRect(this._viewBox)},i.prototype.updateDataSpec=function(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)},i.prototype.updateRegionSpec=function(nt){var at,lt=this;(null===(at=this._spec)||void 0===at?void 0:at.region)&&(this._spec.region.length===this._regions.length?this._regions.forEach((function(at){dU(nt,at.updateSpec(lt._spec.region[at.getSpecIndex()]))})):nt.reMake=!0)},i.prototype.updateComponentSpec=function(nt){var at,Rt=this,Bt={},Lt=((at={})[lt.title]=!0,at[lt.brush]=!0,at[lt.mapLabel]=!0,at[lt.indicator]=!0,at);for(var Ht in this._components.forEach((function(at){var Ht,jt;if(at.type!==lt.label&&at.type!==lt.totalLabel){Lt[at.type]&&(Lt[at.type]=!1);var $t=at.specKey||at.type,Kt=null!==(Ht=Rt._spec[$t])&&void 0!==Ht?Ht:{};X(Kt)?(Bt[$t]=Bt[$t]||{"specCount":Kt.length,"componentCount":0},Bt[$t].componentCount++,dU(nt,at.updateSpec(null!==(jt=Kt[at.getSpecIndex()])&&void 0!==jt?jt:{},Kt))):dU(nt,at.updateSpec(Kt))}})),Bt)if(Object.prototype.hasOwnProperty.call(Bt,Ht)){var jt=Bt[Ht];jt.componentCount!==jt.specCount&&(nt.reMake=!0)}var s=function(nt){return nt&&!1!==nt.visible};Object.keys(Lt).forEach((function(at){if(Lt[at]){var lt=Rt._spec[at];(X(lt)?lt.some(s):s(lt))&&(nt.reMake=!0)}}))},i.prototype.updateSeriesSpec=function(nt){var at=this;this._spec.series.length===this._series.length?this._series.forEach((function(lt){var Rt=at._spec.series[lt.getSpecIndex()];dU(nt,lt.updateSpec(Rt))})):nt.reMake=!0},i.prototype.getCanvas=function(){var nt,at;return null!==(at=null===(nt=this.getCompiler())||void 0===nt?void 0:nt.getCanvas())&&void 0!==at?at:null},i.prototype._updateLayoutRect=function(nt){var at=this.getCanvasRect();if(nt){this._viewBox=nt;var lt=nt.x1,Rt=void 0===lt?0:lt,Bt=nt.y1,Lt=void 0===Bt?0:Bt;at={"width":nt.x2-Rt,"height":nt.y2-Lt}}else this._viewBox={"x1":0,"y1":0,"x2":at.width,"y2":at.height};this._viewRect=at,this.padding=fF(this._paddingSpec,at,at),this._layoutRect.width=at.width-this.padding.left-this.padding.right,this._layoutRect.height=at.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(jW.layoutRectUpdate,{"chart":this})},i.prototype.setCurrentTheme=function(){this.updateChartConfig({"change":!0,"reMake":!1},this._spec),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()},i.prototype.reInit=function(){P(P(P([],E(this._regions),!1),E(this._series),!1),E(this._components),!1).forEach((function(nt){var at=nt.getSpecInfo();at&&at.spec&&nt.reInit(at.spec)}))},i.prototype.clear=function(){this.getAllModels().forEach((function(nt){var at;return null===(at=nt.clear)||void 0===at?void 0:at.call(nt)}))},i.prototype.compile=function(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()},i.prototype.afterCompile=function(){this.getAllRegions().forEach((function(nt){var at;null===(at=nt.afterCompile)||void 0===at||at.call(nt)})),this.getAllSeries().forEach((function(nt){var at;null===(at=nt.afterCompile)||void 0===at||at.call(nt)})),this.getAllComponents().forEach((function(nt){var at;null===(at=nt.afterCompile)||void 0===at||at.call(nt)}))},i.prototype.compileLayout=function(){var nt=this.getCanvasRect(),at=nt.width,lt=nt.height;this.getCompiler().setSize(at,lt)},i.prototype.compileBackground=function(){var nt;this._backgroundMark&&(this._backgroundMark.compile({"context":{"model":this}}),null===(nt=this._backgroundMark.getProduct())||void 0===nt||nt.layout((function(){})))},i.prototype.compileRegions=function(){var nt,at,lt,Rt;null===(at=null===(nt=this._option.performanceHook)||void 0===nt?void 0:nt.beforeRegionCompile)||void 0===at||at.call(nt),this.getAllRegions().forEach((function(nt){nt.compile()})),null===(Rt=null===(lt=this._option.performanceHook)||void 0===lt?void 0:lt.afterRegionCompile)||void 0===Rt||Rt.call(lt)},i.prototype.compileSeries=function(){var nt,at,lt,Rt;null===(at=null===(nt=this._option.performanceHook)||void 0===nt?void 0:nt.beforeSeriesCompile)||void 0===at||at.call(nt),this.getAllSeries().forEach((function(nt){nt.compile()})),null===(Rt=null===(lt=this._option.performanceHook)||void 0===lt?void 0:lt.afterSeriesCompile)||void 0===Rt||Rt.call(lt)},i.prototype.compileComponents=function(){var nt,at,lt,Rt;null===(at=null===(nt=this._option.performanceHook)||void 0===nt?void 0:nt.beforeComponentCompile)||void 0===at||at.call(nt),this.getAllComponents().forEach((function(nt){nt.compile()})),null===(Rt=null===(lt=this._option.performanceHook)||void 0===lt?void 0:lt.afterComponentCompile)||void 0===Rt||Rt.call(lt)},i.prototype.release=function(){P(P(P([],E(this._components),!1),E(this._regions),!1),E(this._series),!1).forEach((function(nt){nt.beforeRelease()})),at.prototype.release.call(this),this.clear(),P(P(P([],E(this._components),!1),E(this._regions),!1),E(this._series),!1).forEach((function(nt){nt.release()})),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()},i.prototype.onLayout=function(nt){var at=nt.rootMark;this.layout({"group":at,"srView":nt})},i.prototype.updateState=function(nt,at){var lt=this.getAllSeries(),n=function(Rt){if(ot(nt[Rt]))return"continue";var Bt=nt[Rt],Lt={"stateValue":Rt};Lt=H(Bt.filter)?A({"filter":Bt.filter},Lt):A(A({},Bt.filter),Lt),Bt.level&&(Lt.level=Bt.level),lt.forEach((function(nt){nt.getMarks().forEach((function(lt){lt.stateStyle[Rt]&&(at&&!at(nt,lt,Rt)||(lt.state.changeStateInfo(Lt),lt.updateMarkState(Rt)))}))}))};for(var Rt in nt)n(Rt)},i.prototype.setSelected=function(nt,at,lt){this._setStateInDatum(mU.STATE_SELECTED,!0,nt,at,lt)},i.prototype.setHovered=function(nt,at,lt){this._setStateInDatum(mU.STATE_HOVER,!0,nt,at,lt)},i.prototype.clearState=function(nt){this.getAllRegions().forEach((function(at){at.interaction.clearEventElement(nt,!0),at.interaction.resetInteraction(nt,null)}))},i.prototype.clearAllStates=function(){this.getAllRegions().forEach((function(nt){nt.interaction.clearAllEventElement(),nt.interaction.resetAllInteraction()}))},i.prototype.clearSelected=function(){this.clearState(mU.STATE_SELECTED)},i.prototype.clearHovered=function(){this.clearState(mU.STATE_HOVER)},i.prototype._initEvent=function(){var nt=this;[jW.dataZoomChange,jW.scrollBarChange].forEach((function(at){nt._event.on(at,(function(at){at.value,nt._disableMarkAnimation(["exit","update"]);var i=function(){nt._enableMarkAnimation(["exit","update"]),nt._event.off(GH.AFTER_MARK_RENDER_END,i)};nt._event.on(GH.AFTER_MARK_RENDER_END,i)}))}))},i.prototype._enableMarkAnimation=function(nt){this.getAllMarks().forEach((function(at){var lt=at.getProduct();lt&&lt.animate&&lt.animate.enableAnimationState(nt)}))},i.prototype._disableMarkAnimation=function(nt){this.getAllMarks().forEach((function(at){var lt=at.getProduct();lt&&lt.animate&&lt.animate.disableAnimationState(nt)}))},i.prototype._setStateInDatum=function(nt,at,lt,Rt,Bt){var Lt=(lt=lt?xt(lt):null)?Object.keys(lt[0]):null;this.getRegionsInQuerier(Bt).forEach((function(Bt){lt?(Bt.getSeries().forEach((function(at){at.getMarks().forEach((function(Ht){if(Ht.getProduct()&&(!Rt||H(Rt)&&Rt(at,Ht))){var jt=Ht.getProduct().isCollectionMark(),$t=Ht.getProduct().elements,Kt=[];if(jt)Kt=$t.filter((function(nt){var at=nt.getDatum();lt.every((function(nt,lt){return Lt.every((function(Rt){return nt[Rt]==at[lt][Rt]}))}))}));else if(lt.length>1){var te=lt.slice();Kt=$t.filter((function(nt){if(0===te.length)return!1;var at=nt.getDatum(),lt=te.findIndex((function(nt){return Lt.every((function(lt){return nt[lt]==at[lt]}))}));return lt>=0&&(te.splice(lt,1),!0)}))}else{var ne=$t.find((function(nt){return Lt.every((function(at){return lt[0][at]==nt.getDatum()[at]}))}));ne&&(Kt=[ne])}Kt.forEach((function(at){Bt.interaction.startInteraction(nt,at)}))}}))})),at&&Bt.interaction.reverseEventElement(nt)):Bt.interaction.clearEventElement(nt,!0)}))},i.prototype.setDimensionIndex=function(at,Rt){var Bt,Lt,Ht=null;Array.from(this._event.getComposedEventMap().values()).forEach((function(lt){var Bt=lt.eventType,Lt=lt.event;if(Bt===nt.DimensionEventEnum.dimensionHover||Bt===nt.DimensionEventEnum.dimensionClick){var jt=Lt.dispatch(at,Rt);(null==jt?void 0:jt.length)&&(Ht=jt)}}));var jt=j(at)||!Ht||Ht.every((function(nt){return HB(nt.axis.getScale().type)&&j(nt.index)}));if(!1!==Rt.tooltip){var $t=this.getComponentsByType(lt.tooltip)[0];if(null==$t?void 0:$t.getVisible())if(jt)null===(Lt=(Bt=$t).hideTooltip)||void 0===Lt||Lt.call(Bt);else{var Kt={};Ht.forEach((function(nt){var at=nt.axis,lt=nt.value,Rt=nt.data,Bt="left"===at.getOrient()||"right"===at.getOrient();Rt.forEach((function(nt){var at,Rt,Lt,Ht=Bt?nt.series.fieldY[0]:nt.series.fieldX[0];Kt[Ht]=null!==(Lt=null===(Rt=null===(at=nt.datum)||void 0===at?void 0:at[0])||void 0===Rt?void 0:Rt[Ht])&&void 0!==Lt?Lt:lt}))})),$t.showTooltip(Kt,Rt.showTooltipOption)}}if(!1!==Rt.crosshair){var te=this.getComponentsByType(lt.cartesianCrosshair)[0];te&&te.clearAxisValue&&te.setAxisValue&&(jt?te.hideCrosshair():te.showCrosshair(Ht))}},i.prototype.getColorScheme=function(){var nt,at;return null===(at=(nt=this._option).getTheme)||void 0===at?void 0:at.call(nt).colorScheme},i}(RU),RK=function(nt,at){var lt,Rt=nt.spec,Bt=Rt.regionId,Lt=Rt.regionIndex;if(N(Bt)){var Ht=xt(Bt);return null===(lt=at.region)||void 0===lt?void 0:lt.filter((function(nt){var at=nt.spec;return Ht.includes(at.id)}))}if(N(Lt))return xt(Lt).map((function(nt){var lt;return null===(lt=at.region)||void 0===lt?void 0:lt[nt]})).filter(N)},iq=function(){function t(nt){this._option=nt,this.type=nt.type,this.seriesType=nt.seriesType}return t.prototype.initChartSpec=function(nt){return this.transformSpec(nt),this.transformModelSpec(nt)},t.prototype.transformSpec=function(nt){nt.region&&0!==nt.region.length||(nt.region=[{}]),void 0===nt.tooltip&&(nt.tooltip={}),N(nt.stackInverse)&&nt.region.forEach((function(at){!N(at.stackInverse)&&(at.stackInverse=nt.stackInverse)})),N(nt.stackSort)&&nt.region.forEach((function(at){!N(at.stackSort)&&(at.stackSort=nt.stackSort)}))},t.prototype.generateTransform=function(nt,at){var lt=this;return function(Rt,Bt,Lt){var Ht=Bt.spec,jt=Bt.specPath,$t=Bt.specInfoPath,Kt=Bt.type,te=new Rt.transformerConstructor(A(A({},lt._option),{"type":Kt})),ne=te.transformSpec(Ht,nt,Lt),re=A(A({},Bt),ne);at?re.theme=te.getTheme(Ht,nt):pz(nt,jt,ne.spec),pz(Lt,null!=$t?$t:jt,re)}},t.prototype.transformModelSpec=function(nt){return this.createSpecInfo(nt,this.generateTransform(nt,!1))},t.prototype.createSpecInfo=function(nt,at){var lt,Rt;at||(at=this.generateTransform(nt,!0));var Bt={};return this.forEachRegionInSpec(nt,at,Bt),this.forEachSeriesInSpec(nt,at,Bt),null===(lt=Bt.series)||void 0===lt||lt.forEach((function(nt,at){var lt,Rt,Lt=(null!==(Rt=null!==(lt=RK(nt,Bt))&&void 0!==lt?lt:Bt.region)&&void 0!==Rt?Rt:[])[0];Lt&&(Lt.seriesIndexes||(Lt.seriesIndexes=[]),Lt.seriesIndexes.push(at),nt.regionIndexes=Lt.regionIndexes.slice())})),this.forEachComponentInSpec(nt,at,Bt),Object.values(null!==(Rt=Bt.component)&&void 0!==Rt?Rt:{}).forEach((function(nt){return nt.forEach((function(nt,at){var lt,Rt,Lt;if(nt){if(!nt.regionIndexes){var Ht=null!==(Rt=null!==(lt=RK(nt,Bt))&&void 0!==lt?lt:Bt.region)&&void 0!==Rt?Rt:[];nt.regionIndexes=Ht.map((function(nt){return nt.regionIndexes[0]}))}if(!nt.seriesIndexes){var jt=function(nt,at){var lt,Rt=nt.spec,Bt=Rt.seriesId,Lt=Rt.seriesIndex;if(N(Bt)){var Ht=xt(Bt);return null===(lt=at.series)||void 0===lt?void 0:lt.filter((function(nt){var at=nt.spec;return Ht.includes(at.id)}))}if(N(Lt))return xt(Lt).map((function(nt){var lt;return null===(lt=at.series)||void 0===lt?void 0:lt[nt]})).filter(N)}(nt,Bt);if(jt)nt.seriesIndexes=jt.map((function(nt){return nt.seriesIndexes[0]}));else{var $t=new Set;(null!==(Lt=nt.regionIndexes)&&void 0!==Lt?Lt:[]).forEach((function(nt){var at,lt,Rt=null===(at=Bt.region)||void 0===at?void 0:at[nt];null===(lt=null==Rt?void 0:Rt.seriesIndexes)||void 0===lt||lt.forEach((function(nt){return $t.add(nt)}))})),nt.seriesIndexes=Array.from($t)}}}}))})),Bt},t.prototype._isValidSeries=function(nt){return!0},t.prototype._getDefaultSeriesSpec=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt={"dataKey":nt.dataKey,"hover":nt.hover,"select":nt.select,"label":nt.label,"seriesStyle":nt.seriesStyle,"animation":null!==(Rt=nt.animation)&&void 0!==Rt?Rt:this._option.animation,"animationThreshold":null!==(Bt=nt.animationThreshold)&&void 0!==Bt?Bt:null===(Ht=(Lt=this._option).getTheme)||void 0===Ht?void 0:Ht.call(Lt).animationThreshold,"animationAppear":nt.animationAppear,"animationDisappear":nt.animationDisappear,"animationEnter":nt.animationEnter,"animationUpdate":nt.animationUpdate,"animationExit":nt.animationExit,"animationNormal":nt.animationNormal,"animationState":nt.animationState,"extensionMark":nt.extensionMark,"large":nt.large,"largeThreshold":nt.largeThreshold,"progressiveStep":nt.progressiveStep,"progressiveThreshold":nt.progressiveThreshold,"background":nt.seriesBackground,"invalidType":nt.invalidType,"seriesField":nt.seriesField,"morph":nt.morph,"interactions":nt.interactions},$t=this.seriesType;return $t&&(jt.type=$t,jt[$t]=nt[$t]),at&&at.length&&at.forEach((function(at){jt[at]=nt[at]})),lt&&lt.length&&lt.forEach((function(at){jt[at]=nt[at]})),jt},t.prototype.forEachRegionInSpec=function(nt,at,lt){var Rt;return(null!==(Rt=nt.region)&&void 0!==Rt?Rt:[]).map((function(nt,Rt){return at(Tz.getRegionInType("region"),{"spec":nt,"specPath":["region",Rt],"type":"region","regionIndexes":[Rt]},lt)}))},t.prototype.forEachSeriesInSpec=function(nt,at,lt){var Rt;return(null!==(Rt=nt.series)&&void 0!==Rt?Rt:[]).map((function(nt,Rt){return at(Tz.getSeriesInType(nt.type),{"spec":nt,"specPath":["series",Rt],"type":nt.type,"seriesIndexes":[Rt]},lt)}))},t.prototype.forEachComponentInSpec=function(nt,at,Rt){for(var Bt,Lt,Ht,jt,$t,Kt,te,ne=[],re=Tz.getComponents(),ae=[],oe=0;oe<re.length;oe++){var se=re[oe],le=se.cmp,ue=se.alwaysCheck;le.type.startsWith(lt.cartesianAxis)?jt=le:le.type.startsWith(lt.polarAxis)?$t=le:le.type===lt.geoCoordinate?Kt=le:(ue||nt[null!==(Bt=le.specKey)&&void 0!==Bt?Bt:le.type])&&(le.type===lt.tooltip?te=le:ae.push(le))}var ce,he=!1;return jt&&(null==(ce=jt.getSpecInfo(nt,Rt))?void 0:ce.length)>0&&(he=!0,ce.forEach((function(nt){var lt=Tz.getComponentInKey(nt.type);ne.push(at(lt,nt,Rt))}))),$t&&!he&&(null==(ce=$t.getSpecInfo(nt,Rt))?void 0:ce.length)>0&&(he=!0,ce.forEach((function(nt){var lt=Tz.getComponentInKey(nt.type);ne.push(at(lt,nt,Rt))}))),Kt&&!he&&(null===(Lt=Kt.getSpecInfo(nt,Rt))||void 0===Lt||Lt.forEach((function(nt){ne.push(at(Kt,nt,Rt))}))),ae.forEach((function(lt){var Bt;null===(Bt=lt.getSpecInfo?lt.getSpecInfo(nt,Rt):gY(nt,lt.specKey,lt.type))||void 0===Bt||Bt.forEach((function(nt){ne.push(at(lt,nt,Rt))}))})),te&&(null===(Ht=gY(nt,te.specKey,te.type))||void 0===Ht||Ht.forEach((function(nt){ne.push(at(te,nt,Rt))}))),ne},t.prototype.transformSeriesSpec=function(nt){var at=this,lt=this._getDefaultSeriesSpec(nt);nt.series&&0!==nt.series.length?nt.series.forEach((function(nt){at._isValidSeries(nt.type)&&Object.keys(lt).forEach((function(at){at in nt||(nt[at]=lt[at])}))})):nt.series=[lt]},t.prototype._findBandAxisBySeries=function(nt,at,lt){var Rt="horizontal"===(null==nt?void 0:nt.direction)?["left","right"]:["top","bottom"];return lt.find((function(lt){if(!Rt.includes(lt.orient))return!1;if(N(lt.seriesId)){if(xt(lt.seriesId).includes(null==nt?void 0:nt.id))return!0}else if(N(lt.seriesIndex)){if(xt(lt.seriesIndex).includes(at))return!0}else if("band"===lt.type)return!0;return!0}))},t.prototype._applyAxisBandSize=function(nt,at,lt){var Rt=lt.barMaxWidth,Bt=lt.barMinWidth,Lt=lt.barWidth,Ht=lt.barGapInGroup,jt=!1;Z(Bt)?(nt.minBandSize=Bt,jt=!0):Z(Lt)?(nt.minBandSize=Lt,jt=!0):Z(Rt)&&(nt.minBandSize=Rt,jt=!0),jt&&(nt.bandSizeLevel=Number.MAX_VALUE,nt.bandSizeExtend={"extend":at,"gap":X(Ht)?Ht[Ht.length-1]:Ht})},t}(),rq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!0},e.prototype._isValidSeries=function(nt){return!this.seriesType||nt===this.seriesType},e.prototype._getDefaultSeriesSpec=function(at,lt){return nt.prototype._getDefaultSeriesSpec.call(this,at,["xField","yField","zField","direction","stack","percent","stackOffsetSilhouette","totalLabel","sortDataByAxis"],lt)},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),nt.prototype.transformSeriesSpec.call(this,at),this._transformAxisSpec(at)},e.prototype._setDefaultXAxisSpec=function(nt){return{"orient":"bottom"}},e.prototype._setDefaultYAxisSpec=function(nt){return{"orient":"left"}},e.prototype._setDefaultZAxisSpec=function(nt){return{"orient":"z"}},e.prototype._transformAxisSpec=function(nt){var at=this;if(this.needAxes()){nt.axes||(nt.axes=[]);var lt={"x":!1,"y":!1,"z":!1};nt.axes.forEach((function(Rt){var Bt=Rt.orient,Lt=null;"top"!==Bt&&"bottom"!==Bt||(lt.x=!0,Lt=at._setDefaultXAxisSpec(nt)),"left"!==Bt&&"right"!==Bt||(lt.y=!0,Lt=at._setDefaultYAxisSpec(nt)),"z"===Bt&&(lt.z=!0,Lt=at._setDefaultZAxisSpec(nt)),Lt&&Object.keys(Lt).forEach((function(nt){j(Rt[nt])&&(Rt[nt]=Lt[nt])})),st(Rt,"trimPadding")&&gz(Rt,pU(at.type,nt))})),lt.x||nt.axes.push(this._setDefaultXAxisSpec(nt)),lt.y||nt.axes.push(this._setDefaultYAxisSpec(nt)),nt.zField&&!lt.z&&nt.axes.push(this._setDefaultZAxisSpec(nt))}},e}(iq),aq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt=nt.prototype._getDefaultSeriesSpec.call(this,at,["point","line","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","lineLabel"]);return Rt.seriesMark=null!==(lt=at.seriesMark)&&void 0!==lt?lt:"line",Rt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e}(rq),DK=function(nt,at){var lt={"nodes":{}},Rt=at.fields;if(!(null==Rt?void 0:Rt.length))return lt;var Bt,Lt=Rt.length-1,Ht=lt;return nt.forEach((function(nt){nt.latestData&&nt.latestData.forEach((function(nt){Ht=lt;for(var at=0;at<Rt.length;at++){var jt=Rt[at],$t=nt[jt];if(j($t))break;Ht.groupField=jt,Ht.nodes[$t]||(at===Lt?Ht.nodes[$t]={"values":[]}:(Bt={"nodes":{}},Ht.nodes[$t]=Bt)),at===Lt?Ht.nodes[$t].values.push(nt):Ht=Ht.nodes[$t]}}))})),lt},oq=function(){function t(nt,at){var lt=this;this.stackRegion=function(nt){var at,Rt=nt.model,Bt=Rt.getSeries(),Lt=Bt.some((function(nt){return nt.getStack()}));if(Lt){var Ht=Bt.some((function(nt){var at,lt;return null===(lt=null===(at=nt.getSpec())||void 0===at?void 0:at.totalLabel)||void 0===lt?void 0:lt.visible})),jt=Ht||Bt.some((function(nt){return nt.getPercent()})),$t=Bt.some((function(nt){return nt.getStackOffsetSilhouette()})),Kt=cH(Rt,!0);for(var te in Kt)for(var ne in Kt[te].nodes)gH(Kt[te].nodes[ne],Rt.getStackInverse(),jt,Ht);if($t)for(var te in Kt)for(var ne in Kt[te].nodes)vH(Kt[te].nodes[ne]);Ht&&Rt.getSeries().forEach((function(nt){var at=nt.getStackData(),lt=nt.getStackValue(),Rt=nt.getStackValueField();at&&Rt&&dH(Kt[lt],Rt)})),(null===(at=lt._options)||void 0===at?void 0:at.afterStackRegion)&&lt._options.afterStackRegion(Rt,Kt)}},this._chart=nt,this._options=at}return t.prototype.init=function(){var nt=this;this._chart.getAllRegions().forEach((function(at){at.event.on(jW.regionSeriesDataFilterOver,{"filter":function(nt){var lt=nt.model;return(null==lt?void 0:lt.id)===at.id}},nt.stackRegion)}))},t.prototype.stackAll=function(){var nt=this;this._chart.getAllRegions().forEach((function(at){nt.stackRegion({"model":at})}))},t}(),lq=function(){function t(){}return t.prototype._beforeInit=function(){this._dataSet&&GW(this._dataSet,"stackSplit",DK)},t.prototype._initStack=function(){this._stack=new oq(this),this._stack.init()},t}(),uq=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=aq,lt.type="line",lt.seriesType=nt.SeriesTypeEnum.line,lt}return S(i,at),i.type="line",i.seriesType=nt.SeriesTypeEnum.line,i.transformerConstructor=aq,i}(eq);bt(uq,lq);var dq,jK=function(){TK(),Tz.registerChart(uq.type,uq)},pq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"lineWidth":0})},e.prototype._getIgnoreAttributes=function(){return[]},e.type="area",e}(HX),VK=function(){Tz.registerMark(pq.type,pq),UN(),eX()},vq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._getSeriesStyle=function(nt,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt;try{for(var te=C(xt(lt)),ne=te.next();!ne.done;ne=te.next()){var re=ne.value,ae=null===(Ht=at.series.getSeriesStyle(nt))||void 0===Ht?void 0:Ht(re);if(!1!==ae||"fill"!==re&&"stroke"!==re||(ae="fill"===re?null===($t=null===(jt=at.series.getSeriesStyle(nt))||void 0===jt?void 0:jt("stroke"))||void 0===$t?void 0:$t[0]:null===(Kt=at.series.getSeriesStyle(nt))||void 0===Kt?void 0:Kt("fill")),N(ae))return ae}}catch(nt){Bt={"error":nt}}finally{try{ne&&!ne.done&&(Lt=te.return)&&Lt.call(te)}finally{if(Bt)throw Bt.error}}return Rt},at}return S(e,nt),e}(zY),gq=A(A(A({},GY),EX),((dq={}).area={"name":"area","type":"area"},dq)),UK=function(){Tz.registerAnimation("area",JY),QY(),qY()},yq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!0,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){var at,lt,Rt,Bt=!1!==(null===(at=nt.point)||void 0===at?void 0:at.visible)&&!1!==(null===(Rt=null===(lt=nt.point)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.visible);this._addMarkLabelSpec(nt,(function(nt){var at="inside-middle"===nt.position;return!Bt||at?"area":"point"})),this._addMarkLabelSpec(nt,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)},e.prototype._transformSpecAfterMergingTheme=function(at,lt,Rt){var Bt,Lt,Ht,jt,$t;nt.prototype._transformSpecAfterMergingTheme.call(this,at,lt,Rt);var Kt=at.area,te=void 0===Kt?{}:Kt,ne=at.line,re=void 0===ne?{}:ne,ae=at.seriesMark,oe=!1!==te.visible&&!1!==(null===(Bt=te.style)||void 0===Bt?void 0:Bt.visible),se=!1!==re.visible&&!1!==(null===(Lt=re.style)||void 0===Lt?void 0:Lt.visible);te.support3d=!(!te.support3d&&!re.support3d),te.zIndex=N(te.zIndex)||N(re.zIndex)?Math.max(null!==(Ht=te.zIndex)&&void 0!==Ht?Ht:0,null!==(jt=re.zIndex)&&void 0!==jt?jt:0):void 0,te.style&&delete te.style.stroke,te.state&&Object.keys(te.state).forEach((function(nt){"style"in te.state[nt]?delete te.state[nt].style.stroke:delete te.state[nt].stroke}));var le=te,ue=re;("line"===ae||se&&!oe)&&(le=re,ue=te),te.style=gz({},ue.style,le.style),te.state=gz({},ue.state,le.state),!1===te.interactive&&(te.style.fillPickable=!1),!1===re.interactive&&(re.style.strokePickable=!1),te.interactive=!(!te.interactive&&null!==($t=re.interactive)&&void 0!==$t&&!$t),at.area=te,at.line=re},e}(JX),_q=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.area,lt.transformerConstructor=yq,lt._sortDataByAxis=!1,lt}return S(i,at),i.prototype.initMark=function(){var nt,at={"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold},lt=this._spec.area||{},Rt=null!==(nt=this._spec.seriesMark)&&void 0!==nt?nt:"area",Bt=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(i.mark.area,{"groupKey":this._seriesField,"isSeriesMark":Bt&&"point"!==Rt,"stateSort":lt.stateSort},A(A({},at),{"morphElementKey":this.getDimensionField()[0],"setCustomizedShape":lt.customShape})),this.initSymbolMark(at,"point"===Rt)},i.prototype.initMarkStyle=function(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()},i.prototype.initAreaMarkStyle=function(){var nt,at,lt,Rt,Bt,Lt=this,Ht=null!==(lt=null===(at=null===(nt=this.getSpec().area)||void 0===nt?void 0:nt.style)||void 0===at?void 0:at.curveType)&&void 0!==lt?lt:null===(Bt=null===(Rt=this.getSpec().line)||void 0===Rt?void 0:Rt.style)||void 0===Bt?void 0:Bt.curveType,jt=Ht===MX?"horizontal"===this._direction?"monotoneY":"monotoneX":Ht,$t=this._areaMark;if($t){var Kt=this._isAreaVisible(),te=this._isLineVisible();Kt||te?$t.setVisible(!0):$t.setVisible(!1),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{"x":this.dataToPositionX.bind(this),"x1":function(nt){var at,lt;return uF(Lt.dataToPositionX1(nt),null===(lt=null===(at=Lt._xAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0))},"y":this.dataToPositionY.bind(this),"y1":this.dataToPositionY.bind(this),"z":this._fieldZ?this.dataToPositionZ.bind(this):null,"orient":this._direction},"normal",EU.Series):this.setMarkStyle(this._areaMark,{"x":this.dataToPositionX.bind(this),"x1":this.dataToPositionX.bind(this),"y1":function(nt){var at,lt;return uF(Lt.dataToPositionY1(nt),null===(lt=null===(at=Lt._yAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0))},"y":this.dataToPositionY.bind(this),"z":this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",EU.Series),this.setMarkStyle($t,{"fill":!!Kt&&this.getColorAttribute(),"stroke":!!te&&this.getColorAttribute()},"normal",EU.Series),"zero"!==this._invalidType&&this.setMarkStyle($t,{"defined":this._getInvalidDefined.bind(this),"connectedType":this._getInvalidConnectType()},"normal",EU.Series),this.getStack()&&this.setMarkStyle($t,{"zIndex":function(nt){return-nt[Jz]}},"normal",EU.Series),this.setMarkStyle($t,{"curveType":jt},"normal",EU.Built_In),Object.keys($t.stateStyle).forEach((function(nt){$t.stateStyle[nt].stroke&&$t.setPostProcess("stroke",(function(nt){return[nt,!1,!1,!1]}),nt)}))}},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt={"direction":this.direction},Lt=null===(nt=this._spec.animationAppear)||void 0===nt?void 0:nt.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("line"))||void 0===at?void 0:at(Bt,Lt),aX("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("area"))||void 0===lt?void 0:lt(Bt,Lt),aX("area",this._spec,this._markAttributeContext))),this._symbolMark){var Ht=vX(this);this._symbolMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("scaleInOut"))||void 0===Rt?void 0:Rt(),aX("point",this._spec,this._markAttributeContext),Ht))}},i.prototype._isAreaVisible=function(){var nt,at=this._spec.area||{};return!1!==at.visible&&!1!==(null===(nt=at.style)||void 0===nt?void 0:nt.visible)},i.prototype._isLineVisible=function(){var nt,at=this._spec.line||{};return!1!==at.visible&&!1!==(null===(nt=at.style)||void 0===nt?void 0:nt.visible)},i.prototype.initTooltip=function(){this._tooltipHelper=new vq(this);var nt=this._tooltipHelper.activeTriggerSet,at=nt.group,lt=nt.mark;this._areaMark&&at.add(this._areaMark),this._lineMark&&at.add(this._lineMark),this._symbolMark&&(lt.add(this._symbolMark),at.add(this._symbolMark))},i.prototype.viewDataStatisticsUpdate=function(nt){at.prototype.viewDataStatisticsUpdate.call(this,nt),this.encodeDefined(this._areaMark,"defined")},i.prototype.compile=function(){at.prototype.compile.call(this),this.addSamplingCompile(),this.addOverlapCompile()},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._areaMark,this._symbolMark,this._lineMark]},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this.reCompileSampling()},i.prototype.getSeriesStyle=function(nt){var at=this;return function(lt){var Rt,Bt,Lt,Ht,jt,$t=null!==(Rt=at._spec.seriesMark)&&void 0!==Rt?Rt:"area",Kt=null!==(Lt=null===(Bt=at._seriesMark)||void 0===Bt?void 0:Bt.getAttribute(lt,nt))&&void 0!==Lt?Lt:void 0;return"fill"!==lt||Kt&&"line"!==$t||(lt="stroke",Kt=null!==(jt=null===(Ht=at._seriesMark)||void 0===Ht?void 0:Ht.getAttribute(lt,nt))&&void 0!==jt?jt:void 0),"stroke"===lt&&X(Kt)?Kt[0]:Kt}},i.type=nt.SeriesTypeEnum.area,i.mark=gq,i.transformerConstructor=yq,i}(AX);bt(_q,FX);var KK=function(){jV(),NV(),wX(),VK(),CX(),UK(),_K(),gK(),Tz.registerSeries(_q.type,_q)},xq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["point","line","area","seriesMark","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","areaLabel"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e}(rq),kq=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=xq,lt.type="area",lt.seriesType=nt.SeriesTypeEnum.area,lt}return S(i,at),i.type="area",i.seriesType=nt.SeriesTypeEnum.area,i.transformerConstructor=xq,i}(eq);bt(kq,lq);var JK=function(){KK(),Tz.registerChart(kq.type,kq)};function QK(nt,at){return void 0===at&&(at=!0),function(lt,Rt,Bt){var Lt="vertical"===nt.direction?nt.yField:nt.xField,Ht=null==lt?void 0:lt[Lt];return"vertical"===nt.direction?{"overall":at?nt.growFrom():at,"orient":Ht>0?"negative":"positive"}:{"overall":!!at&&nt.growFrom(),"orient":Ht>0?"positive":"negative"}}}var $K=function(nt,at){return void 0===at&&(at=!0),{"type":"horizontal"===nt.direction?"growWidthIn":"growHeightIn","options":QK(nt,at)}},tq=function(nt,at){return void 0===at&&(at=!0),{"type":"horizontal"===nt.direction?"growWidthOut":"growHeightOut","options":QK(nt,at)}},Aq={"type":"fadeIn"},Cq={"type":"growCenterIn"};function nq(nt,at){if(!1===at)return{};switch(at){case"fadeIn":return Aq;case"scaleIn":return Cq;default:return $K(nt)}}var Pq,Rq,Iq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"width":void 0,"height":void 0,"lineWidth":0})},e.type="rect",e}(dY),sq=function(){Tz.registerMark(Iq.type,Iq),XN(),$Y()},Bq=A(A({},GY),((Pq={}).bar={"name":"bar","type":"rect"},Pq.barBackground={"name":"barBackground","type":"rect"},Pq)),Oq=A(A({},GY),((Rq={}).bar3d={"name":"bar3d","type":"rect3d"},Rq));function cq(nt,at,lt){var Rt,Bt,Lt;if(nt.values.length>0)if(nt.sortDatums.length){var Ht=nt.sortDatums;at&&(Ht=nt.sortDatums.slice().reverse());for(var jt=0;jt<Ht.length;jt++)Lt=hq(Ht[jt].datum,Lt,Ht[jt].series,lt,null===(Bt=(Rt=Ht[jt].series[lt.axisHelper]).getScale)||void 0===Bt?void 0:Bt.call(Rt,0),0===jt)}else{var $t=nt.series;at&&($t=$t.slice().reverse()),$t.forEach((function(nt,Rt){for(var Bt,Ht,jt=nt.s,$t=nt.values,Kt=null===(Ht=(Bt=jt[lt.axisHelper]).getScale)||void 0===Ht?void 0:Ht.call(Bt,0),te=0;te<$t.length;te++){var ne=$t[at?$t.length-1-te:te];Lt=hq(ne,Lt,jt,lt,Kt,0===te&&0===Rt)}}))}for(var Kt in nt.nodes)cq(nt.nodes[Kt],at,lt)}function hq(nt,at,lt,Rt,Bt,Lt){var Ht=lt.getSpec().barMinHeight,jt=lt[Rt.axisHelper].isInverse(),$t=uF(lt[Rt.startMethod](nt),Bt),Kt=uF(lt[Rt.endMethod](nt),Bt);Lt&&(at=$t);var te=Math.abs($t-Kt);te<Ht&&(te=Ht);var ne=1;return Kt<$t?ne=-1:Kt===$t&&(ne=Rt.isVertical?jt?1:-1:jt?-1:1),Kt=at+ne*te,nt[Rt.start]=at,nt[Rt.end]=Kt,Kt}var Lq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!0,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"bar")},e}(xX),Fq=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.bar,lt._barMarkName="bar",lt._barMarkType="rect",lt.transformerConstructor=Lq,lt._bandPosition=0,lt._getBarXStart=function(nt,at,Rt){return lt._shouldDoPreCalculate()?(lt._calculateStackRectPosition(!1),nt[YY]):lt._spec.barMinHeight?lt._calculateRectPosition(nt,!1,Rt):uF(lt._dataToPosX(nt),at,Rt)},lt._getBarXEnd=function(nt,at,Rt){return lt._shouldDoPreCalculate()?(lt._calculateStackRectPosition(!1),nt[XY]):uF(lt._dataToPosX1(nt),at,Rt)},lt._getBarYStart=function(nt,at){return lt._shouldDoPreCalculate()?(lt._calculateStackRectPosition(!0),nt[KY]):lt._spec.barMinHeight?lt._calculateRectPosition(nt,!0):uF(lt._dataToPosY(nt),at)},lt._getBarYEnd=function(nt,at){return lt._shouldDoPreCalculate()?(lt._calculateStackRectPosition(!0),nt[nX]):uF(lt._dataToPosY1(nt),at)},lt._getBarBackgroundXStart=function(nt){var at=nt.range();return Math.min(at[0],at[at.length-1])},lt._getBarBackgroundXEnd=function(nt){var at=nt.range();return Math.max(at[0],at[at.length-1])},lt._getBarBackgroundYStart=function(nt){var at=nt.range();return Math.min(at[0],at[at.length-1])},lt._getBarBackgroundYEnd=function(nt){var at=nt.range();return Math.max(at[0],at[at.length-1])},lt._getBarBackgroundPositionXEncoder=function(){var nt;return null===(nt=lt._barBackgroundPositionXEncoder)||void 0===nt?void 0:nt.bind(lt)},lt._setBarBackgroundPositionXEncoder=function(nt){lt._barBackgroundPositionXEncoder=nt.bind(lt)},lt._getBarBackgroundPositionYEncoder=function(){var nt;return null===(nt=lt._barBackgroundPositionYEncoder)||void 0===nt?void 0:nt.bind(lt)},lt._setBarBackgroundPositionYEncoder=function(nt){lt._barBackgroundPositionYEncoder=nt.bind(lt)},lt}return S(i,at),i.prototype.initMark=function(){var nt,at;this._initBarBackgroundMark(),this._barMark=this._createMark(A(A({},i.mark.bar),{"name":this._barMarkName,"type":this._barMarkType}),{"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":null===(nt=this._spec.bar)||void 0===nt?void 0:nt.stateSort},{"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold,"morphElementKey":this.getDimensionField()[0],"morph":lX(this._spec,this._barMarkName),"setCustomizedShape":null===(at=this._spec.bar)||void 0===at?void 0:at.customShape})},i.prototype._initBarBackgroundMark=function(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(i.mark.barBackground,{"dataView":this._barBackgroundViewData.getDataView(),"dataProductId":this._barBackgroundViewData.getProductId(),"stateSort":this._spec.barBackground.stateSort},{"setCustomizedShape":this._spec.barBackground.customShape,"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold}))},i.prototype.initMarkStyle=function(){this._barMark&&this.setMarkStyle(this._barMark,{"fill":this.getColorAttribute()},"normal",EU.Series)},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){return nt[at.getStackValueField()]},"z":this._fieldZ?this.dataToPositionZ.bind(this):null})},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this);var nt=this._tooltipHelper.activeTriggerSet,lt=nt.mark,Rt=nt.group;this._barMark&&(lt.add(this._barMark),Rt.add(this._barMark))},i.prototype._statisticViewData=function(){var nt,Rt,Bt=this;at.prototype._statisticViewData.call(this);var Lt=null!==(nt=this._spec.barBackground)&&void 0!==nt?nt:{};if(Lt.visible){var Ht,jt=this._getRelatedComponentSpecInfo("axes").some((function(nt){return nt.type===lt.cartesianBandAxis}));if(GW(this._option.dataSet,"addVChartProperty",pY),jt){var s=function(nt,at){for(var lt,Rt,Lt,Ht=E(nt,1)[0],jt=at.scaleDepth,$t=[{}],Kt=Bt.getDimensionField(),te=j(jt)?Kt.length:Math.min(Kt.length,jt),ne=0;ne<te;ne++){var re=Kt[ne],ae=null===(Rt=Ht.latestData[re])||void 0===Rt?void 0:Rt.values;if(null==ae?void 0:ae.length){for(var oe=[],se=null!==(Lt=Bt._spec.dataKey)&&void 0!==Lt?Lt:$z,le=0;le<ae.length;le++)for(var ue=0;ue<$t.length;ue++)oe.push(A(A({},$t[ue]),((lt={})[re]=ae[le],lt[se]=ae[le],lt)));$t=oe}}return $t};GW(this._option.dataSet,"dimensionItems",s),Ht=new Es(this._option.dataSet).parse([this._viewDataStatistics],{"type":"dataview"}).transform({"type":"dimensionItems","options":{"scaleDepth":j(Lt.fieldLevel)?void 0:Lt.fieldLevel+1}},!1).transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1),null===(Rt=this._viewDataStatistics)||void 0===Rt||Rt.target.addListener("change",Ht.reRunAllTransform)}else{s=function(nt){E(nt,1)[0];var at=[],lt=E(Bt.getDimensionContinuousField(),2),Rt=lt[0],Lt=lt[1],Ht={};return $t.latestData.forEach((function(nt){var lt,Bt="".concat(nt[Rt],"-").concat(nt[Lt]);Ht[Bt]||(Ht[Bt]=((lt={})[Rt]=nt[Rt],lt[Lt]=nt[Lt],lt),at.push(Ht[Bt]))})),at},GW(this._option.dataSet,"dimensionItems",s);var $t=this.getViewData();Ht=new Es(this._option.dataSet).parse([$t],{"type":"dataview"}).transform({"type":"dimensionItems"},!1).transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1),null==$t||$t.target.addListener("change",Ht.reRunAllTransform)}this._barBackgroundViewData=new jY(this._option,Ht)}},i.prototype.init=function(nt){var lt,Rt;at.prototype.init.call(this,nt),"vertical"===this.direction?"band"===(null===(lt=this._xAxisHelper)||void 0===lt?void 0:lt.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null===(Rt=this._yAxisHelper)||void 0===Rt?void 0:Rt.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()},i.prototype._shouldDoPreCalculate=function(){var nt=this,at=this.getRegion();return this.getStack()&&at.getSeries().filter((function(at){return at.type===nt.type&&at.getSpec().barMinHeight})).length},i.prototype._calculateStackRectPosition=function(nt){var at=this,lt=this.getRegion();if(!lt._bar_series_position_calculated){var Rt,Bt,Lt,Ht,jt;lt._bar_series_position_calculated=!0,nt?(Rt=nX,Bt=KY,Lt="_dataToPosY1",Ht="_dataToPosY",jt="_yAxisHelper"):(Rt=XY,Bt=YY,Lt="_dataToPosX1",Ht="_dataToPosX",jt="_xAxisHelper");var $t=cH(lt,!1,(function(nt){return nt.type===at.type}));for(var Kt in $t)for(var te in $t[Kt].nodes)cq($t[Kt].nodes[te],lt.getStackInverse(),{"isVertical":nt,"start":Rt,"end":Bt,"startMethod":Lt,"endMethod":Ht,"axisHelper":jt})}},i.prototype._calculateRectPosition=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt;at?(Lt="_dataToPosY1",Ht="_dataToPosY",jt="_yAxisHelper"):(Lt="_dataToPosX1",Ht="_dataToPosX",jt="_xAxisHelper");var $t=null===(Bt=(Rt=this[jt]).getScale)||void 0===Bt?void 0:Bt.call(Rt,0),Kt=this[jt].isInverse(),te=this._spec.barMinHeight,ne=uF(this[Lt](nt),$t,lt),re=uF(this[Ht](nt),$t,lt),ae=Math.abs(ne-re);ae<te&&(ae=te);var oe=1;return re<ne?oe=-1:re===ne&&(oe=at?Kt?1:-1:Kt?-1:1),ne+oe*ae},i.prototype._dataToPosX=function(nt){return this.dataToPositionX(nt)},i.prototype._dataToPosX1=function(nt){return this.dataToPositionX1(nt)},i.prototype._dataToPosY=function(nt){return this.dataToPositionY(nt)},i.prototype._dataToPosY1=function(nt){return this.dataToPositionY1(nt)},i.prototype.initBandRectMarkStyle=function(){var nt,at,lt,Rt,Bt=this,Lt=null===(at=null===(nt=this._xAxisHelper)||void 0===nt?void 0:nt.getScale)||void 0===at?void 0:at.call(nt,0),Ht=null===(Rt=null===(lt=this._yAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{"x":function(nt){return Bt._getBarXStart(nt,Lt)},"x1":function(nt){return Bt._getBarXEnd(nt,Lt)},"y":function(nt){return Bt._getPosition(Bt.direction,nt)},"height":function(){return Bt._getBarWidth(Bt._yAxisHelper)},"width":function(){},"y1":function(){}},"normal",EU.Series):this.setMarkStyle(this._barMark,{"y":function(nt){return Bt._getBarYStart(nt,Ht)},"y1":function(nt){return Bt._getBarYEnd(nt,Ht)},"x":function(nt){return Bt._getPosition(Bt.direction,nt)},"width":function(){return Bt._getBarWidth(Bt._xAxisHelper)},"x1":function(){},"height":function(){}},"normal",EU.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()},i.prototype._initStackBarMarkStyle=function(){var nt,at,lt,Rt,Bt=this;if(this._spec.stackCornerRadius){var Lt=null===(at=null===(nt=this._xAxisHelper)||void 0===nt?void 0:nt.getScale)||void 0===at?void 0:at.call(nt,0),Ht=null===(Rt=null===(lt=this._yAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0);this._barMark.setMarkConfig({"clip":!0,"clipPath":function(){var nt=[];return Bt._forEachStackGroup((function(at){var lt,Rt,jt=1/0,$t=-1/0,Kt=!1,te=1/0,ne=-1/0;at.values.forEach((function(nt){var at=nt[Qz],lt=nt[Jz],Rt=nt[tH],Bt=nt[eH];jt=Math.min(jt,at,lt),$t=Math.max($t,at,lt),N(Rt)&&N(Bt)&&(Kt=!0,te=Math.min(te,Rt,Bt),ne=Math.max(ne,Rt,Bt))}));var re=A(A(A({},at.values[0]),((lt={})[Qz]=jt,lt[Jz]=$t,lt)),Kt?((Rt={})[tH]=te,Rt[eH]=ne,Rt):void 0),ae="horizontal"===Bt.direction?{"x":Bt._getBarXStart(re,Lt),"x1":Bt._getBarXEnd(re,Lt),"y":Bt._getPosition(Bt.direction,re),"height":Bt._getBarWidth(Bt._yAxisHelper)}:{"y":Bt._getBarYStart(re,Ht),"y1":Bt._getBarYEnd(re,Ht),"x":Bt._getPosition(Bt.direction,re),"width":Bt._getBarWidth(Bt._xAxisHelper)};nt.push(Wg(A(A({},ae),{"cornerRadius":H(Bt._spec.stackCornerRadius)?Bt._spec.stackCornerRadius(ae,re,Bt._markAttributeContext):Bt._spec.stackCornerRadius,"fill":!0})))})),nt}})}},i.prototype.initLinearRectMarkStyle=function(){var nt,at,lt,Rt,Bt=this,Lt=null===(at=null===(nt=this._xAxisHelper)||void 0===nt?void 0:nt.getScale)||void 0===at?void 0:at.call(nt,0),Ht=null===(Rt=null===(lt=this._yAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0);if("horizontal"===this.direction){var jt=N(this._fieldY2)?{"y":function(nt){return uF(Bt._dataToPosY(nt),Ht,!0)},"y1":function(nt){return uF(Bt._dataToPosY1(nt),Ht,!0)}}:{"y":function(nt){return uF(Bt._dataToPosY(nt)-Bt._getBarWidth(Bt._yAxisHelper)/2,Ht,!0)},"height":function(nt){return Bt._getBarWidth(Bt._yAxisHelper)}};this.setMarkStyle(this._barMark,A({"x":function(nt){return Bt._getBarXStart(nt,Lt,!0)},"x1":function(nt){return Bt._getBarXEnd(nt,Lt,!0)}},jt),"normal",EU.Series),this.setMarkStyle(this._barBackgroundMark,A({"x":function(){return Bt._getBarBackgroundXStart(Lt)},"x1":function(){return Bt._getBarBackgroundXEnd(Lt)}},jt),"normal",EU.Series)}else{var $t=N(this._fieldX2)?{"x":function(nt){return uF(Bt._dataToPosX(nt),Lt,!0)},"x1":function(nt){return uF(Bt._dataToPosX1(nt),Lt,!0)}}:{"x":function(nt){return uF(Bt._dataToPosX(nt)-Bt._getBarWidth(Bt._xAxisHelper)/2,Lt,!0)},"width":function(nt){return Bt._getBarWidth(Bt._xAxisHelper)}};this.setMarkStyle(this._barMark,A(A({},$t),{"y":function(nt){return Bt._getBarYStart(nt,Ht)},"y1":function(nt){return Bt._getBarYEnd(nt,Ht)}}),"normal",EU.Series),this.setMarkStyle(this._barBackgroundMark,A(A({},$t),{"y":function(){return Bt._getBarBackgroundYStart(Ht)},"y1":function(){return Bt._getBarBackgroundYEnd(Ht)}}),"normal",EU.Series)}},i.prototype._initBandBarBackgroundMarkStyle=function(){var nt,at,lt,Rt,Bt,Lt=this;if(this._barBackgroundMark){var Ht=null===(at=null===(nt=this._xAxisHelper)||void 0===nt?void 0:nt.getScale)||void 0===at?void 0:at.call(nt,0),jt=null===(Rt=null===(lt=this._yAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0),$t=null!==(Bt=this._spec.barBackground)&&void 0!==Bt?Bt:{},Kt=j($t.fieldLevel)?void 0:$t.fieldLevel+1;"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{"x":function(){return Lt._getBarBackgroundXStart(Ht)},"x1":function(){return Lt._getBarBackgroundXEnd(Ht)},"y":function(nt){return Lt._getPosition(Lt.direction,nt,Kt,"barBackground")},"height":function(){return Lt._getBarWidth(Lt._yAxisHelper,Kt)},"width":function(){},"y1":function(){}},"normal",EU.Series):this.setMarkStyle(this._barBackgroundMark,{"x":function(nt){return Lt._getPosition(Lt.direction,nt,Kt,"barBackground")},"y":function(){return Lt._getBarBackgroundYStart(jt)},"y1":function(){return Lt._getBarBackgroundYEnd(jt)},"width":function(){return Lt._getBarWidth(Lt._xAxisHelper,Kt)},"x1":function(){},"height":function(){}},"normal",EU.Series)}},i.prototype.initAnimation=function(){var nt,at,lt=this,Rt={"yField":this._fieldY[0],"xField":this._fieldX[0],"direction":this.direction,"growFrom":function(){var nt,at;return"horizontal"===lt.direction?null===(nt=lt._xAxisHelper)||void 0===nt?void 0:nt.getScale(0).scale(0):null===(at=lt._yAxisHelper)||void 0===at?void 0:at.getScale(0).scale(0)}},Bt=null===(nt=this._spec.animationAppear)||void 0===nt?void 0:nt.preset,Lt=vX(this);this._barMark.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("bar"))||void 0===at?void 0:at(Rt,Bt),aX(this._barMarkName,this._spec,this._markAttributeContext),Lt))},i.prototype._getBarWidth=function(nt,at){var lt,Rt,Bt=this._groups?this._groups.fields.length:1,Lt=j(at)?Bt:Math.min(Bt,at),Ht=null!==(Rt=null===(lt=nt.getBandwidth)||void 0===lt?void 0:lt.call(nt,Lt-1))&&void 0!==Rt?Rt:6,jt=N(this._spec.barWidth)&&Lt===Bt,$t=N(this._spec.barMinWidth),Kt=N(this._spec.barMaxWidth),te=Ht;return jt&&(te=yF(this._spec.barWidth,Ht)),$t&&(te=Math.max(te,yF(this._spec.barMinWidth,Ht))),Kt&&(te=Math.min(te,yF(this._spec.barMaxWidth,Ht))),te},i.prototype._getPosition=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te,ne;"horizontal"===nt?(Kt=this.getYAxisHelper(),te="height",ne="barBackground"===Rt?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(Kt=this.getXAxisHelper(),te="width",ne="barBackground"===Rt?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));var re=Kt.getScale(0),ae=this._groups?this._groups.fields.length:1,oe=j(lt)?ae:Math.min(ae,lt),se=null!==(Lt=null===(Bt=Kt.getBandwidth)||void 0===Bt?void 0:Bt.call(Kt,oe-1))&&void 0!==Lt?Lt:6,le=oe===ae?this._barMark.getAttribute(te,at):se;if(oe>1&&N(this._spec.barGapInGroup)){for(var ue=this._groups.fields,ce=xt(this._spec.barGapInGroup),he=0,de=0,fe=ue.length-1;fe>=1;fe--){var pe=ue[fe],ve=null!==(jt=null===(Ht=Kt.getScale(fe))||void 0===Ht?void 0:Ht.domain())&&void 0!==jt?jt:[],Ae=ve.length,we=yF(null!==($t=ce[fe-1])&&void 0!==$t?$t:kt(ce),se),Ce=ve.indexOf(at[pe]);fe===ue.length-1?(he+=Ae*le+(Ae-1)*we,de+=Ce*(le+we)):(de+=Ce*(he+we),he+=he+(Ae-1)*we)}return re.scale(at[ue[0]])+Kt.getBandwidth(0)/2-he/2+de}var je=FB(re.type||"band");return ne(at,oe)+.5*(se-le)+(je?-se/2:0)},i.prototype.dataToBarBackgroundPositionX=function(nt,at){return this._dataToPosition(nt,this._xAxisHelper,this.fieldX,at,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)},i.prototype.dataToBarBackgroundPositionY=function(nt,at){return this._dataToPosition(nt,this._yAxisHelper,this.fieldY,at,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()},i.prototype.compile=function(){if(at.prototype.compile.call(this),this._spec.sampling){var nt=this._region.getLayoutRect(),lt=nt.width,Rt=nt.height,Bt=[],Lt=this._fieldY,Ht=this._fieldX;Bt.push({"type":"sampling","size":"horizontal"===this._direction?Rt:lt,"factor":this._spec.samplingFactor,"yfield":"horizontal"===this._direction?Ht[0]:Lt[0],"groupBy":this._seriesField,"mode":this._spec.sampling}),this._data.getProduct().transform(Bt)}},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._barMark]},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._barBackgroundViewData)||void 0===nt||nt.compile()},i.prototype.fillData=function(){var nt,lt;at.prototype.fillData.call(this),null===(lt=null===(nt=this._barBackgroundViewData)||void 0===nt?void 0:nt.getDataView())||void 0===lt||lt.reRunAllTransform()},i.prototype.viewDataUpdate=function(nt){var lt,Rt,Bt;at.prototype.viewDataUpdate.call(this,nt),null===(Rt=null===(lt=this._barBackgroundViewData)||void 0===lt?void 0:lt.getDataView())||void 0===Rt||Rt.reRunAllTransform(),null===(Bt=this._barBackgroundViewData)||void 0===Bt||Bt.updateData()},i.prototype.release=function(){var nt;at.prototype.release.call(this),null===(nt=this._barBackgroundViewData)||void 0===nt||nt.release(),this._barBackgroundViewData=null},i.type=nt.SeriesTypeEnum.bar,i.mark=Bq,i.transformerConstructor=Lq,i}(AX),fq=function(){jV(),sq(),Tz.registerAnimation("bar",(function(nt,at){return{"appear":nq(nt,at),"enter":$K(nt,!1),"exit":tq(nt,!1),"disappear":tq(nt)}})),_K(),gK(),Tz.registerSeries(Fq.type,Fq)},zq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barMinHeight","sampling","samplingFactor","barBackground","stackCornerRadius"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e.prototype._transformAxisSpec=function(at){var lt,Rt;if(nt.prototype._transformAxisSpec.call(this,at),at.axes){var Bt=at.series.some((function(nt){return"horizontal"===nt.direction})),Lt=null!==(lt=at.axes.find((function(nt){return"band"===nt.type})))&&void 0!==lt?lt:at.axes.find((function(nt){return(Bt?["left","right"]:["top","bottom"]).includes(nt.orient)}));if(Lt&&!Lt.bandSize&&!Lt.maxBandSize&&!Lt.minBandSize&&at.autoBandSize){var Ht=V(at.autoBandSize)&&null!==(Rt=at.autoBandSize.extend)&&void 0!==Rt?Rt:0,jt=at.series.find((function(nt){return"bar"===nt.type})),$t=jt.barMaxWidth,Kt=jt.barMinWidth,te=jt.barWidth,ne=jt.barGapInGroup;this._applyAxisBandSize(Lt,Ht,{"barMaxWidth":$t,"barMinWidth":Kt,"barWidth":te,"barGapInGroup":ne})}}},e}(rq),jq=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=zq,lt.type="bar",lt.seriesType=nt.SeriesTypeEnum.bar,lt}return S(i,at),i.type="bar",i.seriesType=nt.SeriesTypeEnum.bar,i.transformerConstructor=zq,i}(eq);bt(jq,lq);var Nq,mq=function(){fq(),Tz.registerChart(jq.type,jq)},Wq=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"width":void 0,"height":void 0,"length":3})},e.type="rect3d",e}(dY),bq=function(){Tz.registerMark(Wq.type,Wq),LP(),OP(),Pj.registerGraphic(MH.rect3d,Xg),$Y()},Gq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"bar3d")},e}(Lq),Yq=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.bar3d,lt._barMarkName="bar3d",lt._barMarkType="rect3d",lt.transformerConstructor=Gq,lt}return S(i,at),i.type=nt.SeriesTypeEnum.bar3d,i.mark=Oq,i.transformerConstructor=Gq,i}(Fq),Sq=function(){Tz.registerAnimation("bar3d",(function(nt,at){return{"appear":nq(nt,at),"enter":$K(nt,!1),"exit":tq(nt,!1),"disappear":tq(nt)}})),bq(),_K(),gK(),Tz.registerSeries(Yq.type,Yq)},Xq=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return lt.barWidth=at.barWidth,lt.barMaxWidth=at.barMaxWidth,lt.barMinWidth=at.barMinWidth,lt.barGapInGroup=at.barGapInGroup,lt},e}(zq),wq=function(){Rx(),Ix(),bx.registerPlugin("ViewTransform3dPlugin",pS)},Mq=function(){dW(),cV.useRegisters([NG,VG,xG,kG,HG,jG,GG,WG,UG])},Tq=function(){bt(cV,yV)},$q=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=Xq,lt.type="bar3d",lt.seriesType=nt.SeriesTypeEnum.bar3d,lt}return S(i,at),i.type="bar3d",i.seriesType=nt.SeriesTypeEnum.bar3d,i.transformerConstructor=Xq,i}(jq),Eq=function(){wq(),Sq(),Tz.registerChart($q.type,$q)},Kq=[10,20],Zq=TI.Linear,Qq="circle",iK=TI.Ordinal,rK=["circle","square","triangle","diamond","star"],Dq=function(nt,at){return"fadeIn"===at?{"type":"fadeIn"}:{"type":"scaleIn"}},aK=A(A({},GY),((Nq={}).point={"name":"point","type":"symbol"},Nq)),hK=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"point")},e}(xX),dK=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.scatter,lt.transformerConstructor=hK,lt._invalidType="zero",lt}return S(i,at),i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField},i.prototype._getSeriesAttribute=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=lt.defaultScaleType,Kt=lt.defaultRange;if(H(at))return at;if(X(at)){if(j(nt))return null===(Bt=this._option)||void 0===Bt||Bt.onError("".concat(Rt,"Field is required.")),at;if("ordinal"!==$t&&at.length>2)return null===(Lt=this._option)||void 0===Lt||Lt.onError("".concat(Rt," length is invalid, specify up to 2 ").concat(Rt,"s.")),at;var te="".concat(OF,"_series_scatter_").concat(this.id,"_scale_").concat(Rt);return this._option.globalScale.registerModelScale({"id":te,"type":$t,"domain":[{"dataId":this._rawData.name,"fields":[nt]}],"range":at}),{"scale":te,"field":nt}}if(V(at)){if(j(nt))return null===(Ht=this._option)||void 0===Ht||Ht.onError("".concat(Rt,"Field is required.")),at;te="".concat(OF,"_series_scatter_").concat(this.id,"_scale_").concat(Rt);var ne=A({"id":te,"type":$t,"domain":[{"dataId":this._rawData.name,"fields":[nt]}],"range":Kt},at);return this._option.globalScale.registerModelScale(ne),{"scale":ne.id,"field":nt}}return null===(jt=this._option)||void 0===jt||jt.onError("".concat(Rt," attribute is invalid.")),at},i.prototype.getSizeAttribute=function(nt,at){return j(at)?10:Z(at)?at:Y(at)&&J(at)?parseFloat(at):this._getSeriesAttribute(nt,at,{"defaultScaleType":Zq,"defaultRange":Kq},"size")},i.prototype.getShapeAttribute=function(nt,at){return j(at)?Qq:Y(at)?at:this._getSeriesAttribute(nt,at,{"defaultScaleType":iK,"defaultRange":rK},"shape")},i.prototype.initMark=function(){var nt,at;this._symbolMark=this._createMark(i.mark.point,{"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":null===(nt=this._spec.point)||void 0===nt?void 0:nt.stateSort},{"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold,"morph":lX(this._spec,i.mark.point.name),"morphElementKey":this.getDimensionField()[0],"setCustomizedShape":null===(at=this._spec.point)||void 0===at?void 0:at.customShape})},i.prototype.initMarkStyle=function(){this.initSymbolMarkStyle()},i.prototype.initAnimation=function(){var nt,at,lt,Rt=vX(this),Bt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._symbolMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("scatter"))||void 0===lt?void 0:lt({},Bt),aX("point",this._spec,this._markAttributeContext),Rt))},i.prototype.initSymbolMarkStyle=function(){var nt=this._symbolMark;nt&&("zero"!==this._invalidType&&this.setMarkStyle(nt,{"visible":this._getInvalidDefined.bind(this)}),this.setMarkStyle(nt,{"x":this.dataToPositionX.bind(this),"y":this.dataToPositionY.bind(this),"z":this._fieldZ?this.dataToPositionZ.bind(this):null,"fill":this.getColorAttribute(),"size":Z(this._size)||H(this._size)?this._size:10,"symbolType":Y(this._shape)||H(this._shape)?this._shape:Qq},mU.STATE_NORMAL,EU.Series),(N(this._sizeField)||N(this._size))&&this.setMarkStyle(nt,{"size":this.getSizeAttribute(this._sizeField,this._size)},mU.STATE_NORMAL,EU.User_Mark),(N(this._shapeField)||N(this._shape))&&this.setMarkStyle(nt,{"symbolType":this.getShapeAttribute(this._shapeField,this._shape)},mU.STATE_NORMAL,EU.User_Mark))},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)},i.prototype.viewDataStatisticsUpdate=function(nt){var lt=this;at.prototype.viewDataStatisticsUpdate.call(this,nt);var Rt=[this.getDimensionField()[0],this.getStackValueField()].every((function(nt){var at,Rt,Bt;return nt&&(null===(Bt=null===(Rt=null===(at=lt.getViewDataStatistics())||void 0===at?void 0:at.latestData)||void 0===Rt?void 0:Rt[nt])||void 0===Bt?void 0:Bt.allValid)}));"zero"===this._invalidType||Rt?this.setMarkStyle(this._symbolMark,{"visible":!0},"normal",EU.Series):this.setMarkStyle(this._symbolMark,{"visible":this._getInvalidDefined.bind(this)},"normal",EU.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&(this._labelMark=nt,this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){return nt[at.getStackValueField()]},"z":this._fieldZ?this.dataToPositionZ.bind(this):null},mU.STATE_NORMAL,EU.Series),"zero"!==this._invalidType&&this.setMarkStyle(nt,{"visible":this._getInvalidDefined.bind(this)},mU.STATE_NORMAL,EU.Series))},i.prototype.handleZoom=function(nt){var at,lt,Rt=this;this.getMarksWithoutRoot().forEach((function(nt){var at=nt.getProduct();at&&at.elements&&at.elements.length&&at.elements.forEach((function(nt,at){var lt=nt.getGraphicItem(),Bt=nt.getDatum(),Lt=Rt.dataToPosition(Bt);Lt&&lt&&lt.translateTo(Lt.x,Lt.y)}))}));var Bt=null===(lt=null===(at=this._labelMark)||void 0===at?void 0:at.getComponent())||void 0===lt?void 0:lt.getProduct();Bt&&Bt.evaluate(null,null)},i.prototype.handlePan=function(nt){this.handleZoom(nt)},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[this._symbolMark]},i.type=nt.SeriesTypeEnum.scatter,i.mark=aK,i.transformerConstructor=hK,i}(AX),Hq=function(){CX(),Tz.registerAnimation("scatter",(function(nt,at){return A({"appear":Dq(0,at)},mX)})),_K(),gK(),Tz.registerSeries(dK.type,dK)},fK=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["point","size","shape","shapeField","sizeField"])},e}(rq),pK=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=fK,lt.type="scatter",lt.seriesType=nt.SeriesTypeEnum.scatter,lt}return S(i,at),i.type="scatter",i.seriesType=nt.SeriesTypeEnum.scatter,i.transformerConstructor=fK,i}(eq);bt(pK,lq);var Vq=function(){Hq(),Tz.registerChart(pK.type,pK)};xa();var vK={},yK=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Uq(nt,at){nt&&Y(nt)||Xk("Projection type must be a name string.");var lt=nt.toLowerCase();return arguments.length>1&&(vK[lt]=function(nt,at){return function i(){var lt=at();return lt.type=nt,lt.path=xa().projection(lt),lt.copy=lt.copy||function(){var nt=i();return yK.forEach((function(at){lt[at]&&nt[at](lt[at]())})),nt.path.pointRadius(lt.path.pointRadius()),nt},lt}}(lt,at)),vK[lt]||null}var mK={"albers":ja,"albersusa":function(){var nt,at,lt,Rt,Bt,Lt,Ht=ja(),jt=Ha().rotate([154,0]).center([-2,58.5]).parallels([55,65]),$t=Ha().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Kt={"point":function(nt,at){Lt=[nt,at]}};function c(nt){var at=nt[0],Ht=nt[1];return Lt=null,lt.point(at,Ht),Lt||(Rt.point(at,Ht),Lt)||(Bt.point(at,Ht),Lt)}function h(){return nt=at=null,c}return c.invert=function(nt){var at=Ht.scale(),lt=Ht.translate(),Rt=(nt[0]-lt[0])/at,Bt=(nt[1]-lt[1])/at;return(Bt>=.12&&Bt<.234&&Rt>=-.425&&Rt<-.214?jt:Bt>=.166&&Bt<.234&&Rt>=-.214&&Rt<-.115?$t:Ht).invert(nt)},c.stream=function(lt){return nt&&at===lt?nt:(Rt=[Ht.stream(at=lt),jt.stream(lt),$t.stream(lt)],Bt=Rt.length,nt={"point":function(nt,at){for(var lt=-1;++lt<Bt;)Rt[lt].point(nt,at)},"sphere":function(){for(var nt=-1;++nt<Bt;)Rt[nt].sphere()},"lineStart":function(){for(var nt=-1;++nt<Bt;)Rt[nt].lineStart()},"lineEnd":function(){for(var nt=-1;++nt<Bt;)Rt[nt].lineEnd()},"polygonStart":function(){for(var nt=-1;++nt<Bt;)Rt[nt].polygonStart()},"polygonEnd":function(){for(var nt=-1;++nt<Bt;)Rt[nt].polygonEnd()}});var Rt,Bt},c.precision=function(nt){return arguments.length?(Ht.precision(nt),jt.precision(nt),$t.precision(nt),h()):Ht.precision()},c.scale=function(nt){return arguments.length?(Ht.scale(nt),jt.scale(.35*nt),$t.scale(nt),c.translate(Ht.translate())):Ht.scale()},c.translate=function(nt){if(!arguments.length)return Ht.translate();var at=Ht.scale(),Lt=+nt[0],te=+nt[1];return lt=Ht.translate(nt).clipExtent([[Lt-.455*at,te-.238*at],[Lt+.455*at,te+.238*at]]).stream(Kt),Rt=jt.translate([Lt-.307*at,te+.201*at]).clipExtent([[Lt-.425*at+_n,te+.12*at+_n],[Lt-.214*at-_n,te+.234*at-_n]]).stream(Kt),Bt=$t.translate([Lt-.205*at,te+.212*at]).clipExtent([[Lt-.214*at+_n,te+.166*at+_n],[Lt-.115*at-_n,te+.234*at-_n]]).stream(Kt),h()},c.fitExtent=function(nt,at){return wa(c,nt,at)},c.fitSize=function(nt,at){return Ma(c,nt,at)},c.fitWidth=function(nt,at){return Ta(c,nt,at)},c.fitHeight=function(nt,at){return Ca(c,nt,at)},c.scale(1070)},"azimuthalequalarea":function(){return Da(to).scale(124.75).clipAngle(179.999)},"azimuthalequidistant":function(){return Da(eo).scale(79.4188).clipAngle(179.999)},"conicconformal":function(){return Fa(Ka).scale(109.5).parallels([30,30])},"conicequalarea":Ha,"conicequidistant":function(){return Fa(Za).scale(131.154).center([0,13.9389])},"equalEarth":function(){return Da(io).scale(177.158)},"equirectangular":function(){return Da(qa).scale(152.63)},"gnomonic":function(){return Da(no).scale(144.049).clipAngle(60)},"identity":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt=1,$t=0,Kt=0,te=1,ne=1,re=0,ae=null,oe=1,se=1,le=ka({"point":function(nt,at){var lt=_([nt,at]);this.stream.point(lt[0],lt[1])}}),ue=br;function m(){return oe=jt*te,se=jt*ne,Lt=Ht=null,_}function _(lt){var Rt=lt[0]*oe,Bt=lt[1]*se;if(re){var Lt=Bt*nt-Rt*at;Rt=Rt*nt+Bt*at,Bt=Lt}return[Rt+$t,Bt+Kt]}return _.invert=function(lt){var Rt=lt[0]-$t,Bt=lt[1]-Kt;if(re){var Lt=Bt*nt+Rt*at;Rt=Rt*nt-Bt*at,Bt=Lt}return[Rt/oe,Bt/se]},_.stream=function(nt){return Lt&&Ht===nt?Lt:Lt=le(ue(Ht=nt))},_.postclip=function(nt){return arguments.length?(ue=nt,ae=lt=Rt=Bt=null,m()):ue},_.clipExtent=function(nt){return arguments.length?(ue=null==nt?(ae=lt=Rt=Bt=null,br):_r(ae=+nt[0][0],lt=+nt[0][1],Rt=+nt[1][0],Bt=+nt[1][1]),m()):null==ae?null:[[ae,lt],[Rt,Bt]]},_.scale=function(nt){return arguments.length?(jt=+nt,m()):jt},_.translate=function(nt){return arguments.length?($t=+nt[0],Kt=+nt[1],m()):[$t,Kt]},_.angle=function(lt){return arguments.length?(at=Fn(re=lt%360*wn),nt=En(re),m()):re*An},_.reflectX=function(nt){return arguments.length?(te=nt?-1:1,m()):te<0},_.reflectY=function(nt){return arguments.length?(ne=nt?-1:1,m()):ne<0},_.fitExtent=function(nt,at){return wa(_,nt,at)},_.fitSize=function(nt,at){return Ma(_,nt,at)},_.fitWidth=function(nt,at){return Ta(_,nt,at)},_.fitHeight=function(nt,at){return Ca(_,nt,at)},_},"mercator":function(){return Ya(Ua).scale(961/Sn)},"naturalEarth1":function(){return Da(ro).scale(175.295)},"orthographic":function(){return Da(ao).scale(249.5).clipAngle(90+_n)},"stereographic":function(){return Da(oo).scale(250).clipAngle(142)},"transversemercator":function(){var nt=Ya(so),at=nt.center,lt=nt.rotate;return nt.center=function(nt){return arguments.length?at([-nt[1],nt[0]]):[(nt=at())[1],-nt[0]]},nt.rotate=function(nt){return arguments.length?lt([nt[0],nt[1],nt.length>2?nt[2]+90:90]):[(nt=lt())[0],nt[1],nt[2]-90]},lt([0,0,90]).scale(159.155)}};Object.keys(mK).forEach((function(nt){Uq(nt,mK[nt])}));var bK="Feature",kK="FeatureCollection";function qq(nt){var at=xt(nt);return 1===at.length?at[0]:{"type":kK,"features":at.reduce((function(nt,at){return nt.concat(function(nt){return nt.type===kK?nt.features:xt(nt).filter((function(nt){return!j(nt)})).map((function(nt){return nt.type===bK?nt:{"type":bK,"geometry":nt}}))}(at))}),[])}}var AK=yK.concat(["pointRadius","fit","extent","size"]);function Jq(nt,at){var lt=[];return nt?(Object.keys(nt).forEach((function(Rt){AK.includes(Rt)&&(lt=lt.concat(nj(nt[Rt],at)))})),lt):lt}var CK,MK=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[nt])).grammarType="projection",at}return h(e,nt),o(e,[{"key":"parse","value":function(nt){return y(e,"parse",this,3)([nt]),this.pointRadius(nt.pointRadius),this.size(nt.size),this.extent(nt.extent),this.fit(nt.fit),this.configure(nt),this.commit(),this}},{"key":"pointRadius","value":function(nt){return j(this.spec.pointRadius)||this.detach(nj(this.spec.pointRadius,this.view)),this.spec.pointRadius=nt,this.attach(nj(nt,this.view)),this.commit(),this}},{"key":"size","value":function(nt){return j(this.spec.size)||this.detach(nj(this.spec.size,this.view)),this.spec.size=nt,this.attach(nj(nt,this.view)),this.commit(),this}},{"key":"extent","value":function(nt){return j(this.spec.extent)||this.detach(nj(this.spec.extent,this.view)),this.spec.extent=nt,this.attach(nj(nt,this.view)),this.commit(),this}},{"key":"fit","value":function(nt){return j(this.spec.fit)||this.detach(nj(this.spec.fit,this.view)),this.spec.fit=nt,this.attach(nj(nt,this.view)),this.commit(),this}},{"key":"configure","value":function(nt){return this.detach(Jq(this.spec,this.view)),j(nt)?this.spec={"type":this.spec.type,"fit":this.spec.fit,"extent":this.spec.extent,"size":this.spec.size,"pointRadius":this.spec.pointRadius}:(Object.assign(this.spec,nt),this.attach(Jq(this.spec,this.view))),this.commit(),this}},{"key":"evaluate","value":function(nt,at){var lt,Rt,Bt=this;if(this.projection&&this.projection.type===this.spec.type||(this.projection=((Rt=Uq(((lt=this.spec.type)||"mercator").toLowerCase()))||Xk("Unrecognized projection type: "+lt),Rt()),this.projection.type=this.spec.type),yK.forEach((function(nt){j(Bt.spec[nt])||function(nt,at,lt){H(nt[at])&&nt[at](lt)}(Bt.projection,nt,aj(Bt.spec[nt],at,Uq))})),j(this.spec.pointRadius)||this.projection.path.pointRadius(aj(this.spec.pointRadius,at,Uq)),!(j(this.spec.fit)||j(this.spec.extent)&&j(this.spec.size))){var Lt=qq(aj(this.spec.fit,at,Uq));this.spec.extent?this.projection.fitExtent(aj(this.spec.extent,at,Uq),Lt):this.spec.size&&this.projection.fitSize(aj(this.spec.size,at,Uq),Lt)}return this.projection}},{"key":"output","value":function(){return this.projection}}])}(lN),tZ=function(nt,at){if(!at.from||!at.from())return nt;var lt,Rt=at.fields,Bt=at.key,Lt=at.values,Ht=at.default,jt=at.as||[Rt],$t=at.from().reduce((function(nt,at){return at[Rt]&&nt.set(at[Rt],at),nt}),new Map);if(H(at.set))lt=function(nt){var lt=$t.get(nt[Bt]);at.set(nt,lt)};else if(Lt){var Kt=Lt.length;lt=function(nt){var at=$t.get(nt[Bt]);if(j(at))for(var lt=0;lt<Kt;++lt)nt[jt[lt]]=Ht;else for(lt=0;lt<Kt;++lt)nt[jt[lt]]=at[Lt[lt]]}}else lt=function(nt){var at=$t.get(nt[Bt]);nt[jt[0]]=N(at)?at:Ht};return 0===nt.length?[]:nt.map((function(nt){return lt(nt),nt}))},EK=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.geo,lt.coordinate="geo",lt._nameProperty="name",lt}return S(i,at),i.prototype.getMapViewData=function(){var nt;return null===(nt=this._mapViewData)||void 0===nt?void 0:nt.getDataView()},Object.defineProperty(i.prototype,"nameField",{"get":function(){return this._nameField},"set":function(nt){this._nameField=nt},"enumerable":!1,"configurable":!0}),Object.defineProperty(i.prototype,"valueField",{"get":function(){return this._valueField},"set":function(nt){this._valueField=nt},"enumerable":!1,"configurable":!0}),i.prototype.getNameProperty=function(){return this._nameProperty},i.prototype.getCentroidProperty=function(){return this._centroidProperty},i.prototype.getCoordinateHelper=function(){return this._coordinateHelper},i.prototype.setCoordinateHelper=function(nt){this._coordinateHelper=nt},i.prototype.getStatisticFields=function(){var nt=[];return nt.push({"key":this._nameField,"operations":["values"]}),nt.push({"key":this._valueField,"operations":["max","min"]}),nt},i.prototype.getGroupFields=function(){return null},i.prototype.dataToPosition=function(nt,at){var lt,Rt=null;if(!nt)return Rt;if(at&&!this.isDatumInViewData(nt))return Rt;var Bt=this._coordinateHelper,Lt=Bt.dataToPosition,Ht=Bt.latitudeField,jt=Bt.longitudeField;if(null===(Rt=this.nameToPosition(nt))){var $t=jt?null==nt?void 0:nt[jt]:Number.NaN,Kt=Ht?null==nt?void 0:nt[Ht]:Number.NaN;Rt=null!==(lt=null==Lt?void 0:Lt([$t,Kt]))&&void 0!==lt?lt:null}return Rt},i.prototype.nameToPosition=function(nt){var at=this.getDatumName(nt);return j(at)?null:this.nameValueToPosition(at)},i.prototype.nameValueToPosition=function(nt){var at,lt,Rt=this,Bt=null===(lt=null===(at=this.getMapViewData())||void 0===at?void 0:at.latestData)||void 0===lt?void 0:lt.filter((function(at){return Rt.getDatumName(at)===nt}))[0];if(j(Bt))return null;var Lt=this._coordinateHelper.dataToPosition,Ht=this.getDatumCenter(Bt),jt=null==Lt?void 0:Lt(Ht);return j(jt)||isNaN(jt.x)||isNaN(jt.y)?null:jt},i.prototype.dataToLatitude=function(nt){return this._coordinateHelper?(0,this._coordinateHelper.dataToLatitude)(nt):Number.NaN},i.prototype.dataToLongitude=function(nt){return this._coordinateHelper?(0,this._coordinateHelper.dataToLatitude)(nt):Number.NaN},i.prototype.valueToPosition=function(nt,at){return{"x":this.dataToLongitude(nt),"y":this.dataToLatitude(at)}},i.prototype.positionToData=function(nt){},i.prototype.latitudeToData=function(nt){},i.prototype.longitudeToData=function(nt){},i.prototype.dataToPositionX=function(nt){var at;return null===(at=this._option)||void 0===at||at.onError("Method not implemented."),0},i.prototype.dataToPositionY=function(nt){var at;return null===(at=this._option)||void 0===at||at.onError("Method not implemented."),0},i.prototype.dataToPositionZ=function(nt){var at;return null===(at=this._option)||void 0===at||at.onError("Method not implemented."),0},i.prototype.release=function(){at.prototype.release.call(this),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null},i.prototype.getStackGroupFields=function(){return[this._nameField]},i.prototype.getStackValueField=function(){return this._spec.valueField},i.prototype.compileData=function(){var nt;null===(nt=this._mapViewData)||void 0===nt||nt.compile()},i.prototype.initStatisticalData=function(){if(at.prototype.initStatisticalData.call(this),this._mapViewData){var nt="".concat(OF,"_series_").concat(this.id,"_mapViewDataStatic");this._mapViewDataStatistics=this.createStatisticalData(nt,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}},i.prototype.getSeriesKeys=function(){var nt,at,lt,Rt,Bt;return this._seriesField?null!==(Bt=null!==(at=null===(nt=this.getRawDataStatisticsByField(this._seriesField))||void 0===nt?void 0:nt.values)&&void 0!==at?at:null===(Rt=null===(lt=this._mapViewDataStatistics)||void 0===lt?void 0:lt.latestData[this._seriesField])||void 0===Rt?void 0:Rt.values)&&void 0!==Bt?Bt:[]:this.name?[this.name]:this.userId?["".concat(this.userId)]:["".concat(this.type,"_").concat(this.id)]},i.prototype.fillData=function(){var nt,lt;at.prototype.fillData.call(this),null===(nt=this._mapViewData.getDataView())||void 0===nt||nt.reRunAllTransform(),null===(lt=this._mapViewDataStatistics)||void 0===lt||lt.reRunAllTransform()},i.prototype.getActiveMarks=function(){return[]},i}(kX),PK="".concat(OF,"_MAP_LOOK_UP_KEY"),nZ=function(nt,at){return nt.features&&nt.features.forEach((function(nt,lt){var Rt;nt[Xz]=lt;var Bt=null===(Rt=nt.properties)||void 0===Rt?void 0:Rt[at.nameProperty];at.nameMap&&at.nameMap[Bt]?nt[PK]=at.nameMap[Bt]:nt[PK]=Bt})),nt.features},IK=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.dimensionTooltipTitleCallback=function(nt){var lt,Rt=at.series;return null!==(lt=at._getDimensionData(nt))&&void 0!==lt?lt:Rt.getDatumName(nt)},at}return S(e,nt),e}(zY),BK=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"lineWidth":0,"path":""})},e.type="path",e}(dY),oZ=function(){Tz.registerMark(BK.type,BK),YN()},OK=A(A({},GY),((CK={}).area={"name":"area","type":"path"},CK)),LK=function(){function t(nt){this.projection=Uq(nt.type)()}return t.prototype.fit=function(nt,at,lt){var Rt={"type":"FeatureCollection","features":lt};this.projection.fitExtent([nt,at],Rt)},t.prototype.center=function(nt){var at,lt;null===(lt=null===(at=this.projection)||void 0===at?void 0:at.center)||void 0===lt||lt.call(at,nt)},t.prototype.project=function(nt){var at;return null===(at=this.projection)||void 0===at?void 0:at.call(this,nt)},t.prototype.shape=function(nt){var at,lt;return null===(lt=null===(at=this.projection)||void 0===at?void 0:at.path)||void 0===lt?void 0:lt.call(at,nt)},t.prototype.invert=function(nt){var at,lt;return null===(lt=null===(at=this.projection)||void 0===at?void 0:at.invert)||void 0===lt?void 0:lt.call(at,nt)},t.prototype.scale=function(nt){var at;if(null===(at=this.projection)||void 0===at?void 0:at.scale){if(void 0===nt)return this.projection.scale();this.projection.scale(nt)}},t.prototype.translate=function(nt){var at;if(null===(at=this.projection)||void 0===at?void 0:at.scale){if(void 0===nt)return this.projection.translate();this.projection.translate(nt)}},t.prototype.evaluate=function(nt,at,lt){var Rt=this.projection.copy();return null==Rt?void 0:Rt.fitExtent([nt,at],{"type":"FeatureCollection","features":lt})},t}(),FK=function(){function t(){}return t.prototype.parserScrollEvent=function(nt){return nt?!(nt.ctrlKey||0===nt.deltaY&&0===nt.deltaX)&&(nt.scrollX=nt.deltaX,nt.scrollY=nt.deltaY,nt):nt},t.prototype.parserZoomEvent=function(nt){if(!nt)return nt;var at=Math.pow(1.0005,-nt.deltaY*Math.pow(16,nt.deltaMode));return nt.zoomDelta=at,nt.zoomX=nt.canvasX,nt.zoomY=nt.canvasY,nt},t.prototype.clearZoom=function(){},t.prototype.clearScroll=function(){},t.prototype.clearDrag=function(){},t.prototype.parserDragEvent=function(){return!0},t}(),zK=function(){function t(){this._lastScale=0}return t.prototype.clearZoom=function(){this._lastScale=0,this.pointerId=null},t.prototype.parserDragEvent=function(nt){return!0},t.prototype.parserZoomEvent=function(nt){var at=nt.scale;if(0===this._lastScale)return this._lastScale=at,nt;nt.zoomDelta=at/this._lastScale;var lt=nt.center;return nt.zoomX=lt.x,nt.zoomY=lt.y,this._lastScale=at,nt},t.prototype.parserScrollEvent=function(nt){return nt},t.prototype.clearScroll=function(){},t.prototype.clearDrag=function(){},t}();function hZ(at){return at===nt.RenderModeEnum["desktop-browser"]||at===nt.RenderModeEnum["desktop-miniApp"]?{"start":"pointerdown","move":"pointermove","end":["pointerup","pointerupoutside"],"zoom":"wheel","zoomEnd":"pointerup","scroll":"wheel","trigger":FK}:zk(at)||Hk(at)?{"start":"pointerdown","move":"pointermove","end":["pointerup","pointerupoutside"],"zoom":"pinch","zoomEnd":"pinchend","scroll":"pan","scrollEnd":"panend","trigger":zK}:null}var HK={"debounce":qt,"throttle":Zt},NK=function(){function e(){this._isGestureListener=!1}return e.prototype.initZoomable=function(at,lt){void 0===lt&&(lt=nt.RenderModeEnum["desktop-browser"]),this._eventObj=at,this._renderMode=lt,this._gestureController=this._option.getChart().getVGrammarView().renderer._gestureController,this._isGestureListener=zk(this._renderMode)||Hk(this._renderMode),hZ(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))},e.prototype._getZoomTriggerEvent=function(nt){return hZ(this._renderMode)[nt]},e.prototype._zoomEventDispatch=function(nt,at,lt,Rt){if(this._isGestureListener||nt.event){var Bt=this._isGestureListener?nt:nt.event.clone();this._zoomableTrigger.parserZoomEvent(Bt);var Lt=Bt,Ht=Lt.zoomDelta,jt=Lt.zoomX,$t=Lt.zoomY,Kt=Lt.path;if((Rt||Kt.some((function(nt){return nt.name&&nt.name.includes("region")})))&&!j(Ht)&&Xe({"x":jt,"y":$t},this._getRegionOrSeriesLayout(at),!1)){var te={};lt&&(te=lt({"zoomDelta":Ht,"zoomX":jt,"zoomY":$t},Bt)),this._eventObj.emit("zoom",A(A({"scale":Bt.zoomDelta,"scaleCenter":{"x":Bt.zoomX,"y":Bt.zoomY}},te),{"model":this}))}}},e.prototype._getRegionOrSeriesLayout=function(nt){"region"!==nt.type&&(nt=nt.getRegion());var at=nt.layout.getLayout(),lt=at.x,Rt=at.y;return{"x1":lt,"y1":Rt,"x2":lt+at.width,"y2":Rt+at.height}},e.prototype._bindZoomEventAsRegion=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=this,Kt=null!==(Ht=null==Rt?void 0:Rt.delayType)&&void 0!==Ht?Ht:"throttle",te=null!==(jt=null==Rt?void 0:Rt.delayTime)&&void 0!==jt?jt:0,ne=this._isGestureListener?this._gestureController:nt,re=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{"level":VW.chart,"consume":!0}],ae=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{"level":VW.chart,"consume":!1}];(Bt=ne).on.apply(Bt,P(P([],E(ae),!1),[HK[Kt]((function(nt){$t._zoomableTrigger.clearZoom()}),te)],!1)),(Lt=ne).on.apply(Lt,P(P([],E(re),!1),[HK[Kt]((function(nt){var Bt;$t._zoomEventDispatch(nt,at,lt,null!==(Bt=null==Rt?void 0:Rt.allowComponentZoom)&&void 0!==Bt&&Bt)}),te)],!1))},e.prototype.initZoomEventOfSeries=function(nt,at,lt){this._option.disableTriggerEvent||hZ(this._renderMode)&&this._bindZoomEventAsRegion(nt.event,nt,at,lt)},e.prototype.initZoomEventOfRegions=function(nt,at,lt,Rt){var Bt=this;this._option.disableTriggerEvent||hZ(this._renderMode)&&nt.forEach((function(nt){at?nt.getSeries().forEach((function(nt){at(nt)&&Bt._bindZoomEventAsRegion(nt.event,nt,lt,Rt)})):Bt._bindZoomEventAsRegion(Bt._eventObj,nt,lt,Rt)}))},e.prototype._scrollEventDispatch=function(nt,at,lt){var Rt=!1;if(!this._isGestureListener&&(!nt.event||this._option.disableTriggerEvent))return Rt;var Bt=this._isGestureListener?nt:nt.event;this._zoomableTrigger.parserScrollEvent(Bt);var Lt=Bt,Ht=Lt.scrollX,jt=Lt.scrollY,$t=Lt.canvasX,Kt=Lt.canvasY;return j(Ht)&&j(jt)?Rt:Xe({"x":$t,"y":Kt},this._getRegionOrSeriesLayout(at),!1)?(lt&&(Rt=lt({"scrollX":Ht,"scrollY":jt},Bt)),this._eventObj.emit("scroll",{"scrollX":Ht,"scrollY":jt,"model":this}),Rt):Rt},e.prototype._bindScrollEventAsRegion=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=this,Kt=null!==(Ht=null==Rt?void 0:Rt.delayType)&&void 0!==Ht?Ht:"throttle",te=null!==(jt=null==Rt?void 0:Rt.delayTime)&&void 0!==jt?jt:0,ne=this._isGestureListener?this._gestureController:nt,re=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{"level":VW.chart,"consume":!0}],ae=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{"level":VW.chart,"consume":!1}];(Bt=ne).on.apply(Bt,P(P([],E(ae),!1),[HK[Kt]((function(nt){$t._zoomableTrigger.clearScroll()}),te)],!1)),(Lt=ne).on.apply(Lt,P(P([],E(re),!1),[HK[Kt]((function(nt){return $t._scrollEventDispatch(nt,at,lt)}),te)],!1))},e.prototype.initScrollEventOfSeries=function(nt,at,lt){hZ(this._renderMode)&&this._bindScrollEventAsRegion(nt.event,nt,at,lt)},e.prototype.initScrollEventOfRegions=function(nt,at,lt,Rt){var Bt=this;this._option.disableTriggerEvent||hZ(this._renderMode)&&nt.forEach((function(nt){at?nt.getSeries().forEach((function(nt){at(nt)&&Bt._bindScrollEventAsRegion(nt.event,nt,lt,Rt)})):Bt._bindScrollEventAsRegion(Bt._eventObj,nt,lt,Rt)}))},e.prototype._bindDragEventAsRegion=function(nt,at,lt,Rt){var Bt=this;nt.on(this._getZoomTriggerEvent("start"),{"level":VW.chart},(function(nt){if(nt.event){var Lt=nt.event;Xe({"x":Lt.canvasX,"y":Lt.canvasY},Bt._getRegionOrSeriesLayout(at),!1)&&Bt._handleDrag(nt,lt,Rt)}})),nt.on("click",{"level":VW.chart},(function(){return!Bt._clickEnable}))},e.prototype.initDragEventOfSeries=function(nt,at,lt){var Rt=this;this._option.disableTriggerEvent||hZ(this._renderMode)&&nt.event.on(this._getZoomTriggerEvent("start"),{"level":VW.model,"filter":function(at){var lt=at.model;return(null==lt?void 0:lt.id)===nt.id}},(function(nt){Rt._handleDrag(nt,at,lt)}))},e.prototype.initDragEventOfRegions=function(nt,at,lt,Rt){var Bt=this;this._option.disableTriggerEvent||hZ(this._renderMode)&&nt.forEach((function(nt){at?nt.getSeries().forEach((function(nt){at(nt)&&(nt.event.on(Bt._getZoomTriggerEvent("start"),{"level":VW.model,"filter":function(at){var lt=at.model;return(null==lt?void 0:lt.id)===nt.id}},(function(nt){Bt._handleDrag(nt,lt)})),nt.event.on("click",{"level":VW.model,"filter":function(at){var lt=at.model;return(null==lt?void 0:lt.id)===nt.id}},(function(){return!Bt._clickEnable})))})):Bt._bindDragEventAsRegion(Bt._eventObj,nt,lt,Rt)}))},e.prototype._handleDrag=function(nt,at,lt){var Rt,Bt,Lt,Ht=this;if(!this._option.disableTriggerEvent&&(this._clickEnable=!1,this._zoomableTrigger.parserDragEvent(nt.event))){var jt=null!==(Rt=null==lt?void 0:lt.delayType)&&void 0!==Rt?Rt:"throttle",$t=null!==(Bt=null==lt?void 0:lt.delayTime)&&void 0!==Bt?Bt:0,Kt=null===(Lt=null==lt?void 0:lt.realTime)||void 0===Lt||Lt,te=this._getZoomTriggerEvent("move"),ne=this._getZoomTriggerEvent("end"),re=nt.event,ae=re.canvasX,oe=re.canvasY,se=re.canvasX,le=re.canvasY,ue=HK[jt]((function(nt){Ht._clickEnable=!0;var lt=nt.event,Rt=[lt.canvasX-se,lt.canvasY-le];se=lt.canvasX,le=lt.canvasY,!Kt&&at&&at(Rt,nt.event),Ht._eventObj.emit("panend",{"delta":Rt,"model":Ht}),Ht._zoomableTrigger.pointerId=null,Ht._eventObj.off(te,{"level":VW.chart,"source":NW.chart},ce),ne.forEach((function(nt){Ht._eventObj.off(nt,{"level":VW.chart,"source":NW.chart},ue),Ht._eventObj.allow(nt)}))}),$t),ce=HK[jt]((function(nt){if(Ht._zoomableTrigger.parserDragEvent(nt.event)){Ht._clickEnable=!1,ne.forEach((function(nt){return Ht._eventObj.prevent(nt,ue)}));var lt=nt.event,Rt=[lt.canvasX-ae,lt.canvasY-oe];ae=lt.canvasX,oe=lt.canvasY,Kt&&at&&at(Rt,nt.event),Ht._eventObj.emit("panmove",{"delta":Rt,"model":Ht})}}),$t);this._eventObj.on(te,{"level":VW.chart,"source":NW.chart},ce),ne.forEach((function(nt){Ht._eventObj.on(nt,{"level":VW.chart,"source":NW.chart},ue)}))}},e}();function fZ(nt,at){return"".concat(OF,"_").concat(at,"_").concat(nt)}var WK=function(at){function i(){var nt=null!==at&&at.apply(this,arguments)||this;return nt.type=lt.geoCoordinate,nt.name=lt.geoCoordinate,nt.layoutType="none",nt.layoutZIndex=MU.Mark,nt._projectionSpec={"name":fZ(nt.type,nt.id),"type":"mercator"},nt._actualScale=1,nt._initialScale=1,nt.effect={"scaleUpdate":function(){nt.coordinateHelper()}},nt._handleChartZoom=function(at,lt){var Rt,Bt,Lt,Ht,jt,$t,Kt=at.zoomDelta,te=nt._actualScale;return nt._actualScale*=Kt,nt._actualScale<(null===(Rt=nt._spec.zoomLimit)||void 0===Rt?void 0:Rt.min)?(nt._actualScale=null===(Bt=nt._spec.zoomLimit)||void 0===Bt?void 0:Bt.min,Kt=(null===(Lt=nt._spec.zoomLimit)||void 0===Lt?void 0:Lt.min)/te):nt._actualScale>(null===(Ht=nt._spec.zoomLimit)||void 0===Ht?void 0:Ht.max)&&(nt._actualScale=null===(jt=nt._spec.zoomLimit)||void 0===jt?void 0:jt.max,Kt=(null===($t=nt._spec.zoomLimit)||void 0===$t?void 0:$t.max)/te),nt.zoom(Kt,[at.zoomX,at.zoomY]),{"scale":Kt,"totalScale":nt._actualScale}},nt.pan=function(at){var lt,Rt,Bt;void 0===at&&(at=[0,0]);var Lt=null!==(Rt=null===(lt=nt._projection)||void 0===lt?void 0:lt.translate())&&void 0!==Rt?Rt:[0,0],Ht=Lt[0],jt=Lt[1];Ht+=at[0],jt+=at[1],null===(Bt=nt._projection)||void 0===Bt||Bt.translate([Ht,jt])},nt}return S(i,at),Object.defineProperty(i.prototype,"longitudeField",{"get":function(){return this._longitudeField},"enumerable":!1,"configurable":!0}),Object.defineProperty(i.prototype,"latitudeField",{"get":function(){return this._latitudeField},"enumerable":!1,"configurable":!0}),Object.defineProperty(i.prototype,"projectionSpec",{"get":function(){return this._projectionSpec},"enumerable":!1,"configurable":!0}),i.prototype.setProjection=function(nt){this._projectionSpec=A(A({},nt),{"name":this._projectionSpec.name})},i.prototype.getZoom=function(){return this._actualScale},i.getSpecInfo=function(nt){if(j(nt))return null;var at=[];return nt.region.forEach((function(nt,Rt){if("geo"===nt.coordinate){var Bt=A(A({},nt),{"padding":0});at.push({"spec":Bt,"regionIndex":Rt,"type":lt.geoCoordinate,"specInfoPath":["component","geoCoordinate",Rt]})}})),at},i.prototype.setAttrFromSpec=function(){var nt,lt,Rt;at.prototype.setAttrFromSpec.call(this),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=gz(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>(null===(nt=this._spec.zoomLimit)||void 0===nt?void 0:nt.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<(null===(lt=this._spec.zoomLimit)||void 0===lt?void 0:lt.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=null!==(Rt=this._projectionSpec.zoom)&&void 0!==Rt?Rt:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField},i.prototype.created=function(){at.prototype.created.call(this),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()},i.prototype.dispatchZoom=function(nt,at){var lt=at||{"x":this.getLayoutStartPoint().x+this.getLayoutRect().width/2,"y":this.getLayoutStartPoint().y+this.getLayoutRect().height/2},Rt=this._handleChartZoom({"zoomDelta":nt,"zoomX":lt.x,"zoomY":lt.y}),Bt=Rt.scale,Lt=Rt.totalScale;1!==Bt&&this.event.emit("zoom",{"scale":Bt,"scaleCenter":lt,"totalScale":Lt,"model":this})},i.prototype.initEvent=function(){var nt=this;this.event.on(jW.scaleUpdate,{"filter":function(at){var lt=at.model;return(null==lt?void 0:lt.id)===nt.id}},this.effect.scaleUpdate.bind(this));var at=this._spec.roam;at&&(this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),this.initDragEventOfRegions(this._regions,at.blank?null:function(){return!0},this.pan),this._regions.forEach((function(nt){nt.getSeries().forEach((function(nt){nt.event.on("zoom",(function(at){return nt.handleZoom(at),!0})),nt.event.on("panmove",(function(at){return nt.handlePan(at),!0}))}))})))},i.prototype.initProjection=function(){var nt;this._projection=new LK(this._projectionSpec),null!==this._projection.projection||null===(nt=this._option)||void 0===nt||nt.onError("unsupported projection type!")},i.prototype.coordinateHelper=function(){var at=this,lt={"longitudeField":this._longitudeField,"latitudeField":this._latitudeField,"dataToPosition":this.dataToPosition.bind(this),"dataToLongitude":this.dataToLongitude.bind(this),"dataToLatitude":this.dataToLatitude.bind(this),"shape":this.shape.bind(this),"getCoordinateId":function(){return at.id}};this._regions.forEach((function(Rt){Rt.getSeries().forEach((function(Rt){Rt.type===nt.SeriesTypeEnum.map||Rt.type===nt.SeriesTypeEnum.pictogram?Rt.setCoordinateHelper(lt):(Rt.setXAxisHelper(A(A({},lt),{"isContinuous":!0,"dataToPosition":function(nt,lt){var Bt,Lt=nt[0];if(j(Lt)&&(null==lt?void 0:lt.datum)){var Ht=lt.datum[Rt.getDimensionField()[0]];Lt=null===(Bt=at._centerCache.get(Ht))||void 0===Bt?void 0:Bt.x}return at.dataToLongitude(Lt)},"valueToPosition":function(nt,lt){var Bt;if(j(nt)&&(null==lt?void 0:lt.datum)){var Lt=lt.datum[Rt.getDimensionField()[0]];nt=null===(Bt=at._centerCache.get(Lt))||void 0===Bt?void 0:Bt.x}return at.dataToLongitude(nt)},"getFields":function(){return[at._longitudeField]},"getAxisType":function(){return at.type},"getAxisId":function(){return at.id},"isInverse":function(){return!1}})),Rt.setYAxisHelper(A(A({},lt),{"isContinuous":!0,"dataToPosition":function(nt,lt){var Bt,Lt=nt[0];if(j(Lt)&&(null==lt?void 0:lt.datum)){var Ht=lt.datum[Rt.getDimensionField()[0]];Lt=null===(Bt=at._centerCache.get(Ht))||void 0===Bt?void 0:Bt.y}return at.dataToLatitude(Lt)},"valueToPosition":function(nt,lt){var Bt;if(j(nt)&&(null==lt?void 0:lt.datum)){var Lt=lt.datum[Rt.getDimensionField()[0]];nt=null===(Bt=at._centerCache.get(Lt))||void 0===Bt?void 0:Bt.y}return at.dataToLatitude(nt)},"getFields":function(){return[at._latitudeField]},"getAxisType":function(){return at.type},"getAxisId":function(){return at.id},"isInverse":function(){return!1}})))}))}))},i.prototype.onLayoutEnd=function(lt){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());var Rt=this.getLayoutRect(),Bt=Rt.width,Lt=Rt.height,Ht=this.evaluateProjection([0,0],[Bt,Lt]),jt=Ht.translate,$t=Ht.scale,Kt=Ht.center;jt&&this._projection.translate(jt),$t&&this._projection.scale($t),Kt&&this._projection.center(Kt),VO(this._regions,(function(at){var lt,Rt;if(at.type===nt.SeriesTypeEnum.map||at.type===nt.SeriesTypeEnum.pictogram){null===(lt=at.areaPath)||void 0===lt||lt.clear();var Bt=null===(Rt=at.getRootMark().getProduct())||void 0===Rt?void 0:Rt.getGroupGraphicItem();Bt&&Bt.attribute.postMatrix&&Bt.setAttributes({"postMatrix":new Mi})}})),this._actualScale=this._initialScale,at.prototype.onLayoutEnd.call(this,lt)},i.prototype.onRender=function(nt){},i.prototype.changeRegions=function(nt){},i.prototype._getNeedClearVRenderComponents=function(){return[]},i.prototype.collectFeatures=function(){var at=[];return this._regions.forEach((function(lt){lt.getSeries().forEach((function(lt){var Rt,Bt;lt.type!==nt.SeriesTypeEnum.map&&lt.type!==nt.SeriesTypeEnum.pictogram||at.push.apply(at,P([],E(null!==(Bt=null===(Rt=lt.getMapViewData())||void 0===Rt?void 0:Rt.latestData)&&void 0!==Bt?Bt:[]),!1))}))})),at},i.prototype.dataToPosition=function(nt){var at;void 0===nt&&(nt=[]);var lt=null===(at=this._projection)||void 0===at?void 0:at.project([nt[0],nt[1]]);return{"x":null==lt?void 0:lt[0],"y":null==lt?void 0:lt[1]}},i.prototype.dataToLatitude=function(nt){var at,lt=null===(at=this._projection)||void 0===at?void 0:at.project([0,nt]);return null==lt?void 0:lt[1]},i.prototype.dataToLongitude=function(nt){var at,lt=null===(at=this._projection)||void 0===at?void 0:at.project([nt,0]);return null==lt?void 0:lt[0]},i.prototype.zoom=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt;void 0===at&&(at=[0,0]);var $t=null!==(Rt=null===(lt=this._projection)||void 0===lt?void 0:lt.scale())&&void 0!==Rt?Rt:0,Kt=null!==(Lt=null===(Bt=this._projection)||void 0===Bt?void 0:Bt.translate())&&void 0!==Lt?Lt:[0,0],te=Kt[0],ne=Kt[1];$t*=nt,te-=(at[0]-te)*(nt-1),ne-=(at[1]-ne)*(nt-1),null===(Ht=this._projection)||void 0===Ht||Ht.scale($t),null===(jt=this._projection)||void 0===jt||jt.translate([te,ne])},i.prototype.shape=function(nt){return this._projection.shape(nt)},i.prototype.invert=function(nt){return this._projection.invert(nt)},i.prototype.evaluateProjection=function(nt,at){var lt,Rt=this._projection.evaluate(nt,at,this.collectFeatures()),Bt=Rt.translate(),Lt=Rt.scale()*this._initialScale,Ht=null!==(lt=this._projectionSpec.center)&&void 0!==lt?lt:Rt.invert([at[0]/2,at[1]/2]);return Ht&&(Bt=[at[0]/2,at[1]/2]),{"translate":Bt,"scale":Lt,"center":Ht}},i.prototype._initCenterCache=function(){var nt=this;this._centerCache||(this._centerCache=new Map),this._regions.forEach((function(at){at.getSeries().forEach((function(at){var lt,Rt;"map"===at.type&&(null!==(Rt=null===(lt=at.getMapViewData())||void 0===lt?void 0:lt.latestData)&&void 0!==Rt?Rt:[]).forEach((function(lt){void 0===lt&&(lt={});var Rt=lt[at.getDimensionField()[0]]||lt[PK],Bt=at.getDatumCenter(lt);Rt&&N(Bt)&&nt._centerCache.set(Rt,{"x":Bt[0],"y":Bt[1]})}))}))}))},i.prototype._compareSpec=function(nt,lt){var Rt=at.prototype._compareSpec.call(this,nt,lt);return Rt.reMake||(Rt.reMake=["roam","longitudeField","latitudeField","projection","zoomLimit"].some((function(at){return!mt(null==lt?void 0:lt[at],nt[at])}))),Rt},i.prototype.release=function(){at.prototype.release.call(this),this._centerCache&&this._centerCache.clear(),this._centerCache=null},i.type=lt.geoCoordinate,i}(s$);bt(WK,NK);var gZ=function(){Tz.registerComponent(WK.type,WK)},GK=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"area",void 0,void 0,!1)},e}(xX),YK=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.map,lt.transformerConstructor=GK,lt._areaCache=new Map,lt}return S(i,at),i.prototype.getNameMap=function(){return this._nameMap},Object.defineProperty(i.prototype,"areaPath",{"get":function(){return this._areaCache},"enumerable":!1,"configurable":!0}),i.prototype.setAttrFromSpec=function(){var nt,lt;at.prototype.setAttrFromSpec.call(this),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||null===(nt=this._option)||void 0===nt||nt.onError("map type '".concat(this.map,"' is not specified !")),fU.get(this.map)||null===(lt=this._option)||void 0===lt||lt.onError("'".concat(this.map,"' data is not registered !"))},i.prototype.initData=function(){var nt,lt,Rt=this;at.prototype.initData.call(this),GW(this._dataSet,"copyDataView",tU),GW(this._dataSet,"map",nZ),GW(this._dataSet,"lookup",tZ);var Bt=fU.get(this.map);Bt||null===(nt=this._option)||void 0===nt||nt.onError("no valid map data found!");var Lt=new Es(this._dataSet,{"name":"map_".concat(this.id,"_data")});Lt.parse([Bt],{"type":"dataview"}).transform({"type":"copyDataView","options":{"deep":!0},"level":vU.copyDataView}).transform({"type":"map","options":{"nameMap":this._nameMap,"nameProperty":this._nameProperty}}).transform({"type":"lookup","options":{"from":function(){var nt;return null===(nt=Rt._data)||void 0===nt?void 0:nt.getLatestData()},"key":PK,"fields":this._nameField,"set":function(nt,at){at&&Object.keys(at).forEach((function(lt){lt in nt||(nt[lt]=at[lt])}))}}}),null===(lt=this._data)||void 0===lt||lt.getDataView().target.addListener("change",Lt.reRunAllTransform),this._mapViewData=new jY(this._option,Lt)},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._mapViewData)||void 0===nt||nt.compile()},i.prototype.initMark=function(){this._pathMark=this._createMark(i.mark.area,{"groupKey":this.getDimensionField()[0],"isSeriesMark":!0,"skipBeforeLayouted":!0,"dataView":this._mapViewData.getDataView(),"dataProductId":this._mapViewData.getProductId()},{"morph":lX(this._spec,i.mark.area.name),"morphElementKey":this.getDimensionField()[0]})},i.prototype.initMarkStyle=function(){var nt=this,at=this._pathMark;at&&(this.setMarkStyle(at,{"fill":function(at){var lt,Rt,Bt,Lt;return N(at[null!==(lt=nt._seriesField)&&void 0!==lt?lt:qz])?(null!==(Rt=nt._option.globalScale.getScale("color"))&&void 0!==Rt?Rt:nt._getDefaultColorScale()).scale(at[null!==(Bt=nt._seriesField)&&void 0!==Bt?Bt:qz]):null===(Lt=nt._spec)||void 0===Lt?void 0:Lt.defaultFillColor},"path":this.getPath.bind(this)},"normal",EU.Series),at.setPostProcess("fill",(function(at){return N(at)?at:nt._spec.defaultFillColor})),this.setMarkStyle(at,{"smoothScale":!0},"normal",EU.Built_In))},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&(this._labelMark=nt,this.setMarkStyle(nt,{"text":function(nt){return at.getDatumName(nt)},"x":function(nt){var lt;return null===(lt=at.dataToPosition(nt))||void 0===lt?void 0:lt.x},"y":function(nt){var lt;return null===(lt=at.dataToPosition(nt))||void 0===lt?void 0:lt.y}}))},i.prototype.initAnimation=function(){var nt;this._pathMark.setAnimationConfig(rX(null===(nt=Tz.getAnimationInKey("fadeInOut"))||void 0===nt?void 0:nt(),aX("area",this._spec,this._markAttributeContext)))},i.prototype.initTooltip=function(){this._tooltipHelper=new IK(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)},i.prototype.getPath=function(nt){var at,lt=this._areaCache.get(nt[Xz]);if(lt)return lt.shape;var Rt=null===(at=this._coordinateHelper)||void 0===at?void 0:at.shape(nt);return this._areaCache.set(nt[Xz],{"shape":Rt}),Rt},i.prototype.onEvaluateEnd=function(){this._mapViewData.updateData()},i.prototype.getDimensionField=function(){return[this.nameField]},i.prototype.getMeasureField=function(){return[this.valueField]},i.prototype.release=function(){at.prototype.release.call(this),this._areaCache.clear(),this._nameMap={},this._mapViewData=null},i.prototype.handleZoom=function(nt){var at,lt,Rt,Bt=nt.scale,Lt=nt.scaleCenter;if(1!==Bt){var Ht=null===(at=this.getRootMark().getProduct())||void 0===at?void 0:at.getGroupGraphicItem();Ht&&(Ht.attribute.postMatrix||Ht.setAttributes({"postMatrix":new Mi}),Ht.scale(Bt,Bt,Lt));var jt=null===(Rt=null===(lt=this._labelMark)||void 0===lt?void 0:lt.getComponent())||void 0===Rt?void 0:Rt.getProduct();jt&&jt.evaluate(null,null)}},i.prototype.handlePan=function(nt){var at,lt,Rt,Bt=nt.delta;if(0!==Bt[0]||0!==Bt[1]){var Lt=null===(at=this.getRootMark().getProduct())||void 0===at?void 0:at.getGroupGraphicItem();Lt&&(Lt.attribute.postMatrix||Lt.setAttributes({"postMatrix":new Mi}),Lt.translate(Bt[0],Bt[1]));var Ht=null===(Rt=null===(lt=this._labelMark)||void 0===lt?void 0:lt.getComponent())||void 0===Rt?void 0:Rt.getProduct();Ht&&Ht.evaluate(null,null)}},i.prototype.getDatumCenter=function(nt){var at,lt,Rt,Bt;return this._centroidProperty&&(null===(at=nt.properties)||void 0===at?void 0:at[this._centroidProperty])?null===(lt=nt.properties)||void 0===lt?void 0:lt[this._centroidProperty]:Q(nt.centroidX*nt.centroidY)?[nt.centroidX,nt.centroidY]:(null===(Rt=nt.properties)||void 0===Rt?void 0:Rt.center)?nt.properties.center:(null===(Bt=nt.properties)||void 0===Bt?void 0:Bt.centroid)?nt.properties.centroid:[Number.NaN,Number.NaN]},i.prototype.getDatumName=function(nt){var at;if(nt[this.nameField])return nt[this.nameField];var lt=null===(at=nt.properties)||void 0===at?void 0:at[this._nameProperty];if(lt){if(this._spec.nameMap&&this._spec.nameMap[lt])return this._spec.nameMap[lt];if(this._spec.showDefaultName||!this._spec.nameMap)return lt}return""},i.prototype.dataToPositionX=function(nt){var at;return null===(at=this._option)||void 0===at||at.onError("Method not implemented."),0},i.prototype.dataToPositionY=function(nt){var at;return null===(at=this._option)||void 0===at||at.onError("Method not implemented."),0},i.prototype.viewDataUpdate=function(nt){var lt,Rt,Bt;at.prototype.viewDataUpdate.call(this,nt),null===(Rt=null===(lt=this._mapViewData)||void 0===lt?void 0:lt.getDataView())||void 0===Rt||Rt.reRunAllTransform(),null===(Bt=this._mapViewData)||void 0===Bt||Bt.updateData()},i.prototype._getDataIdKey=function(){return Xz},i.prototype.getActiveMarks=function(){return[this._pathMark]},i.type=nt.SeriesTypeEnum.map,i.mark=OK,i.transformerConstructor=GK,i}(EK),_Z=function(){Pj.registerGrammar("projection",MK,"projections"),gZ(),oZ(),Tz.registerSeries(YK.type,YK),Tz.registerImplement("registerMap",KW),Tz.registerImplement("unregisterMap",qW),ZY()},XK="".concat(OF,"_waterfall_default_seriesField"),xZ=function(nt,at){if(!nt||0===nt.length)return nt;var lt=at.indexField,Rt=at.total,Bt=at.groupData,Lt=[],Ht=Bt().latestData,jt=Ht.dimensionValues,$t=Ht.dimensionData,Kt=Array.from(jt[lt]),te={"start":0,"end":0,"positive":0,"negative":0,"lastIndex":null};return Kt.forEach((function(nt,lt){var Bt={"start":te.end,"end":te.end,"lastIndex":te.lastIndex,"lastEnd":te.end,"index":nt,"isTotal":!1,"positive":te.end,"negative":te.end},Ht=!0===at.stackInverse?$t[nt].reverse():$t[nt];if(null==Ht||Ht.forEach((function(nt,at){at===Ht.length-1?nt[oH]=!0:delete nt[oH]})),Ht.length>1){var s=function(nt){if(Rt&&"end"!==Rt.type){if("field"===Rt.type||"custom"===Rt.type)return!!nt[Rt.tagField]}else if(lt===Kt.length-1)return!0;return!1};if(Ht.some((function(nt){return s(nt)})))return te=function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){lt.isTotal=!0;var Kt=jt.valueField,te=jt.startAs,ne=jt.endAs,re=jt.total,ae=[],oe=[];if(nt.forEach((function(nt){$t(nt)?oe.push(nt):ae.push(nt)})),oe.length===nt.length){var se=kZ([nt[0]],at,lt,Rt,Bt,Lt,Ht,jt);return oe.forEach((function(at){at[te]=nt[0][te],at[ne]=nt[0][ne],at[Kt]=nt[0][Kt]})),se}var le=SZ(oe[0],lt,Rt,Bt,re),ue=le.start,ce=le.end;lt.start=ue,lt.end=ce;var he=ue,de=ue,fe=ce-ue;return ae.forEach((function(nt){var at=+nt[Kt];at>=0?(nt[te]=+he,he=ke(he,at)):(nt[te]=+de,de=ke(de,at)),nt[ne]=ke(nt[te],at),ue=ke(ue,at),fe=Se(fe,at)})),oe.forEach((function(nt){nt[te]=+ue,nt[ne]=ke(nt[te],fe),nt[Kt]=fe})),A(A({},lt),{"lastIndex":at})}(Ht,nt,Bt,Lt,te,Kt,lt,at,s),void Lt.push(Bt)}te=kZ(Ht,nt,Bt,Lt,te,Kt,lt,at),Lt.push(Bt)})),Lt};function kZ(nt,at,lt,Rt,Bt,Lt,Ht,jt){var $t=jt.valueField,Kt=jt.startAs,te=jt.endAs,ne=jt.total,re=jt.seriesField,ae=jt.seriesFieldName;return nt.forEach((function(nt){var at=!1;if(ne&&"end"!==ne.type){if(("field"===ne.type||"custom"===ne.type)&&nt[ne.tagField]){at=!0;var jt=SZ(nt,lt,Rt,Bt,ne),oe=jt.start,se=jt.end;nt[Kt]=oe,nt[te]=se,nt[$t]=se-oe,lt.start=oe,lt.end=se}}else Ht===Lt.length-1&&(lt.start=0,nt[Kt]=lt.start,nt[te]=lt.end,at=!0);if(!at){var le=+nt[$t];le>=0?(nt[Kt]=+lt.positive,lt.positive=ke(lt.positive,le)):(nt[Kt]=+lt.negative,lt.negative=ke(lt.negative,le)),nt[te]=ke(nt[Kt],le),lt.end=ke(lt.end,le)}lt.isTotal=at,(j(re)||re===XK)&&(nt[XK]=at?ae.total:+nt[$t]>=0?ae.increase:ae.decrease)})),A(A({},lt),{"lastIndex":at})}function SZ(nt,at,lt,Rt,Bt){return Bt&&"end"!==Bt.type?"field"===Bt.type||"custom"===Bt.type?"custom"===Bt.type?function(nt,at,lt){return lt.product(nt,at)}(nt,Rt,Bt):Bt.collectCountField&&!j(nt[Bt.collectCountField])?function(nt,at,lt,Rt){var Bt=0,Lt=lt.end,Ht=at.length-+nt[Rt.collectCountField],jt=at.length-1;return Ht<0?Bk("total.collectCountField error"):Bt=at[Ht].start,jt<0?Bk("total.collectCountField error"):Lt=at[jt].end,{"start":Bt,"end":Lt}}(nt,lt,at,Bt):function(nt,at,lt){var Rt=0,Bt=at.end;return lt.startField&&!j(nt[lt.startField])&&(Rt=+nt[lt.startField]),lt.valueField&&!j(nt[lt.valueField])&&(Bt=ke(Rt,+nt[lt.valueField])),{"start":Rt,"end":Bt}}(nt,at,Bt):{"start":0,"end":0}:function(nt){return{"start":0,"end":nt.end}}(at)}var AZ=function(nt,at){var lt;if(!nt)return nt;var Rt=at.indexField,Bt=at.valueField,Lt=at.total,Ht=at.seriesField,jt=((lt={})[Rt]=(null==Lt?void 0:Lt.text)||"total",lt[Bt]=nt.reduce((function(nt,at){return ke(nt,+at[Bt])}),0),lt);return Ht&&(jt[Ht]="total"),nt.push(jt),nt},qK={"type":"fadeIn"},ZK={"type":"growCenterIn"};function TZ(nt,at){switch(at){case"fadeIn":return qK;case"scaleIn":return ZK;default:return $K(nt,!1)}}var eZ,iZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"x1":0,"y1":0})},e.type="rule",e}(dY),PZ=function(){Tz.registerMark(iZ.type,iZ),KN()},rZ=A(A({},Bq),((eZ={}).leaderLine={"name":"leaderLine","type":"rule"},eZ.stackLabel={"name":"stackLabel","type":"text"},eZ)),BZ=function(nt,at){if(!at.fields)return nt;var lt={};return{"dimensionValues":lt,"dimensionData":IZ(nt.map((function(nt){return nt.latestData})).flat(),at.fields,lt)}};function IZ(nt,at,lt){if(0===at.length)return nt;var Rt=at[0],Bt=at.slice(1);lt[Rt]=new Set;var Lt,Ht,jt=function(nt,at,lt){var Rt={};return nt.forEach((function(nt){var Bt=nt[at];Rt[Bt]||(Rt[Bt]=[],lt.add(Bt)),Rt[Bt].push(nt)})),Rt}(nt,Rt,lt[Rt]);return Bt.length?(Lt=jt,Ht=function(nt,at){return IZ(nt,Bt,lt)},Object.keys(Lt).reduce((function(nt,at){return nt[at]=Ht(Lt[at],at),nt}),{})):jt}var aZ=function(){function t(nt){this._fields=[],this._fields=nt}return Object.defineProperty(t.prototype,"fields",{"get":function(){return this._fields},"enumerable":!1,"configurable":!0}),Object.defineProperty(t.prototype,"groupData",{"get":function(){return this._groupData},"enumerable":!1,"configurable":!0}),t.prototype.initData=function(nt,at){var lt=nt.name,Rt=new Es(at instanceof Ms?at:nt.dataSet);Rt.name=lt,Rt.parse([nt],{"type":"dataview"}),GW(at,"dimensionTree",BZ),Rt.transform({"type":"dimensionTree","options":{"fields":this._fields}},!1),Rt.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=Rt},t.prototype.groupDataUpdate=function(){},t.prototype.getGroupValueInField=function(nt){var at,lt,Rt,Bt=null===(Rt=null===(lt=null===(at=this.groupData)||void 0===at?void 0:at.latestData)||void 0===lt?void 0:lt.dimensionValues)||void 0===Rt?void 0:Rt[nt];return Bt?Array.from(Bt):[]},t}(),sZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!1,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"bar"),this._addMarkLabelSpec(nt,"bar","stackLabel","initStackLabelMarkStyle")},e}(Lq),lZ={"rect":NZ,"symbol":jZ,"arc":GZ,"point":function(nt){return{"position":"center","overlap":!1!==nt.labelSpec.overlap&&{"avoidBaseMark":!1}}},"line-data":function(nt){var at=jZ(nt);return z(at.overlap)||(at.overlap.avoidBaseMark=!1),at},"stackLabel":WZ,"line":UZ,"area":UZ,"rect3d":NZ,"arc3d":GZ,"treemap":function(nt){return{"customLayoutFunc":function(nt,at){return at},"overlap":!1}},"venn":function(nt){return{"customLayoutFunc":function(nt,at){return at},"smartInvert":!0}}};function FZ(at,lt){var Rt,Bt=lt.labelSpec;Bt.overlap&&!V(Bt.overlap)&&(Bt.overlap={});var Lt=null!==(Rt=lZ[at])&&void 0!==Rt?Rt:lZ.point;return lt.series.type===nt.SeriesTypeEnum.sankey?function(nt){var at,lt,Rt,Bt=nt.series,Lt=nt.labelSpec,Ht=void 0===Lt?{}:Lt,jt=null!==(at=HZ(Ht.position))&&void 0!==at?at:"outside",$t=Bt.direction,Kt=jt;return Y(jt)&&("vertical"===$t?Kt="inside-start"===jt?function(nt){return"inside-left"}:"inside-middle"===jt?function(nt){return"center"}:"inside-end"===jt?function(nt){return"inside-right"}:function(nt){return"bottom"}:"inside-start"===jt?Kt=function(nt){return"inside-left"}:"inside-middle"===jt?Kt=function(nt){return"center"}:"inside-end"===jt?Kt=function(nt){return"inside-right"}:"outside"===jt&&(Kt=function(nt){return"right"})),{"position":Kt,"overlap":!1!==Ht.overlap&&(!Y(jt)||!jt.includes("inside"))&&{"strategy":null!==(Rt=null===(lt=Ht.overlap)||void 0===lt?void 0:lt.strategy)&&void 0!==Rt?Rt:YZ(Bt)},"smartInvert":!1,"offset":0,"syncState":!0}}(lt):Lt(lt)}function zZ(at,lt,Rt,Bt){var Lt,Ht,jt,$t=at.labelMark,Kt=at.series,te={"text":lt[Kt.getMeasureField()[0]],"data":lt,"textType":null!==(jt=at.labelSpec.textType)&&void 0!==jt?jt:"text"},ne=Object.keys($t.stateStyle.normal);try{for(var re=C(ne),ae=re.next();!ae.done;ae=re.next()){var oe=ae.value,se=$t.getAttribute(oe,lt);te[oe]=se}}catch(nt){Lt={"error":nt}}finally{try{ae&&!ae.done&&(Ht=re.return)&&Ht.call(re)}finally{if(Lt)throw Lt.error}}if(Kt.type!==nt.SeriesTypeEnum.sankey){var le=vY(Rt,Bt,te.text,lt),ue=le.formatFunc,ce=le.args;ue&&(te._originText=te.text,te.text=ue.apply(void 0,P(P([],E(ce),!1),[{"series":Kt}],!1)))}return te}function HZ(nt){return H(nt)?function(at){return nt(at.data)}:nt}function jZ(nt){var at,lt,Rt,Bt=nt.series,Lt=nt.labelSpec,Ht="horizontal"===Bt.direction?"right":"top",jt=null!==(at=HZ(Lt.position))&&void 0!==at?at:Ht;return{"position":jt,"overlap":!1!==Lt.overlap&&{"strategy":null!==(Rt=null===(lt=Lt.overlap)||void 0===lt?void 0:lt.strategy)&&void 0!==Rt?Rt:[{"type":"position","position":["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],"avoidBaseMark":"center"!==jt}}}function NZ(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt=nt.series,te=nt.labelSpec,ne=void 0===te?{}:te,re=null!==(at=HZ(ne.position))&&void 0!==at?at:"outside",ae=null!==(lt=Kt.direction)&&void 0!==lt?lt:"vertical",oe="horizontal"===Kt.direction?null===(Rt=Kt.getXAxisHelper())||void 0===Rt?void 0:Rt.isInverse():null===(Bt=Kt.getYAxisHelper())||void 0===Bt?void 0:Bt.isInverse();jt=function(nt){var at,lt=nt.data,Rt=null!==(at="function"==typeof ne.position?ne.position(lt):ne.position)&&void 0!==at?at:"outside";if("outside"===Rt){var Bt=Kt.getMeasureField()[0],Lt=(null==lt?void 0:lt[Bt])>=0&&oe||(null==lt?void 0:lt[Bt])<0&&!oe?1:0;return{"vertical":["top","bottom"],"horizontal":["right","left"]}[ae][Lt]}return Rt},$t=!1!==ne.overlap&&{"strategy":null!==(Ht=null===(Lt=ne.overlap)||void 0===Lt?void 0:Lt.strategy)&&void 0!==Ht?Ht:VZ(Kt)};var se=!1;return Y(re)&&re.includes("inside")&&(se=!0),{"position":jt,"overlap":$t,"smartInvert":se}}function VZ(nt){var at=[{"type":"position","position":function(at){var lt,Rt,Bt=at.data,Lt=nt.getMeasureField()[0];return("horizontal"===nt.direction?null===(lt=nt.getXAxisHelper())||void 0===lt?void 0:lt.isInverse():null===(Rt=nt.getYAxisHelper())||void 0===Rt?void 0:Rt.isInverse())?(null==Bt?void 0:Bt[Lt])>=0?"horizontal"===nt.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===nt.direction?["right","inside-right"]:["top","inside-top"]:(null==Bt?void 0:Bt[Lt])>=0?"horizontal"===nt.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===nt.direction?["left","inside-left"]:["bottom","inside-bottom"]}}];return at}function GZ(nt){var at,lt=nt.labelSpec,Rt=null!==(at=HZ(lt.position))&&void 0!==at?at:"outside";return{"position":Rt,"smartInvert":lt.smartInvert?lt.smartInvert:Y(Rt)&&Rt.includes("inside")}}function WZ(nt,at,lt){var Rt=nt.series,Bt=nt.labelSpec||{},Lt=Rt.getTotalData();return{"customLayoutFunc":function(Lt){return Lt.map((function(Lt){var Ht=Bt.position||"withChange",jt=Bt.offset||0,$t=at?at(Lt.data):Lt.data,Kt=zZ(nt,$t,Bt.formatMethod);return Kt.x=function(nt,at,lt,Rt){return"horizontal"===at.direction?"middle"===lt?.5*(at.totalPositionX(nt,"end")+at.totalPositionY(nt,"start")):"max"===lt?at.totalPositionX(nt,nt.end>=nt.start?"end":"start")+Rt:"min"===lt?at.totalPositionX(nt,nt.end>=nt.start?"start":"end")-Rt:at.totalPositionX(nt,"end")+(nt.end>=nt.start?Rt:-Rt):at.totalPositionX(nt,"index",.5)}($t,Rt,Ht,jt),Kt.y=function(nt,at,lt,Rt){return"horizontal"===at.direction?at.totalPositionY(nt,"index",.5):"middle"===lt?.5*(at.totalPositionY(nt,"end")+at.totalPositionY(nt,"start")):"max"===lt?at.totalPositionY(nt,nt.end>=nt.start?"end":"start")-Rt:"min"===lt?at.totalPositionY(nt,nt.end>=nt.start?"start":"end")+Rt:at.totalPositionY(nt,"end")+(nt.end>=nt.start?-Rt:Rt)}($t,Rt,Ht,jt),"horizontal"===Rt.direction?Kt.textAlign="middle"===Ht?"center":"withChange"===Ht&&$t.end-$t.start>=0||"max"===Ht?"left":"right":Kt.textBaseline="middle"===Ht?Ht:"withChange"===Ht&&$t.end-$t.start>=0||"max"===Ht?"bottom":"top",null==lt||lt(Lt,$t,Kt),Dg(A(A({},Kt),{"id":Lt.id}))}))},"dataFilter":function(nt){var at=[];return Lt.forEach((function(lt){var Bt=nt.find((function(nt){var at;return lt.index===(null===(at=nt.data)||void 0===at?void 0:at[Rt.getDimensionField()[0]])}));Bt&&(Bt.data=lt,at.push(Bt))})),at},"overlap":{"strategy":[]}}}function UZ(nt){var at,lt,Rt,Bt,Lt,Ht=nt.labelSpec,jt=nt.series,$t=null===(Bt=null===(Rt=null===(lt=jt.getViewDataStatistics)||void 0===lt?void 0:lt.call(jt).latestData)||void 0===Rt?void 0:Rt[jt.getSeriesField()])||void 0===Bt?void 0:Bt.values,Kt=$t?$t.map((function(nt,at){var lt;return(lt={})[jt.getSeriesField()]=nt,lt.index=at,lt})):[(at={"index":0},at[qz]=jt.getSeriesKeys()[0],at)];return{"position":null!==(Lt=Ht.position)&&void 0!==Lt?Lt:"end","data":Kt}}function YZ(nt){return[{"type":"position","position":function(at){return"horizontal"===nt.direction?["right","left"]:["bottom","top"]}}]}var uZ,cZ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.waterfall,lt.transformerConstructor=sZ,lt._leaderLineMark=null,lt._stackLabelMark=null,lt._labelMark=null,lt}return S(i,at),i.prototype.getTotalData=function(){var nt;return null===(nt=this._totalData)||void 0===nt?void 0:nt.getLatestData()},i.prototype.initGroups=function(){var nt=this.getGroupFields();nt&&nt.length&&(this._groups=new aZ(nt),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],j(this._seriesField)&&(this._seriesField=XK)},i.prototype.getSeriesKeys=function(){return this._seriesField===XK?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:at.prototype.getSeriesKeys.call(this)},i.prototype.initData=function(){var nt,lt=this;at.prototype.initData.call(this),GW(this._dataSet,"waterfallFillTotal",AZ),GW(this._dataSet,"waterfall",xZ),(j(this._spec.total)||"end"===this._spec.total.type)&&(null===(nt=this._rawData)||void 0===nt||nt.transform({"type":"waterfallFillTotal","options":{"indexField":this.getGroupFields()[0],"valueField":this.getStackValueField(),"seriesField":this.getSeriesField(),"seriesFieldName":this._theme.seriesFieldName,"total":this._spec.total,"stackInverse":this.getRegion().getStackInverse()}},!1));var Rt=eU(this.getViewData(),this._dataSet,{"name":"".concat(OF,"_series_").concat(this.id,"_totalData")});this.getViewData().target.removeListener("change",Rt.reRunAllTransform),this._totalData=new jY(this._option,Rt),Rt.transform({"type":"waterfall","options":{"indexField":this.getGroupFields()[0],"valueField":this.getStackValueField(),"seriesField":this.getSeriesField(),"seriesFieldName":this._theme.seriesFieldName,"startAs":Qz,"endAs":Jz,"total":this._spec.total,"groupData":function(){return lt.getGroups().groupData},"stackInverse":this.getRegion().getStackInverse()}},!1)},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._totalData)||void 0===nt||nt.compile()},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt=this,Lt={"yField":"horizontal"===this.direction?this._fieldY[0]:this.getStackValueField(),"xField":"horizontal"===this.direction?this.getStackValueField():this._fieldX[0],"direction":this.direction,"growFrom":function(){var nt,at;return"horizontal"===Bt.direction?null===(nt=Bt._xAxisHelper)||void 0===nt?void 0:nt.getScale(0).scale(0):null===(at=Bt._yAxisHelper)||void 0===at?void 0:at.getScale(0).scale(0)}},Ht=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset,jt=vX(this);this._barMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("waterfall"))||void 0===lt?void 0:lt(Lt,Ht),aX("bar",this._spec,this._markAttributeContext),jt)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("fadeInOut"))||void 0===Rt?void 0:Rt(),aX("leaderLine",this._spec,this._markAttributeContext)))},i.prototype.viewDataUpdate=function(nt){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),at.prototype.viewDataUpdate.call(this,nt)},i.prototype.addViewDataFilter=function(nt){},i.prototype.reFilterViewData=function(){},i.prototype.onEvaluateEnd=function(nt){at.prototype.onEvaluateEnd.call(this,nt),this._totalData.updateData()},i.prototype.initMark=function(){var nt,lt;at.prototype.initMark.call(this);var Rt=this._createMark(i.mark.leaderLine,{"key":"index","stateSort":null===(nt=this._spec.leaderLine)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(lt=this._spec.leaderLine)||void 0===lt?void 0:lt.customShape});Rt&&(this._leaderLineMark=Rt,Rt.setDataView(this._totalData.getDataView(),this._totalData.getProductId()))},i.prototype.initLabelMarkStyle=function(nt){var lt;if(nt)return!this._labelMark&&(null===(lt=this._spec.label)||void 0===lt?void 0:lt.visible)?(at.prototype.initLabelMarkStyle.call(this,nt),void(this._labelMark=nt)):void 0},i.prototype.initStackLabelMarkStyle=function(nt){var at=this;nt&&(this._stackLabelMark=nt,nt.skipEncode=!0,nt.setRule("stackLabel"),nt.setDataView(this._totalData.getDataView(),this._totalData.getProductId()),this.setMarkStyle(nt,{"text":function(nt){var lt;return"absolute"===(null===(lt=at._spec.stackLabel)||void 0===lt?void 0:lt.valueType)?nt.end:Se(nt.end,nt.start)}}))},i.prototype.initTotalLabelMarkStyle=function(nt){var at=this;this.setMarkStyle(nt,{"text":function(nt){var lt;return"end"in nt?"absolute"===(null===(lt=at._spec.totalLabel)||void 0===lt?void 0:lt.valueType)?nt.end:Se(nt.end,nt.start):"horizontal"===at.direction?nt[at._fieldX[0]]:nt[at._fieldY[0]]}})},i.prototype.getTotalLabelComponentStyle=function(nt){var at=this;return WZ(A(A({},nt),{"series":this,"labelSpec":this._spec.totalLabel}),(function(nt){var lt="vertical"===at.direction?nt[at._fieldX[0]]:nt[at._fieldY[0]];return at._totalData.getLatestData().find((function(nt){return nt.index===lt}))}))},i.prototype.totalPositionX=function(nt,at,lt){void 0===lt&&(lt=.5);var Rt=this._xAxisHelper,Bt=Rt.dataToPosition,Lt=Rt.getBandwidth;return"horizontal"===this._direction?uF(Bt([nt[at]],{"bandPosition":this._bandPosition})):Bt([nt[at]],{"bandPosition":this._bandPosition})+.5*Lt(0)-this._barMark.getAttribute("width",nt)*(.5-lt)},i.prototype.totalPositionY=function(nt,at,lt){void 0===lt&&(lt=.5);var Rt=this._yAxisHelper,Bt=Rt.dataToPosition,Lt=Rt.getBandwidth;return"horizontal"===this._direction?Bt([nt[at]],{"bandPosition":this._bandPosition})+.5*Lt(0)-this._barMark.getAttribute("height",nt)*(.5-lt):uF(Bt([nt[at]],{"bandPosition":this._bandPosition}))},i.prototype.initMarkStyle=function(){var nt=this;at.prototype.initMarkStyle.call(this),this._leaderLineMark&&("horizontal"===this._direction?this.setMarkStyle(this._leaderLineMark,{"visible":function(at){return nt.isVisibleLeaderLine(at)},"x":function(at){return nt.totalPositionX(at,"lastEnd",0)},"x1":function(at){return nt.totalPositionX(at,at.isTotal?"end":"start",0)},"y":function(at){return at.lastIndex?nt.totalPositionY(at,"lastIndex",1):0},"y1":function(at){return nt.totalPositionY(at,"index",0)}},"normal",EU.Series):this.setMarkStyle(this._leaderLineMark,{"visible":function(at){return nt.isVisibleLeaderLine(at)},"x":function(at){return at.lastIndex?nt.totalPositionX(at,"lastIndex",1):0},"x1":function(at){return nt.totalPositionX(at,"index",0)},"y":function(at){return nt.totalPositionY(at,"lastEnd",0)},"y1":function(at){return nt.totalPositionY(at,at.isTotal?"end":"start",0)}},"normal",EU.Series))},i.prototype.isVisibleLeaderLine=function(nt){return!j(nt.lastIndex)&&function(nt,at,lt){if(!at)return!0;var Rt=at.range(),Bt=(lt&&at._calculateWholeRange?at._calculateWholeRange(Rt):at.range()).map((function(nt){return at.invert(nt)})),Lt=Math.min(Bt[0],Bt[Bt.length-1]),Ht=Math.max(Bt[0],Bt[Bt.length-1]);return Array.isArray(nt)?nt.every((function(nt){return nt>=Lt&&nt<=Ht})):nt>=Lt&&nt<=Ht}([nt.lastEnd,nt[nt.isTotal?"end":"start"]],"horizontal"===this.direction?this._xAxisHelper.getScale(0):this._yAxisHelper.getScale(0))},i.type=nt.SeriesTypeEnum.waterfall,i.mark=rZ,i.transformerConstructor=sZ,i}(Fq),qZ=function(){PZ(),sq(),Tz.registerAnimation("waterfall",(function(nt,at){return{"appear":TZ(nt,at),"enter":$K(nt,!1),"exit":tq(nt,!1),"disappear":tq(nt,!1)}})),ZY(),_K(),gK(),Tz.registerSeries(cZ.type,cZ)},dZ="".concat(OF,"_BOX_PLOT_OUTLIER_VALUE");!function(nt){nt.OUTLIER="outlier",nt.MAX="max",nt.MIN="min",nt.MEDIAN="median",nt.Q1="q1",nt.Q3="q3",nt.SERIES_FIELD="seriesField"}(uZ||(uZ={}));var pZ,QZ=function(nt,at){var lt=[],Rt=at.outliersField,Bt=at.dimensionField;return(nt[0].latestData||[]).forEach((function(nt){var at=nt[Rt];X(at)||(at=[at]),lt.push.apply(lt,P([],E(at.map((function(at){var lt,Rt=((lt={})[dZ]=at,lt);return Bt.forEach((function(at){Rt[at]=nt[at]})),Rt}))),!1))})),lt},vZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.getContentKey=function(nt){return function(lt){if(at.isOutlierMark(lt))return nt===uZ.OUTLIER?at.series.getOutliersField():nt===uZ.SERIES_FIELD?at.series.getSeriesField():null;switch(nt){case uZ.MIN:return at.series.getMinField();case uZ.MAX:return at.series.getMaxField();case uZ.MEDIAN:return at.series.getMedianField();case uZ.Q1:return at.series.getQ1Field();case uZ.Q3:return at.series.getQ3Field();case uZ.SERIES_FIELD:return at.series.getSeriesField()}return null}},at.getContentValue=function(nt){return function(lt){if(at.isOutlierMark(lt))return nt===uZ.OUTLIER?lt[dZ]:nt===uZ.SERIES_FIELD?lt[at.series.getSeriesField()]:null;switch(nt){case uZ.MIN:return lt[at.series.getMinField()];case uZ.MAX:return lt[at.series.getMaxField()];case uZ.MEDIAN:return lt[at.series.getMedianField()];case uZ.Q1:return lt[at.series.getQ1Field()];case uZ.Q3:return lt[at.series.getQ3Field()];case uZ.SERIES_FIELD:return lt[at.series.getSeriesField()]}return null}},at.shapeColorCallback=function(nt){return"line"===at.series.getShaftShape()?at.series.getMarkInName("boxPlot").getAttribute("stroke",nt):at.series.getMarkInName("boxPlot").getAttribute("fill",nt)},at.getOutlierFillColor=function(nt){var lt,Rt=at.series.getOutliersStyle();return null!==(lt=null==Rt?void 0:Rt.fill)&&void 0!==lt?lt:at.series.getMarkInName("outlier").getAttribute("fill",nt)},at.isOutlierMark=function(nt){return N(nt[dZ])},at}return S(e,nt),e.prototype.getDefaultContentList=function(nt){return[{"key":this.getContentKey(uZ.OUTLIER),"value":this.getContentValue(uZ.OUTLIER),"shapeType":this.shapeTypeCallback,"shapeColor":this.getOutlierFillColor,"shapeStroke":this.getOutlierFillColor},{"key":this.getContentKey(uZ.MAX),"value":this.getContentValue(uZ.MAX)},{"key":this.getContentKey(uZ.Q3),"value":this.getContentValue(uZ.Q3)},{"key":this.getContentKey(uZ.MEDIAN),"value":this.getContentValue(uZ.MEDIAN)},{"key":this.getContentKey(uZ.Q1),"value":this.getContentValue(uZ.Q1)},{"key":this.getContentKey(uZ.MIN),"value":this.getContentValue(uZ.MIN)},{"key":this.getContentKey(uZ.SERIES_FIELD),"value":this.getContentValue(uZ.SERIES_FIELD)}]},e}(zY),yZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"lineWidth":2,"boxWidth":30,"shaftWidth":20,"shaftShape":"line"})},e.prototype._initProduct=function(nt){var at=this.getStyle("shaftShape"),lt=this.getVGrammarView(),Rt=this.getProductId(),Bt="bar"===at?"barBoxplot":"boxplot",Lt=this.getStyle("direction");this._product=lt.glyph(Bt,null!=nt?nt:lt.rootMark).id(Rt).configureGlyph({"direction":Lt}),this._compiledProductId=Rt},e.type="boxPlot",e}(dY),eJ=function(){Tz.registerMark(yZ.type,yZ),Pj.registerGlyph("boxplot",{"shaft":"rule","box":"rect","max":"rule","min":"rule","median":"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","boxWidth","boxHeight","ruleWidth","ruleHeight"]).registerFunctionEncoder(rV).registerChannelEncoder("x",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?null:{"shaft":{"x":at,"x1":at}}})).registerChannelEncoder("y",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"shaft":{"y":at,"y1":at}}:null})).registerChannelEncoder("q1",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"box":{"x":at}}:{"box":{"y":at}}})).registerChannelEncoder("q3",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"box":{"x1":at}}:{"box":{"y1":at}}})).registerChannelEncoder("min",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"shaft":{"x":at},"min":{"x":at,"x1":at,"visible":!0}}:{"shaft":{"y":at},"min":{"y":at,"y1":at,"visible":!0}}})).registerChannelEncoder("max",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"shaft":{"x1":at},"max":{"x":at,"x1":at,"visible":!0}}:{"shaft":{"y1":at},"max":{"y":at,"y1":at,"visible":!0}}})).registerChannelEncoder("median",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"median":{"x":at,"x1":at,"visible":!0}}:{"median":{"y":at,"y1":at,"visible":!0}}})).registerChannelEncoder("angle",(function(nt,at,lt,Rt,Bt,Lt){var Ht,jt=Lt&&eS(Lt.direction)?[(lt.min+lt.max)/2,lt.y]:[lt.x,(lt.min+lt.max)/2],$t=null!==(Ht=lt.anchor)&&void 0!==Ht?Ht:jt;return{"shaft":{"angle":at,"anchor":$t},"box":{"angle":at,"anchor":$t},"max":{"angle":at,"anchor":$t},"min":{"angle":at,"anchor":$t},"median":{"angle":at,"anchor":$t}}})).registerDefaultEncoder((function(){return{"max":{"visible":!1},"min":{"visible":!1},"median":{"visible":!1}}})),Pj.registerAnimationType("boxplotScaleIn",wV),Pj.registerAnimationType("boxplotScaleOut",RV),tV(),JN(),XN(),KN(),Pj.registerGlyph("barBoxplot",{"minMaxBox":"rect","q1q3Box":"rect","median":"rule"}).registerProgressiveChannels(["x","y","q1","q3","min","max","median","angle","width","height","minMaxWidth","q1q3Width","minMaxHeight","q1q3Height"]).registerFunctionEncoder(lV).registerChannelEncoder("q1",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"q1q3Box":{"x":at}}:{"q1q3Box":{"y":at}}})).registerChannelEncoder("q3",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"q1q3Box":{"x1":at}}:{"q1q3Box":{"y1":at}}})).registerChannelEncoder("min",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"minMaxBox":{"x":at}}:{"minMaxBox":{"y":at}}})).registerChannelEncoder("max",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"minMaxBox":{"x1":at}}:{"minMaxBox":{"y1":at}}})).registerChannelEncoder("median",(function(nt,at,lt,Rt,Bt,Lt){return Lt&&eS(Lt.direction)?{"median":{"x":at,"x1":at,"visible":!0}}:{"median":{"y":at,"y1":at,"visible":!0}}})).registerChannelEncoder("angle",(function(nt,at,lt,Rt,Bt,Lt){var Ht,jt=null!==(Ht=lt.anchor)&&void 0!==Ht?Ht:[lt.x,(lt.min+lt.max)/2];return{"minMaxBox":{"angle":at,"anchor":jt},"q1q3Box":{"angle":at,"anchor":jt},"median":{"angle":at,"anchor":jt}}})).registerChannelEncoder("lineWidth",(function(nt,at,lt,Rt,Bt,Lt){return{"minMaxBox":{"lineWidth":0},"q1q3Box":{"lineWidth":0}}})).registerChannelEncoder("minMaxFillOpacity",(function(nt,at,lt,Rt,Bt,Lt){return{"minMaxBox":{"fillOpacity":at}}})).registerChannelEncoder("stroke",(function(nt,at,lt,Rt,Bt,Lt){return{"minMaxBox":{"stroke":!1},"q1q3Box":{"stroke":!1}}})).registerDefaultEncoder((function(){return{"minMaxBox":{"lineWidth":0},"q1q3Box":{"lineWidth":0},"median":{"visible":!1}}})),Pj.registerAnimationType("barBoxplotScaleIn",eW),Pj.registerAnimationType("barBoxplotScaleOut",aW),tV(),JN(),XN(),KN()},mZ=A(A({},GY),((pZ={}).boxPlot={"name":"boxPlot","type":"boxPlot"},pZ.outlier={"name":"outlier","type":"symbol"},pZ)),bZ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.boxPlot,lt}return S(i,at),i.prototype.getMinField=function(){return this._minField},i.prototype.getMaxField=function(){return this._maxField},i.prototype.getQ1Field=function(){return this._q1Field},i.prototype.getMedianField=function(){return this._medianField},i.prototype.getQ3Field=function(){return this._q3Field},i.prototype.getOutliersField=function(){return this._outliersField},i.prototype.getShaftShape=function(){return this._shaftShape},i.prototype.getBoxFillColor=function(){return this._boxFillColor},i.prototype.getStrokeColor=function(){return this._strokeColor},i.prototype.getOutliersStyle=function(){return this._outliersStyle},i.prototype.setAttrFromSpec=function(){var nt,lt,Rt,Bt,Lt;at.prototype.setAttrFromSpec.call(this);var Ht=null!==(lt=null===(nt=this._spec.boxPlot)||void 0===nt?void 0:nt.style)&&void 0!==lt?lt:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=null!==(Rt=Ht.lineWidth)&&void 0!==Rt?Rt:2,this._boxWidth=Ht.boxWidth,this._shaftShape=null!==(Bt=Ht.shaftShape)&&void 0!==Bt?Bt:"line",this._shaftWidth=Ht.shaftWidth,this._boxFillColor=Ht.boxFill,this._strokeColor=Ht.stroke,this._shaftFillOpacity="bar"===this._shaftShape?null!==(Lt=Ht.shaftFillOpacity)&&void 0!==Lt?Lt:.5:void 0,this._outliersStyle=this._spec.outliersStyle},i.prototype.initMark=function(){var nt={"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold};this._boxPlotMark=this._createMark(i.mark.boxPlot,{"groupKey":this._seriesField,"isSeriesMark":!0},nt),this._outlierMark=this._createMark(i.mark.outlier,{"key":Xz,"groupKey":this._seriesField,"dataView":this._outlierDataView.getDataView(),"dataProductId":this._outlierDataView.getProductId()},nt)},i.prototype.initMarkStyle=function(){var nt,at,lt,Rt,Bt,Lt=this,Ht=this._boxPlotMark;if(Ht){var jt={"direction":this._direction,"lineWidth":this._lineWidth,"shaftShape":this._shaftShape,"fill":null!==(nt=this._boxFillColor)&&void 0!==nt?nt:"line"===this._shaftShape?"#FFF":this.getColorAttribute(),"minMaxFillOpacity":this._shaftFillOpacity,"stroke":null!==(at=this._strokeColor)&&void 0!==at?at:"line"===this._shaftShape?this.getColorAttribute():"#000"},$t="horizontal"===this._direction?A(A({"y":this.dataToPositionY.bind(this)},jt),{"boxHeight":function(){var nt;return null!==(nt=Lt._boxWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"ruleHeight":function(){var nt;return null!==(nt=Lt._shaftWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"q1q3Height":function(){var nt;return null!==(nt=Lt._boxWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"minMaxHeight":function(){var nt;return null!==(nt=Lt._shaftWidth)&&void 0!==nt?nt:Lt._getMarkWidth()}}):A(A({"x":this.dataToPositionX.bind(this)},jt),{"boxWidth":function(){var nt;return null!==(nt=Lt._boxWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"ruleWidth":function(){var nt;return null!==(nt=Lt._shaftWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"q1q3Width":function(){var nt;return null!==(nt=Lt._boxWidth)&&void 0!==nt?nt:Lt._getMarkWidth()},"minMaxWidth":function(){var nt;return null!==(nt=Lt._shaftWidth)&&void 0!==nt?nt:Lt._getMarkWidth()}});this.setMarkStyle(Ht,$t,mU.STATE_NORMAL,EU.Series)}var Kt=this._outlierMark;Kt&&this.setMarkStyle(Kt,{"fill":null!==(Rt=null===(lt=this._outliersStyle)||void 0===lt?void 0:lt.fill)&&void 0!==Rt?Rt:this.getColorAttribute(),"size":Z(null===(Bt=this._outliersStyle)||void 0===Bt?void 0:Bt.size)?this._outliersStyle.size:10,"symbolType":"circle"},mU.STATE_NORMAL,EU.Series)},i.prototype.initBoxPlotMarkStyle=function(){var nt,at,lt=this,Rt=this._boxPlotMark,Bt="horizontal"===this._direction?this._xAxisHelper:this._yAxisHelper;if(Rt&&Bt){var Lt=Bt.dataToPosition,Ht=null===(nt=null==Bt?void 0:Bt.getScale)||void 0===nt?void 0:nt.call(Bt,0);this.setMarkStyle(Rt,{"min":function(nt){return uF(Lt(lt.getDatumPositionValues(nt,lt._minField),{"bandPosition":lt._bandPosition}),Ht)},"q1":function(nt){return uF(Lt(lt.getDatumPositionValues(nt,lt._q1Field),{"bandPosition":lt._bandPosition}),Ht)},"median":function(nt){return uF(Lt(lt.getDatumPositionValues(nt,lt._medianField),{"bandPosition":lt._bandPosition}),Ht)},"q3":function(nt){return uF(Lt(lt.getDatumPositionValues(nt,lt._q3Field),{"bandPosition":lt._bandPosition}),Ht)},"max":function(nt){return uF(Lt(lt.getDatumPositionValues(nt,lt._maxField),{"bandPosition":lt._bandPosition}),Ht)}},mU.STATE_NORMAL,EU.Series)}var jt=this._outlierMark;if(jt&&Bt){var $t=Bt.dataToPosition,Kt=null===(at=null==Bt?void 0:Bt.getScale)||void 0===at?void 0:at.call(Bt,0),te="horizontal"===this._direction?{"y":this.dataToPositionY.bind(this),"x":function(nt){return uF($t(lt.getDatumPositionValues(nt,dZ),{"bandPosition":lt._bandPosition}),Kt)}}:{"x":this.dataToPositionX.bind(this),"y":function(nt){return uF($t(lt.getDatumPositionValues(nt,dZ),{"bandPosition":lt._bandPosition}),Kt)}};this.setMarkStyle(jt,te,mU.STATE_NORMAL,EU.Series)}},i.prototype.initData=function(){if(at.prototype.initData.call(this),this._data){GW(this._dataSet,"foldOutlierData",QZ),GW(this._dataSet,"addVChartProperty",pY);var nt=new Es(this._dataSet,{"name":"".concat(this.type,"_outlier_").concat(this.id,"_data")});nt.parse([this.getViewData()],{"type":"dataview"}),nt.name="".concat(OF,"_series_").concat(this.id,"_outlierData"),nt.transform({"type":"foldOutlierData","options":{"dimensionField":"horizontal"===this._direction?this._fieldY:this._fieldX,"outliersField":this._outliersField}}),nt.transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1),this._outlierDataView=new jY(this._option,nt)}},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._outlierDataView)||void 0===nt||nt.compile()},i.prototype.init=function(nt){at.prototype.init.call(this,nt),this.initBoxPlotMarkStyle()},i.prototype._getMarkWidth=function(){if(this._autoBoxWidth)return this._autoBoxWidth;var nt="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,at="horizontal"===this._direction?this._fieldY:this._fieldX,lt=nt.getBandwidth(at.length-1)/at.length;return this._autoBoxWidth=lt,this._autoBoxWidth},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._autoBoxWidth=null},i.prototype._initAnimationSpec=function(nt){var at=this;void 0===nt&&(nt={});var lt=ft({},nt);return["appear","enter","update","exit","disappear"].forEach((function(nt){lt[nt]&&"scaleIn"===lt[nt].type?lt[nt].type="line"===at._shaftShape?"boxplotScaleIn":"barBoxplotScaleIn":lt[nt]&&"scaleOut"===lt[nt].type&&(lt[nt].type="line"===at._shaftShape?"boxplotScaleOut":"barBoxplotScaleOut")})),lt},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt=vX(this);if(this._boxPlotMark){var $t=this._initAnimationSpec(null===(nt=Tz.getAnimationInKey("scaleInOut"))||void 0===nt?void 0:nt()),Kt=this._initAnimationSpec(aX("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(rX($t,Kt,jt))}if(this._outlierMark){var te={"appear":null===(at=this._spec.animationAppear)||void 0===at?void 0:at.symbol,"disappear":null===(lt=this._spec.animationDisappear)||void 0===lt?void 0:lt.symbol,"enter":null===(Rt=this._spec.animationEnter)||void 0===Rt?void 0:Rt.symbol,"exit":null===(Bt=this._spec.animationExit)||void 0===Bt?void 0:Bt.symbol,"update":null===(Lt=this._spec.animationUpdate)||void 0===Lt?void 0:Lt.symbol};this._outlierMark.setAnimationConfig(rX(null===(Ht=Tz.getAnimationInKey("scaleInOut"))||void 0===Ht?void 0:Ht(),te,jt))}},i.prototype.initTooltip=function(){this._tooltipHelper=new vZ(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)},i.prototype.getStatisticFields=function(){var nt=this,lt=at.prototype.getStatisticFields.call(this),Rt=lt.find((function(at){return at.key===nt._outliersField}));return Rt&&(Rt.operations=["array-min","array-max"]),lt},i.prototype.onEvaluateEnd=function(nt){at.prototype.onEvaluateEnd.call(this,nt),this._outlierDataView.updateData()},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._boxPlotMark]},i.type=nt.SeriesTypeEnum.boxPlot,i.mark=mZ,i}(AX),rJ=function(){eJ(),CX(),qY(),_K(),gK(),Tz.registerSeries(bZ.type,bZ)},wZ=function(nt){function e(at,lt){var Rt=nt.call(this,at,lt)||this;return Rt.type=e.type,Rt._textType="text",Rt}return S(e,nt),e.prototype.getTextType=function(){return this._textType},e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"angle":0,"textAlign":"center","lineWidth":0,"textConfig":[]})},e.prototype.initStyleWithSpec=function(at,lt){nt.prototype.initStyleWithSpec.call(this,at,lt),at.textType&&(this._textType=at.textType)},e.prototype.compileEncode=function(){nt.prototype.compileEncode.call(this),"rich"===this._textType&&this._product.encodeState("group",{"textType":this._textType})},e.type="text",e}(dY),oJ=function(){Tz.registerMark(wZ.type,wZ),ZN(),LP(),DP(),Pj.registerGraphic(MH.richtext,ly)},CZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._getMeasureData=function(nt){return"horizontal"===at.series.getSpec().direction?nt[at.series.getSpec().xField[0]]+"-"+nt[at.series.getSpec().xField[1]]:nt[at.series.getSpec().yField[0]]+"-"+nt[at.series.getSpec().yField[1]]},at}return S(e,nt),e}(zY),lJ=function(nt){return{"type":"growCenterIn","options":{"direction":"horizontal"===nt.direction?"x":"y"}}},MZ={"type":"fadeIn"},cJ=function(nt){return{"type":"growCenterOut","options":{"direction":"horizontal"===nt.direction?"x":"y"}}};function hJ(nt,at){return"fadeIn"===at?MZ:lJ(nt)}var EZ,RZ,OZ=A(A({},Bq),((EZ={}).minLabel={"name":"minLabel","type":"text"},EZ.maxLabel={"name":"maxLabel","type":"text"},EZ)),DZ=A(A({},Oq),((RZ={}).minLabel={"name":"minLabel","type":"text"},RZ.maxLabel={"name":"maxLabel","type":"text"},RZ)),LZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!1,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){var at;"bothEnd"!==(null===(at=nt.label)||void 0===at?void 0:at.position)&&this._addMarkLabelSpec(nt,"bar")},e}(Lq),XZ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.rangeColumn,lt._barMarkType="rect",lt._barName=nt.SeriesTypeEnum.bar,lt.transformerConstructor=LZ,lt}return S(i,at),i.prototype.initMark=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt;this._initBarBackgroundMark();var te=null===(nt=this._spec.label)||void 0===nt?void 0:nt.position;this._barMark=this._createMark(i.mark.bar,{"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":null===(at=this._spec.bar)||void 0===at?void 0:at.stateSort},{"setCustomizedShape":null===(lt=this._spec.bar)||void 0===lt?void 0:lt.customShape,"morph":lX(this._spec,i.mark.bar.name),"morphElementKey":this.getDimensionField()[0]}),!1!==(null===(Rt=this._spec.label)||void 0===Rt?void 0:Rt.visible)&&"bothEnd"===te&&(!1!==(null===(Lt=null===(Bt=this._spec.label)||void 0===Bt?void 0:Bt.minLabel)||void 0===Lt?void 0:Lt.visible)&&(this._minLabelMark=this._createMark(i.mark.minLabel,{"markSpec":null===(Ht=this._spec.label)||void 0===Ht?void 0:Ht.minLabel})),!1!==(null===($t=null===(jt=this._spec.label)||void 0===jt?void 0:jt.maxLabel)||void 0===$t?void 0:$t.visible)&&(this._maxLabelMark=this._createMark(i.mark.maxLabel,{"markSpec":null===(Kt=this._spec.label)||void 0===Kt?void 0:Kt.maxLabel})))},i.prototype.initMarkStyle=function(){var nt,lt;at.prototype.initMarkStyle.call(this),this._initLabelMarkPos(this._minLabelMark,null===(nt=this._spec.label)||void 0===nt?void 0:nt.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,null===(lt=this._spec.label)||void 0===lt?void 0:lt.maxLabel,1,"start")},i.prototype._initLabelMarkPos=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t=this;nt&&(this.setMarkStyle(nt,{"fill":null!==(Lt=null===(Bt=null==at?void 0:at.style)||void 0===Bt?void 0:Bt.fill)&&void 0!==Lt?Lt:this.getColorAttribute(),"text":function(nt){var Rt="horizontal"===$t._spec.direction?nt[$t._spec.xField[lt]]:nt[$t._spec.yField[lt]];return(null==at?void 0:at.formatMethod)?at.formatMethod(Rt,nt):Rt}}),function(nt,at,lt,Rt,Bt,Lt,Ht,jt,$t){nt.setMarkStyle(at,{"textAlign":function(nt){if("vertical"===$t())return"center";var at=Bt(nt),Rt=Lt(nt);if("middle"===lt)return"center";if(at>=Rt){if("start"===lt)return"left";if("end"===lt)return"right";if("outside"===lt)return"left"}else{if("start"===lt)return"right";if("end"===lt)return"left";if("outside"===lt)return"right"}return"center"},"textBaseline":function(nt){if("horizontal"===$t())return"middle";var at=Ht(nt),Rt=jt(nt);if("middle"===lt)return"middle";if(Rt>=at){if("start"===lt)return"bottom";if("end"===lt)return"top";if("outside"===lt)return"bottom"}else{if("start"===lt)return"top";if("end"===lt)return"bottom";if("outside"===lt)return"top"}return"middle"}}),nt.setMarkStyle(at,{"x":function(nt){var at=$t(),Ht=Bt(nt),jt=Lt(nt);if("vertical"===at)return(Ht+jt)/2;if("middle"===lt)return(Ht+jt)/2;if(Ht>=jt){if("start"===lt)return jt+Rt;if("end"===lt)return Ht-Rt;if("outside"===lt)return Ht+Rt}else{if("start"===lt)return jt-Rt;if("end"===lt)return Ht+Rt;if("outside"===lt)return Ht-Rt}return(Ht+jt)/2},"y":function(nt){var at=$t(),Bt=Ht(nt),Lt=jt(nt);if("horizontal"===at)return(Bt+Lt)/2;if("middle"===lt)return(Bt+Lt)/2;if(Bt>=Lt){if("start"===lt)return Lt+Rt;if("end"===lt)return Bt-Rt;if("outside"===lt)return Bt+Rt}else{if("start"===lt)return Lt-Rt;if("end"===lt)return Bt+Rt;if("outside"===lt)return Bt-Rt}return(Bt+Lt)/2}},"normal",EU.Series)}(this,nt,null!==(Ht=null==at?void 0:at.position)&&void 0!==Ht?Ht:Rt,null!==(jt=null==at?void 0:at.offset)&&void 0!==jt?jt:"vertical"===this._direction?-20:-25,(function(nt){return $t._barMark.getAttribute("x",nt)}),(function(nt){return"vertical"===$t._direction?$t._barMark.getAttribute("x",nt)+$t._barMark.getAttribute("width",nt):$t._barMark.getAttribute("x1",nt)}),(function(nt){return $t._barMark.getAttribute("y",nt)}),(function(nt){return"vertical"===$t._direction?$t._barMark.getAttribute("y1",nt):$t._barMark.getAttribute("y",nt)+$t._barMark.getAttribute("height",nt)}),(function(){return $t._direction})))},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&(this.setMarkStyle(nt,{"text":function(nt){var lt,Rt;return"horizontal"===at._spec.direction?(lt=nt[at._spec.xField[0]],Rt=nt[at._spec.xField[1]]):(lt=nt[at._spec.yField[0]],Rt=nt[at._spec.yField[1]]),lt+"-"+Rt},"z":this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=nt)},i.prototype._dataToPosX=function(nt){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this._spec.xField[0]),{"bandPosition":this._bandPosition})},i.prototype._dataToPosX1=function(nt){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this._spec.xField[1]),{"bandPosition":this._bandPosition})},i.prototype._dataToPosY=function(nt){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this._spec.yField[0]),{"bandPosition":this._bandPosition})},i.prototype._dataToPosY1=function(nt){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this._spec.yField[1]),{"bandPosition":this._bandPosition})},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt,Lt=vX(this),Ht=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._barMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("rangeColumn"))||void 0===lt?void 0:lt({"direction":this.direction},Ht),aX("bar",this._spec,this._markAttributeContext),Lt)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("fadeInOut"))||void 0===Rt?void 0:Rt(),aX("label",this._spec,this._markAttributeContext),Lt)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(rX(null===(Bt=Tz.getAnimationInKey("fadeInOut"))||void 0===Bt?void 0:Bt(),aX("label",this._spec,this._markAttributeContext),Lt))},i.prototype.initTooltip=function(){this._tooltipHelper=new CZ(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)},i.type=nt.SeriesTypeEnum.rangeColumn,i.mark=OZ,i.transformerConstructor=LZ,i}(Fq),mJ=function(){sq(),oJ(),Tz.registerAnimation("rangeColumn",(function(nt,at){return{"appear":hJ(nt,at),"enter":lJ(nt),"exit":cJ(nt),"disappear":cJ(nt)}})),ZY(),_K(),gK(),Tz.registerSeries(XZ.type,XZ)},$Z=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.rangeColumn3d,lt._barMarkType="rect3d",lt._barName=nt.SeriesTypeEnum.bar3d,lt}return S(i,at),i.type=nt.SeriesTypeEnum.rangeColumn3d,i.mark=DZ,i}(XZ),bJ=function(){bq(),_K(),gK(),Tz.registerSeries($Z.type,$Z)},KZ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._getMeasureData=function(nt){return"horizontal"===at.series.getSpec().direction?nt[at.series.getSpec().xField[0]]+"-"+nt[at.series.getSpec().xField[1]]:nt[at.series.getSpec().yField[0]]+"-"+nt[at.series.getSpec().yField[1]]},at}return S(e,nt),e}(zY),ZZ=A({},gq),JZ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.rangeArea,lt}return S(i,at),i.prototype.initMark=function(){var nt,at=null!==(nt=this._spec.area)&&void 0!==nt?nt:{},lt=at.customShape,Rt=at.stateSort;this._areaMark=this._createMark(i.mark.area,{"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":Rt},{"setCustomizedShape":lt,"morphElementKey":this.getDimensionField()[0]})},i.prototype.initMarkStyle=function(){this.initAreaMarkStyle()},i.prototype.initAreaMarkStyle=function(){var nt=this,lt=this._areaMark;lt&&(at.prototype.initAreaMarkStyle.call(this),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{"x1":function(at){return nt._xAxisHelper?(0,nt._xAxisHelper.dataToPosition)(nt.getDatumPositionValues(at,nt._spec.xField[1]),{"bandPosition":nt._bandPosition}):Number.NaN}},"normal",EU.Series):this.setMarkStyle(this._areaMark,{"y1":function(at){return nt._yAxisHelper?(0,nt._yAxisHelper.dataToPosition)(nt.getDatumPositionValues(at,nt._spec.yField[1]),{"bandPosition":nt._bandPosition}):Number.NaN}},"normal",EU.Series),this.setMarkStyle(lt,{"stroke":!1},"normal",EU.Series))},i.prototype.initTooltip=function(){this._tooltipHelper=new KZ(this)},i.prototype._isFieldAllValid=function(){var nt=this.getViewDataStatistics(),at=this.fieldY;return!!(nt&&nt.latestData&&at.length)&&at.every((function(at){return nt.latestData[at]&&nt.latestData[at].allValid}))},i.type=nt.SeriesTypeEnum.rangeArea,i.mark=ZZ,i}(_q),AJ=function(){VK(),_K(),gK(),Tz.registerSeries(JZ.type,JZ)},eQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.coordinate="polar",at._outerRadius=qF,at._innerRadius=0,at._angleField=[],at._radiusField=[],at._sortDataByAxis=!1,at}return S(e,nt),Object.defineProperty(e.prototype,"outerRadius",{"get":function(){return this._outerRadius},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"innerRadius",{"get":function(){return this._innerRadius},"enumerable":!1,"configurable":!0}),e.prototype.getAngleField=function(){return this._angleField},e.prototype.setAngleField=function(nt){return this._angleField=N(nt)?xt(nt):[],this._angleField},e.prototype.getRadiusField=function(){return this._radiusField},e.prototype.setRadiusField=function(nt){return this._radiusField=N(nt)?xt(nt):[],this._radiusField},Object.defineProperty(e.prototype,"innerRadiusField",{"get":function(){return this._innerRadiusField},"enumerable":!1,"configurable":!0}),e.prototype.setInnerRadiusField=function(nt){return this._innerRadiusField=xt(nt),this._innerRadiusField},Object.defineProperty(e.prototype,"radiusScale",{"get":function(){return this._radiusScale},"enumerable":!1,"configurable":!0}),e.prototype.setRadiusScale=function(nt){return this._radiusScale=nt,nt},Object.defineProperty(e.prototype,"angleScale",{"get":function(){return this._angleScale},"enumerable":!1,"configurable":!0}),e.prototype.setAngleScale=function(nt){return this._angleScale=nt,nt},Object.defineProperty(e.prototype,"angleAxisHelper",{"get":function(){return this._angleAxisHelper},"set":function(nt){this._angleAxisHelper=nt,this.onAngleAxisHelperUpdate()},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"radiusAxisHelper",{"get":function(){return this._radiusAxisHelper},"set":function(nt){this._radiusAxisHelper=nt,this.onRadiusAxisHelperUpdate()},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"sortDataByAxis",{"get":function(){return this._sortDataByAxis},"enumerable":!1,"configurable":!0}),e.prototype._buildMarkAttributeContext=function(){var at=this;nt.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=function(){return at.angleAxisHelper.center()},this._markAttributeContext.getLayoutRadius=function(){return at._computeLayoutRadius()}},e.prototype.valueToPosition=function(nt,at){if(j(nt)||j(at)||!this.angleAxisHelper||!this.radiusAxisHelper)return{"x":Number.NaN,"y":Number.NaN};var lt=this.radiusAxisHelper.dataToPosition(xt(at));if(lt<0){if("break"===this._invalidType||"link"===this._invalidType)return{"x":Number.NaN,"y":Number.NaN};if("zero"===this._invalidType)return this.angleAxisHelper.center()}var Rt=this.angleAxisHelper.dataToPosition(xt(nt));return this.angleAxisHelper.coordToPoint({"angle":Rt,"radius":lt})},e.prototype.dataToPosition=function(nt,at){return nt&&this.angleAxisHelper&&this.radiusAxisHelper?at&&!this.isDatumInViewData(nt)?null:this.valueToPosition(this.getDatumPositionValues(nt,this._angleField),this.getDatumPositionValues(nt,this._radiusField)):null},e.prototype.dataToPositionX=function(nt){var at;return null===(at=this.dataToPosition(nt))||void 0===at?void 0:at.x},e.prototype.dataToPositionY=function(nt){var at;return null===(at=this.dataToPosition(nt))||void 0===at?void 0:at.y},e.prototype.dataToPositionZ=function(nt){return 0},e.prototype.positionToData=function(nt){},e.prototype.radiusToData=function(nt){},e.prototype.angleToData=function(nt){},e.prototype.getStatisticFields=function(){var nt,at,lt=this,Rt=[];return(null===(nt=this.radiusAxisHelper)||void 0===nt?void 0:nt.getScale)&&this._radiusField.forEach((function(nt){var at={"key":nt,"operations":[]};FB(lt.radiusAxisHelper.getScale(0).type)?at.operations=["max","min"]:at.operations=["values"],Rt.push(at)})),(null===(at=this.angleAxisHelper)||void 0===at?void 0:at.getScale)&&this._angleField.forEach((function(nt){var at={"key":nt,"operations":[]};FB(lt.angleAxisHelper.getScale(0).type)?at.operations=["max","min"]:at.operations=["values"],Rt.push(at)})),Rt},e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),N(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),N(this._spec.radius)&&(this._outerRadius=this._spec.radius),N(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),N(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)},e.prototype.onRadiusAxisHelperUpdate=function(){this.onMarkPositionUpdate()},e.prototype.onAngleAxisHelperUpdate=function(){this.onMarkPositionUpdate()},e.prototype.afterInitMark=function(){nt.prototype.afterInitMark.call(this)},e.prototype._computeLayoutRadius=function(){var nt=this._angleAxisHelper||this._radiusAxisHelper;if(nt)return nt.layoutRadius();var at=this._region.getLayoutRect(),lt=at.width,Rt=at.height;return Math.min(lt/2,Rt/2)},e.prototype.initEvent=function(){var at=this;nt.prototype.initEvent.call(this),this.sortDataByAxis&&this.event.on(jW.scaleDomainUpdate,{"filter":function(nt){var lt;return nt.model.id===(null===(lt=at._angleAxisHelper)||void 0===lt?void 0:lt.getAxisId())}},(function(){at._sortDataInAxisDomain()}))},e.prototype._sortDataInAxisDomain=function(){var nt,at;(null===(at=null===(nt=this.getViewData())||void 0===nt?void 0:nt.latestData)||void 0===at?void 0:at.length)&&fX(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)},e.prototype.getInvalidCheckFields=function(){var nt=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach((function(at){nt.push(at)})),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach((function(at){nt.push(at)})),nt},e}(kX);function MJ(nt){return Vk(nt)?Number.parseFloat(nt):0}var TJ=function(nt,at){var lt=at.asStartAngle,Rt=at.asEndAngle,Bt=at.asMiddleAngle,Lt=at.asRadian,Ht=at.asRatio,jt=at.asQuadrant,$t=at.asK,Kt=at.showAllZero,te=at.supportNegative,ne=at.showEmptyCircle,re=at.angleField(),ae=at.startAngle(),oe=at.endAngle(),se=at.minAngle(),le=nt.map((function(nt){return A({},nt)}));if(!le||0===le.length)return le;if(!Kt&&ne&&CJ(le,re,te))return le;for(var y=function(nt,at,Ht){nt[lt]=at,nt[Rt]=at+Ht,nt[Bt]=at+Ht/2,nt[Lt]=Ht,nt[jt]=De(at+Ht/2)},ue=0,ce=-1/0,he=!0,de=0;de<le.length;de++){var fe=te?Math.abs(MJ(le[de][re])):MJ(le[de][re]);ue+=fe,ce=Math.max(fe,ce),he&&0!==fe&&(he=!1),le[de][FF]=fe}var pe=le.map((function(nt){return Number(nt[re])})),ve=oe-ae,Ae=ae,we=ve,Ce=0,je=function(nt,at){void 0===at&&(at=2);var lt=nt.reduce((function(nt,at){return nt+(isNaN(at)?0:at)}),0);if(0===lt)return 0;for(var Rt=Math.pow(10,at),Bt=nt.map((function(nt){return(isNaN(nt)?0:nt)/lt*Rt*100})),Lt=100*Rt,Ht=Bt.map((function(nt){return Math.floor(nt)})),jt=Ht.reduce((function(nt,at){return nt+at}),0),$t=Bt.map((function(nt,at){return nt-Ht[at]}));jt<Lt;){for(var Kt=Number.NEGATIVE_INFINITY,te=null,ne=0;ne<$t.length;ne++)$t[ne]>Kt&&(Kt=$t[ne],te=ne);++Ht[te],$t[te]=0,++jt}return Ht.map((function(nt){return nt/Rt}))}(pe);if(le.forEach((function(nt,at){var lt=nt[FF],Rt=ue?lt/ue:0,Bt=Rt*ve;Bt<se?(Bt=se,we-=se):Ce+=lt;var Lt=Ae,jt=Ae+Bt;nt[Ht]=Rt,nt[$t]=ce?lt/ce:0,nt._percent_=je[at],y(nt,Lt,Bt),Ae=jt})),we<ve)if(we<=.001){var Ne=ve/le.length;le.forEach((function(nt,at){y(nt,ae+at*Ne,Ne)}))}else{var Ve=we/Ce;Ae=ae,le.forEach((function(nt){var at=nt[Lt]===se?se:nt[FF]*Ve;y(nt,Ae,at),Ae+=at}))}if(0!==ue&&(le[le.length-1][Rt]=oe),he&&Kt){var Ge=ve/le.length;le.forEach((function(nt,at){y(nt,ae+at*Ge,Ge)}))}return le},CJ=function(nt,at,lt){return!!j(nt)||0===nt.length||!!nt.every((function(nt){return 0===MJ(nt[at])}))||!lt&&0===nt.reduce((function(nt,lt){return nt+MJ(lt[at])}),0)};function EJ(nt,at,lt){return function(Rt,Bt,Lt){return at?"radius"===nt.growField?{"overall":0}:{"overall":nt.growFrom(Rt,Bt,lt)}:{"overall":!1}}}var PJ=function(nt){return{"type":"radius"===nt.growField?"growRadiusIn":"growAngleIn","options":EJ(nt,!0,gU.appear)}},oQ={"type":"fadeIn"},BJ=function(nt){return{"type":"radius"===nt.growField?"growRadiusIn":"growAngleIn","easing":"linear","options":EJ(nt,!0,gU.enter)}},IJ=function(nt){return{"type":"radius"===nt.growField?"growRadiusOut":"growAngleOut","easing":"linear","options":EJ(nt,!0,gU.exit)}},LJ=function(nt){return{"type":"radius"===nt.growField?"growRadiusOut":"growAngleOut","options":EJ(nt,!0,gU.exit)}};function DJ(nt,at){if(!1===at)return{};switch(at){case"fadeIn":return oQ;case"growRadius":return PJ(A(A({},nt),{"growField":"radius"}));default:return PJ(A(A({},nt),{"growField":"angle"}))}}var sQ,lQ,uQ=function(nt){function e(at,lt){var Rt=nt.call(this,at,lt)||this;return Rt.type=cQ.type,Rt._unCompileChannel={"centerOffset":!0,"radiusOffset":!0},Rt.computeOuterRadius=function(nt,at,lt,Bt,Lt){var Ht;return void 0===lt&&(lt="normal"),Lt+(null!==(Ht=Rt.getAttribute("radiusOffset",at,lt,Bt))&&void 0!==Ht?Ht:0)},Rt.computeCenter=function(nt,at,lt,Bt,Lt){return void 0===lt&&(lt="normal"),Pe({"x":0,"y":0},Rt.getAttribute("centerOffset",at,lt,Bt),at[VF])[nt]+Lt},Rt._computeExChannel.x=Rt.computeCenter,Rt._computeExChannel.y=Rt.computeCenter,Rt._computeExChannel.outerRadius=Rt.computeOuterRadius,Rt._extensionChannel.centerOffset=["x","y"],Rt._extensionChannel.radiusOffset=["outerRadius"],Rt}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"startAngle":0,"endAngle":0,"outerRadius":0,"innerRadius":0,"cornerRadius":0,"lineWidth":0,"innerPadding":0,"outerPadding":0})},e}(dY),cQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.type="arc",e}(uQ),jJ=function(){WN(),tX(),Tz.registerMark(cQ.type,cQ)},hQ=A(A({},GY),((sQ={}).pie={"name":"pie","type":"arc"},sQ.labelLine={"name":"labelLine","type":"path"},sQ)),pQ=A(A({},GY),((lQ={}).pie3d={"name":"pie3d","type":"arc3d"},lQ.labelLine={"name":"labelLine","type":"path"},lQ)),vQ=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"pie")},e.prototype._mergeThemeToSpec=function(nt,at){var lt=this,Rt=this._theme,Bt=nt;if(this._shouldMergeThemeToSpec()){var Lt=this._getDefaultSpecFromChart(at);Bt=gz({},this._theme,Lt,nt);var o=function(nt,at){return gz({},"inside"===nt||"inside-center"===nt?lt._theme.innerLabel:lt._theme.outerLabel,at)};X(Bt.label)?Bt.label=Bt.label.map((function(nt){return o(nt.position,nt)})):Bt.label=o(Bt.label.position,Bt.label)}return{"spec":Bt,"theme":Rt}},e.prototype._getDefaultSpecFromChart=function(at){var lt,Rt=null!==(lt=nt.prototype._getDefaultSpecFromChart.call(this,at))&&void 0!==lt?lt:{},Bt=at.centerX,Lt=at.centerY;return N(Bt)&&(Rt.centerX=Bt),N(Lt)&&(Rt.centerY=Lt),Object.keys(Rt).length>0?Rt:void 0},e}(xX),yQ="".concat(OF,"_LABEL_VISIBLE"),UJ=function(nt,at,lt,Rt){var Bt=nt();if(Z(Bt))return Bt;if(H(Bt))return Bt(at(),lt());var Lt=at();if("auto"===Bt&&Lt.width>0&&Lt.height>0){var Ht=Rt(),jt=Ht.startAngle,$t=void 0===jt?0:jt,Kt=Ht.endAngle,te=void 0===Kt?2*Math.PI:Kt;return Le(Lt,lt(),$t,te)}return Math.min(Lt.width/2,Lt.height/2)},mQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.transformerConstructor=vQ,at._pieMarkName="pie",at._pieMarkType="arc",at.getCenter=function(){var nt,lt,Rt=at._region.getLayoutRect();return{"x":pF(null===(nt=at._spec)||void 0===nt?void 0:nt.centerX,Rt.width,Rt,Rt.width/2),"y":pF(null===(lt=at._spec)||void 0===lt?void 0:lt.centerY,Rt.height,Rt,Rt.height/2)}},at._startAngle=UF,at._endAngle=XF,at._pieMark=null,at._labelMark=null,at._labelLineMark=null,at._emptyArcMark=null,at.dataToCentralPosition=function(nt){var lt=nt[VF];if(j(lt))return null;var Rt=at.computeDatumRadius(nt),Bt=at.computeDatumInnerRadius(nt);return Pe(at.computeCenter(nt),(Rt+Bt)/2,lt)},at}return S(e,nt),e.prototype._buildMarkAttributeContext=function(){var at=this;nt.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.getCenter=function(){return{"x":function(){return at.getCenter().x},"y":function(){return at.getCenter().y}}},this._markAttributeContext.startAngleScale=function(nt){return at.startAngleScale(nt)},this._markAttributeContext.endAngleScale=function(nt){return at.endAngleScale(nt)}},e.prototype.setAttrFromSpec=function(){var at,lt,Rt,Bt,Lt,Ht;nt.prototype.setAttrFromSpec.call(this),this._centerOffset=null!==(at=this._spec.centerOffset)&&void 0!==at?at:0,this._cornerRadius=null!==(lt=this._spec.cornerRadius)&&void 0!==lt?lt:0;var jt=function(nt,at){var lt=0,Rt=2*Math.PI,Bt=N(nt),Lt=N(at);for(Bt||Lt?Lt?Bt?(lt=nt,Rt=at):(lt=at-2*Math.PI,Rt=at):(lt=nt,Rt=nt+2*Math.PI):(lt=0,Rt=2*Math.PI);Rt<=lt;)Rt+=2*Math.PI;for(;lt>2*Math.PI;)lt-=2*Math.PI,Rt-=2*Math.PI;for(;Rt<0;)lt+=2*Math.PI,Rt+=2*Math.PI;return{"startAngle":lt,"endAngle":Rt}}(N(this._spec.startAngle)?Me(this._spec.startAngle):this._startAngle,N(this._spec.endAngle)?Me(this._spec.endAngle):this._endAngle);this._startAngle=jt.startAngle,this._endAngle=jt.endAngle,this._padAngle=N(this._spec.padAngle)?Me(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=null!==(Bt=null===(Rt=this._spec.emptyPlaceholder)||void 0===Rt?void 0:Rt.showEmptyCircle)&&void 0!==Bt&&Bt,this._showAllZero=null!==(Lt=this._spec.showAllZero)&&void 0!==Lt&&Lt,this._supportNegative=null!==(Ht=this._spec.supportNegative)&&void 0!==Ht&&Ht},e.prototype.initData=function(){var at=this;nt.prototype.initData.call(this);var lt=this.getViewData();if(lt){GW(this._dataSet,"pie",TJ),lt.transform({"type":"pie","options":{"angleField":function(){return at._angleField[0]},"startAngle":function(){return at._startAngle},"endAngle":function(){return at._endAngle},"minAngle":function(){return N(at._spec.minAngle)?Me(at._spec.minAngle):0},"asStartAngle":HF,"asEndAngle":jF,"asRatio":zF,"asMiddleAngle":VF,"asRadian":GF,"asQuadrant":WF,"asK":NF,"showAllZero":this._showAllZero,"supportNegative":this._supportNegative,"showEmptyCircle":this._showEmptyCircle}},!1);var Rt=new Es(this._dataSet,{"name":"".concat(OF,"_series_").concat(this.id,"_viewDataLabel")});Rt.parse([this.getViewData()],{"type":"dataview"}),this._viewDataLabel=new jY(this._option,Rt)}},e.prototype.compileData=function(){var at;nt.prototype.compileData.call(this),null===(at=this._viewDataLabel)||void 0===at||at.compile()},e.prototype.initMark=function(){var nt,at;this._pieMark=this._createMark(A(A({},e.mark.pie),{"name":this._pieMarkName,"type":this._pieMarkType}),{"key":$z,"groupKey":this._seriesField,"skipBeforeLayouted":!0,"isSeriesMark":!0,"stateSort":null===(nt=this._spec.pie)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.pie)||void 0===at?void 0:at.customShape,"morph":lX(this._spec,this._pieMarkName),"morphElementKey":this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({"name":"emptyCircle","type":"arc"},{"dataView":!1}))},e.prototype.startAngleScale=function(nt){return KO(HF)(nt)},e.prototype.endAngleScale=function(nt){return KO(jF)(nt)},e.prototype._computeLayoutRadius=function(){var nt=this;return UJ((function(){return nt._spec.layoutRadius}),this.getLayoutRect,this.getCenter,(function(){return{"startAngle":nt._startAngle,"endAngle":nt._endAngle}}))},e.prototype.initMarkStyle=function(){var nt=this,at={"x":function(){return nt.getCenter().x},"y":function(){return nt.getCenter().y},"fill":this.getColorAttribute(),"outerRadius":cF(this._outerRadius)?this._outerRadius:function(){return nt._computeLayoutRadius()*nt._outerRadius},"innerRadius":cF(this._innerRadius)?this._innerRadius:function(){return nt._computeLayoutRadius()*nt._innerRadius},"cornerRadius":function(){return nt._computeLayoutRadius()*nt._cornerRadius},"startAngle":function(at){return nt.startAngleScale(at)},"endAngle":function(at){return nt.endAngleScale(at)},"padAngle":this._padAngle,"centerOffset":this._centerOffset},lt=this._pieMark;lt&&this.setMarkStyle(lt,at,"normal",EU.Series);var Rt=this._emptyArcMark;Rt&&this.setMarkStyle(Rt,A(A({},at),{"visible":function(){var at=nt.getAngleField()[0];return CJ(nt.getViewData().latestData,at,nt._supportNegative)}}),"normal",EU.Series)},e.prototype.initInteraction=function(){this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])},e.prototype.initTooltip=function(){nt.prototype.initTooltip.call(this),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)},e.prototype.initMarkStyleWithSpec=function(at,lt,Rt){if(nt.prototype.initMarkStyleWithSpec.call(this,at,lt,Rt),at.name===this._pieMarkName){var Bt=this.getSpec()[at.name];if(Bt)for(var Lt in Bt.state||{})this.setMarkStyle(at,this.generateRadiusStyle(Bt.state[Lt]),Lt,EU.User_Mark)}"emptyCircle"===at.name&&this.setMarkStyle(at,this.generateRadiusStyle(lt.style),"normal",EU.User_Mark)},e.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"visible":KO(yQ).bind(this),"text":function(nt){return nt[at.getDimensionField()[0]]},"fill":this.getColorAttribute(),"z":this.dataToPositionZ.bind(this)})},e.prototype.afterInitMark=function(){nt.prototype.afterInitMark.call(this)},e.prototype.initEvent=function(){var at;nt.prototype.initEvent.call(this),null===(at=this._viewDataLabel.getDataView())||void 0===at||at.target.addListener("change",this.viewDataLabelUpdate.bind(this))},e.prototype.initGroups=function(){},e.prototype.onLayoutEnd=function(at){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),nt.prototype.onLayoutEnd.call(this,at)},e.prototype.getDimensionField=function(){return this._seriesField?[this._seriesField]:[]},e.prototype.getMeasureField=function(){return this._specAngleField},e.prototype.viewDataLabelUpdate=function(){this.event.emit(jW.viewDataLabelUpdate,{"model":this}),this._viewDataLabel.updateData()},e.prototype.generateRadiusStyle=function(nt){var at=this;if(nt){var lt={};return nt.outerRadius&&(lt.outerRadius=function(){return at._computeLayoutRadius()*nt.outerRadius}),nt.innerRadius&&(lt.innerRadius=function(){return at._computeLayoutRadius()*nt.innerRadius}),nt.cornerRadius&&(lt.cornerRadius=function(){return at._computeLayoutRadius()*nt.cornerRadius}),lt}},e.prototype.computeCenter=function(nt){return{"x":this._pieMark.getAttribute("x",nt,"normal"),"y":this._pieMark.getAttribute("y",nt,"normal")}},e.prototype.getRadius=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt;void 0===nt&&(nt="normal");var $t="normal"===nt?null===(Rt=null===(lt=this.getSpec()[(null===(at=this._pieMark)||void 0===at?void 0:at.name)||"pie"])||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.outerRadius:null===(jt=null===(Ht=null===(Lt=this.getSpec()[(null===(Bt=this._pieMark)||void 0===Bt?void 0:Bt.name)||"pie"])||void 0===Lt?void 0:Lt.state)||void 0===Ht?void 0:Ht[nt])||void 0===jt?void 0:jt.outerRadius;return null!=$t?$t:this._outerRadius},e.prototype.getInnerRadius=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt;void 0===nt&&(nt="normal");var $t="normal"===nt?null===(Rt=null===(lt=this.getSpec()[(null===(at=this._pieMark)||void 0===at?void 0:at.name)||"pie"])||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.innerRadius:null===(jt=null===(Ht=null===(Lt=this.getSpec()[(null===(Bt=this._pieMark)||void 0===Bt?void 0:Bt.name)||"pie"])||void 0===Lt?void 0:Lt.state)||void 0===Ht?void 0:Ht[nt])||void 0===jt?void 0:jt.innerRadius;return null!=$t?$t:this._innerRadius},e.prototype.computeRadius=function(nt,at){return this._computeLayoutRadius()*nt*(j(at)?1:at)+this._centerOffset},e.prototype.computeDatumRadius=function(nt,at){return this._computeLayoutRadius()*this.getRadius(at)+this._centerOffset},e.prototype._compareSpec=function(at,lt,Rt){Rt=null!=Rt?Rt:{"data":!0};var Bt=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];Bt.forEach((function(nt){Rt[nt]=!0}));var Lt=nt.prototype._compareSpec.call(this,at,lt,Rt);return at=null!=at?at:{},Bt.some((function(nt){return at[nt]!==lt[nt]}))&&(Lt.reRender=!0,Lt.change=!0),Lt},e.prototype.computeDatumInnerRadius=function(nt,at){return this._computeLayoutRadius()*this.getInnerRadius(at)+this._centerOffset},e.prototype.dataToPosition=function(nt,at){var lt=nt[VF];if(j(lt))return null;if(at&&!this.isDatumInViewData(nt))return null;var Rt=this.computeDatumRadius(nt);return Pe(this.computeCenter(nt),Rt,lt)},e.prototype.initAnimation=function(){var nt,at,lt,Rt=this,Bt={"growFrom":function(nt,at,lt){var Bt;if(lt===gU.appear)return Rt._startAngle;if(lt===gU.disappear)return Rt._endAngle;var Lt=[gU.disappear,gU.exit],Ht=at.mark.elements,jt=null==nt?void 0:nt[Xz];if(void 0===Ht.find((function(nt){var at;return(null===(at=nt.data[0])||void 0===at?void 0:at[Xz])<jt})))return Rt._startAngle;if(void 0===Ht.find((function(nt){var at;return(null===(at=nt.data[0])||void 0===at?void 0:at[Xz])>jt})))return Rt._endAngle;var $t=P([],E(Ht),!1).reverse().find((function(nt){var at;return(null===(at=nt.data[0])||void 0===at?void 0:at[Xz])<jt}));return Lt.includes(lt)?null===(Bt=null==$t?void 0:$t.getNextGraphicAttributes())||void 0===Bt?void 0:Bt.endAngle:null==$t?void 0:$t.getGraphicAttribute("endAngle",!0)}},Lt=null===(nt=this._spec.animationAppear)||void 0===nt?void 0:nt.preset;if(this._pieMark&&((Ht=rX(null===(at=Tz.getAnimationInKey("pie"))||void 0===at?void 0:at(Bt,Lt),aX("pie",this._spec,this._markAttributeContext))).normal&&Ht.normal.type&&(Ht.normal=function(nt,at){var lt,Rt,Bt,Lt,Ht=null!==(Rt=null===(lt=at.options)||void 0===lt?void 0:lt.distance)&&void 0!==Rt?Rt:10,jt=Q(at.duration)?at.duration/2:1e3,$t=null!==(Bt=at.options.easing)&&void 0!==Bt?Bt:"cubicOut";return{"oneByOne":at.oneByOne,"loop":null!==(Lt=at.loop)&&void 0!==Lt&&Lt,"timeSlices":[{"duration":jt,"effects":{"easing":$t,"channel":{"x":{"from":function(at){return nt.getAttribute("x",at)},"to":function(at){return nt.getAttribute("x",at)+Pe({"x":0,"y":0},Ht,at[VF]).x}},"y":{"from":function(at){return nt.getAttribute("y",at)},"to":function(at){return nt.getAttribute("y",at)+Pe({"x":0,"y":0},Ht,at[VF]).y}}}}},{"duration":jt,"effects":{"easing":$t,"channel":{"x":{"to":function(at){return nt.getAttribute("x",at)},"from":function(at){return nt.getAttribute("x",at)+Pe({"x":0,"y":0},Ht,at[VF]).x}},"y":{"to":function(at){return nt.getAttribute("y",at)},"from":function(at){return nt.getAttribute("y",at)+Pe({"x":0,"y":0},Ht,at[VF]).y}}}}}]}}(this._pieMark,Ht.normal)),this._pieMark.setAnimationConfig(Ht)),this._emptyArcMark){var Ht=rX(null===(lt=Tz.getAnimationInKey("emptyCircle"))||void 0===lt?void 0:lt(Bt,null!=Lt?Lt:"fadeIn"));this._emptyArcMark.setAnimationConfig(Ht)}},e.prototype.getDefaultShapeType=function(){return"circle"},e.prototype.getGroupFields=function(){return[]},e.prototype.getStackGroupFields=function(){return[]},e.prototype.getStackValueField=function(){return""},e.prototype._noAnimationDataKey=function(nt,at){return at},e.prototype.getActiveMarks=function(){return[this._pieMark]},e.transformerConstructor=vQ,e.mark=hQ,e}(eQ),kQ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.pie,lt}return S(i,at),i.type=nt.SeriesTypeEnum.pie,i}(mQ),KJ=function(){jJ(),Tz.registerAnimation("pie",(function(nt,at){return{"appear":DJ(nt,at),"enter":BJ(nt),"exit":IJ(nt),"disappear":LJ(nt)}})),Tz.registerAnimation("emptyCircle",(function(nt,at){return{"appear":DJ(nt,at)}})),Tz.registerSeries(kQ.type,kQ)},AQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at._support3d=!0,at}return S(e,nt),e.type="arc3d",e}(uQ),ZJ=function(){tX(),LP(),pP(),Pj.registerGraphic(MH.arc3d,_y),Tz.registerMark(AQ.type,AQ)},wQ=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"pie3d")},e}(vQ),CQ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.pie3d,lt._pieMarkName="pie3d",lt._pieMarkType="arc3d",lt.transformerConstructor=wQ,lt}return S(i,at),i.prototype.setAttrFromSpec=function(){var nt,lt;at.prototype.setAttrFromSpec.call(this),this._angle3d=null!==(lt=null===(nt=this._spec)||void 0===nt?void 0:nt.angle3d)&&void 0!==lt?lt:-Math.PI/3},i.prototype.initMarkStyle=function(){var nt=this;at.prototype.initMarkStyle.call(this);var lt=this._pieMark;lt&&this.setMarkStyle(lt,{"beta":function(){return nt._angle3d}},"normal",EU.Series)},i.prototype.initLabelMarkStyle=function(nt,lt){nt&&(at.prototype.initLabelMarkStyle.call(this,nt),this.setMarkStyle(nt,{"support3d":!0},void 0,EU.Mark))},i.type=nt.SeriesTypeEnum.pie3d,i.mark=pQ,i.transformerConstructor=wQ,i}(mQ),$J=function(){Tz.registerAnimation("pie3d",(function(nt,at){return{"appear":DJ(nt,at),"enter":BJ(nt),"exit":IJ(nt),"disappear":LJ(nt)}})),ZJ(),Tz.registerSeries(CQ.type,CQ)},tQ=function(nt){var at="angle"===nt.growField?0:nt.innerRadius;return"angle"===nt.growField?{"type":"angle"===nt.growField?"growAngleIn":"growRadiusIn"}:{"channel":{"innerRadius":{"from":at,"to":function(nt,at){var lt;return null===(lt=at.getFinalGraphicAttributes())||void 0===lt?void 0:lt.innerRadius}},"outerRadius":{"from":at,"to":function(nt,at){var lt;return null===(lt=at.getFinalGraphicAttributes())||void 0===lt?void 0:lt.outerRadius}}}}},MQ={"type":"fadeIn"},iQ=function(nt){return{"type":"angle"===nt.growField?"growAngleIn":"growRadiusIn"}},nQ=function(nt){return{"type":"angle"===nt.growField?"growAngleOut":"growRadiusOut"}},rQ=function(nt){return{"type":"angle"===nt.growField?"growAngleOut":"growRadiusOut"}};function aQ(nt,at){if(!1===at)return{};switch(at){case"fadeIn":return MQ;case"growAngle":return tQ(A(A({},nt),{"growField":"angle"}));default:return tQ(A(A({},nt),{"growField":"radius"}))}}var TQ,EQ=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.getStackGroupFields=function(){return this._angleField},e.prototype.getStackValueField=function(){return xt(this._spec.valueField)[0]||xt(this._spec.radiusField)[0]},e.prototype.getGroupFields=function(){return this._angleField},e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()},e.prototype.setValueFieldToStack=function(){this.setRadiusField(Jz),this.setInnerRadiusField(Qz)},e.prototype.setValueFieldToPercent=function(){this.setRadiusField(eH),this.setInnerRadiusField(tH)},e.prototype.getDimensionField=function(){return this._specAngleField},e.prototype.getMeasureField=function(){return this._specRadiusField},e.prototype.getDefaultShapeType=function(){return"square"},e}(eQ),RQ=A(A({},GY),((TQ={}).rose={"name":"rose","type":"arc"},TQ)),IQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!0,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"rose")},e}(xX),DQ=function(at){function i(nt,Rt){var Bt=at.call(this,nt,Rt)||this;return Bt.type=lt.polarAxis,Bt.name=lt.polarAxis,Bt._defaultBandPosition=0,Bt._defaultBandInnerPadding=0,Bt._defaultBandOuterPadding=0,Bt.layoutType="absolute",Bt.layoutZIndex=MU.Axis,Bt._tick=void 0,Bt._center=null,Bt._startAngle=UF,Bt._endAngle=XF,Bt._orient="radius",Bt._groupScales=[],Bt.effect={"scaleUpdate":function(nt){Bt.computeData(null==nt?void 0:nt.value),VO(Bt._regions,(function(nt){"radius"===Bt.getOrient()?XX(nt.radiusAxisHelper,Bt.axisHelper(),N(Bt._seriesUserId)||N(Bt._seriesIndex))&&(nt.radiusAxisHelper=Bt.axisHelper()):XX(nt.angleAxisHelper,Bt.axisHelper(),N(Bt._seriesUserId)||N(Bt._seriesIndex))&&(nt.angleAxisHelper=Bt.axisHelper())}),{"userId":Bt._seriesUserId,"specIndex":Bt._seriesIndex})}},Bt._transformLayoutPosition=function(nt){var at,lt=null===(at=Bt.getRegions())||void 0===at?void 0:at[0];return lt?lt.getLayoutStartPoint():nt},Bt.getCenter=function(){var nt,at,lt=Bt.getRefLayoutRect(),Rt=lt.width,Lt=lt.height;return{"x":pF(null===(nt=Bt._center)||void 0===nt?void 0:nt.x,Rt,lt,Rt/2),"y":pF(null===(at=Bt._center)||void 0===at?void 0:at.y,Lt,lt,Lt/2)}},Bt.getRefLayoutRect=function(){return Bt.getRegions()[0].getLayoutRect()},Bt._coordinateType="polar",Bt}return S(i,at),Object.defineProperty(i.prototype,"center",{"get":function(){return this._center},"enumerable":!1,"configurable":!0}),Object.defineProperty(i.prototype,"startAngle",{"get":function(){return this._startAngle},"enumerable":!1,"configurable":!0}),Object.defineProperty(i.prototype,"endAngle",{"get":function(){return this._endAngle},"enumerable":!1,"configurable":!0}),i.prototype.getOrient=function(){return this._orient},i.prototype.getDefaultInteractive=function(){return"angle"!==this._orient},i.prototype.getGroupScales=function(){return this._groupScales},i.getSpecInfo=function(nt){var at=this;if(!nt[this.specKey])return null;var Rt,Bt,Lt=X(nt[this.specKey]),Ht=Lt?nt[this.specKey]:[nt[this.specKey]],jt=[],$t=[],Kt=[];return Ht.forEach((function(Ht,te){if("angle"===(re=null==(ne=Ht)?void 0:ne.orient)||"radius"===re){var ne,re,ae=function(nt,at){var Rt,Bt,Lt,Ht,jt,$t,Kt=null!==(Rt=nt.type)&&void 0!==Rt?Rt:"angle"===nt.orient?"band":"linear",te="".concat(lt.polarAxis,"-").concat(Kt),ne=null!==(Bt=nt.startAngle)&&void 0!==Bt?Bt:at.startAngle,re=null!==(Lt=nt.endAngle)&&void 0!==Lt?Lt:at.endAngle;return{"axisType":Kt,"componentName":te,"startAngle":null!=ne?ne:-90,"endAngle":null!=re?re:N(ne)?ne+360:270,"center":N(at.center)?at.center:N(null==at?void 0:at.centerX)||N(null==at?void 0:at.centerY)?{"x":null==at?void 0:at.centerX,"y":null==at?void 0:at.centerY}:void 0,"outerRadius":null!==($t=null!==(jt=null!==(Ht=nt.outerRadius)&&void 0!==Ht?Ht:nt.radius)&&void 0!==jt?jt:at.outerRadius)&&void 0!==$t?$t:at.radius,"layoutRadius":at.layoutRadius}}(Ht,nt),oe=ae.axisType,se=ae.componentName,le=ae.startAngle,ue=ae.endAngle,ce=ae.center,he=ae.outerRadius,de=ae.layoutRadius;Ht.center=ce,Ht.startAngle=le,Ht.endAngle=ue,Ht.outerRadius=he,Ht.type=oe,Ht.layoutRadius=de;var fe={"spec":Ht,"specPath":Lt?[at.specKey,te]:[at.specKey],"specInfoPath":["component",at.specKey,te],"type":se};jt.push(fe),"radius"===Ht.orient?($t.push(fe),Bt=te):(Kt.push(fe),Rt=te)}})),$t.forEach((function(nt){nt.angleAxisIndex=Rt})),Kt.forEach((function(nt){nt.radiusAxisIndex=Bt})),jt},i.createComponent=function(nt,at){var lt=nt.spec,Rt=w(nt,["spec"]),Bt=Tz.getComponentInKey(Rt.type);return Bt?new Bt(lt,A(A({},at),Rt)):(at.onError("Component ".concat(Rt.type," not found")),null)},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient="angle"===this._spec.orient?"angle":"radius",this._center=this._spec.center,this._startAngle=Me(this._spec.startAngle),this._endAngle=Me(this._spec.endAngle),this._inverse=this._spec.inverse},i.prototype.onRender=function(nt){},i.prototype.changeRegions=function(){},i.prototype._tickTransformOption=function(){var nt,lt=this;return A(A({},at.prototype._tickTransformOption.call(this)),{"noDecimal":null===(nt=this._tick)||void 0===nt?void 0:nt.noDecimals,"startAngle":this.startAngle,"labelOffset":jX(this._spec),"getRadius":function(){return lt.getOuterRadius()},"inside":this._spec.inside})},i.prototype.updateScaleRange=function(){var nt,at=this._scale.range();return nt="radius"===this.getOrient()?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],!(at&&nt&&at[0]===nt[0]&&at[1]===nt[1]||(this._scale.range(nt),0))},i.prototype.collectSeriesField=function(nt,at){var lt,Rt;return nt>0?null===(Rt=null===(lt=at.getGroups())||void 0===lt?void 0:lt.fields)||void 0===Rt?void 0:Rt[nt]:"radius"===this.getOrient()?at.getRadiusField():at.getAngleField()},i.prototype.updateSeriesScale=function(){var nt=this;VO(this._regions,(function(at){"radius"===nt.getOrient()?XX(at.radiusAxisHelper,nt.axisHelper(),N(nt._seriesUserId)||N(nt._seriesIndex))&&(at.setRadiusScale(nt._scale),at.radiusAxisHelper=nt.axisHelper()):XX(at.angleAxisHelper,nt.axisHelper(),N(nt._seriesUserId)||N(nt._seriesIndex))&&(at.setAngleScale(nt._scale),at.angleAxisHelper=nt.axisHelper())}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},i.prototype.getSeriesStatisticsField=function(nt){var at="radius"===this.getOrient()?nt.getRadiusField():nt.getAngleField();return FB(this._scale.type)?at:[at[0]]},i.prototype.initGroupScales=function(){},i.prototype.axisHelper=function(){var nt=this;return{"isContinuous":FB(this._scale.type),"dataToPosition":this.dataToPosition.bind(this),"coordToPoint":this.coordToPoint.bind(this),"pointToCoord":this.pointToCoord.bind(this),"center":this.getCenter.bind(this),"layoutRadius":this._computeLayoutRadius.bind(this),"getScale":function(at){return void 0===at&&(at=0),nt._scales[at]},"getAxisId":function(){return nt.id},"getSpec":function(){return nt._spec}}},i.prototype.positionToData=function(nt){var at=this.pointToCoord(nt);return"radius"===this.getOrient()?this.invert(at.radius):this.invert(at.angle)},i.prototype.coordToPoint=function(nt){return Pe(this.getCenter(),nt.radius,nt.angle)},i.prototype.pointToCoord=function(nt){return Re(nt,this.getCenter(),this._startAngle,this._endAngle)},i.prototype.getOuterRadius=function(){return this.computeLayoutOuterRadius()},i.prototype.getInnerRadius=function(){return this.computeLayoutInnerRadius()},i.prototype.updateLayoutAttribute=function(){this._visible&&("radius"===this.getOrient()?this._layoutRadiusAxis():this._layoutAngleAxis()),at.prototype.updateLayoutAttribute.call(this)},i.prototype._getNormalizedValue=function(nt,at){return 0===at?0:(this.dataToPosition(nt)-this._getStartValue())/at},i.prototype.getLabelItems=function(nt){var at,lt=this,Rt=null===(at=this.getTickData())||void 0===at?void 0:at.getLatestData();return Rt&&Rt.length?[Rt.map((function(at){return YX(at.value,lt._getNormalizedValue([at.value],nt))}))]:[]},i.prototype._getStartValue=function(){return"radius"===this.getOrient()?this.computeLayoutInnerRadius():this._startAngle},i.prototype._layoutAngleAxis=function(){var nt,at,lt,Rt=this.getCenter(),Bt=this.computeLayoutOuterRadius(),Lt=this.computeLayoutInnerRadius(),Ht=this._endAngle-this._startAngle,jt=this.getLabelItems(Ht),$t=A(A({},this.getLayoutStartPoint()),{"inside":this._spec.inside,"center":Rt,"radius":Bt,"innerRadius":Lt,"startAngle":this._startAngle,"endAngle":this._endAngle,"sides":(null===(lt=null===(at=null===(nt=this._getRelatedAxis(this._option.radiusAxisIndex))||void 0===nt?void 0:nt.getSpec())||void 0===at?void 0:at.grid)||void 0===lt?void 0:lt.smooth)?void 0:this.getScale().domain().length}),Kt=A(A({},$t),{"size":this.getRefLayoutRect(),"title":{"text":this._spec.title.text||this._dataFieldText},"items":jt,"orient":"angle"});this._spec.grid.visible&&(Kt.grid=A({"type":"line","smoothLink":!0,"items":jt[0]},$t)),this._update(Kt)},i.prototype._layoutRadiusAxis=function(){var nt,at,lt,Rt=this.getCenter(),Bt=this.computeLayoutOuterRadius(),Lt=this.computeLayoutInnerRadius(),Ht=this.coordToPoint({"angle":this._startAngle,"radius":Bt}),jt=this.coordToPoint({"angle":this._startAngle,"radius":Lt}),$t=Ge.distancePP(jt,Ht),Kt=this.getLabelItems($t),te=A(A({},this.getLayoutStartPoint()),{"start":jt,"end":Ht,"verticalFactor":-1}),ne=A(A({},te),{"title":{"text":this._spec.title.text||this._dataFieldText},"items":Kt,"orient":"radius"});(null===(nt=this._spec.grid)||void 0===nt?void 0:nt.visible)&&(ne.grid=A({"items":Kt[0],"type":(null===(at=this._spec.grid)||void 0===at?void 0:at.smooth)?"circle":"polygon","center":Rt,"closed":!0,"sides":null===(lt=this._getRelatedAxis(this._option.angleAxisIndex))||void 0===lt?void 0:lt.getScale().domain().length,"startAngle":this._startAngle,"endAngle":this._endAngle},te)),this._update(ne)},i.prototype._getRelatedAxis=function(nt){if(N(nt))return this._option.getComponentByIndex(this.specKey,nt)},i.prototype._computeLayoutRadius=function(){var nt=this;return UJ((function(){return nt._spec.layoutRadius}),this.getRefLayoutRect,this.getCenter,(function(){return{"startAngle":nt._startAngle,"endAngle":nt._endAngle}}))},i.prototype.computeLayoutOuterRadius=function(){var nt,at=null!==(nt=this._spec.outerRadius)&&void 0!==nt?nt:this._spec.radius,lt=null!=at?at:this.getRefSeriesRadius().outerRadius;return this._computeLayoutRadius()*lt},i.prototype.computeLayoutInnerRadius=function(){var nt,at=null!==(nt=this._spec.innerRadius)&&void 0!==nt?nt:this.getRefSeriesRadius().innerRadius;return this._computeLayoutRadius()*at},i.prototype.getRefSeriesRadius=function(){var at=qF,lt=0,Rt=this.getChart().getSpec();return VO(this.getRegions(),(function(Bt){var Lt,Ht=Bt;if(Lt=Ht.type,[nt.SeriesTypeEnum.rose,nt.SeriesTypeEnum.radar,nt.SeriesTypeEnum.circularProgress].includes(Lt)){var jt=Ht.outerRadius,$t=void 0===jt?Rt.outerRadius:jt,Kt=Ht.innerRadius,te=void 0===Kt?Rt.innerRadius:Kt;Q($t)&&(at=$t),Q(te)&&(lt=te)}}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),{"outerRadius":at,"innerRadius":lt}},i.prototype._update=function(nt){var at=nt.grid,lt=w(nt,["grid"]);this._axisMark.getProduct().encode(gz({},this._axisStyle,lt)),this._gridMark&&this._gridMark.getProduct().encode(gz({},this._gridStyle,at))},i.prototype.invert=function(nt){var at;if("angle"===this.getOrient()&&"band"===this._scale.type){var lt=this._scale.range(),Rt=lt[lt.length-1]-lt[0],Bt=.5===(null!==(at=this.getSpec().bandPosition)&&void 0!==at?at:this._defaultBandPosition)?0:this._scale.bandwidth()/2;if(lt[0]<0){var Lt=(nt+Bt+Math.abs(lt[0]))%Rt-Math.abs(lt[0]);return this._scale.invert(Lt)}return this._scale.invert((nt+Bt)%Rt)}return this._scale.invert(nt)},i.type=lt.polarAxis,i.specKey="axes",i}(u$),LQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.polarLinearAxis,at._zero=!0,at._nice=!0,at._extend={},at._scale=new EB,at}return S(e,nt),e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),this.setExtraAttrFromSpec()},e.prototype.initScales=function(){nt.prototype.initScales.call(this),this.setScaleNice()},e.prototype.computeDomain=function(nt){return this.computeLinearDomain(nt)},e.prototype.axisHelper=function(){var at=nt.prototype.axisHelper.call(this);return at.setExtendDomain=this.setExtendDomain.bind(this),at},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,jI),nt},e.type=lt.polarLinearAxis,e.specKey="axes",e}(DQ);bt(LQ,_$);var dQ=function(){bV(),MV(),xV(),TV(),nK(),Tz.registerComponent(LQ.type,LQ)},FQ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.polarBandAxis,at._scale=new LI,at}return S(e,nt),e.prototype.computeDomain=function(nt){return this.computeBandDomain(nt)},e.prototype.updateScaleRange=function(){var at=nt.prototype.updateScaleRange.call(this);return this.updateGroupScaleRange(),at},e.prototype.axisHelper=function(){var at=nt.prototype.axisHelper.call(this);return A(A({},at),{"getBandwidth":function(nt){return at.getScale(nt).bandwidth()}})},e.prototype.initScales=function(){nt.prototype.initScales.call(this),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)},e.prototype.registerTicksTransform=function(){var nt="".concat(this.type,"-ticks");return GW(this._option.dataSet,nt,KI),nt},e.prototype.transformScaleDomain=function(){},e.type=lt.polarBandAxis,e.specKey="axes",e}(DQ);bt(FQ,x$);var fQ=function(){bV(),MV(),xV(),TV(),nK(),Tz.registerComponent(FQ.type,FQ)},zQ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.rose,lt.transformerConstructor=IQ,lt._roseMark=null,lt._labelMark=null,lt}return S(i,at),i.prototype.initMark=function(){this.initRoseMark()},i.prototype.initMarkStyle=function(){this.initRoseMarkStyle()},i.prototype._buildMarkAttributeContext=function(){var nt=this;at.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.getCenter=function(){return{"x":function(){return nt.angleAxisHelper.center().x},"y":function(){return nt.angleAxisHelper.center().y}}},this._markAttributeContext.startAngleScale=function(at){return nt.startAngleScale(at)},this._markAttributeContext.endAngleScale=function(at){return nt.endAngleScale(at)}},i.prototype.initRoseMark=function(){var nt,at;this._roseMark=this._createMark(i.mark.rose,{"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":null===(nt=this._spec.rose)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.rose)||void 0===at?void 0:at.customShape,"morph":lX(this._spec,i.mark.rose.name),"morphElementKey":this.getDimensionField()[0]})},i.prototype.getRoseAngle=function(){var nt,at,lt;return null!==(lt=null===(at=(nt=this.angleAxisHelper).getBandwidth)||void 0===at?void 0:at.call(nt,this._groups?this._groups.fields.length-1:0))&&void 0!==lt?lt:.5},i.prototype.startAngleScale=function(nt){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)},i.prototype.endAngleScale=function(nt){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(nt,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)},i.prototype.initRoseMarkStyle=function(){var nt=this,at=this._roseMark;at&&this.setMarkStyle(at,{"x":function(){return nt.angleAxisHelper.center().x},"y":function(){return nt.angleAxisHelper.center().y},"startAngle":function(at){return nt.startAngleScale(at)},"endAngle":function(at){return nt.endAngleScale(at)},"fill":this.getColorAttribute(),"outerRadius":function(at){return uF(nt.radiusAxisHelper.dataToPosition([at[nt._radiusField[0]]]),nt.radiusAxisHelper.getScale(0))},"innerRadius":function(at){var lt;if(!nt.getStack())return 0;var Rt=uF(nt.radiusAxisHelper.dataToPosition([at[nt._innerRadiusField[0]]]),nt.radiusAxisHelper.getScale(0));return Rt<=Number.MIN_VALUE?nt._computeLayoutRadius()*(null!==(lt=nt._spec.innerRadius)&&void 0!==lt?lt:0):Rt}})},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"text":function(nt){return nt[at.getDimensionField()[0]]},"fill":this.getColorAttribute(),"z":0})},i.prototype.initAnimation=function(){var nt,at,lt,Rt=this,Bt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;if(this._roseMark){var Lt={"innerRadius":function(){var nt;return Rt._computeLayoutRadius()*(null!==(nt=Rt._spec.innerRadius)&&void 0!==nt?nt:0)}};this._roseMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("rose"))||void 0===lt?void 0:lt(Lt,Bt),aX("rose",this._spec,this._markAttributeContext)))}},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[this._roseMark]},i.type=nt.SeriesTypeEnum.rose,i.mark=RQ,i.transformerConstructor=IQ,i}(EQ),gQ=function(){Tz.registerSeries(zQ.type,zQ),jJ(),Tz.registerAnimation("rose",(function(nt,at){return{"appear":aQ(nt,at),"enter":iQ(nt),"exit":nQ(nt),"disappear":rQ(nt)}})),fQ(),dQ()},jQ=function(nt){function e(at,lt,Rt,Bt,Lt){var Ht=nt.call(this,at,lt,Rt,Bt,Lt)||this;return Ht._center=lt.center,Ht._prevCenter=at.center,Ht._center&&Ht._prevCenter||(Ht.valid=!1),Ht}return S(e,nt),e.prototype.getEndProps=function(){return!1===this.valid?{}:Pe(this._center,this._toRadius,this._toAngle)},e.prototype.onBind=function(){var nt=Re(this.from,this._prevCenter),at=nt.angle,lt=nt.radius,Rt=Re(this.to,this._center),Bt=Rt.angle,Lt=Rt.radius;Q(Bt*Lt)||(this.valid=!1),this._fromAngle=Q(at)?at:Bt,this._fromRadius=Q(lt)?lt:Lt,this._toAngle=Bt,this._toRadius=Lt,sF(this._fromAngle,this._toAngle)&&sF(this._fromRadius,this._toRadius)&&(this.valid=!1)},e.prototype.onUpdate=function(nt,at,lt){if(!1===this.valid)return lt.x=this.to.x,void(lt.y=this.to.y);if(nt){var Rt=this.getEndProps(),Bt=Rt.x,Lt=Rt.y;lt.x=Bt,lt.y=Lt,lt.center=this._center}else{var Ht=Pe({"x":this._prevCenter.x+(this._center.x-this._prevCenter.x)*at,"y":this._prevCenter.y+(this._center.y-this._prevCenter.y)*at},this._fromRadius+(this._toRadius-this._fromRadius)*at,this._fromAngle+(this._toAngle-this._fromAngle)*at);Bt=Ht.x,Lt=Ht.y,lt.x=Bt,lt.y=Lt}},e}(Xh),VQ=function(nt){function e(at,lt,Rt,Bt,Lt){var Ht=nt.call(this,at,lt,Rt,Bt,Lt)||this;return Ht._center=lt.center,Ht._prevCenter=at.center,Ht}return S(e,nt),e.prototype.onUpdate=function(nt,at,lt){var Rt=this;this.points=this.points.map((function(Bt,Lt){var Ht=Rt.polarPointInterpolation(Rt.interpolatePoints[Lt][0],Rt.interpolatePoints[Lt][1],at);return nt&&(lt.center=Rt._center),Ht.context=Bt.context,Ht})),lt.points=this.points},e.prototype._interpolationSinglePoint=function(nt,at,lt){if(!NO(nt)&&!NO(at))return at;var Rt=Re(nt,this._prevCenter),Bt=Re(at,this._center),Lt=Ie(Rt.angle),Ht=Ie(Bt.angle);!Q(Lt)&&Q(Ht)&&(Lt=Ht),Q(Lt)&&!Q(Ht)&&(Ht=Lt);var jt=Lt+(Ht-Lt)*lt,$t=Rt.radius+(Bt.radius-Rt.radius)*lt;return Pe({"x":this._prevCenter.x+(this._center.x-this._prevCenter.x)*lt,"y":this._prevCenter.y+(this._center.y-this._prevCenter.y)*lt},$t,jt)},e.prototype.polarPointInterpolation=function(nt,at,lt){var Rt=this._interpolationSinglePoint(nt,at,lt),Bt=Rt.x,Lt=Rt.y,Ht=this._interpolationSinglePoint({"x":nt.x1,"y":nt.y1},{"x":at.x1,"y":at.y1},lt),jt=Ht.x,$t=Ht.y,Kt=new Ve(Bt,Lt,jt,$t);return Kt.defined=at.defined,Kt},e}(_d),_Q=function(nt){return{"type":"in"===nt?"fadeIn":"fadeOut"}};function bQ(nt,at,lt){return"fadeIn"===at?_Q(lt):function(nt,at){return{"type":"in"===at?"growPointsIn":"growPointsOut","options":function(){return{"center":nt.center()}}}}(nt,lt)}function xQ(nt,at,lt){return"fadeIn"===at?_Q(lt):function(nt,at){var i=function(){var at;return null===(at=nt.center())||void 0===at?void 0:at.x},n=function(nt,at){return at.getGraphicAttribute("x")},r=function(){var at;return null===(at=nt.center())||void 0===at?void 0:at.y},a=function(nt,at){return at.getGraphicAttribute("y")};return"in"===at?{"channel":{"x":{"from":i,"to":n},"y":{"from":r,"to":a}}}:{"channel":{"x":{"from":n,"to":i},"y":{"from":a,"to":r}}}}(nt,lt)}var WQ,SQ=function(nt,at){return{"custom":Fd,"customParameters":function(lt,Rt){var Bt;return{"group":Rt.getGraphicItem(),"startAngle":null!==(Bt=nt.startAngle)&&void 0!==Bt?Bt:Math.PI/2,"orient":"clockwise","center":nt.center(),"radius":nt.radius(),"animationType":at}}}},GQ=A(A(A({},GY),EX),((WQ={}).area={"name":"area","type":"area"},WQ)),UQ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.radar,lt.transformerConstructor=JX,lt._sortDataByAxis=!1,lt}return S(i,at),i.prototype.initGroups=function(){},i.prototype.compile=function(){at.prototype.compile.call(this),this.addOverlapCompile()},i.prototype.initMark=function(){var nt,at,lt,Rt,Bt={"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold},Lt=!1!==(null===(nt=this._spec.area)||void 0===nt?void 0:nt.visible)&&!1!==(null===(lt=null===(at=this._spec.area)||void 0===at?void 0:at.style)||void 0===lt?void 0:lt.visible),Ht=null!==(Rt=this._spec.seriesMark)&&void 0!==Rt?Rt:"area";this.initAreaMark(Bt,Lt&&"area"===Ht),this.initLineMark(Bt,"line"===Ht||"area"===Ht&&!Lt),this.initSymbolMark(Bt,"point"===Ht)},i.prototype.initMarkStyle=function(){var nt=this;this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle(),[this._lineMark,this._symbolMark,this._areaMark].forEach((function(at){at&&nt.setMarkStyle(at,{"center":function(){var at;return null===(at=nt.angleAxisHelper)||void 0===at?void 0:at.center()}})}))},i.prototype.initAreaMark=function(nt,at){var lt,Rt;this._areaMark=this._createMark(i.mark.area,{"groupKey":this._seriesField,"isSeriesMark":at,"stateSort":null===(lt=this._spec.area)||void 0===lt?void 0:lt.stateSort},A(A({},nt),{"setCustomizedShape":null===(Rt=this._spec.area)||void 0===Rt?void 0:Rt.customShape}))},i.prototype.initAreaMarkStyle=function(){var nt=this,at=this._areaMark;at&&(this.setMarkStyle(at,{"x":this.dataToPositionX.bind(this),"y":this.dataToPositionY.bind(this),"x1":function(at){return at&&nt.angleAxisHelper&&nt.radiusAxisHelper?nt.valueToPosition(nt.getDatumPositionValues(at,nt._angleField),nt.getStack()?nt.getDatumPositionValues(at,nt._innerRadiusField):nt.radiusScale.domain()[0]).x:Number.NaN},"y1":function(at){return at&&nt.angleAxisHelper&&nt.radiusAxisHelper?nt.valueToPosition(nt.getDatumPositionValues(at,nt._angleField),nt.getStack()?nt.getDatumPositionValues(at,nt._innerRadiusField):nt.radiusScale.domain()[0]).y:Number.NaN},"fill":this.getColorAttribute(),"curveType":TX,"closePath":!0},"normal",EU.Series),"zero"!==this._invalidType&&this.setMarkStyle(at,{"defined":this._getInvalidDefined.bind(this),"connectedType":this._getInvalidConnectType()},"normal",EU.Series),this.event.on(jW.viewDataStatisticsUpdate,{"filter":function(at){return at.model===nt}},(function(){nt.encodeDefined(at,"defined")})))},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this);var nt=this._tooltipHelper.activeTriggerSet,lt=nt.group,Rt=nt.mark;this._lineMark&&lt.add(this._lineMark),this._areaMark&&lt.add(this._areaMark),this._symbolMark&&(Rt.add(this._symbolMark),lt.add(this._symbolMark))},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt=this,Lt={"center":function(){var nt;return null===(nt=Bt.angleAxisHelper)||void 0===nt?void 0:nt.center()},"radius":function(){var nt=Bt.getLayoutRect();return Math.min(nt.width,nt.height)},"startAngle":N(this._spec.startAngle)?Me(this._spec.startAngle):UF},Ht=null!==(lt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset)&&void 0!==lt?lt:"clipIn";"clipIn"===Ht&&this._rootMark&&this._rootMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("radarGroup"))||void 0===Rt?void 0:Rt(Lt,Ht),aX("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach((function(nt){var at=E(nt,2),lt=at[0],Rt=at[1];if(N(lt)){var jt=Tz.getAnimationInKey(Rt);lt.setAnimationConfig(rX(null==jt?void 0:jt(Lt,Ht),aX(lt.name,Bt._spec,Bt._markAttributeContext)))}}))},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._areaMark,this._symbolMark,this._lineMark]},i.prototype.getSeriesStyle=function(nt){var at=this;return function(lt){var Rt,Bt,Lt,Ht,jt=null!==(Bt=null===(Rt=at._seriesMark)||void 0===Rt?void 0:Rt.getAttribute(lt,nt))&&void 0!==Bt?Bt:void 0;return"fill"!==lt||jt||(lt="stroke",jt=null!==(Ht=null===(Lt=at._seriesMark)||void 0===Lt?void 0:Lt.getAttribute(lt,nt))&&void 0!==Ht?Ht:void 0),"stroke"===lt&&X(jt)?jt[0]:jt}},i.type=nt.SeriesTypeEnum.radar,i.mark=GQ,i.transformerConstructor=JX,i}(EQ);bt(UQ,FX);var $Q,qQ,KQ,tJ,PQ=function(){Tz.registerSeries(UQ.type,UQ),VK(),wX(),CX(),Tz.registerAnimation("radar",(function(nt,at){return{"appear":"clipIn"===at?void 0:bQ(nt,at,"in"),"enter":bQ(nt,at,"in"),"exit":bQ(nt,at,"out"),"disappear":"clipIn"===at?void 0:bQ(nt,at,"out"),"update":[{"options":{"excludeChannels":["points","defined","center"]}},{"channel":["points","center"],"custom":VQ,"customParameters":nt,"duration":yX.update.duration,"easing":yX.update.easing}]}})),Tz.registerAnimation("radarSymbol",(function(nt,at){return{"appear":"clipIn"===at?void 0:xQ(nt,at,"in"),"enter":{"type":"scaleIn"},"exit":{"type":"scaleOut"},"disappear":"clipIn"===at?void 0:xQ(nt,at,"out"),"update":[{"options":{"excludeChannels":["x","y","center"]}},{"channel":["x","y","center"],"custom":jQ,"customParameters":nt,"duration":yX.update.duration,"easing":yX.update.easing}]}})),Tz.registerAnimation("radarGroup",(function(nt,at){return{"appear":SQ(nt,"in"),"disappear":SQ(nt,"out")}})),hP(),fQ(),dQ()},iJ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.shapeTypeCallback=function(){return"square"},at}return S(e,nt),e.prototype.enableByType=function(nt){return"mark"===nt},e.prototype.getDefaultTitlePattern=function(nt){return{"key":"event info","value":"event info"}},e.prototype.getDefaultContentList=function(){return[{"key":function(nt){return nt.type},"value":function(nt){return nt.id}},{"key":"event_time","value":function(nt){return Ji.getInstance().timeFormat("%Y%m%d",nt.event_time)}},{"key":"action_type","value":function(nt){return nt.action_type}},{"key":"children","value":function(nt){return nt.children}}]},e.prototype.getTooltipData=function(at,lt,Rt,Bt,Lt){var Ht,jt,$t,Kt,te=nt.prototype.getTooltipData.call(this,at,lt,Rt,Bt,Lt),ne=null!==($t=null===(jt=null===(Ht=this.spec)||void 0===Ht?void 0:Ht[at])||void 0===jt?void 0:jt.updateContent)&&void 0!==$t?$t:null===(Kt=null==lt?void 0:lt[at])||void 0===Kt?void 0:Kt.updateContent;return te&&!ne&&(te.updateContent=function(nt,at,lt){var Rt=[],Bt=nt.filter((function(nt){return"children"===nt.key}));return Bt.length>0&&Bt[0].value.forEach((function(nt){var at=!0;for(var lt in nt)Rt.push(A(A({},Bt[0]),{"shapeType":"circle","hasShape":at,"key":lt,"value":nt[lt]+""})),at=!1})),nt.concat(Rt)}),te},e}(zY),BQ=function(nt,at){var lt,Rt=(null===(lt=nt[0])||void 0===lt?void 0:lt.latestData)?nt[0].latestData:nt||[],Bt=[];return Rt.forEach((function(nt){var lt={};for(var Rt in nt)Rt!==at&&(lt[Rt]=nt[Rt]);var Lt=nt[at];null==Lt||Lt.forEach((function(nt){Bt.push(Object.assign({},lt,nt))}))})),Bt},nJ={"fill":"#bbb","fillOpacity":.2},aJ=A(A({},GY),(($Q={}).group={"name":"group","type":"group"},$Q.grid={"name":"grid","type":"rule"},$Q.gridBackground={"name":"gridBackground","type":"rect"},$Q.dot={"name":"dot","type":"symbol"},$Q.title={"name":"title","type":"text"},$Q.subTitle={"name":"subTitle","type":"text"},$Q.symbol={"name":"symbol","type":"symbol"},$Q)),sJ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.dot,lt}return S(i,at),i.prototype.getSeriesGroupField=function(){return this._seriesField},i.prototype.setSeriesGroupField=function(nt){N(nt)&&(this._seriesGroupField=nt)},i.prototype.getTitleField=function(){return this._titleField},i.prototype.setTitleField=function(nt){N(nt)&&(this._titleField=nt)},i.prototype.getSubTitleField=function(){return this._subTitleField},i.prototype.setSubTitleField=function(nt){N(nt)&&(this._subTitleField=nt)},i.prototype.getDotTypeField=function(){return this._dotTypeField},i.prototype.setDotTypeField=function(nt){N(nt)&&(this._dotTypeField=nt)},i.prototype.getHighLightSeriesGroup=function(){return this._highLightSeriesGroup},i.prototype.setHighLightSeriesGroup=function(nt){N(nt)&&(this._highLightSeriesGroup=nt)},i.prototype.setGridBackground=function(nt){N(nt)&&(this._gridBackground=nt)},i.prototype.initData=function(){var nt,lt=this;at.prototype.initData.call(this),this._xDimensionStatisticsDomain=this.getRawData().latestData.map((function(nt){return nt[lt._fieldY[0]]})),GW(this._option.dataSet,"objFlat",BQ),GW(this._option.dataSet,"copyDataView",tU),WW(this._option.dataSet,"dataview",as),null===(nt=this.getViewData())||void 0===nt||nt.transform({"type":"objFlat","options":"dots","level":vU.dotObjFlat},!1)},i.prototype.getStatisticFields=function(){return[{"key":this._fieldY[0],"operations":["values"],"customize":this._xDimensionStatisticsDomain}]},i.prototype.setAttrFromSpec=function(){var nt;at.prototype.setAttrFromSpec.call(this),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(gz(nJ,(null===(nt=this._spec.grid)||void 0===nt?void 0:nt.background)||{}))},i.prototype.initMark=function(){this._clipMark=this._createMark(i.mark.group),this._containerMark=this._createMark(i.mark.group,{"parent":this._clipMark,"dataView":this.getRawData()}),this._gridBackgroundMark=this._createMark(i.mark.gridBackground,{"parent":this._containerMark,"dataView":this.getRawData()}),this._gridMark=this._createMark(i.mark.grid,{"parent":this._containerMark,"dataView":this.getRawData()}),this._dotMark=this._createMark(i.mark.dot,{"skipBeforeLayouted":!1,"isSeriesMark":!0,"parent":this._containerMark}),this._titleMark=this._createMark(i.mark.title,{"parent":this._containerMark,"dataView":this.getRawData()}),this._subTitleMark=this._createMark(i.mark.subTitle,{"parent":this._containerMark,"dataView":this.getRawData()}),this._symbolMark=this._createMark(i.mark.symbol,{"parent":this._containerMark,"dataView":this.getRawData()})},i.prototype.initMarkStyle=function(){var nt=this,at=this._clipMark;at&&(this.setMarkStyle(at,{"x":-this._spec.leftAppendPadding,"y":0,"width":1e4,"height":this._spec.clipHeight},"normal",EU.Series),at.setMarkConfig({"interactive":!1,"clip":!0}));var lt=this._containerMark;lt&&(this.setMarkStyle(lt,{"x":this._spec.leftAppendPadding},"normal",EU.Series),lt.setMarkConfig({"interactive":!1}));var Rt=this._gridBackgroundMark;Rt&&this.setMarkStyle(Rt,{"x":this.getRegionRectLeft.bind(this),"x1":this.getRegionRectRight.bind(this),"y":this.dataToGridBackgroundPositionY.bind(this),"y1":this.dataToGridBackgroundPositionY1.bind(this),"fill":this._gridBackground.fill,"fillOpacity":this.dataToGridBackgroundOpacity.bind(this)},"normal",EU.Series);var Bt=this._gridMark;Bt&&this.setMarkStyle(Bt,{"stroke":this.getColorAttribute(),"x":this.getRegionRectLeft.bind(this),"y":this.dataToPositionY.bind(this),"x1":this.getRegionRectRight.bind(this),"y1":this.dataToPositionY.bind(this)},"normal",EU.Series);var Lt=this._dotMark;Lt&&this.setMarkStyle(Lt,{"x":this.dataToPositionX.bind(this),"y":this.dataToPositionY.bind(this),"fill":this.getDotColorAttribute(),"fillOpacity":this.dataToOpacity.bind(this)},"normal",EU.Series);var Ht=this._titleMark;Ht&&this.setMarkStyle(Ht,{"fill":this.getColorAttribute(),"text":function(at){return at[nt.getTitleField()]},"x":this.getRegionRectLeft.bind(this),"y":this.dataToPositionY.bind(this)},"normal",EU.Series);var jt=this._subTitleMark;jt&&this.setMarkStyle(jt,{"fill":this.getColorAttribute(),"text":function(at){return at[nt.getSubTitleField()]},"x":this.getRegionRectLeft.bind(this),"y":this.dataToPositionY.bind(this)},"normal",EU.Series);var $t=this._symbolMark;$t&&this.setMarkStyle($t,{"x":this.getRegionRectLeft.bind(this),"y":this.dataToPositionY.bind(this),"fill":this.getColorAttribute()},"normal",EU.Series)},i.prototype.dataToGridBackgroundPositionY=function(nt){if(!this._yAxisHelper)return Number.NaN;var at=this._yAxisHelper,lt=at.dataToPosition,Rt=at.getBandwidth;return lt(this.getDatumPositionValues(nt,this._fieldY),{"bandPosition":this._bandPosition})-Rt(0)/2},i.prototype.dataToGridBackgroundPositionY1=function(nt){if(!this._yAxisHelper)return Number.NaN;var at=this._yAxisHelper,lt=at.dataToPosition,Rt=at.getBandwidth;return lt(this.getDatumPositionValues(nt,this._fieldY),{"bandPosition":this._bandPosition})+Rt(0)/2},i.prototype.dataToOpacity=function(nt){var at,lt,Rt,Bt;if(!this._xAxisHelper)return Number.NaN;var Lt=this._xAxisHelper,Ht=Lt.dataToPosition,jt=Lt.getScale;return Ht(this.getDatumPositionValues(nt,this._fieldX),{"bandPosition":this._bandPosition})<jt(0).range()[0]||Ht(this.getDatumPositionValues(nt,this._fieldX),{"bandPosition":this._bandPosition})>jt(0).range()[1]?0:null!==(Bt=null===(Rt=null===(lt=null===(at=this._theme)||void 0===at?void 0:at.dot)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.fillOpacity)&&void 0!==Bt?Bt:1},i.prototype.dataToGridBackgroundOpacity=function(nt){return nt[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0},i.prototype.onLayoutEnd=function(nt){var lt,Rt;at.prototype.onLayoutEnd.call(this,nt);var Bt=null!==(Rt=null===(lt=this._spec)||void 0===lt?void 0:lt.leftAppendPadding)&&void 0!==Rt?Rt:0;this.setMarkStyle(this._clipMark,{"width":this.getLayoutRect().width+Bt},"normal",EU.Series)},i.prototype.getDefaultColorDomain=function(){var nt,at;return this._seriesGroupField?null===(nt=this.getViewDataStatistics())||void 0===nt?void 0:nt.latestData[this._seriesGroupField].values:this._seriesField?null===(at=this.getViewDataStatistics())||void 0===at?void 0:at.latestData[this._seriesField].values:[]},i.prototype.getColorAttribute=function(){var nt,at,lt;return{"scale":null!==(nt=this._option.globalScale.getScale("color"))&&void 0!==nt?nt:this._getDefaultColorScale(),"field":null!==(lt=null!==(at=this._seriesGroupField)&&void 0!==at?at:this._seriesField)&&void 0!==lt?lt:qz}},i.prototype.getDotColorScale=function(){var nt,at,lt,Rt=this._dotTypeField?null===(nt=this.getViewDataStatistics())||void 0===nt?void 0:nt.latestData[this._dotTypeField].values:this._seriesGroupField?null===(at=this.getViewDataStatistics())||void 0===at?void 0:at.latestData[this._seriesGroupField].values:this._seriesField?null===(lt=this.getViewDataStatistics())||void 0===lt?void 0:lt.latestData[this._seriesField].values:[],Bt=this._getDataScheme();return(new AF).domain(Rt).range(Bt)},i.prototype.getDotColorAttribute=function(){var nt,at,lt,Rt;return{"scale":null!==(nt=this._option.globalScale.getScale("color"))&&void 0!==nt?nt:this.getDotColorScale(),"field":null!==(Rt=null!==(lt=null!==(at=this._dotTypeField)&&void 0!==at?at:this._seriesGroupField)&&void 0!==lt?lt:this._seriesField)&&void 0!==Rt?Rt:qz}},i.prototype.initTooltip=function(){this._tooltipHelper=new iJ(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)},i.prototype.onEvaluateEnd=function(nt){at.prototype.onEvaluateEnd.call(this,nt)},i.prototype.onMarkTreePositionUpdate=function(nt){var at=this;nt.forEach((function(nt){"group"===nt.type?at.onMarkTreePositionUpdate(nt.getMarks()):nt.updateLayoutState()}))},i.prototype.getDotData=function(){var nt;return null===(nt=this._dotMark)||void 0===nt?void 0:nt.getData()},i.prototype._getDataIdKey=function(){},i.prototype.getStackValueField=function(){return null},i.prototype.getActiveMarks=function(){return[this._dotMark]},i.type=nt.SeriesTypeEnum.dot,i.mark=aJ,i}(AX),OQ=function(){CX(),PZ(),sq(),oJ(),Tz.registerSeries(sJ.type,sJ)},uJ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.shapeTypeCallback=function(){return"square"},at}return S(e,nt),e.prototype.enableByType=function(nt){return"mark"===nt},e.prototype.getDefaultTitlePattern=function(nt){return{"key":"link info","value":"link info"}},e.prototype.getDefaultContentList=function(){return[{"key":"time","value":function(nt){return Ji.getInstance().timeFormat("%Y%m%d %H:%M",nt.from.split("_")[1])}},{"key":"type","value":function(nt){return nt.action_type}},{"key":"from","value":function(nt){return nt.from}},{"key":"to","value":function(nt){return nt.to}}]},e}(zY),dJ=A(A({},GY),((qQ={}).group={"name":"group","type":"group"},qQ.link={"name":"link","type":"rule"},qQ.arrow={"name":"arrow","type":"symbol"},qQ)),HQ=function(nt,at){var lt=at.infoKey,Rt=at.fields,Bt=at.linkData,Lt=at.dotData,Ht=Rt(),jt=Ht.fromField,$t=Ht.toField,Kt=Ht.xField,te=Ht.yField,ne=Bt(),re=Lt(),ae={};return re.forEach((function(nt){var at={};for(var Rt in nt)Rt!==lt&&(at[Rt]=nt[Rt]);var Bt=nt[lt];null==Bt||Bt.forEach((function(nt){ae[nt.node_name]=Object.assign({},at,nt)}))})),ne.forEach((function(nt){var at,lt,Rt,Bt;nt[jt+"_xField"]=null===(at=null==ae?void 0:ae[nt[jt]])||void 0===at?void 0:at[Kt],nt[jt+"_yField"]=null===(lt=null==ae?void 0:ae[nt[jt]])||void 0===lt?void 0:lt[te],nt[$t+"_xField"]=null===(Rt=null==ae?void 0:ae[nt[$t]])||void 0===Rt?void 0:Rt[Kt],nt[$t+"_yField"]=null===(Bt=null==ae?void 0:ae[nt[$t]])||void 0===Bt?void 0:Bt[te]})),ne},fJ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.link,lt}return S(i,at),i.prototype.getFromField=function(){return this._fromField},i.prototype.setFromField=function(nt){N(nt)&&(this._fromField=nt)},i.prototype.getToField=function(){return this._toField},i.prototype.setToField=function(nt){N(nt)&&(this._toField=nt)},i.prototype.getDotTypeField=function(){return this._dotTypeField},i.prototype.setDotTypeField=function(nt){N(nt)&&(this._dotTypeField=nt)},i.prototype.getDotSeriesSpec=function(){return this._dotSeriesSpec},i.prototype.setDotSeriesSpec=function(nt){N(nt)&&(this._dotSeriesSpec=nt)},i.prototype._getDotData=function(){var nt=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return nt?nt.getRawData().latestData:[]},i.prototype.initData=function(){var nt,lt=this;at.prototype.initData.call(this),GW(this._option.dataSet,"linkDotInfo",HQ),null===(nt=this.getViewData())||void 0===nt||nt.transform({"type":"linkDotInfo","options":{"infoKey":"dots","fields":function(){return{"fromField":lt._fromField,"toField":lt._toField,"xField":lt._dotSeriesSpec.xField,"yField":lt._dotSeriesSpec.yField}},"linkData":function(){return lt._rawData.latestData},"dotData":function(){return lt._getDotData()}},"level":vU.linkDotInfo},!1)},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)},i.prototype.initMark=function(){this._clipMark=this._createMark(i.mark.group),this._containerMark=this._createMark(i.mark.group,{"parent":this._clipMark}),this._linkMark=this._createMark(i.mark.link,{"skipBeforeLayouted":!1,"parent":this._containerMark}),this._arrowMark=this._createMark(i.mark.arrow,{"skipBeforeLayouted":!1,"isSeriesMark":!0,"parent":this._containerMark})},i.prototype.initMarkStyle=function(){var nt,at,lt,Rt,Bt=this,Lt=this._clipMark;Lt&&(this.setMarkStyle(Lt,{"x":-this._spec.leftAppendPadding,"y":0,"width":1e4,"height":this._spec.clipHeight},"normal",EU.Series),Lt.setMarkConfig({"interactive":!1,"clip":!0}));var Ht=this._containerMark;Ht&&(this.setMarkStyle(Ht,{"x":this._spec.leftAppendPadding,"width":this.getLayoutRect().width},"normal",EU.Series),Ht.setMarkConfig({"interactive":!1}));var jt=this._linkMark;jt&&this.setMarkStyle(jt,{"stroke":this.getColorAttribute(),"strokeOpacity":this.dataToOpacity.bind(this),"x":this.dataToPositionXFrom.bind(this),"y":this.dataToPositionYFrom.bind(this),"x1":this.dataToPositionXTo.bind(this),"y1":this.dataToPositionYTo.bind(this)},"normal",EU.Series);var $t=this._arrowMark;if($t){var Kt=null!==(Rt=null===(lt=null===(at=null===(nt=this._theme)||void 0===nt?void 0:nt.arrow)||void 0===at?void 0:at.style)||void 0===lt?void 0:lt.size)&&void 0!==Rt?Rt:10;this.setMarkStyle($t,{"x":this.dataToPositionXTo.bind(this),"y":function(nt){return Bt.dataToPositionArrowYTo(nt,Kt)},"fill":this.getColorAttribute(),"fillOpacity":this.dataToOpacity.bind(this),"size":Kt,"symbolType":function(nt){return Bt.isPositionYFromHigher(nt)?"triangleDown":"triangleUp"}},"normal",EU.Series)}},i.prototype.afterInitMark=function(){at.prototype.afterInitMark.call(this)},i.prototype.dataToPositionXFrom=function(nt){return this._xAxisHelper?(0,this._xAxisHelper.dataToPosition)(this.getDatumPositionValues(nt,this._fromField+"_xField"),{"bandPosition":this._bandPosition}):Number.NaN},i.prototype.dataToPositionYFrom=function(nt){return this._yAxisHelper?(0,this._yAxisHelper.dataToPosition)(this.getDatumPositionValues(nt,this._fromField+"_yField")):Number.NaN},i.prototype.dataToPositionXTo=function(nt){return this._xAxisHelper?(0,this._xAxisHelper.dataToPosition)(this.getDatumPositionValues(nt,this._toField+"_xField"),{"bandPosition":this._bandPosition}):Number.NaN},i.prototype.dataToPositionYTo=function(nt){return this._yAxisHelper?(0,this._yAxisHelper.dataToPosition)(this.getDatumPositionValues(nt,this._toField+"_yField"),{"bandPosition":this._bandPosition}):Number.NaN},i.prototype.dataToPositionArrowYTo=function(nt,at){if(!this._yAxisHelper)return Number.NaN;var lt=this._yAxisHelper.dataToPosition,Rt=this.isPositionYFromHigher(nt)?-at/2:at/2;return lt(this.getDatumPositionValues(nt,this._toField+"_yField"),{"bandPosition":this._bandPosition})+Rt},i.prototype.dataToOpacity=function(nt){return this.isPositionXOuterRange(nt,this._fromField+"_xField")||this.isPositionXOuterRange(nt,this._toField+"_xField")||nt[this._fromField]===nt[this._toField]?0:1},i.prototype.isPositionYFromHigher=function(nt){return this.dataToPositionYFrom(nt)<this.dataToPositionYTo(nt)},i.prototype.isPositionXOuterRange=function(nt,at){if(!this._xAxisHelper)return!1;var lt=this._xAxisHelper,Rt=lt.dataToPosition,Bt=lt.getScale;return Rt(this.getDatumPositionValues(nt,at),{"bandPosition":this._bandPosition})<Bt(0).range()[0]||Rt(this.getDatumPositionValues(nt,at),{"bandPosition":this._bandPosition})>Bt(0).range()[1]},i.prototype.getDefaultColorDomain=function(){var nt,at;return this._dotTypeField?null===(nt=this.getViewDataStatistics())||void 0===nt?void 0:nt.latestData[this._dotTypeField].values:this._seriesField?null===(at=this.getViewDataStatistics())||void 0===at?void 0:at.latestData[this._seriesField].values:[]},i.prototype.getColorAttribute=function(){var nt,at,lt;return{"scale":null!==(nt=this._option.globalScale.getScale("color"))&&void 0!==nt?nt:this._getDefaultColorScale(),"field":null!==(lt=null!==(at=this._dotTypeField)&&void 0!==at?at:this._seriesField)&&void 0!==lt?lt:qz}},i.prototype.initInteraction=function(){var nt=[];this._linkMark&&nt.push(this._linkMark),this._arrowMark&&nt.push(this._arrowMark),this._parseInteractionConfig(nt)},i.prototype.initTooltip=function(){this._tooltipHelper=new uJ(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)},i.prototype.onMarkTreePositionUpdate=function(nt){var at=this;nt.forEach((function(nt){"group"===nt.type?at.onMarkTreePositionUpdate(nt.getMarks()):nt.updateLayoutState()}))},i.prototype.getDotInfoData=function(){var nt,at;return null===(at=null!==(nt=this._linkMark)&&void 0!==nt?nt:this._arrowMark)||void 0===at?void 0:at.getData()},i.prototype.getActiveMarks=function(){return[this._linkMark,this._arrowMark]},i.type=nt.SeriesTypeEnum.link,i.mark=dJ,i}(AX),NQ=function(){PZ(),CX(),_K(),gK(),Tz.registerSeries(fJ.type,fJ)},pJ=A(A({},GY),((KQ={}).group={"name":"group","type":"group"},KQ)),vJ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._arcGroupMark=null,at._getAngleValueStart=function(nt){var lt=at._getAngleAxis(),Rt=at._spec.tickMask;if((null==Rt?void 0:Rt.forceAlign)&&at._isTickMaskVisible(lt)){var Bt=nt[at.getStack()?Qz:SH],Lt=at._getAngleAxisSubTickData(lt),Ht=Lt[1].value-Lt[0].value,jt=Me(Rt.offsetAngle),$t=void 0;if(N(Bt)){var Kt=Ot(Lt,(function(nt){return nt.value-Bt})),te=Kt>=Lt.length||Bt>Lt[Kt].value-Ht/2?Math.min(Kt,Lt.length-1):Kt>0?Kt-1:void 0;void 0!==te&&($t=at.angleAxisHelper.dataToPosition([Lt[te].value-Ht/2]))}return j($t)&&($t=at.angleAxisHelper.dataToPosition([Lt[0].value-Ht/2])),$t+jt}return at._getAngleValueStartWithoutMask(nt)},at._getAngleValueEnd=function(nt){var lt=at._getAngleAxis(),Rt=at._spec.tickMask;if((null==Rt?void 0:Rt.forceAlign)&&at._isTickMaskVisible(lt)){var Bt=nt[at.getStack()?Jz:at._angleField[0]],Lt=at._getAngleAxisSubTickData(lt),Ht=Lt[1].value-Lt[0].value,jt=Me(Rt.offsetAngle),$t=Ot(Lt,(function(nt){return nt.value-Bt})),Kt=$t>=Lt.length||Bt>Lt[$t].value-Ht/2?Math.min($t,Lt.length-1):$t>0?$t-1:void 0;return(void 0!==Kt?at.angleAxisHelper.dataToPosition([Lt[Kt].value+Ht/2]):at.angleAxisHelper.dataToPosition([Lt[0].value-Ht/2]))+jt}return at._getAngleValueEndWithoutMask(nt)},at}return S(e,nt),e.prototype.setAttrFromSpec=function(){var at,lt,Rt;nt.prototype.setAttrFromSpec.call(this);var Bt=null===(at=this._option.globalInstance.getChart())||void 0===at?void 0:at.getSpec(),Lt=null!==(lt=this._spec.startAngle)&&void 0!==lt?lt:null==Bt?void 0:Bt.startAngle;this._startAngle=N(Lt)?Me(Lt):UF;var Ht=null!==(Rt=this._spec.endAngle)&&void 0!==Rt?Rt:null==Bt?void 0:Bt.endAngle;this._endAngle=N(Ht)?Me(Ht):XF,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()},e.prototype.getStackGroupFields=function(){return this._radiusField},e.prototype.getStackValueField=function(){var nt;return null===(nt=this._angleField)||void 0===nt?void 0:nt[0]},e.prototype.getGroupFields=function(){return this._angleField},e.prototype._convertMarkStyle=function(at){var lt=nt.prototype._convertMarkStyle.call(this,at),Rt="fill";if(lt[Rt]){var Bt=at[Rt];"conical"!==(null==Bt?void 0:Bt.gradient)||N(null==Bt?void 0:Bt.startAngle)||N(null==Bt?void 0:Bt.endAngle)||(lt[Rt]=A(A({},Bt),{"startAngle":this._startAngle,"endAngle":this._endAngle}))}return lt},e.prototype._getAngleValueStartWithoutMask=function(nt){if(this.getStack()){var at=uF(this.angleAxisHelper.dataToPosition([nt[Qz]]),this.angleAxisHelper.getScale(0));if(Q(at))return at}return this._startAngle},e.prototype._getAngleValueEndWithoutMask=function(nt){if(this.getStack()){var at=uF(this.angleAxisHelper.dataToPosition([nt[Jz]]),this.angleAxisHelper.getScale(0));if(Q(at))return at}return this.angleAxisHelper.dataToPosition([nt[this._angleField[0]]])},e.prototype.getDimensionField=function(){return this._specRadiusField},e.prototype.getMeasureField=function(){return this._specAngleField},e.prototype.initMark=function(){this._initArcGroupMark()},e.prototype.initMarkStyle=function(){this._initArcGroupMarkStyle()},e.prototype._initArcGroupMark=function(){return this._arcGroupMark=this._createMark(e.mark.group,{"skipBeforeLayouted":!1}),this._arcGroupMark},e.prototype._initArcGroupMarkStyle=function(){var nt=this,at=this._arcGroupMark;at.created(),this.setMarkStyle(at,{"x":0,"y":0},"normal",EU.Series),this._arcGroupMark.setMarkConfig({"interactive":!1,"zIndex":this.layoutZIndex,"clip":!0,"clipPath":function(){var at=nt._getAngleAxis();if(nt._isTickMaskVisible(at)){var lt=nt._spec.tickMask,Rt=lt.angle,Bt=lt.offsetAngle,Lt=lt.style,Ht=void 0===Lt?{}:Lt,jt=nt._getAngleAxisSubTickData(at),$t=nt.angleAxisHelper.center(),Kt=$t.x,te=$t.y,ne=nt._computeLayoutRadius(),re=Ht;return jt.map((function(at){var lt=at.value,Lt=nt.angleAxisHelper.dataToPosition([lt])+Me(Bt),Ht=Me(Rt)/2;return yy(A(A({},re),{"x":Kt,"y":te,"startAngle":Lt-Ht,"endAngle":Lt+Ht,"innerRadius":ne*nt._innerRadius,"outerRadius":ne*nt._outerRadius,"fill":!0}))}))}var ae=nt.getLayoutRect();return[Wg({"width":ae.width,"height":ae.height,"fill":!0})]}})},e.prototype._getAngleAxis=function(){if(this.angleAxisHelper){var nt=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find((function(at){return at.id===nt}))}},e.prototype._getAngleAxisTickData=function(nt){var at;return null===(at=null==nt?void 0:nt.getTickData())||void 0===at?void 0:at.getLatestData()},e.prototype._isTickMaskVisible=function(nt){var at=this._getAngleAxisTickData(nt),lt=this._spec.tickMask;return lt&&!1!==lt.visible&&(null==at?void 0:at.length)>1},e.prototype._getAngleAxisSubTickData=function(nt){var at,lt=this._getAngleAxisTickData(nt),Rt=[],Bt=null!==(at=null==nt?void 0:nt.getSpec())&&void 0!==at?at:{},Lt=Bt.subTick,Ht=void 0===Lt?{}:Lt,jt=Bt.tick,$t=void 0===jt?{}:jt,Kt=Ht.tickCount,te=void 0===Kt?4:Kt,ne=$t.alignWithLabel;if((null==lt?void 0:lt.length)>=2){for(var re=lt[1].value-lt[0].value,ae=0;ae<lt.length-1;ae++){var oe=lt[ae],se=lt[ae+1];Rt.push(oe);for(var le=0;le<te;le++){var ue=(le+1)/(te+1),ce=(1-ue)*oe.value+ue*(se?se.value:ne?1:oe.value+re);Rt.push({"value":ce})}}return Rt.push(lt[lt.length-1]),Rt}return lt},e.mark=pJ,e}(eQ),gJ=A(A({},pJ),((tJ={}).track={"name":"track","type":"arc"},tJ.progress={"name":"progress","type":"arc"},tJ)),yJ={"type":"fadeIn"};function YQ(nt,at){return"fadeIn"===at?yJ:function(nt){return{"type":"growAngleIn","options":{"overall":nt.startAngle}}}(nt)}var XQ=function(){Tz.registerAnimation("circularProgress",(function(nt,at){return{"appear":YQ(nt,at),"enter":{"type":"growAngleIn"},"disappear":{"type":"growAngleOut"}}}))},_J=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!0,at}return S(e,nt),e}(xX),xJ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.circularProgress,lt.transformerConstructor=_J,lt._progressMark=null,lt._trackMark=null,lt._getRadiusValueStart=function(nt){if(lt.getGroupFields().length>1){var at=lt.radiusAxisHelper.dataToPosition(lt.getDatumPositionValues(nt,lt.getGroupFields()));if(Q(at))return at}return lt.radiusAxisHelper.dataToPosition([nt[lt._radiusField[0]]])},lt._getRadiusValueEnd=function(nt){var at,Rt;if(lt.getGroupFields().length>1){var Bt=lt.radiusAxisHelper.dataToPosition(lt.getDatumPositionValues(nt,lt.getGroupFields()))+(null===(Rt=(at=lt.radiusAxisHelper).getBandwidth)||void 0===Rt?void 0:Rt.call(at,lt._groups?lt._groups.fields.length-1:0));if(Q(Bt))return Bt}return lt.radiusAxisHelper.dataToPosition([nt[lt._radiusField[0]]])+lt.radiusAxisHelper.getScale(0).step()},lt}return S(i,at),i.prototype.getStackGroupFields=function(){return this.getGroupFields()},i.prototype.getGroupFields=function(){return this._radiusField},i.prototype.initMark=function(){at.prototype.initMark.call(this),this._initTrackMark(),this._initProgressMark()},i.prototype.initMarkStyle=function(){at.prototype.initMarkStyle.call(this),this._initTrackMarkStyle(),this._initProgressMarkStyle()},i.prototype._initProgressMark=function(){var nt,at;return this._progressMark=this._createMark(i.mark.progress,{"parent":this._arcGroupMark,"isSeriesMark":!0,"stateSort":null===(nt=this._spec.progress)||void 0===nt?void 0:nt.stateSort},{"morph":lX(this._spec,"progress"),"setCustomizedShape":null===(at=this._spec.progress)||void 0===at?void 0:at.customShape}),this._progressMark},i.prototype._initProgressMarkStyle=function(){var nt,at=this,lt=this._progressMark;lt&&this.setMarkStyle(lt,{"x":function(){return at.angleAxisHelper.center().x},"y":function(){return at.angleAxisHelper.center().y},"startAngle":this._getAngleValueStart,"endAngle":this._getAngleValueEnd,"innerRadius":this._getRadiusValueStart,"outerRadius":this._getRadiusValueEnd,"cap":null!==(nt=this._spec.roundCap)&&void 0!==nt&&nt,"boundsMode":"imprecise","cornerRadius":this._spec.cornerRadius,"fill":this.getColorAttribute(),"zIndex":200,"forceShowCap":!0},"normal",EU.Series)},i.prototype.initInteraction=function(){var nt=[];this._trackMark&&nt.push(this._trackMark),this._progressMark&&nt.push(this._progressMark),this._parseInteractionConfig(nt)},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)},i.prototype._initTrackMark=function(){var nt,at;return this._trackMark=this._createMark(i.mark.track,{"parent":this._arcGroupMark,"stateSort":null===(nt=this._spec.track)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.track)||void 0===at?void 0:at.customShape}),this._trackMark.setMarkConfig({"morph":!1,"morphKey":null,"morphElementKey":null}),this._trackMark},i.prototype._initTrackMarkStyle=function(){var nt=this,at=this._trackMark;at&&this.setMarkStyle(at,{"visible":function(at){var lt=nt.angleAxisHelper.getScale(0).range(),Rt=Math.min(lt[0],lt[lt.length-1]),Bt=nt._getAngleValueStartWithoutMask(at);return Math.abs(Bt-Rt)<=1e-14},"x":function(){return nt.angleAxisHelper.center().x},"y":function(){return nt.angleAxisHelper.center().y},"startAngle":function(){var at,lt=nt.getStack()?Qz:nt._angleField[0],Rt=nt.angleAxisHelper.getScale(0).domain();return nt._getAngleValueStart(((at={})[lt]=Rt[0],at))},"endAngle":function(){var at,lt=nt.getStack()?Jz:nt._angleField[0],Rt=nt.angleAxisHelper.getScale(0).domain();return nt._getAngleValueEnd(((at={})[lt]=Rt[Rt.length-1],at))},"innerRadius":this._getRadiusValueStart,"outerRadius":this._getRadiusValueEnd,"cornerRadius":this._spec.cornerRadius,"fill":this.getColorAttribute(),"zIndex":100},"normal",EU.Series)},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._progressMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("circularProgress"))||void 0===lt?void 0:lt({"startAngle":this._startAngle},Bt),aX("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("fadeInOut"))||void 0===Rt?void 0:Rt(),aX("track",this._spec,this._markAttributeContext)))},i.prototype.getActiveMarks=function(){return[this._progressMark]},i.type=nt.SeriesTypeEnum.circularProgress,i.mark=gJ,i.transformerConstructor=_J,i}(vJ),ZQ=function(){Tz.registerSeries(xJ.type,xJ),jJ(),XQ(),ZY(),fQ(),dQ()};function JQ(nt){return function(){return"vertical"===nt.direction?{"orient":"negative"}:{"orient":"positive"}}}var QQ=function(nt){return{"type":"horizontal"===nt.direction?"growWidthOut":"growHeightOut","options":JQ(nt)}},kJ={"type":"fadeIn"};function t$(nt,at){return!1===at?{}:"fadeIn"===at?kJ:function(nt){return{"type":"horizontal"===nt.direction?"growWidthIn":"growHeightIn","options":JQ(nt)}}(nt)}var SJ,wJ,RJ=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.enableByType=function(nt){return"dimension"!==nt},e}(zY),OJ=A(A({},GY),((SJ={}).track={"name":"track","type":"rect"},SJ.progress={"name":"progress","type":"rect"},SJ.group={"name":"group","type":"group"},SJ)),FJ=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.linearProgress,lt._progressMark=null,lt._trackMark=null,lt._defaultProgressCustomShape=function(nt,at,Rt){var Bt,Lt,Ht=null===(Bt=lt._spec)||void 0===Bt?void 0:Bt.cornerRadius,jt=N(at.width)?at.width:at.x1-at.x,$t=N(at.height)?at.height:at.y1-at.y,Kt=Math.min(0,jt),te=Math.max(0,jt),ne=Math.min(0,$t),re=Math.max(0,$t);if(Ht>0){var ae=Ht;if("vertical"===(null===(Lt=lt._spec)||void 0===Lt?void 0:Lt.direction)){if(2*(ae=Math.min(Math.abs(jt/2),Ht))>Math.abs($t)){var oe=Math.acos((ae-Math.abs($t)/2)/ae);return Rt.moveTo(Kt+ae,ne),Rt.arc(Kt+ae,ne+ae,ae,1.5*Math.PI,1.5*Math.PI-oe,!0),Rt.arc(Kt+ae,re-ae,ae,oe+Math.PI/2,Math.PI/2,!0),Rt.lineTo(te-Ht,re),Rt.arc(te-ae,re-ae,ae,Math.PI/2,Math.PI/2-oe,!0),Rt.arc(te-ae,ne+ae,ae,-Math.PI/2+oe,-Math.PI/2,!0),Rt.lineTo(Kt+ae,ne),Rt.closePath(),Rt}}else if(2*(ae=Math.min(Math.abs($t/2),Ht))>Math.abs(jt))return oe=Math.acos((ae-Math.abs(jt)/2)/ae),Rt.moveTo(Kt,ne+ae),Rt.arc(Kt+ae,ne+ae,ae,Math.PI,Math.PI+oe),Rt.arc(te-ae,ne+ae,ae,-oe,0),Rt.lineTo(te,re-ae),Rt.arc(te-ae,re-ae,ae,0,oe),Rt.arc(Kt+ae,re-ae,ae,Math.PI-oe,Math.PI),Rt.closePath(),Rt;Rt.moveTo(Kt,ne+ae),Rt.arc(Kt+ae,ne+ae,ae,Math.PI,1.5*Math.PI),Rt.lineTo(te-ae,ne),Rt.arc(te-ae,ne+ae,ae,-Math.PI/2,0),Rt.lineTo(te,re-ae),Rt.arc(te-ae,re-ae,ae,0,Math.PI/2),Rt.lineTo(Kt+ae,re),Rt.arc(Kt+ae,re-ae,ae,Math.PI/2,Math.PI),Rt.closePath()}else Rt.moveTo(Kt,ne),Rt.lineTo(te,ne),Rt.lineTo(te,re),Rt.lineTo(Kt,re),Rt.closePath();return Rt},lt}return S(i,at),i.prototype.initMark=function(){this._initTrackMark(),this._initProgressMark()},i.prototype.initMarkStyle=function(){this._initTrackMarkStyle(),this._initProgressMarkStyle()},i.prototype._initProgressMark=function(){var nt,at,lt;return this._progressMark=this._createMark(i.mark.progress,{"isSeriesMark":!0,"stateSort":null===(nt=this._spec.progress)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null!==(lt=null===(at=this._spec.progress)||void 0===at?void 0:at.customShape)&&void 0!==lt?lt:this._defaultProgressCustomShape}),this._progressMark},i.prototype._initProgressMarkStyle=function(){var nt,at,lt,Rt,Bt=this,Lt=this._progressMark;if(Lt)if("vertical"===this._spec.direction){var Ht=null!==(nt=($t=this._spec.progress||{}).leftPadding)&&void 0!==nt?nt:0,jt=null!==(at=$t.rightPadding)&&void 0!==at?at:0;this.setMarkStyle(Lt,{"x":function(nt){var at,lt;return uF(Bt.dataToPositionX(nt),null===(lt=null===(at=Bt._xAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0),!0)-Bt._spec.bandWidth/2+Ht},"y1":function(nt){var at,lt;return uF(Bt.dataToPositionY(nt),null===(lt=null===(at=Bt._yAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0))},"y":function(){var nt;return null===(nt=Bt._yAxisHelper)||void 0===nt?void 0:nt.dataToPosition([0],{"bandPosition":Bt._bandPosition})},"width":this._spec.bandWidth-Ht-jt,"cornerRadius":this._spec.cornerRadius,"fill":this.getColorAttribute()},"normal",EU.Series)}else{var $t,Kt=null!==(lt=($t=this._spec.progress||{}).topPadding)&&void 0!==lt?lt:0,te=null!==(Rt=$t.bottomPadding)&&void 0!==Rt?Rt:0;this.setMarkStyle(Lt,{"x1":function(nt){var at,lt;return uF(Bt.dataToPositionX(nt),null===(lt=null===(at=Bt._xAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0))},"y":function(nt){var at,lt;return uF(Bt.dataToPositionY(nt),null===(lt=null===(at=Bt._yAxisHelper)||void 0===at?void 0:at.getScale)||void 0===lt?void 0:lt.call(at,0),!0)-Bt._spec.bandWidth/2+Kt},"height":this._spec.bandWidth-Kt-te,"x":function(){var nt;return null===(nt=Bt._xAxisHelper)||void 0===nt?void 0:nt.dataToPosition([0],{"bandPosition":Bt._bandPosition})},"cornerRadius":this._spec.cornerRadius,"fill":this.getColorAttribute()},"normal",EU.Series)}},i.prototype._initTrackMark=function(){var nt,at;return this._trackMark=this._createMark(i.mark.track,{"stateSort":null===(nt=this._spec.track)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.track)||void 0===at?void 0:at.customShape}),this._trackMark},i.prototype._initTrackMarkStyle=function(){var nt=this,at=this._trackMark;at&&("vertical"===this._spec.direction?this.setMarkStyle(at,{"x":function(at){var lt,Rt;return uF(nt.dataToPositionX(at),null===(Rt=null===(lt=nt._xAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0),!0)-nt._spec.bandWidth/2},"y":0,"width":this._spec.bandWidth,"height":function(){return nt._scaleY.range()[0]},"cornerRadius":this._spec.cornerRadius},"normal",EU.Series):this.setMarkStyle(at,{"x":0,"y":function(at){var lt,Rt;return uF(nt.dataToPositionY(at),null===(Rt=null===(lt=nt._yAxisHelper)||void 0===lt?void 0:lt.getScale)||void 0===Rt?void 0:Rt.call(lt,0),!0)-nt._spec.bandWidth/2},"height":this._spec.bandWidth,"width":function(){return nt._scaleX.range()[1]},"cornerRadius":this._spec.cornerRadius},"normal",EU.Series))},i.prototype.initInteraction=function(){var nt=[];this._trackMark&&nt.push(this._trackMark),this._progressMark&&nt.push(this._progressMark),this._parseInteractionConfig(nt)},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt={"direction":this.direction},Lt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._progressMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("linearProgress"))||void 0===lt?void 0:lt(Bt,Lt),aX("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("fadeInOut"))||void 0===Rt?void 0:Rt(),aX("track",this._spec,this._markAttributeContext)))},i.prototype.initTooltip=function(){this._tooltipHelper=new RJ(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)},i.prototype.getActiveMarks=function(){return[this._progressMark]},i.type=nt.SeriesTypeEnum.linearProgress,i.mark=OJ,i}(AX),o$=function(){sq(),Tz.registerAnimation("linearProgress",(function(nt,at){return{"appear":t$(nt,at),"enter":{"type":"grow"},"disappear":QQ(nt)}})),ZY(),Tz.registerSeries(FJ.type,FJ)},zJ=[0],HJ=[20,40],NJ=[200,500],VJ={"shrink":!1,"enlarge":!1,"fontSizeLimitMin":0},WJ=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"],GJ="".concat(OF,"_WORD_CLOUD_TEXT"),YJ=A(A({},GY),((wJ={}).word={"name":"word","type":"text"},wJ.fillingWord={"name":"fillingWord","type":"text"},wJ.wordMask={"name":"wordMask","type":"rect"},wJ)),XJ=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._fontSizeRange=[20,20],at._isWordCloudShape=!1,at._dataChange=!0,at.handleMaskCanvasUpdate=function(nt,lt){at._maskCanvas=nt},at.getWordColor=function(nt){return nt.isFillingWord?(at._fillingColorCallback&&!at._dataChange||(at._fillingColorCallback=at._wordCloudShapeConfig.fillingColorHexField?function(nt){return nt[at._wordCloudShapeConfig.fillingColorHexField]}:at.initColorCallback(at._wordCloudShapeConfig.fillingSeriesField,!0)),at._fillingColorCallback(nt)):(at._keyWordColorCallback&&!at._dataChange||(at._keyWordColorCallback=at._spec.colorHexField?function(nt){return nt[at._spec.colorHexField]}:at.initColorCallback(at._seriesField,!1)),at._keyWordColorCallback(nt))},at._calculateFontWeight=function(nt){var lt=at.getRawDataStatisticsByField(at._valueField,!0);return lt.min===lt.max?at._fontWeightRange[0]:at._fontWeightRange[0]+(at._fontWeightRange[at._fontWeightRange.length-1]-at._fontWeightRange[0])*(nt[at._valueField]-lt.min)/(lt.max-lt.min)},at}return S(e,nt),e.prototype.setValueField=function(nt){N(nt)&&(this._valueField=nt)},e.prototype.setFontSizeRange=function(nt){N(nt)?this._fontSizeRange=nt:this._fontSizeRange=HJ},e.prototype.setAttrFromSpec=function(){var at,lt,Rt,Bt,Lt;nt.prototype.setAttrFromSpec.call(this),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._colorMode=null!==(at=this._spec.colorMode)&&void 0!==at?at:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=null!==(lt=this._spec.fontWeightRange)&&void 0!==lt?lt:NJ,this._rotateAngles=null!==(Rt=this._spec.rotateAngles)&&void 0!==Rt?Rt:zJ,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=null!==(Bt=this._spec.maskShape)&&void 0!==Bt?Bt:"circle",this._textField=(null===(Lt=this._spec.word)||void 0===Lt?void 0:Lt.formatMethod)?GJ:this._nameField;var Ht=this._spec.wordCloudConfig;this._wordCloudConfig=A({"drawOutOfBound":"hidden","layoutMode":"default","zoomToFit":VJ},this._spec.wordCloudConfig),Ht&&!j(Ht.layoutMode)||Fk(this._option.mode)||(this._wordCloudConfig.layoutMode="fast"),this._wordCloudShapeConfig=A({"fillingSeriesField":this.getSeriesField(),"fillingRotateAngles":zJ,"layoutMode":"default"},this._spec.wordCloudShapeConfig),this._isWordCloudShape=!WJ.includes(this._maskShape)&&!["fast","grid","cloud"].includes(this._wordCloudConfig.layoutMode),this._defaultFontFamily=this._option.getTheme().fontFamily},e.prototype.initData=function(){var at,lt,Rt=this;nt.prototype.initData.call(this),null===(lt=null===(at=this.getViewData())||void 0===at?void 0:at.target)||void 0===lt||lt.addListener("change",(function(){Rt._dataChange=!0,Rt.compile()}))},e.prototype.initMark=function(){var nt;(null===(nt=this._spec.wordMask)||void 0===nt?void 0:nt.visible)&&(this._maskMark=this._createMark(e.mark.wordMask,{"dataView":!1})),this._wordMark=this._createMark(e.mark.word,{"key":$z,"groupKey":this._seriesField,"isSeriesMark":!0},{"morphElementKey":this._seriesField})},e.prototype.initMarkStyle=function(){var nt=this;this.initMarkStyleOfWord(this._wordMark,this._spec.word,this._spec.colorHexField,this._seriesField),this._maskMark&&this.setMarkStyle(this._maskMark,{"width":function(){return nt._region.getLayoutRect().width},"height":function(){return nt._region.getLayoutRect().height},"background":function(){return nt._maskCanvas}},"normal",EU.Series)},e.prototype.initMarkStyleOfWord=function(nt,at,lt,Rt,Bt){var Lt,Ht,jt=this;nt&&(this.setMarkStyle(nt,{"text":(null==at?void 0:at.formatMethod)?function(nt){return at.formatMethod(nt)}:function(nt){return nt[jt._textField]},"x":function(nt){return nt.x},"y":function(nt){return nt.y},"fontSize":function(nt){return nt.fontSize},"fontStyle":function(nt){return nt.fontStyle},"angle":function(nt){return nt.angle},"visible":function(nt){return nt.visible}},"normal",EU.Series),this.setMarkStyle(nt,{"fill":null!==(Ht=null===(Lt=null==at?void 0:at.style)||void 0===Lt?void 0:Lt.fill)&&void 0!==Ht?Ht:this.getWordColor,"fontWeight":function(nt){return nt.fontWeight},"fontFamily":function(nt){return nt.fontFamily}},"normal",EU.User_Mark))},e.prototype.initTooltip=function(){nt.prototype.initTooltip.call(this),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)},e.prototype.initAnimation=function(){var nt=this;[this._wordMark].forEach((function(at){var lt,Rt;if(at){var Bt=null===(Rt=null===(lt=nt._spec)||void 0===lt?void 0:lt.animationAppear)||void 0===Rt?void 0:Rt.preset,Lt={"animationConfig":function(){var nt,lt;return null===(lt=null===(nt=at.getAnimationConfig())||void 0===nt?void 0:nt.appear)||void 0===lt?void 0:lt[0]}};at.setAnimationConfig(rX(Tz.getAnimationInKey("wordCloud")(Lt,Bt),aX("word",nt._spec,nt._markAttributeContext)))}}))},e.prototype.getWordOrdinalColorScale=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt=at?this._wordCloudShapeConfig.fillingColorList:this._colorList,$t=nt?null===(lt=this.getViewData())||void 0===lt?void 0:lt.latestData.map((function(at){return at[nt]})):[],Kt=null!==(Bt=null!=jt?jt:null===(Rt=this._option.globalScale.getScale("color"))||void 0===Rt?void 0:Rt.range())&&void 0!==Bt?Bt:this._getDataScheme();return null===(Ht=(Lt=(new AF).domain($t)).range)||void 0===Ht?void 0:Ht.call(Lt,Kt)},e.prototype.initColorCallback=function(nt,at){var lt,Rt,Bt,Lt,Ht=this;if("ordinal"===this._colorMode){var jt=this.getWordOrdinalColorScale(nt,at);return function(at){return jt.scale(at[null!=nt?nt:qz])}}var $t=null!==(lt=at?this._colorList:this._wordCloudShapeConfig.fillingColorList)&&void 0!==lt?lt:this._option.globalScale.getScale("color").range();if(1===$t.length)return function(nt){return $t[0]};if(this._valueField){var Kt=this.getRawDataStatisticsByField(this._valueField,!0);if(Kt.min===Kt.max)return $t[0];var te=(new EB).domain([Kt.min,Kt.max]).range($t);return function(nt){return te.scale(nt[Ht._valueField])}}var ne=(new EB).domain([0,null!==(Lt=null===(Bt=null===(Rt=this.getViewData())||void 0===Rt?void 0:Rt.latestData)||void 0===Bt?void 0:Bt.length)&&void 0!==Lt?Lt:1]).range($t);return function(nt){return ne.scale(nt[Xz])}},e.prototype.compile=function(){nt.prototype.compile.call(this);var at=this._region.getLayoutRect(),lt=at.width,Rt=at.height;if(Q(lt)&&Q(Rt)&&Rt>0&&lt>0){var Bt=this._wordMark.getProduct();if(Bt){var Lt=[];this._isWordCloudShape?Lt.push(A({"type":"wordcloudShape"},this._wordCloudShapeTransformOption())):Lt.push(A({"type":"wordcloud"},this._wordCloudTransformOption())),Bt.transform(Lt)}}},e.prototype._getCommonTransformOptions=function(){var nt,at,lt,Rt,Bt,Lt,Ht=this._region.getLayoutRect(),jt=Ht.width,$t=Ht.height,Kt=null!==(nt=this._spec.word)&&void 0!==nt?nt:{},te=null!==(at=Kt.style)&&void 0!==at?at:{};return{"size":[jt,$t],"shape":V(this._maskShape)&&"text"===this._maskShape.type&&j(this._maskShape.fontFamily)?A({"fontFamily":null===(lt=this._option.getTheme())||void 0===lt?void 0:lt.fontFamily},this._maskShape):this._maskShape,"onUpdateMaskCanvas":this.handleMaskCanvasUpdate,"dataIndexKey":$z,"text":Kt.formatMethod?function(nt){return Kt.formatMethod(nt)}:{"field":this._textField},"fontSize":this._valueField?{"field":this._valueField}:this._fontSizeRange[0],"fontSizeRange":"auto"===this._fontSizeRange?null:this._fontSizeRange,"padding":null!==(Bt=null===(Rt=this._spec.word)||void 0===Rt?void 0:Rt.padding)&&void 0!==Bt?Bt:1,"fontFamily":N(this._spec.fontFamilyField)?{"field":this._spec.fontFamilyField}:null!==(Lt=te.fontFamily)&&void 0!==Lt?Lt:this._defaultFontFamily,"fontWeight":N(this._spec.fontWeightField)?{"field":this._spec.fontWeightField}:N(te.fontWeight)?te.fontWeight:N(this._valueField)?this._calculateFontWeight:"normal","fontStyle":N(this._spec.fontStyleField)?{"field":this._spec.fontStyleField}:te.fontStyle}},e.prototype._wordCloudTransformOption=function(){var nt,at,lt=null!==(nt=this._wordCloudConfig)&&void 0!==nt?nt:{};return A(A(A({},lt),this._getCommonTransformOptions()),{"layoutType":this._wordCloudConfig.layoutMode,"rotate":this._rotateAngles,"randomVisible":null===(at=this._spec.random)||void 0===at||at,"clip":"clip"===this._wordCloudConfig.drawOutOfBound,"shrink":this._wordCloudConfig.zoomToFit.shrink,"enlarge":this._wordCloudConfig.zoomToFit.enlarge,"minFontSize":this._wordCloudConfig.zoomToFit.fontSizeLimitMin,"progressiveTime":this._wordCloudConfig.progressiveTime,"progressiveStep":this._wordCloudConfig.progressiveStep,"repeatFill":this._wordCloudConfig.zoomToFit.repeat})},e.prototype._wordCloudShapeTransformOption=function(){var nt,at,lt,Rt,Bt,Lt,Ht=null!==(at=null===(nt=this._spec.fillingWord)||void 0===nt?void 0:nt.style)&&void 0!==at?at:{},jt=null!==(lt=this._wordCloudShapeConfig)&&void 0!==lt?lt:{};return A(A(A({},jt),this._getCommonTransformOptions()),{"rotateList":this._rotateAngles,"fillingRotateList":jt.fillingRotateAngles,"fillingFontFamily":N(jt.fillingFontFamilyField)?{"field":jt.fillingFontFamilyField}:null!==(Rt=Ht.fontFamily)&&void 0!==Rt?Rt:this._defaultFontFamily,"fillingPadding":null!==(Lt=null===(Bt=this._spec.fillingWord)||void 0===Bt?void 0:Bt.padding)&&void 0!==Lt?Lt:1,"fillingFontStyle":N(jt.fillingFontStyleField)?{"field":jt.fillingFontStyleField}:Ht.fontStyle,"fillingFontWeight":N(jt.fillingFontWeightField)?{"field":jt.fillingFontWeightField}:Ht.fontWeight})},e.prototype.getStatisticFields=function(){var nt=[];return nt.push({"key":this._nameField,"operations":["values"]}),nt.push({"key":this._valueField,"operations":["max","min"]}),nt},e.prototype.dataToPosition=function(nt){return null},e.prototype.dataToPositionX=function(nt){return null},e.prototype.dataToPositionY=function(nt){return null},e.prototype.dataToPositionZ=function(nt){return null},e.prototype.valueToPosition=function(nt,at){return null},e.prototype.getGroupFields=function(){return[]},e.prototype.getStackGroupFields=function(){return[]},e.prototype.getStackValueField=function(){return""},e.prototype.onLayoutEnd=function(at){nt.prototype.onLayoutEnd.call(this,at),this.compile(),this._dataChange=!1},e.prototype.getActiveMarks=function(){return[this._wordMark]},e.prototype.reInit=function(){nt.prototype.reInit.call(this),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)},e.mark=YJ,e}(kX),v$=function(nt){return{"custom":Vd,"customParameters":function(at,lt){return nt},"easing":"linear","loop":1/0,"duration":6e3}};function g$(nt,at){return!1===at?{}:"fadeIn"===at?{"type":"fadeIn"}:function(nt){return{"channel":{"fontSize":{"from":0}},"duration":200,"delay":function(at,lt,Rt){var Bt=nt.animationConfig(),Lt=(null==Bt?void 0:Bt.duration)||200,Ht=(null==Bt?void 0:Bt.totalTime)||yX.appear.duration,jt=Rt.VGRAMMAR_ANIMATION_PARAMETERS.elementCount;return Rt.VGRAMMAR_ANIMATION_PARAMETERS.elementIndex*function(nt,at,lt){return nt*lt<at?nt+(at-lt*nt)/(lt-1):(at-nt)/(lt-1)}(Lt,Ht,jt)}}}(nt)}var y$=function(nt,at){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(at-nt)+nt).toFixed()+"%)"};function m$(nt){return H(nt)?nt:function(){return nt}}var qJ=o((function t(nt){var at,lt,Rt=this;switch(r(this,t),this.options=ft({},t.defaultOptions,nt),H(this.options.shape)?this.shape=this.options.shape:this.shape=oS(this.options.shape),this.getText=null!==(at=m$(this.options.text))&&void 0!==at?at:function(nt){return nt},this.getTextFontWeight=m$(this.options.fontWeight),this.getTextFontSize=m$(this.options.fontSize),this.getTextFontStyle=m$(this.options.fontStyle),this.getTextFontFamily=m$(this.options.fontFamily),this.outputCallback=null!==(lt=this.options.outputCallback)&&void 0!==lt?lt:function(nt){return nt},this.options.color){case"random-dark":this.getTextColor=function(){return y$(10,50)};break;case"random-light":this.getTextColor=function(){return y$(50,90)};break;default:this.getTextColor=m$(this.options.color)}if(j(this.options.rotate))if(this.options.useRandomRotate){var Bt=Math.abs(this.options.maxRotation-this.options.minRotation),Lt=Math.abs(Math.floor(this.options.rotationSteps)),Ht=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=function(){return 0===Rt.options.rotateRatio||Math.random()>Rt.options.rotateRatio?0:0===Bt?Ht:Lt>0?Ht+Math.floor(Math.random()*Lt)*Bt/(Lt-1):Ht+Math.random()*Bt}}else this.getTextRotate=function(){return 0};else this.getTextRotate=H(this.options.rotate)?function(nt){var at;return Me(null!==(at=Rt.options.rotate(nt))&&void 0!==at?at:0)}:function(nt,at){var lt=xt(Rt.options.rotate),Bt=Rt.options.random?Math.random():ie(at);return Me(lt[Math.floor(Bt*lt.length)])}}),[{"key":"canRepeat","value":function(){return!1}},{"key":"exceedTime","value":function(){var nt;return this.options.progressiveStep>0?this.progressiveIndex>=((null!==(nt=this.currentStepIndex)&&void 0!==nt?nt:-1)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&(new Date).getTime()-this.escapeTime>this.options.progressiveTime}},{"key":"progressiveRun","value":function(){var nt;if(this.options.progressiveStep>0?this.currentStepIndex=(null!==(nt=this.currentStepIndex)&&void 0!==nt?nt:-1)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex<this.data.length){this.progressiveResult=[];for(var at=this.progressiveIndex,lt=0,Rt=this.options.maxSingleWordTryCount,Bt=Math.min(this.options.maxFailCount,this.originalData.length);at<this.data.length&&this.failCount<Bt;){var Lt=this.layoutWord(at);if(lt++,(Lt||lt>Rt)&&(at++,lt=0,this.failCount=Lt?0:this.failCount+1),this.progressiveIndex=at,this.exceedTime())break;at===this.data.length&&this.failCount<Bt&&this.options.repeatFill&&this.canRepeat()&&(this.data=[].concat(m(this.data),m(this.originalData.map((function(nt){return Object.assign(Object.assign({},nt),{"isFill":!0})})))),this.isTryRepeatFill=!0)}return this.progressiveResult}return this.result}},{"key":"initProgressive","value":function(){this.failCount=0,this.progressiveIndex=0,this.options.progressiveStep>0?this.currentStepIndex=-1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}},{"key":"output","value":function(){return this.result?this.outputCallback(this.result):null}},{"key":"progressiveOutput","value":function(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}},{"key":"unfinished","value":function(){return this.data&&this.data.length&&!j(this.progressiveIndex)&&this.progressiveIndex<this.data.length}},{"key":"release","value":function(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}]);qJ.defaultOptions={"fontFamily":'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',"fontWeight":"normal","color":"random-dark","fontStyle":"normal","minFontSize":12,"drawOutOfBound":!1,"shrink":!1,"minRotation":-Math.PI/2,"maxRotation":Math.PI/2,"rotationSteps":0,"rotateRatio":.1,"random":!1,"shape":"circle","progressiveTime":0,"progressiveStep":0,"repeatFill":!1,"fillTextFontSize":12,"maxFailCount":20};var QJ={"archimedean":function(nt){var at=nt[0]/nt[1];return function(nt){return[at*(nt*=.1)*Math.cos(nt),nt*Math.sin(nt)]}},"rectangular":function(nt){var at=4*nt[0]/nt[1],lt=0,Rt=0;return function(nt){var Bt=nt<0?-1:1;switch(Math.sqrt(1+4*Bt*nt)-Bt&3){case 0:lt+=at;break;case 1:Rt+=4;break;case 2:lt-=at;break;default:Rt-=4}return[lt,Rt]}}},JJ=function(nt){function e(nt){var at,lt;return r(this,e),(at=n(this,e,[ft({},e.defaultOptions,nt)])).cw=64,at.ch=2048,at._size=[256,256],at._isBoardExpandCompleted=!1,at._placeStatus=0,at._tTemp=null,at._dtTemp=null,at._dy=0,at.cacheMap=new Map,at.options.minFontSize<=e.defaultOptions.minFontSize&&(at.options.minFontSize=e.defaultOptions.minFontSize),at.spiral=Y(at.options.spiral)?null!==(lt=QJ[at.options.spiral])&&void 0!==lt?lt:QJ.archimedean:at.options.spiral,at.random=at.options.random?Math.random:function(){return 1},at.getTextPadding=m$(at.options.padding),at}return h(e,nt),o(e,[{"key":"zoomRatio","value":function(){return this._originSize[0]/this._size[0]}},{"key":"dy","value":function(){return this._dy}},{"key":"layoutWord","value":function(nt){var at=this.data[nt];if(""===(""+at.text).trim())return!0;var lt=aS(this.options.shape,this._size),Rt=lt.maxRadius,Bt=lt.center;if(at.x=Bt[0],at.y=Bt[1],function(nt,at,lt,Rt,Bt,Lt){if(!at.sprite){var Ht=nt.context,jt=nt.ratio;Ht.setTransform(jt,0,0,jt,0,0),Ht.clearRect(0,0,(Bt<<5)/jt,Lt/jt);var $t,Kt,te,ne,re,ae=0,oe=0,se=0,le=lt.length;for(--Rt;++Rt<le;){if(at=lt[Rt],Ht.save(),Ht.font=at.fontStyle+" "+at.fontWeight+" "+~~((at.fontSize+1)/jt)+"px "+at.fontFamily,$t=Ht.measureText(at.text+"m").width*jt,te=at.fontSize<<1,at.angle){var ue=Math.sin(at.angle),ce=Math.cos(at.angle),he=$t*ce,de=$t*ue,fe=te*ce,pe=te*ue;$t=Math.max(Math.abs(he+pe),Math.abs(he-pe))+31>>5<<5,te=~~Math.max(Math.abs(de+fe),Math.abs(de-fe))}else $t=$t+31>>5<<5;if(te>se&&(se=te),ae+$t>=Bt<<5&&(ae=0,oe+=se,se=0),oe+te>=Lt)break;Ht.translate((ae+($t>>1))/jt,(oe+(te>>1))/jt),at.angle&&Ht.rotate(at.angle),Ht.fillText(at.text,0,0),at.padding&&(Ht.lineWidth=2*at.padding,Ht.strokeText(at.text,0,0)),Ht.restore(),at.width=$t,at.height=te,at.xoff=ae,at.yoff=oe,at.x1=$t>>1,at.y1=te>>1,at.x0=-at.x1,at.y0=-at.y1,at.hasText=!0,ae+=$t}for(var ve=Ht.getImageData(0,0,(Bt<<5)/jt,Lt/jt).data,Ae=[];--Rt>=0;)if((at=lt[Rt]).hasText){for(Kt=($t=at.width)>>5,te=at.y1-at.y0,ne=0;ne<te*Kt;ne++)Ae[ne]=0;if(null==(ae=at.xoff))return;oe=at.yoff;var we=0,Ce=-1;for(re=0;re<te;re++){for(ne=0;ne<$t;ne++){var je=Kt*re+(ne>>5),Ne=ve[(oe+re)*(Bt<<5)+(ae+ne)<<2]?1<<31-ne%32:0;Ae[je]|=Ne,we|=Ne}we?Ce=re:(at.y0++,te--,re--,oe++)}at.y1=at.y0+Ce,at.sprite=Ae.slice(0,(at.y1-at.y0)*Kt)}}}(this.contextAndRatio,at,this.data,nt,this.cw,this.ch),this._placeStatus=0,at.hasText&&this.place(this._board,at,this._bounds,Rt))return this.result.push(at),this._bounds?function(nt,at){var lt=nt[0],Rt=nt[1];at.x+at.x0<lt.x&&(lt.x=at.x+at.x0),at.y+at.y0<lt.y&&(lt.y=at.y+at.y0),at.x+at.x1>Rt.x&&(Rt.x=at.x+at.x1),at.y+at.y1>Rt.y&&(Rt.y=at.y+at.y1)}(this._bounds,at):this._bounds=[{"x":at.x+at.x0,"y":at.y+at.y0},{"x":at.x+at.x1,"y":at.y+at.y1}],at.x-=this._size[0]>>1,at.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(at.fontSize),at.hasText&&this.shouldShrinkContinue()){if(1===this._placeStatus){var Lt=at.fontSize*this._originSize[0]/this.options.minFontSize,Ht=Math.max(at.width,at.height);if(Ht<=Lt)this.expandBoard(this._board,this._bounds,Ht/this._size[0]);else{if(!this.options.clip)return!0;this.expandBoard(this._board,this._bounds,Lt/this._size[0])}}else this._placeStatus,this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(at.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}},{"key":"layout","value":function(nt,at){var lt=this;this.initProgressive(),this.result=[],this._size=[at.width,at.height],this.clearCache(),this._originSize=m(this._size);var Rt=this.getContext(ax.createCanvas({"width":1,"height":1}));this.contextAndRatio=Rt,this._board=new Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null,nt.length,this.result=[];var Bt=nt.map((function(nt,at){return{"text":lt.getText(nt),"fontFamily":lt.getTextFontFamily(nt),"fontStyle":lt.getTextFontStyle(nt),"fontWeight":lt.getTextFontWeight(nt),"angle":lt.getTextRotate(nt,at),"fontSize":~~lt.getTextFontSize(nt),"padding":lt.getTextPadding(nt),"xoff":0,"yoff":0,"x1":0,"y1":0,"x0":0,"y0":0,"hasText":!1,"sprite":null,"datum":nt,"x":0,"y":0,"width":0,"height":0}})).sort((function(nt,at){return at.fontSize-nt.fontSize}));if(this.originalData=Bt,this.data=Bt,this.progressiveRun(),!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){var Lt=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(Lt-this._originSize[1]/2)}return this.result}},{"key":"formatTagItem","value":function(nt){for(var at,lt,Rt=this._size,Bt=this.zoomRatio(),Lt=this.dy(),Ht=Rt[0]>>1,jt=Rt[1]>>1,$t=nt.length,Kt=[],te=0;te<$t;++te)at=nt[te],(lt={}).datum=at.datum,lt.x=(at.x+Ht)*Bt,lt.y=(at.y+jt+Lt)*Bt,lt.fontFamily=at.fontFamily,lt.fontSize=at.fontSize*Bt,lt.fontStyle=at.fontStyle,lt.fontWeight=at.fontWeight,lt.angle=at.angle,Kt.push(lt);return Kt}},{"key":"output","value":function(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}},{"key":"progressiveOutput","value":function(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}},{"key":"updateBoardExpandStatus","value":function(nt){this._isBoardExpandCompleted=nt*(this._originSize[0]/this._size[0])<this.options.minFontSize}},{"key":"shouldShrinkContinue","value":function(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}},{"key":"shrinkBoard","value":function(nt){var at=nt[0],lt=nt[1];if(!(lt.x>=this._size[0]||lt.y>=this._size[1])){var Rt=Math.min(at.x,this._size[0]-lt.x),Bt=Math.min(at.y,this._size[1]-lt.y),Lt=2*Math.min(Rt/this._size[0],Bt/this._size[1]);this._size=this._size.map((function(nt){return nt*(1-Lt)}))}}},{"key":"expandBoard","value":function(nt,at,lt){var Rt=this._size[0]*(lt||1.1)-this._size[0]>>5,Bt=2*Rt>2?Rt:2;Bt%2!=0&&Bt++;var Lt=Math.ceil(this._size[1]*(Bt<<5)/this._size[0]);Lt%2!=0&&Lt++;var Ht=this._size[0],jt=this._size[1],$t=new Array(Bt).fill(0),Kt=new Array(Lt/2*(Bt+(Ht>>5))).fill(0);this.insertZerosToArray(nt,jt*(Ht>>5),Kt.length+Bt/2);for(var te=jt-1;te>0;te--)this.insertZerosToArray(nt,te*(Ht>>5),$t.length);this.insertZerosToArray(nt,0,Kt.length+Bt/2),this._size=[Ht+(Bt<<5),jt+Lt],at&&(at[0].x+=(Bt<<5)/2,at[0].y+=Lt/2,at[1].x+=(Bt<<5)/2,at[1].y+=Lt/2)}},{"key":"insertZerosToArray","value":function(nt,at,lt){if(this.options.customInsertZerosToArray)return this.options.customInsertZerosToArray(nt,at,lt);for(var Rt=Math.floor(lt/6e4),Bt=lt%6e4,Lt=0;Lt<Rt;Lt++)nt.splice.apply(nt,[at+6e4*Lt,0].concat(m(new Array(6e4).fill(0))));nt.splice.apply(nt,[at+6e4*Rt,0].concat(m(new Array(Bt).fill(0))))}},{"key":"getContext","value":function(nt){nt.width=1,nt.height=1;var at=nt.getContext("2d",{"willReadFrequently":!0}).getImageData(0,0,1,1),lt=Math.sqrt(at.data.length>>2);nt.width=(this.cw<<5)/lt,nt.height=this.ch/lt;var Rt=nt.getContext("2d",{"willReadFrequently":!0});return Rt.fillStyle=Rt.strokeStyle="red",Rt.textAlign="center",{"context":Rt,"ratio":lt,"canvas":nt}}},{"key":"place","value":function(nt,at,lt,Rt){var Bt=!1;if(this.shouldShrinkContinue()&&(at.width>this._size[0]||at.height>this._size[1]))return this._placeStatus=1,!1;var Lt=this.random()<.5?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(at,Lt))return null;var Ht,jt,$t,Kt,te=at.x,ne=at.y,re=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),ae=this.spiral(this._size),oe=-Lt;for(this._tTemp=null,this._dtTemp=null;Ht=ae(oe+=Lt);){jt=Ht[0],$t=Ht[1];var se=Math.sqrt(Math.pow(jt,2)+Math.pow($t,2)),le=Math.atan($t/jt);jt<0?le+=Math.PI:$t<0&&(le=2*Math.PI+le);var ue=this.shape(le);if(Math.min(Math.abs(jt),Math.abs($t))>=re)break;if(se>=Rt)Bt&&null===this._tTemp&&(this._tTemp=oe,this._dtTemp=Lt);else{if(at.x=te+~~(se*ue*Math.cos(-le)),at.y=ne+~~(se*ue*Math.sin(-le)),Kt=at,this.options.clip)if(this.shouldShrinkContinue()){if(w$(Kt,this._size)){Bt&&null===this._tTemp&&(this._tTemp=oe,this._dtTemp=Lt);continue}}else{if(A$(Kt,this._size)){Bt&&null===this._tTemp&&(this._tTemp=oe,this._dtTemp=Lt);continue}w$(Kt,this._size)&&(Kt=M$(Kt,this._size))}else if(w$(Kt,this._size)){Bt&&null===this._tTemp&&(this._tTemp=oe,this._dtTemp=Lt);continue}if(Bt=!0,(!lt||S$(Kt,lt))&&(!lt||!k$(Kt,nt,this._size))){for(var ce=Kt.sprite,he=Kt.width>>5,de=this._size[0]>>5,fe=Kt.x-(he<<4),pe=127&fe,ve=32-pe,Ae=Kt.y1-Kt.y0,we=void 0,Ce=(Kt.y+Kt.y0)*de+(fe>>5),je=0;je<Ae;je++){we=0;for(var Ne=0;Ne<=he;Ne++)nt[Ce+Ne]|=we<<ve|(Ne<he?(we=ce[je*he+Ne])>>>pe:0);Ce+=de}return at.sprite=null,Kt.sprite=null,!0}}}return null!==this._tTemp&&(this._placeStatus=3),!this.shouldShrinkContinue()&&this.setCache(Kt,Lt),!1}},{"key":"clearCache","value":function(){this.cacheMap.clear()}},{"key":"setCache","value":function(nt,at){var lt="".concat(nt.angle,"-").concat(at),Rt=nt.x1-nt.x0,Bt=nt.y1-nt.y0;if(this.cacheMap.has(lt)){var Lt=this.cacheMap.get(lt),Ht=Lt.width,jt=Lt.height;(Rt<Ht&&Bt<jt||Rt<=Ht&&Bt<jt)&&this.cacheMap.set(lt,{"width":Rt,"height":Bt})}else this.cacheMap.set(lt,{"width":Rt,"height":Bt})}},{"key":"isSizeLargerThanMax","value":function(nt,at){var lt="".concat(nt.angle,"-").concat(at);if(!this.cacheMap.has(lt))return!1;var Rt=this.cacheMap.get(lt),Bt=Rt.width,Lt=Rt.height,Ht=nt.x1-nt.x0,jt=nt.y1-nt.y0;return Ht>=Bt&&jt>=Lt}}])}(qJ);function k$(nt,at,lt){for(var Rt,Bt=lt[0]>>5,Lt=nt.sprite,Ht=nt.width>>5,jt=nt.x-(Ht<<4),$t=127&jt,Kt=32-$t,te=nt.y1-nt.y0,ne=(nt.y+nt.y0)*Bt+(jt>>5),re=0;re<te;re++){Rt=0;for(var ae=0;ae<=Ht;ae++)if((Rt<<Kt|(ae<Ht?(Rt=Lt[re*Ht+ae])>>>$t:0))&at[ne+ae])return!0;ne+=Bt}return!1}function S$(nt,at){return nt.x+nt.x1>at[0].x&&nt.x+nt.x0<at[1].x&&nt.y+nt.y1>at[0].y&&nt.y+nt.y0<at[1].y}JJ.defaultOptions={"enlarge":!1,"minFontSize":2,"maxSingleWordTryCount":2};var A$=function(nt,at){return nt.x+nt.x0>at[0]||nt.y+nt.y0>at[0]||nt.x+nt.x1<0||nt.y+nt.y1<0},w$=function(nt,at){return nt.x+nt.x0<0||nt.y+nt.y0<0||nt.x+nt.x1>at[0]||nt.y+nt.y1>at[1]};function M$(nt,at){for(var lt=nt.sprite,Rt=nt.y1-nt.y0,Bt=nt.width>>5,Lt=0,Ht=[],jt=Math.max(-(nt.y0+nt.y),0),$t=Math.min(Rt+(at[1]-(nt.y1+nt.y)),Rt),Kt=Math.max(-(nt.x0+nt.x),0)>>5,te=Math.min(Bt+(at[0]-(nt.x1+nt.x)>>5)+1,Bt),ne=0;ne<Rt;ne++){for(var re=0;re<Bt;re++)ne<jt||$t<=ne||re<Kt||te<=re||Ht.push(lt[Lt+re]);Lt+=Bt}var ae=Kt<<5,oe=Bt-te<<5,se=jt,le=Rt-$t;return Object.assign(Object.assign({},nt),{"width":nt.width-ae-oe,"height":nt.height-se-le,"x0":nt.x0+ae,"x1":nt.x1-oe,"y0":nt.y0+se,"y1":nt.y1-le,"x":nt.x+ae/2-oe/2,"sprite":Ht})}var t0=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[ft({},e.defaultOptions,nt)])).fillGridAt=function(nt,lt){nt>=at.ngx||lt>=at.ngy||nt<0||lt<0||(at.grid[nt][lt]=!1)},at.updateGrid=function(nt,lt,Rt,Bt,Lt){for(var Ht=Lt.occupied,jt=Ht.length;jt--;){var $t=nt+Ht[jt][0],Kt=lt+Ht[jt][1];$t>=at.ngx||Kt>=at.ngy||$t<0||Kt<0||at.fillGridAt($t,Kt)}},at.gridSize=Math.max(Math.floor(at.options.gridSize),4),at}return h(e,nt),o(e,[{"key":"getPointsAtRadius","value":function(nt){if(this.pointsAtRadius[nt])return this.pointsAtRadius[nt];var at=8*nt,lt=at,Rt=[];for(0===nt&&Rt.push([this.center[0],this.center[1],0]);lt--;){var Bt=this.shape(lt/at*2*Math.PI);Rt.push([this.center[0]+nt*Bt*Math.cos(-lt/at*2*Math.PI),this.center[1]+nt*Bt*Math.sin(-lt/at*2*Math.PI)*this.options.ellipticity,lt/at*2*Math.PI])}return this.pointsAtRadius[nt]=Rt,Rt}},{"key":"getTextInfo","value":function(nt){var at,lt=this,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,Bt=arguments.length>2?arguments[2]:void 0,Lt=this.options.clip?1:Rt,Ht=Math.max(Math.floor((this.isTryRepeatFill?this.options.fillTextFontSize:this.getTextFontSize(nt))*Lt),this.options.minFontSize),jt=this.getText(nt)+"";if(this.options.clip&&(jt=jt.slice(0,Math.ceil(jt.length*Rt))),!jt)return null;var $t=this.getTextFontWeight(nt),Kt=this.getTextFontStyle(nt),te=this.getTextRotate&&null!==(at=this.getTextRotate(nt,Bt))&&void 0!==at?at:0,ne=this.getTextFontFamily(nt),re=document.createElement("canvas"),ae=re.getContext("2d",{"willReadFrequently":!0});ae.font=Kt+" "+$t+" "+Ht.toString(10)+"px "+ne;var oe=ae.measureText(jt).width,se=Math.max(Ht,ae.measureText("m").width,ae.measureText("").width),le=oe+2*se,ue=3*se,ce=Math.ceil(le/this.gridSize),he=Math.ceil(ue/this.gridSize);le=ce*this.gridSize,ue=he*this.gridSize;var de=-oe/2,fe=.4*-se,pe=Math.ceil((le*Math.abs(Math.sin(te))+ue*Math.abs(Math.cos(te)))/this.gridSize),ve=Math.ceil((le*Math.abs(Math.cos(te))+ue*Math.abs(Math.sin(te)))/this.gridSize),Ae=ve*this.gridSize,we=pe*this.gridSize;re.setAttribute("width",""+Ae),re.setAttribute("height",""+we),ae.scale(1,1),ae.translate(Ae/2,we/2),ae.rotate(-te),ae.font=Kt+" "+$t+" "+Ht.toString(10)+"px "+ne,ae.fillStyle="#000",ae.textBaseline="middle",ae.fillText(jt,de,fe);var Ce=ae.getImageData(0,0,Ae,we).data;if(this.exceedTime())return null;for(var je,Ne=[],Ve=ve,Ge=[pe/2,ve/2,pe/2,ve/2],R=function(nt,at,Rt){for(var Bt=lt.gridSize;Bt--;)for(var Lt=lt.gridSize;Lt--;)if(Ce[4*((at*lt.gridSize+Bt)*Ae+(nt*lt.gridSize+Lt))+3])return Rt.push([nt,at]),nt<Ge[3]&&(Ge[3]=nt),nt>Ge[1]&&(Ge[1]=nt),at<Ge[0]&&(Ge[0]=at),void(at>Ge[2]&&(Ge[2]=at))};Ve--;)for(je=pe;je--;)R(Ve,je,Ne);return{"datum":nt,"occupied":Ne,"bounds":Ge,"gw":ve,"gh":pe,"fillTextOffsetX":de,"fillTextOffsetY":fe,"fillTextWidth":oe,"fillTextHeight":se,"fontSize":Ht,"fontStyle":Kt,"fontWeight":$t,"fontFamily":ne,"angle":te,"text":jt}}},{"key":"calculateEmptyRate","value":function(){for(var nt=this.ngx*this.ngy,at=0,lt=0;lt<this.ngx;lt++)for(var Rt=0;Rt<this.ngy;Rt++)this.grid[lt][Rt]&&at++;return at/nt}},{"key":"canFitText","value":function(nt,at,lt,Rt,Bt){for(var Lt=Bt.length;Lt--;){var Ht=nt+Bt[Lt][0],jt=at+Bt[Lt][1];if(Ht>=this.ngx||jt>=this.ngy||Ht<0||jt<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[Ht][jt])return!1}return!0}},{"key":"layoutWord","value":function(nt){var at=this,lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,Rt=this.data[nt],Bt=this.getTextInfo(Rt,lt,nt);if(!Bt)return!1;if(this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||Bt.fontSize<=this.options.minFontSize)&&!this.options.clip){var Lt=Bt.bounds;if(Lt[1]-Lt[3]+1>this.ngx||Lt[2]-Lt[0]+1>this.ngy)return!1}for(var Ht=this.maxRadius+1,s=function(nt){var lt=Math.floor(nt[0]-Bt.gw/2),Rt=Math.floor(nt[1]-Bt.gh/2),Lt=Bt.gw,jt=Bt.gh;return!!at.canFitText(lt,Rt,Lt,jt,Bt.occupied)&&(Bt.distance=at.maxRadius-Ht,Bt.theta=nt[2],at.outputText(lt,Rt,Bt),at.updateGrid(lt,Rt,Lt,jt,Bt),!0)};Ht--;){var jt=this.getPointsAtRadius(this.maxRadius-Ht);if(this.options.random&&Mt(jt=[].concat(jt)),jt.some(s))return!0}return(this.options.clip||!!(this.options.shrink&&Bt.fontSize>this.options.minFontSize))&&this.layoutWord(nt,.75*lt)}},{"key":"outputText","value":function(nt,at,lt){var Rt=this.getTextColor(lt),Bt={"text":lt.text,"datum":lt.datum,"color":Rt,"fontStyle":lt.fontStyle,"fontWeight":lt.fontWeight,"fontFamily":lt.fontFamily,"angle":lt.angle,"width":lt.fillTextWidth,"height":lt.fillTextHeight,"x":(nt+lt.gw/2)*this.gridSize,"y":(at+lt.gh/2)*this.gridSize+lt.fillTextOffsetY+.5*lt.fontSize,"fontSize":lt.fontSize};this.result.push(Bt),this.progressiveResult&&this.progressiveResult.push(Bt)}},{"key":"initGrid","value":function(nt){var at=this;this.grid=[];var lt=this.options.shape;if(V(lt)){var Rt=lS(lt,nt.width,nt.height),Bt=Rt.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize);this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(Rt);for(var Lt=sS(lt.backgroundColor),o=function(nt,lt){for(var Rt=at.gridSize;Rt--;)for(var Ht=at.gridSize;Ht--;)if(!Lt(Bt,lt*at.gridSize+Rt,nt*at.gridSize+Ht))return void(at.grid[nt][lt]=!0);at.grid[nt][lt]=!1},Ht=this.ngx;Ht--;){this.grid[Ht]=[];for(var jt=this.ngy;jt--;)o(Ht,jt),!1!==this.grid[Ht][jt]&&(this.grid[Ht][jt]=!0)}Bt=Lt=void 0}else for(var $t=this.ngx;$t--;){this.grid[$t]=[];for(var Kt=this.ngy;Kt--;)this.grid[$t][Kt]=!0}}},{"key":"canRepeat","value":function(){return this.calculateEmptyRate()>.001}},{"key":"layout","value":function(nt,at){this.initProgressive(),this.drawnCount=0,this.isTryRepeatFill=!1,this.originalData=nt,this.data=nt,this.pointsAtRadius=[],this.ngx=Math.floor(at.width/this.gridSize),this.ngy=Math.floor(at.height/this.gridSize);var lt=aS(this.options.shape,[at.width,at.height]),Rt=lt.center,Bt=lt.maxRadius;return this.center=at.origin?[at.origin[0]/this.gridSize,at.origin[1]/this.gridSize]:[Rt[0]/this.gridSize,Rt[1]/this.gridSize],this.maxRadius=Math.floor(Bt/this.gridSize),this.initGrid(at),this.result=[],this.progressiveRun()}}])}(qJ);t0.defaultOptions={"gridSize":8,"ellipticity":1,"maxSingleWordTryCount":1};var a0=function(nt){function e(nt){var at;return r(this,e),(at=n(this,e,[ft({},e.defaultOptions,nt)])).random=at.options.random?Math.random:function(){return 0},at.aspectRatio=1,at}return h(e,nt),o(e,[{"key":"fit","value":function(nt){for(var at=0,lt=this.result.length;at<lt;at++)if(E$(nt,this.result[at]))return!1;return!0}},{"key":"getTextInfo","value":function(nt,at){var lt={"datum":nt,"fontSize":this.getTextFontSize(nt),"fontWeight":this.getTextFontWeight(nt),"fontStyle":this.getTextFontStyle(nt),"fontFamily":this.getTextFontFamily(nt),"angle":this.getTextRotate(nt,at),"text":this.getText(nt)+"","x":this.center[0],"y":this.center[1]},Rt=Py(lt);return lt.width=Rt.width(),lt.height=Rt.height(),lt.top=this.center[1]-lt.height+.21*lt.height,lt.left=this.center[0]-lt.width/2,lt}},{"key":"layoutWord","value":function(nt){for(var at=this.getTextInfo(this.data[nt],nt),lt=2*Math.PI,Rt=0,Bt=at.left,Lt=at.top,Ht=at.width,jt=at.height,$t=1,Kt=this.fit(at);!Kt&&Rt<this.maxRadius;)Rt+=.5,$t=this.shape(Rt/this.maxRadius*2*Math.PI),lt+=.5*(this.options.random?this.random()>.5?1:-1:nt%2==0?1:-1),Bt=this.center[0]-Ht/2+Rt*$t*Math.cos(lt)*this.aspectRatio,Lt=this.center[1]-jt/2+Rt*$t*Math.sin(lt),at.left=Bt,at.top=Lt,at.x=Bt+Ht/2,at.y=Lt+jt/2,Kt=this.fit(at);return!!Kt&&!!(this.options.clip||at.left>=0&&at.left+at.width<=this.width&&at.top>=0&&at.top+at.height<=this.height)&&(this.result.push(at),!0)}},{"key":"layout","value":function(nt,at){var lt=this;if(!(null==nt?void 0:nt.length))return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(at.width*at.width+at.height*at.height)/2,this.center=[at.width/2,at.height/2],this.width=at.width,this.height=at.height,this.data=nt.sort((function(nt,at){return lt.getTextFontSize(at)-lt.getTextFontSize(nt)}));for(var Rt=0;Rt<nt.length&&(this.layoutWord(Rt),Rt++,this.progressiveIndex=Rt,!this.exceedTime()););return this.result}}])}(qJ);function E$(nt,at){return!(nt.left+nt.width<at.left||nt.top+nt.height<at.top||nt.left>at.left+at.width||nt.top>at.top+at.height)}a0.defaultOptions={"enlarge":!1};var s0={"x":"x","y":"y","z":"z","fontFamily":"fontFamily","fontSize":"fontSize","fontStyle":"fontStyle","fontWeight":"fontWeight","angle":"angle"},R$=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt;if(nt.size&&(nt.size[0]<=0||nt.size[1]<=0))return te.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];var $t=at,Kt=(null!==(lt=nt.size)&&void 0!==lt?lt:[500,500]).slice();Kt[0]=Math.floor(Kt[0]),Kt[1]=Math.floor(Kt[1]);var ne=nt.fontFamily?B$(nt.fontFamily):"sans-serif",re=nt.fontStyle?B$(nt.fontStyle):"normal",ae=nt.fontWeight?B$(nt.fontWeight):"normal",oe=nt.rotate?B$(nt.rotate):0,se=B$(nt.text),le=null!==(Rt=nt.spiral)&&void 0!==Rt?Rt:"archimedean",ue=nt.padding?B$(nt.padding):1,ce=null!==(Bt=nt.shape)&&void 0!==Bt?Bt:"square",he=null!==(Lt=nt.shrink)&&void 0!==Lt&&Lt,de=null!==(Ht=nt.enlarge)&&void 0!==Ht&&Ht,fe=null!==(jt=nt.clip)&&void 0!==jt&&jt,pe=nt.minFontSize,ve=nt.randomVisible,Ae=nt.as?Object.assign(Object.assign({},s0),nt.as):s0,we=nt.depth_3d,Ce=nt.postProjection,je=nt.fontSize?B$(nt.fontSize):14,Ne=nt.fontSizeRange;if(Ne&&!Z(je)){var Ve=je,Ge=L$(D$(Ve,$t),Ne);je=function(nt){return Ge(Ve(nt))}}var ti=JJ;"fast"===nt.layoutType?ti=a0:"grid"===nt.layoutType&&(ti=t0);var li=new ti(Object.assign(Object.assign({},nt),{"text":se,"padding":ue,"spiral":le,"shape":ce,"rotate":oe,"fontFamily":ne,"fontStyle":re,"fontWeight":ae,"fontSize":je,"shrink":he,"clip":fe,"enlarge":de,"minFontSize":pe,"random":ve,"outputCallback":function(at){for(var lt,Rt,Bt=[],Lt=0,Ht=at.length;Lt<Ht;Lt++)(lt=(Rt=at[Lt]).datum)[Ae.x]=Rt.x,lt[Ae.y]=Rt.y,lt[Ae.fontFamily]=Rt.fontFamily,lt[Ae.fontSize]=Rt.fontSize,lt[Ae.fontStyle]=Rt.fontStyle,lt[Ae.fontWeight]=Rt.fontWeight,lt[Ae.angle]=Rt.angle,"StereographicProjection"===Ce&&O$(Kt,Rt,lt,Ae,we),nt.dataIndexKey&&(lt[nt.dataIndexKey]="".concat(Lt)),Bt.push(lt);return Bt}}));return li.layout($t,{"width":Kt[0],"height":Kt[1]}),nt.progressiveStep>0||nt.progressiveTime>0?{"progressive":li}:li.output()},B$=function(nt){return Y(nt)||Z(nt)||H(nt)||X(nt)?nt:function(at){return at[nt.field]}},I$=function(nt){return nt<0?-Math.sqrt(-nt):Math.sqrt(nt)},L$=function(nt,at,lt){if(nt[0]===nt[1])return function(nt){return at[0]};var Rt=I$(nt[0]),Bt=I$(nt[1]),Lt=Math.min(Rt,Bt),Ht=Math.max(Rt,Bt);return function(nt){return(I$(nt)-Lt)/(Ht-Lt)*(at[1]-at[0])+at[0]}},D$=function(nt,at){for(var lt,Rt=1/0,Bt=-1/0,Lt=at.length,Ht=0;Ht<Lt;++Ht)(lt=Pt(nt(at[Ht])))<Rt&&(Rt=lt),lt>Bt&&(Bt=lt);return 1===at.length&&Rt===Bt&&(Rt-=1e4),[Rt,Bt]};function O$(nt,at,lt,Rt,Bt){var Lt=Math.max(nt[0],nt[1])/2,Ht=function(nt,at,lt,Rt,Bt){var Lt=Bt.x,Ht=Bt.y,jt=Lt/nt*Math.PI*2,$t=Math.PI-Ht/at*Math.PI;return $t+=($t<Math.PI/2?1:-1)*Math.pow(Math.min($t-Math.PI/2,1),2)/5,{"x":lt*Math.sin($t)*Math.cos(jt)+Rt.x,"y":lt*Math.cos($t)+Rt.y,"z":lt*Math.sin($t)*Math.sin(jt)+Rt.z}}(nt[0],nt[1],Lt,{"x":Lt,"y":Lt,"z":null!=Bt?Bt:Lt},at);lt[Rt.x]=Ht.x,lt[Rt.y]=Ht.y,lt[Rt.z]=Ht.z}var h0,z$=function(){Pj.registerTransform("wordcloud",{"transform":R$,"markPhase":"beforeJoin"},!0)};!function(nt){nt.BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",nt.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout",nt.AFTER_WORDCLOUD_SHAPE_DRAW="afterWordcloudShapeDraw"}(h0||(h0={}));var H$=function(nt){return/^[\u4e00-\u9fa5]+$/.test(nt)},j$=function(nt,at){if(j(nt))return 0;var lt,Rt=0,Bt=s(nt);try{for(Bt.s();!(lt=Bt.n()).done;){var Lt=lt.value;H$(Lt)?Rt+=1:Rt+=.53}}catch(nt){Bt.e(nt)}finally{Bt.f()}return Rt};function N$(nt,at,lt){var Rt=at.stepFactor,Bt=at.importantWordCount,Lt=at.globalShinkLimit,Ht=lt.size,jt=lt.segmentation.regions,$t=lt.tempCanvas,Kt=lt.boardSize,te=lt.shapeCenter,ne=lt.shapeMaxR,re=lt.shapeRatio,ae=$t.getContext("2d",{"willReadFrequently":!0}),oe=Y$(lt),se=oe.slice(0),le=at.fontSizeShrinkFactor,ue=null,ce=1,he=1,de=Bt,fe=0;nt.length>de&&(fe=nt.sort((function(nt,at){return at.weight-nt.weight}))[de].weight);for(var pe=0;pe<jt.length;pe++){for(var ve=jt[pe],Ae=ve.words,we=ve.center,Ce=ve.maxR,je=ve.ratio,Ne=!1,Ve=0;Ve<Ae.length;Ve++){U$($t,ae,nt,Ve);var Ge=Ae[Ve];if(Ge.x=we[0],Ge.y=we[1],!Ge.skip&&Ge.hasText&&Ge.sprite&&V$(se,Ge,Ce,je,Ht,Kt,Rt))Ge.hasPlaced=!0;else{if(!Ge.skip&&Ge.weight>fe&&he>Lt){var ti=Ge.datum[Symbol.for("vGrammar_id")];ti!==ue&&(ue=ti,ce=he),he*=le,nt.forEach((function(nt){nt.hasText=!1,nt.sprite=null,nt.fontSize=nt.fontSize*le})),se=oe.slice(0),Ne=!0;break}if(!Ge.skip&&Ge.datum[Symbol.for("vGrammar_id")]===ue){nt.forEach((function(nt){nt.hasText=!1,nt.sprite=null,nt.fontSize=nt.fontSize/he})),Ge.skip=!0,he=ce,ue=null,se=oe.slice(0),Ne=!0;break}}}Ne&&(pe=-1)}for(var li=0;li<at.textLayoutTimes;li++){var hi=nt.filter((function(nt){return nt.hasPlaced||(nt.hasText=!1,nt.sprite=null,nt.fontSize=Math.max(~~(nt.fontSize*at.fontSizeShrinkFactor),at.minFontSize)),!nt.hasPlaced}));if(0===hi.length)break;for(var di=0;di<hi.length;di++){var fi=hi[di];U$($t,ae,hi,di),fi.x=te[0],fi.y=te[1],fi.hasText&&V$(se,fi,ne,re,Ht,Kt,Rt)&&(fi.hasPlaced=!0)}}at.board=se}function V$(nt,at,lt,Rt,Bt,Lt,Ht){for(var jt,$t,Kt,te=at.x,ne=at.y,re=function(nt){return function(at){return[nt*(at*=.1)*Math.cos(at),at*Math.sin(at)]}}(Rt),ae=1*Ht,oe=-ae;jt=re(oe+=ae);){at.wordSize;var se=at.bounds,le=se.dTop,ue=se.dBottom,ce=se.dLeft,he=se.dRight;if($t=jt[0],Kt=jt[1],Math.min(Math.abs($t),Math.abs(Kt))>=lt)break;if(at.x=~~(te+$t),at.y=~~(ne+Kt),!(at.x-ce<0||at.x+he>Bt[0]||at.y-le<0||at.y+ue>Bt[1]||W$(at,nt,Lt)))return G$(at,nt,Lt),!0}return!1}function G$(nt,at,lt){var Rt,Bt=nt.wordSize,Lt=nt.sprite,Ht=Bt[0]>>5,jt=lt[0]>>5,$t=nt.x-(Ht<<4),Kt=$t%32,te=32-Kt,ne=Bt[1],re=(nt.y-(Bt[1]>>1))*jt+($t>>5);if(0===Kt)for(var ae=0;ae<ne;ae++){for(var oe=0;oe<Ht;oe++)at[re+oe]|=Lt[ae*Ht+oe];re+=jt}else for(var se=0;se<ne;se++){Rt=0;for(var le=0;le<=Ht;le++)at[re+le]|=Rt<<te|(le<Ht?(Rt=Lt[se*Ht+le])>>>Kt:0);re+=jt}}function W$(nt,at,lt){var Rt,Bt=nt.sprite,Lt=nt.wordSize,Ht=lt[0]>>5,jt=Lt[0]>>5,$t=nt.x-(jt<<4),Kt=$t%32,te=32-Kt,ne=Lt[1],re=(nt.y-(Lt[1]>>1))*Ht+($t>>5);if(0===Kt)for(var ae=0;ae<ne;ae++){for(var oe=0;oe<jt;oe++)if(at[re+oe]&Bt[ae*jt+oe])return!0;re+=Ht}else for(var se=0;se<ne;se++){Rt=0;for(var le=0;le<=jt;le++)if((Rt<<te|(le<jt?(Rt=Bt[se*jt+le])>>>Kt:0))&at[re+le])return!0;re+=Ht}return!1}function U$(nt,at,lt,Rt){if(!lt[Rt].sprite&&0!==lt[Rt].fontSize){var Bt=2048,Lt=Math.PI/180,Ht=lt.length;nt.width=Bt,nt.height=2048,at.clearRect(0,0,Bt,2048),at.textAlign="center";var jt,$t,Kt=0,te=0,ne=0,re=0,ae=Rt;for(--Rt;++Rt<Ht;){var oe=lt[Rt],se=Math.max(oe.fontSize,2);if(at.save(),at.font=oe.fontStyle+" "+oe.fontWeight+" "+se+"px "+oe.fontFamily,jt=at.measureText(oe.text+"m").width+2*oe.padding,$t=2*se+2*oe.padding,0!==oe.rotate){var le=Math.sin(oe.rotate*Lt),ue=Math.cos(oe.rotate*Lt),ce=jt*ue,he=jt*le,de=$t*ue,fe=$t*le;jt=Math.max(Math.abs(ce+fe),Math.abs(ce-fe)),$t=~~Math.max(Math.abs(he+de),Math.abs(he-de))}if(jt=jt+31>>5<<5,($t=Math.ceil($t))>ne&&(ne=$t),Kt+jt>=Bt&&(Kt=0,te+=ne,ne=$t),te+$t>=2048){if(0===te){oe.hasText=!1;continue}break}te+$t>=re&&(re=te+$t),at.translate(Kt+(jt>>1),te+($t>>1)),0!==oe.rotate&&at.rotate(oe.rotate*Lt),at.fillText(oe.text,0,0),oe.padding&&(at.lineWidth=2*oe.padding,at.strokeText(oe.text,0,0)),at.restore(),oe.LT=[Kt,te],oe.wordSize=[jt,$t],oe.hasText=!0,Kt+=jt}if(0!==re)for(var pe,ve,Ae=at.getImageData(0,0,Bt,re).data;--Rt>=ae;){var we=lt[Rt];if(!we.hasText){we.bounds={"dTop":1/0,"dBottom":-1/0,"dLeft":1/0,"dRight":-1/0};break}var Ce=we.LT,je=void 0===Ce?[0,0]:Ce,Ne=we.wordSize,Ve=g(je,2);Kt=Ve[0],te=Ve[1];var Ge=Ne[0]>>5,ti=new Array(Ge*Ne[1]).fill(0),li=1/0,hi=-1/0,di=1/0,fi=-1/0;for(ve=0;ve<Ne[1];ve++){var pi=void 0;for(pe=0;pe<Ne[0];pe++)if(Ae[4*((te+ve)*Bt+(Kt+pe))+3]>0){var vi=1<<31-pe%32;ti[Ge*ve+(pe>>5)]|=vi,pe<di&&(di=pe),pe>fi&&(fi=pe),pi|=vi}pi&&(ve<li&&(li=ve),ve>hi&&(hi=ve))}we.bounds={"dTop":(Ne[1]>>1)-li,"dBottom":hi-(Ne[1]>>1),"dLeft":(Ne[0]>>1)-di,"dRight":fi-(Ne[0]>>1)},we.sprite=ti,delete we.LT}}}function Y$(nt){for(var at=nt.segmentation.labels,lt=nt.boardSize,Rt=nt.size,Bt=lt[0]>>5,Lt=new Array(Bt*Rt[1]).fill(0),Ht=0;Ht<Rt[1];Ht++)for(var jt=0;jt<Rt[0];jt++)if(0===at[Ht*Rt[0]+jt]){var $t=1<<31-jt%32;Lt[Bt*Ht+(jt>>5)]|=$t}if(lt[0]>Rt[0])for(var Kt=(1<<lt[0]-Rt[0])-1,te=0;te<Rt[1];te++)Lt[Bt*te+Bt-1]|=Kt;return Lt}function X$(nt,at,lt){(function(nt,at){var lt=at.segmentation.regions,Rt=-1/0,Bt=0,Lt=0;lt.forEach((function(nt,at){var lt=nt.area;lt>Rt&&(Rt=lt,Lt=at),Bt+=lt}));var Ht=0;lt.forEach((function(at){var lt=at.area,Lt=Math.ceil(lt/Bt*nt.length),jt=lt/Rt;at.words=[],at.regionNum=Lt,at.regionWeight=jt,Ht+=Lt})),Ht<nt.length&&(lt[Lt].wordsNum+=nt.length-Ht);var jt=Lt,$t=lt.map((function(nt){return nt.regionNum}));nt.forEach((function(nt){var at=0,Rt=0;nt.regionIndex=-1;do{if($t[jt]>0&&nt.weight<=lt[jt].regionWeight){nt.regionIndex=jt,lt[jt].words.push(nt),$t[jt]--,jt=(jt+1)%lt.length;break}jt=(jt+1)%lt.length,at++,++Rt>lt.length+1&&(lt.forEach((function(nt){nt.regionWeight+=.15})),Rt=0)}while(-1===nt.regionIndex&&at<3*lt.length);-1===nt.regionIndex&&(nt.regionIndex=Lt,lt[Lt].words.push(nt),$t[Lt]--)})),lt.forEach((function(nt){nt.words.sort((function(nt,at){return at.weight-nt.weight}))}))})(nt,lt),"ensureMapping"===at.layoutMode?N$(nt,at,lt):"ensureMappingEnlarge"===at.layoutMode?function(nt,at,lt){var Rt=at.size,Bt=at.stepFactor,Lt=at.importantWordCount,Ht=lt.segmentation.regions,jt=lt.tempCanvas,$t=lt.boardSize,Kt=lt.shapeCenter,te=lt.shapeMaxR,ne=lt.shapeRatio,re=jt.getContext("2d",{"willReadFrequently":!0}),ae=Y$(lt),oe=ae.slice(0),se=at.fontSizeEnlargeFactor,le=Math.min(Lt,nt.length),ue=0;nt.length>le&&(ue=nt.sort((function(nt,at){return at.weight-nt.weight}))[le-1].weight);for(var ce=0,he=1,de=!1,fe=0;fe<Ht.length;fe++){for(var pe=Ht[fe],ve=pe.words,Ae=pe.center,we=pe.maxR,Ce=pe.ratio,je=!1,Ne=0;Ne<ve.length;Ne++){U$(jt,re,nt,Ne);var Ve=ve[Ne];if(Ve.x=Ae[0],Ve.y=Ae[1],Ve.hasText&&Ve.sprite&&V$(oe,Ve,we,Ce,Rt,$t,Bt)){if(Ve.hasPlaced=!0,Ve.weight>=ue&&ce++,ce>=le&&!de){he*=se,nt.forEach((function(nt){nt.hasText=!1,nt.sprite=null,nt.fontSize=nt.fontSize*se})),oe=ae.slice(0),je=!0,ce=0;break}}else{if(Ve.weight>=ue&&he>1){nt.forEach((function(nt){nt.hasText=!1,nt.sprite=null,nt.fontSize=nt.fontSize/se})),he/=se,de=!0,oe=ae.slice(0),je=!0;break}if(Ve.weight>=ue)return N$(nt,at,lt)}}je&&(fe=-1)}for(var Ge=0;Ge<at.textLayoutTimes;Ge++){var ti=nt.filter((function(nt){return nt.hasPlaced||(nt.hasText=!1,nt.sprite=null,nt.fontSize=Math.max(~~(nt.fontSize*at.fontSizeShrinkFactor),at.minFontSize)),!nt.hasPlaced}));if(0===ti.length)break;for(var li=0;li<ti.length;li++){var hi=ti[li];U$(jt,re,ti,li),hi.x=Kt[0],hi.y=Kt[1],hi.hasText&&V$(oe,hi,te,ne,Rt,$t,Bt)&&(hi.hasPlaced=!0)}}at.board=oe}(nt,at,lt):function(nt,at,lt){var Rt,Bt=at.size,Lt=at.stepFactor,Ht=lt.segmentation.regions,jt=lt.tempCanvas,$t=lt.boardSize,Kt=lt.shapeCenter,te=lt.shapeMaxR,ne=lt.shapeRatio,re=Y$(lt),ae=jt.getContext("2d",{"willReadFrequently":!0}),oe=s(Ht);try{for(oe.s();!(Rt=oe.n()).done;)for(var se=Rt.value,le=se.words,ue=se.center,ce=se.maxR,he=se.ratio,de=0;de<le.length;de++){U$(jt,ae,nt,de);var fe=le[de];fe.x=ue[0],fe.y=ue[1],fe.hasText&&fe.sprite&&V$(re,fe,ce,he,Bt,$t,Lt)&&(fe.hasPlaced=!0)}}catch(nt){oe.e(nt)}finally{oe.f()}for(var pe=0;pe<at.textLayoutTimes;pe++){var ve=nt.filter((function(nt){return nt.hasPlaced||(nt.hasText=!1,nt.sprite=null,nt.fontSize=Math.max(~~(nt.fontSize*at.fontSizeShrinkFactor),at.minFontSize)),!nt.hasPlaced}));if(0===ve.length)break;for(var Ae=0;Ae<ve.length;Ae++){var we=ve[Ae];U$(jt,ae,ve,Ae),we.x=Kt[0],we.y=Kt[1],we.hasText&&V$(re,we,te,ne,Bt,$t,Lt)&&(we.hasPlaced=!0)}}at.board=re}(nt,at,lt);for(var Rt=function(nt,at,lt){for(var Rt=at.size,Bt=at.fillingTimes,Lt=at.fillingXStep,Ht=at.fillingYStep,jt=at.getFillingFontStyle,$t=at.getFillingFontWeight,Kt=at.getFillingFontFamily,te=at.fillingInitialFontSize,ne=at.fillingDeltaFontSize,re=at.fillingInitialOpacity,ae=at.fillingDeltaOpacity,oe=at.fillingRotateList,se=at.getFillingPadding,le=at.random,ue=at.board,ce=at.minFillFontSize,he=lt.boardSize,de=lt.shapeBounds,fe=lt.tempCanvas,pe=lt.randomGenerator,ve=fe.getContext("2d",{"willReadFrequently":!0}),Ae=te,we=re,Ce=[],je=0;je<Bt;je++)C(Ae,we),Ae=Math.max(Ae>ne?Ae-ne:ne,ce),we=we>ae?we-ae:ae;return Ce;function C(at,lt){var Bt=nt.map((function(nt){var Rt=nt.text,Bt=nt.color,Lt=nt.fillingColor,Ht=nt.hasPlaced,te=nt.datum;return{"x":0,"y":0,"weight":0,"text":Rt,"fontFamily":Kt(te),"fontStyle":jt(te),"fontWeight":$t(te),"fontSize":at,"rotate":oe[~~(pe()*oe.length)],"padding":se(te),"opacity":lt,"visible":!0,"color":Bt,"fillingColor":Lt,"hasPlaced":Ht,"datum":te}}));E(Bt);for(var te=0,ne=de.x1,re=de.y1,ae=de.x2,ce=de.y2,Ae=ne+~~(pe()*Lt*2),we=re+~~(pe()*Ht*2);we<=ce;we+=Ht)for(var je=Ae;je<=ae;je+=Lt){U$(fe,ve,Bt,te);var Ne=Bt[te];Ne.x=je,Ne.y=we,Ne.wordSize;var Ve=Ne.bounds;if(Ne.hasPlaced&&Ve){var Ge=Ve.dTop,ti=Ve.dBottom,li=Ve.dLeft,hi=Ve.dRight;Ne.x-li<0||Ne.x+hi>Rt[0]||Ne.y-Ge<0||Ne.y+ti>Rt[1]||Ne.hasText&&Ne.sprite&&!W$(Ne,ue,he)&&(G$(Ne,ue,he),Ce.push(Object.assign({},Ne)),++te===Bt.length&&(te=0,le&&E(Bt)))}else++te===Bt.length&&(te=0,le&&E(Bt))}}function E(nt){return nt.sort((function(){return pe()-.5}))}}(nt,at,lt),Bt=[],Lt=[],Ht=0;Ht<nt.length;Ht++)nt[Ht].hasPlaced?Lt.push(nt[Ht]):Bt.push(nt[Ht]);return Bt.forEach((function(nt){return nt.visible=!1})),{"fillingWords":Rt,"successedWords":Lt,"failedWords":Bt}}var d0,f0,p0={"x":"x","y":"y","fontFamily":"fontFamily","fontSize":"fontSize","fontStyle":"fontStyle","fontWeight":"fontWeight","angle":"angle","opacity":"opacity","visible":"visible","isFillingWord":"isFillingWord","color":"color"},v0=o((function t(nt,at){r(this,t),this.progressiveResult=[],this.options=nt,this.view=at}),[{"key":"layout","value":function(nt){var at=this;this.data=nt;var lt=this.options,Rt={"shapeUrl":lt.shape,"size":lt.size,"ratio":lt.ratio||.8,"tempCanvas":void 0,"boardSize":[0,0],"random":!1,"randomGenerator":void 0},Bt=ax.createCanvas({"width":lt.size[0],"height":lt.size[1]}),Lt=Bt.getContext("2d",{"willReadFrequently":!0});Lt.textAlign="center",Lt.textBaseline="middle",Rt.tempCanvas=Bt;var Ht,jt=lt.size[0]+31>>5<<5;if(Rt.boardSize=[jt,lt.size[1]],Rt.random?Rt.randomGenerator=Math.random:Rt.randomGenerator=function(){var nt=-1,at=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return function(){return at[nt=(nt+1)%at.length]}}(),this.segmentationInput=Rt,Y(Rt.shapeUrl)){Rt.isEmptyPixel=sS();var $t=(Ht=Rt.shapeUrl)&&($(Ht)||et(Ht)||Ht.startsWith("<svg"))?new Promise((function(nt,at){var lt,Rt=ey({"image":Ht}),Bt=null===(lt=Rt.resources)||void 0===lt?void 0:lt.get(Ht);Bt&&"success"===Bt.state&&Bt.data?nt(Bt.data):(Rt.successCallback=function(){var lt;if(Rt){var Bt=null===(lt=Rt.resources)||void 0===lt?void 0:lt.get(Ht);Bt&&"success"===Bt.state&&Bt.data?nt(Bt.data):at(new Error("image load failed"+Ht))}else at(new Error("image load failed"+Ht))},Rt.failCallback=function(){te.getInstance().error("image ",Ht)})})):null;$t?(this.isImageFinished=!1,this.isLayoutFinished=!1,$t.then((function(nt){at.isImageFinished=!0;var Bt=ax.createCanvas({"width":lt.size[0],"height":lt.size[1],"dpr":1});Rt.maskCanvas=Bt;var Lt=Bt.getContext("2d");lt.removeWhiteBorder&&function(nt,at,lt){at.width=nt.width,at.height=nt.height;var Rt=at.getContext("2d",{"willReadFrequently":!0});Rt.clearRect(0,0,at.width,at.height),Rt.drawImage(nt,0,0);for(var Bt=at.width,Lt=Rt.getImageData(0,0,at.width,at.height),Ht=0,jt=Lt.height,$t=0,Kt=Lt.width,c=function(nt,at){for(var Rt=0;Rt<nt;++Rt)if(!lt(Lt,at,Rt))return!1;return!0},h=function(nt,at,Rt){for(var Bt=at;Bt<Rt;++Bt)if(!lt(Lt,Bt,nt))return!1;return!0};Ht<jt&&c(Bt,Ht);)++Ht;for(;jt-1>Ht&&c(Bt,jt-1);)--jt;for(;$t<Kt&&h($t,Ht,jt);)++$t;for(;Kt-1>$t&&h(Kt-1,Ht,jt);)--Kt;var te=Rt.getImageData($t,Ht,Kt-$t,jt-Ht);at.width=te.width,at.height=te.height,Rt.clearRect(0,0,at.width,at.height),Rt.putImageData(te,0,0)}(nt,Bt,Rt.isEmptyPixel);var Ht=function(nt,at){var lt=nt.width,Rt=nt.height,Bt=at[0]/lt;Rt*Bt>at[1]&&(Bt=at[1]/Rt);var Lt=Math.floor(Bt*lt),Ht=Math.floor(Bt*Rt);return{"x":(at[0]-Lt)/2,"y":(at[1]-Ht)/2,"width":Lt,"height":Ht,"scale":Bt}}(nt,lt.size);Lt.clearRect(0,0,lt.size[0],lt.size[1]),Lt.drawImage(nt,Ht.x,Ht.y,Ht.width,Ht.height),at.options.onUpdateMaskCanvas&&at.options.onUpdateMaskCanvas(Rt.maskCanvas)})).catch((function(nt){at.isImageFinished=!0}))):(this.isImageFinished=!0,this.isLayoutFinished=!0)}else if(Rt.shapeUrl&&("text"===Rt.shapeUrl.type||"geometric"===Rt.shapeUrl.type)){Rt.isEmptyPixel=sS(Rt.shapeUrl.backgroundColor);var Kt=lS(Rt.shapeUrl,lt.size[0],lt.size[1]);Rt.maskCanvas=Kt,this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(Kt),this.doLayout(),this.isImageFinished=!0,this.isLayoutFinished=!0}}},{"key":"canAnimate","value":function(){return!0}},{"key":"unfinished","value":function(){return!this.isLayoutFinished}},{"key":"output","value":function(){return this.progressiveResult}},{"key":"progressiveRun","value":function(){this.isImageFinished&&!this.isLayoutFinished&&(this.segmentationInput.maskCanvas&&this.doLayout(),this.isLayoutFinished=!0)}},{"key":"progressiveOutput","value":function(){return this.progressiveResult}},{"key":"doLayout","value":function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he,de,fe,pe=this,ve=this.segmentationInput,Ae=function(nt){for(var at=nt.size,lt=nt.maskCanvas,Rt=lt.getContext("2d",{"willReadFrequently":!0}).getImageData(0,0,lt.width,lt.height),Bt=new Array(at[0]*at[1]).fill(0),Lt=1,Ht=[[0,1],[1,0],[-1,0],[0,-1]],jt=[],$t=0;$t<at[1];$t++)for(var Kt=0;Kt<at[0];Kt++)if(0===Bt[$t*at[0]+Kt]&&!nt.isEmptyPixel(Rt,$t,Kt)){Bt[$t*at[0]+Kt]=Lt,jt.push([$t,Kt]);for(var te=0;te<jt.length;te++)for(var ne=0;ne<4;ne++){var re=jt[te][0]+Ht[ne][0],ae=jt[te][1]+Ht[ne][1];re=re<0?0:re>=at[1]?at[1]-1:re,ae=ae<0?0:ae>=at[0]?at[0]-1:ae,0!==Bt[re*at[0]+ae]||nt.isEmptyPixel(Rt,re,ae)||(Bt[re*at[0]+ae]=Lt,jt.push([re,ae]))}Lt++,jt=[]}for(var oe={},se={},le={},ue={},ce={},he={},de={"x1":1/0,"x2":-1/0,"y1":1/0,"y2":-1/0,"width":0,"height":0},fe=0;fe<at[1];fe++)for(var pe=0;pe<at[0];pe++){var ve=Bt[fe*at[0]+pe];0!==ve&&(G(fe,pe)&&(oe[ve]=oe[ve]||[],oe[ve].push([pe,fe]),ue[ve]||(ue[ve]=[1/0,-1/0,1/0,-1/0]),fe<ue[ve][0]&&(ue[ve][0]=fe),fe>ue[ve][1]&&(ue[ve][1]=fe),pe<ue[ve][2]&&(ue[ve][2]=pe),pe>ue[ve][3]&&(ue[ve][3]=pe),pe<de.x1&&(de.x1=pe),pe>de.x2&&(de.x2=pe),fe<de.y1&&(de.y1=fe),fe>de.y2&&(de.y2=fe)),se[ve]=se[ve]||0,se[ve]++)}var Ae=[];for(var we in oe){var Ce=oe[we],je=~~(Ce.reduce((function(nt,at){return nt+at[0]}),0)/Ce.length),Ne=~~(Ce.reduce((function(nt,at){return nt+at[1]}),0)/Ce.length);le[we]=[je,Ne],Ae.push.apply(Ae,m(Ce));var Ve=g(ue[we],4),Ge=Ve[0],ti=Ve[1],li=Ve[2],hi=Ve[3];ce[we]=~~Math.max(Math.sqrt(Math.pow(je-li,2)+Math.pow(Ne-Ge,2)),Math.sqrt(Math.pow(je-hi,2)+Math.pow(Ne-ti,2)),Math.sqrt(Math.pow(je-li,2)+Math.pow(Ne-ti,2)),Math.sqrt(Math.pow(je-hi,2)+Math.pow(Ne-Ge,2))),he[we]=(hi-li)/(ti-Ge)}var di=Object.keys(le).map((function(nt){return{"label":nt-1,"boundary":oe[nt],"area":se[nt],"center":le[nt],"maxPoint":ue[nt],"maxR":ce[nt],"ratio":he[nt]}}));de.width=de.x2-de.x1+1,de.height=de.y2-de.y1+1;var fi=~~(Ae.reduce((function(nt,at){return nt+at[0]}),0)/Ae.length),pi=~~(Ae.reduce((function(nt,at){return nt+at[1]}),0)/Ae.length),vi=~~Math.max(Math.sqrt(Math.pow(fi-de.x1,2)+Math.pow(pi-de.y1,2)),Math.sqrt(Math.pow(fi-de.x2,2)+Math.pow(pi-de.y2,2)),Math.sqrt(Math.pow(fi-de.x1,2)+Math.pow(pi-de.y2,2)),Math.sqrt(Math.pow(fi-de.x2,2)+Math.pow(pi-de.y1,2))),mi=de.width/de.height,_i=Object.keys(se).reduce((function(nt,at){return nt+se[at]}),0),bi={"regions":di,"labels":Bt,"labelNumber":Lt-1};return Object.assign(nt,{"segmentation":bi,"shapeBounds":de,"shapeMaxR":vi,"shapeRatio":mi,"shapeCenter":[fi,pi],"shapeArea":_i});function G(nt,lt){var Rt=[[0,1],[1,0],[-1,0],[0,-1]];if(0===nt||0===lt||nt===at[1]-1||lt===at[0]-1)return!0;for(var Lt=0;Lt<4;Lt++){var Ht=nt+Rt[Lt][0],jt=lt+Rt[Lt][1];if(Ht=Ht<0?0:Ht>=at[1]?at[1]-1:Ht,jt=jt<0?0:jt>=at[0]?at[0]-1:jt,0===Bt[Ht*at[0]+jt])return!0}return!1}}(ve);if(Ae.segmentation.regions.length){var we=this.options,Ce=this.data,je=we.colorMode||"ordinal",Ne={"getText":i0(we.text),"getFontSize":i0(we.fontSize),"fontSizeRange":we.fontSizeRange,"colorMode":je,"getColor":we.colorField?i0(we.colorField):i0(we.text),"getFillingColor":i0(we.fillingColorField),"colorList":we.colorList||("ordinal"===je?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),"getColorHex":i0(we.colorHexField),"getFontFamily":i0(we.fontFamily||"sans-serif"),"rotateList":we.rotateList||[0],"getPadding":i0(we.padding||1),"getFontStyle":i0(we.fontStyle||"normal"),"getFontWeight":i0(we.fontWeight||"normal"),"getFontOpacity":we.fontOpacity?i0(we.fontOpacity):function(){return 1}};J$(Ce,Ne,Ae);var Ve={"size":we.size,"ratio":we.ratio||.8,"shapeUrl":we.shape,"random":void 0===we.random||we.random,"textLayoutTimes":null!==(nt=we.textLayoutTimes)&&void 0!==nt?nt:3,"removeWhiteBorder":we.removeWhiteBorder,"layoutMode":null!==(at=we.layoutMode)&&void 0!==at?at:"default","fontSizeShrinkFactor":null!==(lt=we.fontSizeShrinkFactor)&&void 0!==lt?lt:.8,"stepFactor":null!==(Rt=we.stepFactor)&&void 0!==Rt?Rt:1,"importantWordCount":null!==(Bt=we.importantWordCount)&&void 0!==Bt?Bt:10,"globalShinkLimit":we.globalShinkLimit||.2,"fontSizeEnlargeFactor":null!==(Lt=we.fontSizeEnlargeFactor)&&void 0!==Lt?Lt:1.5,"fillingRatio":null!==(Ht=we.fillingRatio)&&void 0!==Ht?Ht:.7,"fillingTimes":null!==(jt=we.fillingTimes)&&void 0!==jt?jt:4,"fillingXStep":we.fillingXRatioStep?Math.max(Math.floor(we.size[0]*we.fillingXRatioStep),1):null!==($t=we.fillingXStep)&&void 0!==$t?$t:4,"fillingYStep":we.fillingYRatioStep?Math.max(Math.floor(we.size[1]*we.fillingYRatioStep),1):null!==(Kt=we.fillingYStep)&&void 0!==Kt?Kt:4,"fillingInitialFontSize":we.fillingInitialFontSize,"fillingDeltaFontSize":we.fillingDeltaFontSize,"fillingInitialOpacity":null!==(te=we.fillingInitialOpacity)&&void 0!==te?te:.8,"fillingDeltaOpacity":null!==(ne=we.fillingDeltaOpacity)&&void 0!==ne?ne:.05,"getFillingFontFamily":i0(we.fillingFontFamily||"sans-serif"),"getFillingFontStyle":i0(we.fillingFontStyle||"normal"),"getFillingFontWeight":i0(we.fillingFontWeight||"normal"),"getFillingPadding":i0(null!==(re=we.fillingPadding)&&void 0!==re?re:.4),"fillingRotateList":null!==(ae=we.fillingRotateList)&&void 0!==ae?ae:[0,90],"fillingDeltaFontSizeFactor":null!==(oe=we.fillingDeltaFontSizeFactor)&&void 0!==oe?oe:.2,"fillingColorList":we.fillingColorList||["#537EF5"],"sameColorList":!1,"minInitFontSize":null!==(se=we.minInitFontSize)&&void 0!==se?se:10,"minFontSize":null!==(le=we.minFontSize)&&void 0!==le?le:4,"minFillFontSize":null!==(ue=we.minFillFontSize)&&void 0!==ue?ue:2},Ge=function(nt,at){if(1===at.length&&"#537EF5"===at[0])return!0;if(!Array.isArray(nt)||!Array.isArray(at)||nt.length!==at.length)return!1;for(var lt=0;lt<nt.length;lt++)if(nt[lt]!==at[lt])return!1;return!0}(Ne.colorList,Ve.fillingColorList);Ve.sameColorList=Ge,Z$(Ce,Ne,Ve,we),function(nt,at,lt,Rt){var Bt=at.getText,Lt=lt.fillingInitialFontSize,Ht=lt.fillingDeltaFontSize,jt=lt.fillingRatio,$t=Math.ceil(Math.sqrt(Rt.shapeArea)/4);if(!Lt||!Ht){var Kt,te=jt/100,ne=nt.reduce((function(nt,at){var lt=j$(Bt(at));return lt>$t?nt:nt+lt}),0)/nt.length;if(0===ne)Kt=8;else{var re=.2*Rt.shapeArea;Kt=Math.sqrt(te*(re/ne))}Lt=~~Kt,Ht=Kt*lt.fillingDeltaFontSizeFactor,Object.assign(lt,{"fillingInitialFontSize":Lt,"fillingDeltaFontSize":Ht})}}(Ce,Ne,Ve,Ae);var ti=Ne.getText,li=Ne.getFontFamily,hi=Ne.getFontStyle,di=Ne.getFontWeight,fi=Ne.getPadding,pi=Ne.getColor,vi=Ne.getFillingColor,mi=Ne.getColorHex,_i=Ne.fontSizeScale,bi=Ne.colorScale,Mi=Ne.fillingColorScale,Ti=Ne.getFontOpacity,Ii=Ne.rotateList,Bi=Ce.map((function(nt){var at,lt;return{"x":0,"y":0,"weight":0,"text":ti(nt),"fontFamily":li(nt),"fontWeight":di(nt),"fontStyle":hi(nt),"rotate":Ii[~~(ve.randomGenerator()*Ii.length)],"fontSize":Math.max(Ve.minInitFontSize,~~_i(nt)),"opacity":Ti(nt),"padding":fi(nt),"color":mi&&mi(nt)||bi&&bi(pi(nt))||"black","fillingColor":!vi||(null===(at=we.colorField)||void 0===at?void 0:at.field)===(null===(lt=we.fillingColorField)||void 0===lt?void 0:lt.field)&&Ge?void 0:mi&&mi(nt)||Mi&&Mi(vi(nt))||"black","datum":nt,"visible":!0,"hasPlaced":!1}})),zi=St(Bi.map((function(nt){return nt.fontSize})));Bi.forEach((function(nt){return nt.weight=nt.fontSize/zi})),Bi.sort((function(nt,at){return at.weight-nt.weight}));for(var Wi,Ui,$i=X$(Bi,Ve,Ae),qi=$i.fillingWords,Ki=$i.successedWords,Qi=$i.failedWords,Ji=null!==(he=null===(ce=we.text)||void 0===ce?void 0:ce.field)&&void 0!==he?he:"textKey",dn=null!==(de=we.dataIndexKey)&&void 0!==de?de:"defaultDataIndexKey",fn=we.as?Object.assign(Object.assign({},p0),we.as):p0,vn=[],gn=0;gn<Bi.length;++gn)(Ui=(Wi=Bi[gn]).datum)[fn.x]=Wi.x,Ui[fn.y]=Wi.y,Ui[fn.fontFamily]=Wi.fontFamily,Ui[fn.fontSize]=Wi.fontSize,Ui[fn.fontStyle]=Wi.fontStyle,Ui[fn.fontWeight]=Wi.fontWeight,Ui[fn.angle]=Me(Wi.rotate),Ui[fn.opacity]=Wi.opacity,Ui[fn.visible]=Wi.visible,Ui[fn.isFillingWord]=!1,Ui[fn.color]=Wi.color,Ui[dn]="".concat(Wi.text,"_").concat(gn,"_keyword"),vn.push(Ui);var yn=[];if(qi.forEach((function(nt,at){var lt,Rt,Bt=Object.assign({},nt.datum);Bt[fn.x]=nt.x,Bt[fn.y]=nt.y,Bt[fn.fontFamily]=nt.fontFamily,Bt[fn.fontSize]=nt.fontSize,Bt[fn.fontStyle]=nt.fontStyle,Bt[fn.fontWeight]=nt.fontWeight,Bt[fn.angle]=Me(nt.rotate),Bt[fn.opacity]=nt.opacity,Bt[fn.visible]=nt.visible,Bt[fn.isFillingWord]=!0,Bt[fn.color]=vi?(null===(lt=we.colorField)||void 0===lt?void 0:lt.field)===(null===(Rt=we.fillingColorField)||void 0===Rt?void 0:Rt.field)&&Ge?nt.color:nt.fillingColor:Ve.fillingColorList[~~(ve.randomGenerator()*Ve.fillingColorList.length)],Bt[Ji]=nt.text,Bt[dn]="".concat(nt.text,"_").concat(at,"_fillingWords"),yn.push(Bt)})),this.view&&this.view.emit){this.view.emit(h0.AFTER_WORDCLOUD_SHAPE_LAYOUT,{"successedWords":Ki,"failedWords":Qi});var mn=null===(fe=this.view.renderer)||void 0===fe?void 0:fe.stage();mn&&mn.hooks.afterRender.tap(h0.AFTER_WORDCLOUD_SHAPE_DRAW,(function(){pe.view.emit(h0.AFTER_WORDCLOUD_SHAPE_DRAW,{"successedWords":Ki,"failedWords":Qi}),mn.hooks.afterRender.unTap(h0.AFTER_WORDCLOUD_SHAPE_DRAW)}))}this.progressiveResult=vn.concat(yn)}}},{"key":"release","value":function(){this.segmentationInput=null,this.data=null,this.progressiveResult=null,this.options=null}}]),Z$=function(nt,at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te=at.colorMode,ne=at.getColor,re=at.getFillingColor,ae=lt.sameColorList,oe=at.colorList,se=lt.fillingColorList;if("ordinal"===te){var le=nt.map((function(nt){return ne(nt)}));if($t=function(nt){return(new DI).domain(le).range(oe).scale(nt)},re&&((null===(Bt=Rt.colorField)||void 0===Bt?void 0:Bt.field)!==(null===(Lt=Rt.fillingColorField)||void 0===Lt?void 0:Lt.field)||!ae)){var ue=nt.map((function(nt){return re(nt)}));Kt=function(nt){return(new DI).domain(ue).range(se).scale(nt)}}}else{1===oe.length&&(oe=[oe[0],oe[0]]);var ce=(new EB).domain(e0(ne,nt)).range(oe);if($t=function(nt){return ce.scale(nt)},re&&((null===(Ht=Rt.colorField)||void 0===Ht?void 0:Ht.field)!==(null===(jt=Rt.fillingColorField)||void 0===jt?void 0:jt.field)||!ae)){1===se.length&&(se=[se[0],se[0]]);var he=(new EB).domain(e0(re,nt)).range(se);Kt=function(nt){return he.scale(nt)}}}Object.assign(at,{"colorScale":$t,"fillingColorScale":Kt})},J$=function(nt,at,lt){var Rt,Bt,Lt=at.fontSizeRange,Ht=at.getFontSize,jt=at.getText;if(Ht){if(Ht&&Lt){var $t=(new eO).domain(e0(Ht,nt)).range(Lt);Rt=function(nt){return $t.scale(Ht(nt))}}else if(Ht&&H(Ht)&&!Lt){var Kt=g(e0(Ht,nt),2),te=Kt[0],ne=Kt[1],re=nt.map((function(nt){return{"text":jt(nt),"value":Ht(nt),"weight":ne===te?1:(Ht(nt)-te)/(ne-te)}})),ae=Q$(re,lt,!0);Lt=[~~(.5*ae),~~ae];var oe=(new eO).domain(e0(Ht,nt)).range(Lt);Rt=function(nt){return oe.scale(Ht(nt))}}}else{var se=nt.map((function(nt){return{"text":jt(nt)}})),le=Q$(se,lt,!1);Rt="function"==typeof(Bt=le)?Bt:function(){return Bt}}Object.assign(at,{"getFontSize":Ht,"fontSizeRange":Lt,"fontSizeScale":Rt})},Q$=function(nt,at,lt){var Rt=at.shapeArea,Bt=at.ratio,Lt=at.segmentation.regions,Ht=Math.ceil(Math.sqrt(Rt)/12),jt=nt.reduce((function(nt,at){var Rt=j$(at.text);return Rt<Ht?nt+Rt*(lt?Math.pow(.5+.5*at.weight,2):1):nt}),0);if(0===jt)return 12;var $t=20;if(1===Lt.length)$t=Math.sqrt(Bt*(Rt/(1.7*jt)));else{for(var Kt=[],te=0;te<Lt.length;te++){var ne=Lt[te].area,re=Lt[te].ratio,ae=ne/Rt;if(!(ae<.1)){var oe=ae*(jt*(re<1?2.7-re:1.7)),se=Math.sqrt(Bt*(ne/oe));Kt.push(se)}}$t=Kt.length?Math.min.apply(Math,Kt):Math.sqrt(Bt*(Rt/(1.7*jt)))}return $t},e0=function(nt,at){for(var lt,Rt=1/0,Bt=-1/0,Lt=at.length,Ht=0;Ht<Lt;++Ht)(lt=Pt(nt(at[Ht])))<Rt&&(Rt=lt),lt>Bt&&(Bt=lt);return 1===at.length&&Rt===Bt&&(Rt-=1e4),[Rt,Bt]},i0=function(nt){return nt?"string"==typeof nt||"number"==typeof nt?function(){return nt}:H(nt)?nt:function(at){return at[nt.field]}:null},n0=function(nt,at,lt,Rt){if(!nt.size||j(nt.size[0])||j(nt.size[1])||nt.size[0]<=0||nt.size[1]<=0)return te.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];if(nt.size=[Math.ceil(nt.size[0]),Math.ceil(nt.size[1])],nt.shape||Xk("WordcloudShape shape must be specified."),nt.text||Xk("WordcloudShape text must be specified."),(null==Rt?void 0:Rt.emit)&&Rt.emit(h0.BEFORE_WORDCLOUD_SHAPE_LAYOUT),!at||0===at.length)return[];var Bt=new v0(nt,Rt);return Bt.layout(at),Bt.unfinished()?{"progressive":Bt}:Bt.output()},r0=function(){Pj.registerTransform("wordcloudShape",{"transform":n0,"markPhase":"beforeJoin"},!0)},g0=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.wordCloud,lt}return S(i,at),i.type=nt.SeriesTypeEnum.wordCloud,i}(XJ),o0=function(){z$(),oJ(),Tz.registerAnimation("wordCloud",(function(nt,at){return{"appear":g$(nt,at),"enter":{"type":"fadeIn"},"exit":{"type":"fadeOut"},"disappear":{"type":"fadeOut"}}})),Tz.registerSeries(g0.type,g0)},y0=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.wordCloud3d,lt}return S(i,at),i.prototype._wordCloudTransformOption=function(){var nt;return A(A({},at.prototype._wordCloudTransformOption.call(this)),{"postProjection":null!==(nt=this._spec.postProjection)&&void 0!==nt?nt:"StereographicProjection","depth_3d":this._spec.depth_3d})},i.prototype._wordCloudShapeTransformOption=function(){var nt;return A(A({},at.prototype._wordCloudShapeTransformOption.call(this)),{"postProjection":null!==(nt=this._spec.postProjection)&&void 0!==nt?nt:"StereographicProjection","depth_3d":this._spec.depth_3d})},i.prototype.initMark=function(){this._wordMark=this._createMark(XJ.mark.word,{"groupKey":this._seriesField,"isSeriesMark":!0},{"support3d":!0})},i.prototype.initMarkStyle=function(){at.prototype.initMarkStyle.call(this);var nt=this._wordMark;nt&&this.setMarkStyle(nt,{"z":function(nt){var at;return null!==(at=nt.z)&&void 0!==at?at:0}},"normal",EU.Series)},i.prototype.initAnimation=function(){var nt,at,lt=this,Rt=null!==(nt=this._padding)&&void 0!==nt?nt:{};this._wordMark&&this._wordMark.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("wordCloud3d"))||void 0===at?void 0:at((function(){var nt,at=lt.getCompiler().getVGrammarView(),Bt=at.width()-Rt.left||0-Rt.right||0,Lt=at.height()-Rt.top||0-Rt.bottom||0,Ht=Math.max(Bt,Lt)/2;return{"center":{"x":Ht,"y":Ht,"z":null!==(nt=lt._spec.depth_3d)&&void 0!==nt?nt:Ht},"r":Ht}})),aX("word",this._spec,this._markAttributeContext)))},i.type=nt.SeriesTypeEnum.wordCloud3d,i}(XJ),l0=function(){z$(),oJ(),Tz.registerAnimation("wordCloud3d",(function(nt){return{"enter":v$(nt)}})),Tz.registerSeries(y0.type,y0)},u0=function(nt,at){var lt,Rt,Bt=nt.map((function(nt){return A({},nt)}));if(!Bt||0===Bt.length)return Bt;var Lt=at.valueField,Ht=at.asTransformRatio,jt=at.asReachRatio,$t=at.asHeightRatio,Kt=at.asValueRatio,te=at.asNextValueRatio,ne=at.asLastValueRatio,re=at.asLastValue,ae=at.asCurrentValue,oe=at.asNextValue,se=at.heightVisual,le=void 0!==se&&se,ue=at.isCone,ce=void 0===ue||ue,he=at.range,de=Bt.reduce((function(nt,at){return Math.max(nt,Number.parseFloat(at[Lt])||-1/0)}),-1/0),fe=Bt.reduce((function(nt,at){return Math.min(nt,Number.parseFloat(at[Lt])||1/0)}),1/0),pe=[null!==(lt=null==he?void 0:he.min)&&void 0!==lt?lt:fe,null!==(Rt=null==he?void 0:he.max)&&void 0!==Rt?Rt:de];return Bt.forEach((function(nt,at){var lt,Rt,se=Number.parseFloat(nt[Lt]),ue=Number.parseFloat(null===(lt=Bt[at-1])||void 0===lt?void 0:lt[Lt]),he=Number.parseFloat(null===(Rt=Bt[at+1])||void 0===Rt?void 0:Rt[Lt]),de=Q(he*se)&&0!==se?he/se:0,fe=Q(se*ue)&&0!==ue?se/ue:0;re&&(nt[re]=ue),oe&&(nt[oe]=he),Ht&&(nt[Ht]=de),jt&&(nt[jt]=0===at?1:fe),$t&&(nt[$t]=!0===le?de:1/Bt.length),Kt&&(nt[Kt]=se/pe[1]),te&&(nt[te]=at===Bt.length-1?ce?0:nt[Kt]:he/pe[1]),ne&&(nt[ne]=0===at?1:ue/pe[1]),ae&&(nt[ae]=se)})),Bt},c0=function(nt,at){var lt,Rt,Bt=null===(Rt=null===(lt=nt[0])||void 0===lt?void 0:lt.latestData)||void 0===Rt?void 0:Rt.map((function(nt){return A({},nt)}));return Bt&&0!==Bt.length?(Bt.shift(),Bt.forEach((function(nt){nt[at.asIsTransformLevel]=!0})),Bt):Bt},m0="".concat(OF,"_FUNNEL_TRANSFORM_RATIO"),_0="".concat(OF,"_FUNNEL_REACH_RATIO"),b0="".concat(OF,"_FUNNEL_HEIGHT_RATIO"),x0="".concat(OF,"_FUNNEL_VALUE_RATIO"),k0="".concat(OF,"_FUNNEL_LAST_VALUE_RATIO"),S0="".concat(OF,"_FUNNEL_NEXT_VALUE_RATIO"),w0="".concat(OF,"_FUNNEL_LAST_VALUE"),C0="".concat(OF,"_FUNNEL_CURRENT_VALUE"),M0="".concat(OF,"_FUNNEL_NEXT_VALUE"),T0="".concat(OF,"_FUNNEL_TRANSFORM_LEVEL"),P0=function(nt){function e(at){var lt,Rt,Bt=this;return(Bt=nt.call(this,at)||this).dimensionTooltipTitleCallback=function(nt,at){var lt,Rt,Lt,Ht=Bt.series;return"transform"===(null===(lt=null==at?void 0:at.mark)||void 0===lt?void 0:lt.name)?Bt._transformRatioText:null!==(Rt=Bt._getDimensionData(nt))&&void 0!==Rt?Rt:null===(Lt=nt.properties)||void 0===Lt?void 0:Lt["".concat(Ht.getCategoryField())]},Bt.markTooltipValueCallback=function(nt,at){var lt;if("transform"===(null===(lt=null==at?void 0:at.mark)||void 0===lt?void 0:lt.name)){var Rt=null==nt?void 0:nt[_0];return"".concat((100*Rt).toFixed(1),"%")}return Bt._getMeasureData(nt)},Bt.markTooltipKeyCallback=function(nt,at){var lt;if("transform"===(null===(lt=null==at?void 0:at.mark)||void 0===lt?void 0:lt.name))return Bt._transformRatioText;var Rt=Bt._seriesCacheInfo,Lt=Rt.dimensionFields,Ht=Rt.seriesFields,jt=Lt[Lt.length-1];return N(Ht[0])?null==nt?void 0:nt[Ht[0]]:null==nt?void 0:nt[jt]},Bt._transformRatioText=null!==(Rt=null===(lt=at.getSpec())||void 0===lt?void 0:lt.transformRatioText)&&void 0!==Rt?Rt:"",Bt}return S(e,nt),e}(zY),I0=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"points":[]})},e}(dY),B0=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"lineWidth":0})},e.type="polygon",e}(I0),A0=function(){Tz.registerMark(B0.type,B0),LP(),EP(),Pj.registerGraphic(MH.polygon,ky),iX()},$0=A(A({},GY),((d0={}).funnel={"name":"funnel","type":"polygon"},d0.transform={"name":"transform","type":"polygon"},d0.transformLabel={"name":"transformLabel","type":"text"},d0.outerLabel={"name":"outerLabel","type":"text"},d0.outerLabelLine={"name":"outerLabelLine","type":"rule"},d0)),q0=A(A({},GY),((f0={}).funnel3d={"name":"funnel3d","type":"pyramid3d"},f0.transform3d={"name":"transform3d","type":"pyramid3d"},f0.transformLabel={"name":"transformLabel","type":"text"},f0.outerLabel={"name":"outerLabel","type":"text"},f0.outerLabelLine={"name":"outerLabelLine","type":"rule"},f0)),Z0=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"funnel"),nt.isTransform&&this._addMarkLabelSpec(nt,"transform","transformLabel")},e}(xX),Q0=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.funnel,lt._funnelMarkName="funnel",lt._funnelMarkType="polygon",lt._transformMarkName="transform",lt._transformMarkType="polygon",lt.transformerConstructor=Z0,lt._funnelMark=null,lt._funnelTransformMark=null,lt._labelMark=null,lt._transformLabelMark=null,lt._funnelOuterLabelMark={},lt}return S(i,at),i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getValueField=function(){return this._valueField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.setAttrFromSpec=function(){var nt,lt,Rt,Bt,Lt;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=null!==(nt=this._spec.funnelOrient)&&void 0!==nt?nt:"top",this._shape=null!==(lt=this._spec.shape)&&void 0!==lt?lt:"trapezoid",this._minLabelLineWidth=null!==(Lt=null===(Bt=null===(Rt=this._spec.outerLabel)||void 0===Rt?void 0:Rt.line)||void 0===Bt?void 0:Bt.minLength)&&void 0!==Lt?Lt:20,this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",!this._seriesField&&this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)},i.prototype.initData=function(){if(at.prototype.initData.call(this),this._data){GW(this._dataSet,"funnel",u0),GW(this._dataSet,"funnelTransform",c0);var nt=new Es(this._dataSet,{"name":"".concat(OF,"_series_").concat(this.id,"_viewDataTransform")});nt.parse([this.getViewData()],{"type":"dataview"}),this._viewDataTransform=new jY(this._option,nt)}},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._viewDataTransform)||void 0===nt||nt.compile()},i.prototype.getStatisticFields=function(){var nt=[];return nt.push({"key":this._categoryField,"operations":["values"]}),nt.push({"key":this._valueField,"operations":["max","min"]}),nt},i.prototype._statisticViewData=function(){var nt,lt,Rt,Bt,Lt,Ht,jt,$t,Kt;at.prototype._statisticViewData.call(this),this._data.getDataView().transform({"type":"funnel","options":{"valueField":this.getValueField(),"isCone":this._spec.isCone,"asCurrentValue":C0,"asTransformRatio":m0,"asReachRatio":_0,"asHeightRatio":b0,"asValueRatio":x0,"asNextValueRatio":S0,"asLastValueRatio":k0,"asLastValue":w0,"asNextValue":M0,"range":{"min":null!==(lt=null===(nt=this._spec.range)||void 0===nt?void 0:nt.min)&&void 0!==lt?lt:null===(Bt=null===(Rt=this.getViewDataStatistics().latestData)||void 0===Rt?void 0:Rt[this.getValueField()])||void 0===Bt?void 0:Bt.min,"max":null!==(Ht=null===(Lt=this._spec.range)||void 0===Lt?void 0:Lt.max)&&void 0!==Ht?Ht:null===($t=null===(jt=this.getViewDataStatistics().latestData)||void 0===jt?void 0:jt[this.getValueField()])||void 0===$t?void 0:$t.max}}}),null===(Kt=this._viewDataTransform.getDataView())||void 0===Kt||Kt.transform({"type":"funnelTransform","options":{"asIsTransformLevel":T0}})},i.prototype.initMark=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne;if(this._funnelMark=this._createMark(A(A({},i.mark.funnel),{"name":this._funnelMarkName,"type":this._funnelMarkType}),{"themeSpec":null===(nt=this._theme)||void 0===nt?void 0:nt.funnel,"groupKey":this._seriesField,"isSeriesMark":!0,"stateSort":null===(at=this._spec.funnel)||void 0===at?void 0:at.stateSort,"noSeparateStyle":!0},{"setCustomizedShape":null===(lt=this._spec.funnel)||void 0===lt?void 0:lt.customShape,"morph":lX(this._spec,this._funnelMarkName),"morphElementKey":this._seriesField}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(A(A({},i.mark.transform),{"name":this._transformMarkName,"type":this._transformMarkType}),{"themeSpec":null===(Rt=this._theme)||void 0===Rt?void 0:Rt.transform,"skipBeforeLayouted":!0,"dataView":this._viewDataTransform.getDataView(),"dataProductId":this._viewDataTransform.getProductId(),"stateSort":null===(Bt=this._spec.transform)||void 0===Bt?void 0:Bt.stateSort,"noSeparateStyle":!0},{"setCustomizedShape":null===(Lt=this._spec.transform)||void 0===Lt?void 0:Lt.customShape})),null===(jt=null===(Ht=this._spec)||void 0===Ht?void 0:Ht.outerLabel)||void 0===jt?void 0:jt.visible){var re=(null!==($t=this._spec.outerLabel)&&void 0!==$t?$t:{}).line,ae=(null!==(te=null===(Kt=this._theme)||void 0===Kt?void 0:Kt.outerLabel)&&void 0!==te?te:{}).line;this._funnelOuterLabelMark.label=this._createMark(i.mark.outerLabel,{"themeSpec":null===(ne=this._theme)||void 0===ne?void 0:ne.outerLabel,"markSpec":this._spec.outerLabel,"skipBeforeLayouted":!0,"noSeparateStyle":!0}),this._funnelOuterLabelMark.line=this._createMark(i.mark.outerLabelLine,{"themeSpec":ae,"markSpec":re,"depend":[this._funnelOuterLabelMark.label],"noSeparateStyle":!0})}},i.prototype.initTooltip=function(){this._tooltipHelper=new P0(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)},i.prototype.getDimensionField=function(){return this._seriesField?[this._seriesField]:[]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.getGroupFields=function(){return null},i.prototype.initMarkStyle=function(){var nt=this,at=this._funnelMark;at&&this.setMarkStyle(at,{"points":function(at){return nt.getPoints(at)},"visible":function(at){return N(at[nt._valueField])},"fill":this.getColorAttribute()},"normal",EU.Series);var lt=this._funnelTransformMark;lt&&this.setMarkStyle(lt,{"points":function(at){return nt.getPoints(at)}},"normal",EU.Series);var Rt=this._funnelOuterLabelMark.label;Rt&&(this.setMarkStyle(Rt,{"text":function(at){return"".concat(at[nt.getCategoryField()])},"x":function(at){return nt._computeOuterLabelPosition(at).x},"y":function(at){return nt._computeOuterLabelPosition(at).y},"textAlign":function(at){return nt._computeOuterLabelPosition(at).align},"textBaseline":function(at){return nt._computeOuterLabelPosition(at).textBaseline},"maxLineWidth":function(at){return nt._computeOuterLabelLimit(at)},"width":0,"height":0},"normal",EU.Series),H(this._spec.outerLabel.formatMethod)&&this.setMarkStyle(Rt,{"text":function(at){return nt._spec.outerLabel.formatMethod("".concat(at[nt.getCategoryField()]),at)}},"normal",EU.User_Mark));var Bt=this._funnelOuterLabelMark.line;Bt&&Rt&&this.setMarkStyle(Bt,{"x":function(at){return nt._computeOuterLabelLinePosition(at).x1},"y":function(at){return nt._computeOuterLabelLinePosition(at).y1},"x1":function(at){return nt._computeOuterLabelLinePosition(at).x2},"y1":function(at){return nt._computeOuterLabelLinePosition(at).y2}},"normal",EU.Series)},i.prototype.initLabelMarkStyle=function(nt){var at,lt,Rt,Bt=this;if(nt){var Lt=nt.getTarget(),Ht=nt.getComponent();Lt===this._funnelMark?(this._labelMark=nt,this.setMarkStyle(nt,{"text":function(nt){return"".concat(nt[Bt.getCategoryField()]," ").concat(nt[Bt.getValueField()])},"x":function(nt){return Bt._computeLabelPosition(nt).x},"y":function(nt){return Bt._computeLabelPosition(nt).y},"maxLineWidth":function(nt){return Bt._computeLabelLimit(nt,Bt._spec.label)},"stroke":this.getColorAttribute()},"normal",EU.Series),(null===(lt=this._funnelOuterLabelMark)||void 0===lt?void 0:lt.label)&&this._funnelOuterLabelMark.label.setDepend(Ht),(null===(Rt=this._funnelOuterLabelMark)||void 0===Rt?void 0:Rt.line)&&(at=this._funnelOuterLabelMark.line).setDepend.apply(at,P([],E(this._funnelOuterLabelMark.line.getDepend()),!1))):this._funnelTransformMark&&Lt===this._funnelTransformMark&&(this._transformLabelMark=nt,this.setMarkStyle(nt,{"text":function(nt){var at=KO(_0).bind(Bt)(nt);return"".concat((100*at).toFixed(1),"%")},"x":function(nt){return Bt._computeLabelPosition(nt).x},"y":function(nt){return Bt._computeLabelPosition(nt).y},"maxLineWidth":function(nt){return Bt._computeLabelLimit(nt,Bt._spec.transformLabel)}},"normal",EU.Series))}},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt=this,$t=null!==(lt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset)&&void 0!==lt?lt:"clipIn";"clipIn"===$t&&this._rootMark&&this._rootMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("cartesianGroupClip"))||void 0===Rt?void 0:Rt({"direction":function(){return jt._isHorizontal()?"x":"y"},"width":function(){var nt=jt.getRootMark().getProduct();if(nt){var at=nt.getBounds(),lt=at.x1,Rt=at.x2;return Math.max(lt,Rt)}return jt.getLayoutRect().width},"height":function(){var nt=jt.getRootMark().getProduct();if(nt){var at=nt.getBounds(),lt=at.y1,Rt=at.y2;return Math.max(lt,Rt)}return jt.getLayoutRect().height},"orient":function(){return jt._isReverse()?"negative":"positive"}},$t),aX("group",this._spec,this._markAttributeContext))),[null===(Bt=this._funnelOuterLabelMark)||void 0===Bt?void 0:Bt.label].forEach((function(nt){nt&&nt.setAnimationConfig(rX(Tz.getAnimationInKey("fadeInOut")(),aX(nt.name,jt._spec,jt._markAttributeContext)))})),[this._funnelMark,this._funnelTransformMark].forEach((function(nt){nt&&nt.setAnimationConfig(rX(Tz.getAnimationInKey("funnel")({},$t),aX(nt.name,jt._spec,jt._markAttributeContext)))})),(null===(Lt=this._funnelOuterLabelMark)||void 0===Lt?void 0:Lt.line)&&this._funnelOuterLabelMark.line.setAnimationConfig(rX(null===(Ht=Tz.getAnimationInKey("fadeInOut"))||void 0===Ht?void 0:Ht(),aX("outerLabelLine",this._spec,this._markAttributeContext)))},i.prototype.initGroups=function(){},i.prototype.getStackGroupFields=function(){return[]},i.prototype.getStackValueField=function(){return null},i.prototype.initEvent=function(){var nt,lt=this;at.prototype.initEvent.call(this),null===(nt=this._viewDataTransform.getDataView())||void 0===nt||nt.target.addListener("change",(function(nt){lt._viewDataTransform.updateData()}))},i.prototype.getPoints=function(nt){var at,lt,Rt=this.isTransformLevel(nt),Bt=this._getMainAxisLength(Rt)/2;Rt?(at="rect"===this._shape?this._getSecondaryAxisLength(nt[k0])/2:this._getSecondaryAxisLength(nt[x0])/2,lt=this._getSecondaryAxisLength(nt[x0])/2):(at=this._getSecondaryAxisLength(nt[x0])/2,lt="rect"===this._shape?at:this._getSecondaryAxisLength(nt[S0])/2);var Lt=this._getPositionByData(nt),Ht=Lt.x,jt=Lt.y,$t=this._getPolygonPoints([Ht,jt],at,lt,at,lt,Bt);return"center"!==this._funnelAlign&&this._adjustPoints($t),$t},i.prototype.isTransformLevel=function(nt){return!!(null==nt?void 0:nt[T0])},i.prototype._buildMarkAttributeContext=function(){at.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)},i.prototype.valueToPosition=function(nt){var at,lt,Rt,Bt=this,Lt=null===(Rt=null===(lt=null===(at=this.getViewData())||void 0===at?void 0:at.latestData)||void 0===lt?void 0:lt.find)||void 0===Rt?void 0:Rt.call(lt,(function(at){return at[Bt._categoryField]===nt}));return N(Lt)?this._getPolygonCenter(this.getPoints(Lt)):null},i.prototype.dataToPosition=function(nt,at){return at&&!this.isDatumInViewData(nt)?null:this.valueToPosition(nt[this._categoryField])},i.prototype.dataToPositionX=function(nt){var at;return null===(at=this.dataToPosition(nt))||void 0===at?void 0:at.x},i.prototype.dataToPositionY=function(nt){var at;return null===(at=this.dataToPosition(nt))||void 0===at?void 0:at.y},i.prototype.dataToPositionZ=function(nt){return 0},i.prototype._getMainAxisLength=function(nt){var at;void 0===nt&&(nt=!1);var lt=this.getViewData().latestData.length,Rt=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,Bt=!!this._spec.isTransform,Lt=Bt?0:null!==(at=this._spec.gap)&&void 0!==at?at:0,Ht=Bt?Math.max(0,lt-1):0,jt=this._spec.heightRatio||.5,$t=(Rt-Lt*Math.max(0,lt-1))/(lt+jt*Ht);return nt?Bt?$t*jt:0:$t},i.prototype._getSecondaryAxisLength=function(nt){var at=Number.isNaN(nt)||!Number.isFinite(nt)?0:nt,lt=this._computeMaxSize(),Rt=this._computeMinSize();return Rt+(lt-Rt)*at},i.prototype._getPositionByData=function(nt){var at,lt=this,Rt=null===(at=this.getViewData().latestData)||void 0===at?void 0:at.findIndex((function(at){return at[lt._categoryField]===nt[lt._categoryField]&&at[$z]===nt[$z]}));if(!N(Rt)||Rt<0)return{};var Bt=this.isTransformLevel(nt),Lt=this._isHorizontal(),Ht=Lt?this.getLayoutRect().height:this.getLayoutRect().width,jt=Lt?this.getLayoutRect().width:this.getLayoutRect().height,$t=Ht/2,Kt=0,te=this._getMainAxisLength(),ne=this._getMainAxisLength(!0);return Kt+=Rt*(te+ne),Kt+=Bt?-ne/2:te/2,!this._spec.isTransform&&this._spec.gap&&(Kt+=this._spec.gap*Rt),this._isReverse()&&(Kt=jt-Kt),this._isHorizontal()?{"x":Kt,"y":$t}:{"x":$t,"y":Kt}},i.prototype._getPolygonPoints=function(nt,at,lt,Rt,Bt,Lt){var Ht=nt[0],jt=nt[1];switch(this._funnelOrient){case"left":return[{"x":Ht-Lt,"y":jt+at},{"x":Ht-Lt,"y":jt-Rt},{"x":Ht+Lt,"y":jt-Bt},{"x":Ht+Lt,"y":jt+lt}];case"right":return[{"x":Ht+Lt,"y":jt-Rt},{"x":Ht+Lt,"y":jt+Rt},{"x":Ht-Lt,"y":jt+lt},{"x":Ht-Lt,"y":jt-lt}];case"bottom":return[{"x":Ht+at,"y":jt+Lt},{"x":Ht-Rt,"y":jt+Lt},{"x":Ht-Bt,"y":jt-Lt},{"x":Ht+lt,"y":jt-Lt}];default:return[{"x":Ht-at,"y":jt-Lt},{"x":Ht+Rt,"y":jt-Lt},{"x":Ht+Bt,"y":jt+Lt},{"x":Ht-lt,"y":jt+Lt}]}},i.prototype._getPolygonCenter=function(nt){if(this._isHorizontal()){var at=(nt[0].x+nt[3].x)/2,lt=(nt[0].y+nt[3].y)/2;return{"x":(at+(nt[1].x+nt[2].x)/2)/2,"y":(lt+(nt[1].y+nt[2].y)/2)/2}}var Rt=(nt[0].x+nt[3].x)/2,Bt=(nt[0].y+nt[3].y)/2;return{"x":(Rt+(nt[1].x+nt[2].x)/2)/2,"y":(Bt+(nt[1].y+nt[2].y)/2)/2}},i.prototype._adjustPoints=function(nt){var at,lt,Rt;return this._isHorizontal()?(Rt="y","left"===this._funnelOrient?(at="bottom"===this._funnelAlign?-nt[1].y:nt[1].y,lt="bottom"===this._funnelAlign?-nt[2].y:nt[2].y):(at="bottom"===this._funnelAlign?-nt[0].y:nt[0].y,lt="bottom"===this._funnelAlign?-nt[3].y:nt[3].y)):(Rt="x","top"===this._funnelOrient?(at="left"===this._funnelAlign?nt[0].x:-nt[0].x,lt="left"===this._funnelAlign?nt[3].x:-nt[3].x):(at="left"===this._funnelAlign?nt[1].x:-nt[1].x,lt="left"===this._funnelAlign?nt[2].x:-nt[2].x)),nt[0][Rt]-=at,nt[1][Rt]-=at,nt[2][Rt]-=lt,nt[3][Rt]-=lt,nt},i.prototype._computeLabelPosition=function(nt){var at=this.getPoints(nt);return this._getPolygonCenter(at)},i.prototype._computeLabelLimit=function(nt,at){var lt=null==at?void 0:at.limit;if(Z(lt))return lt;var Rt=this.getPoints(nt);return"shapeSize"===lt?this._isHorizontal()?Math.abs(Rt[3].x-Rt[0].x):(Math.abs(Rt[0].x-Rt[1].x)+Math.abs(Rt[2].x-Rt[3].x))/2:this._isHorizontal()?Math.abs(Rt[3].x-Rt[0].x):void 0},i.prototype._computeOuterLabelPosition=function(nt){var at,lt,Rt,Bt,Lt,Ht=null===(lt=this._spec.outerLabel)||void 0===lt?void 0:lt.position,jt="center",$t="middle";if(Ht=this._isHorizontal()?["top","bottom"].includes(Ht)?Ht:"bottom"===this._funnelAlign?"top":"bottom":["left","right"].includes(Ht)?Ht:"left"===this._funnelAlign?"right":"left",!1!==(null===(Rt=this._spec.outerLabel)||void 0===Rt?void 0:Rt.alignLabel))Bt=(at=this._getPositionByData(nt)).x,Lt=at.y,"left"===Ht?(Bt=0,jt="left"):"right"===Ht?(Bt=this.getLayoutRect().width,jt="right"):"top"===Ht?(Lt=0,$t="top"):"bottom"===Ht&&(Lt=this.getLayoutRect().height,$t="bottom");else{var Kt=this._computeOuterLabelLinePosition(nt);Bt=Kt.x2,Lt=Kt.y2,"left"===Ht?(Bt-=5,jt="right"):"right"===Ht?(Bt+=5,jt="left"):"top"===Ht?(Lt-=5,$t="bottom"):"bottom"===Ht&&(Lt+=5,$t="top")}return{"x":Bt,"y":Lt,"align":jt,"textBaseline":$t}},i.prototype._computeOuterLabelLimit=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(nt));var $t=this.getPoints(nt),Kt=(Math.abs($t[0].x-$t[1].x)+Math.abs($t[2].x-$t[3].x))/2,te=this.getCategoryField(),ne=null===(Lt=null===(Bt=null===(Rt=null===(lt=null===(at=this._labelMark)||void 0===at?void 0:at.getComponent())||void 0===lt?void 0:lt.getProduct())||void 0===Rt?void 0:Rt.getGroupGraphicItem())||void 0===Bt?void 0:Bt.find((function(at){var lt,Rt=at.attribute;return"text"===at.type&&(null===(lt=Rt.data)||void 0===lt?void 0:lt[te])===nt[te]}),!0))||void 0===Lt?void 0:Lt.AABBBounds,re=ne?ne.x2-ne.x1:0,ae=this._funnelOuterLabelMark.line?this._minLabelLineWidth:0,oe=this.getLayoutRect().width-Math.max(Kt,re);return"center"===this._funnelAlign&&(oe/=2),oe-ae-(null!==(jt=null===(Ht=this._spec.outerLabel)||void 0===Ht?void 0:Ht.spaceWidth)&&void 0!==jt?jt:5)},i.prototype._computeOuterLabelLinePosition=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce=this.getCategoryField(),he=null===(Lt=null===(Bt=null===(Rt=null===(lt=null===(at=this._funnelOuterLabelMark)||void 0===at?void 0:at.label)||void 0===lt?void 0:lt.getProduct())||void 0===Rt?void 0:Rt.elements)||void 0===Bt?void 0:Bt.find((function(at){var lt;return(null===(lt=at.data[0])||void 0===lt?void 0:lt[ce])===nt[ce]})))||void 0===Lt?void 0:Lt.getBounds(),de=null===(te=null===(Kt=null===($t=null===(jt=null===(Ht=this._labelMark)||void 0===Ht?void 0:Ht.getComponent())||void 0===jt?void 0:jt.getProduct())||void 0===$t?void 0:$t.getGroupGraphicItem())||void 0===Kt?void 0:Kt.find((function(at){var lt,Rt=at.attribute;return"text"===at.type&&(null===(lt=Rt.data)||void 0===lt?void 0:lt[ce])===nt[ce]}),!0))||void 0===te?void 0:te.AABBBounds,fe=null!==(ne=this._spec.outerLabel)&&void 0!==ne?ne:{};if(this._isHorizontal()){var pe=null!==(re=fe.spaceWidth)&&void 0!==re?re:5,ve=this.getPoints(nt),Ae=(Math.abs(ve[0].y-ve[1].y)+Math.abs(ve[2].y-ve[3].y))/2;return"top"===this._spec.outerLabel.position||"bottom"===this._funnelAlign?(le=this._getPolygonCenter(ve).y-Ae/2-pe,ue=!1!==fe.alignLabel?(null==he?void 0:he.y2)+pe:le-pe,oe=this._getPolygonCenter(ve).x,le-ue<this._minLabelLineWidth&&(ue=le-this._minLabelLineWidth),se=oe):(le=this._getPolygonCenter(ve).y+Ae/2+pe,ue=!1!==fe.alignLabel?(null==he?void 0:he.y1)-pe:le+pe,oe=this._getPolygonCenter(ve).x,ue-le<this._minLabelLineWidth&&(ue=le+this._minLabelLineWidth),se=oe),{"x1":oe,"x2":se,"y1":le,"y2":ue}}var we=this.getPoints(nt),Ce=(Math.abs(we[0].x-we[1].x)+Math.abs(we[2].x-we[3].x))/2,je=(null==de?void 0:de.x2)-(null==de?void 0:de.x1)||0,Ne=null!==(ae=fe.spaceWidth)&&void 0!==ae?ae:5;return"right"===this._spec.outerLabel.position||"left"===this._funnelAlign?(oe=this._getPolygonCenter(we).x+Math.max(je/2,Ce/2)+Ne,se=!1!==fe.alignLabel?(null==he?void 0:he.x1)-Ne:oe+Ne,le=this._getPolygonCenter(we).y,se-oe<this._minLabelLineWidth&&(se=oe+this._minLabelLineWidth),ue=le):(oe=this._getPolygonCenter(we).x-Math.max(je/2,Ce/2)-Ne,se=!1!==fe.alignLabel?(null==he?void 0:he.x2)+Ne:oe-Ne,le=this._getPolygonCenter(we).y,oe-se<this._minLabelLineWidth&&(se=oe-this._minLabelLineWidth),ue=le),{"x1":oe,"x2":se,"y1":le,"y2":ue}},i.prototype._computeMaxSize=function(){var nt,at=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return pF(null!==(nt=this._spec.maxSize)&&void 0!==nt?nt:"80%",at)},i.prototype._computeMinSize=function(){var nt,at=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return pF(null!==(nt=this._spec.minSize)&&void 0!==nt?nt:0,at)},i.prototype._isHorizontal=function(){return"left"===this._funnelOrient||"right"===this._funnelOrient},i.prototype._isReverse=function(){return"bottom"===this._funnelOrient||"right"===this._funnelOrient},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._funnelMark]},i.type=nt.SeriesTypeEnum.funnel,i.mark=$0,i.transformerConstructor=Z0,i}(kX),E0=function(){A0(),oJ(),PZ(),Tz.registerSeries(Q0.type,Q0),Tz.registerAnimation("funnel",(function(nt,at){return A({"appear":"clipIn"===at?void 0:{"type":"fadeIn"}},_X)})),Tz.registerAnimation("cartesianGroupClip",(function(nt){return{"appear":{"custom":Nd,"customParameters":function(at,lt){return{"animationType":"in","group":lt.getGraphicItem(),"direction":nt.direction(),"width":nt.width(),"height":nt.height(),"orient":nt.orient()}}},"disappear":{"custom":Nd,"customParameters":function(at,lt){return{"animationType":"out","group":lt.getGraphicItem(),"direction":nt.direction(),"width":nt.width(),"height":nt.height(),"orient":nt.orient()}}}}})),ZY()},t1=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.type="pyramid3d",e}(I0),R0=function(){Tz.registerMark(t1.type,t1),LP(),IP(),Pj.registerGraphic(MH.pyramid3d,Ay),iX()},g1=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"funnel3d"),nt.isTransform&&this._addMarkLabelSpec(nt,"transform3d","transformLabel")},e}(Z0),y1=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.funnel3d,lt._funnelMarkName="funnel3d",lt._funnelMarkType="pyramid3d",lt._transformMarkName="transform3d",lt._transformMarkType="pyramid3d",lt.transformerConstructor=g1,lt}return S(i,at),i.prototype.initMark=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt;if(this._funnelMark=this._createMark(A(A({},i.mark.funnel3d),{"name":this._funnelMarkName,"type":this._funnelMarkType}),{"themeSpec":null===(nt=this._theme)||void 0===nt?void 0:nt.funnel3d,"key":this._seriesField,"isSeriesMark":!0},{"support3d":!0}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(A(A({},i.mark.transform3d),{"name":this._transformMarkName,"type":this._transformMarkType}),{"themeSpec":null===(at=this._theme)||void 0===at?void 0:at.transform3d,"key":this._seriesField,"skipBeforeLayouted":!1,"dataView":this._viewDataTransform.getDataView(),"dataProductId":this._viewDataTransform.getProductId()})),null===(Rt=null===(lt=this._spec)||void 0===lt?void 0:lt.outerLabel)||void 0===Rt?void 0:Rt.visible){var $t=(null!==(Bt=this._spec.outerLabel)&&void 0!==Bt?Bt:{}).line,Kt=(null!==(Ht=null===(Lt=this._theme)||void 0===Lt?void 0:Lt.outerLabel)&&void 0!==Ht?Ht:{}).line;this._funnelOuterLabelMark.label=this._createMark(i.mark.outerLabel,{"themeSpec":null===(jt=this._theme)||void 0===jt?void 0:jt.outerLabel,"key":this._seriesField,"markSpec":this._spec.outerLabel}),this._funnelOuterLabelMark.line=this._createMark(i.mark.outerLabelLine,{"themeSpec":Kt,"key":this._seriesField,"markSpec":$t,"depend":[this._funnelOuterLabelMark.label]})}},i.prototype.initMarkStyle=function(){var nt=this;at.prototype.initMarkStyle.call(this);var lt=this._funnelMark;lt&&this.setMarkStyle(lt,{"z":function(at){if(nt._isHorizontal())return 0;var lt=nt.getPoints(at),Rt=Math.max(Math.abs(lt[0].x-lt[1].x),Math.abs(lt[2].x-lt[3].x));return(nt._computeMaxSize()-Rt)/2}},"normal",EU.Series)},i.prototype.initLabelMarkStyle=function(nt){var lt,Rt,Bt,Lt=this;at.prototype.initLabelMarkStyle.call(this,nt),this.setMarkStyle(nt,{"z":function(nt){if(Lt._isHorizontal())return 0;var at=Lt.getPoints(nt),lt=Math.max(Math.abs(at[0].x-at[1].x),Math.abs(at[2].x-at[3].x));return(Lt._computeMaxSize()-lt)/2}},"normal",EU.Series),this._labelMark=nt,(null===(Rt=this._funnelOuterLabelMark)||void 0===Rt?void 0:Rt.label)&&this._funnelOuterLabelMark.label.setDepend(nt.getComponent()),(null===(Bt=this._funnelOuterLabelMark)||void 0===Bt?void 0:Bt.line)&&(lt=this._funnelOuterLabelMark.line).setDepend.apply(lt,P([],E(this._funnelOuterLabelMark.line.getDepend()),!1))},i.type=nt.SeriesTypeEnum.funnel3d,i.mark=q0,i.transformerConstructor=g1,i}(Q0),L0=function(){R0(),oJ(),PZ(),Tz.registerSeries(y1.type,y1)},D0=function(nt,at){var lt=(nt-at[0])/(at[1]-at[0]||1);return Math.max(0,Math.min(1,lt))},O0=function(nt){var at=nt.mark.elements.filter((function(nt){return nt.diffState===CH.update})),lt=At(at.map((function(nt){var at;return null===(at=null==nt?void 0:nt.data)||void 0===at?void 0:at[0].depth})));return at.filter((function(nt){var at;return(null===(at=null==nt?void 0:nt.data)||void 0===at?void 0:at[0].depth)===lt}))},F0=function(nt,at,lt){if(ot(nt))return[at,lt];var Rt=At(nt.map((function(nt){return 1*nt.getGraphicAttribute("startAngle",!1)}))),Bt=St(nt.map((function(nt){return 1*nt.getGraphicAttribute("endAngle",!1)})));return[Rt,Bt]},z0=function(nt){return{"channel":{"startAngle":{"from":function(at,lt){var Rt=nt.animationInfo(),Bt=Rt.startAngle,Lt=Rt.endAngle,Ht=O0(lt),jt=F0(Ht,Bt,Lt);return D0(at.startAngle,jt)*(Lt-Bt)+Bt},"to":function(nt){return nt.startAngle}},"endAngle":{"from":function(at,lt){var Rt=nt.animationInfo(),Bt=Rt.startAngle,Lt=Rt.endAngle,Ht=O0(lt),jt=F0(Ht,Bt,Lt);return D0(at.endAngle,jt)*(Lt-Bt)+Bt},"to":function(nt){return nt.endAngle}},"outerRadius":{"from":function(nt){return nt.innerRadius},"to":function(nt){return nt.outerRadius}},"innerRadius":{"from":function(nt){return nt.innerRadius},"to":function(nt){return nt.innerRadius}}}}},H0=function(nt){var at=At(nt.map((function(nt){return 1*nt.getGraphicAttribute("startAngle",!1)}))),lt=St(nt.map((function(nt){return 1*nt.getGraphicAttribute("endAngle",!1)})));return[at,lt]},j0=function(nt){return{"channel":{"startAngle":{"from":function(nt,at){return at.getGraphicAttribute("startAngle",!1)},"to":function(at,lt){var Rt=nt.animationInfo(),Bt=Rt.startAngle,Lt=Rt.endAngle,Ht=O0(lt),jt=H0(Ht);return D0(lt.getGraphicAttribute("startAngle",!1),jt)*(Lt-Bt)+Bt}},"endAngle":{"from":function(nt,at){return at.getGraphicAttribute("endAngle",!1)},"to":function(at,lt){var Rt=nt.animationInfo(),Bt=Rt.startAngle,Lt=Rt.endAngle,Ht=O0(lt),jt=H0(Ht);return D0(lt.getGraphicAttribute("endAngle",!1),jt)*(Lt-Bt)+Bt}},"outerRadius":{"from":function(nt,at){return at.getGraphicAttribute("outerRadius",!1)},"to":function(){return nt.animationInfo().innerRadius}},"innerRadius":{"from":function(nt,at){return at.getGraphicAttribute("innerRadius",!1)},"to":function(){return nt.animationInfo().innerRadius}}}}},N0=function(nt,at){switch(at){case"fadeIn":return{"type":"fadeIn"};case"growAngle":return{"type":"growAngleIn"};default:return{"type":"growRadiusIn"}}},V0=function(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],lt=arguments.length>2?arguments[2]:void 0,Rt=(null==lt?void 0:lt.maxDepth)>=0;return nt.forEach((function(nt){(!Rt||nt.depth<=lt.maxDepth)&&(at.push((null==lt?void 0:lt.callback)?lt.callback(nt):nt),nt.children&&(Rt&&nt.depth===lt.maxDepth?(nt.children=null,nt.isLeaf=!0):V0(nt.children,at,lt)))})),at};function G0(nt,at,lt,Rt,Bt){for(var Lt,Ht=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{"x0":"x0","x1":"x1","y0":"y0","y1":"y1"},jt=nt.children,$t=-1,Kt=jt.length,te=nt.value&&(Rt-at)/nt.value;++$t<Kt;)(Lt=jt[$t])[Ht.y0]=lt,Lt[Ht.y1]=Bt,Lt[Ht.x0]=at,Lt[Ht.x1]=at+=Lt.value*te}function W0(nt,at,lt,Rt,Bt){for(var Lt,Ht=nt.children,jt=-1,$t=Ht.length,Kt=nt.value&&(Bt-lt)/nt.value;++jt<$t;)(Lt=Ht[jt]).x0=at,Lt.x1=Rt,Lt.y0=lt,lt+=Lt.value*Kt,Lt.y1=lt}var U0=function(nt){return function(at,lt,Rt,Bt,Lt){!function(nt,at,lt,Rt,Bt,Lt){for(var Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue=[],ce=at.children,he=0,de=0,fe=ce.length,pe=at.value;he<fe;){$t=Bt-lt,Kt=Lt-Rt;do{te=ce[de++].value}while(!te&&de<fe);for(ne=te,re=te,le=te*te*(se=Math.max(Kt/$t,$t/Kt)/(pe*nt)),oe=Math.max(re/le,le/ne);de<fe;++de){if((jt=ce[de].value)<ne&&(ne=jt),jt>re&&(re=jt),le=(te+=jt)*te*se,(ae=Math.max(re/le,le/ne))>oe){te-=jt;break}oe=ae}Ht=Object.assign({},at,{"value":te,"children":ce.slice(he,de)}),ue.push(Ht),$t<Kt?G0(Ht,lt,Rt,Bt,pe?Rt+=Kt*te/pe:Lt):W0(Ht,lt,Rt,pe?lt+=$t*te/pe:Bt,Lt),pe-=te,he=de}}(nt,at,lt,Rt,Bt,Lt)}},Y0=function(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,Bt=arguments.length>4?arguments[4]:void 0,Lt=arguments.length>5?arguments[5]:void 0,Ht=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"value",jt=0,$t=null!=Rt?Rt:-1,Kt=lt;return nt.forEach((function(nt,Rt){var te,ne,re={"flattenIndex":++$t,"key":Lt?Lt(nt):"".concat(null!==(te=null==Bt?void 0:Bt.key)&&void 0!==te?te:"","-").concat(Rt),"maxDepth":-1,"depth":lt,"index":Rt,"value":nt[Ht],"isLeaf":!0,"datum":Bt?Bt.datum.concat(nt):[nt],"parentKey":null==Bt?void 0:Bt.key};if(null===(ne=nt.children)||void 0===ne?void 0:ne.length){re.children=[],re.isLeaf=!1;var ae=Y0(nt.children,re.children,lt+1,$t,re,Lt,Ht);re.value=j(nt[Ht])?ae.sum:Math.max(ae.sum,ee(nt[Ht])),$t=ae.flattenIndex,Kt=Math.max(ae.maxDepth,Kt)}else re.isLeaf=!0,re.value=ee(nt[Ht]);jt+=Math.abs(re.value),at.push(re)})),{"sum":jt,"maxDepth":Kt,"flattenIndex":$t}},X0=function(nt,at,lt,Rt){var Bt=Rt;return nt.forEach((function(nt,Rt){var Lt;Bt=at(nt,Rt,lt,Bt),(null===(Lt=nt.children)||void 0===Lt?void 0:Lt.length)&&(Bt=X0(nt.children,at,nt,Bt))})),Rt},K0=function(nt,at,lt,Rt){var Bt=Rt;return nt.forEach((function(nt,Rt){var Lt;(null===(Lt=nt.children)||void 0===Lt?void 0:Lt.length)&&(Bt=K0(nt.children,at,nt,Bt)),Bt=at(nt,Rt,lt,Bt)})),Bt},b1={"binary":function(nt,at,lt,Rt,Bt){var Lt=nt.children,Ht=Lt.length,jt=0,$t=new Array(Ht+1);$t[0]=0;for(var Kt=0;Kt<Ht;++Kt)jt+=Lt[Kt].value,$t[Kt+1]=jt;var c=function(nt,at,lt,Rt,Bt,Ht,jt){if(nt>=at-1){var Kt=Lt[nt];return Kt.x0=Rt,Kt.y0=Bt,Kt.x1=Ht,void(Kt.y1=jt)}for(var te=$t[nt],ne=lt/2+te,re=nt+1,ae=at-1;re<ae;){var oe=re+ae>>>1;$t[oe]<ne?re=oe+1:ae=oe}ne-$t[re-1]<$t[re]-ne&&nt+1<re&&--re;var se=$t[re]-te,le=lt-se;if(Ht-Rt>jt-Bt){var ue=lt?(Rt*le+Ht*se)/lt:Ht;c(nt,re,se,Rt,Bt,ue,jt),c(re,at,le,ue,Bt,Ht,jt)}else{var ce=lt?(Bt*le+jt*se)/lt:jt;c(nt,re,se,Rt,Bt,Ht,ce),c(re,at,le,Rt,ce,Ht,jt)}};c(0,Ht,nt.value,at,lt,Rt,Bt)},"dice":G0,"slice":W0,"sliceDice":function(nt,at,lt,Rt,Bt){(nt.depth%2==1?W0:G0)(nt,at,lt,Rt,Bt)}},x1=o((function t(nt){var at,lt=this;r(this,t),this._filterByArea=function(nt,at){var Rt,Bt=lt._getMinAreaByDepth(nt.depth);if(Bt>0&&nt.value*at<Bt)return!1;if(null===(Rt=nt.children)||void 0===Rt?void 0:Rt.length){var Lt=nt.children.filter((function(nt){return lt._filterByArea(nt,at)}));Lt.length?Lt.length!==nt.children.length&&(nt.children=Lt):(nt.isLeaf=!0,nt.children=null)}return!0},this._getMinAreaByDepth=function(nt){var at;return nt<0?0:null!==(at=X(lt.options.minVisibleArea)?lt.options.minVisibleArea[nt]:lt.options.minVisibleArea)&&void 0!==at?at:0},this._getGapWidthByDepth=function(nt){var at;return nt<0?0:null!==(at=X(lt.options.gapWidth)?lt.options.gapWidth[nt]:lt.options.gapWidth)&&void 0!==at?at:0},this._getPaddingByDepth=function(nt){var at;return nt<0?0:null!==(at=X(lt.options.padding)?lt.options.padding[nt]:lt.options.padding)&&void 0!==at?at:0},this._getLabelPaddingByDepth=function(nt){var at;return nt<0?0:null!==(at=X(lt.options.labelPadding)?lt.options.labelPadding[nt]:lt.options.labelPadding)&&void 0!==at?at:0},this._layoutNode=function(nt){var at=lt._getGapWidthByDepth(nt.depth),Rt=nt.x0,Bt=nt.y0,Lt=nt.x1,Ht=nt.y1;if(nt.maxDepth=lt._maxDepth,at>0&&((Rt+=at/2)>(Lt-=at/2)&&(Lt=Rt=(Rt+Lt)/2),(Bt+=at/2)>(Ht-=at/2)&&(Ht=Bt=(Bt+Ht)/2),nt.x0=Rt,nt.x1=Lt,nt.y0=Bt,nt.y1=Ht),nt.children){var jt=lt._getLabelPaddingByDepth(nt.depth),$t=lt._getPaddingByDepth(nt.depth);$t>0&&$t<Math.min(Lt-Rt,Ht-Bt)/2&&(Bt+=$t,Ht-=$t,Rt+=$t,Lt-=$t),jt>0&&("top"===lt.options.labelPosition&&Bt+jt<Ht?(nt.labelRect={"x0":Rt,"y0":Bt,"x1":Lt,"y1":Bt+jt},Bt+=jt):"bottom"===lt.options.labelPosition&&Ht-jt>Bt?(nt.labelRect={"x0":Rt,"y0":Ht-jt,"x1":Lt,"y1":Ht},Ht-=jt):"left"===lt.options.labelPosition&&Rt+jt<Lt?(nt.labelRect={"x0":Rt,"y0":Bt,"x1":Rt+jt,"y1":Ht},Rt+=jt):"right"===lt.options.labelPosition&&Lt-jt>Rt&&(nt.labelRect={"x0":Lt-jt,"y0":Bt,"x1":Lt,"y1":Ht},Lt-=jt));var Kt=lt._getGapWidthByDepth(nt.depth+1);Kt>0&&(Rt-=Kt/2,Lt+=Kt/2,Bt-=Kt/2,Ht+=Kt/2),lt._splitNode(nt,Rt,Bt,Lt,Ht)}},this.options=Object.assign({},t.defaultOpionts,nt);var Rt=this.options.nodeKey,Bt=H(Rt)?Rt:Rt?qk(Rt):null;this._getNodeKey=Bt,this._splitNode="squarify"===this.options.splitType?U0(this.options.aspectRatio):null!==(at=b1[this.options.splitType])&&void 0!==at?at:b1.binary,this._maxDepth=-1}),[{"key":"layout","value":function(nt,at){var lt;if(!nt||!nt.length)return[];var Rt="width"in at?{"x0":0,"x1":at.width,"y0":0,"y1":at.height,"width":at.width,"height":at.height}:{"x0":Math.min(at.x0,at.x1),"x1":Math.max(at.x0,at.x1),"y0":Math.min(at.y0,at.y1),"y1":Math.max(at.y0,at.y1),"width":Math.abs(at.x1-at.x0),"height":Math.abs(at.y1-at.y0)},Bt=[],Lt=Y0(nt,Bt,0,-1,null,this._getNodeKey,this.options.valueField);if(this._maxDepth=Lt.maxDepth,Lt.sum<=0)return[];var Ht={"flattenIndex":-1,"maxDepth":-1,"key":"-1","depth":-1,"index":-1,"value":Lt.sum,"datum":null,"x0":Rt.x0,"x1":Rt.x1,"y0":Rt.y0,"y1":Rt.y1,"children":Bt},jt=Rt.width*Rt.height/Lt.sum;return this._filterByArea(Ht,jt),this._layout(Ht),null!==(lt=Ht.children)&&void 0!==lt?lt:[]}},{"key":"_filterChildren","value":function(nt){var at=this.options.maxDepth;if(Z(at)&&at>=0&&nt.depth>=at)return!1;var lt=this.options.minChildrenVisibleArea;if(Z(lt)&&Math.abs((nt.x1-nt.x0)*(nt.y1-nt.y0))<lt)return!1;var Rt=this.options.minChildrenVisibleSize;return!Z(Rt)||!(Math.abs(nt.x1-nt.x0)<Rt||Math.abs(nt.y1-nt.y0)<Rt)}},{"key":"_layout","value":function(nt){var at,lt=this;this._filterChildren(nt)||(nt.children=null,nt.isLeaf=!0),this._layoutNode(nt),(null===(at=nt.children)||void 0===at?void 0:at.length)&&nt.children.forEach((function(nt){var at;(null===(at=null==nt?void 0:nt.children)||void 0===at?void 0:at.length)?lt._layout(nt):lt._layoutNode(nt)}))}}]);x1.defaultOpionts={"aspectRatio":(1+Math.sqrt(5))/2,"gapWidth":0,"labelPadding":0,"labelPosition":"top","splitType":"binary","minVisibleArea":10};var J0=function(nt,at){var lt=new x1(nt).layout(at,"width"in nt?{"width":nt.width,"height":nt.height}:{"x0":nt.x0,"x1":nt.x1,"y0":nt.y0,"y1":nt.y1});if(nt.flatten){var Rt=[];return V0(lt,Rt,{"maxDepth":null==nt?void 0:nt.maxDepth}),Rt}return lt},S1={"x0":"startAngle","x1":"endAngle","y0":"innerRadius","y1":"outerRadius"},A1=o((function t(nt){var at=this;r(this,t),this._layoutNode=function(nt){if(nt.maxDepth=at._maxDepth,nt.children){var lt=at._parsedInnerRadius[nt.depth+1],Rt=at._parsedOutterRadius[nt.depth+1];G0(nt,nt.startAngle,Math.min(lt,Rt),nt.endAngle,Math.max(lt,Rt),S1);var Bt=X(at.options.label)?at.options.label[nt.depth+1]:at.options.label;nt.children.forEach((function(nt){if(nt.x=at._parsedCenter[0],nt.y=at._parsedCenter[1],Bt)return at._layoutLabel(nt,z(Bt)?{"align":"center","rotate":"radial"}:Bt)}))}},this.options=nt?Object.assign({},t.defaultOpionts,nt):Object.assign({},t.defaultOpionts);var lt=this.options.nodeKey,Rt=H(lt)?lt:lt?qk(lt):null;this._getNodeKey=Rt,this._maxDepth=-1}),[{"key":"_parseRadius","value":function(nt,at){var lt=this,Rt=nt.x0+Jk(this.options.center[0],nt.width),Bt=nt.y0+Jk(this.options.center[1],nt.height),Lt=Math.min(nt.width/2,nt.height/2),Ht=this.options.innerRadius,jt=this.options.outerRadius,$t=X(Ht),Kt=$t?Ht.map((function(nt){return Jk(nt,Lt)})):Jk(Ht,Lt),te=X(jt),ne=this.options.gapRadius,re=te?jt.map((function(nt){return Jk(nt,Lt)})):Jk(jt,Lt),ae=Ct(0,at+1);if($t)this._parsedInnerRadius=ae.map((function(nt,at){var lt=Kt[at];return j(lt)?Lt:lt})),this._parsedOutterRadius=ae.map((function(nt,Rt){var Bt,Ht;return te?null!==(Bt=re[Rt])&&void 0!==Bt?Bt:Lt:Rt<at?lt._parsedInnerRadius[Rt+1]-(X(ne)?null!==(Ht=ne[Rt])&&void 0!==Ht?Ht:0:ne):re}));else if(te)this._parsedOutterRadius=ae.map((function(nt,at){return j(re[at])?Lt:re[at]})),this._parsedInnerRadius=ae.map((function(nt,at){var Rt;return 0===at?Kt:lt._parsedOutterRadius[at-1]-(X(ne)?null!==(Rt=ne[at])&&void 0!==Rt?Rt:0:ne)}));else{var oe=Jk(Ht,Lt),se=(re-oe)/(at+1);this._parsedInnerRadius=ae.map((function(nt,at){return oe+at*se})),this._parsedOutterRadius=ae.map((function(nt,at){var Rt;return lt._parsedInnerRadius[at]+se-(X(ne)?null!==(Rt=ne[at])&&void 0!==Rt?Rt:0:ne)}))}this._parsedCenter=[Rt,Bt],this._maxRadius=Lt}},{"key":"layout","value":function(nt,at){var lt="width"in at?{"x0":0,"x1":at.width,"y0":0,"y1":at.height,"width":at.width,"height":at.height}:{"x0":Math.min(at.x0,at.x1),"x1":Math.max(at.x0,at.x1),"y0":Math.min(at.y0,at.y1),"y1":Math.max(at.y0,at.y1),"width":Math.abs(at.x1-at.x0),"height":Math.abs(at.y1-at.y0)};if(!nt||!nt.length)return[];var Rt=[],Bt=Y0(nt,Rt,0,-1,null,this._getNodeKey);return this._parseRadius(lt,Bt.maxDepth),this._maxDepth=Bt.maxDepth,this._layout(Rt,{"flattenIndex":-1,"maxDepth":-1,"key":"-1","depth":-1,"index":-1,"value":Bt.sum,"datum":null,"children":Rt,"startAngle":this.options.startAngle,"endAngle":this.options.endAngle}),Rt}},{"key":"_layout","value":function(nt,at){var lt=this;this._layoutNode(at),nt.forEach((function(nt){var at;(null===(at=null==nt?void 0:nt.children)||void 0===at?void 0:at.length)?lt._layout(nt.children,nt):lt._layoutNode(nt)}))}},{"key":"_layoutLabel","value":function(nt,at){var lt,Rt=(nt.startAngle+nt.endAngle)/2,Bt=("start"===at.align?nt.innerRadius:"end"===at.align?nt.outerRadius:(nt.innerRadius+nt.outerRadius)/2)+(null!==(lt=at.offset)&&void 0!==lt?lt:0),Lt=Pe({"x":this._parsedCenter[0],"y":this._parsedCenter[1]},Bt,Rt);if(nt.label={"x":Lt.x,"y":Lt.y,"textBaseline":"middle"},"tangential"===at.rotate)nt.label.angle=Rt-Math.PI/2,nt.label.textAlign="center",nt.label.maxLineWidth=Math.abs(nt.endAngle-nt.startAngle)*Bt;else{var Ht=Rt%(2*Math.PI),jt=Ht<0?Ht+2*Math.PI:Ht;jt>Math.PI/2&&jt<1.5*Math.PI?(nt.label.angle=jt+Math.PI,nt.label.textAlign="start"===at.align?"end":"end"===at.align?"start":"center"):(nt.label.angle=jt,nt.label.textAlign=at.align),nt.label.maxLineWidth=nt.isLeaf?void 0:Math.abs(nt.outerRadius-nt.innerRadius)}}}]);A1.defaultOpionts={"startAngle":Math.PI/2,"endAngle":-3*Math.PI/2,"center":["50%","50%"],"gapRadius":0,"innerRadius":0,"outerRadius":"70%"};var M1=4294967296;function e1(nt,at){var lt,Rt;if(r1(at,nt))return[at];for(lt=0;lt<nt.length;++lt)if(i1(at,nt[lt])&&r1(o1(nt[lt],at),nt))return[nt[lt],at];for(lt=0;lt<nt.length-1;++lt)for(Rt=lt+1;Rt<nt.length;++Rt)if(i1(o1(nt[lt],nt[Rt]),at)&&i1(o1(nt[lt],at),nt[Rt])&&i1(o1(nt[Rt],at),nt[lt])&&r1(s1(nt[lt],nt[Rt],at),nt))return[nt[lt],nt[Rt],at];te.getInstance().error("error when packEncloseRandom")}function i1(nt,at){var lt=nt.radius-at.radius,Rt=at.x-nt.x,Bt=at.y-nt.y;return lt<0||lt*lt<Rt*Rt+Bt*Bt}function n1(nt,at){var lt=nt.radius-at.radius+1e-9*Math.max(nt.radius,at.radius,1),Rt=at.x-nt.x,Bt=at.y-nt.y;return lt>0&&lt*lt>Rt*Rt+Bt*Bt}function r1(nt,at){for(var lt=0;lt<at.length;++lt)if(!n1(nt,at[lt]))return!1;return!0}function a1(nt){switch(nt.length){case 1:return function(nt){return{"x":nt.x,"y":nt.y,"radius":nt.radius}}(nt[0]);case 2:return o1(nt[0],nt[1]);case 3:return s1(nt[0],nt[1],nt[2])}}function o1(nt,at){var lt=nt.x,Rt=nt.y,Bt=nt.radius,Lt=at.x,Ht=at.y,jt=at.radius,$t=Lt-lt,Kt=Ht-Rt,te=jt-Bt,ne=Math.sqrt($t*$t+Kt*Kt);return{"x":(lt+Lt+$t/ne*te)/2,"y":(Rt+Ht+Kt/ne*te)/2,"radius":(ne+Bt+jt)/2}}function s1(nt,at,lt){var Rt=nt.x,Bt=nt.y,Lt=nt.radius,Ht=at.x,jt=at.y,$t=at.radius,Kt=lt.x,te=lt.y,ne=lt.radius,re=Rt-Ht,ae=Rt-Kt,oe=Bt-jt,se=Bt-te,le=$t-Lt,ue=ne-Lt,ce=Rt*Rt+Bt*Bt-Lt*Lt,he=ce-Ht*Ht-jt*jt+$t*$t,de=ce-Kt*Kt-te*te+ne*ne,fe=ae*oe-re*se,pe=(oe*de-se*he)/(2*fe)-Rt,ve=(se*le-oe*ue)/fe,Ae=(ae*he-re*de)/(2*fe)-Bt,we=(re*ue-ae*le)/fe,Ce=ve*ve+we*we-1,je=2*(Lt+pe*ve+Ae*we),Ne=pe*pe+Ae*Ae-Lt*Lt,Ve=-(Math.abs(Ce)>1e-6?(je+Math.sqrt(je*je-4*Ce*Ne))/(2*Ce):Ne/je);return{"x":Rt+pe+ve*Ve,"y":Bt+Ae+we*Ve,"radius":Ve}}function l1(nt,at,lt){var Rt,Bt,Lt,Ht,jt=nt.x-at.x,$t=nt.y-at.y,Kt=jt*jt+$t*$t;Kt?(Bt=at.radius+lt.radius,Bt*=Bt,Ht=nt.radius+lt.radius,Bt>(Ht*=Ht)?(Rt=(Kt+Ht-Bt)/(2*Kt),Lt=Math.sqrt(Math.max(0,Ht/Kt-Rt*Rt)),lt.x=nt.x-Rt*jt-Lt*$t,lt.y=nt.y-Rt*$t+Lt*jt):(Rt=(Kt+Bt-Ht)/(2*Kt),Lt=Math.sqrt(Math.max(0,Bt/Kt-Rt*Rt)),lt.x=at.x+Rt*jt-Lt*$t,lt.y=at.y+Rt*$t+Lt*jt)):(lt.x=at.x+lt.radius,lt.y=at.y)}function u1(nt,at){var lt=nt.radius+at.radius-1e-6,Rt=at.x-nt.x,Bt=at.y-nt.y;return lt>0&&lt*lt>Rt*Rt+Bt*Bt}function c1(nt){var at=nt._,lt=nt.next._,Rt=at.radius+lt.radius,Bt=(at.x*lt.radius+lt.x*at.radius)/Rt,Lt=(at.y*lt.radius+lt.y*at.radius)/Rt;return Bt*Bt+Lt*Lt}function h1(nt){return{"_":nt,"next":null,"prev":null}}function d1(nt,at){var lt=(nt=xt(nt)).length;if(!lt)return 0;var Rt=nt[0];if(Rt.x=0,Rt.y=0,1===lt)return Rt.radius;var Bt=nt[1];if(Rt.x=-Bt.radius,Bt.x=Rt.radius,Bt.y=0,2===lt)return Rt.radius+Bt.radius;var Lt=nt[2];l1(Bt,Rt,Lt);var Ht,jt,$t,Kt,te,ne,re,ae=h1(Rt),oe=h1(Bt),se=h1(Lt);ae.next=oe,se.prev=oe,oe.next=se,ae.prev=se,se.next=ae,oe.prev=ae;for(var le=3;le<lt;++le){re=!1,Lt=nt[le],l1(ae._,oe._,Lt),se=h1(Lt),Ht=oe.next,jt=ae.prev,$t=oe._.radius,Kt=ae._.radius;do{if($t<=Kt){if(u1(Ht._,se._)){oe=Ht,ae.next=oe,oe.prev=ae,--le,re=!0;break}$t+=Ht._.radius,Ht=Ht.next}else{if(u1(jt._,se._)){(ae=jt).next=oe,oe.prev=ae,--le,re=!0;break}Kt+=jt._.radius,jt=jt.prev}}while(Ht!==jt.next);if(!re){for(se.prev=ae,se.next=oe,ae.next=oe.prev=oe=se,te=c1(ae),se=se.next;se!==oe;)(ne=c1(se))<te&&(ae=se,te=ne),se=se.next;oe=ae.next}}var ue=[oe._];for(se=oe.next;se!==oe;)ue.push(se._),se=se.next;Lt=function(nt,at){for(var lt,Rt,Bt=0,Lt=Mt(Array.from(nt),at),Ht=Lt.length,jt=[];Bt<Ht;)lt=Lt[Bt],Rt&&n1(Rt,lt)?++Bt:(Rt=a1(jt=e1(jt,lt)),Bt=0);return Rt}(ue,at);for(var ce=0;ce<lt;++ce)(Rt=nt[ce]).x-=Lt.x,Rt.y-=Lt.y;return Lt.radius}function p1(nt){return function(at){at.children||(at.radius=Math.max(0,+nt(at)||0))}}function f1(nt,at,lt){return function(Rt){var Bt=null==Rt?void 0:Rt.children;if(Bt){var Lt,Ht=Bt.length,jt=nt(Rt)*at||0;if(jt)for(Lt=0;Lt<Ht;++Lt)Bt[Lt].radius+=jt;var $t=d1(Bt,lt);if(jt)for(Lt=0;Lt<Ht;++Lt)Bt[Lt].radius-=jt;Rt.radius=$t+jt}}}function v1(nt,at){return function(lt,Rt,Bt){lt.radius*=nt,lt.maxDepth=at,Bt&&(lt.x=Bt.x+nt*lt.x,lt.y=Bt.y+nt*lt.y)}}var T1=function(){function t(nt){r(this,t),this.options=nt;var at=null==nt?void 0:nt.nodeKey,lt=H(at)?at:at?qk(at):null;this._getNodeKey=lt,this._getPadding=Z(null==nt?void 0:nt.padding)?function(at){return nt.padding}:X(null==nt?void 0:nt.padding)?function(at){var lt;return null!==(lt=nt.padding[at.depth+1])&&void 0!==lt?lt:0}:function(){return 0},this._maxDepth=-1}return o(t,[{"key":"layout","value":function(nt,at){var lt,Rt="width"in at?{"x0":0,"x1":at.width,"y0":0,"y1":at.height,"width":at.width,"height":at.height}:{"x0":Math.min(at.x0,at.x1),"x1":Math.max(at.x0,at.x1),"y0":Math.min(at.y0,at.y1),"y1":Math.max(at.y0,at.y1),"width":Math.abs(at.x1-at.x0),"height":Math.abs(at.y1-at.y0)};if(!nt||!nt.length)return[];var Bt=[],Lt=Y0(nt,Bt,0,-1,null,this._getNodeKey);this._maxDepth=Lt.maxDepth;var Ht=function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){return(nt=(1664525*nt+1013904223)%M1)/M1}}(),jt={"flattenIndex":-1,"maxDepth":-1,"key":"root","depth":-1,"index":-1,"value":Lt.sum,"datum":null,"children":Bt,"x":Rt.x0+Rt.width/2,"y":Rt.y0+Rt.height/2},$t=null!==(lt=this.options)&&void 0!==lt?lt:{},Kt=$t.nodeSort,te=$t.setRadius,ne=$t.padding,re=$t.includeRoot;if(!1!==Kt){var ae=H(Kt)?this.options.nodeKey:t.defaultOpionts.nodeSort;X0([jt],(function(nt){nt.children&&nt.children.length&&nt.children.sort(ae)}))}if(te)X0([jt],p1(te)),K0([jt],f1(this._getPadding,.5,Ht)),X0([jt],v1(1,this._maxDepth));else{var oe=Math.min(Rt.width,Rt.height);X0([jt],p1(t.defaultOpionts.setRadius)),K0([jt],f1(Yk,1,Ht)),ne&&K0([jt],f1(this._getPadding,jt.radius/oe,Ht)),X0([jt],v1(oe/(2*jt.radius),this._maxDepth))}return re?[jt]:Bt}}])}();T1.defaultOpionts={"setRadius":function(nt){return Math.sqrt(nt.value)},"padding":0,"nodeSort":function(nt,at){return at.value-nt.value}};var P1,m1=function(nt,at){if(void 0===at&&(at={}),!nt)return[];var lt=[];return V0(nt,lt,at),lt},_1=function(nt,at){if(!nt)return nt;var lt=at(),Rt=lt.width,Bt=lt.height;return new A1(lt).layout(nt,{"width":Rt,"height":Bt})},I1=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.markTooltipKeyCallback=function(nt){return null==nt?void 0:nt[at.series.getDimensionField()[0]]},at}return S(e,nt),e}(zY);!function(nt){nt.DrillDown="drillDown",nt.DrillUp="drillUp"}(P1||(P1={}));var B1,k1=function(nt,at){var lt,Rt=at.info(),Bt=at.keyField(),Lt=null==Rt?void 0:Rt.key;return j(Lt)?nt:Rt.type===P1.DrillDown?xt(lt=IH(nt,Lt,Bt,"children")):Rt.type===P1.DrillUp&&(lt=LH(nt,Lt,Bt,"children"))?xt(lt):nt},j1=function(){function t(){}return t.prototype._getDrillTriggerEvent=function(nt){var at;return null===(at=hZ(this._drillParams.mode))||void 0===at?void 0:at[nt]},t.prototype._hideTooltip=function(){var nt=this.getChart().getComponentsByType(lt.tooltip)[0];nt&&nt.hideTooltip()},t.prototype.initDrillable=function(nt){this._drillParams=nt},t.prototype.initDrillableData=function(nt){var at=this,lt=this._drillParams.getRawData;GW(nt,"drillFilter",k1),lt().transform({"type":"drillFilter","options":{"info":function(){return at._drillInfo},"keyField":function(){return at._drillParams.drillField()}}})},t.prototype.bindDrillEvent=function(){var nt=this,at=this._drillParams,lt=at.event,Rt=at.getRawData,Bt=(0,at.drillField)();this._getDrillTriggerEvent("start")&&lt.on(this._getDrillTriggerEvent("start"),(function(at){var lt,Lt,Ht;if(j(at.datum)||j(null===(lt=at.datum)||void 0===lt?void 0:lt[Bt]))nt.drillUp();else{nt._hideTooltip();var jt=at.datum[Bt],$t=null!==(Ht=null===(Lt=nt._drillInfo)||void 0===Lt?void 0:Lt.path)&&void 0!==Ht?Ht:[],Kt=function(nt,at,lt,Rt){void 0===lt&&(lt="key"),void 0===Rt&&(Rt="children");var Bt=[],a=function(nt,Lt){var Ht,jt;try{for(var $t=C(nt),Kt=$t.next();!Kt.done;Kt=$t.next()){var te=Kt.value;if(te[lt]===at)return Bt.push.apply(Bt,P(P([],E(Lt),!1),[te[lt].toString()],!1)),!0;if(te[Rt]){var ne=a(te[Rt],P(P([],E(Lt),!1),[te[lt]],!1));if(!0===ne)return ne}}}catch(nt){Ht={"error":nt}}finally{try{Kt&&!Kt.done&&(jt=$t.return)&&jt.call($t)}finally{if(Ht)throw Ht.error}}return!1};return a(nt,[]),Bt}(Rt().rawData,jt,Bt,"children");$t[$t.length-1]===Kt[Kt.length-1]?nt.drillUp():nt.drillDown(Kt)}}))},t.prototype.drillDown=function(nt){void 0===nt&&(nt=[]);var at=this._drillParams,lt=at.getRawData,Rt=at.event;if(!X(nt)||ot(nt))return nt;var Bt=nt[nt.length-1];return this._drillInfo={"key":Bt,"path":nt,"type":P1.DrillDown},lt().reRunAllTransform(),Rt.emit(jW.drill,{"value":{"path":nt,"type":P1.DrillDown},"model":this}),nt},t.prototype.drillUp=function(){var nt,at,lt=this._drillParams,Rt=lt.getRawData,Bt=lt.event,Lt=null!==(at=null===(nt=this._drillInfo)||void 0===nt?void 0:nt.path)&&void 0!==at?at:[];if(!X(Lt)||ot(Lt))return Lt;var Ht=Lt.pop();return this._drillInfo={"key":Ht,"path":Lt,"type":P1.DrillUp},Rt().reRunAllTransform(),Bt.emit(jW.drill,{"value":{"path":Lt,"type":P1.DrillUp},"model":this}),Lt},t}(),N1=A(A({},GY),((B1={}).sunburst={"name":"sunburst","type":"arc"},B1)),w1=function(nt,at,lt){return nt.push({"key":at,"operations":["values"]}),nt.push({"key":lt,"operations":["max","min"]}),nt.push({"key":NY,"operations":["max","min","values"]}),nt.push({"key":VY,"operations":["values"]}),nt},V1=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.sunburst,lt}return S(i,at),i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.getValueField=function(){return this._valueField},i.prototype.getDimensionField=function(){return[this._categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.setAttrFromSpec=function(){var nt,lt=this;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(nt=this._spec.seriesField)&&void 0!==nt?nt:VY),this._spec.drill&&this.initDrillable({"event":this.event,"mode":this._option.mode,"drillField":function(){var nt;return null!==(nt=lt._spec.drillField)&&void 0!==nt?nt:$z},"getRawData":function(){return lt.getRawData()}}),this._startAngle=Me(this._spec.startAngle),this._endAngle=Me(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible},i.prototype.initData=function(){var nt=this;at.prototype.initData.call(this);var lt=this.getRawData();lt&&(this._spec.drill&&this.initDrillableData(this._dataSet),GW(this._dataSet,"sunburstLayout",_1),GW(this._dataSet,"flatten",m1),lt.transform({"type":"sunburstLayout","options":function(){var at=nt._computeLevel(),lt=at.innerRadius,Rt=at.outerRadius,Bt=at.gap,Lt=at.label;return{"nodeKey":nt._categoryField,"width":nt.getLayoutRect().width,"height":nt.getLayoutRect().height,"center":[N(nt._centerX)?nt._centerX:nt.getLayoutRect().width/2,N(nt._centerY)?nt._centerY:nt.getLayoutRect().height/2],"startAngle":nt._startAngle,"endAngle":nt._endAngle,"innerRadius":lt,"outerRadius":Rt,"gapRadius":Bt,"label":Lt}}}),lt.transform({"type":"flatten","options":{"callback":function(nt){if(nt.datum){var at=nt.datum[nt.depth];return A(A({},nt),at)}return nt}}}))},i.prototype.getStatisticFields=function(){return w1(at.prototype.getStatisticFields.call(this),this._categoryField,this._valueField)},i.prototype._addDataIndexAndKey=function(){var nt=this.getRawData();j(null==nt?void 0:nt.dataSet)||(GW(nt.dataSet,"addVChartProperty",pY),nt.transform({"type":"addVChartProperty","options":{"beforeCall":DY.bind(this),"call":OY}}))},i.prototype.initMark=function(){this._initArcMark(),this._initLabelMark()},i.prototype.initMarkStyle=function(){this._initArcMarkStyle(),this._initLabelMarkStyle()},i.prototype._initArcMark=function(){var nt,at;if(!1!==this._sunburst.visible){var lt=this._createMark(i.mark.sunburst,{"isSeriesMark":!0,"stateSort":null===(nt=this._spec.sunburst)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.sunburst)||void 0===at?void 0:at.customShape});this._sunburstMark=lt}},i.prototype._initArcMarkStyle=function(){var nt=this;j(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{"x":function(at){return at.x+(N(nt._offsetX)?nt._offsetX:0)},"y":function(at){return at.y+(N(nt._offsetY)?nt._offsetY:0)},"outerRadius":function(nt){return nt.outerRadius},"innerRadius":function(nt){return nt.innerRadius},"startAngle":function(nt){return nt.startAngle},"endAngle":function(nt){return nt.endAngle},"fill":this.getColorAttribute()},mU.STATE_NORMAL,EU.Series)},i.prototype._initLabelMark=function(){if(!0===this._label.visible){var nt=this._createMark(i.mark.label,{"isSeriesMark":!1});this._labelMark=nt}},i.prototype._initLabelMarkStyle=function(){var nt=this;j(this._labelMark)||this.setMarkStyle(this._labelMark,{"visible":function(at){var lt,Rt=nt._labelAutoVisible;return V(Rt)&&!0===Rt.enable?(at.endAngle-at.startAngle)*(at.outerRadius-at.innerRadius)>(null!==(lt=null==Rt?void 0:Rt.circumference)&&void 0!==lt?lt:10):nt._spec.label.visible},"x":function(at){var lt;return(null===(lt=at.label)||void 0===lt?void 0:lt.x)+(N(nt._offsetX)?nt._offsetX:0)},"y":function(at){var lt;return(null===(lt=at.label)||void 0===lt?void 0:lt.y)+(N(nt._offsetY)?nt._offsetY:0)},"textBaseline":function(nt){var at;return null===(at=nt.label)||void 0===at?void 0:at.textBaseline},"textAlign":function(nt){var at;return null===(at=nt.label)||void 0===at?void 0:at.textAlign},"angle":function(nt){var at,lt;return null!==(lt=null===(at=nt.label)||void 0===at?void 0:at.angle)&&void 0!==lt?lt:0},"fontSize":10,"text":function(nt){return nt.name}},mU.STATE_NORMAL,EU.Series)},i.prototype.initTooltip=function(){this._tooltipHelper=new I1(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)},i.prototype.initAnimation=function(){var nt,at,lt=this,Rt={"animationInfo":function(){return{"innerRadius":lt._computeRadius(xt(lt.__innerRadius))[0],"outerRadius":lt._computeRadius(xt(lt.__outerRadius))[0],"startAngle":xt(lt._startAngle)[0],"endAngle":xt(lt._endAngle)[0]}}},Bt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this.getMarksInType("arc").forEach((function(nt){var at;nt.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("sunburst"))||void 0===at?void 0:at(Rt,Bt),aX(nt.name,lt._spec,lt._markAttributeContext)))})),this.getMarksInType("text").forEach((function(nt){var at;nt.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("fadeInOut"))||void 0===at?void 0:at(),aX(nt.name,lt._spec,lt._markAttributeContext)))}))},i.prototype.initEvent=function(){at.prototype.initEvent.call(this),this._spec.drill&&this.bindDrillEvent()},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._rawData.reRunAllTransform()},i.prototype._computeRadius=function(nt){var at=this;return X(nt)?nt.map((function(nt){return at._computeLayoutRadius()*nt})):this._computeLayoutRadius()*nt},i.prototype._computeLevel=function(){return{"innerRadius":this._computeRadius(this.__innerRadius),"outerRadius":this._computeRadius(this.__outerRadius),"gap":this._gap,"label":this._labelLayout}},i.prototype.getGroupFields=function(){return[]},i.prototype.getStackGroupFields=function(){return[]},i.prototype.getStackValueField=function(){return""},i.prototype._noAnimationDataKey=function(nt,at){},i.prototype.getActiveMarks=function(){return[this._sunburstMark]},i.prototype.getMarkData=function(nt){return(null==nt?void 0:nt.datum)?nt.datum[nt.datum.length-1]:nt},i.type=nt.SeriesTypeEnum.sunburst,i.mark=N1,i}(eQ);bt(V1,j1);var W1,C1=function(){Tz.registerSeries(V1.type,V1),jJ(),oJ(),ZY(),Tz.registerAnimation("sunburst",(function(nt,at){return{"appear":N0(0,at),"enter":z0(nt),"exit":j0(nt),"disappear":j0(nt)}}))},E1=function(nt,at){if(!nt)return nt;var lt=at(),Rt=lt.width,Bt=lt.height;return 0===Rt||0===Bt?nt:new T1(lt).layout(nt,{"width":Rt,"height":Bt})},G1=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.markTooltipKeyCallback=function(nt){return null==nt?void 0:nt[at.series.getDimensionField()[0]]},at}return S(e,nt),e}(zY),R1=function(nt){return"fadeIn"===nt?{"type":"fadeIn"}:{"type":"growRadiusIn"}},J1=A(A({},GY),((W1={}).circlePacking={"name":"circlePacking","type":"arc"},W1)),e2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.circlePacking,lt}return S(i,at),i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.getValueField=function(){return this._valueField},i.prototype.getDimensionField=function(){return[this._categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.setAttrFromSpec=function(){var nt,lt=this;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(nt=this._spec.seriesField)&&void 0!==nt?nt:VY),this._spec.drill&&this.initDrillable({"event":this.event,"mode":this._option.mode,"drillField":function(){var nt;return null!==(nt=lt._spec.drillField)&&void 0!==nt?nt:$z},"getRawData":function(){return lt.getRawData()}}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding},i.prototype.initData=function(){var nt=this;at.prototype.initData.call(this);var lt=this.getRawData();j(lt)||(this._spec.drill&&this.initDrillableData(this._dataSet),GW(this._dataSet,"circlePackingLayout",E1),GW(this._dataSet,"flatten",m1),lt.transform({"type":"circlePackingLayout","options":function(){return{"nodeKey":nt._categoryField,"padding":nt._layoutPadding,"includeRoot":!1,"width":nt.getLayoutRect().width||1,"height":nt.getLayoutRect().height||1}}}),lt.transform({"type":"flatten","options":{"callback":function(nt){if(nt.datum){var at=nt.datum[nt.depth];return A(A({},nt),at)}return nt}}}))},i.prototype._addDataIndexAndKey=function(){var nt=this.getRawData();j(null==nt?void 0:nt.dataSet)||(GW(nt.dataSet,"addVChartProperty",pY),nt.transform({"type":"addVChartProperty","options":{"beforeCall":DY.bind(this),"call":OY}}))},i.prototype.initMark=function(){this._initCirclePackingMark(),this._initLabelMark()},i.prototype.initMarkStyle=function(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()},i.prototype._initCirclePackingMark=function(){var nt,at;if(!1!==(null===(nt=this._circlePacking)||void 0===nt?void 0:nt.visible)){var lt=this._createMark(i.mark.circlePacking,{"isSeriesMark":!0},{"setCustomizedShape":null===(at=this._spec.circlePacking)||void 0===at?void 0:at.customShape});this._circlePackingMark=lt}},i.prototype._initCirclePackingMarkStyle=function(){j(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{"x":function(nt){return nt.x},"y":function(nt){return nt.y},"outerRadius":function(nt){return nt.radius},"innerRadius":0,"startAngle":0,"endAngle":2*Math.PI,"fill":this.getColorAttribute(),"zIndex":function(nt){return nt.depth}},mU.STATE_NORMAL,EU.Series)},i.prototype._initLabelMark=function(){var nt;if(!1!==(null===(nt=this._label)||void 0===nt?void 0:nt.visible)){var at=this._createMark(i.mark.label,{"isSeriesMark":!1});this._labelMark=at}},i.prototype._initLabelMarkStyle=function(){j(this._labelMark)||this.setMarkStyle(this._labelMark,{"x":function(nt){return nt.x},"y":function(nt){return nt.y},"text":function(nt){return nt.key},"cursor":"pointer"},mU.STATE_NORMAL,EU.Series)},i.prototype.getStatisticFields=function(){return w1(at.prototype.getStatisticFields.call(this),this._categoryField,this._valueField)},i.prototype.initTooltip=function(){this._tooltipHelper=new G1(this),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)},i.prototype.initAnimation=function(){var nt,at=this,lt=null===(nt=this._spec.animationAppear)||void 0===nt?void 0:nt.preset;this.getMarksInType("arc").forEach((function(nt){var Rt;nt.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("circlePacking"))||void 0===Rt?void 0:Rt(void 0,lt),aX(nt.name,at._spec,at._markAttributeContext)))})),this.getMarksInType("text").forEach((function(nt){var lt;nt.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("scaleInOut"))||void 0===lt?void 0:lt(),aX(nt.name,at._spec,at._markAttributeContext)))}))},i.prototype.initEvent=function(){at.prototype.initEvent.call(this),this._spec.drill&&this.bindDrillEvent()},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._rawData.reRunAllTransform()},i.prototype._noAnimationDataKey=function(nt,at){},i.prototype.getActiveMarks=function(){return[this._circlePackingMark]},i.prototype.getMarkData=function(nt){return(null==nt?void 0:nt.datum)?nt.datum[nt.datum.length-1]:nt},i.type=nt.SeriesTypeEnum.circlePacking,i.mark=J1,i}(AX);bt(e2,j1);var L1=function(){Tz.registerSeries(e2.type,e2),jJ(),oJ(),qY(),Tz.registerAnimation("circlePacking",(function(nt,at){return{"appear":R1(at),"enter":{"type":"growRadiusIn"},"exit":{"type":"growRadiusOut"},"disappear":{"type":"growRadiusOut"}}}))},D1=function(nt){var at=0;return nt.forEach((function(nt,lt){var Rt;j(nt.value)&&((null===(Rt=nt.children)||void 0===Rt?void 0:Rt.length)?nt.value=D1(nt.children):nt.value=0),at+=Math.abs(nt.value)})),at};function O1(nt){return nt.depth}function F1(nt,at){return at-1-nt.endDepth}var z1=function(nt,at){return(null==nt?void 0:nt.y0)-(null==at?void 0:at.y0)},H1=function(nt,at){if(j(nt.value))return null;var lt=(at?nt.targetLinks:nt.sourceLinks).reduce((function(nt,at){return j(at.value)?nt.count+=1:nt.sum+=at.value,nt}),{"sum":0,"count":0});return lt.count>0?(nt.value-lt.sum)/lt.count:null},n2={"left":O1,"right":F1,"justify":function(nt,at){return nt.sourceLinks.length?nt.depth:at-1},"center":function(nt,at,lt){return nt.targetLinks.length?nt.depth:nt.sourceLinks.length?At(nt.sourceLinks.map((function(nt){return lt[nt.target].depth})))-1:0},"start":O1,"end":F1},r2=Xt(0,1),a2=o((function t(nt){var at=this;r(this,t),this._ascendingSourceBreadth=function(nt,lt){return z1(at._nodeMap[nt.source],at._nodeMap[lt.source])||nt.index-lt.index},this._ascendingTargetBreadth=function(nt,lt){return z1(at._nodeMap[nt.target],at._nodeMap[lt.target])||nt.index-lt.index},this.options=Object.assign({},t.defaultOptions,nt);var lt=this.options.nodeKey,Rt=H(lt)?lt:lt?qk(lt):null;this._getNodeKey=Rt,this._logger=te.getInstance(),this._alignFunc=H(this.options.setNodeLayer)?function(nt){return at.options.setNodeLayer(nt.datum)}:n2[this.options.nodeAlign]}),[{"key":"layout","value":function(nt,at){var lt=this;if(!nt)return null;var Rt="width"in at?{"x0":0,"x1":at.width,"y0":0,"y1":at.height,"width":at.width,"height":at.height}:{"x0":Math.min(at.x0,at.x1),"x1":Math.max(at.x0,at.x1),"y0":Math.min(at.y0,at.y1),"y1":Math.max(at.y0,at.y1),"width":Math.abs(at.x1-at.x0),"height":Math.abs(at.y1-at.y0)};iS(this.options.direction)?this._viewBox={"x0":Rt.y0,"x1":Rt.y1,"y0":Rt.x0,"y1":Rt.x1,"width":Rt.height,"height":Rt.width}:this._viewBox=Rt;var Bt=this.computeNodeLinks(nt),Lt=Bt.nodes,Ht=Bt.links;if(this._nodeMap=Bt.nodeMap,this.computeNodeValues(Lt),this.computeNodeDepths(Lt),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(Lt),this._maxDepth<=0)return null;var jt=this.computeNodeBreadths(Lt);if(this.computeLinkBreadths(Lt),Lt.forEach((function(nt){nt.sourceLinks=nt.sourceLinks.filter((function(nt){return!j(nt.source)&&!j(nt.target)})),nt.targetLinks=nt.targetLinks.filter((function(nt){return!j(nt.source)&&!j(nt.target)}))})),Ht=Ht.filter((function(nt){return!j(nt.source)&&!j(nt.target)})),iS(this.options.direction))if(this.options.inverse){var $t=this._viewBox.x1;Lt.forEach((function(nt){var at=nt.y0,lt=nt.y1,Rt=nt.x0,Bt=nt.x1;nt.y0=$t-Bt,nt.y1=$t-Rt,nt.x0=at,nt.x1=lt})),Ht.forEach((function(nt){nt.vertical=!0;var at=nt.x0,lt=nt.x1,Rt=nt.y0,Bt=nt.y1;nt.x0=Rt,nt.x1=Bt,nt.y0=$t-at,nt.y1=$t-lt}))}else Lt.forEach((function(nt){var at=nt.y0,lt=nt.y1;nt.y0=nt.x0,nt.y1=nt.x1,nt.x0=at,nt.x1=lt})),Ht.forEach((function(nt){nt.vertical=!0;var at=nt.x0,lt=nt.x1;nt.x0=nt.y0,nt.x1=nt.y1,nt.y0=at,nt.y1=lt}));else this.options.inverse&&(Lt.forEach((function(nt){var at=nt.x0,lt=nt.x1;nt.x0=Rt.x1-lt,nt.x1=Rt.x1-at})),Ht.forEach((function(nt){nt.x0=Rt.x1-nt.x0,nt.x1=Rt.x1-nt.x1})));return Ht.forEach((function(nt){var at=lt._nodeMap[nt.source],Rt=lt._nodeMap[nt.target];nt.sourceRect={"x0":at.x0,"x1":at.x1,"y0":at.y0,"y1":at.y1},nt.targetRect={"x0":Rt.x0,"x1":Rt.x1,"y1":Rt.y1,"y0":Rt.y0}})),{"nodes":Lt,"links":Ht,"columns":jt}}},{"key":"computeHierarchicNodeLinks","value":function(nt){var at=this,lt=[],Rt=[],Bt={},Lt={},Ht=[];D1(nt);var s=function(nt,Rt,Lt){nt.forEach((function(nt,jt){var $t=at._getNodeKey?at._getNodeKey(nt):Lt?"".concat(Lt[Lt.length-1].key,"-").concat(jt):"".concat(Rt,"-").concat(jt),Kt=j(nt.value)?0:ee(nt.value);if(Bt[$t])Bt[$t].value=void 0;else{var te={"depth":Rt,"datum":nt,"index":jt,"key":$t,"value":Kt,"sourceLinks":[],"targetLinks":[]};Bt[$t]=te,lt.push(te)}Lt&&Ht.push({"source":Lt[Lt.length-1].key,"target":$t,"value":Kt,"parents":Lt}),nt.children&&nt.children.length&&s(nt.children,Rt+1,Lt?Lt.concat([Bt[$t]]):[Bt[$t]])}))};return s(nt,0,null),Ht.forEach((function(nt,at){var lt="".concat(nt.source,"-").concat(nt.target),Ht=vt(nt,["parents"]);if(Ht.parents=nt.parents.map((function(nt){return vt(nt,["sourceLinks","targetLinks"])})),Lt[lt])return Lt[lt].value+=ee(nt.value),void Lt[lt].datum.push(Ht);var jt={"index":at,"key":"".concat(nt.source,"-").concat(nt.target),"source":nt.source,"target":nt.target,"datum":[Ht],"value":nt.value,"parents":nt.parents.map((function(nt){return nt.key}))};Rt.push(jt),Bt[nt.source].sourceLinks.push(jt),Bt[nt.target].targetLinks.push(jt),Lt[lt]=jt})),{"nodes":lt,"links":Rt,"nodeMap":Bt}}},{"key":"computeSourceTargetNodeLinks","value":function(nt){var at=this,lt=[],Rt=[],Bt={};nt.nodes&&nt.nodes.forEach((function(nt,Rt){var Lt={"depth":-1,"datum":nt,"index":Rt,"key":at._getNodeKey?at._getNodeKey(nt):Rt,"value":nt.value,"sourceLinks":[],"targetLinks":[]};Bt[Lt.key]=Lt,lt.push(Lt)}));var Lt=[];return nt.links.forEach((function(Ht,jt){var $t=!j(Ht.source),Kt=!j(Ht.target);if(!nt.nodes||Bt[Ht.source]&&Bt[Ht.target]){nt.nodes||!$t||Bt[Ht.source]||(Bt[Ht.source]={"value":void 0,"depth":-1,"index":lt.length,"key":Ht.source,"datum":null,"sourceLinks":[],"targetLinks":[]},lt.push(Bt[Ht.source])),nt.nodes||!Kt||Bt[Ht.target]||(Bt[Ht.target]={"value":void 0,"depth":-1,"index":lt.length,"key":Ht.target,"datum":null,"sourceLinks":[],"targetLinks":[]},lt.push(Bt[Ht.target]));var te={"index":jt,"source":Ht.source,"target":Ht.target,"datum":Ht,"value":Ht.value};at.options.divideNodeValueToLink&&j(Ht.value)&&Lt.push(te),Rt.push(te),$t&&Bt[Ht.source].sourceLinks.push(te),Kt&&Bt[Ht.target].targetLinks.push(te)}})),this.options.divideNodeValueToLink&&Lt.length&&Lt.forEach((function(nt){var at=[H1(Bt[nt.source]),H1(Bt[nt.target],!0)].filter((function(nt){return!j(nt)}));at.length&&(nt.value=At(at))})),{"nodeMap":Bt,"nodes":lt,"links":Rt}}},{"key":"computeNodeLinks","value":function(nt){var at;"links"in nt?at=this.computeSourceTargetNodeLinks(nt):(this._isHierarchic=!0,at=this.computeHierarchicNodeLinks(nt.nodes));var lt=at.nodes,Rt=at.links;if(this.options.linkSortBy)for(var Bt=0,Lt=lt.length;Bt<Lt;Bt++)lt[Bt].sourceLinks.sort(this.options.linkSortBy),lt[Bt].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(lt=lt.filter((function(nt){return nt.targetLinks.length||nt.sourceLinks.length}))),{"nodes":lt,"links":Rt,"nodeMap":at.nodeMap}}},{"key":"computeNodeValues","value":function(nt){for(var at=0,lt=nt.length;at<lt;at++){var Rt=nt[at];Rt.value=Math.max(j(Rt.value)?0:ee(Rt.value),Rt.sourceLinks.reduce((function(nt,at){var lt;return nt+(null!==(lt=ee(at.value))&&void 0!==lt?lt:0)}),0),Rt.targetLinks.reduce((function(nt,at){var lt;return nt+(null!==(lt=ee(at.value))&&void 0!==lt?lt:0)}),0))}}},{"key":"computeNodeDepths","value":function(nt){for(var at,lt,Rt,Bt=nt.length,Lt=nt,Ht=0,jt=-1,$t=H(this.options.setNodeLayer)?this.options.setNodeLayer:null;Lt.length&&Ht<Bt;){lt=[],Rt={};for(var Kt=0,te=Lt.length;Kt<te;Kt++){var ne=Lt[Kt];if(ne&&(ne.depth=$t&&null!==(at=$t(ne.datum))&&void 0!==at?at:Ht,$t&&(jt=Math.max(ne.depth,jt)),ne.sourceLinks&&ne.sourceLinks.length))for(var re=0,ae=ne.sourceLinks.length;re<ae;re++){var oe=ne.sourceLinks[re];Rt[oe.target]||(lt.push(this._nodeMap[oe.target]),Rt[oe.target]=!0)}}Lt=lt,Ht+=1}Ht>Bt&&this._logger.warn("Error: there is a circular link"),this._maxDepth=$t?jt+1:Ht}},{"key":"computeNodeEndDepths","value":function(nt){for(var at,lt,Rt=nt.length,Bt=nt,Lt=0;Bt.length&&Lt<Rt;){at=[],lt={};for(var Ht=0,jt=Bt.length;Ht<jt;Ht++){var $t=Bt[Ht];if($t){$t.endDepth=Lt;for(var Kt=0,te=$t.targetLinks.length;Kt<te;Kt++){var ne=$t.targetLinks[Kt];lt[ne.source]||(at.push(this._nodeMap[ne.source]),lt[ne.source]=!0)}}}Bt=at,Lt+=1}Lt>Rt&&this._logger.warn("Error: there is a circular link")}},{"key":"computeNodeLayers","value":function(nt){var at=this.options.nodeWidth,lt=this.options.linkWidth,Rt=this.options.minStepWidth,Bt=this._viewBox.width,Lt=null,Ht=null,jt=!1;if(Y(at)){var $t=Ut(parseFloat(at.replace("%",""))/100,0,1),Kt=Bt/(this._maxDepth-1+$t);Rt>0&&(Kt=Math.max(Rt,Kt)),Lt=Kt*$t,Ht=Kt*(1-$t),jt=!0}else if(Z(at)){if(Lt=at,Z(lt))Ht=lt;else if(j(lt)){var te=(Bt-at)/(this._maxDepth-1);Rt>0&&(te=Math.max(Rt,te)),Ht=te-at}jt=!0}else H(at)&&Z(lt)&&(Ht=lt);for(var ne=[],re=0,ae=nt.length;re<ae;re++){var oe=nt[re];oe.layer=this._isHierarchic?oe.depth:Ut(Math.floor(this._alignFunc(oe,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);var se=oe.layer;se===this._maxDepth-1&&(oe.isLastLayer=!0),jt&&(oe.x0=this._viewBox.x0+se*(Lt+Ht),oe.x1=oe.x0+Lt),ne[se]?ne[se].push(oe):ne[se]=[oe]}if(this.options.nodeSortBy)for(var le=0,ue=ne.length;le<ue;le++)ne[le].sort(this.options.nodeSortBy);if(!jt&&H(at))for(var ce=this._viewBox.x0,he=0;he<this._maxDepth;he++){for(var de=ne[he],fe=0,pe=0,ve=0,Ae=de&&de.length;ve<Ae;ve++){var we=de[ve],Ce=at(we);we.x0=ce,we.x1=ce+Ce,fe=Math.max(Lt,Ce);for(var je=we.sourceLinks,Ne=0,Ve=je.length;Ne<Ve;Ne++){var Ge=je[Ne],ti=H(lt)?lt(Ge,this._viewBox):Ht;pe=Math.max(pe,ti)}}ce+=fe+pe}return ne}},{"key":"initializeNodeBreadths","value":function(nt){var at,lt,Rt,Bt=this,Lt=null!==(at=this.options.minLinkHeight)&&void 0!==at?at:0,Ht=null!==(lt=this.options.minNodeHeight)&&void 0!==lt?lt:0,jt=null!==(Rt=this.options.maxNodeHeight)&&void 0!==Rt?Rt:1/0,$t=this.options.maxLinkHeight;(j(Ht)||Ht<Lt)&&(Ht=Lt),(j($t)||$t>jt)&&($t=jt);var Kt=0,te=null,ne=null;if(H(this.options.nodeGap))te=this.options.nodeGap,Kt=nt.reduce((function(nt,at){var lt=at.reduce((function(nt,at){return nt+at.value}),0),Rt=at.reduce((function(nt,at){return nt+Bt.options.nodeGap(at)}),0);return Math.min(nt,(Bt._viewBox.height-Rt)/lt)}),1/0);else{var re=nt.reduce((function(nt,at){return Math.max(nt,at.length)}),0),ae=this._viewBox.height/re,oe=Math.min(this.options.nodeGap,ae);if(Ht+oe>ae&&(oe=Ht>=ae?ae/2:(ae-Ht)/2,Ht=Math.min(ae-oe,Ht)),te=function(){return oe},this._gapY=oe,this.options.equalNodeHeight)ne=this._viewBox.height/re-oe;else{var se=Ht>0?Math.max(oe,Ht):oe;Kt=nt.reduce((function(nt,at){var lt=at.reduce((function(nt,at){return nt+at.value}),0);return Math.min(nt,(Bt._viewBox.height-((at.length-1)*se+Ht))/lt)}),1/0)}}for(var le="start"===this.options.gapPosition,ue=!le&&"end"!==this.options.gapPosition,ce=Z(this.options.nodeHeight)?function(nt){return Bt.options.nodeHeight}:H(this.options.nodeHeight)?this.options.nodeHeight:ne>0?function(nt){return ne}:function(nt){return Math.max(nt.value*Kt,0)},he=Z(this.options.linkHeight)?function(){return Bt.options.linkHeight}:H(this.options.linkHeight)?this.options.linkHeight:function(nt,at,lt){return Math.min(Math.max(at.value?lt*r2(nt.value/at.value):0,Lt,0),$t)},b=function(){var at=nt[de];if(!at||!at.length)return 1;for(var lt=Bt._viewBox.y0,Rt=0,Lt=0,$t=0,Kt=0,ne=at.length;Kt<ne;Kt++){var re=at[Kt];Rt=te(re),le&&(lt+=Rt),$t=ce(re),Lt=Math.min(Math.max($t,Ht),jt),re.y0=lt,re.y1=lt+Lt,lt=le?re.y1:re.y1+Rt;for(var ae=0,oe=re.sourceLinks.length;ae<oe;ae++){var se=re.sourceLinks[ae];se.thickness=he(se,re,$t)}}var fe=Bt._viewBox.y1-lt+(ue?Rt:0);if(fe>0)if("start"===Bt.options.crossNodeAlign);else if("end"===Bt.options.crossNodeAlign)for(var pe=0,ve=at.length;pe<ve;++pe){var Ae=at[pe];Ae.y0+=fe,Ae.y1+=fe}else if("parent"===Bt.options.crossNodeAlign){var we=at.reduce((function(nt,at){return at.targetLinks&&at.targetLinks.length&&at.targetLinks.forEach((function(at){nt[at.source]=!0})),nt}),{});if(Object.keys(we).length&&nt[de-1]&&nt[de-1].length){var Ce=nt[de-1].filter((function(nt){return we[nt.key]}));if(Ce&&Ce.length&&Ce[0].y0!==at[0].y0)for(var je=Ce[0].y0-at[0].y0,Ne=0,Ve=at.length;Ne<Ve;++Ne){var Ge=at[Ne];Ge.y0+=je,Ge.y1+=je}}}else{fe/=at.length+1;for(var ti=0,li=at.length;ti<li;++ti){var hi=at[ti];hi.y0+=fe*(ti+1),hi.y1+=fe*(ti+1)}}else if(fe<0&&at.length>1&&Rt+(fe/=at.length-1)>=0){Rt+=fe,Bt._gapY=Math.min(Rt);for(var di=1,fi=at.length;di<fi;++di){var pi=at[di];pi.y0+=fe*di,pi.y1+=fe*di}}Bt.reorderLinks(at)},de=0,fe=nt.length;de<fe;de++)b()}},{"key":"computeNodeBreadths","value":function(nt){var at=this.computeNodeLayers(nt);this.initializeNodeBreadths(at);var lt=this.options.iterations;if(!this._isHierarchic&&!H(this.options.setNodeLayer)&&!H(this.options.nodeGap))for(var Rt=0;Rt<lt;++Rt){var Bt=Math.pow(.99,Rt),Lt=Math.max(1-Bt,(Rt+1)/lt);this.relaxRightToLeft(at,Bt,Lt),this.relaxLeftToRight(at,Bt,Lt)}return at}},{"key":"relaxLeftToRight","value":function(nt,at,lt){for(var Rt=1,Bt=nt.length;Rt<Bt;++Rt){for(var Lt=nt[Rt],Ht=0,jt=Lt.length;Ht<jt;Ht++){for(var $t=Lt[Ht],Kt=0,te=0,ne=0,re=$t.targetLinks.length;ne<re;ne++){var ae=$t.targetLinks[ne],oe=ae.value*($t.layer-this._nodeMap[ae.source].layer);Kt+=this.targetTop(this._nodeMap[ae.source],$t)*oe,te+=oe}if(te>0){var se=(Kt/te-$t.y0)*at;$t.y0+=se,$t.y1+=se,this.reorderNodeLinks($t)}}j(this.options.nodeSortBy)&&Lt.sort(z1),this.resolveCollisions(Lt,lt)}}},{"key":"relaxRightToLeft","value":function(nt,at,lt){for(var Rt=nt.length-2;Rt>=0;--Rt){for(var Bt=nt[Rt],Lt=0,Ht=Bt.length;Lt<Ht;Lt++){for(var jt=Bt[Lt],$t=0,Kt=0,te=0,ne=jt.sourceLinks.length;te<ne;te++){var re=jt.sourceLinks[te],ae=re.value*(this._nodeMap[re.target].layer-jt.layer);$t+=this.sourceTop(jt,this._nodeMap[re.target])*ae,Kt+=ae}if(Kt>0){var oe=($t/Kt-jt.y0)*at;jt.y0+=oe,jt.y1+=oe,this.reorderNodeLinks(jt)}}void 0===this.options.nodeSortBy&&Bt.sort(z1),this.resolveCollisions(Bt,lt)}}},{"key":"resolveCollisions","value":function(nt,at){var lt=nt.length>>1,Rt=nt[lt];this.resolveCollisionsBottomToTop(nt,Rt.y0-this._gapY,lt-1,at),this.resolveCollisionsTopToBottom(nt,Rt.y1+this._gapY,lt+1,at),this.resolveCollisionsBottomToTop(nt,this._viewBox.y1,nt.length-1,at),this.resolveCollisionsTopToBottom(nt,this._viewBox.y0,0,at)}},{"key":"resolveCollisionsTopToBottom","value":function(nt,at,lt,Rt){for(;lt<nt.length;++lt){var Bt=nt[lt],Lt=(at-Bt.y0)*Rt;Lt>1e-6&&(Bt.y0+=Lt,Bt.y1+=Lt),at=Bt.y1+this._gapY}}},{"key":"resolveCollisionsBottomToTop","value":function(nt,at,lt,Rt){for(;lt>=0;--lt){var Bt=nt[lt],Lt=(Bt.y1-at)*Rt;Lt>1e-6&&(Bt.y0-=Lt,Bt.y1-=Lt),at=Bt.y0-this._gapY}}},{"key":"targetTop","value":function(nt,at){var lt,Rt,Bt,Lt=nt.y0-(nt.sourceLinks.length-1)*this._gapY/2;for(lt=0,Rt=nt.sourceLinks.length;lt<Rt&&(Bt=nt.sourceLinks[lt]).target!==at.key;lt++)Lt+=Bt.thickness+this._gapY;for(lt=0,Rt=at.targetLinks.length;lt<Rt&&(Bt=at.targetLinks[lt]).source!==nt.key;lt++)Lt-=Bt.thickness;return Lt}},{"key":"sourceTop","value":function(nt,at){var lt,Rt,Bt,Lt=at.y0-(at.targetLinks.length-1)*this._gapY/2;for(lt=0,Rt=at.targetLinks.length;lt<Rt&&(Bt=at.targetLinks[lt]).source!==nt.key;lt++)Lt+=Bt.thickness+this._gapY;for(lt=0,Rt=nt.sourceLinks.length;lt<Rt&&(Bt=nt.sourceLinks[lt]).target!==at.key;lt++)Lt-=Bt.thickness;return Lt}},{"key":"computeLinkBreadthsNoOverlap","value":function(nt){for(var at=0,lt=nt.length;at<lt;at++){for(var Rt=nt[at],Bt=Rt.y0,Lt=!1,Ht=0,jt=Rt.sourceLinks.length;Ht<jt;Ht++){var $t=Rt.sourceLinks[Ht];Lt||($t.y0=Bt+$t.thickness/2),$t.x0=Rt.x1,Bt+$t.thickness>Rt.y1||Lt?($t.y0=Rt.y1-$t.thickness/2,Lt=!0):Bt+=$t.thickness}var Kt=Rt.y0;Lt=!1;for(var te=0,ne=Rt.targetLinks.length;te<ne;te++){var re=Rt.targetLinks[te];Lt||(re.y1=Kt+re.thickness/2),re.x1=Rt.x0,Kt+re.thickness>Rt.y1||Lt?(re.y1=Rt.y1-re.thickness/2,Lt=!0):Kt+=re.thickness}}}},{"key":"computeLinkBreadthsOverlap","value":function(nt){for(var at=this.options.linkOverlap,lt=0,Rt=nt.length;lt<Rt;lt++){for(var Bt=nt[lt],Lt="start"===at?Bt.y0:"end"===at?Bt.y1:(Bt.y0+Bt.y1)/2,Ht="start"===at?.5:"end"===at?-.5:0,jt=0,$t=Bt.sourceLinks.length;jt<$t;jt++){var Kt=Bt.sourceLinks[jt];Kt.y0=Lt+Ht*Kt.thickness,Kt.x0=Bt.x1}for(var te=0,ne=Bt.targetLinks.length;te<ne;te++){var re=Bt.targetLinks[te];re.y1=Lt+Ht*re.thickness,re.x1=Bt.x0}}}},{"key":"computeLinkBreadths","value":function(nt){this.options.linkOverlap?this.computeLinkBreadthsOverlap(nt):this.computeLinkBreadthsNoOverlap(nt)}},{"key":"reorderNodeLinks","value":function(nt){if(j(this.options.linkSortBy)){for(var at=nt.targetLinks,lt=nt.sourceLinks,Rt=0,Bt=at.length;Rt<Bt;Rt++){var Lt=at[Rt];this._nodeMap[Lt.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(var Ht=0,jt=lt.length;Ht<jt;Ht++){var $t=lt[Ht];this._nodeMap[$t.target].targetLinks.sort(this._ascendingSourceBreadth)}}}},{"key":"reorderLinks","value":function(nt){if(j(this.options.linkSortBy))for(var at=0,lt=nt.length;at<lt;at++){var Rt=nt[at];Rt.sourceLinks.sort(this._ascendingTargetBreadth),Rt.targetLinks.sort(this._ascendingSourceBreadth)}}}]);a2.defaultOptions={"iterations":6,"nodeAlign":"justify","direction":"horizontal","nodeWidth":24,"nodeGap":8,"crossNodeAlign":"middle","dropIsolatedNode":!0};var l2,u2,U1=function(nt,at){var lt=new a2(nt).layout(Array.isArray(at)?at[0]:at,"width"in nt?{"width":nt.width,"height":nt.height}:{"x0":nt.x0,"x1":nt.x1,"y0":nt.y0,"y1":nt.y1});return lt?[lt]:[]},Y1=function(nt,at,lt){at.forEach((function(at){j(at[lt])||nt.add(at[lt]),at.children&&at.children.length>0&&Y1(nt,at.children,lt)}))},X1=function(nt){var at;if(!nt||!X(nt))return[];if(nt.length>1){var lt={"links":[],"nodes":[]};return nt.forEach((function(nt){"links"!==nt.id&&"nodes"!==nt.id||(lt[nt.id]=nt.values)})),[lt]}return(null===(at=nt[0])||void 0===at?void 0:at.latestData)?nt[0].latestData:nt},K1=function(nt,at){if(!nt||!(null==at?void 0:at.view)||!nt.length)return[];var lt=at.view();if(lt.x1-lt.x0==0||lt.y1-lt.y0==0||lt.x1-lt.x0==-1/0||lt.x1-lt.x0==1/0||lt.y1-lt.y0==-1/0||lt.y1-lt.y0==1/0)return[];var Rt=nt[0];if(("source"!==at.sourceField||"target"!==at.targetField||"value"!==at.valueField)&&Rt.links){var Bt=[];Rt.links.forEach((function(nt){var lt={};for(var Rt in nt)Rt===at.sourceField?lt.source=nt[at.sourceField]:Rt===at.targetField?lt.target=nt[at.targetField]:Rt===at.valueField?lt.value=nt[at.valueField]:lt[Rt]=nt[Rt];Bt.push(lt)})),Rt.links=Bt}var Lt=new a2(at),Ht=[];return Ht.push(Lt.layout(Rt,lt)),Ht},q1=function(nt){var at,lt;return nt&&X(nt)&&(null===(at=nt[0])||void 0===at?void 0:at.latestData)&&nt[0].latestData.length&&nt[0].latestData[0]&&null!==(lt=nt[0].latestData[0].nodes)&&void 0!==lt?lt:[]},Z1=function(nt){var at,lt;return nt&&X(nt)&&(null===(at=nt[0])||void 0===at?void 0:at.latestData)&&nt[0].latestData.length&&nt[0].latestData[0]&&null!==(lt=nt[0].latestData[0].links)&&void 0!==lt?lt:[]},h2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._getDimensionData=function(nt){if(nt.source){if(Z(nt.source)){var lt=at.series.getSeriesKeys();return lt[nt.source]+" => "+lt[nt.target]}return nt.source+" => "+nt.target}return nt.datum?nt.datum[at.series.getSpec().categoryField]:nt.key},at.markTooltipValueCallback=function(nt){return nt.value},at}return S(e,nt),e}(zY),Q1=function(nt,at){return void 0===at&&(at=!0),{"type":"horizontal"===nt.direction?"growWidthIn":"growHeightIn","options":{"overall":at?nt.growFrom():at,"orient":"positive"}}},$1=function(nt,at){return"fadeIn"===at?{"type":"fadeIn"}:Q1(nt)},t2=function(nt){return"fadeIn"===nt?{"type":"fadeIn"}:{"type":"linkPathGrowIn"}},d2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"x":0,"y":0,"x0":0,"y0":0,"x1":100,"y1":100,"thickness":1,"round":!0})},e.prototype._initProduct=function(nt){var at=this.getVGrammarView(),lt=this.getProductId(),Rt=this.getStyle("direction");this._product=at.glyph("linkPath",null!=nt?nt:at.rootMark).id(lt).configureGlyph({"direction":Rt}),this._compiledProductId=lt},e.type="linkPath",e}(dY),i2=function(){Pj.registerGlyph("linkPath",{"back":"path","front":"path"}).registerFunctionEncoder(pV).registerChannelEncoder("backgroundStyle",(function(nt,at){return{"back":at}})).registerDefaultEncoder((function(){return{"back":{"zIndex":0},"front":{"zIndex":1}}})),Pj.registerAnimationType("linkPathGrowIn",fV),Pj.registerAnimationType("linkPathGrowOut",vV),Pj.registerAnimationType("linkPathUpdate",gV),tV(),JN(),YN(),Tz.registerMark(d2.type,d2)},f2=A(A({},GY),((l2={}).node={"name":"node","type":"rect"},l2.link={"name":"link","type":"linkPath"},l2)),p2=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"node")},e}(xX),g2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.sankey,lt.transformerConstructor=p2,lt._nodeLayoutZIndex=MU.Node,lt._labelLayoutZIndex=MU.Label,lt._viewBox=new mi,lt._fillByNode=function(nt){var at,Rt,Bt,Lt,Ht;if(nt&&nt.sourceRect&&nt.targetRect)return lt._fillByLink(nt);var jt=null===(Rt=null===(at=lt._spec.node)||void 0===at?void 0:at.style)||void 0===Rt?void 0:Rt.fill;if(N(jt))return jt;if(N(lt._spec.seriesField)){var $t=null===(Lt=null===(Bt=lt._option)||void 0===Bt?void 0:Bt.globalScale)||void 0===Lt?void 0:Lt.getScale("color"),Kt=(null==nt?void 0:nt.datum)?nt.datum:nt;return null==$t?void 0:$t.scale(null==Kt?void 0:Kt[lt._spec.seriesField])}return null===(Ht=lt._colorScale)||void 0===Ht?void 0:Ht.scale(lt._getNodeNameFromData(nt))},lt._fillByLink=function(nt){var at,Rt,Bt,Lt,Ht,jt,$t,Kt=null===(Rt=null===(at=lt._spec.link)||void 0===at?void 0:at.style)||void 0===Rt?void 0:Rt.fill;if(Kt)return Kt;if(N(lt._spec.seriesField)){var te=null===(Lt=null===(Bt=lt._nodesSeriesData)||void 0===Bt?void 0:Bt.getLatestData())||void 0===Lt?void 0:Lt.find((function(at){return nt.source===at.key})),ne=null==te?void 0:te.datum,re=null===(jt=null===(Ht=lt._option)||void 0===Ht?void 0:Ht.globalScale)||void 0===jt?void 0:jt.getScale("color");return null==re?void 0:re.scale(null==ne?void 0:ne[lt._spec.seriesField])}var ae=Z(nt.source)?lt.getNodeList()[nt.source]:nt.source;return null===($t=lt._colorScale)||void 0===$t?void 0:$t.scale(ae)},lt._handleEmphasisElement=function(nt){var at,Rt,Bt,Lt,Ht,jt=null!==(at=lt._spec.emphasis)&&void 0!==at?at:{},$t=nt.item;"adjacency"===jt.effect?$t&&$t.mark===(null===(Rt=lt._nodeMark)||void 0===Rt?void 0:Rt.getProduct())?lt._handleNodeAdjacencyClick($t):$t&&$t.mark===(null===(Bt=lt._linkMark)||void 0===Bt?void 0:Bt.getProduct())?lt._handleLinkAdjacencyClick($t):lt._handleClearEmpty():"related"===jt.effect&&($t&&$t.mark===(null===(Lt=lt._nodeMark)||void 0===Lt?void 0:Lt.getProduct())?lt._handleNodeRelatedClick($t):$t&&$t.mark===(null===(Ht=lt._linkMark)||void 0===Ht?void 0:Ht.getProduct())?lt._handleLinkRelatedClick($t):lt._handleClearEmpty())},lt._handleClearEmpty=function(){var nt,at;if(lt._needClear){var Rt=null===(nt=lt._nodeMark)||void 0===nt?void 0:nt.getProductElements();if(Rt&&Rt.length){var Bt=null===(at=lt._linkMark)||void 0===at?void 0:at.getProductElements();if(Bt&&Bt.length){var Lt=[mU.STATE_SANKEY_EMPHASIS,mU.STATE_SANKEY_EMPHASIS_REVERSE];Rt.forEach((function(nt){nt.removeState(Lt)})),Bt.forEach((function(nt){nt.removeState(Lt)})),lt._needClear=!1}}}},lt._handleNodeAdjacencyClick=function(nt){var at=nt.getDatum(),Rt=[at.key];if(lt._linkMark){var Bt=lt._linkMark.getProductElements();if(!Bt||!Bt.length)return;Bt.forEach((function(nt,lt){var Bt=nt.getDatum();Bt.source===at.key?(Rt.includes(Bt.target)||Rt.push(Bt.target),nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),nt.addState(mU.STATE_SANKEY_EMPHASIS)):Bt.target===at.key?(Rt.includes(Bt.source)||Rt.push(Bt.source),nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),nt.addState(mU.STATE_SANKEY_EMPHASIS)):(nt.removeState(mU.STATE_SANKEY_EMPHASIS),nt.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE))}))}lt._nodeMark&&lt._highLightElements(lt._nodeMark.getProductElements(),Rt),lt._needClear=!0},lt._handleLinkAdjacencyClick=function(nt){var at=nt.getDatum(),Rt=[at.source,at.target];if(lt._linkMark){var Bt=lt._linkMark.getProductElements();if(!Bt||!Bt.length)return;Bt.forEach((function(at){at===nt?(at.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),at.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":1})):(at.removeState(mU.STATE_SANKEY_EMPHASIS),at.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE))}))}lt._nodeMark&&lt._highLightElements(lt._nodeMark.getProductElements(),Rt),lt._needClear=!0},lt._handleNodeRelatedClick=function(nt){var at,Rt=nt.getDatum(),Bt=lt._nodeMark.getProductElements();if(Bt&&Bt.length){var Lt=lt._linkMark.getProductElements();if(Lt&&Lt.length){var Ht=(null===(at=Lt[0].getDatum())||void 0===at?void 0:at.parents)?"parents":"source";if("source"===Ht){var jt=[Rt.key],$t=[];if(Lt.forEach((function(nt,at){var lt,Lt,Ht,Kt,te=nt.getDatum(),ne=(null==te?void 0:te.parents)?"parents":"source";if(xt(te[ne]).includes(Rt.key)){if($t.includes(null!==(lt=te.key)&&void 0!==lt?lt:te.index)||$t.push(null!==(Lt=te.key)&&void 0!==Lt?Lt:te.index),jt.includes(te.source)||jt.push(te.source),!jt.includes(te.target)){jt.push(te.target);for(var re=Bt.find((function(nt){return nt.data[0].key===te.target})).data[0].sourceLinks,p=function(){var nt=[];return re.forEach((function(at){var lt,Rt;if(!$t.includes(null!==(lt=at.key)&&void 0!==lt?lt:at.index)&&($t.push(null!==(Rt=at.key)&&void 0!==Rt?Rt:at.index),!jt.includes(at.target))){jt.push(at.target);var Lt=Bt.find((function(nt){return nt.data[0].key===at.target}));nt.push(Lt.data[0].targetLinks)}})),re=nt,{"value":void 0}};(null==re?void 0:re.length)>0;){var ae=p();if("object"==typeof ae)return ae.value}}}else if(te.target===Rt.key&&($t.includes(null!==(Ht=te.key)&&void 0!==Ht?Ht:te.index)||$t.push(null!==(Kt=te.key)&&void 0!==Kt?Kt:te.index),!jt.includes(te.source))){jt.push(te.source);for(var oe=Bt.find((function(nt){return nt.data[0].key===te.source})).data[0].targetLinks,g=function(){var nt=[];return oe.forEach((function(at){var lt,Rt;if(!$t.includes(null!==(lt=at.key)&&void 0!==lt?lt:at.index)&&($t.push(null!==(Rt=at.key)&&void 0!==Rt?Rt:at.index),!jt.includes(at.source))){jt.push(at.source);var Lt=Bt.find((function(nt){return nt.data[0].key===at.source}));nt.push(Lt.data[0].targetLinks)}})),oe=nt,{"value":void 0}};(null==oe?void 0:oe.length)>0;){var se=g();if("object"==typeof se)return se.value}}})),lt._linkMark){var Kt=lt._linkMark.getProductElements();if(!Kt||!Kt.length)return;Kt.forEach((function(nt,at){var lt;$t.includes(null!==(lt=nt.getDatum().key)&&void 0!==lt?lt:nt.getDatum().index)?(nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),nt.addState(mU.STATE_SANKEY_EMPHASIS)):(nt.removeState(mU.STATE_SANKEY_EMPHASIS),nt.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE))}))}lt._nodeMark&&lt._highLightElements(lt._nodeMark.getProductElements(),jt)}else{var te=[Rt.key],ne=Rt.targetLinks.reduce((function(nt,at){return xt(at.datum).forEach((function(at){for(var lt=at.parents,Bt=lt.length,a=function(Bt){var Lt=lt[Bt].key,Ht=lt[Bt+1]?lt[Bt+1].key:Rt.key,jt=at.value,$t=nt.find((function(nt){return nt.source===Lt&&nt.target===Ht}));$t?$t.value+=jt:nt.push({"source":Lt,"target":Ht,"value":jt})},Lt=0;Lt<Bt;Lt++)a(Lt)})),nt}),[]);Lt.forEach((function(nt,at){var lt=nt.getDatum(),Bt=lt.datum,Lt=Bt?Bt.filter((function(nt){return nt[Ht].some((function(nt){return nt.key===Rt.key}))})):null,jt=ne.find((function(nt){return nt.source===lt.source&&nt.target===lt.target}));if(Lt&&Lt.length){te.includes(lt.source)||te.push(lt.source),te.includes(lt.target)||te.push(lt.target);var $t=Lt.reduce((function(nt,at){return nt+at.value}),0),Kt=$t/lt.value;return nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),void nt.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":Kt})}if(jt)return te.includes(lt.source)||te.push(lt.source),te.includes(lt.target)||te.push(lt.target),nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),void nt.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":jt.value/lt.value});nt.removeState(mU.STATE_SANKEY_EMPHASIS),nt.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE)})),lt._nodeMark&&lt._highLightElements(lt._nodeMark.getProductElements(),te)}lt._needClear=!0}}},lt._handleLinkRelatedClick=function(nt){var at,Rt=lt._nodeMark.getProductElements();if(Rt&&Rt.length){var Bt=lt._linkMark.getProductElements();if(Bt&&Bt.length){if("source"==((null===(at=nt.getDatum())||void 0===at?void 0:at.parents)?"parents":"source")){var Lt=[mU.STATE_SANKEY_EMPHASIS,mU.STATE_SANKEY_EMPHASIS_REVERSE];lt._linkMark&&Bt.forEach((function(nt){nt.removeState(Lt)})),lt._nodeMark&&Rt.forEach((function(nt){nt.removeState(Lt)}))}else{var Ht=nt.getDatum(),jt=[Ht.source,Ht.target],$t=[];xt(Ht.datum).forEach((function(nt){for(var at=nt.parents,lt=at.length,n=function(lt){var Rt=at[lt].key,Bt=at[lt+1].key,Lt=nt.value,Ht=$t.find((function(nt){return nt.source===Rt&&nt.target===Bt}));$t.push({"source":at[lt].key,"target":at[lt+1].key,"value":nt.value}),Ht?Ht.value+=Lt:$t.push({"source":Rt,"target":Bt,"value":Lt})},Rt=0;Rt<lt-1;Rt++)n(Rt)})),Bt.forEach((function(nt){var at=nt.getDatum(),lt=at.datum;if(at.source===Ht.source&&at.target===Ht.target)return nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),void nt.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":1});var Rt=lt?lt.filter((function(nt){var at=nt.parents.map((function(nt){return nt.key}));return at.includes(Ht.source)&&at.includes(Ht.target)})):null;if(Rt&&Rt.length){jt.includes(at.source)||jt.push(at.source),jt.includes(at.target)||jt.push(at.target);var Bt=Rt.filter((function(nt){return nt.parents.some((function(at,lt){var Rt;return at.key===Ht.source&&(null===(Rt=nt.parents[lt+1])||void 0===Rt?void 0:Rt.key)===Ht.target}))})).reduce((function(nt,at){return nt+at.value}),0),Lt=Bt/at.value;return nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),void nt.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":Lt})}var Kt=$t.find((function(nt){return nt.source===at.source&&nt.target===at.target}));if(Kt)return jt.includes(at.source)||jt.push(at.source),jt.includes(at.target)||jt.push(at.target),nt.removeState(mU.STATE_SANKEY_EMPHASIS_REVERSE),void nt.addState(mU.STATE_SANKEY_EMPHASIS,{"ratio":Kt.value/at.value});nt.removeState(mU.STATE_SANKEY_EMPHASIS),nt.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE)})),lt._highLightElements(Rt,jt)}lt._needClear=!0}}},lt}return S(i,at),Object.defineProperty(i.prototype,"direction",{"get":function(){var nt;return null!==(nt=this._spec.direction)&&void 0!==nt?nt:"horizontal"},"enumerable":!1,"configurable":!0}),i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getValueField=function(){return this._valueField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.setAttrFromSpec=function(){var nt;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(nt=this._spec.seriesField)&&void 0!==nt?nt:this._spec.categoryField)},i.prototype.initData=function(){var nt,lt,Rt,Bt,Lt=this;at.prototype.initData.call(this);var Ht=this.getViewData(),jt=this.getRawData();if(jt&&Ht){GW(this._dataSet,"sankeyLayout",K1),GW(this._dataSet,"sankeyFormat",X1),jt.transform({"type":"sankeyFormat"},!1),Ht.transform({"type":"sankeyLayout","options":{"view":function(){return{"x0":Lt._viewBox.x1,"x1":Lt._viewBox.x2,"y0":Lt._viewBox.y1,"y1":Lt._viewBox.y2}},"sourceField":this._spec.sourceField,"targetField":this._spec.targetField,"valueField":this._spec.valueField,"direction":this.direction,"crossNodeAlign":this._spec.crossNodeAlign,"nodeAlign":null!==(nt=this._spec.nodeAlign)&&void 0!==nt?nt:"justify","nodeGap":null!==(lt=this._spec.nodeGap)&&void 0!==lt?lt:8,"nodeWidth":null!==(Rt=this._spec.nodeWidth)&&void 0!==Rt?Rt:10,"linkWidth":this._spec.linkWidth,"minStepWidth":this._spec.minStepWidth,"minNodeHeight":null!==(Bt=this._spec.minNodeHeight)&&void 0!==Bt?Bt:4,"maxNodeHeight":this._spec.maxNodeHeight,"minLinkHeight":this._spec.minLinkHeight,"maxLinkHeight":this._spec.maxLinkHeight,"iterations":this._spec.iterations,"nodeKey":this._spec.nodeKey,"linkSortBy":this._spec.linkSortBy,"nodeSortBy":this._spec.nodeSortBy,"setNodeLayer":this._spec.setNodeLayer,"dropIsolatedNode":this._spec.dropIsolatedNode,"nodeHeight":this._spec.nodeHeight,"linkHeight":this._spec.linkHeight,"equalNodeHeight":this._spec.equalNodeHeight,"linkOverlap":this._spec.linkOverlap,"inverse":this._spec.inverse},"level":vU.sankeyLayout});var $t=this._option.dataSet;GW($t,"sankeyNodes",q1),GW($t,"flatten",m1);var Kt=new Es($t,{"name":"sankey-node-".concat(this.id,"-data")});Kt.parse([this.getViewData()],{"type":"dataview"}),Kt.transform({"type":"sankeyNodes"}),Kt.transform({"type":"flatten","options":{"callback":function(nt){if(nt.datum){var at=nt.datum[nt.depth];return A(A({},nt),at)}return nt}}},!1),Kt.transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1),this._nodesSeriesData=new jY(this._option,Kt),GW($t,"sankeyLinks",Z1);var te=new Es($t,{"name":"sankey-link-".concat(this.id,"-data")});te.parse([this.getViewData()],{"type":"dataview"}),te.transform({"type":"sankeyLinks"}),te.transform({"type":"addVChartProperty","options":{"beforeCall":IY.bind(this),"call":LY}},!1),this._linksSeriesData=new jY(this._option,te)}},i.prototype.compileData=function(){var nt,lt;at.prototype.compileData.call(this),null===(nt=this._linksSeriesData)||void 0===nt||nt.compile(),null===(lt=this._nodesSeriesData)||void 0===lt||lt.compile()},i.prototype.initMark=function(){var nt,at,lt,Rt;this._rootMark.setMarkConfig({"overflow":this._spec.overflow,"interactive":!!this._spec.overflow});var Bt=this._createMark(i.mark.node,{"isSeriesMark":!0,"dataView":this._nodesSeriesData.getDataView(),"dataProductId":this._nodesSeriesData.getProductId(),"stateSort":null===(nt=this._spec.node)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.node)||void 0===at?void 0:at.customShape});Bt&&(Bt.setMarkConfig({"zIndex":this._nodeLayoutZIndex}),this._nodeMark=Bt);var Lt=this._createMark(i.mark.link,{"dataView":this._linksSeriesData.getDataView(),"dataProductId":this._linksSeriesData.getProductId(),"stateSort":null===(lt=this._spec.link)||void 0===lt?void 0:lt.stateSort},{"setCustomizedShape":null===(Rt=this._spec.link)||void 0===Rt?void 0:Rt.customShape});Lt&&(this._linkMark=Lt)},i.prototype._buildMarkAttributeContext=function(){at.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)},i.prototype.valueToNode=function(nt){var at=this._nodesSeriesData.getLatestData(),lt=xt(nt)[0];return at&&at.find((function(nt){return nt.key===lt}))},i.prototype.valueToLink=function(nt){var at=this._linksSeriesData.getLatestData(),lt=xt(nt);return at&&at.find((function(nt){return nt&&nt.source===lt[0]&&nt.target===lt[1]}))},i.prototype.valueToPositionX=function(nt){var at=this.valueToNode(nt);return null==at?void 0:at.x0},i.prototype.valueToPositionY=function(nt){var at=this.valueToNode(nt);return null==at?void 0:at.y0},i.prototype.initMarkStyle=function(){this._initNodeMarkStyle(),this._initLinkMarkStyle()},i.prototype._initNodeMarkStyle=function(){var nt,at,lt=this._nodeMark;lt&&(this.setMarkStyle(lt,{"x":function(nt){return nt.x0},"x1":function(nt){return nt.x1},"y":function(nt){return nt.y0},"y1":function(nt){return nt.y1}},mU.STATE_NORMAL,EU.Mark),this.setMarkStyle(lt,{"fill":null!==(at=null===(nt=this._spec.node.style)||void 0===nt?void 0:nt.fill)&&void 0!==at?at:this._fillByNode},"normal",EU.User_Mark))},i.prototype._initLinkMarkStyle=function(){var nt,at,lt=this._linkMark;lt&&(this.setMarkStyle(lt,{"x0":function(nt){return nt.x0},"x1":function(nt){return nt.x1},"y0":function(nt){return nt.y0},"y1":function(nt){return nt.y1},"thickness":function(nt){return nt.thickness},"direction":this.direction},mU.STATE_NORMAL,EU.Series),this.setMarkStyle(lt,{"fill":null!==(at=null===(nt=this._spec.link.style)||void 0===nt?void 0:nt.fill)&&void 0!==at?at:this._fillByLink},"normal",EU.User_Mark))},i.prototype.initLabelMarkStyle=function(nt,at){var lt=this;if(nt){var Rt=at.position;Rt&&Rt.includes("inside")?this.setMarkStyle(nt,{"fill":"#ffffff","text":function(nt){return lt._createText(nt,at)},"maxLineWidth":function(nt){var lt;return null!==(lt=at.limit)&&void 0!==lt?lt:nt.x1-nt.x0}}):this.setMarkStyle(nt,{"fill":this._fillByNode,"text":function(nt){return lt._createText(nt,at)},"maxLineWidth":at.limit}),nt.setMarkConfig({"zIndex":this._labelLayoutZIndex})}},i.prototype._createText=function(nt,at){if(j(nt)||j(nt.datum))return"";var lt=nt.datum[this._spec.categoryField]||"",Rt=at||{},Bt=vY(Rt.formatMethod,Rt.formatter,lt,nt.datum),Lt=Bt.formatFunc,Ht=Bt.args;return Lt&&(lt=Lt.apply(void 0,P(P([],E(Ht),!1),[{"series":this}],!1))),lt},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt=this,Lt={"direction":this.direction,"growFrom":function(){var nt,at;return"horizontal"===Bt.direction?null===(nt=Bt._xAxisHelper)||void 0===nt?void 0:nt.getScale(0).scale(0):null===(at=Bt._yAxisHelper)||void 0===at?void 0:at.getScale(0).scale(0)}},Ht=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("sankeyNode"))||void 0===lt?void 0:lt(Lt,Ht),aX("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("sankeyLinkPath"))||void 0===Rt?void 0:Rt(Lt,Ht),aX("link",this._spec,this._markAttributeContext)))},i.prototype.initEvent=function(){var nt,lt,Rt;at.prototype.initEvent.call(this),null===(nt=this._nodesSeriesData.getDataView())||void 0===nt||nt.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),null===(lt=this._linksSeriesData.getDataView())||void 0===lt||lt.target.addListener("change",this.linksSeriesDataUpdate.bind(this));var Bt=null!==(Rt=this._spec.emphasis)&&void 0!==Rt?Rt:{};if(!0!==this._option.disableTriggerEvent&&Bt.enable&&("adjacency"===Bt.effect||"related"===Bt.effect)){var Lt="hover"===Bt.trigger?"pointerover":"pointerdown";this.event.on(Lt,{"level":VW.chart},this._handleEmphasisElement)}},i.prototype.nodesSeriesDataUpdate=function(){this._nodesSeriesData.updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()},i.prototype.linksSeriesDataUpdate=function(){this._linksSeriesData.updateData()},i.prototype._highLightElements=function(nt,at){nt&&nt.length&&nt.forEach((function(nt){nt.removeState([mU.STATE_SANKEY_EMPHASIS_REVERSE,mU.STATE_SANKEY_EMPHASIS]),at.includes(nt.getDatum().key)?nt.addState(mU.STATE_SANKEY_EMPHASIS):nt.addState(mU.STATE_SANKEY_EMPHASIS_REVERSE)}))},i.prototype.initTooltip=function(){this._tooltipHelper=new h2(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)},i.prototype._setNodeOrdinalColorScale=function(){var nt,at,lt,Rt,Bt,Lt=null===(at=null===(nt=this._option)||void 0===nt?void 0:nt.globalScale)||void 0===at?void 0:at.getScale("color");if(null==Lt?void 0:Lt._specified)this._colorScale=Lt;else{var Ht,jt;Lt&&(Ht=Lt.domain(),jt=Lt.range()),jt||(jt=this._getDataScheme()),Ht&&!j(Ht[0])||(Ht=this.getNodeList()).length>10&&(jt=null===(lt=this._getDataScheme()[1])||void 0===lt?void 0:lt.scheme);var $t=new AF;null===(Bt=(Rt=$t.domain(Ht)).range)||void 0===Bt||Bt.call(Rt,jt),this._colorScale=$t}},i.prototype.getNodeList=function(){var nt,at,lt=this;if(this._nodeList)return this._nodeList;var Rt=this._rawData.latestData[0],Bt=(null==Rt?void 0:Rt.nodes)?(null===(nt=Rt.nodes[0])||void 0===nt?void 0:nt.children)?Array.from(this.extractNamesFromTree(Rt.nodes,this._spec.categoryField)):Rt.nodes.map((function(nt,at){return nt[lt._spec.categoryField]})):(null==Rt?void 0:Rt.links)?Array.from(this.extractNamesFromLink(Rt.links)):null===(at=null==Rt?void 0:Rt.values)||void 0===at?void 0:at.map((function(nt,at){return nt[lt._spec.categoryField]}));return this._nodeList=Bt,Bt},i.prototype._getNodeNameFromData=function(nt){var at;return(null==nt?void 0:nt.datum)?nt.datum[this._spec.categoryField]:null!==(at=nt.key)&&void 0!==at?at:nt[this._spec.categoryField]},i.prototype.extractNamesFromTree=function(nt,at){var lt=this,Rt=new Set;return nt.forEach((function(nt){Rt.add(nt[at]),nt.children&&lt.extractNamesFromTree(nt.children,at).forEach((function(nt){return Rt.add(nt)}))})),Rt},i.prototype.extractNamesFromLink=function(nt){var at=new Set,lt=this._spec,Rt=lt.sourceField,Bt=lt.targetField;return nt.forEach((function(nt){N(nt[Rt])&&at.add(nt[Rt]),N(nt[Bt])&&at.add(nt[Bt])})),at},i.prototype.getDimensionField=function(){return[this._spec.categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.getRawDataStatisticsByField=function(nt,at){var lt;return this._rawStatisticsCache||(this._rawStatisticsCache={}),this._rawStatisticsCache[nt]||(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(null===(lt=this._viewDataStatistics.latestData)||void 0===lt?void 0:lt[nt])?this._rawStatisticsCache[nt]=this._viewDataStatistics.latestData[nt]:this._rawData&&(this._rawStatisticsCache[nt]={"values":this._collectByField(nt)})),this._rawStatisticsCache[nt]},i.prototype._collectByField=function(nt){var at,lt,Rt,Bt=this,Lt=[],Ht=null===(lt=null===(at=this.getRawData())||void 0===at?void 0:at.latestData)||void 0===lt?void 0:lt[0];if(!Ht)return[];if(Ht.links)(null===(Rt=Ht.nodes)||void 0===Rt?void 0:Rt.length)&&Ht.nodes.forEach((function(nt){nt[Bt._seriesField]&&Lt.push(nt[Bt._seriesField])}));else if(Ht.nodes){var jt=new Set;return Y1(jt,Ht.nodes,this._seriesField),Array.from(jt)}return Lt},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype._noAnimationDataKey=function(nt,at){},i.prototype.getActiveMarks=function(){return[this._nodeMark,this._linkMark]},i.prototype.getMarkData=function(nt){return nt.datum?X(nt.datum)?nt.datum[nt.datum.length-1]:nt.datum:nt},i.type=nt.SeriesTypeEnum.sankey,i.transformerConstructor=p2,i.mark=f2,i}(AX),o2=function(){Pj.registerTransform("sankey",{"transform":U1,"markPhase":"beforeJoin"},!0),sq(),i2(),oJ(),Tz.registerAnimation("sankeyNode",(function(nt,at){return A({"appear":$1(nt,at)},_X)})),Tz.registerAnimation("sankeyLinkPath",(function(nt,at){return{"appear":t2(at),"enter":{"type":"linkPathGrowIn"},"exit":{"type":"linkPathGrowOut"},"disappear":{"type":"linkPathGrowOut"}}})),ZY(),Tz.registerSeries(g2.type,g2)},s2=function(nt,at){var lt={},Rt=at.fields;if(H(Rt)&&(Rt=Rt()),!(null==Rt?void 0:Rt.length)||!(null==nt?void 0:nt.length))return lt;if(!nt[0].latestData)return lt;var Bt=nt[0].latestData,Lt=m1(Bt);return MY([{"latestData":Lt}],at)},y2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.markTooltipKeyCallback=function(nt){var lt,Rt;return null===(Rt=null===(lt=at.series)||void 0===lt?void 0:lt.getMarkData(nt))||void 0===Rt?void 0:Rt[at.series.getDimensionField()[0]]},at.markTooltipValueCallback=function(nt){var lt,Rt,Bt=at._seriesCacheInfo.measureFields,Lt=null===(lt=at.series)||void 0===lt?void 0:lt.getMarkData(nt);if(Bt[0]&&Lt)return null!==(Rt=Lt[Bt[0]])&&void 0!==Rt?Rt:nt.value},at.dimensionTooltipTitleCallback=function(nt){var lt,Rt=at._seriesCacheInfo.dimensionFields,Bt=null===(lt=at.series)||void 0===lt?void 0:lt.getMarkData(nt);if(Rt[0]&&Bt)return Bt[Rt[0]]},at}return S(e,nt),Object.defineProperty(e.prototype,"defaultShapeType",{"get":function(){return"square"},"enumerable":!1,"configurable":!0}),e}(zY),m2=A(A({},GY),((u2={}).nonLeaf={"name":"nonLeaf","type":"rect"},u2.leaf={"name":"leaf","type":"rect"},u2.nonLeafLabel={"name":"nonLeafLabel","type":"text"},u2)),c2=function(nt){return"fadeIn"===nt?{"type":"fadeIn"}:{"type":"growCenterIn"}},b2=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(nt,"leaf")},e}(xX),x2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.treemap,lt.transformerConstructor=b2,lt._categoryField="name",lt._valueField="value",lt._viewBox=new mi,lt._enableAnimationHook=lt.enableMarkAnimation.bind(lt),lt.isHierarchyData=function(){return!0},lt}return S(i,at),i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getValueField=function(){return this._valueField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.setAttrFromSpec=function(){var nt,lt=this;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!==(nt=this._spec.seriesField)&&void 0!==nt?nt:VY),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new Mi),this._spec.drill&&this.initDrillable({"event":this.event,"mode":this._option.mode,"drillField":function(){var nt,at;return null!==(at=null!==(nt=lt._spec.drillField)&&void 0!==nt?nt:lt._categoryField)&&void 0!==at?at:$z},"getRawData":function(){return lt.getRawData()}}),Q(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)},i.prototype.initData=function(){at.prototype.initData.call(this),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)},i.prototype.compile=function(){at.prototype.compile.call(this),this._runTreemapTransform()},i.prototype._runTreemapTransform=function(nt){var at,lt,Rt,Bt,Lt=this;void 0===nt&&(nt=!1);var Ht=this._data.getProduct();Ht&&Ht.transform([{"type":"treemap","nameField":this._categoryField,"valueField":this._valueField,"x0":this._viewBox.x1,"x1":this._viewBox.x2,"y0":this._viewBox.y1,"y1":this._viewBox.y2,"maxDepth":this._maxDepth,"gapWidth":this._spec.gapWidth,"padding":this._spec.nodePadding,"splitType":this._spec.splitType,"aspectRatio":this._spec.aspectRatio,"labelPadding":(null===(at=this._spec.nonLeafLabel)||void 0===at?void 0:at.visible)?null===(lt=this._spec.nonLeafLabel)||void 0===lt?void 0:lt.padding:0,"labelPosition":null===(Rt=this._spec.nonLeafLabel)||void 0===Rt?void 0:Rt.position,"minVisibleArea":null!==(Bt=this._spec.minVisibleArea)&&void 0!==Bt?Bt:10,"minChildrenVisibleArea":this._spec.minChildrenVisibleArea,"minChildrenVisibleSize":this._spec.minChildrenVisibleSize,"flatten":!0},{"type":"map","callback":function(nt){return nt&&[VY,"name"].forEach((function(at){nt[at]=nt.datum[nt.depth][Lt._categoryField]})),nt}}]),nt&&this.getCompiler().renderNextTick()},i.prototype._addDataIndexAndKey=function(){var nt;(null===(nt=this._rawData)||void 0===nt?void 0:nt.dataSet)&&(GW(this._rawData.dataSet,"addVChartProperty",pY),this._rawData.transform({"type":"addVChartProperty","options":{"beforeCall":DY.bind(this),"call":OY}}))},i.prototype.getRawDataStatisticsByField=function(nt,at){var lt;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[nt]&&this._rawData){var Rt=s2([this._rawData],{"fields":[{"key":nt,"operations":at?["min","max"]:["values"]}]})[nt];this._rawStatisticsCache[nt]=ft(null!==(lt=this._rawStatisticsCache[nt])&&void 0!==lt?lt:{},Rt)}return this._rawStatisticsCache[nt]},i.prototype._createHierarchyDataStatistics=function(nt,at){var lt=this;GW(this._dataSet,"hierarchyDimensionStatistics",s2),GW(this._dataSet,"flatten",m1);var Rt=new Es(this._dataSet,{"name":nt});return Rt.parse(at,{"type":"dataview"}),Rt.transform({"type":"hierarchyDimensionStatistics","options":{"fields":function(){var nt=lt.getStatisticFields();return lt._seriesField&&lt._seriesField!==lt._categoryField&&nt.push({"key":lt._seriesField,"operations":["values"]}),nt}}},!1),Rt},i.prototype.getStatisticFields=function(){return w1(at.prototype.getStatisticFields.call(this),this._categoryField,this._valueField)},i.prototype.initMark=function(){var nt,at,lt,Rt,Bt=this,Lt=this._createMark(i.mark.nonLeaf,{"isSeriesMark":!0,"stateSort":null===(nt=this._spec.nonLeaf)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.nonLeaf)||void 0===at?void 0:at.customShape});Lt&&(Lt.setTransform([{"type":"filter","callback":function(nt){return!Bt._shouldFilterElement(nt,"nonLeaf")}}]),this._nonLeafMark=Lt);var Ht=this._createMark(i.mark.leaf,{"isSeriesMark":!0,"stateSort":null===(lt=this._spec.leaf)||void 0===lt?void 0:lt.stateSort},{"setCustomizedShape":null===(Rt=this._spec.leaf)||void 0===Rt?void 0:Rt.customShape});Ht&&(Ht.setTransform([{"type":"filter","callback":function(nt){return!Bt._shouldFilterElement(nt,"leaf")}}]),this._leafMark=Ht)},i.prototype.initMarkStyle=function(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()},i.prototype._initLeafMarkStyle=function(){this._leafMark&&this.setMarkStyle(this._leafMark,{"x":function(nt){return nt.x0},"y":function(nt){return nt.y0},"x1":function(nt){return nt.x1},"y1":function(nt){return nt.y1},"fill":this.getColorAttribute()},mU.STATE_NORMAL,EU.Series)},i.prototype._initNonLeafMarkStyle=function(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{"x":function(nt){return nt.x0},"y":function(nt){return nt.y0},"x1":function(nt){return nt.x1},"y1":function(nt){return nt.y1},"fill":this.getColorAttribute()},mU.STATE_NORMAL,EU.Series)},i.prototype._initRichStyleOfLabelMark=function(nt){"rich"===nt.getTextType()&&this.setMarkStyle(nt,{"maxWidth":function(nt){return Math.abs(nt.x0-nt.x1)},"maxHeight":function(nt){return Math.abs(nt.y0-nt.y1)},"ellipsis":!0},mU.STATE_NORMAL,EU.Series)},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&(this._labelMark=nt,nt.setRule("treemap"),this.setMarkStyle(nt,{"x":function(nt){return(nt.x0+nt.x1)/2},"y":function(nt){return(nt.y0+nt.y1)/2},"text":function(nt){var lt;return null===(lt=nt.datum[nt.depth])||void 0===lt?void 0:lt[at.getDimensionField()[0]]},"maxLineWidth":function(nt){return nt.x1===nt.x0?Number.MIN_VALUE:nt.x1-nt.x0}},mU.STATE_NORMAL,EU.Series),this._initRichStyleOfLabelMark(nt))},i.prototype.initNonLeafLabelMarkStyle=function(nt){var at=this;nt&&(this._nonLeafLabelMark=nt,nt.setRule("treemap"),this.setMarkStyle(nt,{"x":function(nt){return nt.labelRect?(nt.labelRect.x0+nt.labelRect.x1)/2:(nt.x0+nt.x1)/2},"y":function(nt){return nt.labelRect?(nt.labelRect.y0+nt.labelRect.y1)/2:(nt.y0+nt.y1)/2},"text":function(nt){var lt;return null===(lt=nt.datum[nt.depth])||void 0===lt?void 0:lt[at.getDimensionField()[0]]},"maxLineWidth":function(nt){return nt.x1===nt.x0?Number.MIN_VALUE:nt.x1-nt.x0}},mU.STATE_NORMAL,EU.Series),this._initRichStyleOfLabelMark(nt))},i.prototype.initAnimation=function(){var nt=this;this.getMarksInType("rect").forEach((function(at){var lt;at.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("treemap"))||void 0===lt?void 0:lt(),aX(at.name,nt._spec,nt._markAttributeContext)))}))},i.prototype.initEvent=function(){var nt=this;at.prototype.initEvent.call(this),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",(function(at){nt.handlePan(at)})),this.initZoomEventOfSeries(this),this.event.on("zoom",(function(at){nt.handleZoom(at)}))),this._spec.drill&&this.bindDrillEvent()},i.prototype._getDataIdKey=function(){return"key"},i.prototype.initTooltip=function(){this._tooltipHelper=new y2(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)},i.prototype._shouldFilterElement=function(nt,at){var lt=nt.isLeaf;return"leaf"===at?!lt:lt},i.prototype.handlePan=function(nt){var at=nt.delta;if(0!==at[0]||0!==at[1]){this._matrix.reset(),this._matrix.translate(at[0],at[1]);var lt=this._matrix,Rt=lt.a,Bt=lt.b,Lt=lt.c,Ht=lt.d,jt=lt.e,$t=lt.f;this._matrix.multiply(Rt,Bt,Lt,Ht,jt,$t),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}},i.prototype.handleZoom=function(nt){var at=nt.scale,lt=nt.scaleCenter;if(1!==at){this._matrix.reset();var Rt=lt.x,Bt=lt.y;this._matrix.translate(Rt,Bt),this._matrix.scale(at,at),this._matrix.translate(-Rt,-Bt);var Lt=this._matrix,Ht=Lt.a,jt=Lt.b,$t=Lt.c,Kt=Lt.d,te=Lt.e,ne=Lt.f;this._matrix.multiply(Ht,jt,$t,Kt,te,ne),this.disableMarkAnimation(),this.event.on(GH.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}},i.prototype.getDimensionField=function(){return[this._categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()},i.prototype.enableMarkAnimation=function(){this.getMarks().forEach((function(nt){var at;null===(at=nt.getProduct().animate)||void 0===at||at.enable()})),[this._labelMark,this._nonLeafLabelMark].forEach((function(nt){nt&&nt.getComponent()&&nt.getComponent().getProduct().getGroupGraphicItem().enableAnimation()})),this.event.off(GH.AFTER_DO_RENDER,this._enableAnimationHook)},i.prototype.disableMarkAnimation=function(){this.getMarks().forEach((function(nt){var at;null===(at=nt.getProduct().animate)||void 0===at||at.disable()})),[this._labelMark,this._nonLeafLabelMark].forEach((function(nt){nt&&nt.getComponent()&&nt.getComponent().getProduct().getGroupGraphicItem().disableAnimation()}))},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getActiveMarks=function(){return[this._nonLeafMark,this._leafMark]},i.prototype.getMarkData=function(nt){return(null==nt?void 0:nt.datum)?nt.datum[nt.datum.length-1]:nt},i.type=nt.SeriesTypeEnum.treemap,i.mark=m2,i.transformerConstructor=b2,i}(AX);bt(x2,j1),bt(x2,NK);var k2,A2,v2=function(){Pj.registerTransform("filter",{"transform":CV,"markPhase":"beforeJoin"},!0),Pj.registerTransform("map",{"transform":EV,"markPhase":"beforeJoin"},!0),sq(),oJ(),Tz.registerAnimation("treemap",(function(nt,at){return{"appear":c2(at),"enter":{"type":"growCenterIn"},"exit":{"type":"growCenterOut"},"disappear":{"type":"growCenterOut"}}})),ZY(),Pj.registerTransform("treemap",{"transform":J0,"markPhase":"beforeJoin"},!0),Tz.registerSeries(x2.type,x2)},w2=A(A({},pJ),((k2={}).segment={"name":"segment","type":"arc"},k2.track={"name":"track","type":"arc"},k2)),T2=A(A({},GY),((A2={}).pin={"name":"pin","type":"path"},A2.pinBackground={"name":"pinBackground","type":"path"},A2.pointer={"name":"pointer","type":["path","rect"]},A2)),P2={"type":"fadeIn"};function _2(nt,at){return"fadeIn"===at?P2:function(nt){return{"channel":{"angle":{"from":nt.startAngle+Math.PI/2}}}}(nt)}var R2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!1,at}return S(e,nt),e}(xX),I2=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.enableByType=function(nt){return"dimension"!==nt},e}(zY),B2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.gaugePointer,lt.transformerConstructor=R2,lt._pinMark=null,lt._pointerMark=null,lt._pinBackgroundMark=null,lt}return S(i,at),i.prototype.setAttrFromSpec=function(){var nt;at.prototype.setAttrFromSpec.call(this),this.setRadiusField(this._spec.radiusField),this._pointerType="rect"===(null===(nt=this._spec.pointer)||void 0===nt?void 0:nt.type)?"rect":"path"},i.prototype.initMark=function(){this._pinBackgroundMark=this._createMark(i.mark.pinBackground),this._pointerMark=this._createMark(A(A({},i.mark.pointer),{"type":this._pointerType}),{"isSeriesMark":!0}),this._pinMark=this._createMark(i.mark.pin)},i.prototype.initMarkStyle=function(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()},i.prototype.initGroups=function(){},i.prototype.initPointerMarkStyle=function(){var nt=this,at=this._pointerMark,lt=this._spec.pointer;at&&(this.setMarkStyle(at,{"x":function(at){var Rt,Bt;return nt._getPointerAnchor(at,lt).x-nt._getPointerWidth()*(null!==(Bt=null===(Rt=null==lt?void 0:lt.center)||void 0===Rt?void 0:Rt[0])&&void 0!==Bt?Bt:0)},"y":function(at){var Rt,Bt;return nt._getPointerAnchor(at,lt).y-nt._getPointerHeight(at)*(null!==(Bt=null===(Rt=null==lt?void 0:lt.center)||void 0===Rt?void 0:Rt[1])&&void 0!==Bt?Bt:0)},"anchor":function(at){var Rt=nt._getPointerAnchor(at,lt);return[Rt.x,Rt.y]},"fill":this.getColorAttribute(),"zIndex":200}),"path"===this._pointerType?this.setMarkStyle(at,{"scaleX":this._getPointerWidth.bind(this),"scaleY":this._getPointerHeight.bind(this),"angle":function(at){return nt._getPointerAngle(at)+Math.PI/2}}):this.setMarkStyle(at,{"width":this._getPointerWidth.bind(this),"height":this._getPointerHeight.bind(this),"angle":function(at){return nt._getPointerAngle(at)-Math.PI/2}}))},i.prototype.initTooltip=function(){this._tooltipHelper=new I2(this),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)},i.prototype._getPointerAnchor=function(nt,at){var lt;return null===(lt=at.isOnCenter)||void 0===lt||lt?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({"radius":this._innerRadius*this._computeLayoutRadius(),"angle":this.angleAxisHelper.dataToPosition([nt[this._angleField[0]]])})},i.prototype._getPointerWidth=function(){return this._spec.pointer.width*this._computeLayoutRadius()},i.prototype._getPointerHeight=function(nt){var at,lt,Rt=this._spec.pointer,Bt=this._radiusField[0];return N(this.radiusAxisHelper)&&N(Bt)?this.radiusAxisHelper.dataToPosition([nt[Bt]])-(null!==(at=null==Rt?void 0:Rt.innerPadding)&&void 0!==at?at:0)-(null!==(lt=null==Rt?void 0:Rt.outerPadding)&&void 0!==lt?lt:10):Rt.height*this._computeLayoutRadius()},i.prototype._getPointerAngle=function(nt){var at=this.angleAxisHelper.getScale().domain(),lt=St(at),Rt=At(at),Bt=Ut(nt[this._angleField[0]],Rt,lt);return this.angleAxisHelper.dataToPosition([Bt])},i.prototype._getRotatedPointerCenterOffset=function(nt){var at,lt,Rt,Bt,Lt=this._spec.pointer,Ht=this._getPointerWidth()*(null!==(lt=null===(at=null==Lt?void 0:Lt.center)||void 0===at?void 0:at[0])&&void 0!==lt?lt:0),jt=-this._getPointerHeight(nt)*(null!==(Bt=null===(Rt=null==Lt?void 0:Lt.center)||void 0===Rt?void 0:Rt[1])&&void 0!==Bt?Bt:0),$t=this._getPointerAngle(nt)-Math.PI/2,Kt=Math.cos($t),te=Math.sin($t);return{"x":Ht*Kt+jt*te,"y":-(jt*Kt-Ht*te)}},i.prototype.initPinBackgroundMarkStyle=function(){var nt=this,at=this._pinBackgroundMark,lt=this._spec.pinBackground;at&&this.setMarkStyle(at,{"x":function(at){return nt._getPointerAnchor(at,lt).x},"y":function(at){return nt._getPointerAnchor(at,lt).y},"scaleX":function(){return lt.width*nt._computeLayoutRadius()},"scaleY":function(){return lt.height*nt._computeLayoutRadius()},"fill":this.getColorAttribute(),"zIndex":100})},i.prototype.initPinMarkStyle=function(){var nt=this,at=this._pinMark,lt=this._spec.pin;at&&this.setMarkStyle(at,{"x":function(at){return nt._getPointerAnchor(at,lt).x},"y":function(at){return nt._getPointerAnchor(at,lt).y},"scaleX":function(){return lt.width*nt._computeLayoutRadius()},"scaleY":function(){return lt.height*nt._computeLayoutRadius()},"fill":this.getColorAttribute(),"zIndex":300})},i.prototype.initInteraction=function(){this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])},i.prototype.initAnimation=function(){var nt,at,lt,Rt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._pointerMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("gaugePointer"))||void 0===lt?void 0:lt({"startAngle":this._startAngle},Rt),aX("pointer",this._spec,this._markAttributeContext)))},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[]},i.type=nt.SeriesTypeEnum.gaugePointer,i.mark=T2,i.transformerConstructor=R2,i}(vJ),S2=function(){Tz.registerSeries(B2.type,B2),oZ(),sq(),Tz.registerAnimation("gaugePointer",(function(nt,at){var lt=_2(nt,at);return{"appear":lt,"enter":lt,"disappear":{"type":"fadeOut"}}})),fQ(),dQ()},D2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._supportStack=!1,at}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"segment")},e}(xX),L2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.gauge,lt.transformerConstructor=D2,lt._segmentMark=null,lt._trackMark=null,lt._padAngle=0,lt}return S(i,at),i.prototype.setAttrFromSpec=function(){var nt;at.prototype.setAttrFromSpec.call(this),this._padAngle=Me(null!==(nt=this._spec.padAngle)&&void 0!==nt?nt:0)},i.prototype.initData=function(){var nt,lt=this;at.prototype.initData.call(this),GW(this._option.dataSet,"spiltSegment",(function(nt,at){var Rt=nt.slice();return Rt.sort((function(nt,at){return nt[lt._angleField[0]]-at[lt._angleField[0]]})),Rt.forEach((function(nt,at){nt[AH]=nt[lt._angleField[0]],nt[SH]=at>0?Rt[at-1][AH]:void 0})),Rt})),null===(nt=this.getViewData())||void 0===nt||nt.transform({"type":"spiltSegment"},!1)},i.prototype.initMark=function(){at.prototype.initMark.call(this),this._trackMark=this._createMark(i.mark.track,{"parent":this._arcGroupMark,"dataView":!1}),this._segmentMark=this._createMark(i.mark.segment,{"parent":this._arcGroupMark,"isSeriesMark":!0})},i.prototype.initMarkStyle=function(){at.prototype.initMarkStyle.call(this),this.initTrackMarkStyle(),this.initSegmentMarkStyle()},i.prototype.initSegmentMarkStyle=function(){var nt,at=this,lt=this._segmentMark;lt&&this.setMarkStyle(lt,{"x":function(){return at.angleAxisHelper.center().x},"y":function(){return at.angleAxisHelper.center().y},"startAngle":this._getAngleValueStart.bind(this),"endAngle":this._getAngleValueEnd.bind(this),"innerRadius":function(){var nt;return at._computeLayoutRadius()*(null!==(nt=at._spec.innerRadius)&&void 0!==nt?nt:0)},"outerRadius":function(){var nt,lt;return at._computeLayoutRadius()*(null!==(lt=null!==(nt=at._spec.radius)&&void 0!==nt?nt:at._spec.outerRadius)&&void 0!==lt?lt:1)},"cap":null!==(nt=this._spec.roundCap)&&void 0!==nt&&nt,"boundsMode":"imprecise","cornerRadius":this._spec.cornerRadius,"fill":this.getColorAttribute(),"zIndex":200,"forceShowCap":!0})},i.prototype.generateRadiusStyle=function(nt){var at=this;if(nt){var lt={};return nt.outerRadius&&(lt.outerRadius=function(){return at._computeLayoutRadius()*nt.outerRadius}),nt.innerRadius&&(lt.innerRadius=function(){return at._computeLayoutRadius()*nt.innerRadius}),lt}},i.prototype.initMarkStyleWithSpec=function(nt,lt,Rt){if(at.prototype.initMarkStyleWithSpec.call(this,nt,lt,Rt),nt&&"segment"===nt.name){var Bt=this.getSpec().segment;if(Bt)for(var Lt in Bt.state||{})this.setMarkStyle(nt,this.generateRadiusStyle(Bt.state[Lt]),Lt,EU.User_Mark)}},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)},i.prototype.initTrackMarkStyle=function(){var nt,at=this,lt=this._trackMark;lt&&this.setMarkStyle(lt,{"x":function(){return at.angleAxisHelper.center().x},"y":function(){return at.angleAxisHelper.center().y},"startAngle":this._startAngle,"endAngle":this._endAngle,"innerRadius":function(){var nt;return at._computeLayoutRadius()*(null!==(nt=at._spec.innerRadius)&&void 0!==nt?nt:0)},"outerRadius":function(){var nt,lt;return at._computeLayoutRadius()*(null!==(lt=null!==(nt=at._spec.radius)&&void 0!==nt?nt:at._spec.outerRadius)&&void 0!==lt?lt:1)},"cap":null!==(nt=this._spec.roundCap)&&void 0!==nt&&nt,"boundsMode":"imprecise","cornerRadius":this._spec.cornerRadius,"zIndex":100})},i.prototype._getAngleValueStartWithoutMask=function(nt){var at=this._getAngleValueStartWithoutPadAngle(nt),lt=this._getAngleValueEndWithoutPadAngle(nt);return Xt(at,(at+lt)/2)(at+(lt>at?1:-1)*Math.abs(this._padAngle/2))},i.prototype._getAngleValueEndWithoutMask=function(nt){var at=this._getAngleValueStartWithoutPadAngle(nt),lt=this._getAngleValueEndWithoutPadAngle(nt);return Xt(lt,(at+lt)/2)(lt-(lt>at?1:-1)*Math.abs(this._padAngle/2))},i.prototype._getAngleValueStartWithoutPadAngle=function(nt){return N(nt[SH])?this.angleAxisHelper.dataToPosition([nt[SH]]):this._startAngle},i.prototype._getAngleValueEndWithoutPadAngle=function(nt){return this.angleAxisHelper.dataToPosition([nt[AH]])},i.prototype.initAnimation=function(){var nt,at,lt,Rt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._segmentMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("circularProgress"))||void 0===lt?void 0:lt({"startAngle":this._startAngle},Rt),aX("segment",this._spec,this._markAttributeContext)))},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[]},i.type=nt.SeriesTypeEnum.gauge,i.mark=w2,i.transformerConstructor=D2,i}(vJ),M2=function(){Tz.registerSeries(L2.type,L2),jJ(),XQ(),dQ()},F2=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"padding":0})},e.type="cell",e}(KX),C2=function(){Tz.registerMark(F2.type,F2),LP(),FP(),ML(),Pj.registerGraphic(MH.cell,zg),Pj.registerMark(MH.cell,wW)};function E2(nt){return!1===nt?{}:{"type":"fadeIn"}}var z2,H2,j2=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.enableByType=function(nt){return"dimension"!==nt},e}(zY),U2=A(A({},GY),((z2={}).cell={"name":"cell","type":"cell"},z2.cellBackground={"name":"cellBackground","type":"cell"},z2)),q2=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"cell")},e}(xX),K2=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.heatmap,lt.transformerConstructor=q2,lt}return S(i,at),i.prototype.getFieldValue=function(){return this._fieldValue},i.prototype.setFieldValue=function(nt){this._fieldValue=xt(nt)},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.setFieldValue(this._spec.valueField)},i.prototype.initMark=function(){var nt,at,lt,Rt,Bt={"progressiveStep":this._spec.progressiveStep,"progressiveThreshold":this._spec.progressiveThreshold,"large":this._spec.large,"largeThreshold":this._spec.largeThreshold};this._cellMark=this._createMark(i.mark.cell,{"isSeriesMark":!0,"stateSort":null===(nt=this._spec.cell)||void 0===nt?void 0:nt.stateSort},A(A({},Bt),{"setCustomizedShape":null===(at=this._spec.cell)||void 0===at?void 0:at.customShape,"morph":lX(this._spec,i.mark.cell.name),"morphElementKey":this.getDimensionField()[0]})),this._backgroundMark=this._createMark(i.mark.cellBackground,{"stateSort":null===(lt=this._spec.cellBackground)||void 0===lt?void 0:lt.stateSort},A(A({},Bt),{"setCustomizedShape":null===(Rt=this._spec.cellBackground)||void 0===Rt?void 0:Rt.customShape}))},i.prototype.initMarkStyle=function(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){return nt[at.getMeasureField()[0]]}})},i.prototype.initCellMarkStyle=function(){var nt=this;this.setMarkStyle(this._cellMark,{"x":function(at){return nt.dataToPositionX(at)},"y":function(at){return nt.dataToPositionY(at)},"size":function(){return[nt.getCellSize(nt._xAxisHelper),nt.getCellSize(nt._yAxisHelper)]},"fill":this.getColorAttribute()},"normal",EU.Series)},i.prototype.initCellBackgroundMarkStyle=function(){var nt,at,lt,Rt=this,Bt=Ci(null!==(lt=null===(at=null===(nt=this._spec.cellBackground)||void 0===nt?void 0:nt.style)||void 0===at?void 0:at.padding)&&void 0!==lt?lt:0);this.setMarkStyle(this._backgroundMark,{"x":function(nt){var at=Rt.getCellSize(Rt._xAxisHelper);return Rt.dataToPositionX(nt)-at/2+Bt[3]},"y":function(nt){var at=Rt.getCellSize(Rt._yAxisHelper);return Rt.dataToPositionY(nt)-at/2+Bt[0]},"width":function(){return Rt.getCellSize(Rt._xAxisHelper)-Bt[1]-Bt[3]},"height":function(){return Rt.getCellSize(Rt._yAxisHelper)-Bt[0]-Bt[2]}},"normal",EU.Series)},i.prototype.getColorAttribute=function(){var nt;return{"scale":null!==(nt=this._option.globalScale.getScale("color"))&&void 0!==nt?nt:this._getDefaultColorScale(),"field":this.getFieldValue[0]}},i.prototype.initInteraction=function(){this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])},i.prototype.initAnimation=function(){var nt,at,lt,Rt=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset,Bt=vX(this);this._cellMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("heatmap"))||void 0===lt?void 0:lt(Rt),aX("cell",this._spec,this._markAttributeContext),Bt))},i.prototype.getCellSize=function(nt){var at,lt;return null!==(lt=null===(at=nt.getBandwidth)||void 0===at?void 0:at.call(nt,0))&&void 0!==lt?lt:6},i.prototype.initTooltip=function(){this._tooltipHelper=new j2(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)},i.prototype.getDefaultShapeType=function(){return"square"},i.prototype.getDimensionField=function(){return[].concat(this.fieldX,this.fieldY)},i.prototype.getMeasureField=function(){return this.getFieldValue()},i.prototype.getActiveMarks=function(){return[this._cellMark]},i.type=nt.SeriesTypeEnum.heatmap,i.mark=U2,i.transformerConstructor=q2,i}(AX),O2=function(){oJ(),C2(),Tz.registerAnimation("heatmap",(function(nt,at){return A(A({},_X),{"appear":E2(at)})})),_K(),gK(),Tz.registerSeries(K2.type,K2)},J2=A(A({},GY),((H2={}).nodePoint={"name":"nodePoint","type":"symbol"},H2.ripplePoint={"name":"ripplePoint","type":"ripple"},H2.centerPoint={"name":"centerPoint","type":"symbol"},H2.centerLabel={"name":"centerLabel","type":"text"},H2)),t3="".concat(OF,"_CORRELATION_X"),e3="".concat(OF,"_CORRELATION_Y"),i3="".concat(OF,"_CORRELATION_SIZE"),N2=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le;if(!nt||!(null==at?void 0:at.view)||!X(nt))return nt;var ue=at.view();if(ue.x1-ue.x0==0||ue.y1-ue.y0==0||ue.x1-ue.x0==-1/0||ue.x1-ue.x0==1/0||ue.y1-ue.y0==-1/0||ue.y1-ue.y0==1/0)return nt;var ce=Me(null!==(lt=at.startAngle)&&void 0!==lt?lt:-90),he=Me(null!==(Rt=at.endAngle)&&void 0!==Rt?Rt:270),de=Math.max((ue.x1-ue.x0)/2,(ue.y1-ue.y0)/2),fe=Jk(null!==(Bt=at.innerRadius)&&void 0!==Bt?Bt:0,de),pe=Jk(at.outerRadius,de),ve=[Z(null===(Lt=at.center)||void 0===Lt?void 0:Lt[0])?at.center[0]:ue.x0+Jk(null!==(jt=null===(Ht=at.center)||void 0===Ht?void 0:Ht[0])&&void 0!==jt?jt:"50%",ue.x1-ue.x0),Z(null===($t=at.center)||void 0===$t?void 0:$t[1])?at.center[1]:ue.y0+Jk(null!==(te=null===(Kt=at.center)||void 0===Kt?void 0:Kt[1])&&void 0!==te?te:"50%",ue.y1-ue.y0)],Ae=qk(at.field),we=nt.map(Ae),Ce=E(Zk(we),2),je=Ce[0],Ne=Ce[1],Ve=je===Ne?function(nt){return(fe+pe)/2}:function(nt){return fe+(pe-fe)*(nt-je)/(Ne-je)},Ge=j(at.radiusField)?Ae:qk(at.radiusField),ti=null!==(re=null===(ne=null==at?void 0:at.radiusRange)||void 0===ne?void 0:ne[1])&&void 0!==re?re:5,L=function(nt){return ti};if(Ge){var li=E(Ge!==Ae?Zk(nt.map(Ge)):[je,Ne],2),hi=li[0],di=li[1],fi=null!==(oe=null===(ae=at.radiusRange)||void 0===ae?void 0:ae[0])&&void 0!==oe?oe:5,pi=null!==(le=null===(se=at.radiusRange)||void 0===se?void 0:se[1])&&void 0!==le?le:5;hi!==di&&(L=function(nt){return fi+(pi-fi)*(Ge(nt)-hi)/(di-hi)})}var vi=Math.min(ce,he),mi=Math.max(ce,he),_i=V2(vi,mi,nt.length),bi=[],Mi=(mi-vi)/60;return nt.forEach((function(nt,at){for(var lt,Rt,Bt,Lt=Ve(we[at]),Ht=L(nt),jt=_i[at],$t=0;$t<60&&(Rt=ve[0]+Lt*Math.cos(jt),Bt=ve[1]+Lt*Math.sin(jt),G2({"x":Rt,"y":Bt,"size":Ht},bi)||Rt-Ht<ue.x0||Rt+Ht>ue.x1||Bt-Ht<ue.y0||Bt+Ht>ue.y1);$t++)$t<59&&((jt+=Mi)>mi?jt=vi:jt<vi&&(jt=mi));bi.push(A(((lt={})[t3]=Rt,lt[e3]=Bt,lt[i3]=Ht,lt),nt))})),bi},V2=function(nt,at,lt){for(var Rt=0,Bt=Math.max(Math.ceil(2*(at-nt)/Math.PI),2),Lt=(at-nt)/Bt,Ht=0,jt=1,$t=0,Kt=0,te=[],ne=nt;$t<lt;)Kt<Bt&&(te.push(ne+(Kt%2?Math.floor(Kt/2)+Math.floor(Bt/2):Kt/2)*Lt*jt),Kt++),$t++,Kt===Bt&&(Kt=0,0===Rt?Rt=Lt/2:Rt/=2,ne=-1==(jt*=-1)?at-Rt:nt+Rt,(Ht+=1)>=2&&(Lt/=2,Bt*=2));return te},G2=function(nt,at){return!(!at||!at.length)&&at.some((function(at){return Math.pow(nt.x-at.x,2)+Math.pow(nt.y-at.y,2)<Math.pow(nt.size+at.size,2)}))},W2=function(nt,at){var lt;if(!nt||!X(nt))return[];var Rt=at.keyword,Bt=at.categoryField,Lt=nt[0].latestData[0];return(lt={})[Bt]=Rt,lt[Xz]=null==Lt?void 0:Lt[Xz],lt[qz]=null==Lt?void 0:Lt[qz],lt},a3=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"x":0,"y":0,"ripple":0})},e.prototype._initProduct=function(nt){var at=this.getVGrammarView(),lt=this.getProductId();this._product=at.glyph("ripplePoint",null!=nt?nt:at.rootMark).id(lt),this._compiledProductId=lt},e.type="ripple",e}(dY),Y2=function(){Tz.registerMark(a3.type,a3),Pj.registerGlyph("ripplePoint",{"symbol":"symbol","ripple0":"symbol","ripple1":"symbol","ripple2":"symbol"}).registerFunctionEncoder((function(nt,at,lt,Rt){var Bt,Lt=Math.max(0,Math.min(nt.ripple,1)),Ht=null!==(Bt=nt.size)&&void 0!==Bt?Bt:lt.getGraphicAttribute("size"),jt=.5*Ht;return{"ripple0":{"size":Ht+jt*Lt,"fillOpacity":.75-.25*Lt},"ripple1":{"size":Ht+jt*(1+Lt),"fillOpacity":.5-.25*Lt},"ripple2":{"size":Ht+jt*(2+Lt),"fillOpacity":.25-.25*Lt}}})).registerDefaultEncoder((function(){return{"ripple0":{"fillOpacity":.75},"ripple1":{"fillOpacity":.5},"ripple2":{"fillOpacity":.25}}})),tV(),JN(),qN()},X2=function(nt,at){return"fadeIn"===at?{"type":"fadeIn"}:{"type":"scaleIn"}},o3=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"nodePoint"),this._addMarkLabelSpec(nt,"centerPoint","centerLabel")},e}(xX),s3=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.correlation,lt.transformerConstructor=o3,lt._viewBox=new mi,lt}return S(i,at),i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getValueField=function(){return this._valueField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.getSeriesField=function(){return this._seriesField},i.prototype.setSeriesField=function(nt){N(nt)&&(this._seriesField=nt)},i.prototype.getSizeField=function(){return this._sizeField},i.prototype.setSizeField=function(nt){N(nt)&&(this._sizeField=nt)},i.prototype.getSizeRange=function(){return this._sizeRange},i.prototype.setSizeRange=function(nt){N(nt)&&(this._sizeRange=nt)},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)},i.prototype.initData=function(){var nt,lt,Rt;if(at.prototype.initData.call(this),this._data){GW(this._dataSet,"correlation",N2);var Bt=new Ms;WW(Bt,"dataview",as),GW(Bt,"correlationCenter",W2);var Lt=new Es(Bt,{"name":"".concat(this.type,"_").concat(this.id,"_center")});Lt.parse([this.getViewData()],{"type":"dataview"}),Lt.transform({"type":"correlationCenter","options":{"keyword":null!==(Rt=null===(lt=null===(nt=this._spec.centerLabel)||void 0===nt?void 0:nt.style)||void 0===lt?void 0:lt.text)&&void 0!==Rt?Rt:"","categoryField":this._spec.categoryField}}),this._centerSeriesData=new jY(this._option,Lt)}},i.prototype.compileData=function(){var nt;at.prototype.compileData.call(this),null===(nt=this._centerSeriesData)||void 0===nt||nt.compile()},i.prototype._statisticViewData=function(){var nt=this;at.prototype._statisticViewData.call(this),this._data.getDataView().transform({"type":"correlation","options":{"view":function(){return{"x0":nt._viewBox.x1,"x1":nt._viewBox.x2,"y0":nt._viewBox.y1,"y1":nt._viewBox.y2}},"field":this._spec.valueField,"radiusRange":this._spec.sizeRange,"radiusField":this._spec.sizeField,"center":[this._spec.centerX,this._spec.centerY],"innerRadius":this._spec.innerRadius,"outerRadius":this._spec.outerRadius,"startAngle":this._spec.startAngle,"endAngle":this._spec.endAngle}})},i.prototype.initMark=function(){var nt,at,lt,Rt,Bt=this._createMark(i.mark.nodePoint,{"groupKey":this._seriesField,"isSeriesMark":!0,"key":Xz,"stateSort":null===(nt=this._spec.nodePoint)||void 0===nt?void 0:nt.stateSort},{"setCustomizedShape":null===(at=this._spec.nodePoint)||void 0===at?void 0:at.customShape});Bt&&(Bt.setMarkConfig({"zIndex":MU.Node}),this._nodePointMark=Bt);var Lt=this._createMark(i.mark.ripplePoint,{"key":Xz,"dataView":this._centerSeriesData.getDataView(),"dataProductId":this._centerSeriesData.getProductId()});Lt&&(this._ripplePointMark=Lt);var Ht=this._createMark(i.mark.centerPoint,{"key":Xz,"dataView":this._centerSeriesData.getDataView(),"dataProductId":this._centerSeriesData.getProductId(),"stateSort":null===(lt=this._spec.centerPoint)||void 0===lt?void 0:lt.stateSort},{"setCustomizedShape":null===(Rt=this._spec.centerPoint)||void 0===Rt?void 0:Rt.customShape});Ht&&(Ht.setMarkConfig({"zIndex":MU.Node}),this._centerPointMark=Ht)},i.prototype.initMarkStyle=function(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()},i.prototype._initNodePointMarkStyle=function(){var nt,at,lt,Rt,Bt=this._nodePointMark;if(Bt){var Lt=null!==(at=null===(nt=this._spec.nodePoint)||void 0===nt?void 0:nt.style)&&void 0!==at?at:{};this.setMarkStyle(Bt,{"x":function(nt){return nt[t3]},"y":function(nt){return nt[e3]},"size":function(nt){return nt[i3]},"fill":null!==(lt=Lt.fill)&&void 0!==lt?lt:this.getColorAttribute(),"fillOpacity":null!==(Rt=Lt.fillOpacity)&&void 0!==Rt?Rt:1,"lineWidth":0},mU.STATE_NORMAL,EU.Series)}},i.prototype._initRipplePointMarkStyle=function(){var nt,at,lt,Rt,Bt,Lt=this,Ht=this._ripplePointMark;if(Ht){var jt=null!==(at=null===(nt=this._spec.ripplePoint)||void 0===nt?void 0:nt.style)&&void 0!==at?at:{};this.setMarkStyle(Ht,{"x":function(){var nt;return null!==(nt=Lt._spec.centerX)&&void 0!==nt?nt:(Lt._viewBox.x1+Lt._viewBox.x2)/2},"y":function(){var nt;return null!==(nt=Lt._spec.centerY)&&void 0!==nt?nt:(Lt._viewBox.y1+Lt._viewBox.y2)/2},"size":function(){return Math.max(Lt._viewBox.x2-Lt._viewBox.x1,Lt._viewBox.y2-Lt._viewBox.y1)/2},"fill":null!==(lt=jt.fill)&&void 0!==lt?lt:this.getColorAttribute(),"opacity":null!==(Rt=jt.fillOpacity)&&void 0!==Rt?Rt:.2,"ripple":null!==(Bt=jt.ripple)&&void 0!==Bt?Bt:0},mU.STATE_NORMAL,EU.Series)}},i.prototype._initCenterPointMarkStyle=function(){var nt,at,lt,Rt,Bt,Lt,Ht=this,jt=this._centerPointMark;jt&&this.setMarkStyle(jt,{"x":function(){var nt;return null!==(nt=Ht._spec.centerX)&&void 0!==nt?nt:(Ht._viewBox.x1+Ht._viewBox.x2)/2},"y":function(){var nt;return null!==(nt=Ht._spec.centerY)&&void 0!==nt?nt:(Ht._viewBox.y1+Ht._viewBox.y2)/2},"size":function(){return.2*Math.max(Ht._viewBox.x2-Ht._viewBox.x1,Ht._viewBox.y2-Ht._viewBox.y1)/2},"fill":null!==(lt=null===(at=null===(nt=this._spec.centerPoint)||void 0===nt?void 0:nt.style)||void 0===at?void 0:at.fill)&&void 0!==lt?lt:this.getColorAttribute(),"fillOpacity":null!==(Lt=null===(Bt=null===(Rt=this._spec.centerPoint)||void 0===Rt?void 0:Rt.style)||void 0===Bt?void 0:Bt.fillOpacity)&&void 0!==Lt?Lt:1},mU.STATE_NORMAL,EU.Series)},i.prototype.initTooltip=function(){at.prototype.initTooltip.call(this),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)},i.prototype.initLabelMarkStyle=function(nt){var at=this;nt&&this.setMarkStyle(nt,{"fill":this.getColorAttribute(),"text":function(nt){return nt[at._categoryField]},"z":this.dataToPositionZ.bind(this)},mU.STATE_NORMAL,EU.Series)},i.prototype.initAnimation=function(){var nt,at,lt=null===(nt=this._spec.animationAppear)||void 0===nt?void 0:nt.preset;this._nodePointMark.setAnimationConfig(rX(null===(at=Tz.getAnimationInKey("correlation"))||void 0===at?void 0:at({},lt),aX("nodePoint",this._spec,this._markAttributeContext)))},i.prototype.getGroupFields=function(){return[]},i.prototype.getStackGroupFields=function(){return[]},i.prototype.getStackValueField=function(){return""},i.prototype.getActiveMarks=function(){return[this._nodePointMark,this._centerPointMark]},i.prototype.getDimensionField=function(){return[this._categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()},i.type=nt.SeriesTypeEnum.correlation,i.mark=J2,i.transformerConstructor=o3,i}(eQ),Z2=function(){CX(),Y2(),Tz.registerSeries(s3.type,s3),Tz.registerAnimation("correlation",(function(nt,at){return A({"appear":X2(0,at)},mX)}))},c3={"duration":2e3,"loop":!0,"channel":{"wave":{"from":0,"to":1}}};function Q2(nt,at){switch(at){case"wave":default:return c3;case"grow":case"waveGrow":return function(nt){return{"duration":2e3,"channel":{"wave":{"from":0,"to":1},"height":nt.height,"dy":nt.dy}}}(nt)}}function $2(nt,at){switch(at){case"wave":default:return c3;case"grow":case"waveGrow":return function(nt){return{"duration":2e3,"channel":{"dy":nt.dy}}}(nt)}}var h3,k3,C3=A(A({},GY),((h3={}).liquidGroup={"name":"liquidGroup","type":"group"},h3.liquid={"name":"liquid","type":"liquid"},h3.liquidBackground={"name":"liquidBackground","type":"group"},h3.liquidOutline={"name":"liquidOutline","type":"group"},h3)),R3=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"wave":0})},e.prototype._initProduct=function(nt){var at=this.getVGrammarView(),lt=this.getProductId();this._product=at.glyph("wave",null!=nt?nt:at.rootMark).id(lt),this._compiledProductId=lt},e.type="liquid",e}(dY),n3=function(){Tz.registerMark(R3.type,R3),Pj.registerGlyph("wave",{"wave0":"area","wave1":"area","wave2":"area"}).registerChannelEncoder("wave",(function(nt,at,lt,Rt,Bt){var Lt=new Array(21).fill(0).map((function(nt,at){var Rt=at%2==0?20:0;return{"x":50*at-500,"y":lt.y+Rt,"y1":lt.y+lt.height}}));return{"wave0":{"points":Lt.map((function(nt){return{"x":nt.x+100*at,"y":nt.y,"y1":nt.y1}})),"x":0,"y":0},"wave1":{"points":Lt.map((function(nt){return{"x":nt.x+200*at-40,"y":nt.y,"y1":nt.y1}})),"x":0,"y":0},"wave2":{"points":Lt.map((function(nt){return{"x":nt.x+300*at-20,"y":nt.y,"y1":nt.y1}})),"x":0,"y":0}}})).registerDefaultEncoder((function(){return{"wave0":{"curveType":"monotoneX","fillOpacity":1},"wave1":{"curveType":"monotoneX","fillOpacity":.66},"wave2":{"curveType":"monotoneX","fillOpacity":.33}}})),tV(),JN(),UN()},r3=function(nt,at){return"drop"===nt?function(nt,at,lt){var Rt=4*lt/3,Bt=Math.max(Rt,2*lt),Lt=Rt/2,Ht=nt,jt=Lt+at-Bt/2,$t=Math.asin(Lt/(.85*(Bt-Lt))),Kt=Math.sin($t)*Lt,te=Math.cos($t)*Lt,ne=Ht-te,re=jt+Kt,ae=nt,oe=jt+Lt/Math.sin($t);return"\n      M ".concat(ne," ").concat(re,"\n      A ").concat(Lt," ").concat(Lt," 0 1 1 ").concat(ne+2*te," ").concat(re,"\n      Q ").concat(ae," ").concat(oe," ").concat(nt," ").concat(at+Bt/2,"\n      Q ").concat(ae," ").concat(oe," ").concat(ne," ").concat(re,"\n      Z \n    ")}(0,0,at):nt},B3=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.markTooltipKeyCallback=function(nt){return at.series.getValueField()},at.markTooltipValueCallback=function(nt){return nt[at.series.getValueField()]},at.shapeStrokeCallback=function(nt){return at.series.getMarkInName("liquid").getAttribute("fill",nt)},at}return S(e,nt),e}(zY),O3=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.liquid,lt.transformerConstructor=JX,lt._liquidBackgroundMark=null,lt._liquidOutlineMark=null,lt._getLiquidPosY=function(){var nt=lt._getLiquidBackPosAndSize(),at=nt.height,Rt=nt.startY;return(lt._reverse?at*lt._heightRatio:at*(1-lt._heightRatio))+Rt},lt._getLiquidHeight=function(){return lt._getLiquidBackPosAndSize().height*lt._heightRatio},lt._getLiquidBackPosAndSize=function(nt){var at,Rt;void 0===nt&&(nt=!1);var Bt=lt._marginSpec,Lt=Bt.top,Ht=void 0===Lt?0:Lt,jt=Bt.bottom,$t=void 0===jt?0:jt,Kt=Bt.left,te=void 0===Kt?0:Kt,ne=Bt.right,re=void 0===ne?0:ne,ae=nt?{}:lt._paddingSpec,oe=ae.top,se=void 0===oe?0:oe,le=ae.bottom,ue=void 0===le?0:le,ce=ae.left,he=void 0===ce?0:ce,de=ae.right,fe=void 0===de?0:de;"triangle"===lt._maskShape&&($t/=Math.sqrt(3),Ht=Ht/Math.sqrt(3)*2,ue/=Math.sqrt(3),se=se/Math.sqrt(3)*2);var pe=null!==(Rt=null===(at=lt._region)||void 0===at?void 0:at.getLayoutRect())&&void 0!==Rt?Rt:{"width":0,"height":0},ve=pe.width,Ae=pe.height,we=ve/2+(te+he-(re+fe))/2,Ce=Ae/2+(Ht+se-($t+ue))/2,je=ve-(te+re+he+fe),Ne=Ae-(Ht+$t+se+ue),Ve=Math.min(je,Ne);return"rect"!==lt._maskShape&&(je=Ve,Ne=Ve),{"x":we,"y":Ce,"size":Ve,"width":je,"height":Ne,"startX":we-je/2,"startY":Ce-Ne/2,"endX":we+je/2,"endY":Ce+Ne/2}},lt._getLiquidBackPath=function(nt){var at,Rt;if(void 0===nt&&(nt=!1),"rect"===lt._maskShape){var Bt=lt._getLiquidBackPosAndSize(nt),Lt=Bt.x,Ht=Bt.y,jt=Bt.width,$t=Bt.height;Rt=Wg({"x":Lt-jt/2,"y":Ht-$t/2,"width":jt,"height":$t,"fill":!0})}else{var Kt=lt._getLiquidBackPosAndSize(nt),te=(Lt=Kt.x,Ht=Kt.y,Kt.size);Rt=zg({"x":Lt,"y":Ht,"size":te,"symbolType":r3(null!==(at=lt._spec.maskShape)&&void 0!==at?at:"circle",te),"fill":!0})}return[Rt]},lt}return S(i,at),i.prototype.setValueField=function(nt){N(nt)&&(this._valueField=nt)},i.prototype.getValueField=function(){return this._valueField},i.prototype.setAttrFromSpec=function(){var nt,lt;at.prototype.setAttrFromSpec.call(this),this._marginSpec=vF(this._spec.outlineMargin),this._paddingSpec=vF(this._spec.outlinePadding),this.setValueField(this._spec.valueField),this._reverse=null!==(nt=this._spec.reverse)&&void 0!==nt&&nt,this._maskShape=null!==(lt=this._spec.maskShape)&&void 0!==lt?lt:"circle"},i.prototype.viewDataUpdate=function(nt){var lt=this;at.prototype.viewDataUpdate.call(this,nt),this._heightRatio=Ae.apply(void 0,P([],E(this._data.getLatestData().map((function(nt){return nt[lt._valueField]}))),!1))},i.prototype.initMark=function(){this._initLiquidOutlineMark(),this._initLiquidBackgroundMark(),this._initLiquidMark()},i.prototype.initMarkStyle=function(){this._initLiquidOutlineMarkStyle(),this._initLiquidBackgroundMarkStyle(),this._initLiquidMarkStyle()},i.prototype._initLiquidOutlineMark=function(){return this._liquidOutlineMark=this._createMark(i.mark.liquidOutline,{"isSeriesMark":!0,"skipBeforeLayouted":!1}),this._liquidOutlineMark},i.prototype._initLiquidBackgroundMark=function(){return this._liquidBackgroundMark=this._createMark(i.mark.liquidBackground,{"isSeriesMark":!0,"skipBeforeLayouted":!1}),this._liquidBackgroundMark},i.prototype._initLiquidMark=function(){return this._liquidGroupMark=this._createMark(i.mark.liquidGroup,{"parent":this._liquidBackgroundMark,"isSeriesMark":!0,"skipBeforeLayouted":!1}),this._liquidMark=this._createMark(i.mark.liquid,{"parent":this._liquidGroupMark,"isSeriesMark":!0,"skipBeforeLayouted":!1}),this._liquidMark},i.prototype._buildMarkAttributeContext=function(){at.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.getLiquidBackPosAndSize=this._getLiquidBackPosAndSize,this._markAttributeContext.getLiquidPosY=this._getLiquidPosY,this._markAttributeContext.getLiquidHeight=this._getLiquidHeight},i.prototype._initLiquidOutlineMarkStyle=function(){var nt=this,at=this._liquidOutlineMark;at.created(),this.setMarkStyle(at,{"stroke":this.getColorAttribute(),"width":function(){return nt._region.getLayoutRect().width},"height":function(){return nt._region.getLayoutRect().height},"path":function(){return nt._getLiquidBackPath(!0)}},"normal",EU.Series),this._liquidOutlineMark.setMarkConfig({"interactive":!1,"zIndex":this.layoutZIndex})},i.prototype._initLiquidBackgroundMarkStyle=function(){var nt=this,at=this._liquidBackgroundMark;at.created(),this.setMarkStyle(at,{"width":function(){return nt._region.getLayoutRect().width},"height":function(){return nt._region.getLayoutRect().height},"path":function(){return nt._getLiquidBackPath()}},"normal",EU.Series),this._liquidBackgroundMark.setMarkConfig({"interactive":!1,"zIndex":this.layoutZIndex,"clip":!0})},i.prototype._initLiquidMarkStyle=function(){var nt=this,at=this._liquidMark,lt=this._liquidGroupMark;lt&&this.setMarkStyle(lt,{"x":function(){return nt._region.getLayoutStartPoint().x+nt._region.getLayoutRect().width/2},"angle":this._reverse?-Math.PI:0,"y":0,"dy":this._getLiquidPosY}),at&&this.setMarkStyle(at,{"y":0,"dy":0,"height":this._getLiquidHeight,"fill":this.getColorAttribute(),"wave":0},"normal",EU.Series)},i.prototype.initTooltip=function(){this._tooltipHelper=new B3(this),this._liquidMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._liquidMark)},i.prototype.initInteraction=function(){this._parseInteractionConfig(this._liquidMark?[this._liquidMark]:[])},i.prototype.initAnimation=function(){var nt,at,lt,Rt,Bt=this,Lt={"height":{"from":0,"to":function(){return Bt._getLiquidHeight()}},"dy":{"from":function(){var nt=Bt._getLiquidBackPosAndSize(),at=nt.height,lt=nt.startY;return(Bt._reverse?0:at)+lt}}},Ht=null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.animationAppear)||void 0===at?void 0:at.preset;this._liquidMark.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("liquid"))||void 0===lt?void 0:lt(Lt,Ht),aX("liquid",this._spec,this._markAttributeContext))),this._liquidGroupMark.setAnimationConfig(rX(null===(Rt=Tz.getAnimationInKey("liquidGroup"))||void 0===Rt?void 0:Rt(Lt,Ht),aX("liquidGroup",this._spec,this._markAttributeContext)))},i.prototype.initEvent=function(){var nt=this;at.prototype.initEvent.call(this),this._spec.indicatorSmartInvert&&this._option.getChart().getComponentsByKey("indicator")&&this.event.on(jW.renderFinished,(function(){nt._option.getChart().getComponentsByKey("indicator").forEach((function(at){var lt,Rt,Bt=nt._liquidMark.getProduct().elements[0].glyphGraphicItems.wave1,Lt=Bt.globalAABBBounds,Ht=Lt.y1,jt=Lt.y2;Ht+=nt._region.getLayoutStartPoint().y,jt+=nt._region.getLayoutStartPoint().y,null===(Rt=null===(lt=null==at?void 0:at.getIndicatorComponent())||void 0===lt?void 0:lt.getChildren()[0])||void 0===Rt||Rt.getChildren().forEach((function(nt){var at=nt.globalAABBBounds,lt=at.y1,Rt=at.y2;if(Ht<lt&&jt>Rt){var Lt=JP(nt.attribute.fill,Bt.attribute.fill);nt.setAttribute("fill",Lt)}}))}))}))},i.prototype.dataToPosition=function(nt){return null},i.prototype.dataToPositionX=function(nt){return null},i.prototype.dataToPositionY=function(nt){return null},i.prototype.valueToPosition=function(nt,at){return null},i.prototype.getStatisticFields=function(){return[]},i.prototype.getGroupFields=function(){return[]},i.prototype.getStackGroupFields=function(){return[]},i.prototype.getStackValueField=function(){return""},i.prototype.getActiveMarks=function(){return[this._liquidMark]},i.type=nt.SeriesTypeEnum.liquid,i.mark=C3,i.transformerConstructor=JX,i}(kX),l3=function(){n3(),eY(),Tz.registerAnimation("liquid",(function(nt,at){return{"appear":Q2(nt,at),"enter":Q2(nt,at),"exit":Q2(nt,at)}})),Tz.registerAnimation("liquidGroup",(function(nt,at){return{"appear":$2(nt,at),"enter":$2(nt,at),"exit":$2(nt,at)}})),Tz.registerSeries(O3.type,O3)},u3=function(nt){return xt(nt).join(",")},L3=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.dimensionTooltipTitleCallback=function(nt){return u3(null==nt?void 0:nt[at.series.getDimensionField()[0]])},at.markTooltipKeyCallback=function(nt){return u3(null==nt?void 0:nt[at.series.getDimensionField()[0]])},at}return S(e,nt),e}(zY),F3=A(A({},GY),((k3={}).circle={"name":"circle","type":"arc"},k3.overlap={"name":"overlap","type":"path"},k3.overlapLabel={"name":"overlapLabel","type":"text"},k3));function d3(nt,at,lt){return Math.min(nt,at)*Math.min(nt,at)*Math.PI<=lt+Ki?Math.abs(nt-at):function(nt,at,lt,Rt){var Bt,Lt,Ht=null!==(Bt=null==Rt?void 0:Rt.maxIterations)&&void 0!==Bt?Bt:100,jt=null!==(Lt=null==Rt?void 0:Rt.tolerance)&&void 0!==Lt?Lt:1e-10,$t=nt(at),Kt=nt(lt),ne=lt-at;if($t*Kt>0)return te.getInstance().error("Initial bisect points must have opposite signs"),NaN;if(0===$t)return at;if(0===Kt)return lt;for(var re=0;re<Ht;++re){var ae=at+(ne/=2),oe=nt(ae);if(oe*$t>=0&&(at=ae),Math.abs(ne)<jt||0===oe)return ae}return at+ne}((function(Rt){return Ni(nt,at,Rt)-lt}),0,nt+at)}function p3(nt,at){var lt,Rt=(at=at||{}).restarts||10,Bt=[],Lt={};for(lt=0;lt<nt.length;++lt){var Ht=nt[lt];1===Ht.sets.length&&(Lt[Ht.sets[0]]=Bt.length,Bt.push(Ht))}var jt=function(nt,at,lt){var Rt=en(at.length,at.length),Bt=en(at.length,at.length);return nt.filter((function(nt){return 2===nt.sets.length})).map((function(nt){var Lt=lt[nt.sets[0]],Ht=lt[nt.sets[1]],jt=d3(Math.sqrt(at[Lt].size/Math.PI),Math.sqrt(at[Ht].size/Math.PI),nt.size);Rt[Lt][Ht]=Rt[Ht][Lt]=jt;var $t=0;nt.size+1e-10>=Math.min(at[Lt].size,at[Ht].size)?$t=1:nt.size<=1e-10&&($t=-1),Bt[Lt][Ht]=Bt[Ht][Lt]=$t})),{"distances":Rt,"constraints":Bt}}(nt,Bt,Lt),$t=jt.distances,Kt=jt.constraints,te=nn($t.map(nn))/$t.length;$t=$t.map((function(nt){return nt.map((function(nt){return nt/te}))}));var ne,re,p=function(nt,at){return function(nt,at,lt,Rt){var Bt,Lt=0;for(Bt=0;Bt<at.length;++Bt)at[Bt]=0;for(Bt=0;Bt<lt.length;++Bt)for(var Ht=nt[2*Bt],jt=nt[2*Bt+1],$t=Bt+1;$t<lt.length;++$t){var Kt=nt[2*$t],te=nt[2*$t+1],ne=lt[Bt][$t],re=Rt[Bt][$t],ae=(Kt-Ht)*(Kt-Ht)+(te-jt)*(te-jt),oe=Math.sqrt(ae),se=ae-ne*ne;re>0&&oe<=ne||re<0&&oe>=ne||(Lt+=2*se*se,at[2*Bt]+=4*se*(Ht-Kt),at[2*Bt+1]+=4*se*(jt-te),at[2*$t]+=4*se*(Kt-Ht),at[2*$t+1]+=4*se*(te-jt))}return Lt}(nt,at,$t,Kt)};for(lt=0;lt<Rt;++lt){var ae=tn(2*$t.length).map((function(nt,at){return ie(at)}));re=ln(p,ae,at),(!ne||re.fx<ne.fx)&&(ne=re)}var oe=ne.x,se={};for(lt=0;lt<Bt.length;++lt){var le=Bt[lt];se[le.sets[0]]={"x":oe[2*lt]*te,"y":oe[2*lt+1]*te,"radius":Math.sqrt(le.size/Math.PI)}}if(at.history)for(lt=0;lt<at.history.length;++lt)rn(at.history[lt].x,te);return se}function f3(nt,at){for(var lt=0,Rt=0;Rt<at.length;++Rt){var Bt=at[Rt],Lt=void 0;if(1!==Bt.sets.length){if(2===Bt.sets.length){var Ht=nt[Bt.sets[0]],jt=nt[Bt.sets[1]];Lt=Ni(Ht.radius,jt.radius,Ge.distancePP(Ht,jt))}else Lt=Hi(Bt.sets.map((function(at){return nt[at]})));lt+=(Bt.hasOwnProperty("weight")?Bt.weight:1)*(Lt-Bt.size)*(Lt-Bt.size)}}return lt}function v3(nt,at){var lt=function(nt,at){for(var lt=at&&at.lossFunction?at.lossFunction:f3,Rt={},Bt={},Lt=0;Lt<nt.length;++Lt){var Ht=nt[Lt];if(1===Ht.sets.length){var jt=Ht.sets[0];Rt[jt]={"x":1e10,"y":1e10,"size":Ht.size,"radius":Math.sqrt(Ht.size/Math.PI),"setId":jt},Bt[jt]=[]}}nt=nt.filter((function(nt){return 2===nt.sets.length}));for(var $t=0;$t<nt.length;++$t){var Kt=nt[$t],te=Kt.hasOwnProperty("weight")?Kt.weight:1,ne=Kt.sets[0],re=Kt.sets[1];Kt.size+Ki>=Math.min(Rt[ne].size,Rt[re].size)&&(te=0),Bt[ne].push({"set":re,"size":Kt.size,"weight":te}),Bt[re].push({"set":ne,"size":Kt.size,"weight":te})}var ae=[];for(var oe in Bt)if(Bt.hasOwnProperty(oe)){for(var se=0,le=0;le<Bt[oe].length;++le)se+=Bt[oe][le].size*Bt[oe][le].weight;ae.push({"set":oe,"size":se})}function y(nt,at){return at.size-nt.size}ae.sort(y);var ue={};function _(nt){return nt.set in ue}function b(nt,at){Rt[at].x=nt.x,Rt[at].y=nt.y,ue[at]=!0}b({"x":0,"y":0},ae[0].set);for(var ce=1;ce<ae.length;++ce){var he=ae[ce].set,de=Bt[he].filter(_),fe=Rt[he];if(de.sort(y),0===de.length)throw"ERROR: missing pairwise overlap information";for(var pe=[],ve=0;ve<de.length;++ve){var Ae=Rt[de[ve].set],we=d3(fe.radius,Ae.radius,de[ve].size);pe.push({"x":Ae.x+we,"y":Ae.y}),pe.push({"x":Ae.x-we,"y":Ae.y}),pe.push({"y":Ae.y+we,"x":Ae.x}),pe.push({"y":Ae.y-we,"x":Ae.x});for(var Ce=ve+1;Ce<de.length;++Ce)for(var je=Rt[de[Ce].set],Ne=d3(fe.radius,je.radius,de[Ce].size),Ve=Vi({"x":Ae.x,"y":Ae.y,"radius":we},{"x":je.x,"y":je.y,"radius":Ne}),Ge=0;Ge<Ve.length;++Ge)pe.push(Ve[Ge])}for(var ti=1e50,li=pe[0],hi=0;hi<pe.length;++hi){Rt[he].x=pe[hi].x,Rt[he].y=pe[hi].y;var di=lt(Rt,nt);di<ti&&(ti=di,li=pe[hi])}b(li,he)}return Rt}(nt,at),Rt=at.lossFunction||f3;if(nt.length>=8){var Bt=p3(nt,at);Rt(Bt,nt)+1e-8<Rt(lt,nt)&&(lt=Bt)}return lt}function g3(nt,at,lt){var Rt;if(null===lt?nt.sort((function(nt,at){return at.radius-nt.radius})):nt.sort(lt),nt.length>0){var Bt=nt[0].x,Lt=nt[0].y;for(Rt=0;Rt<nt.length;++Rt)nt[Rt].x-=Bt,nt[Rt].y-=Lt}if(2===nt.length&&Ge.distancePP(nt[0],nt[1])<Math.abs(nt[1].radius-nt[0].radius)&&(nt[1].x=nt[0].x+nt[0].radius-nt[1].radius-1e-10,nt[1].y=nt[0].y),nt.length>1){var Ht,jt,$t=Math.atan2(nt[1].x,nt[1].y)-at,Kt=Math.cos($t),te=Math.sin($t);for(Rt=0;Rt<nt.length;++Rt)Ht=nt[Rt].x,jt=nt[Rt].y,nt[Rt].x=Kt*Ht-te*jt,nt[Rt].y=te*Ht+Kt*jt}if(nt.length>2){for(var ne=Math.atan2(nt[2].x,nt[2].y)-at;ne<0;)ne+=2*Math.PI;for(;ne>2*Math.PI;)ne-=2*Math.PI;if(ne>Math.PI){var re=nt[1].y/(1e-10+nt[1].x);for(Rt=0;Rt<nt.length;++Rt){var ae=(nt[Rt].x+re*nt[Rt].y)/(1+re*re);nt[Rt].x=2*ae-nt[Rt].x,nt[Rt].y=2*ae*re-nt[Rt].y}}}}function y3(nt){var e=function(at){return{"max":Math.max.apply(null,nt.map((function(nt){return nt[at]+nt.radius}))),"min":Math.min.apply(null,nt.map((function(nt){return nt[at]-nt.radius})))}};return{"xRange":e("x"),"yRange":e("y")}}function m3(nt,at,lt){null===at&&(at=Math.PI/2);var Rt=[];for(var Bt in nt)if(nt.hasOwnProperty(Bt)){var Lt=nt[Bt];Rt.push({"x":Lt.x,"y":Lt.y,"radius":Lt.radius,"setId":Bt})}for(var Ht=function(nt){function e(nt){return nt.parent!==nt&&(nt.parent=e(nt.parent)),nt.parent}nt.map((function(nt){nt.parent=nt}));for(var at=0;at<nt.length;++at)for(var lt=at+1;lt<nt.length;++lt){var Rt=nt[at].radius+nt[lt].radius;Ge.distancePP(nt[at],nt[lt])+1e-10<Rt&&(Bt=nt[lt],Lt=nt[at],Ht=void 0,jt=void 0,Ht=e(Bt),jt=e(Lt),Ht.parent=jt)}for(var Bt,Lt,Ht,jt,$t,Kt={},te=0;te<nt.length;++te)($t=e(nt[te]).parent.setId)in Kt||(Kt[$t]=[]),Kt[$t].push(nt[te]);nt.map((function(nt){delete nt.parent}));var ne=[];for($t in Kt)Kt.hasOwnProperty($t)&&ne.push(Kt[$t]);return ne}(Rt),jt=0;jt<Ht.length;++jt){g3(Ht[jt],at,lt);var $t=y3(Ht[jt]);Ht[jt].size=($t.xRange.max-$t.xRange.min)*($t.yRange.max-$t.yRange.min),Ht[jt].bounds=$t}Ht.sort((function(nt,at){return at.size-nt.size}));var Kt=(Rt=Ht[0]).bounds,te=(Kt.xRange.max-Kt.xRange.min)/50;function h(nt,at,lt){if(nt){var Bt,Lt,Ht,jt=nt.bounds;at?Bt=Kt.xRange.max-jt.xRange.min+te:(Bt=Kt.xRange.max-jt.xRange.max,(Ht=(jt.xRange.max-jt.xRange.min)/2-(Kt.xRange.max-Kt.xRange.min)/2)<0&&(Bt+=Ht)),lt?Lt=Kt.yRange.max-jt.yRange.min+te:(Lt=Kt.yRange.max-jt.yRange.max,(Ht=(jt.yRange.max-jt.yRange.min)/2-(Kt.yRange.max-Kt.yRange.min)/2)<0&&(Lt+=Ht));for(var $t=0;$t<nt.length;++$t)nt[$t].x+=Bt,nt[$t].y+=Lt,Rt.push(nt[$t])}}for(var ne=1;ne<Ht.length;)h(Ht[ne],!0,!1),h(Ht[ne+1],!1,!0),h(Ht[ne+2],!0,!0),ne+=3,Kt=y3(Rt);for(var re={},ae=0;ae<Rt.length;++ae)re[Rt[ae].setId]=Rt[ae];return re}function _3(nt,at){for(var lt={},Rt=function(nt){var at={},lt=[];for(var Rt in nt)lt.push(Rt),at[Rt]=[];for(var Bt=0;Bt<lt.length;Bt++)for(var Lt=nt[lt[Bt]],Ht=Bt+1;Ht<lt.length;++Ht){var jt=nt[lt[Ht]],$t=Ge.distancePP(Lt,jt);$t+jt.radius<=Lt.radius+1e-10?at[lt[Ht]].push(lt[Bt]):$t+Lt.radius<=jt.radius+1e-10&&at[lt[Bt]].push(lt[Ht])}return at}(nt),Bt=0;Bt<at.length;++Bt){for(var Lt=at[Bt].sets,Ht={},jt={},$t=0;$t<Lt.length;++$t){Ht[Lt[$t]]=!0;for(var Kt=Rt[Lt[$t]],ne=0;ne<Kt.length;++ne)jt[Kt[ne]]=!0}var re=[],ae=[];for(var oe in nt)oe in Ht?re.push(nt[oe]):oe in jt||ae.push(nt[oe]);var se=b3(re,ae);lt[Lt.toString()]=se,se.disjoint&&at[Bt].size>0&&te.getInstance().error("Area "+Lt+" not represented on screen")}return lt}function b3(nt,at){for(var lt=[],Rt=0;Rt<nt.length;++Rt){var Bt=nt[Rt];lt.push({"x":Bt.x,"y":Bt.y}),lt.push({"x":Bt.x+Bt.radius/2,"y":Bt.y}),lt.push({"x":Bt.x-Bt.radius/2,"y":Bt.y}),lt.push({"x":Bt.x,"y":Bt.y+Bt.radius/2}),lt.push({"x":Bt.x,"y":Bt.y-Bt.radius/2})}for(var Lt=lt[0],Ht=x3(lt[0],nt,at),jt=1;jt<lt.length;++jt){var $t=x3(lt[jt],nt,at);$t>=Ht&&(Lt=lt[jt],Ht=$t)}for(var Kt=on((function(lt){return-1*x3({"x":lt[0],"y":lt[1]},nt,at)}),[Lt.x,Lt.y],{"maxIterations":500,"minErrorDelta":1e-10}).x,te={"x":Kt[0],"y":Kt[1]},ne=!0,re=0;re<nt.length;++re)if(Ge.distancePP(te,nt[re])>nt[re].radius){ne=!1;break}for(var ae=0;ae<at.length;++ae)if(Ge.distancePP(te,at[ae])<at[ae].radius){ne=!1;break}if(!ne)if(1===nt.length)te={"x":nt[0].x,"y":nt[0].y};else{var oe={};Hi(nt,oe),te=0===oe.arcs.length?{"x":0,"y":-1e3,"disjoint":!0}:1===oe.arcs.length?{"x":oe.arcs[0].circle.x,"y":oe.arcs[0].circle.y}:at.length?b3(nt,[]):Gi(oe.arcs.map((function(nt){return nt.p1})))}return te}function x3(nt,at,lt){var Rt,Bt,Lt=at[0].radius-Ge.distancePP(at[0],nt);for(Rt=1;Rt<at.length;++Rt)(Bt=at[Rt].radius-Ge.distancePP(at[Rt],nt))<=Lt&&(Lt=Bt);for(Rt=0;Rt<lt.length;++Rt)(Bt=Ge.distancePP(lt[Rt],nt)-lt[Rt].radius)<=Lt&&(Lt=Bt);return Lt}var z3,S3=function(nt){var at={},lt=Object.values(nt);if(!lt.length)return[];Hi(lt,at);for(var Rt=at.arcs.map((function(nt){var at=nt.p1,lt=nt.p2,Rt=nt.circle,Bt=nt.width;return{"p1":at,"p2":lt,"radius":Rt.radius,"setId":Rt.setId,"largeArcFlag":Bt>Rt.radius}})),Bt=[],Lt=0,Ht=Rt[0],s=function(){var nt=Ht.p2;Bt.push(Ht),Ht=Rt.find((function(at){return Ge.distancePP(at.p1,nt)<Ki})),Lt++};Lt<Rt.length&&Ht;)s();return Bt},A3=function(nt){if(!(null==nt?void 0:nt.length))return"";for(var at=0,lt=nt[0],Rt=lt.p1,Bt="M".concat(Rt.x,",").concat(Rt.y);lt;){var Lt=lt,Ht=Lt.p2,jt=Lt.radius,$t=Lt.largeArcFlag;Bt+="A".concat(jt,",").concat(jt," 0 ").concat($t?1:0,",0 ").concat(Ht.x,",").concat(Ht.y),lt=nt[++at]}return Bt+" Z"},w3=function(nt){var at;return null!==(at=null==nt?void 0:nt.map((function(nt){var at=nt.p1,lt=nt.p2,Rt=nt.radius,Bt=nt.largeArcFlag,Lt=nt.setId,Ht=at.x,jt=at.y,$t=lt.x,Kt=lt.y,te=Math.pow(Math.pow($t-Ht,2)+Math.pow(Kt-jt,2),.5),ne=(Ht+$t)/2,re=(jt+Kt)/2,ae=Math.pow(Math.pow(Rt,2)-Math.pow(te/2,2),.5),oe=ne+ae*(Kt-jt)/te,se=re-ae*($t-Ht)/te;return(me([$t-Ht,Kt-jt],[oe-Ht,se-jt])>0||Bt)&&(oe=ne-ae*(Kt-jt)/te,se=re+ae*($t-Ht)/te),{"x":oe,"y":se,"radius":Rt,"setId":Lt}})))&&void 0!==at?at:[]},M3=function(nt,at){var lt=nt.x0,Rt=nt.x1,Bt=nt.y0,Lt=nt.y1,Ht=nt.setField,jt=void 0===Ht?"sets":Ht,$t=nt.valueField,Kt=void 0===$t?"size":$t,te=nt.orientation,ne=void 0===te?Math.PI/2:te,re=nt.orientationOrder,ae=void 0===re?null:re,oe={},se={};if(at.length>0){var le=at.map((function(nt){return{"sets":xt(nt[jt]),"size":nt[Kt]}})),ue=function(nt,at){(at=at||{}).maxIterations=at.maxIterations||500;var lt=at.initialLayout||v3,Rt=at.lossFunction||f3,Bt=lt(nt=function(nt){nt=nt.slice();for(var at=[],lt={},Rt=0;Rt<nt.length;++Rt){var Bt=nt[Rt];if(1===Bt.sets.length)at.push(Bt.sets[0]);else if(2===Bt.sets.length){var Lt=Bt.sets[0],Ht=Bt.sets[1];lt[[Lt,Ht].toString()]=!0,lt[[Ht,Lt].toString()]=!0}}at.sort((function(nt,at){return+(nt>at)}));for(var jt=0;jt<at.length;++jt)for(var $t=at[jt],Kt=jt+1;Kt<at.length;++Kt){var te=at[Kt];[$t,te].toString()in lt||nt.push({"sets":[$t,te],"size":0})}return nt}(nt),at),Lt=[],Ht=[];for(var jt in Bt)Bt.hasOwnProperty(jt)&&(Lt.push(Bt[jt].x),Lt.push(Bt[jt].y),Ht.push(jt));for(var $t=on((function(at){for(var lt={},Lt=0;Lt<Ht.length;++Lt){var jt=Ht[Lt];lt[jt]={"x":at[2*Lt],"y":at[2*Lt+1],"radius":Bt[jt].radius}}return Rt(lt,nt)}),Lt,at).x,Kt=0;Kt<Ht.length;++Kt){var te=Ht[Kt];Bt[te].x=$t[2*Kt],Bt[te].y=$t[2*Kt+1]}return Bt}(le,nt);ue=m3(ue,ne,ae),oe=function(nt,at,lt,Rt,Bt){at=Math.max(at,1),lt=Math.max(lt,1);var Lt=[],Ht=[];for(var jt in nt)nt.hasOwnProperty(jt)&&(Ht.push(jt),Lt.push(nt[jt]));var $t=y3(Lt),Kt=$t.xRange,te=$t.yRange;if(Kt.max===Kt.min||te.max===te.min)return console.log("not scaling solution: zero size detected"),nt;for(var ne=at/(Kt.max-Kt.min),re=lt/(te.max-te.min),ae=Math.min(re,ne),oe=(at-(Kt.max-Kt.min)*ae)/2,se=(lt-(te.max-te.min)*ae)/2,le={},ue=0;ue<Lt.length;++ue){var ce=Lt[ue];le[Ht[ue]]={"radius":ae*ce.radius,"x":Rt+oe+(ce.x-Kt.min)*ae,"y":Bt+se+(ce.y-te.min)*ae,"setId":ce.setId}}return le}(ue,Rt-lt,Lt-Bt,lt,Bt),se=_3(oe,le)}return at.map((function(nt){var at=xt(nt[jt]),lt=at.toString(),Rt=se[lt],Bt=Object.assign(Object.assign({},nt),{"datum":nt,"sets":at,"key":lt,"size":nt[Kt],"labelX":null==Rt?void 0:Rt.x,"labelY":null==Rt?void 0:Rt.y}),Lt=oe[lt];if(Lt)return Object.assign(Object.assign({},Bt),{"type":"circle","x":Lt.x,"y":Lt.y,"radius":Lt.radius});var Ht=S3(at.map((function(nt){return oe[nt]})));return Object.assign(Object.assign({},Bt),{"type":"overlap","x":0,"y":0,"path":A3(Ht),"arcs":Ht})}))},T3=function(nt,at){return at.filter((function(at){return at.type===nt.datumType}))},W3=function(nt){function e(){return r(this,e),n(this,e,arguments)}return h(e,nt),o(e,[{"key":"onBind","value":function(){var nt=this;this.fromCircles={},w3(this.from.arcs).forEach((function(at){nt.fromCircles[at.setId]=at})),this.toCircles={},w3(this.to.arcs).forEach((function(at){nt.toCircles[at.setId]=at}))}},{"key":"onUpdate","value":function(nt,at,lt){var Rt=this,Bt=[];Object.keys(this.fromCircles).forEach((function(nt){var lt=Rt.fromCircles[nt],Lt=Rt.toCircles[nt];lt&&Lt&&Bt.push({"radius":lt.radius+(Lt.radius-lt.radius)*at,"x":lt.x+(Lt.x-lt.x)*at,"y":lt.y+(Lt.y-lt.y)*at,"setId":nt})}));var Lt=S3(Bt);lt.arcs=Lt,lt.path=A3(Lt)}}])}(Xh),E3=function(nt){switch(nt){case"fadeIn":default:return{"type":"fadeIn"};case"growIn":return{"type":"growRadiusIn"};case"scaleIn":return{"type":"scaleIn"}}},P3=function(nt){switch(nt){case"fadeIn":default:return{"type":"fadeIn"};case"scaleIn":return{"type":"scaleIn"}}},Y3=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._transformLabelSpec=function(nt){this._addMarkLabelSpec(nt,"circle"),this._addMarkLabelSpec(nt,"overlap","overlapLabel","initOverlapLabelMarkStyle")},e}(xX),$3=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.venn,lt.transformerConstructor=Y3,lt._viewBox=new mi,lt}return S(i,at),i.prototype.getCategoryField=function(){return this._categoryField},i.prototype.setCategoryField=function(nt){return this._categoryField=nt,this._categoryField},i.prototype.getValueField=function(){return this._valueField},i.prototype.setValueField=function(nt){return this._valueField=nt,this._valueField},i.prototype.setAttrFromSpec=function(){var nt,lt,Rt;at.prototype.setAttrFromSpec.call(this),this.setCategoryField(null!==(nt=this._spec.categoryField)&&void 0!==nt?nt:"sets"),this.setValueField(null!==(lt=this._spec.valueField)&&void 0!==lt?lt:"size"),this.setSeriesField(null!==(Rt=this._spec.seriesField)&&void 0!==Rt?Rt:$z)},i.prototype.compile=function(){at.prototype.compile.call(this),this._runVennTransform()},i.prototype._runVennTransform=function(nt){void 0===nt&&(nt=!1);var at=this._data.getProduct();at&&at.transform([{"type":"venn","x0":this._viewBox.x1,"x1":this._viewBox.x2,"y0":this._viewBox.y1,"y1":this._viewBox.y2,"setField":this._categoryField,"valueField":this._valueField}]),nt&&this.getCompiler().renderNextTick()},i.prototype.initMark=function(){var nt=this._createMark(i.mark.circle,{"isSeriesMark":!0});nt&&(nt.setTransform([{"type":"vennMark","datumType":"circle"}]),this._circleMark=nt);var at=this._createMark(i.mark.overlap,{"isSeriesMark":!0});at&&(at.setTransform([{"type":"vennMark","datumType":"overlap"}]),this._overlapMark=at)},i.prototype.initMarkStyle=function(){this._initCircleMarkStyle(),this._initOverlapMarkStyle()},i.prototype._initCircleMarkStyle=function(){this._circleMark&&this.setMarkStyle(this._circleMark,{"x":function(nt){return nt.x},"y":function(nt){return nt.y},"innerRadius":0,"outerRadius":function(nt){return nt.radius},"startAngle":0,"endAngle":2*Math.PI,"fill":this.getColorAttribute(),"stroke":this.getColorAttribute()},mU.STATE_NORMAL,EU.Series)},i.prototype._initOverlapMarkStyle=function(){this._overlapMark&&(this.setMarkStyle(this._overlapMark,{"x":function(nt){return nt.x},"y":function(nt){return nt.y},"path":function(nt){return nt.path},"arcs":function(nt){return nt.arcs},"fill":this.getColorAttribute(),"stroke":this.getColorAttribute(),"zIndex":function(nt){return 100*nt.sets.length}},mU.STATE_NORMAL,EU.Series),this.setMarkStyle(this._overlapMark,{"zIndex":function(nt){return 100*nt.sets.length+1}},mU.STATE_HOVER,EU.Series))},i.prototype.initLabelMarkStyle=function(nt){nt&&(this._labelMark=nt,nt.setRule("venn"),this.setMarkStyle(nt,{"x":function(nt){return nt.labelX},"y":function(nt){return nt.labelY},"text":function(nt){return u3(nt.sets)},"maxLineWidth":function(nt){var at=nt,lt=at.x,Rt=at.radius,Bt=at.labelX,Lt=lt-Rt,Ht=lt+Rt;return Math.min(Bt-Lt,Ht-Bt)}},mU.STATE_NORMAL,EU.Series))},i.prototype.initOverlapLabelMarkStyle=function(nt){nt&&(this._labelMark=nt,nt.setRule("venn"),this.setMarkStyle(nt,{"x":function(nt){return nt.labelX},"y":function(nt){return nt.labelY},"text":function(nt){return u3(nt.sets)}},mU.STATE_NORMAL,EU.Series))},i.prototype.initTooltip=function(){this._tooltipHelper=new L3(this),this._circleMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circleMark),this._overlapMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._overlapMark)},i.prototype.getDimensionField=function(){return[this._categoryField]},i.prototype.getMeasureField=function(){return[this._valueField]},i.prototype.onLayoutEnd=function(nt){at.prototype.onLayoutEnd.call(this,nt),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runVennTransform()},i.prototype.getDefaultShapeType=function(){return"circle"},i.prototype.getActiveMarks=function(){return[this._circleMark,this._overlapMark]},i.prototype.getStatisticFields=function(){var nt=[];return nt.push({"key":this._categoryField,"operations":["values"]}),nt.push({"key":this._valueField,"operations":["max","min"]}),nt},i.prototype.getGroupFields=function(){return null},i.prototype.dataToPosition=function(nt,at){return{"x":nt.x,"y":nt.y}},i.prototype.dataToPositionX=function(nt){return nt.x},i.prototype.dataToPositionY=function(nt){return nt.y},i.prototype.valueToPosition=function(nt,at){throw new Error("Method not implemented.")},i.prototype.getStackGroupFields=function(){return[]},i.prototype.getStackValueField=function(){return null},i.prototype._getSeriesInfo=function(nt,at){var lt=this,Rt=this.getDefaultShapeType();return at.map((function(at){var Bt;return{"key":u3(at),"originalKey":at,"style":lt.getSeriesStyle((Bt={},Bt[nt]=at,Bt)),"shapeType":Rt}}))},i.prototype.getSeriesFieldValue=function(nt,lt){var Rt=at.prototype.getSeriesFieldValue.call(this,nt,lt);return u3(Rt)},i.prototype.legendSelectedFilter=function(nt,at){if(nt.type===lt.discreteLegend){var Rt=nt.getLegendDefaultData(!0);if(0===at.length&&Rt.length)return[];if(at.length===Rt.length)return at;var Bt={};at.forEach((function(nt){Bt[nt]=!0}));var Lt=Rt.filter((function(nt){return!Bt[u3(nt)]})),Ht=Rt.filter((function(nt){return!Lt.includes(nt)&&Lt.some((function(at){return xt(at).every((function(at){return nt.includes(at)}))}))}));at=at.slice(),Ht.forEach((function(nt){at.splice(at.indexOf(u3(nt)),1)}))}return at},i.prototype.initAnimation=function(){var nt=this;this.getMarksInType("arc").forEach((function(at){var lt;at.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("vennCircle"))||void 0===lt?void 0:lt(),aX(at.name,nt._spec,nt._markAttributeContext)))})),this.getMarksInType("path").forEach((function(at){var lt;at.setAnimationConfig(rX(null===(lt=Tz.getAnimationInKey("vennOverlap"))||void 0===lt?void 0:lt(),aX(at.name,nt._spec,nt._markAttributeContext)))}))},i.type=nt.SeriesTypeEnum.venn,i.mark=F3,i.transformerConstructor=Y3,i}(kX),I3=function(){jJ(),oZ(),Tz.registerAnimation("vennCircle",(function(nt,at){return{"appear":E3(at),"enter":{"type":"growRadiusIn"},"exit":{"type":"growRadiusOut"},"disappear":{"type":"growRadiusOut"}}})),Tz.registerAnimation("vennOverlap",(function(nt,at){return{"appear":P3(at),"update":{"custom":W3},"enter":{"type":"fadeIn"},"exit":{"type":"fadeOut"},"disappear":{"type":"fadeOut"}}})),ZY(),Pj.registerTransform("venn",{"transform":M3,"markPhase":"beforeJoin"},!0),Pj.registerTransform("vennMark",{"transform":T3,"markPhase":"beforeJoin"},!0),Tz.registerSeries($3.type,$3)},q3=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.mosaic,lt.transformerConstructor=Lq,lt}return S(i,at),i.prototype.getStack=function(){return!0},i.prototype.getPercent=function(){return!!this.getSeriesField()},i.prototype.getGroupFields=function(){return"vertical"===this.direction?this._specXField:this._specYField},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this);var nt=this.getPercent();"horizontal"===this.direction?(nt&&(this.setFieldX(bH),this.setFieldX2(_H)),this.setFieldY(kH),this.setFieldY2(xH)):(nt&&(this.setFieldY(bH),this.setFieldY2(_H)),this.setFieldX(kH),this.setFieldX2(xH))},i.prototype.parseLabelStyle=function(nt,at){if((null==at?void 0:at.filterByGroup)&&j(nt.dataFilter)){var lt=this.getGroupFields(),Rt=at.filterByGroup,Bt=Rt.field,Lt=Rt.type,Ht=void 0===Lt?"max":Lt,jt=Rt.filter;delete nt.filterField;var $t=lt.indexOf(Bt);if($t<0)return;var Kt=$t%2?"min"===Ht?"horizontal"===this.direction?this._fieldY2:this._fieldX2:"horizontal"===this.direction?this._fieldY:this._fieldX:"min"===Ht?"horizontal"===this.direction?this._fieldX2:this._fieldY2:"horizontal"===this.direction?this._fieldX:this._fieldY,te="min"===Ht?function(nt,at){var lt,Rt;return(null===(lt=nt.data)||void 0===lt?void 0:lt[Kt])<(null===(Rt=at.data)||void 0===Rt?void 0:Rt[Kt])}:function(nt,at){var lt,Rt;return(null===(lt=nt.data)||void 0===lt?void 0:lt[Kt])>(null===(Rt=at.data)||void 0===Rt?void 0:Rt[Kt])};nt.dataFilter=function(nt){var at={};return nt.forEach((function(nt){var lt=nt.data,Rt=null==lt?void 0:lt[Bt];j(Rt)||jt&&!jt(nt)||at[Rt]&&!te(nt,at[Rt])||(at[Rt]=nt)})),nt.filter((function(nt){var lt,Rt=null===(lt=nt.data)||void 0===lt?void 0:lt[Bt];return at[Rt]&&at[Rt]===nt}))}}return nt},i.type=nt.SeriesTypeEnum.mosaic,i.transformerConstructor=Lq,i}(Fq),D3=function(){sq(),oJ(),ZY(),gK(),Tz.registerSeries(q3.type,q3)},K3=A(A({},GY),((z3={}).pictogram={"name":"pictogram","type":"group"},z3)),Q3=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSpecFromChart=function(at){var lt,Rt,Bt,Lt=null!==(lt=nt.prototype._getDefaultSpecFromChart.call(this,at))&&void 0!==lt?lt:{},Ht=at.svg,jt=null===(Bt=null===(Rt=RY.get(Ht))||void 0===Rt?void 0:Rt.latestData)||void 0===Bt?void 0:Bt.elements;return jt&&jt.length&&jt.map((function(nt){return nt.name})).filter((function(nt){return N(nt)})).forEach((function(nt){at[nt]&&(Lt[nt]=at[nt])})),Lt},e}(xX),J3=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.dimensionTooltipTitleCallback=function(nt){var lt,Rt=at.series;return null!==(lt=at._getDimensionData(nt))&&void 0!==lt?lt:Rt.getDatumName(nt)},at.markTooltipValueCallback=function(nt,lt){var Rt=at._seriesCacheInfo.measureFields;if(Rt[0]&&nt.data)return nt.data[Rt[0]]},at.markTooltipKeyCallback=function(nt){var lt;return null===(lt=nt.data)||void 0===lt?void 0:lt[at.series.getDimensionField()[0]]},at}return S(e,nt),e}(zY);function H3(nt){var at;return N(nt)&&"none"!==nt&&!(null===(at=nt.includes)||void 0===at?void 0:at.call(nt,"url"))}var j3=function(nt){var at=parseFloat(nt.strokeWidth);if(!isNaN(at))return at;var lt=nt.stroke;return lt&&H3(lt)?1:0},N3=function(nt,at){var lt,Rt=null!==(lt=nt.fill)&&void 0!==lt?lt:at;return Rt&&H3(Rt)?Rt:void 0},V3=function(nt,at){var lt,Rt=null!==(lt=nt.stroke)&&void 0!==lt?lt:at;return!(!Rt||!H3(Rt))&&Rt},G3=function(nt){return A(A({},nt),{"x":parseFloat(nt.x)||void 0,"y":parseFloat(nt.y)||void 0,"fillStrokeOrder":!1,"fill":N3(nt),"lineWidth":j3(nt),"stroke":V3(nt)})},t5={"group":function(nt){var at=G3(nt);return A(A({},at),{"visibleAll":!1!==at.visible})},"rule":function(nt){return A(A({},G3(nt)),{"x":parseFloat(nt.x1),"y":parseFloat(nt.y1),"x1":parseFloat(nt.x2),"y1":parseFloat(nt.y2)})},"rect":function(nt){return A(A({},G3(nt)),{"fill":N3(nt,"#000"),"width":parseFloat(nt.width),"height":parseFloat(nt.height)})},"polygon":function(nt){return A(A({},G3(nt)),{"fill":N3(nt,"#000"),"points":nt.points.trim().split(/\s+/).map((function(nt){var at=E(nt.split(",").map(Number),2);return{"x":at[0],"y":at[1]}}))})},"line":function(nt){return A(A({},G3(nt)),{"points":nt.points.trim().split(/\s+/).map((function(nt){var at=E(nt.split(",").map(Number),2);return{"x":at[0],"y":at[1]}}))})},"path":function(nt){return A(A({},G3(nt)),{"path":nt.d,"fillStrokeOrder":!1})},"arc":function(nt){var at;return A(A({},G3(nt)),{"outerRadius":null!==(at=nt.r)&&void 0!==at?at:nt.ry,"x":parseFloat(nt.cx),"y":parseFloat(nt.cy),"startAngle":0,"endAngle":2*Math.PI,"scaleX":parseFloat(nt.rx)/parseFloat(nt.ry)||1,"fill":N3(nt,"#000")})},"text":function(nt,at){var lt,Rt;return A(A({},G3(nt)),{"text":at,"textAlign":null!==(lt=nt.textAlign)&&void 0!==lt?lt:"left","textBaseLine":null!==(Rt=nt.textAnchor)&&void 0!==Rt?Rt:"middle","anchor":[0,0],"fill":N3(nt,"#000")})}},U3=function(nt){var at,lt;if(!nt||!nt[0])return{};var Rt=nt[0].latestData.elements;if(Rt&&Rt.length){Rt.forEach((function(nt,at){var lt;nt[Xz]=at,nt._uniqueId="".concat(nt.id,"-").concat(at),nt.data=void 0;var Rt=nt.graphicType,Bt=nt.transform,Lt={"visible":"hidden"!==nt.attributes.visibility&&"collapse"!==nt.attributes.visibility};"text"===nt.graphicType?ft(Lt,nt._inheritStyle,null===(lt=nt.parent)||void 0===lt?void 0:lt._textGroupStyle,nt.attributes):"group"!==nt.graphicType&&ft(Lt,nt._inheritStyle,nt.attributes),t5[Rt]?nt._finalAttributes=t5[Rt](Lt,nt.value):nt._finalAttributes=Lt,Bt&&(nt._finalAttributes.postMatrix=A({},Bt))}));for(var Bt=Rt.filter((function(nt){return"text"===nt.tagName})),a=function(nt){var Lt=Bt[nt]._uniqueId,Ht=Rt.filter((function(nt){for(var at=!1,lt=nt.parent;lt;){if(lt._uniqueId===Lt){at=!0;break}lt=lt.parent}return at}));if(Ht&&Ht.length)for(var jt=null!==(lt=null===(at=Bt[nt]._textGroupStyle)||void 0===at?void 0:at.x)&&void 0!==lt?lt:0,$t=jt,Kt=0;Kt<Ht.length;Kt++){var te=Ht[Kt];if("group"===te.graphicType)$t=jt;else if(te.value&&void 0===te.parent._textGroupStyle.x){var ne=Ht.slice(0,Kt).reverse().find((function(nt){return"text"===nt.graphicType&&nt.value}));ne&&($t+=zz(ne.value,ne._finalAttributes).width),te._finalAttributes.x=$t}}},Lt=0;Lt<Bt.length;Lt++)a(Lt)}return Rt},e5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.type=nt.SeriesTypeEnum.pictogram,lt._idToMark=new Map,lt}return S(i,at),i.prototype.setAttrFromSpec=function(){var nt,lt,Rt;at.prototype.setAttrFromSpec.call(this),this.svg=this._spec.svg,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this.svg||null===(nt=this._option)||void 0===nt||nt.onError("svg source is not specified !"),this._parsedSvgResult=null===(lt=hY(this.svg))||void 0===lt?void 0:lt.latestData,this._parsedSvgResult||null===(Rt=this._option)||void 0===Rt||Rt.onError("'".concat(this.svg,"' is not registered !"))},i.prototype.getDatumCenter=function(nt){return[Number.NaN,Number.NaN]},i.prototype.getDatumName=function(nt){return nt.name||nt._nameFromParent},i.prototype.getMarksWithoutRoot=function(){var nt=this;return this.getMarks().filter((function(at){return at.name&&!at.name.includes("seriesGroup")&&!at.name.includes("root")&&at!==nt._pictogramMark}))},i.prototype._buildMarkAttributeContext=function(){at.prototype._buildMarkAttributeContext.call(this),this._markAttributeContext.getTransformMatrix=this.getRootMatrix.bind(this),this._markAttributeContext.coordToPosition=this.coordToPosition.bind(this),this._markAttributeContext.dataToPosition=this.dataToPosition.bind(this)},i.prototype._defaultHoverConfig=function(nt,at){return{"seriesId":this.id,"regionId":this._region.id,"selector":nt,"type":"element-highlight-by-graphic-name","trigger":at.trigger,"triggerOff":"pointerout","blurState":mU.STATE_HOVER_REVERSE,"highlightState":mU.STATE_HOVER}},i.prototype._defaultSelectConfig=function(nt,at){var lt="multiple"===at.mode,Rt=N(at.triggerOff)?at.triggerOff:lt?["empty","self"]:["empty",at.trigger];return{"type":"element-select-by-graphic-name","seriesId":this.id,"regionId":this._region.id,"selector":nt,"trigger":at.trigger,"triggerOff":Rt,"reverseState":mU.STATE_SELECTED_REVERSE,"state":mU.STATE_SELECTED,"isMultiple":lt}},i.prototype.initMark=function(){var nt,at,lt;if(this._pictogramMark=this._createMark(i.mark.pictogram,{"groupKey":this.getDimensionField()[0],"isSeriesMark":!0,"skipBeforeLayouted":!0,"dataView":this._mapViewData.getDataView(),"dataProductId":this._mapViewData.getProductId()},{"morph":lX(this._spec,i.mark.pictogram.name)}),this._pictogramMark){this._pictogramMark.setUserId(i.mark.pictogram.name);var r=function(nt){var at=nt.graphicType,Bt=nt.name,Lt=nt.parent;nt.id;var Ht=nt._nameFromParent,jt=nt._uniqueId,$t=Rt._createMark({"type":at,"name":null!=Bt?Bt:Ht},{"groupKey":jt,"isSeriesMark":!1,"skipBeforeLayouted":!0,"dataView":Rt._mapViewData.getDataView(),"dataProductId":Rt._mapViewData.getProductId(),"parent":null!==(lt=Rt._idToMark.get(null==Lt?void 0:Lt._uniqueId))&&void 0!==lt?lt:Rt._pictogramMark},{"morph":lX(Rt._spec,i.mark.pictogram.name)});$t&&($t.setUserId(jt),Rt._idToMark.set(jt,$t),"group"!==$t.type&&$t.setMarkConfig({"graphicName":$t.name}),$t.setTransform([{"type":"filter","callback":function(nt){return nt._uniqueId===jt}}]))},Rt=this;try{for(var Bt=C(this._mapViewData.getDataView().latestData),Lt=Bt.next();!Lt.done;Lt=Bt.next())r(Lt.value)}catch(at){nt={"error":at}}finally{try{Lt&&!Lt.done&&(at=Bt.return)&&at.call(Bt)}finally{if(nt)throw nt.error}}this._initLabelMark()}},i.prototype._initLabelMark=function(){if(!0===this._spec.label.visible){var nt=this._createMark(i.mark.label,{"isSeriesMark":!1,"parent":this._pictogramMark,"groupKey":"_uniqueId","skipBeforeLayouted":!0,"depend":this.getMarksWithoutRoot()});nt&&(this._labelMark=nt,this._labelMark.setDataView(this._mapViewData.getDataView()))}},i.prototype.initLabelMarkStyle=function(){var nt=this;this._labelMark&&this.setMarkStyle(this._labelMark,{"visible":function(at){return!!nt._validElement(at)},"x":function(at){var lt;return null===(lt=nt.dataToPosition(at,!0))||void 0===lt?void 0:lt.x},"y":function(at){var lt;return null===(lt=nt.dataToPosition(at,!0))||void 0===lt?void 0:lt.y},"text":function(at){return at[nt.nameField]},"textAlign":"center","textBaseline":"middle"},mU.STATE_NORMAL,EU.Series)},i.prototype.initMarkStyle=function(){var nt,at,lt=this,Rt=this._parsedSvgResult,Bt=Rt.root,Lt=Rt.viewBoxRect,Ht=this._mapViewData.getDataView().latestData;Bt&&(this.setMarkStyle(this._pictogramMark,t5.group(Bt.attributes),"normal",EU.Built_In),Bt.transform&&this.setMarkStyle(this._pictogramMark,{"postMatrix":function(){return Bt.transform}},"normal",EU.Built_In),Lt&&this._pictogramMark.setMarkConfig({"clip":!0,"clipPath":[Wg(A(A({},Lt),{"fill":!0}))]}));try{for(var jt=C(Ht),$t=jt.next();!$t.done;$t=jt.next()){var Kt=$t.value,te=Kt,ne=te._uniqueId,re=te._finalAttributes,ae=this._idToMark.get(ne),oe=this._validElement(Kt);ae&&(this.setMarkStyle(ae,{"keepStrokeScale":!0},"normal",EU.Built_In),oe?(this.initMarkStyleWithSpec(ae,ft({},this._spec.pictogram,this._spec[ae.name])),this.setMarkStyle(ae,re,"normal",EU.Series),ae.setPostProcess("fill",(function(nt,at){return N(nt)?nt:lt._spec.defaultFillColor}))):(ae.setMarkConfig({"interactive":!1}),this.setMarkStyle(ae,re,"normal",EU.Built_In)))}}catch(at){nt={"error":at}}finally{try{$t&&!$t.done&&(at=jt.return)&&at.call(jt)}finally{if(nt)throw nt.error}}this.initLabelMarkStyle()},i.prototype._validElement=function(nt){return nt.name||nt._nameFromParent},i.prototype.initTooltip=function(){var nt=this;this._tooltipHelper=new J3(this),this.getMarksWithoutRoot().forEach((function(at){at&&at.name&&nt._tooltipHelper.activeTriggerSet.mark.add(at)}))},i.prototype.dataToPosition=function(nt,at){if(void 0===at&&(at=!1),!nt)return null;var lt=nt[this.nameField];if(!lt)return null;var Rt=this.getMarksWithoutRoot().filter((function(nt){return nt.name===lt}));if(!Rt||0===Rt.length)return null;var Bt=new mi;at?Rt.forEach((function(nt){Bt=Bt.union(nt.getProduct().getGroupGraphicItem().globalAABBBounds)})):Rt.forEach((function(nt){Bt=Bt.union(nt.getProduct().getBounds())}));var Lt={"x":(Bt.x1+Bt.x2)/2,"y":(Bt.y1+Bt.y2)/2};if(at){var Ht=this.getLayoutStartPoint(),jt=Ht.x,$t=Ht.y;Lt.x-=jt,Lt.y-=$t}return Lt},i.prototype.coordToPosition=function(nt){if(!nt)return null;var at=nt.x,lt=nt.y,Rt=this.getRootMatrix();if(!Rt)return null;var Bt={};return Rt.getInverse().transformPoint({"x":at,"y":lt},Bt),Bt},i.prototype.getRootMatrix=function(){var nt;return null===(nt=this.getPictogramRootGraphic())||void 0===nt?void 0:nt.transMatrix},i.prototype.getPictogramRootGraphic=function(){var nt;return null===(nt=this._pictogramMark.getProduct())||void 0===nt?void 0:nt.getGroupGraphicItem()},i.prototype.initData=function(){var nt,lt,Rt=this;at.prototype.initData.call(this);var Bt=RY.get(this.svg);Bt||null===(nt=this._option)||void 0===nt||nt.onError("no valid svg found!");var Lt=new Es(this._dataSet,{"name":"pictogram_".concat(this.id,"_data")});GW(this._dataSet,"pictogram",U3),GW(this._dataSet,"lookup",tZ),Lt.parse([Bt],{"type":"dataview"}).transform({"type":"pictogram"}).transform({"type":"lookup","options":{"from":function(){return Rt.getViewData().latestData},"key":"name","fields":this._nameField,"set":function(nt,at){at&&(nt.data=at)}}}).transform({"type":"lookup","options":{"from":function(){return Rt.getViewData().latestData},"key":"_nameFromParent","fields":this._nameField,"set":function(nt,at){at&&(nt.data=at)}}}),null===(lt=this._data)||void 0===lt||lt.getDataView().target.addListener("change",Lt.reRunAllTransform),this._mapViewData=new jY(this._option,Lt)},i.prototype.mapViewDataUpdate=function(){this._mapViewData.updateData()},i.prototype.onLayoutEnd=function(nt){var lt;at.prototype.onLayoutEnd.call(this,nt),null===(lt=this._mapViewData)||void 0===lt||lt.getDataView().reRunAllTransform()},i.prototype.updateSVGSize=function(){var nt=this.getLayoutRect(),at=nt.width,lt=nt.height,Rt=at/2,Bt=lt/2,Lt=this.getPictogramRootGraphic();if(Lt){var Ht=Lt.AABBBounds,jt=Lt.AABBBounds,$t=(jt.x1+jt.x2)/2,Kt=(jt.y1+jt.y2)/2,te=at/Ht.width(),ne=lt/Ht.height(),re=Math.min(te,ne);Lt.scale(re,re,{"x":$t,"y":Kt}),Lt.translate(Rt-$t,Bt-Kt)}},i.prototype.initEvent=function(){var nt;at.prototype.initEvent.call(this),null===(nt=this._mapViewData.getDataView())||void 0===nt||nt.target.addListener("change",this.mapViewDataUpdate.bind(this)),this.event.on(GH.AFTER_MARK_LAYOUT_END,this.updateSVGSize.bind(this))},i.prototype.handleZoom=function(nt){var at=nt.scale,lt=nt.scaleCenter;if(1!==at){var Rt=this.getPictogramRootGraphic();Rt&&(Rt.attribute.postMatrix||Rt.setAttributes({"postMatrix":new Mi}),Rt.scale(at,at,lt))}},i.prototype.handlePan=function(nt){var at=nt.delta;if(0!==at[0]||0!==at[1]){var lt=this.getPictogramRootGraphic();lt&&(lt.attribute.postMatrix||lt.setAttributes({"postMatrix":new Mi}),lt.translate(at[0],at[1]))}},i.prototype.getMarkData=function(nt){var at;return null!==(at=nt.data)&&void 0!==at?at:{}},i.prototype.getMeasureField=function(){return[this.valueField]},i.prototype.getDimensionField=function(){return[this.nameField]},i.prototype._getSeriesInfo=function(nt,at){var lt=this,Rt=this.getDefaultShapeType();return at.map((function(at){var Bt;return{"key":at,"originalKey":at,"style":lt.getSeriesStyle({"data":(Bt={},Bt[nt]=at,Bt)}),"shapeType":Rt}}))},i.prototype.release=function(){this._parsedSvgResult=null,this._idToMark.clear(),this._idToMark=null},i.type=nt.SeriesTypeEnum.pictogram,i.mark=K3,i.transformerConstructor=Q3,i}(EK),X3=function(){Tz.registerSeries(e5.type,e5),Tz.registerImplement("registerSVG",uY),Tz.registerImplement("unregisterSVG",cY),Pj.registerInteraction(eN.type,eN),Pj.registerInteraction(iN.type,iN)},i5=function(at){function i(){return null!==at&&at.apply(this,arguments)||this}return S(i,at),i.prototype._isValidSeries=function(at){return at===nt.SeriesTypeEnum.map},i.prototype._getDefaultSeriesSpec=function(nt){return at.prototype._getDefaultSeriesSpec.call(this,nt,["type","nameField","valueField","map","nameProperty","centroidProperty","nameMap","area","defaultFillColor","showDefaultName"])},i.prototype.transformSpec=function(nt){at.prototype.transformSpec.call(this,nt),nt.region.forEach((function(nt){nt.coordinate="geo"})),at.prototype.transformSeriesSpec.call(this,nt)},i}(iq),r5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=i5,lt.type="map",lt.seriesType=nt.SeriesTypeEnum.map,lt}return S(i,at),i.type="map",i.seriesType=nt.SeriesTypeEnum.map,i.transformerConstructor=i5,i}(eq),Z3=function(){_Z(),Tz.registerChart(r5.type,r5)},a5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._isValidSeries=function(nt){return!this.seriesType||nt===this.seriesType},e.prototype.getIndicatorSpec=function(nt){var at,lt,Rt,Bt=xt(nt.indicator),Lt=null!==(at=nt.innerRadius)&&void 0!==at?at:null===(Rt=null===(lt=nt.series)||void 0===lt?void 0:lt[0])||void 0===Rt?void 0:Rt.innerRadius;return N(Lt)&&Bt.forEach((function(nt){j(nt.limitRatio)&&(nt.limitRatio=Lt)})),Bt},e.prototype._getDefaultSeriesSpec=function(at,lt){return nt.prototype._getDefaultSeriesSpec.call(this,at,["radius","outerRadius","innerRadius","startAngle","endAngle","sortDataByAxis"],lt)},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),X(at.dataZoom)&&at.dataZoom.length>0&&at.dataZoom.forEach((function(nt){"axis"===nt.filterMode&&(nt.filterMode="filter")})),this.transformSeriesSpec(at),N(at.indicator)&&(at.indicator=this.getIndicatorSpec(at))},e}(iq),s5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!1},e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at,["startAngle","endAngle","centerX","centerY"]);return lt.categoryField=at.categoryField||at.radiusField,lt.valueField=at.valueField||at.angleField,lt},e.prototype._transformProgressAxisSpec=function(nt,at,lt,Rt,Bt){var Lt,Ht;nt.axes||(nt.axes=[]);var jt=(null!==(Lt=nt.axes)&&void 0!==Lt?Lt:[]).find((function(nt){return"radius"===nt.orient})),$t=(null!==(Ht=nt.axes)&&void 0!==Ht?Ht:[]).find((function(nt){return"angle"===nt.orient}));$t||($t=at,nt.axes.push($t)),jt||(jt=lt,nt.axes.push(jt)),j($t.type)&&($t.type="linear"),j(jt.type)&&(jt.type="band");var Kt=NX($t,{"min":0,"max":1});j($t.min)&&($t.min=Kt.min),j($t.max)&&($t.max=Kt.max),Rt&&Object.assign($t,gz({},Rt,$t)),Bt&&Object.assign(jt,gz({},Bt,jt))},e}(a5),l5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!0},e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return lt.categoryField=at.categoryField||at.angleField,lt.valueField=at.valueField||at.radiusField,lt},e.prototype.transformSpec=function(at){var lt;if(nt.prototype.transformSpec.call(this,at),this.needAxes()){at.axes||(at.axes=[]);var Rt={"radius":!1,"angle":!1};(null!==(lt=at.axes)&&void 0!==lt?lt:[]).forEach((function(nt){var at=nt.orient;"radius"===at&&(Rt.radius=!0),"angle"===at&&(Rt.angle=!0)})),Rt.angle||at.axes.push({"orient":"angle"}),Rt.radius||at.axes.push({"orient":"radius"})}},e}(a5),c5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!1},e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt=nt.prototype._getDefaultSeriesSpec.call(this,at,["center","centerOffset","cornerRadius","padAngle","minAngle","emptyPlaceholder","showAllZero","supportNegative","layoutRadius"]);return Rt.categoryField=at.categoryField||at.seriesField,Rt.valueField=at.valueField||at.angleField,Rt.emptyCircle=null===(lt=at.emptyPlaceholder)||void 0===lt?void 0:lt.emptyCircle,Rt},e}(a5),f5=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.transformerConstructor=c5,at}return S(e,nt),e.transformerConstructor=c5,e}(eq),p5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=c5,lt.type="pie",lt.seriesType=nt.SeriesTypeEnum.pie,lt}return S(i,at),i.type="pie",i.seriesType=nt.SeriesTypeEnum.pie,i.transformerConstructor=c5,i}(f5),n5=function(){KJ(),Tz.registerChart(p5.type,p5)},g5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),at.series.forEach((function(nt){"pie3d"===nt.type&&(nt.angle3d=at.angle3d)}))},e}(c5),y5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=g5,lt.type="pie3d",lt.seriesType=nt.SeriesTypeEnum.pie3d,lt}return S(i,at),i.type="pie3d",i.seriesType=nt.SeriesTypeEnum.pie3d,i.transformerConstructor=g5,i}(f5),o5=function(){wq(),$J(),Tz.registerChart(y5.type,y5)},_5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt,Lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return Lt.radius=null!==(lt=at.radius)&&void 0!==lt?lt:qF,Lt.outerRadius=null!==(Rt=at.outerRadius)&&void 0!==Rt?Rt:qF,Lt.innerRadius=null!==(Bt=at.innerRadius)&&void 0!==Bt?Bt:0,Lt.stack=at.stack,Lt.percent=at.percent,Lt},e.prototype.transformSpec=function(at){var lt;nt.prototype.transformSpec.call(this,at),(null!==(lt=at.axes)&&void 0!==lt?lt:[]).forEach((function(nt){["domainLine","grid","label","tick"].forEach((function(at){nt[at]||(nt[at]={"visible":!1})})),"angle"===nt.orient&&j(nt.bandPosition)&&(nt.bandPosition=.5)})),at.crosshair=xt(at.crosshair||{}).map((function(nt){return gz({"categoryField":{"visible":!0,"line":{"visible":!0,"type":"rect"}}},nt)}))},e}(l5),b5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=_5,lt.type="rose",lt.seriesType=nt.SeriesTypeEnum.rose,lt}return S(i,at),i.type="rose",i.seriesType=nt.SeriesTypeEnum.rose,i.transformerConstructor=_5,i}(eq);bt(b5,lq);var u5=function(){gQ(),Tz.registerChart(b5.type,b5)},x5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt=nt.prototype._getDefaultSeriesSpec.call(this,at);return Rt.line=at.line,Rt.point=at.point,Rt.stack=at.stack,Rt.percent=at.percent,Rt.area=gz({"visible":!1},at.area),Rt.seriesMark=null!==(lt=at.seriesMark)&&void 0!==lt?lt:"area",Rt.activePoint=at.activePoint,Rt.pointDis=at.pointDis,Rt.pointDisMul=at.pointDisMul,Rt.markOverlap=at.markOverlap,Rt},e.prototype.transformSpec=function(at){var lt;nt.prototype.transformSpec.call(this,at),(null!==(lt=at.axes)&&void 0!==lt?lt:[]).forEach((function(nt){"radius"===nt.orient&&(["domainLine","label","tick"].forEach((function(at){nt[at]||(nt[at]={"visible":!1})})),nt.grid||(nt.grid={"visible":!0}))})),at.crosshair=xt(at.crosshair||{}).map((function(nt){return gz({"categoryField":{"visible":!0,"line":{"visible":!0,"type":"line"}}},nt)}))},e}(l5),k5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=x5,lt.type="radar",lt.seriesType=nt.SeriesTypeEnum.radar,lt}return S(i,at),i.type="radar",i.seriesType=nt.SeriesTypeEnum.radar,i.transformerConstructor=x5,i}(eq);bt(k5,lq);var d5=function(){PQ(),Tz.registerChart(k5.type,k5)},A5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return delete lt.data,lt},e.prototype._transformAxisSpec=function(nt){var at=this;nt.axes&&nt.autoBandSize&&nt.series.forEach((function(lt,Rt){var Bt;if("bar"===lt.type){var Lt=at._findBandAxisBySeries(lt,Rt,nt.axes);if(Lt&&!Lt.bandSize&&!Lt.maxBandSize&&!Lt.minBandSize){var Ht=V(lt.autoBandSize)&&null!==(Bt=lt.autoBandSize.extend)&&void 0!==Bt?Bt:0,jt=lt.barMaxWidth,$t=lt.barMinWidth,Kt=lt.barWidth,te=lt.barGapInGroup;at._applyAxisBandSize(Lt,Ht,{"barMaxWidth":jt,"barMinWidth":$t,"barWidth":Kt,"barGapInGroup":te})}}}))},e.prototype.transformSpec=function(at){var lt=this;if(nt.prototype.transformSpec.call(this,at),at.series&&at.series.length){var Rt=this._getDefaultSeriesSpec(at);at.series.forEach((function(nt){lt._isValidSeries(nt.type)&&Object.keys(Rt).forEach((function(at){at in nt||(nt[at]=Rt[at])}))}))}at.axes&&at.axes.length&&at.axes.forEach((function(nt){st(nt,"trimPadding")&&gz(nt,pU(lt.type,at))})),this._transformAxisSpec(at)},e}(iq),M5=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.transformerConstructor=A5,at.type="common",at}return S(e,nt),e.type="common",e.transformerConstructor=A5,e}(eq);bt(M5,lq);var v5=function(){Tz.registerChart(M5.type,M5)},T5=function(at){function i(){return null!==at&&at.apply(this,arguments)||this}return S(i,at),i.prototype._getSeriesDataLength=function(nt,at){var lt,Rt;if(at.data){var Bt=xt(at.data)[0];return Bt instanceof Es?null===(lt=Bt.latestData)||void 0===lt?void 0:lt.length:null===(Rt=Bt.values)||void 0===Rt?void 0:Rt.length}var Lt=xt(nt.data).find((function(nt,lt){return at.dataId?nt instanceof Es?nt.name===at.dataId:nt.id===at.dataId:at.dataIndex===lt}));return Lt?Lt instanceof Es?Lt.latestData.length:Lt.values.length:0},i.prototype.addAttrToComponentSpec=function(nt,at,lt){return Array.isArray(nt)?nt[0][at]=lt:nt[at]=lt,nt},i.prototype.addPaddingRow=function(nt,at,lt){nt.push({"index":at,"size":lt})},i.prototype.addOrientAxes=function(nt,at,lt,Rt){nt.push({"id":"regionAxesRow".concat(lt)}),at.push({"modelId":"axesRow".concat(lt),"col":1,"row":lt}),Rt.axes[0].id="axesRow".concat(lt),Rt.axes[0].regionIndex=Array.from(Array(Rt.series.length),(function(nt,at){return"top"===Rt.axes[0].orient?at+1:at}))},i.prototype.transformSpec=function(lt){var Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce=this;at.prototype.transformSpec.call(this,lt);var he=0,de=[],fe=[],pe=[],ve=[],Ae=[],we=(this._option.getCompiler().getVGrammarView().width(),this._option.getCompiler().getVGrammarView().height()),Ce=0;if(null==lt?void 0:lt.legends){de.push({"modelId":"legendRow".concat(he),"col":1,"row":he}),this.addAttrToComponentSpec(lt.legends,"id","legendRow".concat(he));var je=xt(lt.legends),Ne=null!==(Rt=je[0].height)&&void 0!==Rt?Rt:40;if(je[0].padding){var Ve=vF(je[0].padding);Ne+=Number(null!==(Bt=null==Ve?void 0:Ve.bottom)&&void 0!==Bt?Bt:0),Ne+=Number(null!==(Lt=null==Ve?void 0:Ve.top)&&void 0!==Lt?Lt:0),je[0].offsetY=Number(null!==(jt=null===(Ht=je[0])||void 0===Ht?void 0:Ht.offsetY)&&void 0!==jt?jt:0)+Number(null!==($t=null==Ve?void 0:Ve.top)&&void 0!==$t?$t:0)}Ae.push({"index":he,"size":Ne}),Ce+=Ne,he++}(null==lt?void 0:lt.dataZoom)&&(de.push({"modelId":"dataZoomRow".concat(he),"col":1,"row":he}),this.addAttrToComponentSpec(lt.dataZoom,"id","dataZoomRow".concat(he)),Ce+=60,he++,this.addPaddingRow(Ae,he,10),Ce+=10,he++),Ce+=60,null!==lt.axes&&"top"!==(null===(te=null===(Kt=null==lt?void 0:lt.axes)||void 0===Kt?void 0:Kt[0])||void 0===te?void 0:te.orient)||(this.addOrientAxes(fe,de,he,lt),he++);var Ge=lt.series.filter((function(at){return at.type!==nt.SeriesTypeEnum.link})).length,ti=(we-Ce-20*Ge)/Ge,li=(null===(ne=null==lt?void 0:lt.appendPadding)||void 0===ne?void 0:ne.left)||0,hi=(null===(re=null==lt?void 0:lt.appendPadding)||void 0===re?void 0:re.right)||0;null===(ae=null==lt?void 0:lt.series)||void 0===ae||ae.forEach((function(at){var Rt,Bt;if([nt.SeriesTypeEnum.bar,nt.SeriesTypeEnum.line,nt.SeriesTypeEnum.area,nt.SeriesTypeEnum.dot].includes(at.type)){if(de.push({"modelId":"".concat(at.type,"Row").concat(he),"col":1,"row":he}),de.push({"modelId":"axesLeftRow".concat(he),"col":0,"row":he}),fe.push({"id":"".concat(at.type,"Row").concat(he),"clip":!1}),Ae.push({"index":he,"size":(null==at?void 0:at.height)||ti}),pe.push({"orient":"left","id":"axesLeftRow".concat(he),"type":at.type===nt.SeriesTypeEnum.dot?"band":"linear","visible":at.type!==nt.SeriesTypeEnum.dot,"title":{"visible":!0,"autoRotate":!1,"style":{"text":null==at?void 0:at.barTitle,"dx":-20,"textBaseline":"middle","textAlign":"end"}},"grid":{"visible":"boolean"!=typeof(null===(Rt=null==at?void 0:at.grid)||void 0===Rt?void 0:Rt.visible)||(null===(Bt=null==at?void 0:at.grid)||void 0===Bt?void 0:Bt.visible),"style":function(nt,lt){var Rt,Bt,Lt,Ht,jt,$t=0;if(0===lt){var Kt=null===(Rt=null==at?void 0:at.grid)||void 0===Rt?void 0:Rt.style;$t=null!==(Lt=null!==(Bt=null==Kt?void 0:Kt.lineWidth)&&void 0!==Bt?Bt:null==Kt?void 0:Kt.strokeWidth)&&void 0!==Lt?Lt:1}return{"lineWidth":$t,"stroke":(null===(jt=null===(Ht=null==at?void 0:at.grid)||void 0===Ht?void 0:Ht.style)||void 0===jt?void 0:jt.stroke)||"#dfdfdf","lineDash":[0,0]}}},"domainLine":{"visible":!1},"tick":{"visible":!1},"label":{"visible":!1},"regionIndex":fe.length-1}),at.type===nt.SeriesTypeEnum.dot){de.push({"modelId":"scrollBarRightRow".concat(he),"col":2,"row":he});var Lt=ce._getSeriesDataLength(lt,at),Ht=0;Lt&&(Ht=((null==at?void 0:at.height)||ti)/(30*Lt)),ve.push(A({"orient":"right","visible":at.type===nt.SeriesTypeEnum.dot&&Ht<1,"id":"scrollBarRightRow".concat(he),"start":0,"end":Math.min(Ht,1),"filterMode":"axis","regionIndex":fe.length-1,"axisId":"axesLeftRow".concat(he)},xt(null==lt?void 0:lt.scrollBar)[0]))}at.regionIndex=fe.length-1,he++,ce.addPaddingRow(Ae,he,(null==at?void 0:at.padding)||20),he++,at.leftAppendPadding=li,at.type===nt.SeriesTypeEnum.dot&&(at.title.style.dx=-li,at.subTitle.style.dx=-li)}})),this.addPaddingRow(Ae,he,20),he++,null===(oe=null==lt?void 0:lt.series)||void 0===oe||oe.forEach((function(at){if(at.type===nt.SeriesTypeEnum.link){var Rt=at.dotSeriesIndex+1;de.push({"modelId":"".concat(at.type,"Row").concat(Rt),"col":1,"row":Rt-1}),at.regionIndex=lt.series[at.dotSeriesIndex].regionIndex,at.leftAppendPadding=li,at.height=lt.series[at.dotSeriesIndex].height,at.clipHeight=lt.series[at.dotSeriesIndex].clipHeight}})),(null==lt?void 0:lt.legends)&&this.addAttrToComponentSpec(lt.legends,"regionIndex",[fe.length-1]),"bottom"===(null===(le=null===(se=null==lt?void 0:lt.axes)||void 0===se?void 0:se[0])||void 0===le?void 0:le.orient)&&(this.addOrientAxes(fe,de,he,lt),he++);var di={"type":"grid","col":4,"row":he,"colWidth":[{"index":0,"size":li},{"index":2,"size":12},{"index":3,"size":hi}],"rowHeight":Ae,"elements":de};lt.layout=di,lt.region=fe,null===(ue=lt.axes)||void 0===ue||ue.push.apply(ue,P([],E(pe),!1)),lt.scrollBar=ve},i}(iq),E5=function(at){function i(){var nt=null!==at&&at.apply(this,arguments)||this;return nt.transformerConstructor=T5,nt.type="sequence",nt}return S(i,at),i.prototype._createSeries=function(at,lt){if(at){var Rt,Bt=lt.spec,Lt=w(lt,["spec"]);if(Bt.type===nt.SeriesTypeEnum.link&&(Bt.dotSeriesSpec=this._spec.series[Bt.dotSeriesIndex]),Bt.regionId&&(Rt=this.getRegionsInUserId(Bt.regionId)),Rt||(Rt=this.getRegionsInIndex(Bt.regionIndex?[Bt.regionIndex]:void 0)[0]),Rt){var Ht=new at(Bt,A(A(A({},this._modelOption),Lt),{"region":Rt,"specKey":"series","globalScale":this._globalScale}));Ht&&(Ht.created(),this._series.push(Ht),Rt.addSeries(Ht))}}},i.type="sequence",i.transformerConstructor=T5,i}(eq),m5=function(){OQ(),NQ(),_K(),gK(),Tz.registerChart(E5.type,E5)},P5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),at.axes.forEach((function(nt){return nt.type="linear"}))},e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["x2Field","y2Field","barMinHeight","barBackground"])},e}(rq),I5=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.transformerConstructor=P5,at}return S(e,nt),e.transformerConstructor=P5,e}(eq);bt(I5,lq);var B5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e}(P5),L5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=B5,lt.type="histogram",lt.seriesType=nt.SeriesTypeEnum.bar,lt}return S(i,at),i.type="histogram",i.seriesType=nt.SeriesTypeEnum.bar,i.transformerConstructor=B5,i}(I5),S5=function(){fq(),Tz.registerChart(L5.type,L5)},F5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=B5,lt.type="histogram3d",lt.seriesType=nt.SeriesTypeEnum.bar3d,lt}return S(i,at),i.type="histogram3d",i.seriesType=nt.SeriesTypeEnum.bar3d,i.transformerConstructor=B5,i}(I5),w5=function(){wq(),Sq(),Tz.registerChart(F5.type,F5)},z5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt=nt.prototype._getDefaultSeriesSpec.call(this,at);return Bt.progress=at.progress,Bt.track=at.track,Bt.tickMask=at.tickMask,Bt.cornerRadius=null!==(lt=at.cornerRadius)&&void 0!==lt?lt:0,Bt.roundCap=null!==(Rt=at.roundCap)&&void 0!==Rt&&Rt,Bt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this._transformProgressAxisSpec(at,{"orient":"angle","visible":!1},{"orient":"radius","visible":!1},{"forceInitTick":at.tickMask&&!1!==at.tickMask.visible})},e}(s5),j5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=z5,lt.type="circularProgress",lt.seriesType=nt.SeriesTypeEnum.circularProgress,lt}return S(i,at),i.type="circularProgress",i.seriesType=nt.SeriesTypeEnum.circularProgress,i.transformerConstructor=z5,i}(eq);bt(j5,lq);var C5=function(){ZQ(),Tz.registerChart(j5.type,j5)},N5=function(at){function i(){return null!==at&&at.apply(this,arguments)||this}return S(i,at),i.prototype._getDefaultSeriesSpec=function(nt){var lt=at.prototype._getDefaultSeriesSpec.call(this,nt);return lt.radiusField=nt.radiusField,lt.pin=nt.pin,lt.pinBackground=nt.pinBackground,lt.pointer=nt.pointer,lt},i.prototype._getDefaultCircularProgressSeriesSpec=function(lt){var Rt=at.prototype._getDefaultSeriesSpec.call(this,lt);return Rt.type=nt.SeriesTypeEnum.circularProgress,Rt},i.prototype.transformSpec=function(lt){var Rt,Bt,Lt,Ht,jt;at.prototype.transformSpec.call(this,lt);var $t=null===(Rt=lt.series)||void 0===Rt?void 0:Rt.find((function(at){return at.type===nt.SeriesTypeEnum.gauge||at.type===nt.SeriesTypeEnum.circularProgress}));j($t)&&("circularProgress"===($t=null!==(Bt=lt.gauge)&&void 0!==Bt?Bt:this._getDefaultCircularProgressSeriesSpec(lt)).type&&(j($t.radiusField)&&j($t.categoryField)&&($t.radiusField=null!==(Ht=null!==(Lt=lt.radiusField)&&void 0!==Lt?Lt:lt.categoryField)&&void 0!==Ht?Ht:lt.seriesField),j($t.valueField)&&j($t.angleField)&&($t.valueField=null!==(jt=lt.valueField)&&void 0!==jt?jt:lt.angleField)),1===lt.series.length?lt.series.push($t):lt.series.forEach((function(nt){nt.type===$t.type&&Object.keys($t).forEach((function(at){at in nt||(nt[at]=$t[at])}))}))),$t.type===nt.SeriesTypeEnum.circularProgress?this._transformProgressAxisSpec(lt,{"orient":"angle","visible":!0,"domainLine":{"visible":!1},"grid":{"visible":!1}},{"orient":"radius","visible":!1},{"zIndex":MU.Region+50}):this._transformGaugeAxisSpec(lt)},i.prototype._transformGaugeAxisSpec=function(nt){var at;nt.axes||(nt.axes=[]);var lt={"radius":null,"angle":null};(null!==(at=nt.axes)&&void 0!==at?at:[]).forEach((function(nt){var at=nt.orient;"radius"===at&&(lt.radius=nt),"angle"===at&&(lt.angle=nt)})),lt.angle||(lt.angle={"orient":"angle","visible":!0},nt.axes.push(lt.angle)),lt.radius||(lt.radius={"orient":"radius","visible":!1},nt.axes.push(lt.radius)),j(lt.angle.type)&&(lt.angle.type="linear"),j(lt.radius.type)&&(lt.radius.type="linear"),j(lt.angle.zIndex)&&(lt.angle.zIndex=MU.Region+50)},i}(s5),G5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=N5,lt.type="gauge",lt.seriesType=nt.SeriesTypeEnum.gaugePointer,lt}return S(i,at),i.type="gauge",i.seriesType=nt.SeriesTypeEnum.gaugePointer,i.transformerConstructor=N5,i}(eq),R5=function(){S2(),M2(),Tz.registerChart(G5.type,G5)},U5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["nameField","valueField","fontFamilyField","fontWeightField","fontStyleField","colorHexField","colorMode","colorList","rotateAngles","fontWeightRange","fontSizeRange","maskShape","keepAspect","random","wordCloudConfig","wordCloudShapeConfig","word","fillingWord","wordMask"])},e}(iq),Y5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=U5,lt.type="wordCloud",lt.seriesType=nt.SeriesTypeEnum.wordCloud,lt}return S(i,at),i.transformerConstructor=U5,i}(eq),q5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=U5,lt.type="wordCloud",lt.seriesType=nt.SeriesTypeEnum.wordCloud,lt}return S(i,at),i.type="wordCloud",i.seriesType=nt.SeriesTypeEnum.wordCloud,i.transformerConstructor=U5,i}(Y5),D5=function(){o0(),Tz.registerChart(q5.type,q5)},O5=function(){r0(),o0(),D5()},K5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return lt.depth_3d=at.depth_3d,lt},e}(U5),Q5=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=K5,lt.type="wordCloud3d",lt.seriesType=nt.SeriesTypeEnum.wordCloud3d,lt}return S(i,at),i.type="wordCloud3d",i.seriesType=nt.SeriesTypeEnum.wordCloud3d,i.transformerConstructor=K5,i}(Y5),H5=function(){wq(),l0(),Tz.registerChart(Q5.type,Q5)},J5=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!1},e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","funnelAlign","funnelOrient","heightRatio","shape","funnel","transform","outerLabel","transformLabel","isTransform","maxSize","minSize","gap","isCone","range","transformRatioText"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),nt.prototype.transformSeriesSpec.call(this,at)},e}(iq),t4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=J5,lt.type="funnel",lt.seriesType=nt.SeriesTypeEnum.funnel,lt}return S(i,at),i.type="funnel",i.seriesType=nt.SeriesTypeEnum.funnel,i.transformerConstructor=J5,i}(eq),V5=function(){E0(),Tz.registerChart(t4.type,t4)},e4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=J5,lt.type="funnel3d",lt.seriesType=nt.SeriesTypeEnum.funnel3d,lt}return S(i,at),i.type="funnel3d",i.seriesType=nt.SeriesTypeEnum.funnel3d,i.transformerConstructor=J5,i}(eq),W5=function(){wq(),L0(),Tz.registerChart(e4.type,e4)},n4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.needAxes=function(){return!1},e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt=nt.prototype._getDefaultSeriesSpec.call(this,at,["bandWidth","progress","track"]);return Bt.direction=null!==(lt=at.direction)&&void 0!==lt?lt:"horizontal",Bt.cornerRadius=null!==(Rt=at.cornerRadius)&&void 0!==Rt?Rt:0,Bt},e.prototype.transformSpec=function(at){var lt,Rt;if(nt.prototype.transformSpec.call(this,at),at.axes||(at.axes=[]),"vertical"===at.direction){var Bt=null,Lt=null;(null!==(lt=at.axes)&&void 0!==lt?lt:[]).forEach((function(nt){var at=nt.orient;"left"===at&&(Bt=nt),"bottom"===at&&(Lt=nt)})),Bt||(Bt={"orient":"left","visible":!1},at.axes.push(Bt)),Lt||(Lt={"orient":"bottom","visible":!1},at.axes.push(Lt)),j(Lt.type)&&(Lt.type="band"),j(Bt.type)&&(Bt.type="linear");var Ht=NX(Bt,{"min":0,"max":1});j(Bt.min)&&(Bt.min=Ht.min),j(Bt.max)&&(Bt.max=Ht.max)}else{var jt=null,$t=null;(null!==(Rt=at.axes)&&void 0!==Rt?Rt:[]).forEach((function(nt){var at=nt.orient;"left"===at&&(jt=nt),"bottom"===at&&($t=nt)})),jt||(jt={"type":"band","orient":"left","visible":!1},at.axes.push(jt)),$t||($t={"orient":"bottom","visible":!1},at.axes.push($t)),j($t.type)&&($t.type="linear"),j(jt.type)&&(jt.type="band"),Ht=NX($t,{"min":0,"max":1}),j($t.min)&&($t.min=Ht.min),j($t.max)&&($t.max=Ht.max)}},e}(rq),r4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=n4,lt.type="linearProgress",lt.seriesType=nt.SeriesTypeEnum.linearProgress,lt}return S(i,at),i.type="linearProgress",i.seriesType=nt.SeriesTypeEnum.linearProgress,i.transformerConstructor=n4,i}(eq);bt(r4,lq);var X5=function(){o$(),Tz.registerChart(r4.type,r4)},o4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt=nt.prototype._getDefaultSeriesSpec.call(this,at,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"]);return"horizontal"===at.direction?Bt.xField=null!==(lt=at.xField)&&void 0!==lt?lt:[at.minField,at.maxField]:Bt.yField=null!==(Rt=at.yField)&&void 0!==Rt?Rt:[at.minField,at.maxField],Bt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e}(rq),s4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=o4,lt.type="rangeColumn",lt.seriesType=nt.SeriesTypeEnum.rangeColumn,lt}return S(i,at),i.type="rangeColumn",i.seriesType=nt.SeriesTypeEnum.rangeColumn,i.transformerConstructor=o4,i}(eq),Z5=function(){mJ(),Tz.registerChart(s4.type,s4)},u4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt=nt.prototype._getDefaultSeriesSpec.call(this,at,["bar3d","barGapInGroup"]);return"horizontal"===at.direction?Bt.xField=null!==(lt=at.xField)&&void 0!==lt?lt:[at.minField,at.maxField]:Bt.yField=null!==(Rt=at.yField)&&void 0!==Rt?Rt:[at.minField,at.maxField],Bt},e}(rq),c4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=u4,lt.type="rangeColumn3d",lt.seriesType=nt.SeriesTypeEnum.rangeColumn3d,lt}return S(i,at),i.type="rangeColumn3d",i.seriesType=nt.SeriesTypeEnum.rangeColumn3d,i.transformerConstructor=u4,i}(eq),$5=function(){wq(),bJ(),Tz.registerChart(c4.type,c4)},d4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt=N(at.startAngle)?at.startAngle:-90,Rt=N(at.endAngle)?at.endAngle:lt+Te(2*Math.PI),Bt=nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","centerX","centerY","offsetX","offsetY","innerRadius","outerRadius","gap","labelLayout","label","labelAutoVisible","drill","drillField"]);return Bt.startAngle=lt,Bt.endAngle=Rt,Bt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),p4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=d4,lt.type="sunburst",lt.seriesType=nt.SeriesTypeEnum.sunburst,lt}return S(i,at),i.type="sunburst",i.seriesType=nt.SeriesTypeEnum.sunburst,i.transformerConstructor=d4,i}(eq),i4=function(){C1(),Tz.registerChart(p4.type,p4)},v4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","layoutPadding","circlePacking","drill","drillField"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),g4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=v4,lt.type="circlePacking",lt.seriesType=nt.SeriesTypeEnum.circlePacking,lt}return S(i,at),i.type="circlePacking",i.seriesType=nt.SeriesTypeEnum.circlePacking,i.transformerConstructor=v4,i}(eq),a4=function(){L1(),Tz.registerChart(g4.type,g4)},m4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","aspectRatio","splitType","maxDepth","gapWidth","nodePadding","minVisibleArea","minChildrenVisibleArea","minChildrenVisibleSize","roam","drill","drillField","leaf","nonLeaf","nonLeafLabel"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),_4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=m4,lt.type="treemap",lt.seriesType=nt.SeriesTypeEnum.treemap,lt}return S(i,at),i.type="treemap",i.seriesType=nt.SeriesTypeEnum.treemap,i.transformerConstructor=m4,i}(eq),l4=function(){v2(),Tz.registerChart(_4.type,_4)},x4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),at.legends&&xt(at.legends).forEach((function(nt){nt.select=!1,nt.hover=!1,nt.filter=!1})),cU(at)},e.prototype._getDefaultSeriesSpec=function(at){var lt=nt.prototype._getDefaultSeriesSpec.call(this,at);return lt.bar=at.bar,lt.stackLabel=at.stackLabel,lt.leaderLine=at.leaderLine,lt.total=at.total,lt},e}(zq),k4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=x4,lt.type="waterfall",lt.seriesType=nt.SeriesTypeEnum.waterfall,lt}return S(i,at),i.type="waterfall",i.seriesType=nt.SeriesTypeEnum.waterfall,i.transformerConstructor=x4,i}(jq),h4=function(){qZ(),Tz.registerChart(k4.type,k4)},A4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt=[at.maxField,at.medianField,at.q1Field,at.q3Field,at.minField,at.outliersField],Bt=nt.prototype._getDefaultSeriesSpec.call(this,at,["boxPlot","minField","maxField","q1Field","medianField","q3Field","outliersField","outliersStyle"]);return Bt.direction=null!==(lt=at.direction)&&void 0!==lt?lt:"vertical",Bt["horizontal"===Bt.direction?"xField":"yField"]=Rt,Bt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),at.axes||(at.axes=[{"orient":"bottom"},{"orient":"left"}]),cU(at)},e}(rq),w4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=A4,lt.type="boxPlot",lt.seriesType=nt.SeriesTypeEnum.boxPlot,lt}return S(i,at),i.type="boxPlot",i.seriesType=nt.SeriesTypeEnum.boxPlot,i.transformerConstructor=A4,i}(eq),f4=function(){rJ(),Tz.registerChart(w4.type,w4)},P4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","sourceField","targetField","direction","nodeAlign","crossNodeAlign","nodeGap","nodeWidth","linkWidth","minStepWidth","minNodeHeight","maxNodeHeight","minLinkHeight","maxLinkHeight","dropIsolatedNode","nodeHeight","linkHeight","equalNodeHeight","linkOverlap","iterations","nodeKey","linkSortBy","nodeSortBy","setNodeLayer","node","link","emphasis","inverse","overflow"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),R4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=P4,lt.type="sankey",lt.seriesType=nt.SeriesTypeEnum.sankey,lt}return S(i,at),i.prototype._setStateInDatum=function(nt,at,lt,Rt,Bt){var Lt=X(lt)?lt[0]:lt,Ht=Lt?Object.keys(Lt):null;this.getRegionsInQuerier(Bt).forEach((function(lt){if(Lt){var Bt=!1;lt.getSeries().forEach((function(at){var jt,$t,Kt=null;at.getMarksWithoutRoot().forEach((function(jt){if("text"!==jt.type){var $t=null,te=jt.getProduct();te&&((!Rt||H(Rt)&&Rt(at,jt))&&($t=te.elements.find((function(nt){return Ht.every((function(at){var lt,Rt=null===(lt=nt.getDatum())||void 0===lt?void 0:lt.datum;return X(Rt)&&(Rt=Rt[0]),Lt[at]==(null==Rt?void 0:Rt[at])}))}))),$t&&(Bt=!0,lt.interaction.startInteraction(nt,$t),(te.id().includes("node")||te.id().includes("link"))&&(Kt=$t)))}})),Kt&&(null===($t=(jt=at)._handleEmphasisElement)||void 0===$t||$t.call(jt,{"item":Kt}))})),at&&Bt&&lt.interaction.reverseEventElement(nt)}else lt.interaction.clearEventElement(nt,!0)}))},i.type="sankey",i.seriesType=nt.SeriesTypeEnum.sankey,i.transformerConstructor=P4,i}(eq),y4=function(){Mc.load(kR),o2(),Tz.registerChart(R4.type,R4)},O4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){var lt,Rt,Bt=nt.prototype._getDefaultSeriesSpec.call(this,at);return Bt.area=at.area,"horizontal"===at.direction?Bt.xField=null!==(lt=at.xField)&&void 0!==lt?lt:[at.minField,at.maxField]:Bt.yField=null!==(Rt=at.yField)&&void 0!==Rt?Rt:[at.minField,at.maxField],Bt.stack=!1,Bt},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e}(rq),D4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=O4,lt.type="rangeArea",lt.seriesType=nt.SeriesTypeEnum.rangeArea,lt}return S(i,at),i.type="rangeArea",i.seriesType=nt.SeriesTypeEnum.rangeArea,i.transformerConstructor=O4,i}(eq),b4=function(){AJ(),Tz.registerChart(D4.type,D4)},F4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["valueField","cell"])},e}(rq),z4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=F4,lt.type="heatmap",lt.seriesType=nt.SeriesTypeEnum.heatmap,lt}return S(i,at),i.type="heatmap",i.seriesType=nt.SeriesTypeEnum.heatmap,i.transformerConstructor=F4,i}(eq),S4=function(){O2(),Tz.registerChart(z4.type,z4)},W4=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","sizeField","sizeRange","centerX","centerY","innerRadius","outerRadius","startAngle","endAngle","ripplePoint","centerPoint","centerLabel","nodePoint"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),U4=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=W4,lt.type="correlation",lt.seriesType=nt.SeriesTypeEnum.correlation,lt}return S(i,at),i.type="correlation",i.seriesType=nt.SeriesTypeEnum.correlation,i.transformerConstructor=W4,i}(eq),M4=function(){Z2(),Tz.registerChart(U4.type,U4)};function T4(nt){var at,lt,Rt=A({},nt);return ot(nt.style)||(Rt.textStyle=HH(nt.style)),ot(nt.textStyle)||gz(Rt.textStyle,HH(nt.textStyle)),(null===(at=nt.shape)||void 0===at?void 0:at.style)&&HH(Rt.shape.style),(null===(lt=nt.background)||void 0===lt?void 0:lt.style)&&HH(Rt.background.style),Rt}var C4=function(nt,at){var lt=[],Rt={},Bt=at.series,Lt=at.seriesField;return Bt().forEach((function(nt){var at=Lt(nt);(at===nt.getSeriesField()?nt.getSeriesInfoList():nt.getSeriesInfoInField(at)).forEach((function(nt){Rt[nt.key]||(Rt[nt.key]=!0,lt.push(nt))}))})),lt},E4=function(nt,at){var lt,Rt,Bt,Lt=at.series,Ht=at.selected,jt=at.field,$t=at.data,Kt=at.customFilter,te=Ht(),ne=$t();if(0===te.length&&ne.length)return[];if(te.length===ne.length)return nt;var re={};te.forEach((function(nt){re[nt]=!0}));var ae=null!==(lt=jt())&&void 0!==lt?lt:qz;return Kt?Kt(nt,te,ae):(X(nt)&&(null===(Rt=nt[0])||void 0===Rt?void 0:Rt.nodes)?(nt[0].nodes=nt[0].nodes.filter((function(nt){return!0===re[nt.key]})),(null===(Bt=nt[0])||void 0===Bt?void 0:Bt.links)&&(nt[0].links=nt[0].links.filter((function(nt){return!0===re[nt.source]&&!0===re[nt.target]})))):N(ae)&&(nt=nt.filter((function(nt){return!0===re[Lt.getSeriesFieldValue(nt,ae)]}))),nt)},X4=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutType="normal",at.layoutZIndex=MU.Legend,at.layoutLevel=TU.Legend,at.specKey="legends",at._orient="left",at._visible=!0,at._position="middle",at._preSelectedData=[],at._selectedData=[],at.effect={"onSelectedDataChange":function(){VO(at._regions,(function(nt){var at;null===(at=nt.getViewData())||void 0===at||at.markRunning()}),{"userId":at._seriesUserId,"specIndex":at._seriesIndex}),VO(at._regions,(function(nt){nt.reFilterViewData()}),{"userId":at._seriesUserId,"specIndex":at._seriesIndex})}},at}return S(e,nt),Object.defineProperty(e.prototype,"orient",{"get":function(){return this._orient},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"visible",{"get":function(){return this._visible},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"position",{"get":function(){return this._position},"enumerable":!1,"configurable":!0}),e.prototype.getLegendData=function(){return this._legendData.getLatestData()},e.prototype.getSelectedData=function(){return this._selectedData},e.prototype.setAttrFromSpec=function(){var at;nt.prototype.setAttrFromSpec.call(this),this._orient=hF(this._spec.orient)?this._spec.orient:"left",this._position=null!==(at=this._spec.position)&&void 0!==at?at:"middle",this._visible=!1!==this._spec.visible;var lt=this._spec,Rt=lt.regionId,Bt=lt.regionIndex,Lt=lt.seriesId,Ht=lt.seriesIndex;N(Lt)&&(this._seriesUserId=xt(Lt)),N(Rt)&&(this._regionUserId=xt(Rt)),N(Ht)&&(this._seriesIndex=xt(Ht)),N(Bt)&&(this._regionUserIndex=xt(Bt)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)},e.prototype.created=function(){nt.prototype.created.call(this),this.initData()},e.prototype.onRender=function(nt){},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return Rt.reRender=!0,(null==at?void 0:at.orient)!==(null==lt?void 0:lt.orient)?(Rt.reMake=!0,Rt):(mt(lt,at)||(Rt.reCompile=!0),Rt)},e.prototype.changeRegions=function(nt){},e.prototype._bindLegendDataChange=function(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData()},e.prototype.initData=function(){var nt=this,at=this._initLegendData();at.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new oY(this._option,at),this._initSelectedData(),VO(this._regions,(function(at){at.event.on(jW.rawDataUpdate,{"filter":function(nt){var lt=nt.model;return(null==lt?void 0:lt.id)===at.id}},(function(){nt._legendData.getDataView().reRunAllTransform()}))}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype.setSelectedData=function(nt){var at,lt,Rt,Bt=this,Lt=this._selectedData;j(nt)||JSON.stringify(Lt)===JSON.stringify(nt)||(VO(this._regions,(function(at){at.legendSelectedFilter&&(nt=at.legendSelectedFilter(Bt,nt))}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),this._selectedData=P([],E(nt),!1),null===(lt=(at=this.effect).onSelectedDataChange)||void 0===lt||lt.call(at),this.event.emit(jW.legendSelectedDataChange,{"model":this}),null===(Rt=this._legendComponent)||void 0===Rt||Rt.setSelected(this._selectedData))},e.prototype.afterSetLayoutStartPoint=function(at){if(nt.prototype.afterSetLayoutStartPoint.call(this,at),this._legendComponent){var lt=at.x,Rt=at.y;Q(lt*Rt)&&this._legendComponent.setAttributes({"x":lt,"y":Rt})}},e.prototype.getBoundsInRect=function(nt,at){var lt=this;if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{"x1":0,"y1":0,"x2":0,"y2":0};var Rt={"x1":this.getLayoutStartPoint().x,"y1":this.getLayoutStartPoint().y,"x2":0,"y2":0},Bt=this._getLegendAttributes(nt);if(Bt.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)mt(Bt,this._cacheAttrs)||this._legendComponent.setAttributes(gz({},Bt,{"defaultSelected":this._selectedData}));else{var Lt=new(this._getLegendConstructor())(gz({},Bt,{"defaultSelected":this._selectedData}));Lt.name="legend",this._legendComponent=Lt,this.getContainer().add(Lt),this._option.disableTriggerEvent||this._initEvent(),Lt.on("*",(function(nt,at){return lt._delegateEvent(lt._legendComponent,nt,at)}))}this._cacheAttrs=Bt;var Ht=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,jt=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){var $t="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",Kt=this._position,te=at.width,ne=at.height,re=0,ae=0;"horizontal"===$t?"middle"===Kt?re=(te-Ht)/2:"end"===Kt&&(re=te-Ht):"middle"===Kt?ae=(ne-jt)/2:"end"===Kt&&(ae=ne-jt),this._legendComponent.setAttributes({"dx":re,"dy":ae})}return Rt.x2=Rt.x1+Ht,Rt.y2=Rt.y1+jt,Rt},e.prototype.onDataUpdate=function(){var nt,at,lt;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){var Rt=this._getLegendAttributes(this.getLayoutRect());mt(Rt,this._cacheAttrs)||this._legendComponent.setAttributes(gz({},Rt,{"defaultSelected":this._selectedData}))}null===(at=(nt=this.effect).onSelectedDataChange)||void 0===at||at.call(nt),null===(lt=this.getChart())||void 0===lt||lt.setLayoutTag(!0,null,!1),this.event.emit(jW.legendSelectedDataChange,{"model":this})}},e.prototype._getNeedClearVRenderComponents=function(){return[this._legendComponent]},e.prototype.clear=function(){nt.prototype.clear.call(this),this._cacheAttrs=null,this._preSelectedData=null},e.specKey="legends",e}(s$),$4=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.discreteLegend,at.name=lt.discreteLegend,at}return S(e,nt),e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return!nt.type||"discrete"===nt.type}))},e.prototype.init=function(at){var lt=this;nt.prototype.init.call(this,at),VO(this._regions,(function(nt){nt.addViewDataFilter({"type":"discreteLegendFilter","options":{"series":nt,"selected":function(){return lt._selectedData},"field":function(){return lt._getSeriesLegendField(nt)},"data":function(){return lt.getLegendDefaultData()},"customFilter":lt._spec.customFilter},"level":vU.legendFilter})}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype._initLegendData=function(){var nt=this;GW(this._option.dataSet,"discreteLegendFilter",E4),GW(this._option.dataSet,"discreteLegendDataMake",C4);var at=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_data")});return at.transform({"type":"discreteLegendDataMake","options":{"series":function(){var at=[];return VO(nt._regions,(function(nt){at.push(nt)}),{"specIndex":nt._spec.seriesIndex,"userId":nt._spec.seriesId}),at},"seriesField":function(at){return nt._getSeriesLegendField(at)}}}),at},e.prototype._getSeriesLegendField=function(nt){var at,lt,Rt,Bt=nt.getSeriesField(),Lt=null!==(at=this._spec.scaleName)&&void 0!==at?at:this._spec.scale;if(j(Lt))return Bt;if(!nt.getRawData())return Bt;var Ht=this._option.globalScale.getScaleSpec(Lt);if(!Ht)return Bt;if(this._spec.field)return this._spec.field;if(!Gk(Ht.domain))return Bt;var jt=Ht.domain.find((function(at){return at.dataId===nt.getRawData().name}));return jt&&null!==(Rt=null===(lt=jt.fields)||void 0===lt?void 0:lt[0])&&void 0!==Rt?Rt:Bt},e.prototype._initSelectedData=function(){var nt=this,at=this.getLegendDefaultData();if(this._unselectedData){var lt=[],Rt=[];at.forEach((function(at){nt._unselectedData.includes(at)?Rt.push(at):lt.push(at)})),this._selectedData=lt,this._unselectedData=Rt}else this._spec.defaultSelected?this._selectedData=P([],E(this._spec.defaultSelected),!1):this._selectedData=at},e.prototype.getLegendDefaultData=function(nt){return H(this._spec.data)?this._getLegendItems().map((function(nt){return nt.label})):this._legendData.getLatestData().map(nt?function(nt){return nt.originalKey}:function(nt){return nt.key})},e.prototype._addDefaultTitleText=function(nt){var at,lt,Rt,Bt;if((null===(at=nt.title)||void 0===at?void 0:at.visible)&&j(nt.title.text)&&j(null===(lt=nt.title.style)||void 0===lt?void 0:lt.text)){var Lt=null===(Bt=null===(Rt=this._regions)||void 0===Rt?void 0:Rt[0])||void 0===Bt?void 0:Bt.getSeries()[0];if(!Lt)return;nt.title.text=uH(Lt.getRawData(),Lt.getSeriesField())}},e.prototype._getLegendAttributes=function(nt){var at="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",lt=A(A({"layout":at,"items":this._getLegendItems(),"zIndex":this.layoutZIndex},function(nt,at){var lt=nt.title,Rt=void 0===lt?{}:lt,Bt=nt.item,Lt=void 0===Bt?{}:Bt,Ht=nt.pager,jt=void 0===Ht?{}:Ht,$t=nt.background,Kt=void 0===$t?{}:$t;nt.type,nt.id,nt.visible,nt.orient,nt.position,nt.data,nt.filter,nt.regionId,nt.regionIndex,nt.seriesIndex,nt.seriesId,nt.padding;var te=w(nt,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return Rt.visible&&(te.title=T4(Rt)),ot(Lt.focusIconStyle)||HH(Lt.focusIconStyle),Lt.shape&&(Lt.shape=OH(Lt.shape)),Lt.label&&(Lt.label=OH(Lt.label)),Lt.value&&(Lt.value=OH(Lt.value)),Lt.background&&(Lt.background=OH(Lt.background)),dF(Lt.maxWidth)&&(Lt.maxWidth=Number(Lt.maxWidth.substring(0,Lt.maxWidth.length-1))*at.width/100),dF(Lt.width)&&(Lt.width=Number(Lt.width.substring(0,Lt.width.length-1))*at.width/100),dF(Lt.height)&&(Lt.height=Number(Lt.height.substring(0,Lt.height.length-1))*at.width/100),te.item=Lt,"scrollbar"===jt.type?(ot(jt.railStyle)||HH(jt.railStyle),ot(jt.sliderStyle)||HH(jt.sliderStyle)):(ot(jt.textStyle)||HH(jt.textStyle),jt.handler&&OH(jt.handler)),te.pager=jt,Kt.visible&&!ot(Kt.style)&&(gz(te,Kt.style),N(Kt.padding)&&(te.padding=Kt.padding)),te}(this._spec,nt)),{"maxWidth":nt.width,"maxHeight":nt.height});return this._addDefaultTitleText(lt),this._addLegendItemFormatMethods(lt),lt},e.prototype._getLegendConstructor=function(){return oL},e.prototype.setSelectedData=function(at){at&&(this._unselectedData=this.getLegendDefaultData().filter((function(nt){return!at.includes(nt)}))),nt.prototype.setSelectedData.call(this,at)},e.prototype._initEvent=function(){var nt=this;if(this._legendComponent){var at=!1!==this._spec.filter;this._legendComponent.addEventListener(UD.legendItemClick,(function(lt){var Rt=st(lt,"detail.currentSelected");at&&nt.setSelectedData(Rt),nt.event.emit(jW.legendItemClick,{"model":nt,"value":Rt,"event":lt})})),this._legendComponent.addEventListener(UD.legendItemHover,(function(at){var lt=st(at,"detail");nt.event.emit(jW.legendItemHover,{"model":nt,"value":lt,"event":at})})),this._legendComponent.addEventListener(UD.legendItemUnHover,(function(at){var lt=st(at,"detail");nt.event.emit(jW.legendItemUnHover,{"model":nt,"value":lt,"event":at})}))}},e.prototype._getLegendItems=function(){var nt=(this._legendData.getLatestData()||[]).map((function(nt){var at,lt,Rt=nt.style("fillOpacity"),Bt=nt.style("strokeOpacity"),Lt=nt.style("opacity"),Ht=nt.style("texture");return{"label":nt.key,"shape":{"symbolType":null!==(lt=null!==(at=nt.style("symbolType"))&&void 0!==at?at:nt.shapeType)&&void 0!==lt?lt:"circle","fillOpacity":Q(Rt)?Rt:1,"strokeOpacity":Q(Bt)?Bt:1,"opacity":Q(Lt)?Lt:1,"texturePadding":Ht?1:null,"textureSize":Ht?4:null,"texture":Ht,"fill":nt.style("fill"),"stroke":nt.style("stroke"),"textureColor":nt.style("textureColor"),"innerBorder":nt.style("innerBorder"),"outerBorder":nt.style("outerBorder"),"lineDash":nt.style("lineDash"),"lineDashOffset":nt.style("lineDashOffset"),"lineWidth":nt.style("lineWidth")}}}));return H(this._spec.data)?this._spec.data(nt,this._option.globalScale.getScale("color"),this._option.globalScale):nt},e.prototype._addLegendItemFormatMethods=function(nt){var at,lt,Rt,Bt,Lt=null!==(lt=null===(at=this._spec.item)||void 0===at?void 0:at.label)&&void 0!==lt?lt:{},Ht=Lt.formatMethod,jt=Lt.formatter,$t=null!==(Bt=null===(Rt=this._spec.item)||void 0===Rt?void 0:Rt.value)&&void 0!==Bt?Bt:{},Kt=$t.formatMethod,te=$t.formatter,ne=vY(Ht,jt).formatFunc;jt&&!Ht&&ne&&(nt.item.label.formatMethod=function(nt,at){return ne(nt,at,jt)});var re=vY(Kt,te).formatFunc;te&&!Kt&&re&&(nt.item.value.formatMethod=function(nt,at){return re(te,nt,at,jt)})},e.specKey="legends",e.type=lt.discreteLegend,e}(X4),B4=function(){Tz.registerComponent($4.type,$4)},I4=function(nt,at){var lt=at.series,Rt=at.field,Bt=at.scale,Lt=Rt();if(Rt&&Lt){var Ht=1/0,jt=-1/0;return lt().forEach((function(nt){var at=nt.getRawDataStatisticsByField(Lt,!0),lt=null==at?void 0:at.min,Rt=null==at?void 0:at.max;Q(lt)&&(Ht=Math.min(lt,Ht)),Q(Rt)&&(jt=Math.max(Rt,jt))})),[Ht,jt]}if(Bt){var $t=Bt();return $t?$t.domain():[]}return[]},L4=function(nt,at){var lt=at.selected,Rt=at.field,Bt=at.data,Lt=at.isHierarchyData,Ht=at.customFilter,jt=lt(),$t=Rt(),Kt=Lt||function(nt){return nt&&nt.some((function(nt){return nt&&(void 0===lt&&(lt="children"),!!V(at=nt)&&!!at.hasOwnProperty(lt)&&Array.isArray(at[lt]));var at,lt}))};if(jt===Bt())return nt;if($t&&!ot(jt)){var te=E(jt,2),ne=te[0],re=te[1];return Ht?Ht(nt,jt,$t):Kt(nt)?DH(nt,+ne,+re,$t):nt.filter((function(nt){return nt[$t]>=ne&&nt[$t]<=re}))}return nt},Z4={"color":dL,"size":bL},Q4=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],J4=[2,10],t8=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;Bt.type=lt.colorLegend,Bt.name=lt.colorLegend;var Lt="color"===Bt._spec.type?lt.colorLegend:lt.sizeLegend;return Bt.type=Lt,Bt.name=Lt,Bt}return S(e,nt),e.getSpecInfo=function(nt){var at=gY(nt,this.specKey,this.type,(function(nt){return"color"===(at=nt.type)||"size"===at;var at}));return at&&at.forEach((function(nt){nt.type="color"===nt.spec.type?lt.colorLegend:lt.sizeLegend})),at},e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),this._field=this._spec.field,this._legendType=this._spec.type},e.prototype.init=function(at){var lt=this;nt.prototype.init.call(this,at),VO(this._regions,(function(nt){nt.addViewDataFilter({"type":"continuousLegendFilter","options":{"selected":function(){return lt._selectedData},"field":function(){return lt._field},"data":function(){return lt._legendData.getLatestData()},"isHierarchyData":nt.isHierarchyData,"customFilter":lt._spec.customFilter},"level":vU.legendFilter})}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex})},e.prototype._getScaleInGlobal=function(){var nt=this._option.globalScale,at=this._spec.scale;return at||(at=this._legendType),nt.getScale(at)},e.prototype._initLegendData=function(){var nt=this;GW(this._option.dataSet,"continuousLegendFilter",L4),GW(this._option.dataSet,"continuousLegendDataMake",I4);var at=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_data")});return at.transform({"type":"continuousLegendDataMake","options":{"series":function(){return GO(nt._regions,{"userId":nt._seriesUserId,"specIndex":nt._seriesIndex})},"field":function(){return nt._field},"scale":this._getScaleInGlobal.bind(this)}}),at},e.prototype._initSelectedData=function(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()},e.prototype._addDefaultTitleText=function(nt){var at,lt,Rt,Bt;if((null===(at=nt.title)||void 0===at?void 0:at.visible)&&j(nt.title.text)&&j(null===(lt=nt.title.style)||void 0===lt?void 0:lt.text)){var Lt=this._field;if(Lt){var Ht=null===(Bt=null===(Rt=this._regions)||void 0===Rt?void 0:Rt[0])||void 0===Bt?void 0:Bt.getSeries()[0];if(!Ht)return;return void(nt.title.text=uH(Ht.getRawData(),Lt))}var jt=this._spec.scale;jt||(jt=this._legendType);var $t=this._option.globalScale.getScaleSpec(jt);if(!Gk(null==$t?void 0:$t.domain))return;var Kt=$t.domain[0];if(0===Kt.fields.length)return;nt.title.text=uH(this._option.dataSet.getDataView(Kt.dataId),Kt.fields[0])}},e.prototype._getLegendAttributes=function(nt){var at,lt,Rt,Bt="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",Lt="horizontal"===Bt?"bottom":this.layoutOrient,Ht=[],jt=this._getScaleInGlobal();jt&&"linear"===jt.type&&(Ht=jt.range()),ot(Ht)&&(Ht="color"===this._legendType?Q4:J4);var $t=null!==(lt=this._legendData.getLatestData()[0])&&void 0!==lt?lt:0,Kt=null!==(Rt=this._legendData.getLatestData()[1])&&void 0!==Rt?Rt:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&($t=Math.min(0,this._legendData.getLatestData()[0]),Kt=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));var te=A(((at={"layout":Bt,"align":Lt,"zIndex":this.layoutZIndex,"min":$t,"max":Kt,"value":this._spec.defaultSelected})["color"===this._legendType?"colors":"sizeRange"]=Ht,at),function(nt){var at=gz({},nt),lt=at.title,Rt=void 0===lt?{}:lt,Bt=at.handler,Lt=void 0===Bt?{}:Bt,Ht=at.rail,jt=void 0===Ht?{}:Ht,$t=at.track,Kt=void 0===$t?{}:$t,te=at.startText,ne=at.endText,re=at.handlerText,ae=at.sizeBackground,oe=at.background,se=void 0===oe?{}:oe;at.type,at.id,at.visible,at.orient,at.position,at.data,at.defaultSelected,at.field,at.filter,at.regionId,at.regionIndex,at.seriesIndex,at.seriesId,at.padding;var le=w(at,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return Rt.visible&&(le.title=T4(Rt)),le.showHandler=!1!==Lt.visible,ot(Lt.style)||(le.handlerStyle=HH(Lt.style)),N(jt.width)&&(le.railWidth=jt.width),N(jt.height)&&(le.railHeight=jt.height),ot(jt.style)||(le.railStyle=HH(jt.style)),ot(Kt.style)||(le.trackStyle=HH(Kt.style)),le.startText=OH(te),le.endText=OH(ne),le.handlerText=OH(re),ot(ae)||(le.sizeBackground=HH(ae)),se.visible&&!ot(se.style)&&(gz(le,se.style),N(se.padding)&&(le.padding=se.padding)),le}(this._spec));return this._addDefaultTitleText(te),te},e.prototype._getLegendConstructor=function(){return Z4[this._legendType]},e.prototype._initEvent=function(){var nt=this;if(this._legendComponent){var at=!1!==this._spec.filter;this._legendComponent.addEventListener("change",qt((function(lt){var Rt=st(lt,"detail.value");at&&nt.setSelectedData(Rt),nt.event.emit(jW.legendFilter,{"model":nt,"value":Rt,"event":lt})}),30))}},e.specKey="legends",e.type=lt.continuousLegend,e}(X4),H4=function(){Tz.registerComponent(t8.type,t8)},j4=function(nt,at){return N(at)?nt.map((function(nt){return at[nt]})):void 0},N4=function(nt,at){return function(lt){return nt.every((function(nt,Rt){return lt[nt]===(null==at?void 0:at[Rt])}))}},V4=function(nt){return!j(nt)&&(X(nt)?nt.length>0&&nt.every(N):Object.keys(nt).length>0)};function G4(nt,at,lt){var Rt,Bt,Lt,Ht=A({"regionIndex":0},at),jt=lt.getOption(),$t=jt.getRegionsInUserIdOrIndex(N(Ht.regionId)?[Ht.regionId]:void 0,N(Ht.regionIndex)?[Ht.regionIndex]:void 0)[0];if(!$t)return"none";var Kt,te=Y4(nt,$t),ne=null!==(Rt=Ht.activeType)&&void 0!==Rt?Rt:te.length>1?"dimension":"mark",re=$t.getLayoutStartPoint(),ae=$t.getLayoutRect(),oe=jt.globalInstance.getContainer(),se=A({"x":0,"y":0},oe?{"x":(Kt=oe.getBoundingClientRect()).x,"y":Kt.y}:{}),g=function(nt){var at,lt=nt.data,Rt=lt.dimensionFields,Bt=lt.dimensionData,Lt=lt.measureFields,Ht=lt.measureData,jt=lt.groupField,$t=lt.groupData;return null===(at=nt.series.getViewData())||void 0===at?void 0:at.latestData.find((function(nt){return N4(Rt,Bt)(nt)&&N4(Lt,Ht)(nt)&&(j(jt)||N4([jt],[$t])(nt))}))},y=function(nt){var at,lt,Rt=function(nt){return{"x":Math.min(Math.max(nt.x,0),ae.width),"y":Math.min(Math.max(nt.y,0),ae.height)}}(nt),Bt=null!==(at=Ht.x)&&void 0!==at?at:re.x+Rt.x,Lt=null!==(lt=Ht.y)&&void 0!==lt?lt:re.y+Rt.y;return{"canvasX":Bt,"canvasY":Lt,"clientX":se.x+Bt,"clientY":se.y+Lt}};if("dimension"===ne){var le=te[0];if(!le)return"none";var ue=new Map;te.forEach((function(nt){var at;ue.has(nt.series)||ue.set(nt.series,[]),null===(at=ue.get(nt.series))||void 0===at||at.push(nt)}));var ce=[{"value":nt[le.data.dimensionFields[0]],"data":P([],E(ue.keys()),!1).map((function(nt){var at,lt;return{"series":nt,"datum":null!==(lt=null===(at=ue.get(nt))||void 0===at?void 0:at.map((function(nt){return g(nt)})))&&void 0!==lt?lt:[]}}))}];N(le.dimType)&&(ce[0].position=le.pos[le.dimType],ce[0].dimType=le.dimType);var he={"changePositionOnly":!1,"action":"enter","tooltip":null,"dimensionInfo":ce,"chart":null!==(Bt=jt.globalInstance.getChart())&&void 0!==Bt?Bt:void 0,"datum":void 0,"model":void 0,"source":NW.chart,"event":y({"x":te.reduce((function(nt,at){return nt+at.pos.x}),0)/te.length,"y":te.reduce((function(nt,at){return nt+at.pos.y}),0)/te.length}),"item":void 0,"itemMap":new Map};lt.processor.dimension.showTooltip(ce,he,!1);var de=jt.globalInstance;return BY.globalConfig.uniqueTooltip&&BY.hideTooltip(de.id),ne}if("mark"===ne){var fe=te[0];if(!fe)return"none";var pe=A(A({},g(fe)),nt),ve=[{"datum":[pe],"series":fe.series}];return he={"changePositionOnly":!1,"tooltip":null,"dimensionInfo":ce=[{"value":pe[fe.data.dimensionFields[0]],"data":ve}],"chart":null!==(Lt=jt.globalInstance.getChart())&&void 0!==Lt?Lt:void 0,"datum":pe,"model":fe.series,"source":NW.chart,"event":y(fe.pos),"item":void 0,"itemMap":new Map},lt.processor.mark.showTooltip({"datum":pe,"mark":null,"series":fe.series},he,!1),de=jt.globalInstance,BY.globalConfig.uniqueTooltip&&BY.hideTooltip(de.id),ne}return"none"}var e8,i8,Y4=function(at,lt){var Rt=lt.getSeries(),Bt=[];return Rt.forEach((function(lt){var Rt,Lt,Ht,jt,$t,Kt,te,ne=lt.getDimensionField(),re=lt.getMeasureField(),ae=lt.getSeriesField(),oe=N(ae)?at[ae]:void 0,se=N(ae)&&null!==(jt=null===(Ht=null===(Lt=null===(Rt=lt.getViewDataStatistics)||void 0===Rt?void 0:Rt.call(lt))||void 0===Lt?void 0:Lt.latestData[ae])||void 0===Ht?void 0:Ht.values)&&void 0!==jt?jt:[],le=j4(ne,at),ue=j4(re,at),ce=V4(ue),he=!ce&&N(ae)&&j(oe)&&se.length>0,b=function(){var at,Rt=null===(at=lt.getViewData())||void 0===at?void 0:at.latestData.find(N4(ne,le));if(ce||(ue=j4(re,Rt),V4(ue))){var Lt=lt.type===nt.SeriesTypeEnum.pie?lt.dataToCentralPosition(Rt):lt.dataToPosition(Rt);j(Lt)||isNaN(Lt.x)||isNaN(Lt.y)||Bt.push({"pos":Lt,"data":{"dimensionFields":ne,"dimensionData":le,"measureFields":re,"measureData":ue,"hasMeasureData":ce,"groupField":ae,"groupData":oe},"series":lt})}};if("cartesian"===lt.coordinate){var de=lt,fe=HB(null===(Kt=null===($t=lt.getYAxisHelper())||void 0===$t?void 0:$t.getScale(0))||void 0===Kt?void 0:Kt.type)?"y":"x",pe=ne.map((function(nt,at){return[nt,at]})).filter((function(nt){var at=E(nt,2)[1];return j(null==le?void 0:le[at])})),ve=[null!=le?le:[]];pe.length>0&&pe.forEach((function(nt){var at,Rt,Bt,Lt,Ht=E(nt,2),jt=Ht[0],$t=Ht[1],Kt=null!==(Lt=null===(Bt=null===(Rt=null===(at=lt.getViewDataStatistics)||void 0===at?void 0:at.call(lt))||void 0===Rt?void 0:Rt.latestData[jt])||void 0===Bt?void 0:Bt.values)&&void 0!==Lt?Lt:[],te=[];ve.forEach((function(nt){Kt.forEach((function(at){var lt,Rt=null!==(lt=null==nt?void 0:nt.slice())&&void 0!==lt?lt:[];Rt[$t]=at,te.push(Rt)}))})),ve=te})),ve.forEach((function(nt){var at,Rt;if(he){var Lt=null===(at=de.getViewData())||void 0===at?void 0:at.latestData.filter(N4(ne,nt));se.forEach((function(at){var Rt=Lt.find((function(nt){return nt[ae]===at}));if(ue=j4(re,Rt),V4(ue)){var Ht=de.dataToPosition(Rt);j(Ht)||isNaN(Ht.x)||isNaN(Ht.y)||Bt.push({"pos":Ht,"data":{"dimensionFields":ne,"dimensionData":nt,"measureFields":re,"measureData":ue,"hasMeasureData":ce,"groupField":ae,"groupData":at},"series":lt,"dimType":fe})}}))}else{var Ht=null===(Rt=de.getViewData())||void 0===Rt?void 0:Rt.latestData.find(N4(ne,nt));if(!ce&&(ue=j4(re,Ht),!V4(ue)))return;var jt=de.dataToPosition(Ht);if(j(jt)||isNaN(jt.x)||isNaN(jt.y))return;Bt.push({"pos":jt,"data":{"dimensionFields":ne,"dimensionData":nt,"measureFields":re,"measureData":ue,"hasMeasureData":ce,"groupField":ae,"groupData":oe},"dimType":fe,"series":lt})}}))}else if("polar"===lt.coordinate)if(lt.type===nt.SeriesTypeEnum.pie)b();else{var Ae=lt;if(he){var we=(null===(te=Ae.getViewData())||void 0===te?void 0:te.latestData.filter(N4(ne,le))).find((function(nt){return nt[ae]===oe}));se.forEach((function(nt){if(ue=j4(re,we),V4(ue)){var at=Ae.dataToPosition(we);j(at)||isNaN(at.x)||isNaN(at.y)||Bt.push({"pos":at,"data":{"dimensionFields":ne,"dimensionData":le,"measureFields":re,"measureData":ue,"hasMeasureData":ce,"groupField":ae,"groupData":nt},"series":lt})}}))}else b()}else"geo"===lt.coordinate&&b()})),Bt},a8=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],K4=function(nt,at,lt,Rt,Bt){var Lt,Ht,jt,$t={"activeType":nt};switch(nt){case"mark":case"group":if(lt){var Kt=null===(Lt=lt.getSpec())||void 0===Lt?void 0:Lt.tooltip;return $t.visible=!0,(null==Kt?void 0:Kt.handler)&&($t.handler=Kt.handler),(null===(Ht=$t.handler)||void 0===Ht?void 0:Ht.showTooltip)?$t:((null==Kt?void 0:Kt[nt])&&a8.forEach((function(at){N(Kt[nt][at])&&($t[at]=Kt[nt][at])})),A(A({},$t),lt.tooltipHelper.getTooltipData(nt,at,Rt,Rt[0].datum,Bt)))}break;case"dimension":if(null==Rt?void 0:Rt.length){if(q4(Rt).every((function(nt){var at;return!_Y("dimension",null===(at=nt.tooltipHelper)||void 0===at?void 0:at.spec)}))?$t.visible=!1:$t.visible=!0,$t.handler=at.handler,null===(jt=$t.handler)||void 0===jt?void 0:jt.showTooltip)return $t;var te=[];return Rt.forEach((function(lt){return lt.data.forEach((function(lt){var Lt=lt.series.tooltipHelper.getTooltipData(nt,at,Rt,lt.datum,Bt);Lt&&te.push(Lt)}))})),function(nt){if(!nt||!nt.length)return null;var at=[];return nt.forEach((function(nt){var lt=nt.content;lt&&lt.forEach((function(nt){at.push(nt)}))})),at.length?A(A({},nt[0]),{"content":at}):nt[0]}(te)}}return null},q4=function(nt){var at=[];return nt.forEach((function(nt){nt.data.forEach((function(nt){N(nt.series)&&at.push(nt.series)}))})),at},o8={"dom":"".concat(OF,"_TOOLTIP_HANDLER_DOM"),"canvas":"".concat(OF,"_TOOLTIP_HANDLER_CANVAS")},l8={"key":"","value":"..."},u8=["group","mark","dimension"],v8=function(){function t(nt){var at=this;this._showTooltipByHandler=function(nt,lt){var Rt,Bt,Lt;if(j(nt))return 1;lt.changePositionOnly||at.clearCache(),at._updateViewSpec(nt,lt);var Ht=at._cacheActiveSpec;if(j(Ht)||!1===Ht.visible)return 1;lt.tooltipSpec=at.component.getSpec(),lt.activeTooltipSpec=Ht;var jt,$t=Ht.title,Kt=Ht.content,te=j(null==$t?void 0:$t.key)&&j(null==$t?void 0:$t.value)&&!(null==Kt?void 0:Kt.length);return at.component.event.emit(jW.tooltipShow,A(A({},lt),{"isEmptyTooltip":te,"tooltipData":nt,"activeType":at.activeType,"tooltip":at.component})),te?1:((null===(Rt=Ht.handler)||void 0===Rt?void 0:Rt.showTooltip)?jt=Ht.handler.showTooltip.bind(Ht.handler):(null===(Bt=at.component.tooltipHandler)||void 0===Bt?void 0:Bt.showTooltip)&&(jt=at.component.tooltipHandler.showTooltip.bind(at.component.tooltipHandler)),jt?null!==(Lt=jt(at.activeType,nt,lt))&&void 0!==Lt?Lt:0:1)},this.component=nt}return t.prototype._preprocessDimensionInfo=function(nt){var at=[];if(null==nt||nt.forEach((function(nt){var lt=A(A({},nt),{"data":nt.data.filter((function(nt){var at,lt;return!1!==(null===(lt=null===(at=nt.series.getSpec())||void 0===at?void 0:at.tooltip)||void 0===lt?void 0:lt.visible)}))});lt.data.length>0&&at.push(lt)})),at.length>0)return at},t.prototype._updateViewSpec=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne=at.changePositionOnly,re=at.model;if(!ne||!this._cacheActiveSpec){var ae=this.component.getSpec();if(this._cacheActiveSpec=K4(this.activeType,this.component.getSpec(),re,nt,at),this._cacheActiveSpec){j(this._cacheActiveSpec.handler)&&N(ae.handler)&&(this._cacheActiveSpec.handler=ae.handler);var oe=null!==(lt=ae[this.activeType])&&void 0!==lt?lt:{},se=null!==(Rt=this._cacheActiveSpec.updateTitle)&&void 0!==Rt?Rt:oe.updateTitle,le=null!==(Bt=this._cacheActiveSpec.updateContent)&&void 0!==Bt?Bt:oe.updateContent,ue=null!==(Ht=null!==(Lt=this._cacheActiveSpec.maxLineCount)&&void 0!==Lt?Lt:oe.maxLineCount)&&void 0!==Ht?Ht:20;if(se&&(this._cacheActiveSpec.title=null!==(jt=se(this._cacheActiveSpec.title,nt,at))&&void 0!==jt?jt:this._cacheActiveSpec.title),le)this._cacheActiveSpec.content=null!==($t=le(this._cacheActiveSpec.content,nt,at))&&void 0!==$t?$t:this._cacheActiveSpec.content;else if(ue>=1&&(null===(Kt=this._cacheActiveSpec.content)||void 0===Kt?void 0:Kt.length)>ue){var ce=null!==(te=this._cacheActiveSpec.othersLine)&&void 0!==te?te:oe.othersLine,he=ce?A(A({},l8),ce):l8;this._cacheActiveSpec.content=P(P([],E(this._cacheActiveSpec.content.slice(0,ue-1)),!1),[A(A({},this._cacheActiveSpec.content[ue-1]),he)],!1)}}}},t.prototype.shouldHandleTooltip=function(nt,at){var lt,Rt;return!j(at)&&_Y(this.activeType,null===(Rt=null===(lt=nt.model)||void 0===lt?void 0:lt.tooltipHelper)||void 0===Rt?void 0:Rt.spec)},t.prototype.clearCache=function(){this._cacheActiveSpec=void 0},t}(),y8=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.activeType="dimension",at}return S(e,nt),e.prototype.showTooltip=function(nt,at,lt){var Rt=A(A({},at),{"dimensionInfo":this._preprocessDimensionInfo(nt),"changePositionOnly":lt,"tooltip":this.component});return this._showTooltipByHandler(nt,Rt)},e.prototype._getDimensionInfo=function(nt){var at,lt,Rt,Bt=this.component.getChart(),Lt=Bt.getCompiler().getStage().getLayer(void 0),Ht={"x":nt.event.viewX,"y":nt.event.viewY};if(Lt.globalTransMatrix.transformPoint({"x":nt.event.viewX,"y":nt.event.viewY},Ht),0===(Rt=P(P([],E(null!==(at=BW(Bt,Ht,!0))&&void 0!==at?at:[]),!1),E(null!==(lt=mW(Bt,Ht))&&void 0!==lt?lt:[]),!1)).length)Rt=void 0;else if(Rt.length>1){var jt=Rt.filter((function(nt){var at,lt,Rt,Bt,Lt,Ht,jt=nt.axis;if(jt.getSpec().hasDimensionTooltip)return!0;if(!HB(jt.getScale().type))return!1;try{for(var $t=C(null!==(Lt=null==jt?void 0:jt.getRegions())&&void 0!==Lt?Lt:[]),Kt=$t.next();!Kt.done;Kt=$t.next()){var te=Kt.value;try{for(var ne=(Rt=void 0,C(te.getSeries())),re=ne.next();!re.done;re=ne.next()){var ae=re.value;if("cartesian"===ae.coordinate){Ht=ae;break}}}catch(nt){Rt={"error":nt}}finally{try{re&&!re.done&&(Bt=ne.return)&&Bt.call(ne)}finally{if(Rt)throw Rt.error}}if(N(Ht))break}}catch(nt){at={"error":nt}}finally{try{Kt&&!Kt.done&&(lt=$t.return)&&lt.call($t)}finally{if(at)throw at.error}}return N(Ht)&&Ht.getDimensionField()[0]===Ht.fieldY[0]?"left"===jt.getOrient()||"right"===jt.getOrient():"bottom"===jt.getOrient()||"top"===jt.getOrient()}));if((Rt=jt.length?jt:Rt.slice(0,1)).length>1){var $t=new Set;Rt.forEach((function(nt){nt.data=nt.data.filter((function(nt){var at=nt.key;return!$t.has(at)&&($t.add(at),!0)}))}))}}return Rt},e.prototype.getMouseEventData=function(nt){return{"tooltipInfo":this._getDimensionInfo(nt),"ignore":!1}},e}(v8),k8=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.activeType="mark",at}return S(e,nt),e.prototype.showTooltip=function(nt,at,lt){var Rt,Bt,Lt,Ht=nt.datum,jt=nt.series,$t=this.component.getSpec(),Kt=[{"datum":[Ht],"series":jt}],te=jt.tooltipHelper,ne=null===(Rt=jt.getSpec())||void 0===Rt?void 0:Rt.tooltip,re=null===(Bt=null==ne?void 0:ne.mark)||void 0===Bt?void 0:Bt.checkOverlap,ae=!1;if(!0===re||!0===(null===(Lt=$t.mark)||void 0===Lt?void 0:Lt.checkOverlap)&&!1!==re){var oe=null==te?void 0:te.activeTriggerSet.mark;if(oe){ae=!0;var se=this.component.getChart().getCompiler().getStage().getLayer(void 0),le={"x":at.event.viewX,"y":at.event.viewY};se.globalTransMatrix.transformPoint({"x":at.event.viewX,"y":at.event.viewY},le),oe.forEach((function(nt){nt.getProductElements().forEach((function(nt){var lt=nt.getGraphicItem();nt!==at.item&&lt&&lt.containsPoint(le.x,le.y,Ml.GLOBAL,lt.stage.getPickerService())&&Kt[0].datum.push(nt.getDatum())}))}))}}var ue=A(A({},at),{"model":jt,"changePositionOnly":lt,"tooltip":this.component});if(lt&&ae){var ce=this._cacheActiveSpec&&this._cacheActiveSpec.data;ce&&ce[0].series===Kt[0].series&&ce[0].datum.length===Kt[0].datum.length&&!ce[0].datum.some((function(nt,at){return nt!==Kt[0].datum[at]}))||(ue.changePositionOnly=!1)}return this._showTooltipByHandler(Kt,ue)},e.prototype.getMouseEventData=function(nt){var at,lt,Rt,Bt=null===(at=nt.model)||void 0===at?void 0:at.modelType;if("series"===Bt){var Lt=null==(Kt=(ae=nt.model).tooltipHelper)?void 0:Kt.activeTriggerSet.mark,Ht=null==Kt?void 0:Kt.ignoreTriggerSet.mark;(null==Lt?void 0:Lt.has(nt.mark))?lt={"mark":nt.mark,"datum":nt.datum,"series":ae}:(null==Ht?void 0:Ht.has(nt.mark))&&(Rt=!0)}else if("component"===Bt){var jt=nt.model,$t=nt.node;if("label"===jt.name&&$t){var Kt,te=jt.getLabelInfoByTextGraphic($t),ne=null!=te?te:{},re=ne.baseMark,ae=ne.series,oe=ne.labelMark;Lt=null==(Kt=ae.tooltipHelper)?void 0:Kt.activeTriggerSet.mark,Ht=null==Kt?void 0:Kt.ignoreTriggerSet.mark,(null==Lt?void 0:Lt.has(oe))?lt={"mark":re,"datum":$t.attribute.data,"series":ae}:(null==Ht?void 0:Ht.has(oe))&&(Rt=!0)}}return{"tooltipInfo":lt,"ignore":Rt}},e}(v8),S8=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.activeType="group",at}return S(e,nt),e.prototype.showTooltip=function(nt,at,lt){var Rt=nt.datum,Bt=nt.series,Lt=[{"datum":xt(Rt),"series":Bt}],Ht=A(A({},at),{"groupDatum":this._getGroupDatum(at),"changePositionOnly":lt,"tooltip":this.component});return this._showTooltipByHandler(Lt,Ht)},e.prototype.getMouseEventData=function(nt){var at,lt,Rt;if("series"===(null===(at=nt.model)||void 0===at?void 0:at.modelType)){var Bt=nt.model,Lt=Bt.tooltipHelper,Ht=null==Lt?void 0:Lt.activeTriggerSet.group;if(null==Ht?void 0:Ht.has(nt.mark)){var jt=this.component.getSpec()[this.activeType];((null==jt?void 0:jt.triggerMark)?xt(jt.triggerMark):[]).includes(null===(lt=nt.mark)||void 0===lt?void 0:lt.name)&&(Rt={"mark":nt.mark,"datum":nt.datum,"series":Bt})}}return{"tooltipInfo":Rt,"ignore":!1}},e.prototype._getGroupDatum=function(nt){var at=nt.model,lt=nt.mark,Rt=nt.datum,Bt=at;if(["line","area"].includes(lt.type))return xt(Rt);var Lt=Bt.getViewData().latestData,Ht=Bt.getSeriesField();if(!Ht)return Lt;var jt=xt(Rt)[0][Ht];return Lt.filter((function(nt){return nt[Ht]===jt}))},e}(v8),n8=function(nt){return N(nt)&&!X(nt)},r8=function(nt){return N(nt)&&X(nt)},A8=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._shouldMergeThemeToSpec=function(){return!1},e.prototype._initTheme=function(at,lt){var Rt,Bt=nt.prototype._initTheme.call(this,at,lt),Lt=Bt.spec,Ht=Bt.theme;return Lt.style=gz({},this._theme,Lt.style),Lt.offset=gz({},Ht.offset,at.offset),Lt.transitionDuration=null!==(Rt=at.transitionDuration)&&void 0!==Rt?Rt:Ht.transitionDuration,{"spec":Lt,"theme":Ht}},e.prototype._transformSpecAfterMergingTheme=function(at,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te;nt.prototype._transformSpecAfterMergingTheme.call(this,at,lt,Rt),at.visible=null===(Bt=at.visible)||void 0===Bt||Bt,at.activeType=function(nt){var at,lt,Rt;if(!1===(null==nt?void 0:nt.visible))return[];var Bt={"mark":!1!==(null===(at=null==nt?void 0:nt.mark)||void 0===at?void 0:at.visible),"dimension":!1!==(null===(lt=null==nt?void 0:nt.dimension)||void 0===lt?void 0:lt.visible),"group":!1!==(null===(Rt=null==nt?void 0:nt.group)||void 0===Rt?void 0:Rt.visible)};return N(null==nt?void 0:nt.activeType)&&Object.keys(Bt).forEach((function(at){var lt;Bt[at]=null===(lt=null==nt?void 0:nt.activeType)||void 0===lt?void 0:lt.includes(at)})),Object.keys(Bt).filter((function(nt){return Bt[nt]}))}(at),at.renderMode=null!==(Lt=at.renderMode)&&void 0!==Lt?Lt:Hk(this._option.mode)||!Fk(this._option.mode)?"canvas":"html",at.trigger=null!==(Ht=at.trigger)&&void 0!==Ht?Ht:"hover",at.className=null!==(jt=at.className)&&void 0!==jt?jt:"vchart-tooltip-element",at.enterable=null!==($t=at.enterable)&&void 0!==$t&&$t,at.transitionDuration=null!==(Kt=at.transitionDuration)&&void 0!==Kt?Kt:150,at.confine=null!==(te=at.confine)&&void 0!==te?te:"canvas"===at.renderMode,N(at.parentElement)?Y(at.parentElement)&&(at.parentElement=ax.getElementById(at.parentElement)):Fk(this._option.mode)&&(at.parentElement=null==yS?void 0:yS.body)},e}(a$),M8=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutZIndex=1,at.type=lt.tooltip,at.name=lt.tooltip,at.transformerConstructor=A8,at.specKey="tooltip",at.layoutType="none",at._isReleased=!1,at._alwaysShow=!1,at._eventList=[],at._isTooltipShown=!1,at._clickLock=!1,at._mountEvent=function(nt,lt,Rt){at.event.on(nt,lt,Rt),at._eventList.push({"eventType":nt,"handler":Rt})},at._handleClickToLock=function(nt){at._clickLock?(at._handleChartMouseOut(nt),at._clickLock=!1):at._clickLock=!0},at._getMouseOutHandler=function(nt){return function(lt){var Rt,Bt,Lt,Ht,jt;if(!at._isReleased&&!at._alwaysShow&&!at._clickLock&&(at._isTooltipShown||(null===(Bt=null===(Rt=at.tooltipHandler)||void 0===Rt?void 0:Rt.isTooltipShown)||void 0===Bt?void 0:Bt.call(Rt)))){var $t=Fk(null===(Lt=at._option)||void 0===Lt?void 0:Lt.mode),Kt=lt.event,te=Kt.clientX,ne=Kt.clientY;$t&&nt&&at._isPointerInChart({"x":te,"y":ne})||(at._enterable?at._outTimer=setTimeout((function(){at._handleChartMouseOut(lt)}),null!==(jt=null===(Ht=at._spec)||void 0===Ht?void 0:Ht.showDelay)&&void 0!==jt?jt:50):at._handleChartMouseOut(lt))}}},at._handleChartMouseOut=function(nt){at._alwaysShow||at._isReleased||at._isEnterTooltip||"none"!==at._spec.triggerOff&&(at._hideTooltipByHandler(A(A({},nt),{"tooltip":at})),at._handleMouseMove&&at._handleMouseMove.cancel&&at._handleMouseMove.cancel(),at._cacheEnterableRect=null,at._cacheInfo=void 0,at._cacheParams=void 0,at._cacheActiveType=void 0)},at._getMouseMoveHandler=function(nt){return function(lt){var Rt,Bt,Lt,Ht;at._isReleased||at._isEnterTooltip||(at._outTimer&&(clearTimeout(at._outTimer),at._outTimer=null),at.tooltipHandler||at._initHandler(),at.processor||at._initProcessor(),at._alwaysShow||(at._clickLock?nt&&(at._handleChartMouseOut(lt),at._clickLock=!1):!nt&&at._enterable&&(null===(Bt=null===(Rt=at.tooltipHandler)||void 0===Rt?void 0:Rt.isTooltipShown)||void 0===Bt?void 0:Bt.call(Rt))?(at._showTimer&&clearTimeout(at._showTimer),at._showTimer=setTimeout((function(){at._handleChartMouseMove(lt,nt)}),null!==(Ht=null===(Lt=at._spec)||void 0===Lt?void 0:Lt.showDelay)&&void 0!==Ht?Ht:50)):at._handleChartMouseMove(lt,nt)))}},at._handleChartMouseMove=function(nt,lt){if(!at._isReleased){for(var Rt=at._getMouseEventData(nt),Bt=Rt.tooltipInfo.dimension,Lt=Rt.ignore.mark,Ht={"mark":!1,"dimension":!1,"group":!1},jt=0,$t=u8.length;jt<$t;jt++){var Kt=u8[jt];if(at.processor[Kt]&&at._showTooltipByMouseEvent(Kt,Rt,nt,lt)){Ht[Kt]=!0;break}}Object.values(Ht).every((function(nt){return!nt}))&&!function(nt){return j(nt.mark)&&j(nt.model)&&j(nt.datum)}(nt)&&(Lt&&n8(at._cacheInfo)?Ht.mark=at._showTooltipByMouseEvent("mark",Rt,nt,lt,!0):N(Bt)&&(Ht.dimension=at._showTooltipByMouseEvent("dimension",Rt,nt,lt))),Ht.mark||Ht.group||Ht.dimension&&!j(Bt)?at._initEventOfTooltipContent():at._handleChartMouseOut(nt)}},at._showTooltipByMouseEvent=function(nt,lt,Rt,Bt,Lt){var Ht,jt,$t=at.processor[nt];if(!$t.shouldHandleTooltip(Rt,lt.tooltipInfo[nt]))return!1;if(at._hideTimer&&clearTimeout(at._hideTimer),Lt)jt=!$t.showTooltip(at._cacheInfo,Rt,!0);else{var Kt=lt.tooltipInfo[nt],te=at._isSameAsCache(Kt,Rt,nt);(jt=!$t.showTooltip(Kt,Rt,te))&&(at._cacheInfo=Kt,at._cacheParams=Rt,at._cacheActiveType=nt)}jt&&(at._isTooltipShown=!0,Bt&&at._spec.lockAfterClick&&!at._clickLock?at._clickLock=!0:Number.isFinite(at._spec.hideTimer)&&(at._hideTimer=setTimeout((function(){at._handleChartMouseOut()}),at._spec.hideTimer)));var ne=null===(Ht=at._option)||void 0===Ht?void 0:Ht.globalInstance;return jt&&BY.globalConfig.uniqueTooltip&&ne&&BY.hideTooltip(ne.id),jt},at._getMouseEventData=function(nt){var lt={"tooltipInfo":{},"ignore":{}};return Object.keys(at.processor).forEach((function(Rt){var Bt=at.processor[Rt].getMouseEventData(nt),Lt=Bt.tooltipInfo,Ht=Bt.ignore;lt.tooltipInfo[Rt]=Lt,lt.ignore[Rt]=Ht})),lt},at._hideTooltipByHandler=function(nt){var lt,Rt,Bt;if(!at._isTooltipShown&&!(null===(Rt=null===(lt=at.tooltipHandler)||void 0===lt?void 0:lt.isTooltipShown)||void 0===Rt?void 0:Rt.call(lt)))return 0;at.event.emit(jW.tooltipHide,A(A({},nt),{"source":NW.chart,"tooltip":at})),Object.values(at.processor).forEach((function(nt){nt.clearCache()}));var Lt=null!==(Bt=at._spec.handler)&&void 0!==Bt?Bt:at.tooltipHandler;if(Lt.hideTooltip){var Ht=Lt.hideTooltip.call(Lt,nt);return Ht||(at._isTooltipShown=!1),Ht}return 1},at.hideTooltip=function(){if(at._isReleased)return!1;var nt={"changePositionOnly":!1,"tooltip":at,"item":void 0,"datum":void 0,"source":NW.chart};return at._alwaysShow=!1,!at._hideTooltipByHandler(nt)},at}return S(e,nt),e.prototype.isTooltipShown=function(){return this._isTooltipShown},e.prototype.changeRegions=function(nt){},e.prototype._getNeedClearVRenderComponents=function(){return[]},e.prototype._registerEvent=function(){},e.prototype._releaseEvent=function(){},e.prototype.onLayout=function(nt){},e.prototype.onLayoutEnd=function(nt){},e.prototype.onRender=function(nt){},e.prototype.created=function(){nt.prototype.created.call(this),this._regions=this._option.getAllRegions(),this._initEvent()},e.prototype.release=function(){var at,lt,Rt=this;nt.prototype.release.call(this),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach((function(nt){var at=nt.eventType,lt=nt.handler;Rt.event.off(at,lt)})),this._eventList=[],null===(lt=null===(at=this.tooltipHandler)||void 0===at?void 0:at.release)||void 0===lt||lt.call(at),this._isTooltipShown=!1},e.prototype.beforeRelease=function(){this.event.emit(jW.tooltipHide,{"tooltip":this,"chart":this.getChart()}),this.event.emit(jW.tooltipRelease,{"tooltip":this,"chart":this.getChart()})},e.prototype._initHandler=function(){var nt,at,lt,Rt=null!==(nt=this._spec.renderMode)&&void 0!==nt?nt:"html",Bt=this._option.globalInstance.getTooltipHandlerByUser();if(Bt)this.tooltipHandler=Bt,this._enterable=!1;else{var Lt="canvas"===Rt?o8.canvas:o8.dom,Ht=Tz.getComponentPluginInType(Lt);Ht||Ik("Can not find tooltip handler: "+Lt);var jt=new Ht;jt.name="".concat(this._spec.className,"-").concat(null!==(at=this._option.globalInstance.id)&&void 0!==at?at:0,"-").concat(this.getSpecIndex()),null===(lt=this.pluginService)||void 0===lt||lt.load([jt]),this.tooltipHandler=jt,this._spec.enterable&&"html"===Rt&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}},e.prototype._initEventOfTooltipContent=function(){var nt,at,lt=this;if(this._needInitEventOfTooltip){var Rt=null===(at=(nt=this.tooltipHandler).getTooltipContainer)||void 0===at?void 0:at.call(nt),Bt=null==Rt?void 0:Rt.firstChild;Bt&&(Bt.addEventListener("pointerenter",(function(){var nt;if(lt._enterable){lt._isEnterTooltip=!0;var at=null===(nt=Bt.getBoundingClientRect)||void 0===nt?void 0:nt.call(Bt);at&&(lt._cacheEnterableRect={"x":at.x,"y":at.y,"width":at.width,"height":at.height}),lt._outTimer&&(clearTimeout(lt._outTimer),lt._outTimer=null),lt._showTimer&&(clearTimeout(lt._showTimer),lt._showTimer=null)}})),Bt.addEventListener("pointerleave",(function(){var nt,at,Rt;if(lt._enterable&&(lt._isEnterTooltip=!1,lt._cacheEnterableRect)){var Lt=null===(nt=Bt.getBoundingClientRect)||void 0===nt?void 0:nt.call(Bt);Lt&&Object.keys(lt._cacheEnterableRect).every((function(nt){return lt._cacheEnterableRect[nt]===Lt[nt]}))&&(lt._cacheEnterableRect=null,lt._outTimer=setTimeout(lt.hideTooltip,null!==(Rt=null===(at=lt._spec)||void 0===at?void 0:at.showDelay)&&void 0!==Rt?Rt:50))}})),this._needInitEventOfTooltip=!1)}},e.prototype._initProcessor=function(){var nt=this._spec.activeType;this.processor={},nt.includes("dimension")&&(this.processor.dimension=new y8(this)),nt.includes("group")&&(this.processor.group=new S8(this)),nt.includes("mark")&&(this.processor.mark=new k8(this))},e.prototype._initEvent=function(){var nt,at=this;if(!this._option.disableTriggerEvent){var lt=xt(null!==(nt=this._spec.trigger)&&void 0!==nt?nt:"hover"),Rt=xt(this._spec.triggerOff),Bt=this._option.mode;lt.forEach((function(nt){var lt;"hover"===nt?(at._handleMouseMove=at._throttle(at._getMouseMoveHandler(!1)),at._mountEvent("pointermove",{"source":"chart"},at._handleMouseMove),(zk(Bt)||Hk(Bt))&&(at._mountEvent("pointerdown",{"source":"chart"},at._getMouseMoveHandler(!1)),at._mountEvent("pointerup",{"source":"window"},at._getMouseOutHandler(!0))),at._mountEvent("pointerleave",{"source":"chart"},at._getMouseOutHandler(!1))):"click"===nt?(at._mountEvent("pointertap",{"source":"chart"},at._getMouseMoveHandler(!0)),at._mountEvent("pointerup",{"source":"window"},at._getMouseOutHandler(!0))):V(nt)&&at._mountEvent(nt.eventType,{"source":null!==(lt=nt.source)&&void 0!==lt?lt:"chart","consume":nt.consume},at._getMouseMoveHandler(!0))})),Rt.filter((function(nt){return V(nt)})).forEach((function(nt){var lt,Rt;at._mountEvent(nt.eventType,{"source":null!==(lt=nt.source)&&void 0!==lt?lt:"chart","consume":nt.consume},at._getMouseOutHandler(null!==(Rt=nt.checkOutside)&&void 0!==Rt&&Rt))})),!lt.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{"source":"chart"},this._handleClickToLock)}},e.prototype._throttle=function(nt){return Zt(nt,Z(this._spec.throttleInterval)?this._spec.throttleInterval:"html"===this._spec.renderMode&&this._spec.transitionDuration?50:10)},e.prototype.reInit=function(at){var lt,Rt,Bt;if(nt.prototype.reInit.call(this,at),this.tooltipHandler){var Lt=null!==(lt=this._spec.renderMode)&&void 0!==lt?lt:"html",Ht=this._spec.enterable&&"html"===Lt;Ht&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=Ht,null===(Bt=(Rt=this.tooltipHandler).reInit)||void 0===Bt||Bt.call(Rt)}else this._initHandler()},e.prototype.showTooltip=function(nt,at){var lt;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(null===(lt=this.tooltipHandler)||void 0===lt?void 0:lt.showTooltip))return!1;var Rt=G4(nt,at,this);return"none"!==Rt&&(this._alwaysShow=!!(null==at?void 0:at.alwaysShow)),Rt},e.prototype._isSameAsCache=function(nt,at,lt){if(lt!==this._cacheActiveType)return!1;if(nt===this._cacheInfo)return!0;if(j(this._cacheInfo)||j(nt))return!1;if(r8(nt)){if(n8(this._cacheInfo))return!1;var Rt=this._cacheInfo,Bt=Rt.length===nt.length&&nt.every((function(nt,at){return fW(nt,Rt[at])}));return Bt}if(r8(this._cacheInfo))return!1;var Lt=this._cacheInfo;if((null==nt?void 0:nt.datum)!==Lt.datum||(null==nt?void 0:nt.mark)!==Lt.mark||(null==nt?void 0:nt.series)!==Lt.series)return!1;var Ht=this._cacheParams;return!j(Ht)&&!j(at)&&Ht.mark===at.mark&&Ht.model===at.model&&Ht.datum===at.datum},e.prototype._isPointerInChart=function(nt){var at,lt=null===(at=this._option)||void 0===at?void 0:at.globalInstance;if(!lt)return!1;if(!lt.getChart())return!1;var Rt=nt.x,Bt=nt.y,Lt=lt.getCanvas().getBoundingClientRect(),Ht=Lt.x,jt=Lt.y,$t=Lt.width,Kt=Lt.height;return Rt>=Ht&&Rt<=Ht+$t&&Bt>=jt&&Bt<=jt+Kt},e.prototype.getVisible=function(){return!1!==this._spec.visible},e.type=lt.tooltip,e.transformerConstructor=A8,e.specKey="tooltip",e}(s$),s8=function(){Tz.registerComponent(M8.type,M8)};nt.TooltipResult=void 0,(e8=nt.TooltipResult||(nt.TooltipResult={}))[e8.success=0]="success",e8[e8.failed=1]="failed",function(nt){nt[nt.ALL=3]="ALL",nt[nt.HORIZONTAL=2]="HORIZONTAL",nt[nt.VERTICAL=1]="VERTICAL"}(i8||(i8={}));var E8={"x":["top","bottom"],"y":["left","right"],"category":["angle"],"value":["radius"]},R8=function(at){function i(nt,lt){var Rt=at.call(this,nt,lt)||this;return Rt.specKey="crosshair",Rt.layoutType="none",Rt.gridZIndex=MU.CrossHair_Grid,Rt.labelZIndex=MU.CrossHair,Rt.trigger="hover",Rt._handleIn=function(nt){if(Rt._option){var at=Rt.calculateTriggerPoint(nt),lt=at.x,Bt=at.y;Rt.showDefault=!1,Rt._layoutCrosshair(lt,Bt);var Lt=Rt._getNeedClearVRenderComponents();Rt._hasActive=Lt.some((function(nt){return nt&&!1!==nt.attribute.visible}))}},Rt._handleClickInEvent=function(nt){if(!Rt._hasActive||!Rt._spec.lockAfterClick||Rt._clickLock)return Rt._clickLock?(Rt._clickLock=!1,void Rt._handleOutEvent()):void(Rt._onlyLockClick||(Rt._handleIn(nt),Z(Rt.triggerOff)&&(Rt._timer&&clearTimeout(Rt._timer),Rt._timer=setTimeout((function(){Rt._handleOutEvent()}),Rt.triggerOff))));Rt._clickLock=!0},Rt._handleHoverInEvent=Zt((function(nt){Rt._clickLock||Rt._handleIn(nt)}),10),Rt._handleOutEvent=function(){Rt.enableRemain||Rt._clickLock||!Rt._hasActive||(Rt.clearOutEvent(),Rt.hide())},Rt._handleTooltipShow=function(nt){var at=nt.tooltipData;if(!nt.isEmptyTooltip&&at&&at.length)if(V(Rt._spec.followTooltip)&&!1===Rt._spec.followTooltip[nt.activeType])Rt._handleTooltipHideOrRelease();else{var lt=Rt.calculateTriggerPoint(nt),Bt=lt.x,Lt=lt.y;Rt.showDefault=!1,Rt._layoutCrosshair(Bt,Lt,at,nt.activeType);var Ht=Rt._getNeedClearVRenderComponents();Rt._hasActive=Ht.some((function(nt){return nt&&!1!==nt.attribute.visible}))}else Rt._handleTooltipHideOrRelease()},Rt._handleTooltipHideOrRelease=function(){Rt.clearOutEvent(),Rt.hide()},Rt.enable=!0,Rt.showDefault=!0,Rt}return S(i,at),Object.defineProperty(i.prototype,"enableRemain",{"get":function(){return"none"===this.triggerOff},"enumerable":!1,"configurable":!0}),i.prototype._setAllAxisValues=function(nt,at,lt){var Rt=this,Bt=!1;if(nt.forEach((function(nt){HB(nt.axis.getScale().type)&&(Bt?Rt.enable=!1:Bt=!0)})),!this.enable)return!1;var Lt=this._stateByField[lt].currentValue;return nt.forEach((function(nt,lt){var Bt=nt.axis;Lt.set(lt,{"datum":Rt._getDatumAtPoint(Bt,at),"axis":Bt})})),!0},i.prototype.clearAxisValue=function(){var nt=this;Object.keys(this._stateByField).forEach((function(at){nt._stateByField[at].currentValue.clear()}))},i.prototype.hideCrosshair=function(){this.clearAxisValue(),this.hide()},i.prototype.showCrosshair=function(nt){var at=this;nt&&nt.length&&(this.showDefault=!1,this.clearAxisValue(),nt.forEach((function(nt){var lt=nt.axis,Rt=nt.value;at.setAxisValue(Rt,lt)})),this.layoutByValue())},i.prototype._getLimitBounds=function(){var nt,at;if(!this._limitBounds){var lt=null!==(at=null===(nt=this._option.globalInstance.getChart())||void 0===nt?void 0:nt.getViewRect())&&void 0!==at?at:{"width":0,"height":0},Rt=lt.width,Bt=lt.height;this._limitBounds={"x1":0,"y1":0,"x2":Rt,"y2":Bt}}return this._limitBounds},i.prototype._showDefaultCrosshairBySpec=function(){var nt=this;Object.keys(this._stateByField).forEach((function(at){var lt=nt._spec[at];if(lt&&lt.visible&&lt.defaultSelect){var Rt=lt.defaultSelect,Bt=Rt.axisIndex,Lt=Rt.datum,Ht=nt._option.getComponentsByKey("axes").find((function(nt){return nt.getSpecIndex()===Bt}));Ht&&(nt._stateByField[at].currentValue.clear(),nt._stateByField[at].currentValue.set(Bt,{"axis":Ht,"datum":Lt}))}}))},i.prototype._updateVisibleCrosshair=function(){var nt=this,at=!1;Object.keys(this._stateByField).forEach((function(lt){var Rt=nt._spec[lt];Rt&&Rt.visible&&nt._stateByField[lt].currentValue.size?at=!0:nt._hideByField(lt)})),at&&this.layoutByValue()},i.prototype._showDefaultCrosshair=function(){this.showDefault?(this._showDefaultCrosshairBySpec(),this.layoutByValue()):this._updateVisibleCrosshair()},i.prototype.setAttrFromSpec=function(){at.prototype.setAttrFromSpec.call(this),this._parseCrosshairSpec()},i.prototype.created=function(){at.prototype.created.call(this),this._initEvent()},i.prototype._compareSpec=function(nt,lt){var Rt=at.prototype._compareSpec.call(this,nt,lt);return Rt.reMake||mt(lt,nt)||(Rt.reRender=!0,Rt.reMake=!0),Rt},i.prototype._initEvent=function(){var nt=this;if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{var at=this._getTriggerEvent();at&&at.forEach((function(at){nt._registerEvent(at.in,!1,at.click),at.out&&nt._registerEvent(at.out,!0)}))}},i.prototype._registerEvent=function(nt,at,lt){var Rt=this,Bt=at?this._handleOutEvent:lt?this._handleClickInEvent:this._handleHoverInEvent,Lt=at?{"level":VW.chart}:{"source":NW.chart};X(nt)?nt.forEach((function(nt){Rt.event.on(nt,Lt,Bt)})):this.event.on(nt,Lt,Bt)},i.prototype._eventOff=function(nt,at,lt){var Rt=this,Bt=at?this._handleOutEvent:lt?this._handleClickInEvent:this._handleHoverInEvent;X(nt)?nt.forEach((function(nt){Rt.event.off(nt,Bt)})):this.event.off(nt,Bt)},i.prototype.updateLayoutAttribute=function(){this._limitBounds=null,this._showDefaultCrosshair()},i.prototype.calculateTriggerPoint=function(nt){var at=nt.event,lt=this._option.getCompiler().getStage().getLayer(void 0),Rt={"x":at.viewX,"y":at.viewY};return lt.globalTransMatrix.transformPoint({"x":at.viewX,"y":at.viewY},Rt),{"x":Rt.x-this.getLayoutStartPoint().x,"y":Rt.y-this.getLayoutStartPoint().y}},i.prototype._getTriggerEvent=function(){var at=this,lt=this._option.mode,Rt=function(at){return at===nt.RenderModeEnum["desktop-browser"]||at===nt.RenderModeEnum["desktop-miniApp"]?{"click":"pointertap","hover":"pointermove","hoverOut":"pointerleave","clickOut":"pointerleave"}:zk(at)||Hk(at)?{"click":"tap","hover":["pointerdown","pointermove"],"hoverOut":"pointerleave","clickOut":"pointerleave"}:null}(void 0===lt?nt.RenderModeEnum["desktop-browser"]:lt);if(Rt){var Bt=xt(this.trigger||"hover");this._spec.lockAfterClick&&!Bt.includes("click")?(Bt.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;var Lt=[];return Bt.forEach((function(nt){var lt;Lt.push({"click":"click"===nt,"in":Rt[nt],"out":(lt=nt,"click"===lt?"none"===at.triggerOff?null:Rt.clickOut:Rt.hoverOut)})})),Lt}return null},i.prototype._registerTooltipEvent=function(){this.event.on(jW.tooltipHide,{"source":NW.chart},this._handleTooltipHideOrRelease),this.event.on(jW.tooltipShow,{"source":NW.chart},this._handleTooltipShow),this.event.on(jW.tooltipRelease,{"source":NW.chart},this._handleTooltipHideOrRelease)},i.prototype._getAxisInfoByField=function(nt){var at,lt,Rt=null===(lt=(at=this._option).getComponentsByKey)||void 0===lt?void 0:lt.call(at,"axes");if(!(null==Rt?void 0:Rt.length))return null;var Bt=st(this._spec,"".concat(nt,"Field.bindingAxesIndex"));if(Bt||(Bt=[],Rt.forEach((function(at,lt){E8[nt].includes(at.getOrient())&&Bt.push(lt)}))),!Bt.length)return null;var Lt=new Map,Ht=1/0,jt=1/0,$t=-1/0,Kt=-1/0,te=this.getLayoutStartPoint(),ne=te.x,re=te.y;return Bt.forEach((function(nt){Ht=1/0,jt=1/0,$t=-1/0,Kt=-1/0;var at=Rt.find((function(at){return at.getSpecIndex()===nt}));at&&(at.getRegions().forEach((function(nt){var at=nt.getLayoutStartPoint(),lt=at.x,Rt=at.y;Ht=Math.min(Ht,lt-ne),jt=Math.min(jt,Rt-re),$t=Math.max($t,lt+nt.getLayoutRect().width-ne),Kt=Math.max(Kt,Rt+nt.getLayoutRect().height-re)})),Lt.set(nt,{"x1":Ht,"y1":jt,"x2":$t,"y2":Kt,"axis":at}))})),Lt},i.prototype.changeRegions=function(nt){},i.prototype.onLayoutEnd=function(nt){var lt=this._regions[0];this.setLayoutRect(lt.getLayoutRect()),this.setLayoutStartPosition(lt.getLayoutStartPoint()),at.prototype.onLayoutEnd.call(this,nt)},i.prototype.onRender=function(nt){},i.prototype._releaseEvent=function(){var nt=this;this.clearOutEvent();var at=this._getTriggerEvent();at&&at.forEach((function(at){nt._eventOff(at.in,!1,at.click),at.out&&nt._eventOff(at.out,!0)}))},i.prototype._parseFieldInfo=function(){var nt=this;Object.keys(this._stateByField).forEach((function(at){var lt,Rt=nt._spec[at],Bt=nt._stateByField[at].crosshairComp;if(Rt&&Rt.visible){if(nt._stateByField[at].attributes=nt._parseField(Rt,at),Bt){var Lt=nt._stateByField[at].attributes,Ht=Lt.style,jt="rect"===Lt.type?"rectStyle":"lineStyle";Bt.setAttributes(((lt={})[jt]=Ht,lt))}}else Bt&&Bt.parent&&Bt.parent.removeChild(Bt)}))},i.prototype._parseCrosshairSpec=function(){this._parseFieldInfo();var nt=this._spec,at=nt.trigger,lt=nt.triggerOff,Rt=nt.labelZIndex,Bt=nt.gridZIndex;at&&(this.trigger=at),("none"===lt||Z(lt)&&lt>0)&&(this.triggerOff=lt),void 0!==Rt&&(this.labelZIndex=Rt),void 0!==Bt&&(this.gridZIndex=Bt)},i.prototype._parseField=function(nt,at){var lt,Rt,Bt={},Lt=nt.line,Ht=void 0===Lt?{}:Lt,jt=nt.label,$t=void 0===jt?{}:jt,Kt=nt.visible;if(Bt.visible=Kt,Bt.type=Ht.type||"line",!1===Ht.visible)Bt.style={"visible":!1};else{var te=Ht.style||{},ne=te,re=ne.stroke,ae=ne.fill,oe=ne.lineWidth,se=te,le=se.strokeOpacity,ue=se.fillOpacity,ce=se.opacity,he=w(se,["strokeOpacity","fillOpacity","opacity"]),de="line"===Bt.type,fe=de?le:ue;if(Z(ce)&&(fe=(null!=fe?fe:1)*ce),Bt.style=A({"opacity":fe,"pickable":!1,"visible":!0},he),de)Bt.style.stroke=re||ae,Bt.style.lineWidth=st(Ht,"width",oe||2);else{Bt.style.fill=ae||re,(null===(Rt=null===(lt=null==nt?void 0:nt.line)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.stroke)&&(Bt.style.stroke=nt.line.style.stroke);var pe=st(Ht,"width");if("string"==typeof pe){var ve=parseInt(pe.substring(0,pe.length-1),10)/100;Bt.style.sizePercent=ve}else"number"!=typeof pe&&"function"!=typeof pe||(Bt.style.size=pe)}}if($t.visible){var Ae=$t.labelBackground||{},we=$t.style||{},Ce=Ae.style||{},je=Ce.fill,Ne=void 0===je?"rgba(47, 59, 82, 0.9)":je,Ve=Ce.stroke,Ge=Ce.outerBorder,ti=w(Ce,["fill","stroke","outerBorder"]);Bt.label={"visible":!0,"formatMethod":$t.formatMethod,"formatter":$t.formatter,"minWidth":Ae.minWidth,"maxWidth":Ae.maxWidth,"padding":Ae.padding,"textStyle":A(A({"fontSize":14,"pickable":!1},we),{"fill":we.fill||"#fff","stroke":st(we,"stroke")}),"panel":(z(Ae.visible)?Ae.visible:Ae)?A({"visible":!0,"pickable":!1,"fill":Ne,"stroke":Ve,"outerBorder":A({"stroke":Ne,"distance":0,"lineWidth":3},Ge)},ti):{"visible":!1},"zIndex":this.labelZIndex,"childrenPickable":!1,"pickable":!1}}else Bt.label={"visible":!1};return Bt},i.prototype._filterAxisByPoint=function(nt,at,lt){return nt&&nt.forEach((function(Rt){var Bt,Lt,Ht,jt=Rt.axis;if(Lt=at,Ht=lt,((Bt=Rt).x1>Lt||Bt.x2<Lt||Bt.y1>Ht||Bt.y2<Ht)&&nt.delete(jt.getSpecIndex()),jt.type.startsWith("polarAxis")){var $t=jt.getCenter(),Kt=jt.getInnerRadius(),te=jt.getOuterRadius(),ne=Ge.distancePP({"x":at,"y":lt},$t);(ne>te||ne<Kt)&&nt.delete(jt.getSpecIndex())}})),nt},i.prototype._updateCrosshairLabel=function(nt,at,lt){var Rt=this.getContainer();nt?nt.setAttributes(at):(nt=new AR(at),null==Rt||Rt.add(nt),lt(nt)),function(nt,at){var lt=at.x1,Rt=at.y1,Bt=at.x2,Lt=at.y2,Ht=nt.AABBBounds,jt=Ht.x1,$t=Ht.y1,Kt=Ht.x2,te=Ht.y2,ne=nt.attribute,re=ne.dx,ae=void 0===re?0:re,oe=ne.dy,se=void 0===oe?0:oe,le=0,ue=0;jt<lt&&(le=lt-jt),$t<Rt&&(ue=Rt-$t),Kt>Bt&&(le=Bt-Kt),te>Lt&&(ue=Lt-te),le&&nt.setAttribute("dx",le+ae),ue&&nt.setAttribute("dy",ue+se)}(nt,this._getLimitBounds())},i.prototype.clearOutEvent=function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)},i.prototype._hideByField=function(nt){var at=this._stateByField[nt],lt=at.crosshairComp,Rt=at.labelsComp;lt&&lt.hideAll(),Rt&&Object.keys(Rt).forEach((function(nt){Rt[nt]&&Rt[nt].hideAll()}))},i.prototype.hide=function(){var nt=this;Object.keys(this._stateByField).forEach((function(at){nt._hideByField(at)}))},i.prototype._getNeedClearVRenderComponents=function(){var nt=this;return Object.keys(this._stateByField).reduce((function(at,lt){var Rt=nt._stateByField[lt],Bt=Rt.crosshairComp,Lt=Rt.labelsComp;return Bt&&at.push(Bt),Lt&&Object.keys(Lt).forEach((function(nt){Lt[nt]&&at.push(Lt[nt])})),at}),[])},i.specKey="crosshair",i}(s$),c8=function(nt,at,lt,Rt){return void 0===Rt&&(Rt=!1),lt||(lt={"x":0,"y":0}),Object.keys(nt).forEach((function(Bt){var Lt=nt[Bt],Ht=Lt.currentValue,jt=Lt.cacheInfo,$t=Lt.labelsComp,Kt=Lt.attributes,te=Lt.coordKey,ne=null,re=0;if(Ht.size){var ae=Array.from(Ht.values())[0];re=ae.axis.getScale().scale(ae.datum)+ae.axis.getLayoutStartPoint()[te]-lt[te],ne=ae.axis}var oe,se=!!Ht.size&&Number.isFinite(re),le=Rt&&!se&&N(jt),ue=le?jt:{"coordRange":[0,0],"sizeRange":[0,0],"coord":re,"labelsTextStyle":{},"labels":$t?Object.keys($t).reduce((function(nt,at){return nt[at]={"visible":!1,"text":"","dx":0,"dy":0},nt}),{}):null,"visible":se,"axis":ne};ue&&(ue._isCache=le);var ce=0;if(Kt&&Ht.forEach((function(nt){var lt,Rt=nt.axis,Lt=nt.datum,Ht=void 0===Lt?"":Lt,jt=null,$t=Rt.getScale();if(HB($t.type))0===(oe=$t.bandwidth())&&$t.step&&(ce=$t.step());else if(FB($t.type)){var te="xField"===Bt?at.fieldX[0]:at.fieldY[0],ne="xField"===Bt?at.fieldX2:at.fieldY2,ae=function(nt,at,lt,Rt){for(var Bt=0,Lt=nt.length;Bt<Lt;Bt++){var Ht=nt[Bt];if(Ht){var jt=Ht[lt],$t=Ht[Rt||lt];if(jt<=at&&$t>=at)return Ht}}return null}(at.getViewData().latestData,+Ht,te,ne);if(ae){var se="xField"===Bt?at.dataToPositionX(ae):at.dataToPositionY(ae);ne?(oe=Math.abs(se-("xField"===Bt?at.dataToPositionX1(ae):at.dataToPositionY1(ae))),Ht="".concat(ae[te]," ~ ").concat(ae[ne])):oe=1,re=se}jt=Rt.niceLabelFormatter}if(ue&&(null===(lt=Kt.label)||void 0===lt?void 0:lt.visible)&&!le){var he=jX(Rt.getSpec()),de=Rt.getOrient();ue.labels[de]&&(ue.labels[de].visible=!0,ue.labels[de].text=Ht,"left"===de?(ue.labels[de].dx=-he,ue.labelsTextStyle[de]={"textAlign":"right","textBaseline":"middle"}):"right"===de?(ue.labels[de].dx=he,ue.labelsTextStyle[de]={"textAlign":"left","textBaseline":"middle"}):"top"===de?(ue.labels[de].y=0,ue.labels[de].dy=-he,ue.labelsTextStyle[de]={"textAlign":"center","textBaseline":"bottom"}):"bottom"===de&&(ue.labels[de].dy=he,ue.labelsTextStyle[de]={"textAlign":"center","textBaseline":"top"}),ue.labels[de].defaultFormatter=jt)}})),ue&&!le){var he={"x1":1/0,"y1":1/0,"x2":-1/0,"y2":-1/0};d8(he,Ht),"xField"===Bt?(ue.coordRange=[he.x1,he.x2],ue.sizeRange=[he.y1,he.y2],ue.coord=re+lt.x,ue.labels&&(ue.labels.top.y=he.y1,ue.labels.bottom.y=he.y2)):(ue.coordRange=[he.y1,he.y2],ue.sizeRange=[he.x1,he.x2],ue.coord=re+lt.y,ue.labels&&(ue.labels.left.x=he.x1,ue.labels.right.x=he.x2)),(ue.coord<ue.coordRange[0]||ue.coord>ue.coordRange[1])&&(ue.visible=!1),Kt&&Kt.label&&Object.keys(ue.labels).forEach((function(nt){ue.labels[nt].visible&&h8(ue.labels[nt],nt,Kt.label)}))}nt[Bt].bandSize=null!=oe?oe:0,nt[Bt].offsetSize=ce,nt[Bt].cacheInfo=ue})),nt},h8=function(nt,at,lt){var Rt=vY(lt.formatMethod,lt.formatter,nt.text,{"label":nt.text,"position":at}),Bt=Rt.formatFunc,Lt=Rt.args;Bt?nt.text=Bt.apply(void 0,P([],E(Lt),!1)):nt.defaultFormatter&&(nt.text=nt.defaultFormatter(nt.text))},d8=function(nt,at){at.forEach((function(at){at.axis.getRegions().forEach((function(at){var lt=at.getLayoutStartPoint(),Rt=lt.x,Bt=lt.y,Lt=at.getLayoutRect(),Ht=Lt.width,jt=Lt.height;nt.x1=Math.min(nt.x1,Rt),nt.y1=Math.min(nt.y1,Bt),nt.x2=Math.max(nt.x2,Rt+Ht),nt.y2=Math.max(nt.y2,Bt+jt)}))}))},p8=function(nt){var at,lt,Rt,Bt,Lt,Ht=nt.cacheInfo,jt=nt.attributes,$t=nt.bandSize,Kt=nt.offsetSize,te=nt.coordKey,ne=nt.anotherAxisKey,re=Ht.coord,ae=Ht.sizeRange,oe=jt.type;if("line"===oe){var se=re+$t/2;Lt={"visible":!0,"start":(at={},at[te]=se,at[ne]=ae[0],at),"end":(lt={},lt[te]=se,lt[ne]=ae[1],lt)}}else if("rect"===oe){var le=f8(jt,$t,Ht.axis),ue=Ht.coordRange;Lt={"visible":!0,"start":(Rt={},Rt[te]=Math.max(re-le/2-Kt/2,ue[0]),Rt[ne]=ae[0],Rt),"end":(Bt={},Bt[te]=Math.min(re+$t+le/2+Kt/2,ue[1]),Bt[ne]=ae[1],Bt)}}return Lt},f8=function(nt,at,lt){var Rt,Bt,Lt,Ht=0;if(null===(Rt=nt.style)||void 0===Rt?void 0:Rt.sizePercent)Ht=(nt.style.sizePercent-1)*at;else if("number"==typeof(null===(Bt=nt.style)||void 0===Bt?void 0:Bt.size))Ht=nt.style.size-at;else if("function"==typeof(null===(Lt=nt.style)||void 0===Lt?void 0:Lt.size)){var jt=lt.getLayoutRect();Ht=nt.style.size(jt,lt)-at}return Ht},i6=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.cartesianCrosshair,Bt.name=lt.cartesianCrosshair,Bt._stateByField={"xField":{"coordKey":"x","anotherAxisKey":"y","currentValue":new Map,"labelsComp":{"top":null,"bottom":null}},"yField":{"coordKey":"y","anotherAxisKey":"x","currentValue":new Map,"labelsComp":{"left":null,"right":null}}},Bt}return S(e,nt),e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return nt.xField&&!1!==nt.xField.visible||nt.yField&&!1!==nt.yField.visible}))},e.prototype._findAllAxisContains=function(nt,at){var lt=this._getAxisInfoByField("x"),Rt=this._getAxisInfoByField("y");return{"xAxisMap":this._filterAxisByPoint(lt,nt,at),"yAxisMap":this._filterAxisByPoint(Rt,nt,at)}},e.prototype._getDatumAtPoint=function(nt,at){var lt=_W(nt.getOrient())?"x":"y",Rt=at[lt]-(nt.getLayoutStartPoint()[lt]-this.getLayoutStartPoint()[lt]);return nt.getScale().invert(Rt)},e.prototype.setAxisValue=function(nt,at){_W(at.getOrient())?this._stateByField.xField.currentValue.set(at.getSpecIndex(),{"datum":nt,"axis":at}):this._stateByField.yField.currentValue.set(at.getSpecIndex(),{"datum":nt,"axis":at})},e.prototype._layoutCrosshair=function(nt,at,lt,Rt){var Bt,Lt=nt,Ht=at;if(lt&&lt.length)if("dimension"===Rt){var jt=lt[0],$t=jt.data.findIndex((function(nt){return nt.datum.length>0})),Kt=void 0;$t>-1&&(Kt=(te=jt.data[$t]).series.dataToPosition(te.datum[0])),(N(jt.dimType)?"y"===jt.dimType:bW(null===(Bt=null==jt?void 0:jt.axis)||void 0===Bt?void 0:Bt.getOrient()))?Ht=null==Kt?void 0:Kt.y:Lt=null==Kt?void 0:Kt.x}else if("mark"===Rt){var te;Lt=null==(Kt=(te=lt[0]).series.dataToPosition(te.datum[0]))?void 0:Kt.x,Ht=null==Kt?void 0:Kt.y}this.clearAxisValue();var ne=this._findAllAxisContains(Lt,Ht),re=ne.xAxisMap,ae=ne.yAxisMap;if(re&&0===re.size||ae&&0===ae.size){if(this.enableRemain)return;this.hide()}else re&&re.size&&this._setAllAxisValues(re,{"x":Lt,"y":Ht},"xField"),ae&&ae.size&&this._setAllAxisValues(ae,{"x":Lt,"y":Ht},"yField"),this.layoutByValue(3)},e.prototype.layoutByValue=function(nt){var at=this;if(this.enable){var lt=XO(this._regions,"cartesian");lt&&(c8(this._stateByField,lt,this.getLayoutStartPoint(),this.enableRemain),Object.keys(this._stateByField).forEach((function(nt){at._layoutByField(nt)})))}},e.prototype._layoutByField=function(nt){var at=this,lt=this._stateByField[nt],Rt=lt.cacheInfo,Bt=lt.attributes,Lt=lt.labelsComp,Ht=lt.bandSize,jt=lt.coordKey;if(Bt&&Rt&&(!Rt._isCache||!this.enableRemain)){var $t=Rt.coord,Kt=Rt.labels,te=Rt.visible,ne=Rt.labelsTextStyle;if(te){var re=p8(this._stateByField[nt]);this._updateCrosshairByField(nt,re),Object.keys(Kt).forEach((function(lt){var Rt,te;if(Kt[lt].visible){var re=A(A(A(((Rt={})[jt]=$t+Ht/2,Rt),Kt[lt]),Bt.label),{"textStyle":A(A({},null===(te=Bt.label)||void 0===te?void 0:te.textStyle),ne[lt]),"zIndex":at.labelZIndex,"visible":!0});at._updateCrosshairLabel(Lt[lt],re,(function(at){at.name="crosshair-".concat(nt.replace("Field",""),"-").concat(lt,"-label"),Lt[lt]=at}))}else Lt[lt]&&Lt[lt].hideAll()}))}else this._hideByField(nt)}},e.prototype._updateCrosshairByField=function(nt,at){var lt=this.getContainer(),Rt=this._stateByField[nt].attributes,Bt=this._stateByField[nt].crosshairComp;if(Bt)Bt.setAttributes(at);else{var Lt=Rt.style;"line"===Rt.type?Bt=new GR(A(A({},at),{"lineStyle":Lt,"zIndex":this.gridZIndex+1,"disableTriggerEvent":this._option.disableTriggerEvent,"pickable":!1})):"rect"===Rt.type&&(Bt=new UR(A(A({},at),{"rectStyle":Lt,"zIndex":this.gridZIndex,"disableTriggerEvent":this._option.disableTriggerEvent,"pickable":!1}))),null==lt||lt.add(Bt),this._stateByField[nt].crosshairComp=Bt}},e.specKey="crosshair",e.type=lt.cartesianCrosshair,e}(R8),g8=function(){Tz.registerComponent(i6.type,i6)},r6=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.polarCrosshair,Bt.name=lt.polarCrosshair,Bt._stateByField={"categoryField":{"coordKey":"angle","anotherAxisKey":"radius","currentValue":new Map,"labelsComp":{"all":null}},"valueField":{"coordKey":"radius","anotherAxisKey":"angle","currentValue":new Map,"labelsComp":{"all":null}}},Bt}return S(e,nt),e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return nt.categoryField&&!1!==nt.categoryField.visible||nt.valueField&&!1!==nt.valueField.visible}))},e.prototype.setAxisValue=function(nt,at){"radius"===at.getOrient()?this._stateByField.valueField.currentValue.set(at.getSpecIndex(),{"datum":nt,"axis":at}):this._stateByField.categoryField.currentValue.set(at.getSpecIndex(),{"datum":nt,"axis":at})},e.prototype._findAllAxisContains=function(nt,at){var lt=this._getAxisInfoByField("category"),Rt=this._getAxisInfoByField("value");return{"angleAxisMap":this._filterAxisByPoint(lt,nt,at),"radiusAxisMap":this._filterAxisByPoint(Rt,nt,at)}},e.prototype._getDatumAtPoint=function(nt,at){var lt=nt.getLayoutStartPoint(),Rt=lt.x,Bt=lt.y,Lt=this.getLayoutStartPoint(),Ht=Lt.x,jt=Lt.y;return nt.positionToData({"x":at.x-(Rt-Ht),"y":at.y-(Bt-jt)})},e.prototype._layoutCrosshair=function(nt,at,lt,Rt){var Bt=nt,Lt=at;if(lt&&lt.length)if("dimension"===Rt){var Ht=lt[0];if(Ht.axis){var jt=Ht.axis.pointToCoord({"x":Bt,"y":Lt}),$t="radius"===Ht.axis.getOrient()?{"radius":Ht.position,"angle":jt.angle}:{"radius":jt.radius,"angle":Ht.position},Kt=Ht.axis.coordToPoint($t);Bt=Kt.x,Lt=Kt.y}}else if("mark"===Rt){var te=lt[0],ne=te.series.dataToPosition(te.datum[0]);Bt=ne.x,Lt=ne.y}this.clearAxisValue();var re=this._findAllAxisContains(Bt,Lt),ae=re.angleAxisMap,oe=re.radiusAxisMap;if(0!==ae.size||0!==oe.size)ae&&this._setAllAxisValues(ae,{"x":Bt,"y":Lt},"categoryField"),oe&&this._setAllAxisValues(oe,{"x":Bt,"y":Lt},"valueField"),this.layoutByValue(3);else{if(this.enableRemain)return;this.hide()}},e.prototype.layoutByValue=function(nt){var at=this;if(this.enable){var lt=XO(this._regions,"polar");lt&&(function(nt,at,lt){void 0===lt&&(lt=!1),Object.keys(nt).forEach((function(Rt){var Bt=nt[Rt],Lt=Bt.attributes,Ht=Bt.currentValue,jt=Bt.cacheInfo,$t=Bt.coordKey;if(Lt){var Kt=!!Ht.size,te=lt&&!Kt&&N(jt),ne=te?jt:{"coord":0,"axis":null,"visible":Kt,"coordRange":[0,0],"sizeRange":[0,0],"labels":{"all":{"visible":!1,"text":"","offset":0}}};if(jt&&(jt._isCache=te),"valueField"===Rt&&(ne.sides=at.angleAxisHelper.getScale(0).domain().length),Ht.forEach((function(nt){var lt,Bt=nt.axis,Ht=nt.datum,jt=void 0===Ht?"":Ht,$t=Bt.niceLabelFormatter;if((null===(lt=Lt.label)||void 0===lt?void 0:lt.visible)&&(ne.labels.all.visible=!0,ne.labels.all.defaultFormatter=$t,ne.labels.all.text=jt,ne.labels.all.offset=jX(Bt.getSpec())),"categoryField"===Rt){var Kt=at.angleAxisHelper.dataToPosition([jt]),te=at.angleAxisHelper.getBandwidth(0),re=Bt.getOuterRadius();ne.coord=Kt,ne.coordRange=[Kt-te/2,Kt+te/2],ne.sizeRange=[re,re]}else Kt=Bt.startAngle,re=at.radiusAxisHelper.dataToPosition([jt]),ne.coord=re,ne.coordRange=[re,re],ne.sizeRange=[Kt,Kt];ne.axis=Bt})),ne&&!te&&ne.labels.all.visible&&Lt&&Lt.label){var re=ne.labels.all,ae=Lt.label,oe=vY(ae.formatMethod,ae.formatter,re.text,{"label":re.text,"orient":$t}),se=oe.formatFunc,le=oe.args;se?re.text=se.apply(void 0,P([],E(le),!1)):re.defaultFormatter&&(re.text=re.defaultFormatter(re.text))}nt[Rt].cacheInfo=ne}}))}(this._stateByField,lt,this.enableRemain),Object.keys(this._stateByField).forEach((function(nt){at._layoutByField(nt)})))}},e.prototype._layoutByField=function(nt){var at,lt,Rt,Bt=this._stateByField[nt],Lt=Bt.cacheInfo,Ht=Bt.attributes,jt=Bt.crosshairComp,$t=Bt.labelsComp,Kt=Bt.coordKey;if(!(!Lt||Lt._isCache&&this.enableRemain)){var te=this.getContainer(),ne=Lt.visible,re=Lt.labels,ae=Lt.coord,oe=Lt.sizeRange,se=Lt.axis;if(ne){var le=this.getLayoutStartPoint(),ue=null===(lt=null===(at=this._spec.valueField)||void 0===at?void 0:at.line)||void 0===lt?void 0:lt.smooth,ce=function(nt,at,lt){var Rt=nt.cacheInfo,Bt=nt.coordKey,Lt=nt.attributes,Ht=Rt.axis,jt=Rt.coord,$t=Rt.sizeRange,Kt=Rt.coordRange,te=Ht.getCenter(),ne={"x":te.x+at.x,"y":te.y+at.y};if("angle"===Bt)return"sector"==("rect"===Lt.type?"sector":"line")?{"center":ne,"innerRadius":Ht.getInnerRadius(),"radius":Ht.getOuterRadius(),"startAngle":Kt[0],"endAngle":Kt[1]}:{"start":Pe(ne,Ht.getInnerRadius(),jt),"end":Pe(ne,Ht.getOuterRadius(),jt)};var re=Ht.startAngle,ae=Ht.endAngle,oe=Rt.sides,se=jt;if(!lt){var le=Ht.getCenter(),ue=Ht.coordToPoint({"angle":$t[0],"radius":jt}),ce=Be(le,ue),he=(ae-re)/oe,de=Math.floor((ce-re)/he),fe=de*he+re,pe=Math.min((de+1)*he+re,ae),ve=Pe(le,jt,fe),Ae=Pe(le,jt,pe),we=ze([Ae.x,Ae.y],[ve.x,ve.y],[le.x,le.y],[ue.x,ue.y]);we&&(se=Ut(Ge.distancePN(ue,we[0],we[1])+jt,Ht.getInnerRadius(),Ht.getOuterRadius()))}return{"center":ne,"startAngle":re,"endAngle":ae,"radius":se,"sides":oe}}(this._stateByField[nt],le,ue);if(jt)jt.setAttributes(ce);else{var he,de=void 0;"angle"===Kt?"line"==(he="rect"===Ht.type?"sector":"line")?de=new GR(A(A({},ce),{"lineStyle":Ht.style,"zIndex":this.gridZIndex,"pickable":!1})):"sector"===he&&(de=new XR(A(A({},ce),{"sectorStyle":Ht.style,"zIndex":this.gridZIndex,"pickable":!1}))):de="polygon"==(he=ue?"circle":"polygon")?new KR(A(A({},ce),{"lineStyle":Ht.style,"zIndex":this.gridZIndex+1})):new YR(A(A({},ce),{"lineStyle":Ht.style,"zIndex":this.gridZIndex})),this._stateByField[nt].crosshairComp=de,te.add(de)}var fe=re.all;if(fe.visible){var pe=se.getCenter(),ve={"x":pe.x+le.x,"y":pe.y+le.y},Ae="angle"===Kt?function(nt){return{"align":(nt=Ie(nt))>=Math.PI*(5/3)||nt<=Math.PI*(1/3)?"left":nt>=Math.PI*(2/3)&&nt<=Math.PI*(4/3)?"right":"center","baseline":nt>=Math.PI*(7/6)&&nt<=Math.PI*(11/6)?"bottom":nt>=Math.PI*(1/6)&&nt<=Math.PI*(5/6)?"top":"middle"}}(ae):function(nt){return{"align":(nt=Ie(nt))>=Math.PI*(7/6)&&nt<=Math.PI*(11/6)?"right":nt>=Math.PI*(1/6)&&nt<=Math.PI*(5/6)?"left":"center","baseline":nt>=Math.PI*(5/3)||nt<=Math.PI*(1/3)?"bottom":nt>=Math.PI*(2/3)&&nt<=Math.PI*(4/3)?"top":"middle"}}(se.startAngle),we="angle"===Kt?Pe(ve,oe[1]+fe.offset,ae):Pe(ve,ce.radius,se.startAngle),Ce=A(A(A(A({},we),Ht.label),fe),{"textStyle":A(A({},null===(Rt=Ht.label)||void 0===Rt?void 0:Rt.textStyle),{"textAlign":Ae.align,"textBaseline":Ae.baseline}),"zIndex":this.labelZIndex});this._updateCrosshairLabel($t.all,Ce,(function(nt){nt.name="crosshair-".concat(Kt,"-label"),$t.all=nt}))}else $t.all&&$t.all.hideAll()}}},e.specKey="crosshair",e.type=lt.polarCrosshair,e}(R8),m8=function(){Tz.registerComponent(r6.type,r6)},_8=function(nt,at){var lt=at.getNewDomain,Rt=at.isContinuous,Bt=at.field,Lt=at.originalFields,Ht=Bt(),jt=lt();if(j(jt)||j(Ht))return nt;var $t=Lt(),Kt=X(Ht)?Ht[0]:Ht;return nt[Kt]&&$t&&$t[Kt]&&$t[Kt].lockStatisticsByDomain&&!Rt()&&(nt[Kt].values=jt),nt},b8=function(nt,at){var lt=at.getNewDomain,Rt=at.isContinuous,Bt=(0,at.field)(),Lt=lt();if(j(Lt)||j(Bt))return nt;if(0===Lt.length)return[];var Ht={};Lt.forEach((function(nt){Ht[nt]||(Ht[nt]=1)}));var jt=null;return jt=Rt()?function(nt){var at=!1;return xt(Bt).every((function(lt){nt[lt]>=Lt[0]&&nt[lt]<=kt(Lt)&&(at=!0)})),at}:function(nt){var at=!1;return xt(Bt).every((function(lt){(Ht[nt[lt]+""]||Ht[nt[lt]])&&(at=!0)})),at},nt.filter(jt)},x8=function(nt,at){var lt=at.input,Rt=lt.stateFields,Bt=lt.valueFields,Lt=lt.dataCollection,Ht=at.output,jt=Ht.stateField,$t=Ht.valueField,Kt={},te=[];return Lt.forEach((function(nt,at){var lt;if(!j(Rt[at])){var Lt=null===(lt=nt.getFields())||void 0===lt?void 0:lt[Rt[at]];Lt&&Lt.lockStatisticsByDomain&&Lt.domain.forEach((function(nt){Kt[nt]=0})),nt.latestData.forEach((function(nt){xt(Rt[at]).forEach((function(lt){j(nt[lt])||(j(Kt[nt[lt]])&&(Kt[nt[lt]]=0),j(Bt[at])||(Kt[nt[lt]]+=isNaN(parseFloat(nt[Bt[at]]))?1:parseFloat(nt[Bt[at]])))}))}))}})),Object.keys(Kt).forEach((function(nt,at){var lt,Rt=((lt={})[jt]=nt,lt);$t&&(Rt[$t]=Kt[nt]),te.push(Rt)})),te},s6=function(nt){function e(at,lt){var Rt=nt.call(this,at,lt)||this;return Rt.layoutType="none",Rt._orient="left",Rt._cacheVisibility=void 0,Rt._dataUpdating=!1,Rt._shouldChange=!0,Rt._stateField="x",Rt._activeRoam=!0,Rt._zoomAttr={"enable":!0,"rate":1,"focus":!0},Rt._dragAttr={"enable":!0,"rate":1,"reverse":!0},Rt._scrollAttr={"enable":!0,"rate":1,"reverse":!0},Rt.effect={"onZoomChange":function(nt){var at,lt,Bt=Rt._relatedAxisComponent;if(Bt&&"axis"===Rt._filterMode){var Lt=Bt.getScale(),Ht=Bt.getSpec();Rt._auto&&Rt._getAxisBandSize(Ht)&&Rt._spec.ignoreBandSize&&(Lt.bandwidth("auto"),Lt.maxBandwidth("auto"),Lt.minBandwidth("auto")),Rt._updateRangeFactor(nt),Rt._auto&&(null===(lt=null===(at=Rt._component)||void 0===at?void 0:at.setStartAndEnd)||void 0===lt||lt.call(at,Rt._start,Rt._end)),Bt.effect.scaleUpdate({"value":"force"})}else VO(Rt._regions,(function(nt){var at;null===(at=nt.getViewData())||void 0===at||at.markRunning()}),{"userId":Rt._seriesUserId,"specIndex":Rt._seriesIndex}),VO(Rt._regions,(function(nt){nt.reFilterViewData()}),{"userId":Rt._seriesUserId,"specIndex":Rt._seriesIndex})}},Rt._visible=!0,Rt._handleStateChange=function(nt,at,lt){var Bt,Lt;return Rt._startValue=nt,Rt._endValue=at,Rt._newDomain=Rt._parseDomainFromState(Rt._startValue,Rt._endValue),null===(Lt=(Bt=Rt.effect).onZoomChange)||void 0===Lt||Lt.call(Bt,lt),!0},Rt._handleChartZoom=function(nt,at){var lt,Bt;if(Rt._activeRoam&&(!Rt._zoomAttr.filter||Rt._zoomAttr.filter(nt,at))){var Lt=nt.zoomDelta,Ht=nt.zoomX,jt=nt.zoomY,$t=Rt._regions[0].getLayoutStartPoint(),Kt=$t.x,te=$t.y,ne=Rt._regions[0].getLayoutRect(),re=ne.width,ae=ne.height,oe=Math.abs(Rt._start-Rt._end),se=null!==(Bt=null===(lt=Rt._spec.roamZoom)||void 0===lt?void 0:lt.rate)&&void 0!==Bt?Bt:1;if(!(oe>=1&&Lt<1||oe<=.01&&Lt>1)){var le=Rt._isHorizontal?Ht:jt,ue=oe*(Lt-1)*se,ce=ue/2,he=ue/2;if(le){var de=Rt._isHorizontal?Kt:te,fe=Rt._isHorizontal?re:ae;ce=Math.abs(de-le)/Math.abs(fe-de)*ue,he=Math.abs(fe-le)/Math.abs(fe-de)*ue}var pe=Ut(Rt._start+ce,0,1),ve=Ut(Rt._end-he,0,1);Rt._handleChange(Math.min(pe,ve),Math.max(pe,ve),!0)}}},Rt._handleChartScroll=function(nt,at){var lt;if(!Rt._activeRoam||Rt._scrollAttr.filter&&!Rt._scrollAttr.filter(nt,at))return!1;var Bt=nt.scrollX,Lt=nt.scrollY,Ht=Rt._isHorizontal?Bt:Lt,jt=Rt._isHorizontal?fe(Bt/Lt)>=.5:fe(Lt/Bt)>=.5;Rt._scrollAttr.reverse||(Ht=-Ht),jt&&Rt._handleChartMove(Ht,null!==(lt=Rt._scrollAttr.rate)&&void 0!==lt?lt:1);var $t=0!==Rt._start&&1!==Rt._end;return jt&&$t},Rt._handleChartDrag=function(nt,at){var lt;if(Rt._activeRoam&&(!Rt._dragAttr.filter||Rt._dragAttr.filter(nt,at))){var Bt=E(nt,2),Lt=Bt[0],Ht=Bt[1],jt=Rt._isHorizontal?Lt:Ht;Rt._dragAttr.reverse&&(jt=-jt),Rt._handleChartMove(jt,null!==(lt=Rt._dragAttr.rate)&&void 0!==lt?lt:1)}},Rt._handleChartMove=function(nt,at){var lt=Rt._isHorizontal?Rt.getLayoutRect().width:Rt.getLayoutRect().height;if(Math.abs(nt)>=1e-6)if(nt>0&&Rt._end<1){var Bt=Math.min(1-Rt._end,nt/lt)*at;Rt._handleChange(Rt._start+Bt,Rt._end+Bt,!0)}else nt<0&&Rt._start>0&&(Bt=Math.max(-Rt._start,nt/lt)*at,Rt._handleChange(Rt._start+Bt,Rt._end+Bt,!0));return!1},Rt._orient=kW(at),Rt._isHorizontal="horizontal"===SW(Rt._orient),Rt}return S(e,nt),Object.defineProperty(e.prototype,"relatedAxisComponent",{"get":function(){return this._relatedAxisComponent},"enumerable":!1,"configurable":!0}),e.prototype.setStartAndEnd=function(nt,at,lt){void 0===lt&&(lt=["percent","percent"]);var Rt=E(lt,2),Bt=Rt[0],Lt=void 0===Bt?"percent":Bt,Ht=Rt[1],jt=void 0===Ht?"percent":Ht,$t="percent"===Lt?nt:this.dataToStatePoint(nt),Kt="percent"===jt?at:this.dataToStatePoint(at);this._handleChange($t,Kt,!0)},e.prototype.enableInteraction=function(){this._activeRoam=!0},e.prototype.disableInteraction=function(){this._activeRoam=!1},e.prototype.zoomIn=function(nt){this._handleChartZoom({"zoomDelta":1.2,"zoomX":null==nt?void 0:nt.x,"zoomY":null==nt?void 0:nt.y})},e.prototype.zoomOut=function(nt){this._handleChartZoom({"zoomDelta":.8,"zoomX":null==nt?void 0:nt.x,"zoomY":null==nt?void 0:nt.y})},e.prototype._handleChange=function(nt,at,lt){var Rt,Bt;null!==(Bt=null===(Rt=this._spec)||void 0===Rt?void 0:Rt.zoomLock)&&void 0!==Bt&&Bt||at-nt!==this._spanCache&&(at-nt<this._minSpan||at-nt>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=at-nt)},e.prototype._isReverse=function(){var nt=this._relatedAxisComponent;if(!nt)return!1;var at=nt.getScale();return at.range()[0]>at.range()[1]&&(!nt.getInverse()||this._isHorizontal)},e.prototype._updateRangeFactor=function(nt){var at=this._relatedAxisComponent.getScale(),lt=this._isReverse(),Rt=lt?[1-this._end,1-this._start]:[this._start,this._end];if(lt)switch(nt){case"startHandler":at.rangeFactorEnd(Rt[1]);break;case"endHandler":at.rangeFactorStart(Rt[0]);break;default:at.rangeFactorStart(Rt[0],!0),at.rangeFactorEnd(Rt[1])}else switch(nt){case"startHandler":at.rangeFactorStart(Rt[0]);break;case"endHandler":at.rangeFactorEnd(Rt[1]);break;default:at.rangeFactorEnd(Rt[1],!0),at.rangeFactorStart(Rt[0])}var Bt=at.rangeFactor();Bt?(this._start=lt?1-Bt[1]:Bt[0],this._end=lt?1-Bt[0]:Bt[1]):(this._start=0,this._end=1)},Object.defineProperty(e.prototype,"visible",{"get":function(){return this._visible},"enumerable":!1,"configurable":!0}),e.prototype.created=function(){nt.prototype.created.call(this),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()},e.prototype.initLayout=function(){nt.prototype.initLayout.call(this),this._layout&&(this._layout.layoutOrient=this._orient)},e.prototype._setAxisFromSpec=function(){var nt=this;if(N(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):N(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),j(this._spec.field)&&!this._relatedAxisComponent){var at=this._option.getComponentsByKey("axes"),lt=at.find((function(at){return at._orient===nt._orient}));if(lt)this._relatedAxisComponent=lt;else{var Rt=at.find((function(nt){return!FB(nt.getScale().type)}));this._relatedAxisComponent=Rt}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)},e.prototype._setRegionsFromSpec=function(){var nt,at;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();var lt=this._relatedAxisComponent?null===(at=(nt=this._relatedAxisComponent).getBindSeriesFilter)||void 0===at?void 0:at.call(nt):null;if(N(lt)&&(N(lt.userId)&&(this._seriesUserId=xt(lt.userId)),N(lt.specIndex)&&(this._seriesIndex=xt(lt.specIndex))),N(this._spec.seriesId)){var Rt=xt(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter((function(nt){return Rt.includes(nt)})):this._seriesUserId=Rt}if(N(this._spec.seriesIndex)){var Bt=xt(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter((function(nt){return Bt.includes(nt)})):this._seriesIndex=Bt}if(N(this._spec.regionIndex)){var Lt=this._option.getRegionsInIndex(xt(this._spec.regionIndex));this._regions=this._regions.filter((function(nt){return Lt.includes(nt)}))}else if(N(this._spec.regionId)){var Ht=xt(this._spec.regionId);this._regions=Ht.length?this._regions.filter((function(nt){return Ht.includes(nt.id)})):[]}},e.prototype.onDataUpdate=function(){var nt,at=this._computeDomainOfStateScale(FB(this._stateScale.type));this._stateScale.domain(at,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!mt(this._domainCache,at)&&(this._domainCache=at,this._dataUpdating=!0,null===(nt=this.getChart())||void 0===nt||nt.setLayoutTag(!0,null,!1))},e.prototype._computeDomainOfStateScale=function(nt){var at=this;if(this._spec.customDomain)return this._spec.customDomain;var lt=this._data.getLatestData().map((function(nt){return nt[at._stateField]}));if(nt){var Rt=lt.map((function(nt){return 1*nt}));return lt.length?[At(Rt),St(Rt)]:[-1/0,1/0]}return lt},e.prototype._initEvent=function(){this._initCommonEvent()},e.prototype._initData=function(){var nt=this,at=[],lt=[],Rt=[];if(this._relatedAxisComponent){var Bt={};VO(this._regions,(function(Lt){var Ht,jt,$t="cartesian"===Lt.coordinate?Lt.getXAxisHelper():"polar"===Lt.coordinate?Lt.angleAxisHelper:null,Kt="cartesian"===Lt.coordinate?Lt.getYAxisHelper():"polar"===Lt.coordinate?Lt.radiusAxisHelper:null;if($t&&Kt){var te=$t.getAxisId()===nt._relatedAxisComponent.id?$t:Kt.getAxisId()===nt._relatedAxisComponent.id?Kt:nt._isHorizontal?$t:Kt,ne=te===$t?Kt:$t,re=FB(ne.getScale(0).type),ae=FB(te.getScale(0).type);at.push(Lt.getRawData());var oe=Lt.getSpec(),se="cartesian"===Lt.coordinate?xt(oe.xField):xt(null!==(Ht=oe.angleField)&&void 0!==Ht?Ht:oe.categoryField),le="cartesian"===Lt.coordinate?xt(oe.yField):xt(null!==(jt=oe.radiusField)&&void 0!==jt?jt:oe.valueField);if(Bt[Lt.id]="link"===Lt.type?["from_xField"]:te===$t?se:le,ae?lt.push(Bt[Lt.id]):lt.push(Bt[Lt.id][0]),nt._valueField){var ue="link"===Lt.type?["from_yField"]:ne===$t?se:le;re&&Rt.push.apply(Rt,P([],E(ue),!1))}}}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}),this._originalStateFields=Bt}else VO(this._regions,(function(Bt){at.push(Bt.getRawData()),lt.push(nt._field),nt._valueField&&Rt.push(nt._spec.valueField)}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex});var Lt=this._option.dataSet;WW(Lt,"dataview",as),GW(Lt,"dataFilterComputeDomain",x8);var Ht=new Es(Lt,{"name":"".concat(this.type,"_").concat(this.id,"_data")});Ht.transform({"type":"dataFilterComputeDomain","options":{"input":{"dataCollection":at,"stateFields":lt,"valueFields":Rt},"output":{"stateField":this._stateField,"valueField":this._valueField}}},!1),this._data=new oY(this._option,Ht),Ht.reRunAllTransform(),Lt.multipleDataViewAddListener(at,"change",this._handleDataCollectionChange.bind(this))},e.prototype.setAttrFromSpec=function(){var at;nt.prototype.setAttrFromSpec.call(this),!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=ft({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=ft({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=ft({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null===(at=this._spec.visible)||void 0===at||at},e.prototype.statePointToData=function(nt){var at=this._stateScale,lt=at.domain();if(FB(at.type))return this._isReverse()?lt[0]+(kt(lt)-lt[0])*(1-nt):lt[0]+(kt(lt)-lt[0])*nt;var Rt=at.range();this._isReverse()&&(Rt=Rt.slice().reverse());var Bt=Rt[0]+(kt(Rt)-Rt[0])*nt;return at.invert(Bt)},e.prototype.dataToStatePoint=function(nt){var at=this._stateScale,lt=at.scale(nt),Rt=at.range();return!this._isHorizontal&&FB(at.type)&&(Rt=Rt.slice().reverse()),(lt-Rt[0])/(kt(Rt)-Rt[0])},e.prototype._modeCheck=function(nt,at){return"start"===nt?"percent"===at&&N(this._spec.start)||"value"===at&&N(this._spec.startValue):"percent"===at&&N(this._spec.end)||"value"===at&&N(this._spec.endValue)},e.prototype._setStateFromSpec=function(){var nt,at,lt,Rt;if(this._auto=!!this._spec.auto,this._spec.rangeMode){var Bt=E(this._spec.rangeMode,2),Lt=Bt[0],Ht=Bt[1];this._modeCheck("start",Lt)&&this._modeCheck("end",Ht)&&(lt="percent"===Lt?this._spec.start:this.dataToStatePoint(this._spec.startValue),Rt="percent"===Ht?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else lt=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,Rt=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this.statePointToData(lt),this._endValue=this.statePointToData(Rt),this._start=lt,this._end=Rt,this._minSpan=null!==(nt=this._spec.minSpan)&&void 0!==nt?nt:0,this._maxSpan=null!==(at=this._spec.maxSpan)&&void 0!==at?at:1,FB(this._stateScale.type)&&this._stateScale.domain()[0]!==kt(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/(kt(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/(kt(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))},e.prototype._parseFieldOfSeries=function(nt){var at;return null===(at=this._originalStateFields)||void 0===at?void 0:at[nt.id]},e.prototype._initStateScale=function(){var nt=[0,1];if(this._relatedAxisComponent){var at=this._relatedAxisComponent.getScale(),lt=FB(at.type),Rt=this._computeDomainOfStateScale(lt);if(this._stateScale=at.clone(),lt){var Bt=Rt.map((function(nt){return 1*nt}));this._stateScale.domain(Rt.length?[At(Bt),St(Bt)]:[0,1],!0).range(nt)}else this._stateScale.domain(Rt,!0).range(nt)}else this._stateScale=new LI,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(nt)},e.prototype.init=function(at){nt.prototype.init.call(this,at),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()},e.prototype._addTransformToSeries=function(){var nt=this;this._relatedAxisComponent&&"axis"===this._filterMode||(GW(this._option.dataSet,"dataFilterWithNewDomain",b8),GW(this._option.dataSet,"lockStatisticsFilter",_8),VO(this._regions,(function(at){at.getViewDataStatistics().transform({"type":"lockStatisticsFilter","options":{"originalFields":function(){return at.getViewDataStatistics().getFields()},"getNewDomain":function(){return nt._newDomain},"field":function(){var lt;return null!==(lt=nt._field)&&void 0!==lt?lt:nt._parseFieldOfSeries(at)},"isContinuous":function(){return FB(nt._stateScale.type)}},"level":1},!1),at.addViewDataFilter({"type":"dataFilterWithNewDomain","options":{"getNewDomain":function(){return nt._newDomain},"field":function(){var lt;return null!==(lt=nt._field)&&void 0!==lt?lt:nt._parseFieldOfSeries(at)},"isContinuous":function(){return FB(nt._stateScale.type)}},"level":vU.dataZoomFilter})}),{"userId":this._seriesUserId,"specIndex":this._seriesIndex}))},e.prototype.onRender=function(nt){},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return Rt.reMake||mt(lt,at)||(Rt.reRender=!0,Rt.reMake=!0),Rt},e.prototype.reInit=function(at){var lt=this;nt.prototype.reInit.call(this,at),this._marks.forEach((function(nt){nt.getMarks().forEach((function(nt){lt.initMarkStyleWithSpec(nt,lt._spec[nt.name])}))}))},e.prototype.changeRegions=function(){},e.prototype.update=function(nt){},e.prototype.resize=function(nt){},e.prototype._parseDomainFromState=function(nt,at){if(FB(this._stateScale.type))return[Math.min(at,nt),Math.max(at,nt)];var lt=this._stateScale.domain(),Rt=lt.indexOf(nt),Bt=lt.indexOf(at);return lt.slice(Math.min(Rt,Bt),Math.max(Rt,Bt)+1)},e.prototype._initCommonEvent=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt={"delayType":null!==(at=null===(nt=this._spec)||void 0===nt?void 0:nt.delayType)&&void 0!==at?at:"throttle","delayTime":N(null===(lt=this._spec)||void 0===lt?void 0:lt.delayType)?null!==(Bt=null===(Rt=this._spec)||void 0===Rt?void 0:Rt.delayTime)&&void 0!==Bt?Bt:30:0,"realTime":null===(Ht=null===(Lt=this._spec)||void 0===Lt?void 0:Lt.realTime)||void 0===Ht||Ht,"allowComponentZoom":!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,jt),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,jt),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,jt)},e.prototype.updateLayoutAttribute=function(){this._visible&&this._createOrUpdateComponent(),nt.prototype.updateLayoutAttribute.call(this)},e.prototype._autoVisible=function(nt){var at,lt;if(this._auto){nt?this.show():this.hide();var Rt=this._isHorizontal?"height":"width";this.layout.setLayoutRect(((at={})[Rt]=nt?this["_".concat(Rt)]:0,at),((lt={})[Rt]=EU.Built_In,lt))}},e.prototype.onLayoutStart=function(at,lt,Rt){nt.prototype.onLayoutStart.call(this,at,lt,Rt);var Bt=this._autoUpdate(at);this._autoVisible(Bt),this._dataUpdating=!1},e.prototype.onLayoutEnd=function(at){var lt=!(0===this._start&&1===this._end);this._autoVisible(lt),nt.prototype.onLayoutEnd.call(this,at)},e.prototype.getBoundsInRect=function(nt){var at={"x1":this.getLayoutStartPoint().x,"y1":this.getLayoutStartPoint().y,"x2":0,"y2":0};return this._isHorizontal?(at.y2=at.y1+this._height,at.x2=at.x1+nt.width):(at.x2=at.x1+this._width,at.y2=at.y1+nt.height),at},e.prototype.hide=function(){var nt;null===(nt=this._component)||void 0===nt||nt.hideAll()},e.prototype.show=function(){var nt;null===(nt=this._component)||void 0===nt||nt.showAll()},e.prototype._getAxisBandSize=function(nt){var at=null==nt?void 0:nt.bandSize,lt=null==nt?void 0:nt.maxBandSize,Rt=null==nt?void 0:nt.minBandSize;if(at||Rt||lt)return{"bandSize":at,"maxBandSize":lt,"minBandSize":Rt}},e.prototype._autoUpdate=function(nt){var at,Rt,Bt,Lt,Ht,jt;if(!this._auto)return this._cacheVisibility=void 0,!0;var $t=this._relatedAxisComponent,Kt=null==$t?void 0:$t.getSpec(),te=null==$t?void 0:$t.getScale(),ne=this._getAxisBandSize(Kt);if(!this._dataUpdating&&HB(te.type)&&(null==nt?void 0:nt.height)===(null===(at=this._cacheRect)||void 0===at?void 0:at.height)&&(null==nt?void 0:nt.width)===(null===(Rt=this._cacheRect)||void 0===Rt?void 0:Rt.width)&&this._fixedBandSize===(null==ne?void 0:ne.bandSize))return this._cacheVisibility;var re=!0;if(this._isHorizontal&&(null==nt?void 0:nt.width)!==(null===(Bt=this._cacheRect)||void 0===Bt?void 0:Bt.width)?te.range($t.getInverse()?[nt.width,0]:[0,nt.width]):(null==nt?void 0:nt.height)!==(null===(Lt=this._cacheRect)||void 0===Lt?void 0:Lt.height)&&te.range($t.getInverse()?[0,nt.height]:[nt.height,0]),this._cacheRect={"width":null==nt?void 0:nt.width,"height":null==nt?void 0:nt.height},this._fixedBandSize=null==ne?void 0:ne.bandSize,HB(te.type)){ne&&(this._start||this._end)&&(this.type===lt.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());var ae=E(null!==(Ht=te.rangeFactor())&&void 0!==Ht?Ht:[],2),oe=ae[0],se=ae[1];re=!(j(oe)&&j(se)||0===oe&&1===se)}else{var le=E(null!==(jt=te.rangeFactor())&&void 0!==jt?jt:[this._start,this._end],2);oe=le[0],se=le[1],re=!(0===oe&&1===se)}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=re,re},e.prototype._getNeedClearVRenderComponents=function(){return[this._component]},e}(s$);bt(s6,NK);var c6=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._mergeThemeToSpec=function(nt,at){var lt=this,Rt=this._theme,Bt=nt;if(this._shouldMergeThemeToSpec()){var a=function(nt){var at=gz({"selectedBackgroundChart":{"line":{},"area":{}}},lt._theme,nt),Rt=nt.selectedBackgroundChart,Bt=void 0===Rt?{}:Rt,Lt=Bt.line,Ht=Bt.area;return Lt&&!1!==Lt.visible&&(at.selectedBackgroundChart.line.style=A(A({},at.selectedBackgroundChart.line.style),{"visible":!0})),Ht&&!1!==Ht.visible&&(at.selectedBackgroundChart.area.style=A(A({},at.selectedBackgroundChart.area.style),{"visible":!0})),at},Lt=nt;Bt=X(Lt)?Lt.map((function(nt){return a(nt)})):a(Lt)}return this._adjustPadding(Bt),{"spec":Bt,"theme":Rt}},e}(a$),h6=function(nt){function e(at,Rt){var Bt,Lt=this;return(Lt=nt.call(this,at,Rt)||this).type=lt.dataZoom,Lt.name=lt.dataZoom,Lt.transformerConstructor=c6,Lt.specKey="dataZoom",Lt.layoutZIndex=MU.DataZoom,Lt.layoutLevel=TU.DataZoom,Lt.layoutType="region-relative",Lt._isReverseCache=!1,Lt._dataToPositionX=function(nt){var at="left"===Lt._orient?Lt._middleHandlerSize:0,lt=Lt._isHorizontal?Lt._startHandlerSize/2:0,Rt=Lt._isHorizontal?Lt._stateScale:Lt._valueScale,Bt=Lt._isHorizontal?Lt._stateField:Lt._valueField;return Rt.scale(nt[Bt])+Lt.getLayoutStartPoint().x+at+lt},Lt._dataToPositionX2=function(nt){var at="left"===Lt._orient?Lt._middleHandlerSize:0,lt=Lt._isHorizontal?Lt._startHandlerSize/2:0,Rt=Lt._isHorizontal?Lt._stateScale:Lt._valueScale,Bt=Rt.domain()[0];return Rt.scale(Bt)+Lt.getLayoutStartPoint().x+at+lt},Lt._dataToPositionY=function(nt){var at=Lt._isHorizontal?Lt._middleHandlerSize:0,lt=Lt._isHorizontal?0:Lt._startHandlerSize/2,Rt=Lt._isHorizontal?Lt._valueScale:Lt._stateScale,Bt=Lt._isHorizontal?Lt._valueField:Lt._stateField;return Rt.scale(nt[Bt])+Lt.getLayoutStartPoint().y+at+lt},Lt._dataToPositionY2=function(nt){var at=Lt._isHorizontal?Lt._middleHandlerSize:0,lt=Lt._isHorizontal?0:Lt._startHandlerSize/2,Rt=Lt._isHorizontal?Lt._valueScale:Lt._stateScale,Bt=Rt.domain()[0];return Rt.scale(Bt)+Lt.getLayoutStartPoint().y+at+lt},Lt._valueField="y",Lt._filterMode=null!==(Bt=at.filterMode)&&void 0!==Bt?Bt:"filter",Lt}return S(e,nt),e.prototype.created=function(){nt.prototype.created.call(this),this._initValueScale()},e.prototype.setAttrFromSpec=function(){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te;nt.prototype.setAttrFromSpec.call(this),z(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=null!==(lt=null===(at=this._spec.background)||void 0===at?void 0:at.size)&&void 0!==lt?lt:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),j(null===(Lt=null===(Bt=null===(Rt=this._spec)||void 0===Rt?void 0:Rt.startHandler)||void 0===Bt?void 0:Bt.style)||void 0===Lt?void 0:Lt.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),j(null===($t=null===(jt=null===(Ht=this._spec)||void 0===Ht?void 0:Ht.endHandler)||void 0===jt?void 0:jt.style)||void 0===$t?void 0:$t.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);var ne=null===(Kt=this._spec.startHandler.style.visible)||void 0===Kt||Kt,re=null===(te=this._spec.endHandler.style.visible)||void 0===te||te;this._startHandlerSize=ne?this._spec.startHandler.style.size:0,this._endHandlerSize=re?this._spec.endHandler.style.size:0},e.prototype.onLayoutEnd=function(at){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),!1!==this._cacheVisibility&&nt.prototype.onLayoutEnd.call(this,at)},e.prototype._initValueScale=function(){var nt=this._computeDomainOfValueScale();if(nt){var at=new EB;at.domain(nt),this._valueScale=at}},e.prototype._updateScaleRange=function(){var nt,at,lt=this._startHandlerSize+this._endHandlerSize;if(this._stateScale&&this._valueScale){var Rt,Bt=this._isHorizontal?this.getLayoutRect().width-lt:this.getLayoutRect().height-lt,Lt=null!==(at=null===(nt=this._relatedAxisComponent)||void 0===nt?void 0:nt.getScale().range())&&void 0!==at?at:[this._startHandlerSize/2,Bt+this._startHandlerSize/2],Ht=this._computeWidth(),jt=this._computeHeight();this._isHorizontal?(Rt=this._visible?[this._startHandlerSize/2,Ht-lt+this._startHandlerSize/2]:Lt,this._stateScale.range(Rt),this._valueScale.range([jt-this._middleHandlerSize,0])):(Rt=this._visible?[this._startHandlerSize/2,jt-lt+this._startHandlerSize/2]:Lt,this._stateScale.range(Rt),"left"===this.layoutOrient?this._valueScale.range([Ht-this._middleHandlerSize,0]):this._valueScale.range([0,Ht-this._middleHandlerSize])),this._component&&!1!==this._cacheVisibility&&this._component.setAttributes({"size":{"width":Ht,"height":jt},"position":{"x":this.getLayoutStartPoint().x,"y":this.getLayoutStartPoint().y}})}},e.prototype._computeDomainOfValueScale=function(){var nt=this,at=this._data.getLatestData().map((function(at){return at[nt._valueField]})),lt=at.map((function(nt){return 1*nt}));return at.length?[At(lt),St(lt)]:null},e.prototype._computeMiddleHandlerSize=function(){var nt,at,lt,Rt,Bt=0;if(null===(at=null===(nt=this._spec)||void 0===nt?void 0:nt.middleHandler)||void 0===at?void 0:at.visible){var Lt=null!==(lt=this._spec.middleHandler.icon.style.size)&&void 0!==lt?lt:8,Ht=null!==(Rt=this._spec.middleHandler.background.size)&&void 0!==Rt?Rt:40;Bt+=Math.max(Lt,Ht)}return Bt},e.prototype._computeWidth=function(){return!1===this._visible?0:Z(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize},e.prototype._computeHeight=function(){return!1===this._visible?0:Z(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height},e.prototype._isScaleValid=function(nt){if(!nt||!nt.domain())return!1;var at,lt=nt.domain();return!(FB(nt.type)&&lt[0]===kt(lt)||HB(nt.type)&&1===(at=lt,at&&X(at)?Array.from(new Set(xt(at))):at).length)},e.prototype._getAttrs=function(nt){var at,lt,Rt,Bt,Lt,Ht=null!==(at=this._spec)&&void 0!==at?at:{};return A({"zIndex":this.layoutZIndex,"start":this._start,"end":this._end,"position":{"x":this.getLayoutStartPoint().x,"y":this.getLayoutStartPoint().y},"orient":this._orient,"size":{"width":this._computeWidth(),"height":this._computeHeight()},"showDetail":Ht.showDetail,"brushSelect":null!==(lt=Ht.brushSelect)&&void 0!==lt&&lt,"zoomLock":null!==(Rt=Ht.zoomLock)&&void 0!==Rt&&Rt,"minSpan":this._minSpan,"maxSpan":this._maxSpan,"delayType":Ht.delayType,"delayTime":N(Ht.delayType)?null!==(Bt=Ht.delayTime)&&void 0!==Bt?Bt:30:0,"realTime":null===(Lt=Ht.realTime)||void 0===Lt||Lt,"previewData":nt&&this._data.getLatestData(),"previewPointsX":nt&&this._dataToPositionX,"previewPointsY":nt&&this._dataToPositionY,"tolerance":this._spec.tolerance},this._getComponentAttrs(nt))},e.prototype._createOrUpdateComponent=function(){var nt=this;if(this._visible){var at=this._isHorizontal?this._stateScale:this._valueScale,lt=this._isHorizontal?this._valueScale:this._stateScale,Rt=this._isScaleValid(at)&&this._isScaleValid(lt)&&!1!==this._spec.showBackgroundChart,Bt=this._getAttrs(Rt);if(this._component)this._component.setAttributes(Bt);else{var Lt=this.getContainer();this._component=new mD(Bt),this._isHorizontal?Rt&&this._component.setPreviewPointsY1(this._dataToPositionY2):Rt&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData((function(at){return nt.statePointToData(at)})),this._component.addEventListener("change",(function(at){var lt=at.detail,Rt=lt.start,Bt=lt.end,Lt=lt.tag;nt._handleChange(Rt,Bt,void 0,Lt)})),Lt.add(this._component),this._updateScaleRange()}}},e.prototype._handleChange=function(at,lt,Rt,Bt){if(nt.prototype._handleChange.call(this,at,lt,Rt),this._shouldChange){Rt&&this._component&&this._component.setStartAndEnd(at,lt),this._start=at,this._end=lt;var Lt=this.statePointToData(at),Ht=this.statePointToData(lt);(H(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(at,lt,Lt,Ht):this._handleStateChange(Lt,Ht,Bt))&&this.event.emit(jW.dataZoomChange,{"model":this,"value":{"filterData":"axis"!==this._filterMode,"start":at,"end":lt,"startValue":this._startValue,"endValue":this._endValue,"newDomain":this._newDomain}})}},e.prototype._handleDataCollectionChange=function(){var nt,at=this._data.getDataView();if(at.reRunAllTransform(),null===(nt=this._component)||void 0===nt||nt.setPreviewData(at.latestData),this._valueScale){var lt=this._computeDomainOfValueScale();lt&&this._valueScale.domain(lt)}},e.prototype._getComponentAttrs=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re=this._spec,ae=re.middleHandler,oe=void 0===ae?{}:ae,se=re.startText,le=void 0===se?{}:se,ue=re.endText,ce=void 0===ue?{}:ue,he=re.backgroundChart,de=void 0===he?{}:he,fe=re.selectedBackgroundChart,pe=void 0===fe?{}:fe;return{"backgroundStyle":HH(null===(at=this._spec.background)||void 0===at?void 0:at.style),"startHandlerStyle":HH(null===(lt=this._spec.startHandler)||void 0===lt?void 0:lt.style),"middleHandlerStyle":oe.visible?{"visible":!0,"icon":HH(null===(Rt=oe.icon)||void 0===Rt?void 0:Rt.style),"background":{"size":null===(Bt=oe.background)||void 0===Bt?void 0:Bt.size,"style":HH(null===(Lt=oe.background)||void 0===Lt?void 0:Lt.style)}}:{"visible":!1},"endHandlerStyle":HH(null===(Ht=this._spec.endHandler)||void 0===Ht?void 0:Ht.style),"startTextStyle":{"padding":le.padding,"formatMethod":this._getHandlerTextFormatMethod(le),"textStyle":HH(le.style)},"endTextStyle":{"padding":ce.padding,"formatMethod":this._getHandlerTextFormatMethod(ce),"textStyle":HH(ce.style)},"selectedBackgroundStyle":HH(this._spec.selectedBackground.style),"dragMaskStyle":HH(null===(jt=this._spec.dragMask)||void 0===jt?void 0:jt.style),"backgroundChartStyle":nt?{"line":gz(HH(null===($t=de.line)||void 0===$t?void 0:$t.style),{"fill":!1}),"area":A({"curveType":"basis","visible":!0},HH(null===(Kt=de.area)||void 0===Kt?void 0:Kt.style))}:{"line":{"visible":!1},"area":{"visible":!1}},"selectedBackgroundChartStyle":nt?{"line":gz(HH(null===(te=pe.line)||void 0===te?void 0:te.style),{"fill":!1}),"area":A({"curveType":"basis","visible":!0},HH(null===(ne=pe.area)||void 0===ne?void 0:ne.style))}:{"line":{"visible":!1},"area":{"visible":!1}},"disableTriggerEvent":this._option.disableTriggerEvent}},e.prototype._getHandlerTextFormatMethod=function(nt){var at=nt.formatMethod,lt=nt.formatter,Rt=vY(at,lt).formatFunc;return Rt?function(nt){return Rt(nt,{"label":nt},lt)}:void 0},e.prototype._getNeedClearVRenderComponents=function(){return[this._component]},e.prototype.clear=function(){if(this._component){var at=this.getContainer();this._component.removeAllChild(),at&&at.removeChild(this._component),this._component=null}nt.prototype.clear.call(this)},e.type=lt.dataZoom,e.transformerConstructor=c6,e.specKey="dataZoom",e}(s6),w8=function(){Tz.registerComponent(h6.type,h6)},d6=function(nt){function e(at,Rt){var Bt,Lt=this;return(Lt=nt.call(this,at,Rt)||this).type=lt.scrollBar,Lt.name=lt.scrollBar,Lt.specKey="scrollBar",Lt.layoutZIndex=MU.DataZoom,Lt.layoutLevel=TU.DataZoom,Lt.layoutType="region-relative",Lt._filterMode=null!==(Bt=at.filterMode)&&void 0!==Bt?Bt:"axis",Lt}return S(e,nt),e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),z(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)},e.prototype.onLayoutEnd=function(at){var lt,Rt;this._updateScaleRange(),null===(Rt=(lt=this.effect).onZoomChange)||void 0===Rt||Rt.call(lt),nt.prototype.onLayoutEnd.call(this,at)},e.prototype._updateScaleRange=function(){this._component&&this._component.setAttributes({"x":this.getLayoutStartPoint().x,"y":this.getLayoutStartPoint().y,"width":this.getLayoutRect().width,"height":this.getLayoutRect().height})},e.prototype._computeWidth=function(){return Z(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:12},e.prototype._computeHeight=function(){return Z(this._spec.height)?this._spec.height:this._isHorizontal?12:this.getLayoutRect().height},e.prototype._getAttrs=function(){var nt,at,lt,Rt,Bt,Lt;return A({"zIndex":this.layoutZIndex,"x":this.getLayoutStartPoint().x,"y":this.getLayoutStartPoint().y,"width":this.getLayoutRect().width,"height":this.getLayoutRect().height,"range":[this._start,this._end],"direction":this._isHorizontal?"horizontal":"vertical","delayType":null===(nt=this._spec)||void 0===nt?void 0:nt.delayType,"delayTime":N(null===(at=this._spec)||void 0===at?void 0:at.delayType)?null!==(Rt=null===(lt=this._spec)||void 0===lt?void 0:lt.delayTime)&&void 0!==Rt?Rt:30:0,"realTime":null===(Lt=null===(Bt=this._spec)||void 0===Bt?void 0:Bt.realTime)||void 0===Lt||Lt},this._getComponentAttrs())},e.prototype._createOrUpdateComponent=function(){var nt=this,at=this._getAttrs();if(this._component)this._component.setAttributes(at);else{var lt=this.getContainer();this._component=new mR(at),this._component.addEventListener("scrollDrag",(function(at){var lt=at.detail.value;nt._handleChange(lt[0],lt[1])})),this._component.addEventListener("scrollUp",(function(at){var lt=at.detail.value;nt._handleChange(lt[0],lt[1])})),lt.add(this._component)}},e.prototype._handleChange=function(at,lt,Rt){nt.prototype._handleChange.call(this,at,lt,Rt);var Bt=sF(this._start,at)&&sF(this._end,lt);if(this._shouldChange&&(!Bt||!1===this._spec.realTime)){Rt&&this._component&&this._component.setAttribute("range",[at,lt]),this._start=at,this._end=lt;var Lt=this.statePointToData(at),Ht=this.statePointToData(lt);(H(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(at,lt,Lt,Ht):this._handleStateChange(this.statePointToData(at),this.statePointToData(lt)))&&this.event.emit(jW.scrollBarChange,{"model":this,"value":{"filterData":"axis"!==this._filterMode,"start":this._start,"end":this._end,"startValue":this._startValue,"endValue":this._endValue,"newDomain":this._newDomain}})}},e.prototype._handleDataCollectionChange=function(){this._spec.auto&&this._data.getDataView().reRunAllTransform()},e.prototype._getComponentAttrs=function(){var nt=this._spec,at=nt.rail,lt=nt.slider,Rt=nt.innerPadding,Bt={};return j(Rt)||(Bt.padding=Rt),ot(null==at?void 0:at.style)||(Bt.railStyle=HH(at.style)),ot(null==lt?void 0:lt.style)||(Bt.sliderStyle=HH(lt.style)),Bt.disableTriggerEvent=this._option.disableTriggerEvent,Bt},e.prototype._getNeedClearVRenderComponents=function(){return[this._component]},e.type=lt.scrollBar,e.specKey="scrollBar",e}(s6),T8=function(){Tz.registerComponent(d6.type,d6)},C8=function(nt,at){var lt=at.datum,Rt=at.title,Bt=at.content,Lt=[],Ht=lt.call(null);return Rt.visible&&Lt.push({"type":"title","index":0,"datum":Ht,"spec":Rt}),xt(Bt).forEach((function(nt,at){nt.visible&&Lt.push({"type":"content","index":at,"datum":Ht,"spec":nt})})),Lt},f6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.indicator,at.name=lt.indicator,at.specKey="indicator",at.layoutType="none",at.layoutZIndex=MU.Indicator,at.layoutLevel=TU.Indicator,at._gap=0,at._activeDatum=null,at}return S(e,nt),e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return nt&&!1!==nt.visible}))},e.prototype.created=function(){nt.prototype.created.call(this),this.initData(),this.initEvent()},e.prototype.setAttrFromSpec=function(){nt.prototype.setAttrFromSpec.call(this),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=xt(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex(xt(this._spec.regionId),xt(this._spec.regionIndex))},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(nt){},e.prototype.initEvent=function(){var nt,at=this;if(!this._option.disableTriggerEvent&&"none"!==this._spec.trigger){var lt=null===(nt=this.getCompiler())||void 0===nt?void 0:nt.getVGrammarView();lt&&("hover"===this._spec.trigger?(lt.addEventListener("element-highlight:start",(function(nt){at.isRelativeModel(nt.options.regionId)&&at.updateDatum(nt.elements[0].getDatum())})),lt.addEventListener("element-highlight:reset",(function(nt){at.isRelativeModel(nt.options.regionId)&&at.updateDatum(null)}))):(lt.addEventListener("element-select:start",(function(nt){at.isRelativeModel(nt.options.regionId)&&at.updateDatum(nt.elements[0].getDatum())})),lt.addEventListener("element-select:reset",(function(nt){at.isRelativeModel(nt.options.regionId)&&at.updateDatum(null)}))))}},e.prototype.updateDatum=function(nt){this._activeDatum=nt,this._displayData.updateData();var at=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(at)},e.prototype.initData=function(){var nt=this;GW(this._option.dataSet,"indicatorFilter",C8);var at=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_data")});at.transform({"type":"indicatorFilter","options":{"title":this._title,"content":this._content,"datum":function(){return nt._activeDatum}}}),at.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new oY(this._option,at)},e.prototype.updateLayoutAttribute=function(){var at=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(at),nt.prototype.updateLayoutAttribute.call(this)},e.prototype._getIndicatorAttrs=function(){var nt=this;if(!1===this._spec.visible||!1===this._spec.fixed&&null===this._activeDatum)return{"visible":!1};var at=this._regions[0],lt=at.getLayoutRect(),Rt=lt.width,Bt=lt.height,Lt=at.getLayoutStartPoint(),Ht=Lt.x,jt=Lt.y,$t=this._spec,Kt=$t.content,te=$t.offsetX,ne=$t.offsetY,re=$t.limitRatio,ae=$t.title,oe=w($t,["content","offsetX","offsetY","limitRatio","title"]),se=[];return xt(Kt).forEach((function(at){var lt=gz({},nt._theme.content,at);se.push({"visible":!1!==lt.visible&&(!lt.field||null!==nt._activeDatum),"space":lt.space||nt._gap,"autoLimit":lt.autoLimit,"autoFit":lt.autoFit,"fitPercent":lt.fitPercent,"fitStrategy":lt.fitStrategy,"style":A(A({},zH(vt(lt.style,["text"]),nt._activeDatum)),{"text":nt._createText(lt.field,lt.style.text)})})})),A({"visible":!0,"size":{"width":Rt,"height":Bt},"zIndex":this.layoutZIndex,"x":Ht,"y":jt,"dx":te?yF(te,this._computeLayoutRadius()):0,"dy":ne?yF(ne,this._computeLayoutRadius()):0,"limitRatio":re||1/0,"title":{"visible":!1!==ae.visible&&(!N(ae.field)||null!==this._activeDatum),"space":ae.space||this._gap,"autoLimit":ae.autoLimit,"autoFit":ae.autoFit,"fitPercent":ae.fitPercent,"fitStrategy":ae.fitStrategy,"style":A(A({},zH(vt(ae.style,["text"]),this._activeDatum)),{"text":this._createText(ae.field,ae.style.text)})},"content":se},oe)},e.prototype._createOrUpdateIndicatorComponent=function(nt){var at=this;if(!1===nt.visible)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)mt(nt,this._cacheAttrs)||this._indicatorComponent.setAttributes(nt);else{var lt=this.getContainer(),Rt=new IL(nt);Rt.name="indicator",lt.add(Rt),this._indicatorComponent=Rt,this._indicatorComponent.on("*",(function(nt,lt){return at._delegateEvent(at._indicatorComponent,nt,lt)}))}this._cacheAttrs=nt},e.prototype._createText=function(nt,at){var lt;return nt?this._activeDatum?this._activeDatum[nt]:"":H(at)?null!==(lt=at(this._activeDatum,void 0))&&void 0!==lt?lt:"":null!=at?at:""},e.prototype._computeLayoutRadius=function(){var nt=this._regions[0].getLayoutRect(),at=nt.width,lt=nt.height;return Math.min(at/2,lt/2)},e.prototype.isRelativeModel=function(nt){return this._regions.some((function(at){return at.id===nt}))},e.prototype._getNeedClearVRenderComponents=function(){return[this._indicatorComponent]},e.prototype.clear=function(){this._cacheAttrs=null,nt.prototype.clear.call(this)},e.prototype.getIndicatorComponent=function(){return this._indicatorComponent},e.type=lt.indicator,e.specKey="indicator",e}(s$),P8=function(){Tz.registerComponent(f6.type,f6)},p6=["sum","average","min","max","variance","standardDeviation","median"];function B8(nt,at,lt){if(!lt)return!1;var Rt=nt.map((function(nt){return 1*nt})),Bt=At(Rt),Lt=St(Rt);return at<Bt||at>Lt}function I8(nt,at,lt,Rt,Bt,Lt){var Ht,jt,$t=Rt.relativeSeries;return Z(nt.x)&&B8(at,nt.x,lt)&&(null===(jt=null==$t?void 0:(Ht=$t.getXAxisHelper()).setExtendDomain)||void 0===jt||jt.call(Ht,"marker_xAxis_extend",nt.x)),dF(nt.x)?F8(nt.x,Bt)+Lt.x:$t.getXAxisHelper().dataToPosition([nt.x])+Lt.x}function L8(nt,at,lt,Rt,Bt,Lt){var Ht,jt,$t=Rt.relativeSeries;return Z(nt.y)&&B8(at,nt.y,lt)&&(null===(jt=null===(Ht=$t.getYAxisHelper())||void 0===Ht?void 0:Ht.setExtendDomain)||void 0===jt||jt.call(Ht,"marker_yAxis_extend",nt.y)),dF(nt.y)?F8(nt.y,Bt)+Lt.y:$t.getYAxisHelper().dataToPosition([nt.y])+Lt.y}function D8(nt,at,lt,Rt){var Bt,Lt,Ht=Rt.relativeSeries;return Z(nt.angle)&&B8(at,nt.angle,lt)&&(null===(Lt=null===(Bt=Ht.angleAxisHelper)||void 0===Bt?void 0:Bt.setExtendDomain)||void 0===Lt||Lt.call(Bt,"marker_angleAxis_extend",nt.angle)),Ht.angleAxisHelper.dataToPosition([nt.angle])}function O8(nt,at,lt,Rt){var Bt,Lt,Ht=Rt.relativeSeries;return Z(nt.radius)&&B8(at,nt.radius,lt)&&(null===(Lt=null===(Bt=Ht.radiusAxisHelper)||void 0===Bt?void 0:Bt.setExtendDomain)||void 0===Lt||Lt.call(Bt,"marker_radiusAxis_extend",nt.radius)),Ht.radiusAxisHelper.dataToPosition([nt.radius])}function F8(nt,at){return Number(nt.substring(0,nt.length-1))*at/100}function z8(nt){return p6.includes(nt)}function H8(nt,at,lt,Rt,Bt){var Lt=at.getRegion(),Ht=Lt.getLayoutStartPoint(),jt=lt.getRegion(),$t=jt.getLayoutStartPoint(),Kt=Math.abs(Math.min(Ht.x,$t.x)-Math.max(Ht.x+Lt.getLayoutRect().width,$t.x+jt.getLayoutRect().width)),te=Math.abs(Math.min(Ht.y,$t.y)-Math.max(Ht.y+Lt.getLayoutRect().height,$t.y+jt.getLayoutRect().height)),ne={"relativeSeries":Rt,"startRelativeSeries":at,"endRelativeSeries":lt},re=[],ae=nt.latestData[0]&&nt.latestData[0].latestData?nt.latestData[0].latestData:nt.latestData,oe=Rt.getXAxisHelper().getScale(0).domain(),se=Rt.getYAxisHelper().getScale(0).domain();return ae.forEach((function(nt){var at=N(nt.x),lt=N(nt.y);if(at&&lt){var Rt=I8(nt,oe,Bt,ne,Kt,Ht),ae=L8(nt,se,Bt,ne,te,Ht);re.push([{"x":Rt,"y":ae}])}else if(at){Rt=I8(nt,oe,Bt,ne,Kt,Ht),ae=Math.max(Ht.y+Lt.getLayoutRect().height,$t.y+jt.getLayoutRect().height);var le=Math.min(Ht.y,$t.y);re.push([{"x":Rt,"y":ae},{"x":Rt,"y":le}])}else if(lt){Rt=Math.min(Ht.x,$t.x),ae=L8(nt,se,Bt,ne,te,Ht);var ue=Math.max(Ht.x+Lt.getLayoutRect().width,$t.x+jt.getLayoutRect().width);re.push([{"x":Rt,"y":ae},{"x":ue,"y":ae}])}})),re}function j8(nt,at,lt,Rt,Bt){var Lt={"relativeSeries":Rt,"startRelativeSeries":at,"endRelativeSeries":lt},Ht=[],jt=nt.latestData[0]&&nt.latestData[0].latestData?nt.latestData[0].latestData:nt.latestData,$t=Rt.angleAxisHelper.getScale(0).domain(),Kt=Rt.radiusAxisHelper.getScale(0).domain(),te=Math.min(Rt.getRegion().getLayoutRect().width/2,Rt.getRegion().getLayoutRect().height/2);return jt.forEach((function(nt){var at=N(nt.angle),lt=N(nt.radius);if(at&&lt){var Rt=D8(nt,$t,Bt,Lt),jt=O8(nt,Kt,Bt,Lt);Ht.push([{"angle":Rt,"radius":jt}])}else at?(Rt=D8(nt,$t,Bt,Lt),Ht.push([{"angle":Rt,"radius":-te},{"angle":Rt,"radius":te}])):lt&&(jt=O8(nt,Kt,Bt,Lt),Ht.push([{"radius":jt,"angle":0},{"radius":jt,"angle":2*Math.PI}]))})),Ht}function N8(nt,at,lt,Rt){var Bt=[],Lt=nt.latestData[0]&&nt.latestData[0].latestData?nt.latestData[0].latestData:nt.latestData,Ht=X(Rt);return Lt.forEach((function(nt,Lt){var jt,$t,Kt,te,ne=(null==nt?void 0:nt.getRefRelativeSeries)?nt.getRefRelativeSeries():at,re=ne.getRegion(),ae=re.getLayoutStartPoint(),oe=re.getLayoutRect(),se=oe.width,le=oe.height,ue=0,ce=0;if(Rt){var he=Ht?Rt[Lt]:Rt,de=he.x,fe=he.y;de&&(ue=dF(de)?Number(de.substring(0,de.length-1))*se/100:de),fe&&(ce=dF(fe)?Number(fe.substring(0,fe.length-1))*le/100:fe)}var pe=ne.getXAxisHelper().getScale(0).domain(),ve=ne.getYAxisHelper().getScale(0).domain(),Ae=xt(nt.x),we=xt(nt.y);1===Ae.length&&Z(Ae[0])&&B8(pe,Ae[0],lt)&&(null===($t=null===(jt=ne.getXAxisHelper())||void 0===jt?void 0:jt.setExtendDomain)||void 0===$t||$t.call(jt,"marker_xAxis_extend",Ae[0])),1===we.length&&Z(we[0])&&B8(ve,we[0],lt)&&(null===(te=null===(Kt=ne.getYAxisHelper())||void 0===Kt?void 0:Kt.setExtendDomain)||void 0===te||te.call(Kt,"marker_yAxis_extend",we[0])),Bt.push({"x":ne.getXAxisHelper().dataToPosition(Ae)+ae.x+ue,"y":ne.getYAxisHelper().dataToPosition(we)+ae.y+ce})})),Bt}function V8(nt,at,lt){var Rt=[];return(nt.latestData[0]&&nt.latestData[0].latestData?nt.latestData[0].latestData:nt.latestData).forEach((function(nt){var Bt,Lt,Ht,jt,$t=(null==nt?void 0:nt.getRefRelativeSeries)?nt.getRefRelativeSeries():at,Kt=$t.angleAxisHelper.getScale(0).domain(),te=$t.radiusAxisHelper.getScale(0).domain(),ne=xt(nt.angle),re=xt(nt.radius);1===ne.length&&Z(ne[0])&&B8(Kt,ne[0],lt)&&(null===(Lt=null===(Bt=$t.angleAxisHelper)||void 0===Bt?void 0:Bt.setExtendDomain)||void 0===Lt||Lt.call(Bt,"marker_xAxis_extend",ne[0])),1===re.length&&Z(re[0])&&B8(te,re[0],lt)&&(null===(jt=null===(Ht=$t.radiusAxisHelper)||void 0===Ht?void 0:Ht.setExtendDomain)||void 0===jt||jt.call(Ht,"marker_yAxis_extend",re[0])),Rt.push({"angle":$t.angleAxisHelper.dataToPosition(ne),"radius":$t.radiusAxisHelper.dataToPosition(re)})})),Rt}function G8(nt,at,lt){var Rt=nt.x,Bt=nt.y;return dF(Rt)&&(Rt=F8(Rt,at)),dF(Bt)&&(Bt=F8(Bt,lt)),{"x":Rt,"y":Bt}}function W8(nt,at,lt){var Rt;if(Rt=H(nt)?xt(nt(at.getData().getLatestData(),at)):xt(nt),lt){var Bt=at.getRegion(),Lt=Bt.getLayoutStartPoint(),Ht=Lt.x,jt=Lt.y,$t=Bt.getLayoutRect(),Kt=$t.width,te=$t.height;return Rt.map((function(nt){var at=G8(nt,Kt,te),lt=at.x,Rt=at.y;return{"x":lt+=Ht,"y":Rt+=jt}}))}var ne=at.getOption().getChart().getViewRect(),re=ne.width,ae=ne.height;return Rt.map((function(nt){return G8(nt,re,ae)}))}function U8(nt){var at=1/0,lt=-1/0,Rt=1/0,Bt=-1/0;return nt.forEach((function(nt){var Lt=nt.getLayoutStartPoint(),Ht=nt.getLayoutRect();Lt.x<at&&(at=Lt.x),Lt.x+Ht.width>lt&&(lt=Lt.x+Ht.width),Lt.y<Rt&&(Rt=Lt.y),Lt.y+Ht.height>Bt&&(Bt=Lt.y+Ht.height)})),{"minX":at,"maxX":lt,"minY":Rt,"maxY":Bt}}function Y8(nt,at,lt){var Rt=nt.labelBackground,Bt=void 0===Rt?{}:Rt,Lt=nt.style,Ht=nt.shape,jt=w(nt,["labelBackground","style","shape"]);if(!1!==nt.visible){var $t=jt;return(null==Ht?void 0:Ht.visible)?$t.shape=A({"visible":!0},HH(Ht.style)):$t.shape={"visible":!1},!1!==Bt.visible?($t.panel=A({"visible":!0,"customShape":Bt.customShape},K8(HH(Bt.style),at,lt)),N(Bt.padding)&&($t.padding=Ci(Bt.padding))):($t.panel={"visible":!1},$t.padding=0),Lt&&($t.textStyle=K8(HH(Lt),at,lt)),$t}return{"visible":!1}}function X8(nt,at,lt){for(var Rt in nt)H(nt[Rt])&&(nt[Rt]=nt[Rt](at,lt));return nt}function K8(nt,at,lt){return H(nt)?nt(at,lt):nt}function q8(nt,at){return H(nt)?nt(at):nt}function Z8(nt,at,lt){return N(nt)?"regionLeft"===at?lt.getLayoutStartPoint().x-nt.x:"regionRight"===at?lt.getLayoutStartPoint().x+lt.getLayoutRect().width-nt.x:"regionTop"===at?lt.getLayoutStartPoint().y-nt.y:"regionBottom"===at?lt.getLayoutStartPoint().y+lt.getLayoutRect().height-nt.y:at:at}function J8(nt){var at="x"in nt,lt="y"in nt,Rt="x1"in nt,Bt="y1"in nt,Lt="angle"in nt,Ht="radius"in nt,jt="angle1"in nt,$t="radius1"in nt;return{"doXProcess":at&&!lt&&!Bt,"doXYY1Process":at&&lt&&Bt,"doYProcess":lt&&!at&&!Rt,"doYXX1Process":lt&&at&&Rt,"doXYProcess":at&&lt&&Rt&&Bt,"doAngleProcess":Lt&&!jt&&!Ht&&!$t,"doRadiusProcess":Ht&&!$t&&!Lt&&!jt,"doAngRadRad1Process":Lt&&!jt&&Ht&&$t,"doRadAngAng1Process":Ht&&Lt&&jt&&!$t,"doRadAngProcess":Lt&&Ht&&jt&&$t,"doCoordinatesProcess":"coordinates"in nt&&(!("process"in nt)||"process"in nt&&"xy"in nt.process)}}function Q8(nt){var at="x"in nt,lt="x1"in nt,Rt="y"in nt,Bt="y1"in nt,Lt="angle"in nt,Ht="radius"in nt,jt="angle1"in nt,$t="radius1"in nt;return{"doXProcess":at&&lt&&!Rt&&!Bt,"doYProcess":Rt&&Bt&&!at&&!lt,"doXYProcess":at&&lt&&Rt&&Bt,"doAngleProcess":Lt&&jt&&!Ht&&!$t,"doRadiusProcess":Ht&&$t&&!Lt&&!jt,"doRadAngProcess":Lt&&Ht&&jt&&$t,"doCoordinatesProcess":"coordinates"in nt}}function $8(nt){return{"doXYProcess":N(nt.x)&&N(nt.y),"doPolarProcess":N(nt.angle)&&N(nt.radius),"doGeoProcess":N(nt.areaName)}}function t7(nt,at){var lt;if(at.coordinates){var Rt,Bt=at,Lt=Bt.coordinates,Ht=Bt.coordinateType,jt=Bt.getSeriesByIdOrIndex,$t=w(Bt,["coordinates","coordinateType","getSeriesByIdOrIndex"]),Kt=void 0;if(H(Lt)){var te=at.getRelativeSeries();Kt=Lt(te.getData().getLatestData(),te)}else Kt=Lt;lt=(Kt=xt(Kt)).map((function(nt){var at=jt(nt.refRelativeSeriesId,nt.refRelativeSeriesIndex);if("cartesian"===Ht){var lt=at.getSpec(),Bt=lt.xField,Lt=lt.yField,Kt=nt.xFieldDim,te=nt.xFieldIndex,ne=nt.yFieldDim,re=nt.yFieldIndex,ae=Bt;N(te)&&(ae=xt(Bt)[te]),Kt&&xt(Bt).includes(Kt)&&(ae=Kt);var oe=Lt;N(re)&&(oe=xt(Lt)[re]),ne&&xt(Lt).includes(ne)&&(oe=ne),Rt=A({"x":void 0,"y":void 0},$t),Y(nt[ae])&&z8(nt[ae])?Rt.x={"field":ae,"aggrType":nt[ae]}:Rt.x=xt(ae).map((function(at){return nt[at]})),Y(nt[oe])&&z8(nt[oe])?Rt.y={"field":oe,"aggrType":nt[oe]}:Rt.y=xt(oe).map((function(at){return nt[at]}))}else if("polar"===Ht){var se=at.getSpec(),le=se.valueField,ue=se.categoryField,ce=nt.angleFieldDim,he=nt.angleFieldIndex,de=ue;N(he)&&(de=xt(ue)[he]),ce&&xt(ue).includes(ce)&&(de=ce);var fe=le;Rt=A({"angle":void 0,"radius":void 0},$t),Y(nt[de])&&z8(nt[de])?Rt.angle={"field":de,"aggrType":nt[de]}:Rt.angle=xt(de).map((function(at){return nt[at]})),Y(nt[fe])&&z8(nt[fe])?Rt.radius={"field":fe,"aggrType":nt[fe]}:Rt.radius=xt(fe).map((function(at){return nt[at]}))}return Rt.getRefRelativeSeries=function(){return at},Rt}))}else lt=at;var ne=[];return lt.forEach((function(at){var lt={"x":null,"y":null,"angle":null,"radius":null,"areaName":null};if(N(at.x)){var Rt=at.x;X(Rt)?lt.x=Rt.map((function(lt){return i7(lt,nt,at)})):lt.x=i7(Rt,nt,at)}if(N(at.y)){var Bt=at.y;X(Bt)?lt.y=Bt.map((function(lt){return i7(lt,nt,at)})):lt.y=i7(Bt,nt,at)}if(N(at.angle)){var Lt=at.angle;X(Lt)?lt.angle=Lt.map((function(lt){return i7(lt,nt,at)})):lt.angle=i7(Lt,nt,at)}if(N(at.radius)){var Ht=at.radius;X(Ht)?lt.radius=Ht.map((function(lt){return i7(lt,nt,at)})):lt.radius=i7(Ht,nt,at)}if(N(at.areaName)){var jt=at.areaName;lt.areaName=i7(jt,nt,at)}at.getRefRelativeSeries&&(lt.getRefRelativeSeries=at.getRefRelativeSeries),ne.push(lt)})),ne}var v6={"min":function(nt,at){return LO(nt[0].latestData,at.field)},"max":function(nt,at){return DO(nt[0].latestData,at.field)},"sum":function(nt,at){return OO(nt[0].latestData,at.field)},"average":function(nt,at){return FO(nt[0].latestData,at.field)},"variance":function(nt,at){return zO(nt[0].latestData,at.field)},"standardDeviation":function(nt,at){return function(nt,at){return Math.sqrt(zO(nt,at))}(nt[0].latestData,at.field)},"median":function(nt,at){return function(nt,at){return zt(nt.map((function(nt){return nt[at]})))}(nt[0].latestData,at.field)}};function i7(nt,at,lt){var Rt=lt.getRelativeSeries(),Bt=lt.getStartRelativeSeries(),Lt=lt.getEndRelativeSeries(),Ht=Rt.getData().getLatestData(),jt=Bt.getData().getLatestData(),$t=Lt.getData().getLatestData();if(H(nt))return nt(Ht,jt,$t,Rt,Bt,Lt);if(W(nt)){var Kt=nt,te=Kt.aggrType,ne=Kt.field;return v6[te](at,{"field":ne})}return nt}function n7(nt,at){if(at&&at.getRelativeSeries){var lt=at.getRelativeSeries();if(lt){var Rt=lt.getViewData();return Rt&&Rt.latestData&&Rt.latestData.length?nt:[]}}return nt}var b6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutType="none",at._layoutOffsetX=0,at._layoutOffsetY=0,at}return S(e,nt),e.prototype.getRelativeSeries=function(){return this._relativeSeries},e.prototype.getMarkerData=function(){return this._markerData},e._getMarkerCoordinateType=function(nt){return"cartesian"},e.getSpecInfo=function(nt){var at=this;return gY(nt,this.specKey,this.type,(function(nt){return!1!==nt.visible&&at._getMarkerCoordinateType(nt)===at.coordinateType}))},e.prototype.getMarkAttributeContext=function(){return this._markAttributeContext},e.prototype._buildMarkerAttributeContext=function(){this._markAttributeContext={"relativeSeries":this._relativeSeries,"startRelativeSeries":this._startRelativeSeries,"endRelativeSeries":this._endRelativeSeries,"vchart":this._option.globalInstance}},e.prototype.created=function(){nt.prototype.created.call(this),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()},e.prototype._getAllRelativeSeries=function(){var nt=this;return{"getRelativeSeries":function(){return nt._relativeSeries},"getStartRelativeSeries":function(){return nt._startRelativeSeries},"getEndRelativeSeries":function(){return nt._endRelativeSeries}}},e.prototype._getFieldInfoFromSpec=function(nt,at,lt){return Y(at)&&z8(at)?{"field":lt.getSpec()[{"x":"xField","y":"yField","radius":"valueField","angle":"categoryField","areaName":"nameField"}[nt]],"aggrType":at}:at},e.prototype._processSpecByDims=function(nt){var at=this,lt=this._relativeSeries,Rt={};return nt.forEach((function(nt){return Rt[nt.dim]=at._getFieldInfoFromSpec(nt.dim,nt.specValue,lt)})),A(A({},Rt),this._getAllRelativeSeries())},e.prototype._processSpecCoo=function(nt){var at=this;return A(A({"coordinates":nt.coordinates||nt.coordinate},this._getAllRelativeSeries()),{"getSeriesByIdOrIndex":function(nt,lt){return at._getSeriesByIdOrIndex(nt,lt)},"coordinateType":this.coordinateType})},e.prototype._getRelativeDataView=function(){if(this._specifiedDataSeries){var nt=[];xt(this._specifiedDataSeries).forEach((function(at){nt=nt.concat(at.getViewData().latestData)}));var at=new Ms;return at.registerParser("array",I),new Es(at).parse(nt,{"type":"array"})}return this._relativeSeries.getViewData()},e.prototype.updateLayoutAttribute=function(){var at,lt,Rt,Bt=this;if(null===(at=this._spec.visible)||void 0===at||at){if(!this._markerComponent){var Lt=this._createMarkerComponent();Lt.name=null!==(lt=this._spec.name)&&void 0!==lt?lt:this.type,Lt.id=null!==(Rt=this._spec.id)&&void 0!==Rt?Rt:"".concat(this.type,"-").concat(this.id),this._markerComponent=Lt,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(function(nt,at){Bt._delegateEvent(Bt._markerComponent,nt,at,null,Bt.getMarkerData.bind(Bt))}))}this._markerLayout()}nt.prototype.updateLayoutAttribute.call(this)},e.prototype._getSeriesByIdOrIndex=function(nt,at){var lt,Rt,Bt;return(Bt=null===(lt=this._option.getSeriesInUserIdOrIndex(N(nt)?[nt]:[],[at]))||void 0===lt?void 0:lt[0])||(Bt=null!==(Rt=this._relativeSeries)&&void 0!==Rt?Rt:this._getFirstSeries()),Bt},e.prototype._bindSeries=function(){var nt=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(nt.relativeSeriesId,nt.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(nt.startRelativeSeriesId,nt.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(nt.endRelativeSeriesId,nt.endRelativeSeriesIndex),nt.specifiedDataSeriesIndex&&"all"===nt.specifiedDataSeriesIndex||nt.specifiedDataSeriesId&&"all"===nt.specifiedDataSeriesId?this._specifiedDataSeries=this._option.getAllSeries():(nt.specifiedDataSeriesIndex||nt.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(nt.specifiedDataSeriesId,nt.specifiedDataSeriesIndex))},e.prototype.initEvent=function(){"cartesian"!==this._relativeSeries.coordinate&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(nt){},e.prototype.clear=function(){nt.prototype.clear.call(this),this._firstSeries=null},e.prototype._getFirstSeries=function(){var nt;if(this._firstSeries)return this._firstSeries;var at=XO(this._regions);return at?(this._firstSeries=at,at):(null===(nt=this._option)||void 0===nt||nt.onError("need at least one series"),null)},e.prototype._getNeedClearVRenderComponents=function(){return[this._markerComponent]},e.prototype.onLayoutStart=function(at,lt,Rt){j(this._spec.offsetX)||(this._layoutOffsetX=pF(this._spec.offsetX,lt.width,lt)),j(this._spec.offsetY)||(this._layoutOffsetY=pF(this._spec.offsetY,lt.height,lt)),nt.prototype.onLayoutStart.call(this,at,lt,Rt)},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return mt(lt,at)||(Rt.reRender=!0,Rt.reMake=!0,Rt.change=!0),Rt},e.prototype._initCommonDataView=function(){var nt=this,at=this._computeOptions().options,lt=this._getRelativeDataView();GW(this._option.dataSet,"markerAggregation",t7),GW(this._option.dataSet,"markerFilter",n7);var Rt=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_data")});Rt.parse([lt],{"type":"dataview"}),Rt.transform({"type":"markerAggregation","options":at}),Rt.transform({"type":"markerFilter","options":this._getAllRelativeSeries()}),Rt.target.on("change",(function(){nt._markerLayout()})),this._markerData=Rt},e}(s$);function a7(nt,at){return function(nt,at,lt){var Rt,Bt,Lt=tS(nt,(function(nt){return nt[at]}),(function(nt){return nt[lt]})).predict,Ht=LO(nt,at),jt=DO(nt,at),$t=Lt(Ht),Kt=Lt(jt);return[(Rt={},Rt[at]=Ht,Rt[lt]=$t,Rt),(Bt={},Bt[at]=jt,Bt[lt]=Kt,Bt)]}(nt[0].latestData,at.fieldX,at.fieldY)}var k6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.specKey="markLine",at.layoutZIndex=MU.MarkLine,at}return S(e,nt),e._getMarkerCoordinateType=function(nt){var at=J8(nt),lt=at.doAngleProcess,Rt=at.doRadiusProcess,Bt=at.doAngRadRad1Process,Lt=at.doRadAngAng1Process,Ht=at.doRadAngProcess;return"polar"===nt.coordinateType||lt||Rt||Bt||Lt||Ht?"polar":"cartesian"},e.prototype._createMarkerComponent=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he=this._spec,de=he.label,fe=void 0===de?{}:de,pe=he.startSymbol,ve=void 0===pe?{}:pe,Ae=he.endSymbol,we=void 0===Ae?{}:Ae,Ce={"zIndex":this.layoutZIndex,"interactive":null===(nt=this._spec.interactive)||void 0===nt||nt,"hover":null===(at=this._spec.interactive)||void 0===at||at,"select":null===(lt=this._spec.interactive)||void 0===lt||lt,"points":[{"x":0,"y":0},{"x":0,"y":0}],"center":{"x":0,"y":0},"radius":0,"startAngle":0,"endAngle":0,"lineStyle":K8(HH(null===(Rt=this._spec.line)||void 0===Rt?void 0:Rt.style),this._markerData,this._markAttributeContext),"clipInRange":null!==(Bt=this._spec.clip)&&void 0!==Bt&&Bt,"label":Y8(fe,this._markerData,this._markAttributeContext),"state":{"line":X8(null!==(Ht=null===(Lt=this._spec.line)||void 0===Lt?void 0:Lt.state)&&void 0!==Ht?Ht:{},this._markerData,this._markAttributeContext),"lineStartSymbol":X8(null!==($t=null===(jt=this._spec.startSymbol)||void 0===jt?void 0:jt.state)&&void 0!==$t?$t:{},this._markerData,this._markAttributeContext),"lineEndSymbol":X8(null!==(te=null===(Kt=this._spec.endSymbol)||void 0===Kt?void 0:Kt.state)&&void 0!==te?te:{},this._markerData,this._markAttributeContext),"label":X8(null!==(ae=null===(re=null===(ne=this._spec)||void 0===ne?void 0:ne.label)||void 0===re?void 0:re.state)&&void 0!==ae?ae:{},this._markerData,this._markAttributeContext),"labelBackground":X8(null!==(ue=null===(le=null===(se=null===(oe=this._spec)||void 0===oe?void 0:oe.label)||void 0===se?void 0:se.labelBackground)||void 0===le?void 0:le.state)&&void 0!==ue?ue:{},this._markerData,this._markAttributeContext)},"animation":null!==(ce=this._spec.animation)&&void 0!==ce&&ce,"animationEnter":this._spec.animationEnter,"animationExit":this._spec.animationExit,"animationUpdate":this._spec.animationUpdate};return ve.visible?Ce.startSymbol=A(A({},ve),{"visible":!0,"style":K8(HH(ve.style),this._markerData,this._markAttributeContext)}):Ce.startSymbol={"visible":!1},we.visible?Ce.endSymbol=A(A({},we),{"visible":!0,"style":K8(HH(we.style),this._markerData,this._markAttributeContext)}):Ce.endSymbol={"visible":!1},this._newMarkLineComponent(Ce)},e.prototype._getUpdateMarkerAttrs=function(){var nt,at,lt,Rt,Bt,Lt=this._spec,Ht=this._markerData,jt=this._startRelativeSeries,$t=this._endRelativeSeries,Kt=this._relativeSeries,te=this._computePointsAttr(),ne=Kt.getViewData().latestData,re=Ht.latestData[0]&&Ht.latestData[0].latestData?Ht.latestData[0].latestData:Ht.latestData;if(Lt.clip||(null===(nt=Lt.label)||void 0===nt?void 0:nt.confine)){var ae=U8([jt.getRegion(),$t.getRegion(),Kt.getRegion()]),oe=ae.minX,se=ae.maxX,le=ae.minY;Bt={"x":oe,"y":le,"width":se-oe,"height":ae.maxY-le}}var ue=null!==(lt=null===(at=this._markerComponent)||void 0===at?void 0:at.attribute)&&void 0!==lt?lt:{},ce=A(A({},ue.label),{"text":this._spec.label.formatMethod?this._spec.label.formatMethod(re,ne):null===(Rt=ue.label)||void 0===Rt?void 0:Rt.text});return A(A({},te),{"label":ce,"limitRect":Bt,"dx":this._layoutOffsetX,"dy":this._layoutOffsetY})},e.prototype._markerLayout=function(){var nt,at=this._getUpdateMarkerAttrs();null===(nt=this._markerComponent)||void 0===nt||nt.setAttributes(at)},e.prototype._initDataView=function(){var nt=this,at=this._spec,lt="coordinates"in at,Rt=J8(at),Bt=Rt.doXProcess,Lt=Rt.doYProcess,Ht=Rt.doXYY1Process,jt=Rt.doYXX1Process,$t=Rt.doXYProcess,Kt=Rt.doAngleProcess,te=Rt.doRadiusProcess,ne=Rt.doAngRadRad1Process,re=Rt.doRadAngAng1Process,ae=Rt.doRadAngProcess;if(this._markerData=this._getRelativeDataView(),Bt||Lt||Ht||jt||$t||Kt||te||ne||re||ae||lt){GW(this._option.dataSet,"markerAggregation",t7),GW(this._option.dataSet,"markerRegression",a7),GW(this._option.dataSet,"markerFilter",n7);var oe=this._computeOptions(),se=oe.options,le=oe.needAggr,ue=oe.needRegr,ce=oe.processData,he=new Es(this._option.dataSet);he.parse([ce],{"type":"dataview"}),le&&he.transform({"type":"markerAggregation","options":se}),ue&&he.transform({"type":"markerRegression","options":se}),he.transform({"type":"markerFilter","options":this._getAllRelativeSeries()}),he.target.on("change",(function(){nt._markerLayout()})),this._markerData=he}},e.specKey="markLine",e}(b6),E6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.markLine,at.name=lt.markLine,at.coordinateType="cartesian",at}return S(e,nt),e.prototype._newMarkLineComponent=function(nt){return new DD(nt)},e.prototype._computePointsAttr=function(){var nt,at=this._spec,lt=this._markerData,Rt=this._startRelativeSeries,Bt=this._endRelativeSeries,Lt=this._relativeSeries,Ht=N(at.coordinates),jt=N(at.process),$t=jt&&N(at.process.x),Kt=jt&&N(at.process.y),te=N(at.positions),ne=null!==(nt=at.autoRange)&&void 0!==nt&&nt,re=J8(at),ae=re.doXProcess,oe=re.doYProcess,se=re.doXYY1Process,le=re.doYXX1Process,ue=re.doXYProcess,ce=re.doCoordinatesProcess,he=[];if(ae||se||oe||le||ue||Ht&&$t||Ht&&Kt){var de=H8(lt,Rt,Bt,Lt,ne);he=1===de.length?de[0]:de.map((function(nt){return nt[0]}))}else ce?he=N8(lt,Lt,ne,at.coordinatesOffset):te&&(he=W8(at.positions,Lt,at.regionRelative));return{"points":he}},e.prototype._markerLayout=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t=this._getUpdateMarkerAttrs();if("type-step"===this._spec.type){var Kt=this._startRelativeSeries,te=this._endRelativeSeries,ne=this._spec.line||{},re=ne.multiSegment,ae=ne.mainSegmentIndex,oe=this._spec,se=oe.connectDirection,le=oe.expandDistance,ue=void 0===le?0:le,ce=void 0;if(dF(ue)){var he=Kt.getRegion(),de=he.getLayoutStartPoint(),fe=te.getRegion(),pe=fe.getLayoutStartPoint();if("bottom"===se||"top"===se){var ve=Math.abs(Math.min(de.y,pe.y)-Math.max(de.y+he.getLayoutRect().height,pe.y+fe.getLayoutRect().height));ce=Number(ue.substring(0,ue.length-1))*ve/100}else{var Ae=Math.abs(Math.min(de.x,pe.x)-Math.max(de.x+he.getLayoutRect().width,pe.x+fe.getLayoutRect().width));ce=Number(ue.substring(0,ue.length-1))*Ae/100}}else ce=ue;var we=$t.points,Ce=$t.label,je=$t.limitRect,Ne=function(nt,at,lt,Rt){void 0===Rt&&(Rt=0);var Bt=[],Lt=nt.y-at.y,Ht=nt.x-at.x;switch(lt){case"top":Bt.push(nt),Bt.push({"x":nt.x,"y":Lt>0?nt.y-Rt-Math.abs(Lt):nt.y-Rt}),Bt.push({"x":at.x,"y":Lt>0?at.y-Rt:at.y-Rt-Math.abs(Lt)}),Bt.push(at);break;case"bottom":Bt.push(nt),Bt.push({"x":nt.x,"y":Lt<0?nt.y+Rt+Math.abs(Lt):nt.y+Rt}),Bt.push({"x":at.x,"y":Lt<0?at.y+Rt:at.y+Rt+Math.abs(Lt)}),Bt.push(at);break;case"left":Bt.push(nt),Bt.push({"x":Ht>0?nt.x-Rt-Math.abs(Ht):nt.x-Rt,"y":nt.y}),Bt.push({"x":Ht>0?at.x-Rt:at.x-Rt-Math.abs(Ht),"y":at.y}),Bt.push(at);break;case"right":Bt.push(nt),Bt.push({"x":Ht>0?nt.x+Rt:nt.x+Rt+Math.abs(Ht),"y":nt.y}),Bt.push({"x":Ht>0?at.x+Rt+Math.abs(Ht):at.x+Rt,"y":at.y}),Bt.push(at)}return Bt}(we[0],we[1],se,ce),Ve=void 0;Ve=re&&N(ae)?{"position":"middle","autoRotate":!1,"refX":0,"refY":0}:A(A({"position":"start","autoRotate":!1},function(nt,at,lt,Rt){void 0===Rt&&(Rt=0);var Bt=nt.y-at.y,Lt=nt.x-at.x;return"bottom"===lt?{"dx":Lt>0?-Lt/2:Math.abs(Lt/2),"dy":Bt>0?Rt:Math.abs(Bt)+Rt}:"top"===lt?{"dx":Lt>0?-Math.abs(Lt/2):+Math.abs(Lt/2),"dy":Bt>0?-(Math.abs(Bt)+Rt):-Rt}:"left"===lt?{"dx":Lt>0?-Lt-Rt:-Rt,"dy":Bt>0?-Bt/2:Math.abs(Bt/2)}:"right"===lt?{"dx":Lt>0?Rt:Math.abs(Lt)+Rt,"dy":Bt>0?-Bt/2:Math.abs(Bt/2)}:{}}(we[0],we[1],se,ce)),{"refX":0,"refY":0}),Q(null===(nt=this._spec.label)||void 0===nt?void 0:nt.refX)&&(Ve.refX+=this._spec.label.refX),Q(null===(at=this._spec.label)||void 0===at?void 0:at.refY)&&(Ve.refY+=this._spec.label.refY),Q(null===(lt=this._spec.label)||void 0===lt?void 0:lt.dx)&&(Ve.dx=(Ve.dx||0)+this._spec.label.dx),Q(null===(Rt=this._spec.label)||void 0===Rt?void 0:Rt.dy)&&(Ve.dy=(Ve.dy||0)+this._spec.label.dy);var Ge=null!==(Lt=null===(Bt=this._markerComponent)||void 0===Bt?void 0:Bt.attribute)&&void 0!==Lt?Lt:{};null===(Ht=this._markerComponent)||void 0===Ht||Ht.setAttributes({"points":re?[[Ne[0],Ne[1]],[Ne[1],Ne[2]],[Ne[2],Ne[3]]]:Ne,"label":A(A(A({},Ce),Ve),{"textStyle":A(A({},Ge.label.textStyle),{"textAlign":"center","textBaseline":"middle"})}),"limitRect":je,"multiSegment":re,"mainSegmentIndex":ae,"dx":this._layoutOffsetX,"dy":this._layoutOffsetY})}else null===(jt=this._markerComponent)||void 0===jt||jt.setAttributes($t)},e.prototype._computeOptions=function(){var nt,at=this._getRelativeDataView(),lt=!0,Rt=!1,Bt=this._spec,Lt=this._relativeSeries,Ht=J8(Bt),jt=Ht.doXProcess,$t=Ht.doYProcess,Kt=Ht.doXYY1Process,te=Ht.doYXX1Process,ne=Ht.doXYProcess,re=Ht.doCoordinatesProcess;if(ne)nt=[this._processSpecByDims([{"dim":"x","specValue":Bt.x},{"dim":"y","specValue":Bt.y}]),this._processSpecByDims([{"dim":"x","specValue":Bt.x1},{"dim":"y","specValue":Bt.y1}])];else if(jt)nt=[this._processSpecByDims([{"dim":"x","specValue":Bt.x}])];else if($t)nt=[this._processSpecByDims([{"dim":"y","specValue":Bt.y}])];else if(Kt)nt=[this._processSpecByDims([{"dim":"x","specValue":Bt.x},{"dim":"y","specValue":Bt.y}]),this._processSpecByDims([{"dim":"x","specValue":Bt.x},{"dim":"y","specValue":Bt.y1}])];else if(te)nt=[this._processSpecByDims([{"dim":"x","specValue":Bt.x},{"dim":"y","specValue":Bt.y}]),this._processSpecByDims([{"dim":"x","specValue":Bt.x1},{"dim":"y","specValue":Bt.y}])];else if(re){if(nt=this._processSpecCoo(Bt),lt=!1,at=new Es(this._option.dataSet,{"name":"".concat(this.type,"_").concat(this.id,"_data")}).parse([Lt.getViewData()],{"type":"dataview"}).transform({"type":"markerAggregation","options":nt}),Bt.process&&"x"in Bt.process&&(nt=[this._processSpecByDims([{"dim":"x","specValue":Bt.process.x}])],lt=!0),Bt.process&&"y"in Bt.process&&(nt=nt=[this._processSpecByDims([{"dim":"y","specValue":Bt.process.y}])],lt=!0),Bt.process&&"xy"in Bt.process){var ae=Lt.getSpec();nt={"fieldX":ae.xField,"fieldY":ae.yField},Rt=!0}}else lt=!1;return{"options":nt,"needAggr":lt,"needRegr":Rt,"processData":at}},e.type=lt.markLine,e.coordinateType="cartesian",e}(k6),l7=function(){Tz.registerComponent(E6.type,E6),BD()},R6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.polarMarkLine,at.name=lt.polarMarkLine,at.coordinateType="polar",at}return S(e,nt),e.prototype._newMarkLineComponent=function(nt){var at=J8(this._spec),lt=at.doRadiusProcess,Rt=at.doRadAngAng1Process;return lt||Rt?new HD(nt):new DD(nt)},e.prototype._computePointsAttr=function(){var nt,at=this._spec,lt=this._markerData,Rt=this._startRelativeSeries,Bt=this._endRelativeSeries,Lt=this._relativeSeries,Ht=null!==(nt=at.autoRange)&&void 0!==nt&&nt,jt=J8(at),$t=jt.doAngleProcess,Kt=jt.doRadiusProcess,te=jt.doAngRadRad1Process,ne=jt.doRadAngAng1Process,re=jt.doRadAngProcess,ae=jt.doCoordinatesProcess,oe=[],se={},le={"x":this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,"y":this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if($t||Kt||te||ne||re){var ue=j8(lt,Rt,Bt,Lt,Ht);oe=1===ue.length?ue[0]:ue.map((function(nt){return nt[0]})),se=oe[0].radius===oe[1].radius?{"radius":oe[0].radius,"startAngle":oe[0].angle,"endAngle":oe[1].angle,"center":le}:{"points":oe.map((function(nt){return Pe(le,nt.radius,nt.angle)}))}}else ae&&(se={"points":(oe=V8(lt,Lt,Ht)).map((function(nt){return Pe(le,nt.radius,nt.angle)}))});return se},e.prototype._computeOptions=function(){var nt,at=this._spec,lt=J8(at),Rt=lt.doAngleProcess,Bt=lt.doRadiusProcess,Lt=lt.doAngRadRad1Process,Ht=lt.doRadAngAng1Process,jt=lt.doRadAngProcess,$t=lt.doCoordinatesProcess,Kt=this._getRelativeDataView();return jt?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"angle","specValue":at.angle1},{"dim":"radius","specValue":at.radius1}])]:Rt?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle}])]:Bt?nt=[this._processSpecByDims([{"dim":"radius","specValue":at.radius}])]:Lt?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius1}])]:Ht?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"angle","specValue":at.angle1},{"dim":"radius","specValue":at.radius}])]:$t&&(nt=this._processSpecCoo(at)),{"options":nt,"needAggr":!0,"needRegr":!1,"processData":Kt}},e.type=lt.polarMarkLine,e.coordinateType="polar",e}(k6),c7=function(){Tz.registerComponent(R6.type,R6),HD._animate=fD,BD()},D6=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.title,Bt.specKey=lt.title,Bt.layoutType="normal",Bt.layoutZIndex=MU.Title,Bt.layoutLevel=TU.Title,Bt._orient="top",Bt._orient=hF(at.orient)?at.orient:"top",Bt}return S(e,nt),Object.defineProperty(e.prototype,"orient",{"get":function(){return this._orient},"enumerable":!1,"configurable":!0}),e.prototype.initLayout=function(){nt.prototype.initLayout.call(this),this._layout&&(this._layout.layoutOrient=this._orient)},e.getSpecInfo=function(nt){return gY(nt,this.specKey,lt.title,(function(nt){return!1!==nt.visible}))},e.prototype.onRender=function(nt){},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return(null==lt?void 0:lt.orient)===(null==at?void 0:at.orient)&&(null==lt?void 0:lt.visible)===at.visible||(Rt.reMake=!0),Rt.change=!0,Rt.reRender=!0,Rt},e.prototype.changeRegions=function(nt){},e.prototype.update=function(nt){},e.prototype.resize=function(nt){},e.prototype.afterSetLayoutStartPoint=function(at){Q(at.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",at.x),Q(at.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",at.y),nt.prototype.afterSetLayoutStartPoint.call(this,at)},e.prototype.getBoundsInRect=function(nt){var at;this.setLayoutRect(nt);var lt=this._getTitleAttrs();this._createOrUpdateTitleComponent(lt),at=this._getTitleLayoutRect();var Rt=this.getLayoutStartPoint(),Bt=Rt.x,Lt=Rt.y;return{"x1":Bt,"y1":Lt,"x2":Bt+at.width,"y2":Lt+at.height}},e.prototype._getTitleLayoutRect=function(){var nt=this._titleComponent.AABBBounds;return{"width":this._spec.width?this._spec.width:Q(nt.width())?nt.width():0,"height":this._spec.height?this._spec.height:Q(nt.height())?nt.height():0}},e.prototype._getTitleAttrs=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt;if(!1===this._spec.visible)return{"visible":!1};var $t=this.getLayoutRect(),Kt=pF(this._spec.width,$t.width,null,$t.width),te=pF(this._spec.maxWidth,$t.width,null,$t.width),ne=Math.max(Math.min(Kt,te,$t.width),0),re=A(A({},vt(this._spec,["padding"])),{"textType":null!==(nt=this._spec.textType)&&void 0!==nt?nt:"text","text":null!==(at=this._spec.text)&&void 0!==at?at:"","subtextType":null!==(lt=this._spec.subtextType)&&void 0!==lt?lt:"text","subtext":null!==(Rt=this._spec.subtext)&&void 0!==Rt?Rt:"","x":null!==(Bt=this._spec.x)&&void 0!==Bt?Bt:0,"y":null!==(Lt=this._spec.y)&&void 0!==Lt?Lt:0,"height":this._spec.height,"minWidth":this._spec.minWidth,"maxWidth":ne,"minHeight":this._spec.minHeight,"maxHeight":this._spec.maxHeight,"padding":this._spec.innerPadding,"align":null!==(Ht=this._spec.align)&&void 0!==Ht?Ht:"left","verticalAlign":null!==(jt=this._spec.verticalAlign)&&void 0!==jt?jt:"top","textStyle":A({"width":ne,"maxLineWidth":ne},this._spec.textStyle),"subtextStyle":A({"maxLineWidth":ne},this._spec.subtextStyle)});return N(this._spec.width)&&(re.textStyle.width=Math.max(Kt,$t.width),re.subtextStyle.width=re.textStyle.width),re},e.prototype._createOrUpdateTitleComponent=function(nt){var at=this;if(this._titleComponent)mt(nt,this._cacheAttrs)||this._titleComponent.setAttributes(nt);else{var lt=this.getContainer(),Rt=new xL(nt);Rt.name="title",lt.add(Rt),this._titleComponent=Rt,Rt.on("*",(function(nt,lt){return at._delegateEvent(Rt,nt,lt)}))}return this._cacheAttrs=nt,this._titleComponent},e.prototype._getNeedClearVRenderComponents=function(){return[this._titleComponent]},e.prototype.clear=function(){nt.prototype.clear.call(this),this._cacheAttrs=null},e.type=lt.title,e.specKey=lt.title,e}(s$),d7=function(){Tz.registerComponent(D6.type,D6)},z6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.specKey="markArea",at.layoutZIndex=MU.MarkArea,at}return S(e,nt),e._getMarkerCoordinateType=function(nt){var at=Q8(nt),lt=at.doAngleProcess,Rt=at.doRadiusProcess,Bt=at.doRadAngProcess;return"polar"===nt.coordinateType||lt||Rt||Bt?"polar":"cartesian"},e.prototype._createMarkerComponent=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re=null!==(nt=this._spec.label)&&void 0!==nt?nt:{},ae={"zIndex":this.layoutZIndex,"interactive":null===(at=this._spec.interactive)||void 0===at||at,"hover":null===(lt=this._spec.interactive)||void 0===lt||lt,"select":null===(Rt=this._spec.interactive)||void 0===Rt||Rt,"points":[{"x":0,"y":0}],"center":{"x":0,"y":0},"innerRadius":0,"outerRadius":0,"startAngle":0,"endAngle":0,"areaStyle":K8(HH(null===(Bt=this._spec.area)||void 0===Bt?void 0:Bt.style),this._markerData,this._markAttributeContext),"clipInRange":null!==(Lt=this._spec.clip)&&void 0!==Lt&&Lt,"label":Y8(re,this._markerData,this._markAttributeContext),"state":{"area":X8(null===(Ht=this._spec.area)||void 0===Ht?void 0:Ht.state,this._markerData,this._markAttributeContext),"label":X8(null===(jt=this._spec.label)||void 0===jt?void 0:jt.state,this._markerData,this._markAttributeContext),"labelBackground":X8(null===(te=null===(Kt=null===($t=this._spec)||void 0===$t?void 0:$t.label)||void 0===Kt?void 0:Kt.labelBackground)||void 0===te?void 0:te.state,this._markerData,this._markAttributeContext)},"animation":null!==(ne=this._spec.animation)&&void 0!==ne&&ne,"animationEnter":this._spec.animationEnter,"animationExit":this._spec.animationExit,"animationUpdate":this._spec.animationUpdate};return this._newMarkAreaComponent(ae)},e.prototype._markerLayout=function(){var nt,at,lt,Rt,Bt,Lt=this._spec,Ht=this._markerData,jt=this._startRelativeSeries,$t=this._endRelativeSeries,Kt=this._relativeSeries,te=this._computePointsAttr(),ne=this._getRelativeDataView().latestData,re=Ht?Ht.latestData[0]&&Ht.latestData[0].latestData?Ht.latestData[0].latestData:Ht.latestData:ne;if(Lt.clip||(null===(nt=Lt.label)||void 0===nt?void 0:nt.confine)){var ae=U8([jt.getRegion(),$t.getRegion(),Kt.getRegion()]),oe=ae.minX,se=ae.maxX,le=ae.minY;Bt={"x":oe,"y":le,"width":se-oe,"height":ae.maxY-le}}this._markerComponent&&this._markerComponent.setAttributes(A(A({},te),{"label":A(A({},null===(at=this._markerComponent.attribute)||void 0===at?void 0:at.label),{"text":this._spec.label.formatMethod?this._spec.label.formatMethod(re,ne):null===(Rt=null===(lt=this._markerComponent.attribute)||void 0===lt?void 0:lt.label)||void 0===Rt?void 0:Rt.text}),"limitRect":Bt,"dx":this._layoutOffsetX,"dy":this._layoutOffsetY}))},e.prototype._initDataView=function(){var nt=Q8(this._spec),at=nt.doXProcess,lt=nt.doYProcess,Rt=nt.doXYProcess,Bt=nt.doAngleProcess,Lt=nt.doRadiusProcess,Ht=nt.doRadAngProcess,jt=nt.doCoordinatesProcess;if(!(at||lt||Rt||Bt||Lt||Ht||jt))return null;this._initCommonDataView()},e.specKey="markArea",e}(b6),H6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.markArea,at.name=lt.markArea,at.coordinateType="cartesian",at}return S(e,nt),e.prototype._newMarkAreaComponent=function(nt){return new FD(nt)},e.prototype._computePointsAttr=function(){var nt,at=this._spec,lt=this._markerData,Rt=this._startRelativeSeries,Bt=this._endRelativeSeries,Lt=this._relativeSeries,Ht=Q8(at),jt=Ht.doXProcess,$t=Ht.doYProcess,Kt=Ht.doXYProcess,te=Ht.doCoordinatesProcess,ne=N(at.positions),re=null!==(nt=at.autoRange)&&void 0!==nt&&nt,ae=[];if(Kt){var oe=E(H8(lt,Rt,Bt,Lt,re),2),se=oe[0],le=oe[1];se&&se.length&&le&&le.length&&(ae=[{"x":se[0].x,"y":le[0].y},se[0],{"x":le[0].x,"y":se[0].y},le[0]])}else if(jt||$t){var ue=E(H8(lt,Rt,Bt,Lt,re),2);se=ue[0],le=ue[1],se&&se.length&&le&&le.length&&(ae=P(P([],E(se),!1),[le[1],le[0]],!1))}else te?ae=N8(lt,Lt,re,at.coordinatesOffset):ne&&(ae=W8(at.positions,Lt,at.regionRelative));return{"points":ae}},e.prototype._computeOptions=function(){var nt,at=this._spec,lt=Q8(at),Rt=lt.doXProcess,Bt=lt.doYProcess,Lt=lt.doXYProcess,Ht=lt.doCoordinatesProcess;return Lt?nt=[this._processSpecByDims([{"dim":"x","specValue":at.x},{"dim":"y","specValue":at.y}]),this._processSpecByDims([{"dim":"x","specValue":at.x1},{"dim":"y","specValue":at.y1}])]:Rt?nt=[this._processSpecByDims([{"dim":"x","specValue":at.x}]),this._processSpecByDims([{"dim":"x","specValue":at.x1}])]:Bt?nt=[this._processSpecByDims([{"dim":"y","specValue":at.y}]),this._processSpecByDims([{"dim":"y","specValue":at.y1}])]:Ht&&(nt=this._processSpecCoo(at)),{"options":nt}},e.type=lt.markArea,e.coordinateType="cartesian",e}(z6),v7=function(){Tz.registerComponent(H6.type,H6),LD()},j6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.polarMarkArea,at.name=lt.polarMarkArea,at.coordinateType="polar",at}return S(e,nt),e.prototype._newMarkAreaComponent=function(nt){var at=Q8(this._spec),lt=at.doRadiusProcess,Rt=at.doAngleProcess,Bt=at.doRadAngProcess;return Rt||lt||Bt?new ND(nt):new FD(nt)},e.prototype._computePointsAttr=function(){var nt,at=this._spec,lt=this._markerData,Rt=this._startRelativeSeries,Bt=this._endRelativeSeries,Lt=this._relativeSeries,Ht=Q8(at),jt=Ht.doAngleProcess,$t=Ht.doRadiusProcess,Kt=Ht.doRadAngProcess,te=Ht.doCoordinatesProcess,ne=null!==(nt=at.autoRange)&&void 0!==nt&&nt,re={},ae={"x":this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,"y":this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(jt||$t||Kt){var oe=j8(lt,Rt,Bt,Lt,ne);Kt?re={"innerRadius":oe[0][0].radius,"outerRadius":oe[1][0].radius,"startAngle":oe[0][0].angle,"endAngle":oe[1][0].angle,"center":ae}:jt?re={"innerRadius":0,"outerRadius":Math.abs(oe[0][0].radius),"startAngle":oe[0][1].angle,"endAngle":oe[1][1].angle,"center":ae}:$t&&(re={"innerRadius":oe[0][0].radius,"outerRadius":oe[1][0].radius,"startAngle":oe[0][0].angle,"endAngle":oe[1][1].angle,"center":ae})}else te&&(re={"points":V8(lt,Lt,ne).map((function(nt){return Pe(ae,nt.radius,nt.angle)}))});return re},e.prototype._computeOptions=function(){var nt,at=this._spec,lt=Q8(at),Rt=lt.doAngleProcess,Bt=lt.doRadiusProcess,Lt=lt.doRadAngProcess,Ht=lt.doCoordinatesProcess;return Lt?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"angle","specValue":at.angle1},{"dim":"radius","specValue":at.radius1}])]:Rt?nt=[this._processSpecByDims([{"dim":"angle","specValue":at.angle},{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"angle","specValue":at.angle1},{"dim":"radius","specValue":at.radius}])]:Bt?nt=[this._processSpecByDims([{"dim":"radius","specValue":at.radius}]),this._processSpecByDims([{"dim":"radius","specValue":at.radius1}])]:Ht&&(nt=this._processSpecCoo(at)),{"options":nt}},e.type=lt.polarMarkArea,e.coordinateType="polar",e}(z6),y7=function(){Tz.registerComponent(j6.type,j6),ND._animate=gD,LD()},m7=function(nt){return HH(A({},nt))},_7=function(nt){return A(A({},nt),{"style":A({},HH(nt.style))})},b7=function(nt){var at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue=m7(null!==(lt=null===(at=null==nt?void 0:nt.slider)||void 0===at?void 0:at.trackStyle)&&void 0!==lt?lt:{}),ce=m7(null!==(Bt=null===(Rt=null==nt?void 0:nt.slider)||void 0===Rt?void 0:Rt.railStyle)&&void 0!==Bt?Bt:{}),he=(le=null!==(Ht=null===(Lt=null==nt?void 0:nt.slider)||void 0===Lt?void 0:Lt.handlerStyle)&&void 0!==Ht?Ht:{},HH(A({},le))),de=_7(null!==($t=null===(jt=null==nt?void 0:nt.controller)||void 0===jt?void 0:jt.start)&&void 0!==$t?$t:{}),fe=_7(null!==(te=null===(Kt=null==nt?void 0:nt.controller)||void 0===Kt?void 0:Kt.pause)&&void 0!==te?te:{}),pe=_7(null!==(re=null===(ne=null==nt?void 0:nt.controller)||void 0===ne?void 0:ne.backward)&&void 0!==re?re:{}),ve=_7(null!==(oe=null===(ae=null==nt?void 0:nt.controller)||void 0===ae?void 0:ae.forward)&&void 0!==oe?oe:{}),Ae=A(A({},nt),{"direction":nt.direction,"interval":nt.interval,"visible":nt.visible,"orient":null!==(se=nt.orient)&&void 0!==se?se:"bottom","slider":A(A({},nt.slider),{"trackStyle":ue,"railStyle":ce,"handlerStyle":he}),"controller":A(A({},nt.controller),{"start":de,"pause":fe,"backward":pe,"forward":ve})});return nt.visible||(Ae.controller.visible=!1,Ae.slider.visible=!1),Ae},x7=function(nt){return"left"===nt||"right"===nt},k7=function(nt){return"top"===nt||"bottom"===nt},N6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutZIndex=MU.Player,at.layoutLevel=TU.Player,at.specKey="player",at.type=lt.player,at._orient="bottom",at._getPlayerAttrs=function(){var nt,lt,Rt,Bt,Lt,Ht,jt,$t,Kt=at._spec.type,te={"size":{"width":at._width,"height":at._height},"dx":null!==(nt=at._spec.dx)&&void 0!==nt?nt:0+at._dx,"dy":null!==(lt=at._spec.dy)&&void 0!==lt?lt:0+at._dy};return"discrete"===Kt?A(A(A({},(jt=at._spec,$t=at._specs,A(A({},b7(jt)),{"data":$t,"type":"discrete"}))),te),{"disableTriggerEvent":at._option.disableTriggerEvent,"loop":null===(Bt=null===(Rt=at._spec)||void 0===Rt?void 0:Rt.loop)||void 0===Bt||Bt}):A(A(A({},function(nt,at){return A(A({},b7(nt)),{"data":at,"type":"continuous"})}(at._spec,at._specs)),te),{"disableTriggerEvent":at._option.disableTriggerEvent,"loop":null===(Ht=null===(Lt=at._spec)||void 0===Lt?void 0:Lt.loop)||void 0===Ht||Ht})},at._createOrUpdatePlayerComponent=function(){var nt=A({},at._getPlayerAttrs()),lt=at.getContainer();at._playerComponent?mt(nt,at._cacheAttrs)||(at._cacheAttrs=nt,at._playerComponent.setAttributes(nt),at._playerComponent._initAttributes(),at._playerComponent.render()):("discrete"===nt.type?at._playerComponent=new UL(nt):at._playerComponent=new $L(nt),at._cacheAttrs=nt,at._playerComponent.name="player",lt.add(at._playerComponent),at._initEvent())},at._maxSize=function(){var nt,lt,Rt,Bt,Lt,Ht,jt,$t,Kt;return Math.max.apply(Math,P(P(P(P(P([],E(xt(null===(lt=null===(nt=at._spec.controller.start)||void 0===nt?void 0:nt.style)||void 0===lt?void 0:lt.size)),!1),E(xt(null===(Bt=null===(Rt=at._spec.controller.pause)||void 0===Rt?void 0:Rt.style)||void 0===Bt?void 0:Bt.size)),!1),E(xt(null===(Ht=null===(Lt=at._spec.controller.backward)||void 0===Lt?void 0:Lt.style)||void 0===Ht?void 0:Ht.size)),!1),E(xt(null===($t=null===(jt=at._spec.controller.forward)||void 0===jt?void 0:jt.style)||void 0===$t?void 0:$t.size)),!1),[null!==(Kt=x7(at._orient)?at._spec.slider.railStyle.width:at._spec.slider.railStyle.height)&&void 0!==Kt?Kt:10],!1))},at._sliderExceededSize=function(){var nt,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te=null!==(nt=x7(at._orient)?at._spec.slider.railStyle.width:at._spec.slider.railStyle.height)&&void 0!==nt?nt:10,ne=Math.max.apply(Math,P(P(P(P([],E(xt(null===(Rt=null===(lt=at._spec.controller.start)||void 0===lt?void 0:lt.style)||void 0===Rt?void 0:Rt.size)),!1),E(xt(null===(Lt=null===(Bt=at._spec.controller.pause)||void 0===Bt?void 0:Bt.style)||void 0===Lt?void 0:Lt.size)),!1),E(xt(null===(jt=null===(Ht=at._spec.controller.backward)||void 0===Ht?void 0:Ht.style)||void 0===jt?void 0:jt.size)),!1),E(xt(null===(Kt=null===($t=at._spec.controller.forward)||void 0===$t?void 0:$t.style)||void 0===Kt?void 0:Kt.size)),!1));return te>=ne?te-ne:0},at._initEvent=function(){at._option.disableTriggerEvent||(at._option.globalInstance.on(jW.rendered,(function(){var nt;(null===(nt=at._spec)||void 0===nt?void 0:nt.auto)&&at._playerComponent.play()})),at._playerComponent.addEventListener(jL.end,(function(){var nt;at.event.emit(jW.playerEnd,{"model":at}),at._alternate&&"discrete"===at._spec.type&&(at._direction="default"===at._direction?"reverse":"default",at._playerComponent.setAttributes({"direction":at._direction,"dataIndex":"reverse"===at._direction?at._specs.length-2:1})),(null===(nt=at._spec)||void 0===nt?void 0:nt.loop)&&at._playerComponent.play()})),at._playerComponent.addEventListener(jL.change,(function(nt){var lt=nt.detail.index;at.changePlayerIndex(lt)})),at._playerComponent.addEventListener(jL.backward,(function(nt){var lt=nt.detail.index,Rt=at._specs[lt];at.event.emit(jW.playerBackward,{"model":at,"value":{"spec":Rt,"index":lt,"specs":at._specs}})})),at._playerComponent.addEventListener(jL.forward,(function(nt){var lt=nt.detail.index,Rt=at._specs[lt];at.event.emit(jW.playerForward,{"model":at,"value":{"spec":Rt,"index":lt,"specs":at._specs}})})),at._playerComponent.addEventListener(jL.play,(function(nt){var lt=nt.detail.index,Rt=at._specs[lt];at.event.emit(jW.playerPlay,{"model":at,"value":{"spec":Rt,"index":lt,"specs":at._specs}})})),at._playerComponent.addEventListener(jL.pause,(function(nt){var lt=nt.detail.index,Rt=at._specs[lt];at.event.emit(jW.playerPause,{"model":at,"value":{"spec":Rt,"index":lt,"specs":at._specs}})})))},at}return S(e,nt),Object.defineProperty(e.prototype,"orient",{"get":function(){return this._orient},"enumerable":!1,"configurable":!0}),Object.defineProperty(e.prototype,"layoutOrient",{"set":function(nt){this._orient=nt},"enumerable":!1,"configurable":!0}),e.prototype.setAttrFromSpec=function(){var at,lt,Rt,Bt,Lt,Ht,jt,$t;nt.prototype.setAttrFromSpec.call(this),this._orient=null!==(at=this._spec.orient)&&void 0!==at?at:"bottom",this._specs=null!==(lt=this._spec.specs)&&void 0!==lt?lt:[],this._direction=null!==(Rt=this._spec.direction)&&void 0!==Rt?Rt:"default",this._alternate=null!==(Bt=this._spec.alternate)&&void 0!==Bt&&Bt,this._dx=null!==(Lt=this._spec.dx)&&void 0!==Lt?Lt:0,this._dy=null!==(Ht=this._spec.dy)&&void 0!==Ht?Ht:0,this._position=null!==(jt=this._spec.position)&&void 0!==jt?jt:"middle",this._visible=null===($t=this._spec.visible)||void 0===$t||$t},e.prototype.afterSetLayoutStartPoint=function(at){if(nt.prototype.afterSetLayoutStartPoint.call(this,at),Q(at.x)){var lt=x7(this._orient)?at.x+this._sliderExceededSize()/2:at.x;this._playerComponent&&this._playerComponent.setAttribute("x",lt)}if(Q(at.y)){var Rt=k7(this._orient)?at.y+this._sliderExceededSize()/2:at.y;this._playerComponent&&this._playerComponent.setAttribute("y",Rt)}},e.prototype.getBoundsInRect=function(nt,at){this._width=this._computeWidth(nt),this._height=this._computeHeight(nt),this._dx=this._computeDx(at),this._dy=this._computeDy(at);var lt=this._computeLayoutRect(nt,this._width,this._height);return this._createOrUpdatePlayerComponent(),lt},e.prototype.changeRegions=function(nt){},e.prototype.onRender=function(nt){},e.prototype._getNeedClearVRenderComponents=function(){return[this._playerComponent]},e.prototype._computeLayoutRect=function(nt,at,lt){if(!1===this._visible)return{"x1":0,"x2":0,"y1":0,"y2":0};switch(this._orient){case"top":case"left":return{"x1":0,"y1":0,"x2":at,"y2":lt};case"right":return{"x1":nt.width-at,"y1":0,"x2":nt.width,"y2":nt.height};default:return{"x1":0,"y1":nt.height-lt,"x2":nt.width,"y2":nt.height}}},e.prototype._computeWidth=function(nt){return Z(this._spec.width)?Math.min(nt.width,Number(this._spec.width)):x7(this._orient)?this._maxSize():nt.width},e.prototype._computeHeight=function(nt){return Z(this._spec.height)?(this._height=this._spec.height,Math.min(nt.height,Number(this._spec.height))):k7(this._orient)?this._maxSize():nt.height},e.prototype._computeDx=function(nt){return x7(this._orient)||"start"===this._position?0:"middle"===this._position?(nt.width-this._width)/2:nt.width-this._width},e.prototype._computeDy=function(nt){return k7(this._orient)||"start"===this._position?0:"middle"===this._position?(nt.height-this._height)/2:nt.height-this._height},e.prototype.changePlayerIndex=function(nt){var at=this,lt=this._specs[nt];xt(lt.data).forEach((function(nt){var lt,Rt;null===(Rt=null===(lt=at._option)||void 0===lt?void 0:lt.globalInstance)||void 0===Rt||Rt.updateData(nt.id,nt.values)})),this.event.emit(jW.playerChange,{"model":this,"value":{"spec":lt,"index":nt,"specs":this._specs}})},e.specKey="player",e.type=lt.player,e}(s$),A7=function(){Tz.registerComponent(N6.type,N6)},G6=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.label,Bt.name=lt.label,Bt.layoutType="none",Bt.layoutZIndex=MU.Label,Bt._regions=Rt.getRegionsInIndex(Rt.regionIndexes),Bt}return S(e,nt),e.prototype._interactiveConfig=function(nt){var at=nt.interactive,lt={"hover":!1,"select":!1,"state":nt.state};if(!0!==at)return lt;var Rt=this._option.getChart().getSpec(),Bt=Rt.hover,Lt=Rt.select;return!1===Bt&&!1===Bt.enable||(lt.hover=!0),!1===Lt&&!1===Lt.enable||(lt.select=!0),lt},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return Rt.reRender=!0,mt(lt,at)||(Rt.reMake=!0),Rt},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(nt){},e.prototype._getNeedClearVRenderComponents=function(){return[]},e.type=lt.label,e}(s$),Y6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.skipEncode=!1,at}return S(e,nt),e.prototype.getRule=function(){return this._rule},e.prototype.setRule=function(nt){this._rule=nt},e.prototype.getTarget=function(){return this._target},e.prototype.setTarget=function(nt){this._target=nt,this._rule||this.setRule(nt.type)},e.prototype.getComponent=function(){return this._component},e.prototype.setComponent=function(nt){this._component=nt},e.type="text",e.constructorType="label",e}(wZ),T7=function(){Tz.registerMark(Y6.constructorType,Y6),ZN()},X6=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._initTheme=function(nt,at){return{"spec":nt,"theme":this._theme}},e}(a$),$6=function(nt){function e(at,Rt){var Bt=nt.call(this,at,Rt)||this;return Bt.type=lt.label,Bt.name=lt.label,Bt.specKey="label",Bt.transformerConstructor=X6,Bt.layoutZIndex=MU.Label,Bt._layoutRule=at.labelLayout||"series",Bt}return S(e,nt),e.getSpecInfo=function(nt,at){var Rt=this,Bt=[];return((null==at?void 0:at.region)||[]).forEach((function(Lt,Ht){var jt=(Lt.seriesIndexes||[]).some((function(nt){var lt=at.series[nt].markLabelSpec,Rt=void 0===lt?{}:lt;return Object.values(Rt).some((function(nt){return Array.isArray(nt)&&function(nt){return nt.some((function(nt){return nt.visible}))}(nt)}))}));jt&&Bt.push({"spec":nt,"type":lt.label,"specInfoPath":["component",Rt.specKey,Ht],"regionIndexes":[Ht]})})),Bt},e.prototype.init=function(at){nt.prototype.init.call(this,at),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()},e.prototype.reInit=function(at){nt.prototype.reInit.call(this,at),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initTextMarkStyle()},e.prototype.initEvent=function(){var nt=this;this.event.on(jW.dataZoomChange,(function(){nt._labelComponentMap.forEach((function(nt,at){var lt=at.getProduct().getGroupGraphicItem();lt&&lt.disableAnimation()})),nt.event.on(GH.AFTER_MARK_RENDER_END,e)}));var e=function(){nt._labelComponentMap.forEach((function(nt,at){var lt=at.getProduct().getGroupGraphicItem();lt&&lt.enableAnimation()})),nt.event.off(GH.AFTER_MARK_RENDER_END,e)}},e.prototype._initTextMark=function(){var nt=this;this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),VO(this._regions,(function(at){var lt=at.getSpecInfo().markLabelSpec,Rt=void 0===lt?{}:lt,Bt=Object.keys(Rt),Lt=at.getRegion();nt._labelInfoMap.get(Lt)||nt._labelInfoMap.set(Lt,[]);for(var o=function(lt){var Ht=Bt[lt],jt=at.getMarkInName(Ht);if(!jt)return"continue";Rt[Ht].forEach((function(lt,Rt){var Bt,$t;if(lt.visible){var Kt=nt._labelInfoMap.get(Lt),te=nt._createMark({"type":"label","name":"".concat(Ht,"-label-").concat(Rt)},{"noSeparateStyle":!0,"attributeContext":at.getMarkAttributeContext()});lt.showRelatedMarkTooltip&&(null===($t=null===(Bt=at.tooltipHelper)||void 0===Bt?void 0:Bt.activeTriggerSet.mark)||void 0===$t||$t.add(te)),te.setTarget(jt),Kt.push({"labelMark":te,"baseMark":jt,"series":at,"labelSpec":lt})}}))},Ht=0;Ht<Bt.length;Ht++)o(Ht)}))},e.prototype._initLabelComponent=function(){var nt=this;this._labelInfoMap.forEach((function(at,lt){if("region"===nt._layoutRule){var Rt=nt._createMark({"type":"component","name":"".concat(lt.getGroupMark().name,"-label-component")},{"componentType":"label","noSeparateStyle":!0},{"support3d":nt._spec.support3d});Rt&&(Rt.setSkipBeforeLayouted(!0),at[0]&&N(at[0].labelSpec.zIndex)&&Rt.setMarkConfig({"zIndex":at[0].labelSpec.zIndex}),nt._marks.addMark(Rt),nt._labelComponentMap.set(Rt,(function(){return nt._labelInfoMap.get(lt)})))}else at.forEach((function(at,Rt){var Bt=nt._createMark({"type":"component","name":"".concat(at.labelMark.name,"-component")},{"componentType":"label","noSeparateStyle":!0},{"support3d":at.baseMark.getMarkConfig().support3d});Bt&&(N(at.labelSpec.zIndex)&&Bt.setMarkConfig({"zIndex":at.labelSpec.zIndex}),Bt.setSkipBeforeLayouted(!0),nt._marks.addMark(Bt),nt._labelComponentMap.set(Bt,(function(){return nt._labelInfoMap.get(lt)[Rt]})))}))}))},e.prototype._initTextMarkStyle=function(){var nt=this;this._labelComponentMap.forEach((function(nt,at){xt(nt()).forEach((function(nt){nt.labelMark.setComponent(at)}))})),this._labelInfoMap.forEach((function(at){at.forEach((function(at){var lt,Rt,Bt=at.labelMark,Lt=at.labelSpec,Ht=at.series;if(nt.initMarkStyleWithSpec(Bt,Lt,void 0),H(null==Lt?void 0:Lt.getStyleHandler)){var jt=Lt.getStyleHandler(Ht);null==jt||jt.call(Ht,Bt,Lt)}(null===(Rt=null===(lt=Bt.stateStyle)||void 0===lt?void 0:lt.normal)||void 0===Rt?void 0:Rt.lineWidth)&&Bt.setAttribute("stroke",Ht.getColorAttribute(),"normal",EU.Base_Series)}))}))},e.prototype.updateLayoutAttribute=function(){var at=this;nt.prototype.updateLayoutAttribute.call(this),this._labelComponentMap.forEach((function(nt,lt){var Rt=nt();X(Rt)?at._updateMultiLabelAttribute(Rt,lt):at._updateSingleLabelAttribute(Rt,lt)}))},e.prototype._updateMultiLabelAttribute=function(nt,at){this._updateLabelComponentAttribute(at.getProduct(),nt.map((function(nt){return nt.baseMark.getProduct()})),nt)},e.prototype._updateSingleLabelAttribute=function(nt,at){var lt=nt.baseMark;this._updateLabelComponentAttribute(at.getProduct(),lt.getProduct(),[nt])},e.prototype._updateLabelComponentAttribute=function(nt,at,lt){var Rt=this,Bt=this._option.getComponentsByType("totalLabel");nt.target(at).configure({"interactive":!1}).depend(Bt.map((function(nt){return nt.getMarks()[0].getProduct()}))).labelStyle((function(nt,at){var Lt,Ht,jt=lt[at.labelIndex];if(jt){var $t=jt.labelSpec,Kt=jt.labelMark,te=jt.series,ne=Kt.getRule(),re=Rt._interactiveConfig($t),ae=null!==(Ht=null===(Lt=Rt._spec)||void 0===Lt?void 0:Lt.centerOffset)&&void 0!==Ht?Ht:0,oe=gz({"textStyle":A({"pickable":!0===$t.interactive},$t.style),"overlap":{"avoidMarks":Bt.map((function(nt){return nt.getMarks()[0].getProductId()}))}},FZ(ne,jt),A(A(A({},vt($t,["position","style","state","type","stackDataFilterType","getStyleHandler"])),re),{"centerOffset":ae}),$t.stackDataFilterType?{"dataFilter":"min"===$t.stackDataFilterType?function(nt){return nt.filter((function(nt){return nt.data[mH]}))}:function(nt){return nt.filter((function(nt){return nt.data[oH]}))}}:{});return te&&te.parseLabelStyle&&(oe=te.parseLabelStyle(oe,$t,Kt)),"line"!==ne&&"area"!==ne||(oe.type=ne),oe}})).encode((function(nt,at,Rt){if(lt[Rt.labelIndex]){var Bt=lt[Rt.labelIndex],Lt=Bt.labelSpec;return Bt.labelMark.skipEncode?{"data":nt}:zZ(lt[Rt.labelIndex],nt,Lt.formatMethod,Lt.formatter)}})).size((function(){var nt;return A({"padding":null===(nt=lt[0].labelSpec.overlap)||void 0===nt?void 0:nt.padding},lt[0].series.getRegion().getLayoutRect())}))},e.prototype.compileMarks=function(){var nt=this;this.getMarks().forEach((function(at){var lt,Rt=nt._labelComponentMap.get(at)();lt=X(Rt)?Rt[0].series.getRegion().getGroupMark().getProduct():Rt.series.getRegion().getGroupMark().getProduct(),at.compile({"group":lt,"context":{"model":nt,"labelInfo":Rt}})}))},e.prototype.getVRenderComponents=function(){var nt=[];return this._labelComponentMap.forEach((function(at,lt){var Rt=lt.getProduct().getGroupGraphicItem();Rt&&nt.push(Rt)})),nt},e.prototype.getLabelInfoByTextGraphic=function(nt){var at,lt=null==nt?void 0:nt.parent,Rt=null==lt?void 0:lt.parent;if(Rt){var Bt=Rt.getChildren().indexOf(lt);this._labelComponentMap.forEach((function(nt,lt){lt.getProduct().getGroupGraphicItem()===Rt&&(at=xt(nt())[Bt])}))}return at},e.type=lt.label,e.specKey="label",e.transformerConstructor=X6,e}(G6),P7=function(){AV(),T7(),tK(),Tz.registerComponent($6.type,$6,!0)},q6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.totalLabel,at.name=lt.totalLabel,at.specKey="totalLabel",at.layoutZIndex=MU.Label,at}return S(e,nt),e.getSpecInfo=function(nt,at){var Rt,Bt=this,Lt=[];return null===(Rt=null==at?void 0:at.region)||void 0===Rt||Rt.forEach((function(nt,Rt){var Ht;null===(Ht=nt.seriesIndexes)||void 0===Ht||Ht.forEach((function(nt){var Ht=at.series[nt].spec[Bt.specKey];(null==Ht?void 0:Ht.visible)&&Lt.push({"spec":Ht,"type":lt.totalLabel,"specPath":["series",nt,Bt.specKey],"specInfoPath":["component",Bt.specKey,nt],"regionIndexes":[Rt],"seriesIndexes":[nt]})}))})),Lt},e.prototype.init=function(at){nt.prototype.init.call(this,at),this._initTextMark(),this._initLabelComponent()},e.prototype.reInit=function(at){nt.prototype.reInit.call(this,at),this._initTextMark()},e.prototype._initTextMark=function(){var nt,at=this._getSeries();if(null===(nt=at.getSpec().totalLabel)||void 0===nt?void 0:nt.visible){var lt=at.getSeriesMark();if(lt){var Rt=this._createMark({"type":"label","name":"".concat(lt.name,"-total-label")});this._baseMark=lt,this._textMark=Rt,this._initTextMarkStyle()}}},e.prototype._initTextMarkStyle=function(){var at;nt.prototype.initMarkStyleWithSpec.call(this,this._textMark,this._spec),this.setMarkStyle(this._textMark,{"text":function(nt){return nt[rH]}},"normal",EU.Default);var lt=this._getSeries();null===(at=lt.initTotalLabelMarkStyle)||void 0===at||at.call(lt,this._textMark)},e.prototype._initLabelComponent=function(){var nt=this._getSeries(),at=this._createMark({"type":"component","name":"".concat(nt.name,"-total-label-component")},{"componentType":"label","noSeparateStyle":!0},{"support3d":this._spec.support3d});at&&this._marks.addMark(at)},e.prototype.updateLayoutAttribute=function(){var at=this;nt.prototype.updateLayoutAttribute.call(this);var lt=this._getSeries();this._marks.forEach((function(nt,Rt){nt.getProduct().target(at._baseMark.getProduct()).configure({"interactive":!1}).labelStyle((function(){var nt,Rt;if(at._baseMark){var Bt=at._spec,Lt=Bt.offset,Ht=Bt.animation,jt=Bt.overlap,$t=Bt.position,Kt=void 0===$t?"top":$t,te=at._interactiveConfig(at._spec);return gz({"textStyle":{"pickable":!0===at._spec.interactive},"position":B7(lt,at._baseMark.type,Kt),"x":0,"y":0},null!==(Rt=null===(nt=lt.getTotalLabelComponentStyle)||void 0===nt?void 0:nt.call(lt,{"baseMark":at._baseMark,"labelMark":at._textMark}))&&void 0!==Rt?Rt:{},A({"offset":Lt,"animation":Ht,"overlap":jt,"dataFilter":function(nt){return nt.filter((function(nt){return"bottom"===Kt?nt.data[mH]:nt.data[oH]}))}},te))}})).encode((function(nt){return zZ({"baseMark":at._baseMark,"labelMark":at._textMark,"series":lt,"labelSpec":lt.getSpec().totalLabel},nt,at._spec.formatMethod)})).size((function(){var nt;return A({"padding":null===(nt=at._spec.overlap)||void 0===nt?void 0:nt.padding},at._regions[0].getLayoutRect())}))}))},e.prototype.compileMarks=function(){var nt=this;this.getMarks().forEach((function(at){var lt=nt._regions[0].getGroupMark().getProduct();at.compile({"group":lt,"context":{"model":nt}})}))},e.prototype.getVRenderComponents=function(){var nt=[];return this.getMarks().forEach((function(at){var lt=at.getProduct().getGroupGraphicItem();lt&&nt.push(lt)})),nt},e.prototype._getSeries=function(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]},e.type=lt.totalLabel,e.specKey="totalLabel",e}(G6);function B7(nt,at,lt){var Rt,Bt,Lt;void 0===lt&&(lt="top");var Ht,jt=nt.direction;Ht="bottom"===lt?{"vertical":["bottom","top"],"horizontal":["left","right"]}:{"vertical":["top","bottom"],"horizontal":["right","left"]};var $t=("horizontal"===jt?null===(Rt=nt.getXAxisHelper())||void 0===Rt?void 0:Rt.isInverse():null===(Bt=nt.getYAxisHelper())||void 0===Bt?void 0:Bt.isInverse())?1:0;switch(at){case"rect":case"symbol":Lt=Ht[jt][$t];break;default:Lt="top"}return Lt}var I7=function(){AV(),T7(),tK(),Tz.registerComponent(q6.type,q6,!0)},K6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.specKey="markPoint",at.layoutZIndex=MU.MarkPoint,at}return S(e,nt),e._getMarkerCoordinateType=function(nt){var at=$8(nt),lt=at.doPolarProcess,Rt=at.doGeoProcess;return"polar"===nt.coordinateType||lt?"polar":"geo"===nt.coordinateType||Rt?"geo":"cartesian"},e.prototype._createMarkerComponent=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se,le,ue,ce,he,de,fe,pe,ve,Ae,we,Ce,je,Ne=this._spec,Ve=Ne.itemContent,Ge=void 0===Ve?{}:Ve,ti=Ne.itemLine,li=void 0===ti?{}:ti,hi=Ne.targetSymbol,di=void 0===hi?{}:hi,fi=Ge.text,pi=void 0===fi?{}:fi,vi=Ge.symbol,mi=Ge.image,_i=Ge.richText,bi=w(Ge,["text","symbol","image","richText"]),Mi={"zIndex":this.layoutZIndex,"interactive":null===(nt=this._spec.interactive)||void 0===nt||nt,"hover":null===(at=this._spec.interactive)||void 0===at||at,"select":null===(lt=this._spec.interactive)||void 0===lt||lt,"position":{"x":0,"y":0},"clipInRange":null!==(Rt=this._spec.clip)&&void 0!==Rt&&Rt,"itemContent":A({"offsetX":q8(Ge.offsetX,this._relativeSeries.getRegion()),"offsetY":q8(Ge.offsetX,this._relativeSeries.getRegion())},bi),"targetSymbol":{"offset":null!==(Bt=di.offset)&&void 0!==Bt?Bt:0,"visible":null!==(Lt=di.visible)&&void 0!==Lt&&Lt,"size":null!==(Ht=di.size)&&void 0!==Ht?Ht:20,"style":K8(di.style,this._markerData,this._markAttributeContext)},"state":{"line":X8(null!==($t=null===(jt=this._spec.itemLine.line)||void 0===jt?void 0:jt.state)&&void 0!==$t?$t:{},this._markerData,this._markAttributeContext),"lineStartSymbol":X8(null!==(te=null===(Kt=this._spec.itemLine.startSymbol)||void 0===Kt?void 0:Kt.state)&&void 0!==te?te:{},this._markerData,this._markAttributeContext),"lineEndSymbol":X8(null!==(re=null===(ne=this._spec.itemLine.endSymbol)||void 0===ne?void 0:ne.state)&&void 0!==re?re:{},this._markerData,this._markAttributeContext),"symbol":X8(null!==(oe=null===(ae=this._spec.itemContent.symbol)||void 0===ae?void 0:ae.state)&&void 0!==oe?oe:{},this._markerData,this._markAttributeContext),"image":X8(null!==(le=null===(se=this._spec.itemContent.image)||void 0===se?void 0:se.state)&&void 0!==le?le:{},this._markerData,this._markAttributeContext),"text":X8(null!==(ce=null===(ue=this._spec.itemContent.text)||void 0===ue?void 0:ue.state)&&void 0!==ce?ce:{},this._markerData,this._markAttributeContext),"textBackground":X8(null===(de=null===(he=this._spec.itemContent.text)||void 0===he?void 0:he.labelBackground)||void 0===de?void 0:de.state,this._markerData,this._markAttributeContext),"richText":X8(null!==(pe=null===(fe=this._spec.itemContent.richText)||void 0===fe?void 0:fe.state)&&void 0!==pe?pe:{},this._markerData,this._markAttributeContext),"customMark":X8(null!==(Ae=null===(ve=this._spec.itemContent.customMark)||void 0===ve?void 0:ve.state)&&void 0!==Ae?Ae:{},this._markerData,this._markAttributeContext),"targetItem":X8(null!==(Ce=null===(we=this._spec.targetSymbol)||void 0===we?void 0:we.state)&&void 0!==Ce?Ce:{},this._markerData,this._markAttributeContext)},"animation":null!==(je=this._spec.animation)&&void 0!==je&&je,"animationEnter":this._spec.animationEnter,"animationExit":this._spec.animationExit,"animationUpdate":this._spec.animationUpdate};(null==vi?void 0:vi.style)&&(Mi.itemContent.symbolStyle=HH(K8(vi.style,this._markerData,this._markAttributeContext))),(null==mi?void 0:mi.style)&&(Mi.itemContent.imageStyle=K8(mi.style,this._markerData,this._markAttributeContext)),pi&&(Mi.itemContent.textStyle=Y8(pi,this._markerData,this._markAttributeContext)),(null==_i?void 0:_i.style)&&(Mi.itemContent.richTextStyle=K8(_i.style,this._markerData,this._markAttributeContext));var Ti=li.visible,Ii=li.line,Bi=void 0===Ii?{}:Ii,zi=w(li,["visible","line"]);return Mi.itemLine=!1!==Ti?A(A({},zi),{"visible":!0,"lineStyle":HH(Bi.style)}):{"visible":!1},new VD(Mi)},e.prototype._markerLayout=function(){var nt,at,lt,Rt,Bt,Lt,Ht=this._spec,jt=this._markerData,$t=this._relativeSeries,Kt=this._computePointsAttr().point,te=this._getRelativeDataView().latestData,ne=jt?jt.latestData[0]&&jt.latestData[0].latestData?jt.latestData[0].latestData:jt.latestData:te;if(Ht.clip||(null===(nt=Ht.itemContent)||void 0===nt?void 0:nt.confine)){var re=U8([$t.getRegion()]),ae=re.minX,oe=re.maxX,se=re.minY;Lt={"x":ae,"y":se,"width":oe-ae,"height":re.maxY-se}}if(this._markerComponent){var le=null!==(at=this._markerComponent.attribute)&&void 0!==at?at:{},ue=null!==(Rt=null===(lt=le.itemContent)||void 0===lt?void 0:lt.textStyle)&&void 0!==Rt?Rt:{};this._markerComponent.setAttributes({"position":void 0===Kt?{"x":null,"y":null}:Kt,"itemContent":A(A({},le.itemContent),{"textStyle":A(A({},ue),{"text":(null===(Bt=this._spec.itemContent.text)||void 0===Bt?void 0:Bt.formatMethod)?this._spec.itemContent.text.formatMethod(ne,te):ue.text}),"offsetX":Z8(Kt,le.itemContent.offsetX,this._relativeSeries.getRegion()),"offsetY":Z8(Kt,le.itemContent.offsetY,this._relativeSeries.getRegion())}),"limitRect":Lt,"dx":this._layoutOffsetX,"dy":this._layoutOffsetY})}},e.prototype._initDataView=function(){var nt=this._spec,at=$8(nt),lt=at.doXYProcess,Rt=at.doPolarProcess,Bt=at.doGeoProcess;(N(nt.coordinate)||lt||Rt||Bt)&&this._initCommonDataView()},e.specKey="markPoint",e}(b6),Z6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.markPoint,at.name=lt.markPoint,at.coordinateType="cartesian",at}return S(e,nt),e.prototype._computePointsAttr=function(){var nt,at,lt=this._spec,Rt=this._markerData,Bt=this._relativeSeries,Lt="x"in lt&&"y"in lt,Ht="coordinate"in lt,jt="position"in lt,$t=null!==(nt=null==lt?void 0:lt.autoRange)&&void 0!==nt&&nt;return Lt?at=H8(Rt,Bt,Bt,Bt,$t)[0][0]:Ht?at=N8(Rt,Bt,$t,lt.coordinatesOffset)[0]:jt&&(at=W8(lt.position,Bt,lt.regionRelative)[0]),{"point":at}},e.prototype._computeOptions=function(){var nt,at=this._spec,lt=$8(at).doXYProcess,Rt=N(at.coordinate);return lt?nt=[this._processSpecByDims([{"dim":"x","specValue":at.x},{"dim":"y","specValue":at.y}])]:Rt&&(nt=this._processSpecCoo(at)),{"options":nt}},e.type=lt.markPoint,e.coordinateType="cartesian",e}(K6),O7=function(){Tz.registerComponent(Z6.type,Z6),zD()},Q6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.polarMarkPoint,at.name=lt.polarMarkPoint,at.coordinateType="polar",at}return S(e,nt),e.prototype._computePointsAttr=function(){var nt,at,lt=this._markerData,Rt=this._relativeSeries,Bt=j8(lt,Rt,Rt,Rt,null!==(at=null===(nt=this._spec)||void 0===nt?void 0:nt.autoRange)&&void 0!==at&&at)[0][0];return{"point":Pe({"x":this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,"y":this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y},Bt.radius,Bt.angle)}},e.prototype._computeOptions=function(){var nt=this._spec;return{"options":[this._processSpecByDims([{"dim":"radius","specValue":nt.radius},{"dim":"angle","specValue":nt.angle}])]}},e.type=lt.polarMarkPoint,e.coordinateType="polar",e}(K6),z7=function(){Tz.registerComponent(Q6.type,Q6),zD()},J6=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.geoMarkPoint,at.name=lt.geoMarkPoint,at.coordinateType="geo",at}return S(e,nt),e.prototype._computePointsAttr=function(){var nt=function(nt,at){var lt=[];return(nt.latestData[0]&&nt.latestData[0].latestData?nt.latestData[0].latestData:nt.latestData).forEach((function(nt){N(nt.areaName)&&lt.push([{"x":at.nameValueToPosition(nt.areaName).x+at.getRegion().getLayoutStartPoint().x,"y":at.nameValueToPosition(nt.areaName).y+at.getRegion().getLayoutStartPoint().y}])})),lt}(this._markerData,this._relativeSeries)[0][0];return{"point":nt}},e.prototype._computeOptions=function(){var nt=this._spec;return{"options":[this._processSpecByDims([{"dim":"areaName","specValue":nt.areaName}])]}},e.type=lt.geoMarkPoint,e.coordinateType="geo",e}(K6),j7=function(){Tz.registerComponent(J6.type,J6),zD()},e7="inBrush",r7="outOfBrush",o7=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.layoutType="none",at.type=lt.brush,at.name=lt.brush,at.specKey="brush",at.layoutZIndex=MU.Brush,at._linkedSeries=[],at._itemMap={},at._linkedItemMap={},at._inBrushElementsMap={},at._outOfBrushElementsMap={},at._linkedInBrushElementsMap={},at._linkedOutOfBrushElementsMap={},at._needInitOutState=!0,at._cacheInteractiveRangeAttrs=[],at._needDisablePickable=!1,at._releatedAxes=[],at._regionAxisMap={},at._axisDataZoomMap={},at._zoomRecord=[],at}return S(e,nt),e.prototype.init=function(){var nt=this._transformBrushedMarkAttr(this._spec.inBrush),at=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach((function(lt){lt.getActiveMarks().forEach((function(Rt){Rt&&(lt.setMarkStyle(Rt,A({},nt),e7,EU.Series),lt.setMarkStyle(Rt,A({},at),r7,EU.Series))}))}))},e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return!1!==nt.visible}))},e.prototype.created=function(){nt.prototype.created.call(this),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()},e.prototype._extendDataInBrush=function(nt){var at,lt,Rt=[];for(var Bt in nt)for(var Lt in nt[Bt])Rt.push(A({},null===(lt=null===(at=nt[Bt][Lt])||void 0===at?void 0:at.data)||void 0===lt?void 0:lt[0]));return Rt},e.prototype._extendDatumOutOfBrush=function(nt){var at,lt=[];for(var Rt in nt)lt.push(null===(at=nt[Rt].data)||void 0===at?void 0:at[0]);return lt},e.prototype._getBrushInteractiveAttr=function(nt){var at=nt.getLayoutStartPoint(),lt=nt.getLayoutRect(),Rt=at.x,Bt=Rt+lt.width,Lt=at.y,Ht=Lt+lt.height;return{"interactiveRange":{"minY":Lt,"maxY":Ht,"minX":Rt,"maxX":Bt},"xRange":[Rt,Bt],"yRange":[Lt,Ht]}},e.prototype._updateBrushComponent=function(nt,at){var lt=this._getBrushInteractiveAttr(nt),Rt=this._brushComponents[at];Rt.setAttributes(lt),this._initMarkBrushState(at,""),Rt.children[0].removeAllChild(),this._needInitOutState=!0},e.prototype._createBrushComponent=function(nt,at){var lt,Rt,Bt=this,Lt=this._getBrushInteractiveAttr(nt),Ht=new ZL(A(A(A({"zIndex":this.layoutZIndex,"brushStyle":HH(null===(lt=this._spec)||void 0===lt?void 0:lt.style)},Lt),this._spec),{"disableTriggerEvent":this._option.disableTriggerEvent}));Ht.id=null!==(Rt=this._spec.id)&&void 0!==Rt?Rt:"brush-".concat(this.id),this.getContainer().add(Ht);var jt=this._spec.brushMode,$t=void 0===jt?"single":jt;this._brushComponents.push(Ht),this._cacheInteractiveRangeAttrs.push(Lt),Ht.addEventListener(YL.drawStart,(function(at){Bt._emitEvent(jW.brushStart,nt)})),Ht.addEventListener(YL.moveStart,(function(at){Bt._emitEvent(jW.brushStart,nt)})),Ht.addEventListener(YL.drawing,(function(lt){Bt._needInitOutState&&"single"===$t&&Bt._initMarkBrushState(at,r7),Bt._needInitOutState=!1,Bt._needDisablePickable=!0,Bt._handleBrushChange(jW.brushChange,nt,lt),Bt._emitEvent(jW.brushChange,nt)})),Ht.addEventListener(YL.moving,(function(at){Bt._handleBrushChange(jW.brushChange,nt,at),Bt._emitEvent(jW.brushChange,nt)})),Ht.addEventListener(YL.brushClear,(function(lt){Bt._initMarkBrushState(at,""),Bt._needInitOutState=!0,Bt._needDisablePickable=!1,Bt._handleBrushChange(jW.brushChange,nt,lt),Bt._handleBrushChange(jW.brushClear,nt,lt),Bt._emitEvent(jW.brushChange,nt),Bt._emitEvent(jW.brushClear,nt)})),Ht.addEventListener(YL.drawEnd,(function(at){Bt._needInitOutState=!0,Bt._needDisablePickable=!1;var lt=at.detail.operateMask;Bt._handleBrushChange(jW.brushEnd,nt,at);var Rt=Bt._extendDataInBrush(Bt._inBrushElementsMap);!Bt._spec.zoomWhenEmpty&&Rt.length>0&&Bt._setAxisAndDataZoom(lt,nt),Bt._emitEvent(jW.brushEnd,nt)})),Ht.addEventListener(YL.moveEnd,(function(at){var lt=at.detail.operateMask;Bt._handleBrushChange(jW.brushEnd,nt,at);var Rt=Bt._extendDataInBrush(Bt._inBrushElementsMap);!Bt._spec.zoomWhenEmpty&&Rt.length>0&&Bt._setAxisAndDataZoom(lt,nt),Bt._emitEvent(jW.brushEnd,nt)}))},e.prototype._handleBrushChange=function(nt,at,lt){var Rt=lt.detail.operateMask;this._reconfigItem(Rt,at),this._reconfigLinkedItem(Rt,at)},e.prototype._emitEvent=function(nt,at){this.event.emit(nt,{"model":this,"value":{"operateType":nt,"operateRegion":at,"inBrushData":this._extendDataInBrush(this._inBrushElementsMap),"outOfBrushData":this._extendDatumOutOfBrush(this._outOfBrushElementsMap),"linkInBrushData":this._extendDataInBrush(this._linkedInBrushElementsMap),"linkOutOfBrushData":this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),"inBrushElementsMap":this._inBrushElementsMap,"outOfBrushElementsMap":this._outOfBrushElementsMap,"linkedInBrushElementsMap":this._linkedInBrushElementsMap,"linkedOutOfBrushElementsMap":this._linkedOutOfBrushElementsMap,"zoomRecord":this._zoomRecord}})},e.prototype._transformBrushedMarkAttr=function(nt){var at={};return(null==nt?void 0:nt.symbol)&&(at.symbolType=nt.symbol),(null==nt?void 0:nt.symbolSize)&&(at.size=nt.symbolSize),(null==nt?void 0:nt.color)&&(at.fill=nt.color),(null==nt?void 0:nt.colorAlpha)&&(at.fillOpacity=nt.colorAlpha),A(A({},HH(nt)),at)},e.prototype._reconfigItem=function(nt,at){var lt=this;this._itemMap[at.id].forEach((function(at){var Rt=at.getProduct();Rt&&Rt.elements&&Rt.elements.length&&Rt.elements.forEach((function(Rt){var Bt,Lt,Ht,jt=Rt.getGraphicItem(),$t=at.id+"_"+Rt.key;(null===(Bt=lt._outOfBrushElementsMap)||void 0===Bt?void 0:Bt[$t])&&lt._isBrushContainItem(nt,jt)?(Rt.addState(e7),lt._inBrushElementsMap[null==nt?void 0:nt.name]||(lt._inBrushElementsMap[null==nt?void 0:nt.name]={}),lt._inBrushElementsMap[null==nt?void 0:nt.name][$t]=Rt,delete lt._outOfBrushElementsMap[$t]):(null===(Ht=null===(Lt=lt._inBrushElementsMap)||void 0===Lt?void 0:Lt[null==nt?void 0:nt.name])||void 0===Ht?void 0:Ht[$t])&&!lt._isBrushContainItem(nt,jt)&&(Rt.removeState(e7),Rt.addState(r7),lt._outOfBrushElementsMap[$t]=Rt,delete lt._inBrushElementsMap[nt.name][$t]),jt.setAttribute("pickable",!lt._needDisablePickable)}))}))},e.prototype._reconfigLinkedItem=function(nt,at){var lt=this,Rt=at.getLayoutStartPoint(),Bt=at.getSeries().map((function(nt){return nt.id}));this._linkedSeries.forEach((function(at){if(!Bt.includes(at.id)){var Lt=at.getRegion().getLayoutStartPoint(),Ht=Lt.x-Rt.x,jt=Lt.y-Rt.y;lt._linkedItemMap[at.id].forEach((function(at){var Rt=at.getProduct();Rt&&Rt.elements&&Rt.elements.length&&Rt.elements.forEach((function(Rt){var Bt,Lt,$t,Kt=Rt.getGraphicItem(),te=at.id+"_"+Rt.key;(null===(Bt=lt._linkedOutOfBrushElementsMap)||void 0===Bt?void 0:Bt[te])&&lt._isBrushContainItem(nt,Kt,{"dx":Ht,"dy":jt})?(Rt.addState(e7),lt._linkedInBrushElementsMap[null==nt?void 0:nt.name]||(lt._linkedInBrushElementsMap[null==nt?void 0:nt.name]={}),lt._linkedInBrushElementsMap[null==nt?void 0:nt.name][te]=Rt,delete lt._linkedOutOfBrushElementsMap[te]):(null===($t=null===(Lt=lt._linkedInBrushElementsMap)||void 0===Lt?void 0:Lt[null==nt?void 0:nt.name])||void 0===$t?void 0:$t[te])&&!lt._isBrushContainItem(nt,Kt,{"dx":Ht,"dy":jt})&&(Rt.removeState(e7),Rt.addState(r7),lt._linkedOutOfBrushElementsMap[te]=Rt),Kt.setAttribute("pickable",!lt._needDisablePickable)}))}))}}))},e.prototype._isBrushContainItem=function(nt,at,lt){var Rt,Bt,Lt;if(!(null==nt?void 0:nt.globalTransMatrix)||!(null===(Rt=null==nt?void 0:nt.attribute)||void 0===Rt?void 0:Rt.points))return!1;var Ht=null!==(Lt=null===(Bt=null==nt?void 0:nt.attribute)||void 0===Bt?void 0:Bt.points)&&void 0!==Lt?Lt:[],jt=nt.globalTransMatrix,$t=jt.a,Kt=jt.b,te=jt.c,ne=jt.d,re=jt.e,ae=jt.f,oe=(null==lt?void 0:lt.dx)||0,se=(null==lt?void 0:lt.dy)||0,le=Ht.map((function(nt){return{"x":$t*nt.x+te*nt.y+re+oe,"y":Kt*nt.x+ne*nt.y+ae+se}}));nt.globalAABBBounds.clone().set(nt.globalAABBBounds.x1+oe,nt.globalAABBBounds.y1+se,nt.globalAABBBounds.x2+oe,nt.globalAABBBounds.y2+se);var ue=at.globalTransMatrix.e,ce=at.globalTransMatrix.f;if("symbol"===at.type){var he=(null==at?void 0:at.attribute).size,de=xt(void 0===he?0:he)[0]/2;return ai(le,[{"x":ue-de,"y":ce-de},{"x":ue+de,"y":ce-de},{"x":ue+de,"y":ce+de},{"x":ue-de,"y":ce+de}])}if("rect"===at.type){var fe=null==at?void 0:at.AABBBounds,pe=fe.x1,ve=fe.x2,Ae=fe.y1,we=fe.y2,Ce=Math.abs(pe-ve),je=Math.abs(Ae-we);return ai(le,[{"x":ue,"y":ce},{"x":ue+Ce,"y":ce},{"x":ue+Ce,"y":ce+je},{"x":ue,"y":ce+je}])}return nt.globalAABBBounds.intersects(at.globalAABBBounds)},e.prototype._stateClamp=function(nt){return Math.min(Math.max(0,nt),1)},e.prototype._setAxisAndDataZoom=function(nt,at){var lt,Rt=this;if(this._zoomRecord=[],this._spec.zoomAfterBrush){var Bt=nt.AABBBounds;null===(lt=this._regionAxisMap["region_"+at.id])||void 0===lt||lt.forEach((function(nt){var lt,Lt,Ht="bottom"===nt.layoutOrient||"top"===nt.layoutOrient,jt=null!==(lt=Rt._spec.axisRangeExpand)&&void 0!==lt?lt:0,$t=Bt.x1,Kt=Bt.x2,te=Bt.y1,ne=Bt.y2,re=Ht?"x":"y",ae=Ht?$t:te,oe=Ht?Kt:ne;if(Rt._axisDataZoomMap[nt.id]){var se=Rt._axisDataZoomMap[nt.id],le=se.relatedAxisComponent,ue=le.getScale().invert(ae-at.getLayoutStartPoint()[re]),ce=le.getScale().invert(oe-at.getLayoutStartPoint()[re]),he=se.dataToStatePoint(ue),de=se.dataToStatePoint(ce),fe=Rt._stateClamp(he-jt),pe=Rt._stateClamp(de+jt);se.setStartAndEnd(Math.min(fe,pe),Math.max(fe,pe),["percent","percent"]),Rt._zoomRecord.push({"operateComponent":se,"start":fe,"end":pe,"startValue":se.statePointToData(fe),"endValue":se.statePointToData(pe)})}else{var ve=nt.getScale().range(),Ae=null!==(Lt=nt.getScale().rangeFactor())&&void 0!==Lt?Lt:[0,1],we=kt(ve)<ve[0],Ce=ae-at.getLayoutStartPoint()[re],je=oe-at.getLayoutStartPoint()[re],Ne=we?Math.min(Ce,je):Math.max(Ce,je),Ve=we?Math.max(Ce,je):Math.min(Ce,je),Ge=(Ve-ve[0])/(kt(ve)-ve[0])*(Ae[1]-Ae[0])+Ae[0],ti=(Ne-ve[0])/(kt(ve)-ve[0])*(Ae[1]-Ae[0])+Ae[0],li=Rt._stateClamp(Ge-jt),hi=Rt._stateClamp(ti+jt);nt.getScale().rangeFactor([li,hi]),nt.effect.scaleUpdate(),Rt._zoomRecord.push({"operateComponent":nt,"start":li,"end":hi,"startValue":nt.getScale().invert(Ve),"endValue":nt.getScale().invert(Ne)})}}))}},e.prototype._bindRegions=function(){N(this._spec.regionId)&&N(this._spec.regionIndex)&&(this._relativeRegions=this._option.getAllRegions()),this._relativeRegions=this._option.getRegionsInUserIdOrIndex(xt(this._spec.regionId),xt(this._spec.regionIndex))},e.prototype._bindLinkedSeries=function(){N(this._spec.brushLinkSeriesId)&&N(this._spec.brushLinkSeriesIndex)||(this._linkedSeries=this._option.getSeriesInUserIdOrIndex(xt(this._spec.brushLinkSeriesId),xt(this._spec.brushLinkSeriesIndex)))},e.prototype._initRegionAxisMap=function(){var nt=this;N(this._spec.axisId)?xt(this._spec.axisId).forEach((function(at){nt._releatedAxes.push(nt._option.getComponentByUserId(at))})):N(this._spec.axisIndex)?xt(this._spec.axisIndex).forEach((function(at){nt._releatedAxes.push(nt._option.getComponentByIndex("axes",at))})):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach((function(at){null==at||at.getRegions().forEach((function(lt){nt._regionAxisMap["region_"+lt.id]?nt._regionAxisMap["region_"+lt.id].push(at):nt._regionAxisMap["region_"+lt.id]=[at]}))}))},e.prototype._initAxisDataZoomMap=function(){var nt=this;this._option.getComponentsByKey("dataZoom").forEach((function(at){at.relatedAxisComponent&&(nt._axisDataZoomMap[at.relatedAxisComponent.id]=at)}))},e.prototype._initNeedOperatedItem=function(){var nt=this,at=this._spec.seriesId,lt=this._spec.seriesIndex;this._relativeRegions.forEach((function(Rt){var Bt=[];Rt.getSeries().forEach((function(Lt){(at&&xt(at).includes(Lt.userId.toString())||lt&&xt(lt).includes(Lt.getSpecIndex())||!lt&&!at)&&Bt.push.apply(Bt,P([],E(Lt.getMarksWithoutRoot()),!1)),nt._itemMap[Rt.id]=Bt}))})),this._linkedSeries.forEach((function(at){nt._linkedItemMap[at.id]=at.getMarksWithoutRoot()}))},e.prototype._initMarkBrushState=function(nt,at){var lt=this;this._brushComponents.forEach((function(at,lt){lt!==nt&&at.children[0].removeAllChild()})),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._option.getAllSeries().forEach((function(nt){nt.getMarksWithoutRoot().forEach((function(nt){var Rt=nt.getProduct();Rt&&Rt.elements&&Rt.elements.length&&Rt.elements.forEach((function(Rt){var Bt=nt.id+"_"+Rt.key;Rt.removeState(e7),Rt.removeState(r7),Rt.addState(at),lt._outOfBrushElementsMap[Bt]=Rt,lt._linkedOutOfBrushElementsMap[Bt]=Rt}))}))}))},e.prototype.initEvent=function(){},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(nt){},e.prototype._getNeedClearVRenderComponents=function(){return this._brushComponents},e.prototype._compareSpec=function(at,lt){var Rt=this;this._brushComponents&&this._relativeRegions.forEach((function(nt,at){Rt._updateBrushComponent(nt,at)}));var Bt=nt.prototype._compareSpec.call(this,at,lt);return mt(lt,at)||(Bt.reRender=!0,Bt.reMake=!0),Bt},e.prototype.onLayoutEnd=function(at){var lt,Rt=this;nt.prototype.onLayoutEnd.call(this,at),this._option.disableTriggerEvent||(null===(lt=this._spec.visible)||void 0===lt||lt)&&(this._brushComponents?this._relativeRegions.forEach((function(nt,at){Rt._updateBrushComponent(nt,at)})):(this._brushComponents=[],this._relativeRegions.forEach((function(nt,at){Rt._createBrushComponent(nt,at)}))))},e.prototype.clearGraphic=function(){this._brushComponents&&this._brushComponents.forEach((function(nt){nt._container.incrementalClearChild()}))},e.prototype.clear=function(){if(this._brushComponents){var nt=this.getContainer();this._brushComponents.forEach((function(at){at.removeAllChild(),at.releaseBrushEvents(),nt&&nt.removeChild(at)})),this._brushComponents=null}},e.type=lt.brush,e.specKey="brush",e}(s$),W7=function(){Tz.registerComponent(o7.type,o7)},s7=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.customMark,at.specKey="customMark",at.layoutType="none",at.layoutZIndex=MU.CustomMark,at.layoutLevel=TU.CustomMark,at}return S(e,nt),e.prototype.created=function(){nt.prototype.created.call(this),this.initMarks(),this.initEvent()},e.prototype.getMarkAttributeContext=function(){return this._markAttributeContext},e.prototype._buildMarkAttributeContext=function(){var nt=this;this._markAttributeContext={"vchart":this._option.globalInstance,"globalScale":function(at,lt){var Rt;return null===(Rt=nt._option.globalScale.getScale(at))||void 0===Rt?void 0:Rt.scale(lt)}}},e.prototype.initMarks=function(){var nt=this;if(this._spec){var at=this._option&&this._option.getAllSeries(),lt=!1!==this._option.animation,Rt=[];at&&at.length&&at.forEach((function(nt){var at=nt&&nt.getMarksWithoutRoot();at&&at.length&&at.forEach((function(nt){Rt.push(nt)}))}));var Bt=null;if(this._spec.parent){var Lt=this.getChart().getAllMarks().find((function(at){return at.getUserId()===nt._spec.parent}));"group"===Lt.type&&(Bt=Lt)}this._createExtensionMark(this._spec,Bt,"".concat(OF,"_series_").concat(this.id,"_extensionMark"),0,{"depend":Rt,"hasAnimation":lt})}},e.prototype._createExtensionMark=function(nt,at,lt,Rt,Bt){var Lt,Ht=this;void 0===Rt&&(Rt=0);var jt=this._createMark({"type":nt.type,"name":N(nt.name)?"".concat(nt.name):"".concat(lt,"_").concat(Rt)},{"skipBeforeLayouted":!0,"attributeContext":this._getMarkAttributeContext(),"componentType":nt.componentType,"key":nt.dataKey});if(jt){if(N(nt.id)&&jt.setUserId(nt.id),Bt.hasAnimation&&nt.animation){var $t=rX({},aX(nt.type,nt,this._markAttributeContext));jt.setAnimationConfig($t)}if(Bt.depend&&Bt.depend.length&&jt.setDepend.apply(jt,P([],E(Bt.depend),!1)),j(at)?this._marks.addMark(jt):at&&at.addMark(jt),this.initMarkStyleWithSpec(jt,nt),"group"===nt.type&&(lt="".concat(lt,"_").concat(Rt),null===(Lt=nt.children)||void 0===Lt||Lt.forEach((function(nt,at){Ht._createExtensionMark(nt,jt,lt,at,Bt)}))),N(nt.dataId)||Q(nt.dataIndex)){var Kt=this.getChart().getSeriesData(nt.dataId,nt.dataIndex);Kt&&(Kt.target.addListener("change",(function(){jt.getData().updateData()})),jt.setDataView(Kt))}}},e.prototype.initEvent=function(){},e.prototype._compareSpec=function(at,lt){var Rt=nt.prototype._compareSpec.call(this,at,lt);return mt(lt,at)||(Rt.reMake=!0),Rt.change=!0,Rt.reRender=!0,Rt},e.prototype.changeRegions=function(nt){},e.prototype._getNeedClearVRenderComponents=function(){return[]},e.prototype.onRender=function(nt){},e.prototype._getMarkAttributeContext=function(){var nt=this;return{"vchart":this._option.globalInstance,"chart":this.getChart(),"globalScale":function(at,lt){var Rt;return null===(Rt=nt._option.globalScale.getScale(at))||void 0===Rt?void 0:Rt.scale(lt)},"getLayoutBounds":function(){var at=nt.getLayoutStartPoint(),lt=at.x,Rt=at.y,Bt=nt.getLayoutRect(),Lt=Bt.width,Ht=Bt.height;return(new mi).set(lt,Rt,lt+Lt,Rt+Ht)}}},e.prototype._getLayoutRect=function(){var nt=new mi;return this.getMarks().forEach((function(at){var lt=at.getProduct();lt&&nt.union(lt.getBounds())})),nt.empty()?{"width":0,"height":0}:{"width":nt.width(),"height":nt.height()}},e.prototype.getBoundsInRect=function(nt){this.setLayoutRect(nt);var at=this._getLayoutRect(),lt=this.getLayoutStartPoint(),Rt=lt.x,Bt=lt.y;return{"x1":Rt,"y1":Bt,"x2":Rt+at.width,"y2":Bt+at.height}},e.prototype.getVRenderComponents=function(){var nt=[],e=function(at){var lt;if(at&&"group"===at.type)at.getMarks().forEach((function(nt){e(nt)}));else if("component"===at.type){var Rt=null===(lt=null==at?void 0:at.getProduct())||void 0===lt?void 0:lt.getGroupGraphicItem();Rt&&nt.push(Rt)}};return this.getMarks().forEach((function(nt){e(nt)})),nt},e.type=lt.customMark,e.specKey="customMark",e}(s$),Y7=function(){Tz.registerComponent(s7.type,s7)};function X7(nt,at,lt){return void 0===lt&&(lt=0),lt>Math.max(at.x1-nt.x2,nt.x1-at.x2,at.y1-nt.y2,nt.y1-at.y2)}function K7(nt){return{"x1":nt.x,"x2":nt.x+nt.width,"y1":nt.y,"y2":nt.y+nt.height}}function q7(nt){var at;if(!nt||0===nt.length)return[];if(1===nt.length)return[nt[0].rect];var lt=nt.map((function(nt){var at;return A(A({},nt),{"bound":K7(nt.rect),"anchorCandidates":e6(null!==(at=nt.anchors)&&void 0!==at?at:[],nt.point,nt.rect,nt.offset)})})),Rt=[];Rt.push(lt[0].bound);for(var r=function(nt){var Bt=lt[nt],Lt=Bt.bound,Ht=Rt.some((function(nt){return X7(nt,Lt)}));if(!Bt.anchorCandidates)return"continue";if(Ht&&(null===(at=Bt.anchorCandidates)||void 0===at?void 0:at.length)>0){for(var s=function(nt){var at=Bt.anchorCandidates[nt],lt={"x1":at.x,"y1":at.y,"x2":at.x+Lt.x2-Lt.x1,"y2":at.y+Lt.y2-Lt.y1,"anchor":at};if(!Rt.some((function(nt){return X7(nt,lt)})))return Rt.push(lt),Ht=!1,"break"},jt=0;jt<Bt.anchorCandidates.length&&"break"!==s(jt);jt++);Ht&&Rt.push(Bt.bound)}else Rt.push(Bt.bound)},Bt=1;Bt<=lt.length-1;Bt++)r(Bt);return Rt.map((function(nt){return function(nt){return{"x":nt.x1,"y":nt.y1,"width":nt.x2-nt.x1,"height":nt.y2-nt.y1}}(nt)}))}function Z7(nt,at,lt){var Rt=$e(nt.map((function(nt){return nt.pointCoord}))),Bt=Rt.x1,Lt=Rt.x2,Ht=Rt.y1,jt=Rt.y2,$t=lt([(Bt+Lt)/2,(Ht+jt)/2]);if(!$t)return[];var Kt=nt.map((function(nt){var Rt=nt.rect,Bt=$7(at,nt.pointCoord)?lt(function(nt,at,lt,Rt){void 0===Rt&&(Rt=200);for(var Bt=5621/Rt,Lt=at,Ht=1;Ht<=Bt;Ht++){var jt=Fi(Lt,Rt,lt);if(!$7(nt,jt))return[jt.x,jt.y];Lt=[jt.x,jt.y]}return at}(at,[nt.pointCoord.x,nt.pointCoord.y],J7(Q7(nt.point,$t)))):nt.point;Bt&&(Rt.x=Bt.x,Rt.y=Bt.y);var Lt,Ht=J7(Q7(nt.point,$t)),jt=[];return Ht>=-45&&Ht<45?(Lt="top",jt.push("left","right")):Ht>=45&&Ht<135?Lt="right":Ht>=-135&&Ht<-45?(Lt="left",jt.push("left")):(Lt="bottom",jt.push("left","right")),nt.anchors=jt,nt.offset=20,nt.rect=t6(nt.rect,Lt,0),nt}));return q7(Kt)}function J7(nt){return nt>180?nt-360:nt}function Q7(nt,at){return 180*Math.atan2(nt.y-at.y,nt.x-at.x)/Math.PI+90}function $7(nt,at){for(var lt=0;lt<nt.length;lt++)if(Oi(at,nt[lt]))return!0;return!1}function t6(nt,at,lt){void 0===lt&&(lt=0);var Rt=A({},nt);return"top"===at?(Rt.x-=nt.width/2,Rt.y-=lt+nt.height/2):"bottom"===at?(Rt.x-=nt.width/2,Rt.y+=lt-nt.height/2):"left"===at?(Rt.x-=lt+nt.width,Rt.y-=nt.height/2):"right"===at&&(Rt.x+=lt,Rt.y-=nt.height/2),Rt}function e6(nt,at,lt,Rt){void 0===Rt&&(Rt=0);var Bt=[];return nt.forEach((function(nt){var Lt=t6(A(A({},at),{"width":lt.width,"height":lt.height}),nt,Rt),Ht=Lt.x,jt=Lt.y;Bt.push({"x":Ht,"y":jt})})),Bt}var u7=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=lt.mapLabel,at.name=lt.mapLabel,at.specKey="mapLabel",at.layoutType="none",at.layoutZIndex=MU.MarkPoint,at._activeDatum=[],at}return S(e,nt),e.getSpecInfo=function(nt){return gY(nt,this.specKey,this.type,(function(nt){return nt.visible&&N(nt.seriesId)}))},e.prototype.setAttrFromSpec=function(){var nt,at,lt,Rt;this.nameField=null!==(nt=this._spec.nameField)&&void 0!==nt?nt:null===(at=this._series)||void 0===at?void 0:at.getDimensionField()[0],this.valueField=null!==(lt=this._spec.valueField)&&void 0!==lt?lt:null===(Rt=this._series)||void 0===Rt?void 0:Rt.getMeasureField()[0]},e.prototype.created=function(){nt.prototype.created.call(this),0!=!!this._spec.visible&&(this.initRelatedInfo(),this.initData(),this.initEvent())},e.prototype.initRelatedInfo=function(){var nt,at,lt,Rt,Bt,Lt,Ht,jt;this._series=this._option.getSeriesInUserIdOrIndex([this._spec.seriesId])[0],"outer"===this._spec.position&&(this._map=null===(at=null===(nt=this._regions[0].getSeriesInType("map")[0])||void 0===nt?void 0:nt.getMapViewData())||void 0===at?void 0:at.latestData,this._longitudeField=null===(Bt=null===(Rt=(lt=this._regions[0]).getSpec)||void 0===Rt?void 0:Rt.call(lt))||void 0===Bt?void 0:Bt.longitudeField,this._latitudeField=null===(jt=null===(Ht=(Lt=this._regions[0]).getSpec)||void 0===Ht?void 0:Ht.call(Lt))||void 0===jt?void 0:jt.latitudeField)},e.prototype.initData=function(){var nt=this,at=this._series;if(at){var lt=at.getViewData();if(lt){var Rt=new Es(this._option.dataSet,{"name":"".concat(this.name,"_data")});Rt.parse([lt],{"type":"dataview"}),Rt.transform({"type":"copyDataView","level":vU.copyDataView},!1),this._data=new oY(this._option,Rt),Rt.target.addListener("change",(function(){"hover"!==nt._spec.trigger&&"click"!==nt._spec.trigger&&(nt._activeDatum=nt._data.getLatestData())}))}}},e.prototype.initEvent=function(){var nt,at=this;this.event.on("zoom",{"filter":function(nt){return at._isRelativeModel(nt.model)}},(function(nt){return at.handleZoom(nt),!0})),this.event.on("panmove",{"filter":function(nt){return at._isRelativeModel(nt.model)}},(function(nt){return at.handlePan(nt),!0}));var lt=this._spec.trigger;if("none"!==lt){var Rt=null===(nt=this.getCompiler())||void 0===nt?void 0:nt.getVGrammarView();Rt&&("hover"===lt?(Rt.addEventListener("element-highlight:start",(function(nt){at._isRelativeSeries(nt.options.seriesId)&&at._updateDatum(nt.elements[0].getDatum())})),Rt.addEventListener("element-highlight:reset",(function(nt){at._isRelativeSeries(nt.options.seriesId)&&at._updateDatum(null)}))):"click"===lt&&(Rt.addEventListener("element-select:start",(function(nt){at._isRelativeSeries(nt.options.seriesId)&&at._updateDatum(nt.elements[0].getDatum())})),Rt.addEventListener("elementSelectReset",(function(nt){at._isRelativeSeries(nt.options.seriesId)&&at._updateDatum([])}))))}},e.prototype.handlePan=function(nt){var at=nt.delta;this._markerComponents.forEach((function(nt){nt.translate(at[0],at[1])}))},e.prototype.handleZoom=function(nt){this._updateMarkerLayoutAttribute()},e.prototype._updateDatum=function(nt){var at=this;this._activeDatum=nt,this._markerComponents.forEach((function(nt,lt){var Rt,Bt=null===(Rt=at._data)||void 0===Rt?void 0:Rt.getLatestData()[lt];at._activeDatum.includes(Bt)?nt.setAttribute("visible",!0):nt.setAttribute("visible",!1)}))},e.prototype.dataToPosition=function(nt){return this._series.dataToPosition(nt)},e.prototype.updateLayoutAttribute=function(){var at,lt=null===(at=this._data)||void 0===at?void 0:at.getLatestData();lt&&0!==lt.length&&(nt.prototype.updateLayoutAttribute.call(this),this._updateMarkerLayoutAttribute())},e.prototype._updateMarkerLayoutAttribute=function(){var nt,at=this,lt=[],Rt=[];this._markerComponents||(this._markerComponents=null===(nt=this._data)||void 0===nt?void 0:nt.getLatestData().map((function(nt,lt){var Rt,Bt=new VD({"position":void 0,"animation":!1});return Bt&&(Bt.name="".concat(at.name,"_marker_").concat(lt),Bt.id=null!==(Rt=at._spec.id)&&void 0!==Rt?Rt:"".concat(at.name,"_marker_").concat(at.id),Bt.setAttribute("zIndex",at.layoutZIndex)),Bt}))),this._markerComponents.forEach((function(nt,Bt){nt.removeAllChild();var Lt=at._evaluateMarker(at._data.getLatestData()[Bt],Bt),Ht=Lt.pairInfo,jt=Lt.contentMarks;Ht&&lt.push(Ht),jt&&Rt.push(jt)}));var Bt=this._layoutLabels(lt);this._layoutMarkers(Bt,Rt),this._renderMarkers()},e.prototype._evaluateMarker=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe=0,se=0,le=0,ue=0,ce=0,he=this._spec.position||"top",de=this._spec.offset,fe=vF(null===(lt=this._spec.background)||void 0===lt?void 0:lt.padding),pe=this._spec.space||0;se+=((null==fe?void 0:fe.left)||0)+((null==fe?void 0:fe.right)||0),le+=((null==fe?void 0:fe.top)||0)+((null==fe?void 0:fe.bottom)||0);var ve={},Ae=this.dataToPosition(nt),we=Pv({});if(we.name="".concat(this.name,"_marker_itemContainer_").concat(at),ve.container=we,null===(Rt=this._spec.background)||void 0===Rt?void 0:Rt.visible){var Ce=Wg(HH(A({},this._spec.background.style)));Ce.setAttributes(Ae),ve.labelBackground=Ce,we.appendChild(Ce)}if(null===(Bt=this._spec.icon)||void 0===Bt?void 0:Bt.visible){var je=zg(HH(A({},this._spec.icon.style)));je.setAttributes(Ae),je.setAttribute("symbolType",null===(Lt=this._spec.icon.style)||void 0===Lt?void 0:Lt.shape);var Ne=je.AABBBounds,Ve=null!==(Ht=(null==Ne?void 0:Ne.y2)-(null==Ne?void 0:Ne.y1))&&void 0!==Ht?Ht:0,Ge=null!==(jt=(null==Ne?void 0:Ne.x2)-(null==Ne?void 0:Ne.x1))&&void 0!==jt?jt:0;ve.icon=je,we.appendChild(je),ce=Ve,ue+=Ge,oe++}if(null===($t=this._spec.nameLabel)||void 0===$t?void 0:$t.visible){var ti=Dg(HH(A({},this._spec.nameLabel.style)));ti.setAttributes(Ae),ti.setAttribute("text",nt[this.nameField]);var li=ti.AABBBounds,hi=null!==(Kt=(null==li?void 0:li.y2)-(null==li?void 0:li.y1))&&void 0!==Kt?Kt:0,di=null!==(te=(null==li?void 0:li.x2)-(null==li?void 0:li.x1))&&void 0!==te?te:0;ve.nameLabel=ti,we.appendChild(ti),ce=Math.max(ce,hi),ue+=di,oe++}if((null===(ne=this._spec.valueLabel)||void 0===ne?void 0:ne.visible)&&N(nt[this.valueField])){var fi=Dg(HH(A({},this._spec.valueLabel.style)));fi.setAttributes(Ae),fi.setAttribute("text",nt[this.valueField]);var pi=fi.AABBBounds,vi=null!==(re=(null==pi?void 0:pi.y2)-(null==pi?void 0:pi.y1))&&void 0!==re?re:0,mi=null!==(ae=(null==pi?void 0:pi.x2)-(null==pi?void 0:pi.x1))&&void 0!==ae?ae:0;ve.valueLabel=fi,we.appendChild(fi),ce=Math.max(ce,vi),ue+=mi,oe++}var _i=Object.values(ve).find((function(nt){return!!nt&&"group"!==nt.type})),bi={"x":null==_i?void 0:_i.getComputedAttribute("x"),"y":null==_i?void 0:_i.getComputedAttribute("y")},Mi={"x":bi.x,"y":bi.y,"width":0,"height":0};Mi.width=se+ue+(oe-1)*pe,Mi.height=le+ce;var Ti={"rect":Mi,"point":bi,"index":at};if("outer"!==he){var Ii=["top","right","left","bottom"].filter((function(nt){return nt!==he}));Ti.rect=t6(Mi,he,de),Ti.anchors=Ii,Ti.offset=de}else Ti.pointCoord={"x":+(null==nt?void 0:nt[this._longitudeField]),"y":+(null==nt?void 0:nt[this._latitudeField])};return{"pairInfo":Ti,"contentMarks":ve}},e.prototype._layoutMarkers=function(nt,at){for(var lt,Rt,Bt,a=function(Ht){if(!nt[Ht]||!at[Ht])return{"value":void 0};var jt=at[Ht],$t=jt.icon,Kt=jt.nameLabel,te=jt.valueLabel,ne=jt.labelBackground,re=jt.container,ae=nt[Ht],oe=vF(null===(lt=Lt._spec.background)||void 0===lt?void 0:lt.padding),se=Lt._spec.space||0,le=ae.height/2,ue=(null==oe?void 0:oe.left)||0;[$t,Kt,te].forEach((function(nt,at){var lt,Rt;if(nt){var Bt=nt.AABBBounds,Lt=0;"symbol"===nt.type&&(Lt+=(null!==(lt=Bt.x2-Bt.x1)&&void 0!==lt?lt:0)/2),nt.setAttributes({"x":ue+Lt,"y":le}),ue+=null!==(Rt=Bt.x2-Bt.x1)&&void 0!==Rt?Rt:0,2!==at&&(ue+=se)}})),null==ne||ne.setAttributes({"x":0,"y":0,"width":ae.width,"height":ae.height}),null==re||re.setAttributes({"dx":-ae.width/2,"dy":-ae.height/2});var ce=Lt._data.getLatestData()[Ht],he=Lt.dataToPosition(ce),de=Lt.getRegions()[0].getLayoutStartPoint(),fe=!(!(null===(Rt=Lt._spec.leader)||void 0===Rt?void 0:Rt.visible)||!($t||Kt||te));Lt._markerComponents[Ht].setAttributes({"x":de.x,"y":de.y,"position":he,"visible":Lt._activeDatum.includes(ce),"itemContent":{"refX":0,"type":"custom","renderCustomCallback":function(){return re},"autoRotate":!1,"offsetX":ae.x+ae.width/2-he.x,"offsetY":ae.y+ae.height/2-he.y},"itemLine":{"visible":fe,"type":"type-po","lineStyle":HH(A({},null===(Bt=Lt._spec.leader)||void 0===Bt?void 0:Bt.style)),"startSymbol":{"visible":!1}}})},Lt=this,Ht=0;Ht<at.length;Ht++){var jt=a(Ht);if("object"==typeof jt)return jt.value}},e.prototype._renderMarkers=function(){if(this._markerComponents&&this._markerComponents.length)for(var nt=0;nt<this._markerComponents.length;nt++)this.getContainer().add(this._markerComponents[nt])},e.prototype._layoutLabels=function(nt){var at=this;return"outer"===this._spec.position&&this._map?Z7(nt,this._map,(function(nt){var lt;return at._series.dataToPosition(((lt={})[at._longitudeField]=nt[0],lt[at._latitudeField]=nt[1],lt))})):q7(nt)},e.prototype._isRelativeModel=function(nt){var at,lt,Rt,Bt=null!==(lt=null===(at=this._series.getXAxisHelper())||void 0===at?void 0:at.getAxisId())&&void 0!==lt?lt:null===(Rt=this._series.getCoordinateHelper())||void 0===Rt?void 0:Rt.getCoordinateId();return(null==nt?void 0:nt.id)===Bt},e.prototype._isRelativeSeries=function(nt){return(null==nt?void 0:nt.id)===this._series.id},e.prototype.onRender=function(nt){},e.prototype.changeRegions=function(){},e.prototype._getNeedClearVRenderComponents=function(){return this._markerComponents},e.type=lt.mapLabel,e.specKey="mapLabel",e}(s$),n6=function(){Tz.registerComponent(u7.type,u7)},h7=function(){function t(nt,at){this._chartLayoutRect={"x":0,"y":0,"width":1,"height":1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(nt),this._gridInfo=nt,this._col=nt.col,this._row=nt.row,this._colSize=new Array(this._col).fill(null),this._rowSize=new Array(this._row).fill(null),this._colElements=new Array(this._col).fill([]),this._rowElements=new Array(this._row).fill([]),this._onError=null==at?void 0:at.onError,this.initUserSetting()}return t.prototype.standardizationSpec=function(nt){var at,lt,Rt;nt.col=null!==(at=nt.col)&&void 0!==at?at:1,nt.row=null!==(lt=nt.row)&&void 0!==lt?lt:1,nt.elements=null!==(Rt=nt.elements)&&void 0!==Rt?Rt:[]},t.prototype.initUserSetting=function(){var nt=this;this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach((function(at,lt){at||(nt._colSize[lt]={"value":0,"isUserSetting":!1,"isLayoutSetting":!1})})),this._rowSize.forEach((function(at,lt){at||(nt._rowSize[lt]={"value":0,"isUserSetting":!1,"isLayoutSetting":!1})}))},t.prototype.setSizeFromUserSetting=function(nt,at,lt,Rt){nt.forEach((function(nt){nt.index<0&&nt.index>=lt||(Q(nt.size)?at[nt.index]={"value":+nt.size,"isUserSetting":!0,"isLayoutSetting":!1}:H(nt.size)&&(at[nt.index]={"value":nt.size(Rt),"isUserSetting":!0,"isLayoutSetting":!1}))}))},t.prototype.clearLayoutSize=function(){this._colSize.forEach((function(nt){nt.isLayoutSetting=!1,nt.isUserSetting||(nt.value=0)})),this._rowSize.forEach((function(nt){nt.isLayoutSetting=!1,nt.isUserSetting||(nt.value=0)}))},t.prototype.getItemGridInfo=function(nt){var at,lt;return this._elementMap.get(nt)||((lt=null===(at=this._gridInfo.elements)||void 0===at?void 0:at.find((function(at){var lt;if("modelId"in at&&N(at.modelId)){if(N(nt.model.userId)&&nt.model.userId===at.modelId)return!0}else if("modelKey"in at&&N(at.modelKey)&&"modelIndex"in at&&N(at.modelIndex)&&(null!==(lt=nt.model.specKey)&&void 0!==lt?lt:nt.model.type)===at.modelKey&&nt.model.getSpecIndex()===at.modelIndex)return!0;return!1})))||(lt={"col":0,"colSpan":1,"row":0,"rowSpan":1}),this._elementMap.set(nt,lt),lt)},t.prototype.getSizeFromGrid=function(nt,at){for(var lt,Rt="col"===at?this._colSize:this._rowSize,Bt=0,Lt=nt[at];Lt<nt[at]+(null!==(lt=nt["".concat(at,"Span")])&&void 0!==lt?lt:1);Lt++)Bt+=Rt[Lt].value;return Bt},t.prototype.getSizeFromUser=function(nt,at){var lt,Rt,Bt="col"===at?this._colSize:this._rowSize;if(null===(lt=Bt[nt[at]])||void 0===lt?void 0:lt.isUserSetting){for(var Lt=0,Ht=nt[at];Ht<nt[at]+(null!==(Rt=nt["".concat(at,"Span")])&&void 0!==Rt?Rt:1);Ht++){if(!Bt[Ht].isUserSetting)return;Lt+=Bt[Ht].value}return Lt}},t.prototype.setItemLayoutSizeToGrid=function(nt,at){if(a6(nt)){if(at.colSpan&&at.colSpan>1)return;if(this._colSize[at.col].isUserSetting)return;this._colSize[at.col].value=Math.max(this._colSize[at.col].value,nt.getLayoutRect().width+nt.layoutPaddingLeft+nt.layoutPaddingRight),this._colSize[at.col].isLayoutSetting=!0}else{if(at.rowSpan&&at.rowSpan>1)return;if(this._rowSize[at.row].isUserSetting)return;this._rowSize[at.row].value=Math.max(this._rowSize[at.row].value,nt.getLayoutRect().height+nt.layoutPaddingTop+nt.layoutPaddingBottom),this._rowSize[at.row].isLayoutSetting=!0}},t.prototype.layoutGrid=function(nt){var at="col"===nt?this._colSize:this._rowSize,lt="col"===nt?this._chartLayoutRect.width:this._chartLayoutRect.height,Rt=[];at.forEach((function(nt){nt.isUserSetting||nt.isLayoutSetting?lt-=nt.value:Rt.push(nt)})),lt<0&&console.warn("layout content ".concat(nt," size bigger than chart")),Rt.forEach((function(nt){return nt.value=lt/Rt.length}))},t.prototype.getItemPosition=function(nt){for(var at=this.getItemGridInfo(nt),lt={"x":this._chartLayoutRect.x,"y":this._chartLayoutRect.y},Rt=0;Rt<at.col;Rt++)lt.x+=this._colSize[Rt].value;for(var Bt=0;Bt<at.row;Bt++)lt.y+=this._rowSize[Bt].value;return lt.x+=nt.layoutPaddingLeft+nt.layoutOffsetX,lt.y+=nt.layoutPaddingTop+nt.layoutOffsetY,lt},t.prototype.getItemLayoutRect=function(nt){var at,lt,Rt=this.getItemGridInfo(nt);return{"width":(null!==(at=this.getSizeFromGrid(Rt,"col"))&&void 0!==at?at:this._chartLayoutRect.width)-nt.layoutPaddingLeft-nt.layoutPaddingRight,"height":(null!==(lt=this.getSizeFromGrid(Rt,"row"))&&void 0!==lt?lt:this._chartLayoutRect.height)-nt.layoutPaddingTop-nt.layoutPaddingBottom}},t.prototype.layoutItems=function(nt,at,lt,Rt){var Bt=this;this._chartLayoutRect=lt,this._chartViewBox=Rt,this.clearLayoutSize(),at.sort((function(nt,at){return at.layoutLevel-nt.layoutLevel}));var Lt=at.filter((function(nt){return"normal"===nt.layoutType&&!1!==nt.getModelVisible()})),Ht=Lt.filter((function(nt){return a6(nt)})),jt=Lt.filter((function(nt){return!a6(nt)}));Lt.forEach((function(nt){Bt.layoutOneItem(nt,"user",!1)}));var $t=at.filter((function(nt){return"region-relative"===nt.layoutType})),Kt=$t.filter((function(nt){return a6(nt)})),te=$t.filter((function(nt){return!a6(nt)}));Kt.forEach((function(nt){return Bt.layoutOneItem(nt,"user",!1)})),this.layoutGrid("col"),jt.forEach((function(nt){return Bt.layoutOneItem(nt,"colGrid",!1)})),te.forEach((function(nt){Bt.layoutOneItem(nt,"colGrid",!1)})),this.layoutGrid("row"),te.forEach((function(nt){Bt.layoutOneItem(nt,"grid",!1)})),Ht.forEach((function(nt){return Bt.layoutOneItem(nt,"grid",!1)})),Kt.forEach((function(nt){Bt.layoutOneItem(nt,"grid",!0)})),this.layoutGrid("col"),at.filter((function(nt){return"region"===nt.layoutType})).forEach((function(nt){return Bt.layoutOneItem(nt,"grid",!1)})),this.layoutAbsoluteItems(at.filter((function(nt){return"absolute"===nt.layoutType}))),at.filter((function(nt){return"absolute"!==nt.layoutType})).forEach((function(nt){nt.setLayoutStartPosition(Bt.getItemPosition(nt))}))},t.prototype.layoutAbsoluteItems=function(nt){var at=this;nt.forEach((function(nt){nt.absoluteLayoutInRect(at._chartLayoutRect)}))},t.prototype.layoutOneItem=function(nt,at,lt){var Rt,Bt,Lt="rowGrid"===at||"grid"===at?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),Ht="colGrid"===at||"grid"===at?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),jt=this.getItemGridInfo(nt),$t={"width":(null!==(Rt=Ht(jt,"col"))&&void 0!==Rt?Rt:this._chartLayoutRect.width)-nt.layoutPaddingLeft-nt.layoutPaddingRight,"height":(null!==(Bt=Lt(jt,"row"))&&void 0!==Bt?Bt:this._chartLayoutRect.height)-nt.layoutPaddingTop-nt.layoutPaddingBottom},Kt=nt.computeBoundsInRect($t);Q(Kt.width)||(Kt.width=$t.width),Q(Kt.height)||(Kt.height=$t.height),nt.setLayoutRect("grid"!==at?Kt:$t),this.setItemLayoutSizeToGrid(nt,jt)},t.type="grid",t}();function a6(nt){return"left"===nt.layoutOrient||"right"===nt.layoutOrient}var o6=function(){Tz.registerLayout(h7.type,h7)},f7=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype.layoutItems=function(nt,at,lt,Rt){this._layoutInit(nt,at,lt,Rt),this._layoutNormalItems(at);var Bt={"left":this.leftCurrent,"top":this.topCurrent,"right":this.rightCurrent,"bottom":this.bottomCurrent},Lt=at.filter((function(nt){return"absolute"===nt.layoutType})),Ht=Lt.filter((function(nt){return"z"===nt.layoutOrient})),jt={"width":0,"height":0};Ht.length&&(jt=Ht[0].getLayoutRect()),this.leftCurrent+=jt.width/8,this.rightCurrent-=jt.width/8,this.topCurrent+=jt.height/8,this.bottomCurrent-=jt.height/8;var $t=this._groupItems(at),Kt=$t.regionItems,te=$t.relativeItems,ne=$t.relativeOverlapItems,re=$t.allRelatives,ae=$t.overlapItems;this.layoutRegionItems(Kt,te,ne,ae),this._processAutoIndent(Kt,te,ne,ae,re,Bt);var oe=Lt.filter((function(nt){return"z"!==nt.layoutOrient}));this.layoutAbsoluteItems(oe);var se=te.filter((function(nt){return"axes"===nt.model.specKey&&_W(nt.layoutOrient)}))[0],le=te.filter((function(nt){return"axes"===nt.model.specKey&&bW(nt.layoutOrient)}))[0];if(se&&Ht.length){var ue=se.getLayoutStartPoint(),ce=se.getLayoutRect(),he={"x":"left"===le.layoutOrient?ue.x+ce.width:ue.x,"y":ue.y,"width":this._chartLayoutRect.width,"height":this._chartLayoutRect.height};Ht[0].model.directionStr="left"===le.layoutOrient?"r2l":"l2r";var de=se.getLayoutRect(),fe=le.getLayoutRect(),pe={"length":Ht[0].getLayoutRect().width,"width":de.width,"height":fe.height};se.model.setLayout3dBox&&se.model.setLayout3dBox(pe),le.model.setLayout3dBox&&le.model.setLayout3dBox(pe),Ht[0].model.setLayout3dBox&&Ht[0].model.setLayout3dBox(pe),this.layoutZAxisItems(Ht,he)}},e.prototype.layoutZAxisItems=function(nt,at){nt.forEach((function(nt){nt.absoluteLayoutInRect(at)}))},e.prototype.getItemComputeLayoutRect=function(nt,at){return at||(at={"offsetLeft":0,"offsetRight":0,"offsetTop":0,"offsetBottom":0}),{"width":this.rightCurrent-this.leftCurrent-nt.layoutPaddingLeft-nt.layoutPaddingRight-(at.offsetLeft+at.offsetRight),"height":this.bottomCurrent-this.topCurrent-nt.layoutPaddingTop-nt.layoutPaddingBottom-(at.offsetTop+at.offsetBottom)}},e.prototype._checkAutoIndent=function(nt){var at=this,lt={"top":0,"left":0,"bottom":0,"right":0},Rt=this._chartViewBox.x2-this._chartViewBox.x1-this.rightCurrent,Bt=this._chartViewBox.y2-this._chartViewBox.y1-this.bottomCurrent;return nt.forEach((function(nt){if(nt.getModelVisible()&&nt.autoIndent){var Lt="left"===nt.layoutOrient||"right"===nt.layoutOrient,Ht=nt.getLastComputeOutBounds();Lt?(lt.top=Math.max(lt.top,Ht.y1-at.topCurrent),lt.bottom=Math.max(lt.bottom,Ht.y2-Bt)):(lt.left=Math.max(lt.left,Ht.x1-at.leftCurrent),lt.right=Math.max(lt.right,Ht.x2-Rt))}})),lt},e.type="layout3d",e}(ZU),l6=function(){Tz.registerLayout(f7.type,f7)},u6=function(){Mc.load(VR)},p7="vchart-tooltip",g7="".concat(p7,"-container"),S7="".concat(p7,"-title"),w7="".concat(p7,"-content-box"),C7={"offsetX":10,"offsetY":10},M7="99999999999999";function g6(nt){return String(nt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}var y6=function(nt,at){return nt?(at||(at=nt.getBoundingClientRect()),nt.offsetWidth>0?at.width/nt.offsetWidth:nt.offsetHeight>0?at.height/nt.offsetHeight:1):1},m6=function(nt){return Y(nt)&&""!==(null==nt?void 0:nt.trim())||Z(nt)?g6(nt):""},_6=function(nt,at){var lt;if(N(nt))if(Z(nt))lt=nt;else if(H(nt)){var Rt=nt(at);Z(Rt)&&(lt=Rt)}return lt},E7={"left":[-2,0],"right":[2,0],"top":[0,-2],"lt":[-2,-2],"tl":[-2,-2],"rt":[2,-2],"tr":[2,-2],"bottom":[0,2],"bl":[-2,2],"lb":[-2,2],"br":[2,2],"rb":[2,2],"inside":[0,0],"center":[0,0],"centerBottom":[0,1],"centerTop":[0,-1],"centerLeft":[-1,0],"centerRight":[1,0]},x6=function(nt,at,lt){var Rt,Bt;return void 0===lt&&(lt=2),null!==(Bt=null===(Rt=E7[nt])||void 0===Rt?void 0:Rt["x"===at?0:1])&&void 0!==Bt?Bt:lt},R7=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at._visible=!0,at._isReleased=!1,at.showTooltip=function(nt,lt,Rt){return Rt.changePositionOnly?at.changeTooltipPosition(Rt,lt):at.changeTooltip(!0,Rt,lt)},at.changeTooltip=function(nt,lt,Rt){return at._isReleased?1:nt?at.changeTooltipPosition(lt,Rt):(at._updateTooltip(!1,lt),0)},at.changeTooltipPosition=function(nt,lt){var Rt,Bt,Lt,Ht,jt;if(at._isReleased)return 1;var $t=nt.event,Kt=nt.tooltipSpec,te=nt.activeTooltipSpec,ne=nt.changePositionOnly;if(!te)return 1;var re=te.activeType;if(te.handler)return null!==(Lt=null===(Bt=(Rt=te.handler).showTooltip)||void 0===Bt?void 0:Bt.call(Rt,re,lt,nt))&&void 0!==Lt?Lt:0;var ae=te,oe=at._getActualTooltipPosition(te,nt,at._getTooltipBoxSize(te,ne));te.position=oe;var se=null!==(Ht=te.updatePosition)&&void 0!==Ht?Ht:null===(jt=Kt[re])||void 0===jt?void 0:jt.updatePosition;se&&(te.position=se(te.position,lt,nt));var le=!1!==(null==ae?void 0:ae.visible);return lt&&"pointerout"!==$t.type&&te.visible&&(te.title||te.content)||(le=!1),at._updateTooltip(le,A(A({},nt),{"changePositionOnly":ne})),0},at._getActualTooltipPosition=function(nt,lt,Rt){var Bt,Lt,Ht,jt,$t,Kt,te,ne,re,ae=lt.tooltipSpec,oe={"x":1/0,"y":1/0};if(!ae)return oe;var se,le=lt.event,ue=nt.activeType,ce=nt.data,he="dimension"===ue?null===(Lt=null===(Bt=ce[0])||void 0===Bt?void 0:Bt.data)||void 0===Lt?void 0:Lt[0]:null==ce?void 0:ce[0],de=at._option,fe=de.offsetX,pe=de.offsetY,ve=ae[ue],Ae=mY(null==ve?void 0:ve.position,ce,lt),we=null!==(Ht=mY(null==ve?void 0:ve.positionMode,ce,lt))&&void 0!==Ht?Ht:"mark"===ue?"mark":"pointer",Ce=null!=Rt?Rt:{},je=Ce.width,Ne=void 0===je?0:je,Ve=Ce.height,Ge=void 0===Ve?0:Ve,ti="canvas"===ae.renderMode,li=null===(jt=null==lt?void 0:lt.chart)||void 0===jt?void 0:jt.getCanvasRect(),hi=null!==($t=null==li?void 0:li.width)&&void 0!==$t?$t:DF,di=null!==(Kt=null==li?void 0:li.height)&&void 0!==Kt?Kt:LF,fi=!1,pi={"width":0,"height":0},vi={"x":0,"y":0},mi={"x":0,"y":0},_i=1,bi=1,Mi=Fk(at._env);if(Mi&&!ae.confine?(pi.width=window.innerWidth,pi.height=window.innerHeight):(pi.width=hi,pi.height=di),Mi&&!ti){var Ti=at._getParentElement(ae);mi=null!==(ne=null===(te=null==Ti?void 0:Ti.getBoundingClientRect)||void 0===te?void 0:te.call(Ti))&&void 0!==ne?ne:oe;var Ii=null!==(re=at._compiler.getCanvas())&&void 0!==re?re:at._chartContainer;se=null==Ii?void 0:Ii.getBoundingClientRect(),vi={"x":se.x-mi.x,"y":se.y-mi.y},_i=y6(Ii,se),bi=y6(Ti,mi)}var Bi,zi=bi/_i,Wi={},Ui={"x":Ae,"y":Ae},$i={"x":["left","right"],"y":["top","bottom"]},tt=function(nt,at){var Rt,Bt,Lt,Ht=nt.orient,jt=nt.mode,$t=nt.offset,Kt=lt.model,te=null==Kt?void 0:Kt.getLayoutStartPoint(),ne=null!=$t?$t:"x"===at?fe:pe;if("mark"===jt){fi=!0;var re=lt.item,ae=null==re?void 0:re.getBounds();ae&&te&&(Bt=("x"===at?ae.x1:ae.y1)+te[at],Lt=("x"===at?ae.x2:ae.y2)+te[at])}else if("crosshair"===jt&&"cartesian"===(null===(Rt=null==he?void 0:he.series)||void 0===Rt?void 0:Rt.coordinate)&&he.datum&&he.datum.length){fi=!0;var oe=function(nt,at){var lt,Rt=new Map,Bt=new Map,Lt=nt.series,Ht=nt.datum,jt="horizontal"===Lt.direction,$t=(jt?Lt.getYAxisHelper():Lt.getXAxisHelper()).getAxisId(),Kt=Lt.getChart().getComponentsByKey("axes").find((function(nt){return nt.id===$t}));if(Kt){(jt?Bt:Rt).set(Kt.getSpecIndex(),{"datum":null===(lt=Lt.getDatumPositionValues(Ht[0],Lt.getDimensionField()))||void 0===lt?void 0:lt[0],"axis":Kt});var te={"xField":{"coordKey":"x","anotherAxisKey":"y","currentValue":Rt,"attributes":{"visible":!!Rt.size,"type":"rect"}},"yField":{"coordKey":"y","anotherAxisKey":"x","currentValue":Bt,"attributes":{"visible":!!Bt.size,"type":"rect"}}};return c8(te,Lt,at),te.xField.cacheInfo?p8(te.xField):te.yField.cacheInfo?p8(te.yField):void 0}}(he,te);oe&&(Bt=oe.start[at],Lt=oe.end[at])}else Ui[at]=Ht;if(fi){var se=$i[at][0],le="x"===at?Ne:Ge;switch(x6(Ht,at)){case-2:Wi[se]=Bt-le*zi-ne;break;case 0:Wi[se]=(Bt+Lt)/2-le*zi/2;break;case-1:Wi[se]=(Bt+Lt)/2-le*zi-ne;break;case 1:Wi[se]=(Bt+Lt)/2+ne;break;case 2:Wi[se]=Lt+ne}}},qi=["x","y"];if(V(Ae))if(V(Bi=Ae)&&(N(Bi.left)||N(Bi.right)||N(Bi.top)||N(Bi.bottom))){var Ki=Ae,Qi=Ki.left,Ji=Ki.right,dn=Ki.top,fn=Ki.bottom;Wi.left=_6(Qi,le),Wi.top=_6(dn,le),Wi.right=_6(Ji,le),Wi.bottom=_6(fn,le)}else(function(nt){return V(nt)&&(N(nt.x)||N(nt.y))})(Ae)&&qi.forEach((function(nt){var at=Ae[nt];Z(at)||H(at)?Wi[$i[nt][0]]=_6(at,le):tt(at,nt)}));else N(Ae)&&(tt({"orient":Ae,"mode":we},"x"),tt({"orient":Ae,"mode":we},"y"));var vn={"x":null,"y":null};return qi.forEach((function(nt){var at,lt="x"===nt?Ne:Ge,Rt="x"===nt?hi:di,Bt="x"===nt?fe:pe,Lt=x6(Ui[nt],nt);if(Q(Wi[$i[nt][0]]))vn[nt]=Wi[$i[nt][0]];else if(Q(Wi[$i[nt][1]]))vn[nt]=Rt-lt*zi-Wi[$i[nt][1]];else{var Ht="x"===nt?le.canvasX:le.canvasY;vn[nt]=Lt>0?Ht+Bt:0===Lt?Ht-lt*zi/2:Ht-lt*zi-Bt}vn[nt]*=_i,Mi&&(vn[nt]+=vi[nt]),vn[nt]/=bi;var jt="x"===nt?pi.width:pi.height,$t=ae.confine?-(mi[nt]-(null!==(at=null==se?void 0:se[nt])&&void 0!==at?at:0)/_i)/bi:-mi[nt]/bi,Kt=jt/bi+$t-lt;2!==Lt&&vn[nt]<$t?fi?vn[nt]=$t:(vn[nt]+=0===Lt?Bt+lt/2:2*Bt+lt,vn[nt]>Kt&&(vn[nt]=Kt)):-2!==Lt&&vn[nt]>Kt&&(fi?vn[nt]=Kt:(vn[nt]-=0===Lt?Bt+lt/2:2*Bt+lt,vn[nt]<$t&&(vn[nt]=$t)))})),vn},at}return S(e,nt),Object.defineProperty(e.prototype,"env",{"get":function(){return this._env},"enumerable":!1,"configurable":!0}),e.prototype.onAdd=function(at){nt.prototype.onAdd.call(this,at);var lt=at.component;this._component=lt,this._chartOption=lt.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=lt.getCompiler(),this._initFromSpec()},e.prototype.hideTooltip=function(nt){return this.changeTooltip(!1,nt)},e.prototype.release=function(){var nt,at,lt,Rt=null!==(nt=this._component.getSpec())&&void 0!==nt?nt:{};Rt.handler?null===(lt=(at=Rt.handler).release)||void 0===lt||lt.call(at):(this._removeTooltip(),this._isReleased=!0)},e.prototype._getDefaultOption=function(){var nt,at,lt=this._component.getSpec().offset;return lt?{"offsetX":null!==(nt=lt.x)&&void 0!==nt?nt:C7.offsetX,"offsetY":null!==(at=lt.y)&&void 0!==at?at:C7.offsetY}:C7},e.prototype._getParentElement=function(nt){return nt.parentElement},e.prototype.getTooltipContainer=function(){return this._container},e.prototype._initFromSpec=function(){this._option=this._getDefaultOption()},e.prototype.reInit=function(){this._initFromSpec()},e.specKey="tooltip",e}(e$),S6=function(nt,at){return N(nt)?X(nt)?nt.map((function(nt){return"".concat(nt,"px")})).join(" "):"".concat(nt,"px"):null!=at?at:"initial"},A6=function(nt,at){var lt,Rt;void 0===nt&&(nt={}),void 0===at&&(at={}),N(nt.fontFamily)&&(at.fontFamily=nt.fontFamily);var Bt=null!==(lt=nt.fill)&&void 0!==lt?lt:nt.fontColor;return N(Bt)&&(at.color=Bt),N(nt.fontWeight)&&(at.fontWeight=nt.fontWeight),N(nt.textAlign)&&(at.textAlign=nt.textAlign),N(nt.fontSize)&&(at.fontSize=S6(nt.fontSize)),N(nt.maxWidth)&&(at.maxWidth=S6(nt.maxWidth)),nt.multiLine||N(nt.maxWidth)&&!1!==nt.multiLine?(at.whiteSpace="initial",at.wordBreak=null!==(Rt=nt.wordBreak)&&void 0!==Rt?Rt:"break-word"):(at.wordBreak="normal",at.whiteSpace="nowrap"),at},w6=function(nt){void 0===nt&&(nt={});var at=nt.lineHeight;return nt.fontSize?pF(at,nt.fontSize):0},M6=function(nt){var at,lt=nt.backgroundColor,Rt=nt.border,Bt=nt.shadow,Lt=nt.padding,Ht={"borderWidth":"".concat(null!==(at=null==Rt?void 0:Rt.width)&&void 0!==at?at:0,"px")},jt=null;(null==Rt?void 0:Rt.color)&&(Ht.borderColor=Rt.color),lt&&(Ht.backgroundColor=lt),Ht.boxShadow=Bt?"".concat(Bt.x,"px ").concat(Bt.y,"px ").concat(Bt.blur,"px ").concat(Bt.spread,"px ").concat(Bt.color):"initial";var $t=(null!=Rt?Rt:{}).radius;return N($t)&&(Ht.borderRadius=Q($t)?"".concat($t,"px"):"".concat($t)),Lt&&(jt=Ci(Lt),Ht.padding=S6(jt)),{"panelStyle":Ht,"panelPadding":jt}};function T6(nt,at){nt&&nt.style&&at&&Object.keys(at).forEach((function(lt){nt.style[lt]=at[lt]}))}var C6=function(nt){Tz.registerComponentPlugin(nt.type,nt)},D7=function(nt){function e(){var at=nt.call(this,e.type)||this;return at.type=o8.dom,at._tooltipContainer=null==yS?void 0:yS.body,at}return S(e,nt),e.prototype.getVisibility=function(){return!!this._rootDom&&"visible"===this._rootDom.style.visibility},e.prototype.setVisibility=function(nt){nt!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=nt?"visible":"hidden")},e.prototype.onAdd=function(at){nt.prototype.onAdd.call(this,at),this._initStyle(),this.initEl()},e.prototype.initEl=function(){var nt=this._component.getSpec().parentElement;if(yS&&nt&&nt.children&&nt.children.length){for(var at=0;at<nt.children.length;at++)if(nt.children[at].classList.contains(g7)){this._container=nt.children[at];break}this._container||(this._container=yS.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=M7,this._container.classList.add(g7),nt.appendChild(this._container))}},e.prototype.initRootDom=function(){var nt,at,lt,Rt=this._component.getSpec(),Bt=document.createElement("div"),Lt=null!==(at=null===(nt=this._chartOption)||void 0===nt?void 0:nt.getTheme())&&void 0!==at?at:{};T6(Bt,A({"left":"0","top":"0","pointerEvents":"none","padding":"12px","position":"absolute","zIndex":M7,"fontFamily":null!==(lt=null==Lt?void 0:Lt.fontFamily)&&void 0!==lt?lt:Az.fontFamily,"fontSize":"11px","borderRadius":"3px","borderStyle":"solid","lineHeight":"initial","background":"#fff","boxShadow":"2px 2px 4px rgba(0, 0, 0, 0.1)","maxWidth":"100wh","maxHeight":"100vh","visibility":"hidden"},this._domStyle.panel)),Bt.classList.add(Rt.className),Bt.setAttribute("vchart-tooltip-id","".concat(this.id)),this._container.appendChild(Bt),this._rootDom=Bt},e.prototype._getTooltipBoxSize=function(nt,at){var lt;this._rootDom||this.initRootDom(),at||this._updateDomStringByCol(nt),this._updateDomStyle("height");var Rt=null===(lt=this._rootDom)||void 0===lt?void 0:lt.getBoundingClientRect();return{"width":null==Rt?void 0:Rt.width,"height":null==Rt?void 0:Rt.height}},e.prototype._removeTooltip=function(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null},e.prototype._updateTooltip=function(nt,at){var lt,Rt,Bt;if(nt&&this._rootDom){var Lt=at.tooltipSpec,Ht=at.activeTooltipSpec;at.changePositionOnly||(this._tooltipActual=Ht);var jt=this.getVisibility(),$t=this._rootDom;if($t){var Kt=null!==(lt=Ht.position)&&void 0!==lt?lt:{},te=Kt.x,ne=void 0===te?0:te,re=Kt.y,ae=void 0===re?0:re;if(Lt.updateElement){this._updatePosition(null!==(Rt=this._cacheCustomTooltipPosition)&&void 0!==Rt?Rt:{"x":ne,"y":ae}),Lt.updateElement($t,Ht,at);var oe=this._getActualTooltipPosition(Ht,at,{"width":$t.offsetWidth,"height":$t.offsetHeight});this._updatePosition(oe),this._cacheCustomTooltipPosition=oe}else this._rootDom.style.transitionDuration=jt?null!==(Bt=this._domStyle.panel.transitionDuration)&&void 0!==Bt?Bt:"initial":"0ms",this._updatePosition({"x":ne,"y":ae})}this.setVisibility(nt)}else this.setVisibility(nt),this._cacheCustomTooltipPosition=void 0},e.prototype._initStyle=function(){var nt=this._component.getSpec();this._domStyle=function(nt){var at,lt,Rt,Bt;void 0===nt&&(nt={});var Lt=nt.style,Ht=void 0===Lt?{}:Lt,jt=nt.enterable,$t=nt.transitionDuration,Kt=Ht.panel,te=void 0===Kt?{}:Kt,ne=Ht.titleLabel,re=Ht.shape,ae=Ht.keyLabel,oe=Ht.valueLabel,se=Ht.spaceRow,le=Ht.align,ue=M6(te),ce=ue.panelStyle,he=ue.panelPadding,de={"marginTop":"0px","marginBottom":"0px"};ce.pointerEvents=jt?"auto":"none",$t&&(ce.transitionDuration=$t?"".concat($t,"ms"):"initial",ce.transitionProperty=$t?"transform":"initial",ce.transitionTimingFunction=$t?"ease-out":"initial"),Q(se)&&(de.marginBottom="".concat(se,"px"));var fe={"width":S6(null!==(at=null==re?void 0:re.size)&&void 0!==at?at:8)},pe=A6(ne),ve=A6(ae),Ae=A6(oe),we="right"===le?"marginLeft":"marginRight";"right"===le?(ce.direction="rtl",pe.textAlign="right",ve.textAlign="right",Ae.textAlign="left"):(pe.textAlign="left",ve.textAlign="left",Ae.textAlign="right"),fe[we]=S6(null!==(lt=re.spacing)&&void 0!==lt?lt:8),ve[we]=S6(null!==(Rt=ae.spacing)&&void 0!==Rt?Rt:26),Ae[we]=S6(null!==(Bt=oe.spacing)&&void 0!==Bt?Bt:0);var Ce=Math.max(w6(oe),w6(ae));return de.lineHeight=Ce>0?"".concat(Ce,"px"):"20px",{"panelPadding":he,"row":de,"panel":ce,"title":pe,"shape":fe,"key":ve,"value":Ae}}(nt)},e.prototype._updateDomStringByCol=function(nt){var at,lt=this,Rt=nt.title,Bt=void 0===Rt?{}:Rt,Lt=nt.content,Ht=Lt&&Lt.length,jt=this._domStyle.row,$t=P([],E(this._rootDom.children),!1),Kt=$t.find((function(nt){return nt.className.includes(S7)}));if(!Kt&&!1!==Bt.visible){Kt=document.createElement("h2");var te=document.createElement("span");Kt.appendChild(te),Kt.classList.add(S7),this._rootDom.appendChild(Kt)}Kt&&!1!==Bt.visible?(T6(Kt,A(A(A({},this._domStyle.title),Ht?jt:{"marginBottom":"0px"}),{"marginTop":"0px"})),Kt.firstChild.innerHTML="".concat(null!==(at=Bt.value)&&void 0!==at?at:"")):Kt&&!1===Bt.visible&&Kt.parentNode.removeChild(Kt);var ne=$t.find((function(nt){return nt.className.includes(w7)})),re=["shape","key","value"];if(!ne&&Ht&&(ne=document.createElement("div"),re.forEach((function(nt){var at=document.createElement("div");at.classList.add("".concat(p7,"-column")),at.classList.add("".concat(p7,"-").concat(nt,"-column")),at.setAttribute("data-col",nt),ne.appendChild(at)})),ne.classList.add(w7),this._rootDom.appendChild(ne)),ne&&Ht){var ae=P([],E(ne.children),!1);T6(ne,{"whiteSpace":"nowrap"}),ae.forEach((function(nt,at){var Rt=nt.getAttribute("data-col");if(Rt&&re.includes(Rt)){var Bt="shape"===Rt&&Lt.every((function(nt){return!nt.hasShape||!nt.shapeType}));T6(nt,A(A({},lt._domStyle[Rt]),{"display":Bt?"none":"inline-block","verticalAlign":"top"}));var Ht=P([],E(nt.children),!1);Ht.slice(Lt.length).forEach((function(nt){nt.parentNode.removeChild(nt)})),Lt.forEach((function(at,Bt){var $t=Ht[Bt];$t||(($t=document.createElement("div")).classList.add("".concat(p7,"-").concat(Rt)),nt.appendChild($t));var Kt=A({},jt);Bt===Lt.length-1&&(Kt.marginBottom="0px"),Kt.display=!1===at.visible?"none":"block",Kt.height="initial","key"===Rt?($t.innerHTML=m6(at.key),at.keyStyle&&A6(at.keyStyle,Kt)):"value"===Rt?($t.innerHTML=m6(at.value),at.valueStyle&&A6(at.valueStyle,Kt)):"shape"===Rt&&($t.innerHTML=function(nt,at){var lt,Rt,Bt,Lt,Ht,jt;if(!nt||!nt.hasShape||!nt.shapeType)return"";var $t,Kt,te='style="display:inline-block;vertical-align:middle;"',ne=nt.shapeType,re=nt.shapeFill,ae=nt.shapeStroke,oe=nt.shapeHollow,se=void 0!==oe&&oe,le=null!==(lt=nt.shapeSize)&&void 0!==lt?lt:8,ue=nt.shapeLineWidth?g6(nt.shapeLineWidth)+"px":"0px",ce="currentColor",_=function(){return ae?g6(ae):ce},he=le,x=function(nt){return new Yg({"symbolType":nt,"size":he,"fill":!0})},de=x(ne),fe=de.getParsedPath();if(!fe.path&&fe.pathStr&&(de=x(fe.pathStr)),de.getParsedPath().path){var pe=de.getParsedPath().path;Kt=pe.toString(),$t=pe.bounds}else fe.isSvg&&fe.svgCache&&(Kt=fe.svgCache.map((function(nt){return nt.path.toString()})).join(),$t=fe.svgCache.reduce((function(nt,at){return nt.union(at.path.bounds)}),new mi));var ve="".concat($t.x1," ").concat($t.y1," ").concat($t.width()," ").concat($t.height());if("0px"!==ue){var Ae=E(ve.split(" ").map((function(nt){return Number(nt)})),4),we=Ae[0],Ce=Ae[1],je=Ae[2],Ne=Ae[3],Ve=Number(ue.slice(0,-2));ve="".concat(we-Ve/2," ").concat(Ce-Ve/2," ").concat(je+Ve," ").concat(Ne+Ve)}if(!re||Y(re)||se)return ce=se?"none":re?g6(re):"currentColor","\n    <svg ".concat(te,' width="').concat(le,'" height="').concat(le,'" viewBox="').concat(ve,'">\n      <path\n        d="').concat(Kt,'"\n        style="fill: ').concat(ce,"; stroke: ").concat(_(),"; stroke-width: ").concat(ue,'"\n      >\n      </path>\n    </svg>');if(V(re)){ce="gradientColor"+(null!=at?at:"");var Ge="",ti=(null!==(Rt=re.stops)&&void 0!==Rt?Rt:[]).map((function(nt){return'<stop offset="'.concat(g6(nt.offset.toString()),'" stop-color="').concat(g6(nt.color),'"/>')})).join("");return"radial"===re.gradient?Ge='<radialGradient id="'.concat(ce,'" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">\n      ').concat(ti,"\n      </radialGradient>"):"linear"===re.gradient&&(Ge='<linearGradient id="'.concat(ce,'" x1="').concat(100*(null!==(Bt=re.x0)&&void 0!==Bt?Bt:0),'%" y1="').concat(100*(null!==(Lt=re.y0)&&void 0!==Lt?Lt:0),'%" x2="').concat(100*(null!==(Ht=re.x1)&&void 0!==Ht?Ht:0),'%" y2="').concat(100*(null!==(jt=re.y1)&&void 0!==jt?jt:0),'%">\n      ').concat(ti,"\n      </linearGradient>")),"\n    <svg ".concat(te,' width="').concat(le,'" height="').concat(le,'" viewBox="-0.5 -0.5 1 1">\n      ').concat(Ge,'\n      <path\n        d="').concat(Kt,'"\n        style="fill: url(#').concat(ce,"); stroke: ").concat(_(),"; stroke-width: ").concat(ue,'"\n      >\n      </path>\n    </svg>')}return""}(at,"".concat(lt.id,"_").concat(Bt))),T6($t,Kt)}))}}))}else ne&&!Ht&&ne.parentNode.removeChild(ne)},e.prototype._updateDomStyle=function(nt){var at,lt,Rt,Bt;void 0===nt&&(nt="width");var Lt=this._rootDom,Ht=P([],E(Lt.children),!1).find((function(nt){return nt.className.includes(w7)}));if(Ht){var jt=this._component.getSpec(),$t={};if(N(null===(at=null==jt?void 0:jt.style)||void 0===at?void 0:at.maxContentHeight)){var Kt=Lt.children[0],te=Kt&&Kt.className.includes(S7)?Kt.getBoundingClientRect().height+(null!==(lt=jt.style.spaceRow)&&void 0!==lt?lt:0):0,ne=this._chartOption.getChartViewRect(),re=pF(jt.style.maxContentHeight,Math.min(ne.height,document.body.clientHeight)-te-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));re>0&&($t.maxHeight="".concat(re,"px"),$t.overflowY="auto",$t.width="calc(100% + ".concat(this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px",")"),T6(Ht,$t))}var ae=Ht.children,oe=[];if(ae){for(var se=0;se<ae.length;se++)for(var le=null!==(Rt=ae[se].children)&&void 0!==Rt?Rt:[],ue=0;ue<le.length;ue++){var ce=le[ue].getBoundingClientRect()[nt];(void 0===oe[ue]||oe[ue]<ce)&&(oe[ue]=ce)}for(se=0;se<ae.length;se++)for(le=null!==(Bt=ae[se].children)&&void 0!==Bt?Bt:[],ue=0;ue<le.length;ue++)le[ue].style[nt]="".concat(oe[ue],"px")}}},e.prototype._getParentElement=function(at){var lt;return null!==(lt=this._container)&&void 0!==lt?lt:nt.prototype._getParentElement.call(this,at)},e.prototype.isTooltipShown=function(){return this.getVisibility()},e.prototype.reInit=function(){nt.prototype.reInit.call(this),this._initStyle(),this._rootDom&&T6(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height"))},e.prototype._updatePosition=function(nt){var at=nt.x,lt=nt.y;this._rootDom&&(this._rootDom.style.transform="translate3d(".concat(at,"px, ").concat(lt,"px, 0)"))},e.type=o8.dom,e}(R7),P6=function(){C6(D7)},L7={"fontFamily":Az.fontFamily,"spacing":10,"wordBreak":"break-word"},B6=function(nt,at){var lt,Rt,Bt;"rich"!==(null==nt?void 0:nt.type)&&"html"!==(null==nt?void 0:nt.type)?(nt=(null!=nt?nt:"").toString(),Rt=at.multiLine?(Rt=nt.split("\n")).map((function(nt,at){return at<Rt.length-1?nt+"\n":nt})):[nt],Bt=Rt.map((function(nt){return A(A({},at),{"text":nt})}))):(Bt=nt.text,Rt=nt);var Lt,Ht=(Lt={"wordBreak":null!==(lt=at.wordBreak)&&void 0!==lt?lt:"break-word","maxWidth":at.maxWidth?at.maxWidth:void 0,"width":0,"height":0,"textConfig":Bt},zy||(zy=Hy.CreateGraphic("richtext",{})),zy.setAttributes(Lt),zy.AABBBounds);return{"width":Ht.width(),"height":Ht.height(),"text":Rt}};function I6(nt,at,lt){var Rt,Bt;return void 0===nt&&(nt={}),A(A({},null!=lt?lt:L7),{"fill":null!==(Rt=nt.fill)&&void 0!==Rt?Rt:nt.fontColor,"textAlign":nt.textAlign,"textBaseline":nt.textBaseline,"fontFamily":null!==(Bt=nt.fontFamily)&&void 0!==Bt?Bt:null==at?void 0:at.fontFamily,"fontSize":nt.fontSize,"fontWeight":nt.fontWeight,"lineHeight":nt.lineHeight,"spacing":nt.spacing,"multiLine":N(nt.maxWidth)?!1!==nt.multiLine:nt.multiLine,"maxWidth":nt.maxWidth,"wordBreak":nt.wordBreak,"autoWidth":nt.autoWidth})}var L6=function(nt){var at,lt=nt.backgroundColor,Rt=nt.border,Bt=nt.shadow,Lt={"lineWidth":null!==(at=null==Rt?void 0:Rt.width)&&void 0!==at?at:0,"shadow":!!Bt};(null==Rt?void 0:Rt.color)&&(Lt.stroke=Rt.color),lt&&(Lt.fill=lt),Bt&&(Lt.shadowColor=Bt.color,Lt.shadowBlur=Bt.blur,Lt.shadowOffsetX=Bt.x,Lt.shadowOffsetY=Bt.y,Lt.shadowSpread=Bt.spread);var Ht=(null!=Rt?Rt:{}).radius;return N(Ht)&&(Lt.cornerRadius=[Ht,Ht,Ht,Ht]),Lt},F7=function(nt){function e(){var at=nt.call(this,e.type)||this;return at.type=o8.canvas,at._attributes=null,at}return S(e,nt),e.prototype.onAdd=function(at){var lt;nt.prototype.onAdd.call(this,at),this._tooltipCanvasId=null===(lt=this._chartOption.modeParams)||void 0===lt?void 0:lt.tooltipCanvasId},e.prototype._initTooltipComponent=function(nt){var at=this._getLayer(nt);this._tooltipComponent=new oF({"autoCalculatePosition":!1,"autoMeasure":!1}),at.add(this._tooltipComponent)},e.prototype._getLayer=function(nt){if(this._layer)return this._layer;this._layer=nt.createLayer(this._tooltipCanvasId);var at=this._layer.layerHandler.canvas.nativeCanvas;return at&&at.style&&(at.style.touchAction="none",at.style.pointerEvents="none"),this._layer},e.prototype._getTooltipBoxSize=function(nt,at){var lt,Rt,Bt;if(!at||j(this._attributes)){var Lt=null!==(Rt=null===(lt=this._chartOption)||void 0===lt?void 0:lt.getTheme())&&void 0!==Rt?Rt:{};this._attributes=function(nt,at,lt){var Rt,Bt,Lt,Ht,jt,$t=at.style,Kt=void 0===$t?{}:$t,te=at.enterable,ne=at.transitionDuration,re=Kt.panel,ae=void 0===re?{}:re,oe=Kt.titleLabel,se=Kt.shape,le=Kt.keyLabel,ue=Kt.valueLabel,ce=Kt.spaceRow,he=Kt.align,de=Ci(ae.padding),fe=vF(ae.padding),pe=I6(A({"textAlign":"right"===he?"right":"left"},oe),lt),ve=I6(A({"textAlign":"right"===he?"right":"left"},le),lt),Ae=I6(ue,lt),we={"fill":!0,"size":null!==(Rt=null==se?void 0:se.size)&&void 0!==Rt?Rt:8,"spacing":null!==(Bt=null==se?void 0:se.spacing)&&void 0!==Bt?Bt:6},Ce={"panel":L6(ae),"padding":de,"title":{},"content":[],"titleStyle":{"value":pe,"spaceRow":ce},"contentStyle":{"shape":we,"key":ve,"value":Ae,"spaceRow":ce},"hasContentShape":!1,"keyWidth":0,"valueWidth":0,"enterable":te,"transitionDuration":ne,"align":he},je=nt.title,Ne=void 0===je?{}:je,Ve=nt.content,Ge=void 0===Ve?[]:Ve,ti=fe.left+fe.right,li=fe.top+fe.bottom,hi=0,di=!!Ge.length,fi=0,pi=0,vi=0,mi=0;if(di){var _i=[],bi=[],Mi=[],Ti=[],Ii=0;Ce.content=Ge.map((function(nt,at){var lt=0,Rt=nt.hasShape,Bt=nt.key,Lt=nt.shapeType,Ht=void 0===Lt?"":Lt,jt=nt.shapeFill,$t=nt.shapeStroke,Kt=nt.shapeLineWidth,te=nt.shapeSize,ne=nt.value,re=nt.isKeyAdaptive,ae=nt.spaceRow,oe=nt.keyStyle,se=nt.valueStyle,le=nt.shapeHollow,ue={"height":0,"spaceRow":null!=ae?ae:ce};if(N(Bt)){var he=gz({},ve,I6(oe,void 0,{})),de=B6(Bt,he),fe=de.width,pe=de.height,Ce=de.text;ue.key=A(A({"width":fe,"height":pe},he),{"text":Ce}),re?bi.push(fe):_i.push(fe),lt=Math.max(lt,pe)}if(N(ne)){var je=gz({},Ae,I6(se,void 0,{})),Ne=B6(ne,je);fe=Ne.width,pe=Ne.height,Ce=Ne.text,ue.value=A(A({"width":fe,"height":pe},je),{"text":Ce}),Mi.push(fe),lt=Math.max(lt,pe)}if(Rt){var Ve={"visible":!0,"symbolType":Ht};le?Ve.stroke=jt:Ve.fill=jt,Ve.stroke=null!=$t?$t:jt,Ve.lineWidth=Kt,ue.shape=Ve;var ti=null!=te?te:we.size;lt=Math.max(ti,lt),Ti.push(ti)}else ue.shape={"visible":!1};return ue.height=lt,Ii+=lt,at<Ge.length-1&&(Ii+=ue.spaceRow),ue})),li+=Ii,fi=_i.length?St(_i):0,pi=bi.length?St(bi):0,vi=Mi.length?St(Mi):0,mi=Ti.length?St(Ti)+we.spacing:0,hi=Math.max(mi+fi+ve.spacing+vi+Ae.spacing,mi+pi,hi),Ce.hasContentShape=!!Ti.length,Ce.keyWidth=fi,Ce.valueWidth=vi}var Bi=0,zi=0,Wi=0,Ui=Ne.visible,$i=void 0===Ui||Ui,qi=Ne.value,Ki=void 0===qi?"":qi,Qi=Ne.valueStyle,Ji=Ne.spaceRow;Ce.title.visible=$i,Ce.title.spaceRow=null!=Ji?Ji:ce;var dn={},it=function(){return dn.autoWidth&&!1!==dn.multiLine};if($i){dn=gz({},pe,I6(Qi,void 0,{})),it()&&(dn.multiLine=null===(Lt=dn.multiLine)||void 0===Lt||Lt,dn.maxWidth=null!==(Ht=dn.maxWidth)&&void 0!==Ht?Ht:di?Math.ceil(hi):void 0);var fn=B6(Ki,dn),vn=fn.text,gn=fn.width,yn=fn.height;Ce.title.value=A(A({"width":it()?Math.min(gn,null!==(jt=dn.maxWidth)&&void 0!==jt?jt:Number.MAX_VALUE):gn,"height":yn},dn),{"text":vn}),Bi=Ce.title.value.width,Wi=(zi=Ce.title.value.height)+(di?Ce.title.spaceRow:0)}return li+=Wi,Ce.title.width=Bi,Ce.title.height=zi,it()?ti+=hi||Bi:ti+=Math.max(Bi,hi),di&&Ce.content.forEach((function(nt){var at,lt=nt.value;lt&&(null===(at=lt.autoWidth)||void 0===at||at)&&(lt.width=ti-fe.left-fe.right-mi-fi-ve.spacing-Ae.spacing,lt.maxWidth||(lt.maxWidth=Math.ceil(lt.width)),Ce.valueWidth=Math.max(Ce.valueWidth,lt.width))})),Ce.panel.width=ti,Ce.panel.height=li,Ce}(nt,this._component.getSpec(),Lt)}var Ht=(null!==(Bt=this._attributes)&&void 0!==Bt?Bt:{}).panel;return{"width":Ht.width+Ht.lineWidth,"height":Ht.height+Ht.lineWidth}},e.prototype._removeTooltip=function(){this._layer&&this._layer.removeAllChild(),this._attributes=null},e.prototype._updateTooltip=function(nt,at){this._visible=nt;var lt=this._compiler.getStage();if(lt)if(nt){this._tooltipComponent||this._initTooltipComponent(lt);var Rt=at.activeTooltipSpec.position;at.changePositionOnly?N(Rt)&&this._tooltipComponent.setAttributes(Rt):this._tooltipComponent.setAttributes(A(A({},this._attributes),Rt)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({"visibleAll":!0}))}else this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({"visibleAll":!1}))},e.prototype.isTooltipShown=function(){var nt;return null===(nt=this._tooltipComponent)||void 0===nt?void 0:nt.attribute.visibleAll},e.prototype.release=function(){var at;nt.prototype.release.call(this),null===(at=this._layer)||void 0===at||at.release()},e.type=o8.canvas,e}(R7),O6=function(){C6(F7)},F6=function(nt){Tz.registerChartPlugin(nt.type,nt)},H7=/\{([^}]+)\}/,N7=/\{([^}]+)\}/g,V7=/:/,G7=function(nt){function e(){var at=nt.call(this,e.type)||this;return at.type="formatterPlugin",at._timeModeFormat={"utc":Ji.getInstance().timeUTCFormat,"local":Ji.getInstance().timeFormat},at._formatter=at._format,at._timeFormatter=at._timeModeFormat.local,at._numericFormatter=gn.getInstance().format,at._numericSpecifier=gn.getInstance().formatter,at._numericFormatterCache=new Map,at._isNumericFormatterCache=new Map,at}return S(e,nt),e.prototype.onInit=function(nt,at){var lt;if(nt.globalInstance){this._spec=null!==(lt=null==at?void 0:at[e.specKey])&&void 0!==lt?lt:{};var Rt=this._spec,Bt=Rt.timeMode,Lt=Rt.customFormatter,Ht=Rt.numericFormatter,jt=Rt.timeFormatter;H(Lt)?this._formatter=Lt:(this._formatter=this._format.bind(this),H(jt)?this._timeFormatter=jt:Bt&&this._timeModeFormat[Bt]&&(this._timeFormatter=this._timeModeFormat[Bt]),Ht&&(this._numericFormatter=Ht,this._numericSpecifier=null,this._numericFormatterCache=null)),Tz.registerFormatter(this._formatter)}},e.prototype._format=function(nt,at,lt){var Rt=this;return X(nt)?nt.map((function(nt,Bt){var Lt=X(lt)?lt[Bt]:lt;return Lt?Rt._formatSingleLine(nt,at,Lt):nt})):X(lt)?lt.map((function(lt){return Rt._formatSingleLine(nt,at,lt)})):this._formatSingleLine(nt,at,lt)},e.prototype._formatSingleLine=function(nt,at,lt){var Rt,Bt=this;if(this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(lt)?Rt=this._isNumericFormatterCache.get(lt):(Rt=H7.test(lt),this._isNumericFormatterCache.set(lt,Rt))),Rt){var Lt=lt.replace(N7,(function(nt,lt){if(!V7.test(lt)){var Rt=at[lt.trim()];return void 0!==Rt?Rt:nt}var Lt=lt.split(":"),Ht=at[Lt.shift()],jt=Lt.join(":");return Bt._formatSingleText(Ht,jt)}));return Lt}return this._formatSingleText(nt,lt)},e.prototype._formatSingleText=function(nt,at){if(fn.test(at)&&this._numericFormatter){var lt=void 0;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(at)?lt=this._numericFormatterCache.get(at):(lt=this._numericSpecifier(at),this._numericFormatterCache.set(at,lt)),lt(Number(nt))):this._numericFormatter(at,Number(nt))}return at.includes("%")&&this._timeFormatter?this._timeFormatter(at,nt):nt},e.prototype.release=function(){nt.prototype.release.call(this),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null},e.pluginType="chart",e.specKey="formatter",e.type="formatterPlugin",e}(e$),V6=function(){F6(G7)},U7=function(nt){function e(){var at=null!==nt&&nt.apply(this,arguments)||this;return at.type=e.type,at}return S(e,nt),e.prototype._getDefaultStyle=function(){return A(A({},nt.prototype._getDefaultStyle.call(this)),{"width":void 0,"height":void 0,"lineWidth":0})},e.type="image",e}(dY),W6=function(){Tz.registerMark(U7.type,U7),LP(),SP(),Pj.registerGraphic(MH.image,ey)},U6=function(){eY(),wX(),CX(),PZ(),oJ(),VK(),sq(),oZ(),jJ(),A0(),W6(),Y2(),tK(),ZJ(),bq(),R0()};BY.useRegisters([jK,JK,mq,Vq,n5,u5,d5,S5,Z3,R5,D5,O5,V5,h4,f4,C5,X5,Z5,b4,i4,a4,l4,y4,S4,m5,M4,v5,Eq,o5,w5,W5,$5,H5,function(){wq(),r0(),l0(),H5()},gK,_K,xK,SK,wK,fQ,dQ,B4,H4,s8,g8,m8,w8,T8,P8,gZ,l7,v7,O7,c7,y7,z7,j7,d7,A7,P7,I7,W7,Y7,n6,u6,o6,l6,U6,P6,O6,V6,function(){Pj.registerInteraction(Hj.type,Hj)},function(){Pj.registerInteraction(Xj.type,Xj)},function(){Pj.registerInteraction(Qj.type,Qj)},function(){Pj.registerInteraction(Jj.type,Jj)},function(){Pj.registerInteraction(Yj.type,Yj)},function(){Pj.registerInteraction(Gj.type,Gj)},Mq,Ek,Tk]);var i9=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["valueField","maskShape","reverse","outlineMargin","outlinePadding","indicatorSmartInvert","liquidBackground","liquidOutline"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),n9=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=i9,lt.type="liquid",lt.seriesType=nt.SeriesTypeEnum.liquid,lt}return S(i,at),i.type="liquid",i.seriesType=nt.SeriesTypeEnum.liquid,i.transformerConstructor=i9,i}(eq),r9=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["categoryField","valueField","circle","overlap","overlapLabel"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),this.transformSeriesSpec(at)},e}(iq),a9=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=r9,lt.type="venn",lt.seriesType=nt.SeriesTypeEnum.venn,lt}return S(i,at),i.type="venn",i.seriesType=nt.SeriesTypeEnum.venn,i.transformerConstructor=r9,i}(eq),o9=function(nt){function e(){return null!==nt&&nt.apply(this,arguments)||this}return S(e,nt),e.prototype._getDefaultSeriesSpec=function(at){return nt.prototype._getDefaultSeriesSpec.call(this,at,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"])},e.prototype.transformSpec=function(at){nt.prototype.transformSpec.call(this,at),cU(at)},e.prototype._setDefaultXAxisSpec=function(nt){return{"orient":"bottom","type":"linear","label":{"visible":!1}}},e.prototype._setDefaultYAxisSpec=function(nt){return{"orient":"left","type":"linear"}},e}(rq),s9=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=o9,lt.type="mosaic",lt.seriesType=nt.SeriesTypeEnum.mosaic,lt.handleAfterStackRegion=function(nt,at){nt.getSeries().forEach((function(nt){var lt=nt.getStackData(),Rt=nt.getStackValue(),Bt=nt.getStackValueField();lt&&Bt&&(pH(at[Rt],Bt),fH(nt,at[Rt]))}))},lt}return S(i,at),i.prototype._beforeInit=function(){this._dataSet&&GW(this._dataSet,"stackSplit",DK)},i.prototype._initStack=function(){this._stack=new oq(this,{"afterStackRegion":this.handleAfterStackRegion}),this._stack.init()},i.type="mosaic",i.seriesType=nt.SeriesTypeEnum.mosaic,i.transformerConstructor=o9,i}(eq),l9=function(at){function i(){return null!==at&&at.apply(this,arguments)||this}return S(i,at),i.prototype._isValidSeries=function(at){return at===nt.SeriesTypeEnum.pictogram},i.prototype._getDefaultSeriesSpec=function(nt){return at.prototype._getDefaultSeriesSpec.call(this,nt,["type","nameField","valueField","svg","pictogram","defaultFillColor"])},i.prototype.transformSpec=function(nt){at.prototype.transformSpec.call(this,nt),nt.region.forEach((function(nt){nt.coordinate="geo"})),at.prototype.transformSeriesSpec.call(this,nt)},i}(iq),u9=function(at){function i(){var lt=null!==at&&at.apply(this,arguments)||this;return lt.transformerConstructor=l9,lt.type="pictogram",lt.seriesType=nt.SeriesTypeEnum.pictogram,lt}return S(i,at),i.type="pictogram",i.seriesType=nt.SeriesTypeEnum.pictogram,i.transformerConstructor=l9,i}(eq),t9=function(at,Rt,Bt){var Lt,Ht,jt,$t,Kt,te,ne,re,ae,oe,se;void 0===at&&(at="chart");var le={"modelInfo":[]};if("chart"===at)le.isChart=!0,le.modelInfo.push({"spec":Rt,"type":"chart"});else if("region"===at)le.modelType="region",le.specKey="region",null===(Lt=Rt.region)||void 0===Lt||Lt.forEach((function(nt,at){le.modelInfo.push({"spec":nt,"specPath":["region",at],"type":"region"})}));else if("series"===at)le.modelType="series",le.specKey="series",null===(Ht=Rt.series)||void 0===Ht||Ht.forEach((function(nt,at){le.modelInfo.push({"spec":nt,"specPath":["series",at],"type":nt.type})}));else if(Object.values(nt.SeriesTypeEnum).includes(at))le.modelType="series",le.specKey="series",le.type=at,null===(jt=Rt.series)||void 0===jt||jt.forEach((function(nt,lt){nt.type===at&&le.modelInfo.push({"spec":nt,"specPath":["series",lt],"type":at})}));else if(Object.values(lt).includes(at)){le.modelType="component",le.type=at,le.specKey=null===($t=Tz.getComponentInKey(at))||void 0===$t?void 0:$t.specKey;var ue=le.specKey,ce=xt(null!==(te=null===(Kt=Bt.component)||void 0===Kt?void 0:Kt[ue])&&void 0!==te?te:[]);null===(re=xt(null!==(ne=Rt[ue])&&void 0!==ne?ne:[]))||void 0===re||re.forEach((function(nt,lt){var Rt=ce[lt];Rt&&Rt.type===at?le.modelInfo.push(A(A({},Rt),{"spec":nt})):nt&&!1===nt.visible&&le.modelInfo.push({"type":at,"spec":nt})}))}else{var he=Tz.getComponents().filter((function(nt){return nt.cmp.specKey===at})).map((function(nt){return nt.cmp.type}));if(he.length>0){le.modelType="component",ue=at,le.specKey=ue;var de=xt(null!==(oe=null===(ae=Bt.component)||void 0===ae?void 0:ae[ue])&&void 0!==oe?oe:[]);xt(null!==(se=Rt[ue])&&void 0!==se?se:[]).forEach((function(nt,at){var lt=de[at];lt&&he.includes(lt.type)&&le.modelInfo.push(A(A({},lt),{"spec":nt}))}))}}return le},e9=function(nt,at,lt,Rt){var Bt,Lt,Ht=nt.spec,jt=nt.filter,$t=nt.filterType,Kt=nt.forceAppend,te=function(nt,at,lt,Rt,Bt,Lt){void 0===nt&&(nt="chart");var Ht=t9(nt,Bt,Lt);return A(A({},Ht),{"modelInfo":Ht.modelInfo.filter((function(nt){return!!j(at)||xt(at).some((function(at){return H(at)?at(nt,lt,Rt):dz(nt.spec,at)}))}))})}($t,jt,nt,at,lt,Rt),ne=te.isChart,re=te.modelType,ae=te.specKey,oe=te.type,se=te.modelInfo;if(0===se.length&&!Kt)return{"chartSpec":lt,"hasChanged":!1};var le=gz({},lt),ue=H(Ht)?Ht(se,nt,at):Ht;try{for(var ce=C(se),he=ce.next();!he.done;he=ce.next()){var de=he.value,fe=de.spec,pe=de.specPath;if(ne)return{"chartSpec":gz(le,ue),"hasChanged":!0};var ve=gz({},fe,ue);pz(le,pe,ve)}}catch(nt){Bt={"error":nt}}finally{try{he&&!he.done&&(Lt=ce.return)&&Lt.call(ce)}finally{if(Bt)throw Bt.error}}if(0===se.length&&Kt){var Ae=A({"type":oe},ue);X(le[ae])?le[ae].push(Ae):j(le[ae])?le[ae]="component"===re?Ae:[Ae]:le[ae]=[le[ae],Ae]}return{"chartSpec":le,"hasChanged":!0}},c9=function(nt){function e(){var at=nt.call(this,e.type)||this;return at.type="MediaQueryPlugin",at._currentMediaInfo={},at.currentActiveItems=new Set,at._initialized=!1,at}return S(e,nt),e.prototype.onInit=function(nt,at){if(null==at?void 0:at[e.specKey]){var lt=nt.globalInstance;this._option={"globalInstance":nt.globalInstance,"updateSpec":function(nt,at,Rt){Rt?lt.updateSpecSync(nt):at?lt.updateSpecAndRecompile(nt,!1,{"transformSpec":!0}):lt.setRuntimeSpec(nt)}},this._spec=at[e.specKey],this._initialized=!0}},e.prototype.onBeforeResize=function(nt,at,lt){this._initialized&&this._changeSize(at,lt,!0,!1)},e.prototype.onAfterChartSpecTransform=function(nt,at,lt){this._initialized&&"setCurrentTheme"===lt&&this._reInit(!1,!1)},e.prototype.onAfterModelSpecTransform=function(nt,at,lt,Rt){this._initialized&&"updateSpec"===Rt&&this.onBeforeInitChart(nt,at,"setCurrentTheme")},e.prototype.onBeforeInitChart=function(nt,at,lt){if(this._initialized){var Rt,Bt;switch(lt){case"render":case"updateModelSpec":Rt=!1,Bt=!0;break;case"setCurrentTheme":Rt=!0,Bt=!1;break;case"updateSpecAndRecompile":Rt=!1,Bt=!1}if(Rt&&this.release(),this._initialized||this.onInit(nt,at),Rt||Bt){var Lt=this._option.globalInstance.getCurrentSize(),Ht=Lt.width,jt=Lt.height;this._changeSize(Ht,jt,!1,!1)}}},e.prototype._changeSize=function(nt,at,lt,Rt){return(this._currentMediaInfo.width!==nt||this._currentMediaInfo.height!==at)&&(this._currentMediaInfo.width=nt,this._currentMediaInfo.height=at,this._applyQueries(lt,Rt))},e.prototype._applyQueries=function(nt,at){var lt,Rt,Bt=this,Lt=[],Ht=[];if(this._spec.forEach((function(nt){var at=Bt._check(nt),lt=at.hasChanged,Rt=at.isActive;lt&&(Rt?Lt.push(nt):Ht.push(nt))})),!Lt.length&&!Ht.length)return!1;this._baseChartSpec||(this._baseChartSpec=vz(this._option.globalInstance.getSpec(),["data",e.specKey]),this._baseChartSpecInfo=this._option.globalInstance.getSpecInfo());var jt=!1;return Ht.length>0?(lt=vz(this._baseChartSpec,["data",e.specKey]),Rt=this._baseChartSpecInfo,Array.from(this.currentActiveItems).forEach((function(nt){if(Ht.includes(nt))Bt.currentActiveItems.delete(nt);else{var at=Bt._apply(nt,lt,Rt);lt=at.chartSpec}})),jt=!0):(lt=this._option.globalInstance.getSpec(),Rt=this._option.globalInstance.getSpecInfo()),Lt.forEach((function(nt){Bt.currentActiveItems.add(nt);var at=Bt._apply(nt,lt,Rt);lt=at.chartSpec,jt||(jt=at.hasChanged)})),jt&&this._option.updateSpec(lt,nt,at),!0},e.prototype._check=function(nt){var at=this._option.globalInstance,lt=function(nt,at,lt){for(var Rt in nt)switch(Rt){case"maxHeight":if(N(nt.maxHeight)&&at.height>nt.maxHeight)return!1;break;case"minHeight":if(N(nt.minHeight)&&at.height<nt.minHeight)return!1;break;case"maxWidth":if(N(nt.maxWidth)&&at.width>nt.maxWidth)return!1;break;case"minWidth":if(N(nt.minWidth)&&at.width<nt.minWidth)return!1;break;case"onResize":if(N(nt.onResize)&&!nt.onResize(at,lt))return!1}return!0}(nt.query,this._currentMediaInfo,at);return{"isActive":lt,"hasChanged":lt!==this.currentActiveItems.has(nt)}},e.prototype._apply=function(nt,at,lt){var Rt=nt.query,Bt=nt.action,Lt=!1;return xt(Bt).forEach((function(nt){var Bt=e9(nt,Rt,at,lt);at=Bt.chartSpec,Lt||(Lt=Bt.hasChanged)})),{"chartSpec":at,"hasChanged":Lt}},e.prototype._reInit=function(nt,at){var lt=this,Rt=this._option.globalInstance.getSpec();this._baseChartSpec=vz(Rt,["data",e.specKey]),this._baseChartSpecInfo=this._option.globalInstance.getSpecInfo();var Bt=!1;this.currentActiveItems.forEach((function(nt){var at=lt._apply(nt,Rt,lt._baseChartSpecInfo);Rt=at.chartSpec,Bt||(Bt=at.hasChanged)})),Bt&&this._option.updateSpec(Rt,nt,at)},e.prototype.release=function(){nt.prototype.release.call(this),this._initialized=!1,this._spec=[],this._option=void 0,this._currentMediaInfo={},this.currentActiveItems.clear()},e.pluginType="chart",e.specKey="media",e.type="MediaQueryPlugin",e}(e$);nt.Arc3dMark=AQ,nt.ArcMark=cQ,nt.AreaChart=kq,nt.AreaMark=pq,nt.AreaSeries=_q,nt.AxisSyncPlugin=i$,nt.Bar3dChart=$q,nt.Bar3dSeries=Yq,nt.BarChart=jq,nt.BarSeries=Fq,nt.BaseChart=eq,nt.BaseChartSpecTransformer=iq,nt.BaseMark=dY,nt.BaseSeries=kX,nt.BoxPlotChart=w4,nt.BoxPlotSeries=bZ,nt.Brush=o7,nt.CanvasTooltipHandler=F7,nt.CartesianAxis=h$,nt.CartesianBandAxis=C$,nt.CartesianCrossHair=i6,nt.CartesianLinearAxis=b$,nt.CartesianLogAxis=P$,nt.CartesianMarkArea=H6,nt.CartesianMarkLine=E6,nt.CartesianMarkPoint=Z6,nt.CartesianSeries=AX,nt.CartesianSymlogAxis=F$,nt.CartesianTimeAxis=T$,nt.CirclePackingChart=g4,nt.CirclePackingSeries=e2,nt.CircularProgressChart=j5,nt.CircularProgressSeries=xJ,nt.CommonChart=M5,nt.CommonChartSpecTransformer=A5,nt.ComponentMark=l$,nt.ComposedEventMapper=KG,nt.ContinuousLegend=t8,nt.CorrelationChart=U4,nt.CorrelationSeries=s3,nt.CustomMark=s7,nt.DEFAULT_CHART_HEIGHT=LF,nt.DEFAULT_CHART_WIDTH=DF,nt.DEFAULT_DATA_INDEX=Xz,nt.DEFAULT_DATA_KEY=$z,nt.DEFAULT_DATA_SERIES_FIELD=qz,nt.DEFAULT_MEASURE_CANVAS_ID=Yz,nt.DEFAULT_SERIES_STYLE_NAME=Kz,nt.DataZoom=h6,nt.DimensionClickEvent=XG,nt.DimensionHoverEvent=$G,nt.DiscreteLegend=$4,nt.DomTooltipHandler=D7,nt.DotSeries=sJ,nt.Event=QG,nt.Factory=Tz,nt.FormatterPlugin=G7,nt.Funnel3dChart=e4,nt.Funnel3dSeries=y1,nt.FunnelChart=t4,nt.FunnelSeries=Q0,nt.GaugeChart=G5,nt.GaugePointerSeries=B2,nt.GaugeSeries=L2,nt.GeoCoordinate=WK,nt.GeoMarkPoint=J6,nt.GridLayout=h7,nt.GroupMark=kY,nt.HeatmapChart=z4,nt.HeatmapSeries=K2,nt.Histogram3dChart=F5,nt.HistogramChart=L5,nt.ImageMark=U7,nt.Indicator=f6,nt.Label=$6,nt.Layout=ZU,nt.Layout3d=f7,nt.LineChart=uq,nt.LineMark=$X,nt.LineSeries=$$,nt.LinearProgressChart=r4,nt.LinearProgressSeries=FJ,nt.LinkSeries=fJ,nt.LiquidChart=n9,nt.LiquidSeries=O3,nt.MOSAIC_CAT_END_PERCENT=kH,nt.MOSAIC_CAT_START_PERCENT=xH,nt.MOSAIC_VALUE_END_PERCENT=bH,nt.MOSAIC_VALUE_START_PERCENT=_H,nt.MapChart=r5,nt.MapLabelComponent=u7,nt.MapSeries=YK,nt.MediaQuery=c9,nt.MosaicChart=s9,nt.MosaicSeries=q3,nt.PREFIX=OF,nt.PathMark=BK,nt.PictogramChart=u9,nt.PictogramSeries=e5,nt.Pie3dChart=y5,nt.Pie3dSeries=CQ,nt.PieChart=p5,nt.PieSeries=kQ,nt.Player=N6,nt.PolarAxis=DQ,nt.PolarBandAxis=FQ,nt.PolarCrossHair=r6,nt.PolarLinearAxis=LQ,nt.PolarMarkArea=j6,nt.PolarMarkLine=R6,nt.PolarMarkPoint=Q6,nt.PolarSeries=eQ,nt.PolygonMark=B0,nt.ProgressLikeSeries=vJ,nt.Pyramid3dMark=t1,nt.RadarChart=k5,nt.RadarSeries=UQ,nt.RangeAreaChart=D4,nt.RangeAreaSeries=JZ,nt.RangeColumn3dChart=c4,nt.RangeColumn3dSeries=$Z,nt.RangeColumnChart=s4,nt.RangeColumnSeries=XZ,nt.Rect3dMark=Wq,nt.RectMark=Iq,nt.RippleMark=a3,nt.RoseChart=b5,nt.RoseLikeSeries=EQ,nt.RoseSeries=zQ,nt.RuleMark=iZ,nt.SEGMENT_FIELD_END=AH,nt.SEGMENT_FIELD_START=SH,nt.STACK_FIELD_END=Jz,nt.STACK_FIELD_END_OffsetSilhouette=nH,nt.STACK_FIELD_END_PERCENT=eH,nt.STACK_FIELD_KEY=Zz,nt.STACK_FIELD_START=Qz,nt.STACK_FIELD_START_OffsetSilhouette=iH,nt.STACK_FIELD_START_PERCENT=tH,nt.STACK_FIELD_TOTAL=rH,nt.STACK_FIELD_TOTAL_BOTTOM=mH,nt.STACK_FIELD_TOTAL_PERCENT=aH,nt.STACK_FIELD_TOTAL_TOP=oH,nt.SankeyChart=R4,nt.SankeySeries=g2,nt.ScatterChart=pK,nt.ScatterSeries=dK,nt.ScrollBar=d6,nt.SequenceChart=E5,nt.SunburstChart=p4,nt.SunburstSeries=V1,nt.SymbolMark=QX,nt.TextMark=wZ,nt.ThemeManager=Uz,nt.Title=D6,nt.Tooltip=M8,nt.TotalLabel=q6,nt.TreemapChart=_4,nt.TreemapSeries=x2,nt.VChart=BY,nt.VennChart=a9,nt.VennSeries=$3,nt.WaterfallChart=k4,nt.WaterfallSeries=cZ,nt.WordCloud3dChart=Q5,nt.WordCloud3dSeries=y0,nt.WordCloudChart=q5,nt.WordCloudSeries=g0,nt.alternatingWave=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=at/Rt,$t=lt/Bt,Kt=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)*Math.sin(2*Lt*Math.PI-2*$t*Math.PI)+1)/2;return Math.min(1,Math.max(0,Kt))},nt.builtinThemes=Hz,nt.centerToCorner=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow((at-Kt)/Kt,2)+Math.pow((lt-te)/te,2)),re=1-Math.min(ne,1),ae=jt+$t*(Math.sin(2*Lt*Math.PI-2*re*Math.PI)+1)/2;return Math.min(1,Math.max(0,ae))},nt.columnCenterToEdge=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Bt/2,te=Math.abs(lt-Kt)/Kt,ne=jt+$t*(Math.sin(2*Lt*Math.PI-2*te*Math.PI)+1)/2;return Math.min(1,Math.max(0,ne))},nt.columnEdgeToCenter=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Bt/2,te=1-Math.abs(lt-Kt)/Kt,ne=jt+$t*(Math.sin(2*Lt*Math.PI-2*te*Math.PI)+1)/2;return Math.min(1,Math.max(0,ne))},nt.columnLeftToRight=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=lt/Bt,$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.columnRightToLeft=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=(Bt-1-lt)/Bt,$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.computeActualDataScheme=$O,nt.cornerToCenter=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow((at-Kt)/Kt,2)+Math.pow((lt-te)/te,2)),re=Math.min(ne,1),ae=jt+$t*(Math.sin(2*Lt*Math.PI-2*re*Math.PI)+1)/2;return Math.min(1,Math.max(0,ae))},nt.createArc=yy,nt.createArea=fy,nt.createGroup=Pv,nt.createLine=Ng,nt.createRect=Wg,nt.createRichText=ly,nt.createSymbol=zg,nt.createText=Dg,nt.darkTheme=Mz,nt.dataScheme=CF,nt.default=BY,nt.defaultThemeName=jz,nt.diagonalCenterToEdge=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow((at-Kt)/Rt,2)+Math.pow((lt-te)/Bt,2)),re=jt+$t*(Math.sin(2*Lt*Math.PI-2*ne*Math.PI)+1)/2;return Math.min(1,Math.max(0,re))},nt.diagonalTopLeftToBottomRight=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=(at/Rt+lt/Bt)/2,$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.functionTransform=Fz,nt.getActualColor=eF,nt.getCartesianDimensionInfo=BW,nt.getColorSchemeBySeries=aF,nt.getDataScheme=QO,nt.getFieldAlias=uH,nt.getMergedTheme=Bz,nt.getPolarDimensionInfo=mW,nt.getRegionStackGroup=cH,nt.getTheme=Ez,nt.hasThemeMerged=Wz,nt.isColorKey=iF,nt.isProgressiveDataColorScheme=nF,nt.isTokenKey=lz,nt.lightTheme=wz,nt.mergeFields=sH,nt.particleEffect=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=at*Bt+lt,te=2*PP(Kt,0)*Math.PI,ne=.5*PP(Kt,1)+.5,re=2*PP(Kt,2)*Math.PI,ae=Rt/2,oe=Bt/2,se=Math.sqrt(Math.pow((at-ae)/ae,2)+Math.pow((lt-oe)/oe,2)),le=Math.min(se,1),ue=(Lt-.4)/.6,ce=Math.sin(ue*ne*8*Math.PI+te+re*ue),he=Math.cos(le*Math.PI+ue*Math.PI),de=jt+$t*((ce+1)/2*Math.max(0,1-1.2*ue)*(.3+.7*he));return Math.min(1,Math.max(0,de))},nt.pulseWave=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow((at-Kt)/Kt,2)+Math.pow((lt-te)/te,2)),re=Math.min(ne,1),ae=2*Lt*Math.PI*3,oe=Math.max(0,1-re),se=jt+$t*((Math.sin(ae-4*re*Math.PI)+1)/2)*(.7*oe+.3);return Math.min(1,Math.max(0,se))},nt.queryColorFromColorScheme=tF,nt.queryToken=sz,nt.randomOpacity=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=2*PP(at*Bt+lt)*Math.PI,te=jt+$t*(Math.sin(2*Lt*Math.PI+Kt)+1)/2;return Math.min(1,Math.max(0,te))},nt.register3DPlugin=wq,nt.registerAllEnv=function(){ET()},nt.registerAllMarks=U6,nt.registerAnimate=Mq,nt.registerArc3dMark=ZJ,nt.registerArcMark=jJ,nt.registerAreaChart=JK,nt.registerAreaMark=VK,nt.registerAreaSeries=KK,nt.registerBar3dChart=Eq,nt.registerBar3dSeries=Sq,nt.registerBarChart=mq,nt.registerBarSeries=fq,nt.registerBoxplotChart=f4,nt.registerBoxplotSeries=rJ,nt.registerBrowserEnv=rY,nt.registerBrush=W7,nt.registerCanvasTooltipHandler=O6,nt.registerCartesianBandAxis=_K,nt.registerCartesianCrossHair=g8,nt.registerCartesianLinearAxis=gK,nt.registerCartesianLogAxis=SK,nt.registerCartesianSymlogAxis=wK,nt.registerCartesianTimeAxis=xK,nt.registerChartPlugin=F6,nt.registerCirclePackingChart=a4,nt.registerCirclePackingSeries=L1,nt.registerCircularProgressChart=C5,nt.registerCircularProgressSeries=ZQ,nt.registerCommonChart=v5,nt.registerComponentMark=tK,nt.registerContinuousLegend=H4,nt.registerCorrelationChart=M4,nt.registerCustomMark=Y7,nt.registerDataZoom=w8,nt.registerDiscreteLegend=B4,nt.registerDomTooltipHandler=P6,nt.registerDotSeries=OQ,nt.registerDragPlugin=function(){Pj.registerStageEventPlugin("drag",lA)},nt.registerFormatPlugin=V6,nt.registerFunnel3dChart=W5,nt.registerFunnel3dSeries=L0,nt.registerFunnelChart=V5,nt.registerFunnelSeries=E0,nt.registerGaugeChart=R5,nt.registerGaugePointerSeries=S2,nt.registerGaugeSeries=M2,nt.registerGeoCoordinate=gZ,nt.registerGeoMarkPoint=j7,nt.registerGesturePlugin=hW,nt.registerGridLayout=o6,nt.registerGroupMark=eY,nt.registerHarmonyEnv=function(){cC(Mc)},nt.registerHeatmapChart=S4,nt.registerHeatmapSeries=O2,nt.registerHistogram3dChart=w5,nt.registerHistogramChart=S5,nt.registerHtmlAttributePlugin=Tk,nt.registerImageMark=W6,nt.registerIndicator=P8,nt.registerLabel=P7,nt.registerLarkEnv=function(){dM(Mc)},nt.registerLayout3d=l6,nt.registerLineChart=jK,nt.registerLineMark=wX,nt.registerLineSeries=TK,nt.registerLinearProgressChart=X5,nt.registerLinearProgressSeries=o$,nt.registerLinkSeries=NQ,nt.registerLiquidChart=function(){l3(),Tz.registerChart(n9.type,n9)},nt.registerLiquidSeries=l3,nt.registerLynxEnv=function(){PM(Mc)},nt.registerMapChart=Z3,nt.registerMapLabel=n6,nt.registerMapSeries=_Z,nt.registerMarkArea=v7,nt.registerMarkLine=l7,nt.registerMarkPoint=O7,nt.registerMediaQuery=function(){F6(c9)},nt.registerMorph=Tq,nt.registerMosaicChart=function(){D3(),Tz.registerChart(s9.type,s9)},nt.registerMosaicSeries=D3,nt.registerNodeEnv=aY,nt.registerPathMark=oZ,nt.registerPictogramChart=function(){X3(),Tz.registerChart(u9.type,u9)},nt.registerPictogramSeries=X3,nt.registerPie3dChart=o5,nt.registerPie3dSeries=$J,nt.registerPieChart=n5,nt.registerPieSeries=KJ,nt.registerPlayer=A7,nt.registerPolarBandAxis=fQ,nt.registerPolarCrossHair=m8,nt.registerPolarLinearAxis=dQ,nt.registerPolarMarkArea=y7,nt.registerPolarMarkLine=c7,nt.registerPolarMarkPoint=z7,nt.registerPolygonMark=A0,nt.registerPoptip=u6,nt.registerPyramid3dMark=R0,nt.registerRadarChart=d5,nt.registerRadarSeries=PQ,nt.registerRangeAreaChart=b4,nt.registerRangeAreaSeries=AJ,nt.registerRangeColumn3dChart=$5,nt.registerRangeColumn3dSeries=bJ,nt.registerRangeColumnChart=Z5,nt.registerRangeColumnSeries=mJ,nt.registerReactAttributePlugin=Ek,nt.registerRect3dMark=bq,nt.registerRectMark=sq,nt.registerRippleMark=Y2,nt.registerRoseChart=u5,nt.registerRoseSeries=gQ,nt.registerRuleMark=PZ,nt.registerSankeyChart=y4,nt.registerSankeySeries=o2,nt.registerScatterChart=Vq,nt.registerScatterSeries=Hq,nt.registerScrollBar=T8,nt.registerSequenceChart=m5,nt.registerSunBurstSeries=C1,nt.registerSunburstChart=i4,nt.registerSymbolMark=CX,nt.registerTTEnv=function(){XT(Mc)},nt.registerTaroEnv=function(){uT(Mc)},nt.registerTextMark=oJ,nt.registerTheme=Cz,nt.registerTitle=d7,nt.registerTooltip=s8,nt.registerTotalLabel=I7,nt.registerTreemapChart=l4,nt.registerTreemapSeries=v2,nt.registerVennChart=function(){I3(),Tz.registerChart(a9.type,a9)},nt.registerVennSeries=I3,nt.registerWXEnv=function(){TT(Mc)},nt.registerWaterfallChart=h4,nt.registerWaterfallSeries=qZ,nt.registerWordCloud3dChart=H5,nt.registerWordCloud3dSeries=l0,nt.registerWordCloudChart=D5,nt.registerWordCloudSeries=o0,nt.registerWordCloudShapeChart=O5,nt.removeTheme=Pz,nt.rippleEffect=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow(at-Kt,2)+Math.pow(lt-te,2))/Math.sqrt(Math.pow(Rt/2,2)+Math.pow(Bt/2,2)),re=jt+$t*(Math.sin(2*Lt*Math.PI*3-2*ne*Math.PI)+1)/2;return Math.min(1,Math.max(0,re))},nt.rotationScan=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.atan2(at-Kt,lt-te),re=(ne<0?ne+2*Math.PI:ne)/(2*Math.PI),ae=jt+$t*(Math.sin(2*Lt*Math.PI-2*re*Math.PI)+1)/2;return Math.min(1,Math.max(0,ae))},nt.rowBottomToTop=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=(Rt-1-at)/Rt,$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.rowCenterToEdge=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Math.abs(at-Kt)/Kt,ne=jt+$t*(Math.sin(2*Lt*Math.PI-2*te*Math.PI)+1)/2;return Math.min(1,Math.max(0,ne))},nt.rowEdgeToCenter=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=1-Math.abs(at-Kt)/Kt,ne=jt+$t*(Math.sin(2*Lt*Math.PI-2*te*Math.PI)+1)/2;return Math.min(1,Math.max(0,ne))},nt.rowTopToBottom=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=at/Rt,$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-2*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.snakeWave=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=(at+lt)%(Rt+Bt)/(Rt+Bt),$t=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:0)+(arguments.length>8&&void 0!==arguments[8]?arguments[8]:1)*(Math.sin(2*Lt*Math.PI-4*jt*Math.PI)+1)/2;return Math.min(1,Math.max(0,$t))},nt.sortStackValueGroup=hH,nt.specTransform=Oz,nt.spiralEffect=function(nt,at,lt,Rt,Bt,Lt,Ht){var jt=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,$t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,Kt=Rt/2,te=Bt/2,ne=Math.sqrt(Math.pow(at-Kt,2)+Math.pow(lt-te,2)),re=Math.atan2(at-Kt,lt-te),ae=(ne/Math.sqrt(Math.pow(Rt/2,2)+Math.pow(Bt/2,2))+re/(2*Math.PI))/2,oe=jt+$t*(Math.sin(2*Lt*Math.PI-4*ae*Math.PI)+1)/2;return Math.min(1,Math.max(0,oe))},nt.stack=gH,nt.stackGroup=yH,nt.stackMosaic=fH,nt.stackMosaicTotal=pH,nt.stackOffsetSilhouette=vH,nt.stackTotal=dH,nt.themeExist=Rz,nt.themes=Nz,nt.token=Az,nt.transformColorSchemeToStandardStruct=rF,nt.version="1.13.7",nt.vglobal=ax,Object.defineProperty(nt,"__esModule",{"value":!0})}(at)},"5305":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(8617),Lt=lt(3151);at.A=nt=>{const{"space":at,"form":lt,"children":Ht}=nt;if(null==Ht)return null;let jt=Ht;return lt&&(jt=Rt.createElement(Bt.XB,{"override":!0,"status":!0},jt)),at&&(jt=Rt.createElement(Lt.K6,null,jt)),jt}},"3417":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(8821),Lt=lt(1866),Ht=lt(6623);at.A=(nt,at,lt,jt,$t)=>function withPureRenderTheme(nt){return at=>Rt.createElement(Lt.Ay,{"theme":{"token":{"motion":!1,"zIndexPopupBase":0}}},Rt.createElement(nt,Object.assign({},at)))}((Lt=>{const{"prefixCls":Kt,"style":te}=Lt,ne=Rt.useRef(null),[re,ae]=Rt.useState(0),[oe,se]=Rt.useState(0),[le,ue]=(0,Bt.A)(!1,{"value":Lt.open}),{"getPrefixCls":ce}=Rt.useContext(Ht.QO),he=ce(jt||"select",Kt);Rt.useEffect((()=>{if(ue(!0),"undefined"!=typeof ResizeObserver){const nt=new ResizeObserver((nt=>{const at=nt[0].target;ae(at.offsetHeight+8),se(at.offsetWidth)})),at=setInterval((()=>{var lt;const Rt=$t?`.${$t(he)}`:`.${he}-dropdown`,Bt=null===(lt=ne.current)||void 0===lt?void 0:lt.querySelector(Rt);Bt&&(clearInterval(at),nt.observe(Bt))}),10);return()=>{clearInterval(at),nt.disconnect()}}}),[]);let de=Object.assign(Object.assign({},Lt),{"style":Object.assign(Object.assign({},te),{"margin":0}),"open":le,"visible":le,"getPopupContainer":()=>ne.current});lt&&(de=lt(de)),at&&Object.assign(de,{[at]:{"overflow":{"adjustX":!1,"adjustY":!1}}});const fe={"paddingBottom":re,"position":"relative","minWidth":oe};return Rt.createElement("div",{"ref":ne,"style":fe},Rt.createElement(nt,Object.assign({},de)))}))},"8680":function(nt,at,lt){"use strict";function isPresetSize(nt){return["small","middle","large"].includes(nt)}function isValidGapNumber(nt){return!!nt&&("number"==typeof nt&&!Number.isNaN(nt))}lt.d(at,{"X":function(){return isPresetSize},"m":function(){return isValidGapNumber}})},"3755":function(nt,at,lt){"use strict";lt.d(at,{"YK":function(){return useZIndex}});var Rt=lt(758),Bt=lt(3727),Lt=lt(3024);const Ht=100,jt={"Modal":Ht,"Drawer":Ht,"Popover":Ht,"Popconfirm":Ht,"Tooltip":Ht,"Tour":Ht,"FloatButton":Ht},$t={"SelectLike":50,"Dropdown":50,"DatePicker":50,"Menu":50,"ImagePreview":1};const useZIndex=(nt,at)=>{const[,lt]=(0,Bt.Ay)(),Ht=Rt.useContext(Lt.A),Kt=function isContainerType(nt){return nt in jt}(nt);let te;if(void 0!==at)te=[at,at];else{let Rt=null!=Ht?Ht:0;Rt+=Kt?(Ht?0:lt.zIndexPopupBase)+jt[nt]:$t[nt],te=[void 0===Ht?at:Rt,Rt]}return te}},"2978":function(nt,at,lt){"use strict";lt.d(at,{"Ob":function(){return cloneElement},"fx":function(){return replaceElement},"zv":function(){return isFragment}});var Rt=lt(758);function isFragment(nt){return nt&&Rt.isValidElement(nt)&&nt.type===Rt.Fragment}const replaceElement=(nt,at,lt)=>Rt.isValidElement(nt)?Rt.cloneElement(nt,"function"==typeof lt?lt(nt.props||{}):lt):at;function cloneElement(nt,at){return replaceElement(nt,nt,at)}},"1406":function(nt,at,lt){"use strict";lt.d(at,{"L":function(){return getStatusClassNames},"v":function(){return getMergedStatus}});var Rt=lt(7500),Bt=lt.n(Rt);function getStatusClassNames(nt,at,lt){return Bt()({[`${nt}-status-success`]:"success"===at,[`${nt}-status-warning`]:"warning"===at,[`${nt}-status-error`]:"error"===at,[`${nt}-status-validating`]:"validating"===at,[`${nt}-has-feedback`]:lt})}const getMergedStatus=(nt,at)=>at||nt},"8325":function(nt,at,lt){"use strict";lt.d(at,{"_n":function(){return Bt},"rJ":function(){return devUseWarning}});var Rt=lt(758);lt(1378);function noop(){}const Bt=Rt.createContext({}),devUseWarning=()=>{const noopWarning=()=>{};return noopWarning.deprecated=noop,noopWarning}},"6276":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return wave}});var Rt=lt(758),Bt=lt(7500),Lt=lt.n(Bt),Ht=lt(1411),jt=lt(15),$t=lt(6623),Kt=lt(2978),te=lt(5926);const genWaveStyle=nt=>{const{"componentCls":at,"colorPrimary":lt}=nt;return{[at]:{"position":"absolute","background":"transparent","pointerEvents":"none","boxSizing":"border-box","color":`var(--wave-color, ${lt})`,"boxShadow":"0 0 0 0 currentcolor","opacity":.2,"&.wave-motion-appear":{"transition":[`box-shadow 0.4s ${nt.motionEaseOutCirc}`,`opacity 2s ${nt.motionEaseOutCirc}`].join(","),"&-active":{"boxShadow":"0 0 0 6px currentcolor","opacity":0},"&.wave-quick":{"transition":[`box-shadow ${nt.motionDurationSlow} ${nt.motionEaseInOut}`,`opacity ${nt.motionDurationSlow} ${nt.motionEaseInOut}`].join(",")}}}}};var ne=(0,te.Or)("Wave",(nt=>[genWaveStyle(nt)])),re=lt(6812),ae=lt(6667),oe=lt(3727);const se=`${$t.yH}-wave-target`;var le,ue=lt(3295),ce=lt(8143),he=lt.t(ce,2),de=lt(8884),fe=lt(2368),pe=lt(8299),ve=(0,lt(1950).A)({},he),Ae=ve.version,we=ve.render,Ce=ve.unmountComponentAtNode;try{Number((Ae||"").split(".")[0])>=18&&(le=ve.createRoot)}catch(nt){}function toggleWarning(nt){var at=ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;at&&"object"===(0,pe.A)(at)&&(at.usingClientEntryPoint=nt)}var je="__rc_react_root__";function render(nt,at){le?function modernRender(nt,at){toggleWarning(!0);var lt=at[je]||le(at);toggleWarning(!1),lt.render(nt),at[je]=lt}(nt,at):function legacyRender(nt,at){null==we||we(nt,at)}(nt,at)}function modernUnmount(nt){return _modernUnmount.apply(this,arguments)}function _modernUnmount(){return(_modernUnmount=(0,fe.A)((0,de.A)().mark((function _callee(nt){return(0,de.A)().wrap((function _callee$(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",Promise.resolve().then((function(){var at;null===(at=nt[je])||void 0===at||at.unmount(),delete nt[je]})));case 1:case"end":return at.stop()}}),_callee)})))).apply(this,arguments)}function legacyUnmount(nt){Ce(nt)}function _unmount(){return(_unmount=(0,fe.A)((0,de.A)().mark((function _callee2(nt){return(0,de.A)().wrap((function _callee2$(at){for(;;)switch(at.prev=at.next){case 0:if(void 0===le){at.next=2;break}return at.abrupt("return",modernUnmount(nt));case 2:legacyUnmount(nt);case 3:case"end":return at.stop()}}),_callee2)})))).apply(this,arguments)}let unstableRender=(nt,at)=>(render(nt,at),()=>function unmount(nt){return _unmount.apply(this,arguments)}(at));function isValidWaveColor(nt){return nt&&"#fff"!==nt&&"#ffffff"!==nt&&"rgb(255, 255, 255)"!==nt&&"rgba(255, 255, 255, 1)"!==nt&&!/rgba\((?:\d*, ){3}0\)/.test(nt)&&"transparent"!==nt}function validateNum(nt){return Number.isNaN(nt)?0:nt}const WaveEffect=nt=>{const{"className":at,"target":lt,"component":Bt,"registerUnmount":Ht}=nt,$t=Rt.useRef(null),Kt=Rt.useRef(null);Rt.useEffect((()=>{Kt.current=Ht()}),[]);const[te,ne]=Rt.useState(null),[re,oe]=Rt.useState([]),[le,ce]=Rt.useState(0),[he,de]=Rt.useState(0),[fe,pe]=Rt.useState(0),[ve,Ae]=Rt.useState(0),[we,Ce]=Rt.useState(!1),je={"left":le,"top":he,"width":fe,"height":ve,"borderRadius":re.map((nt=>`${nt}px`)).join(" ")};function syncPos(){const nt=getComputedStyle(lt);ne(function getTargetWaveColor(nt){const{"borderTopColor":at,"borderColor":lt,"backgroundColor":Rt}=getComputedStyle(nt);return isValidWaveColor(at)?at:isValidWaveColor(lt)?lt:isValidWaveColor(Rt)?Rt:null}(lt));const at="static"===nt.position,{"borderLeftWidth":Rt,"borderTopWidth":Bt}=nt;ce(at?lt.offsetLeft:validateNum(-parseFloat(Rt))),de(at?lt.offsetTop:validateNum(-parseFloat(Bt))),pe(lt.offsetWidth),Ae(lt.offsetHeight);const{"borderTopLeftRadius":Lt,"borderTopRightRadius":Ht,"borderBottomLeftRadius":jt,"borderBottomRightRadius":$t}=nt;oe([Lt,Ht,$t,jt].map((nt=>validateNum(parseFloat(nt)))))}if(te&&(je["--wave-color"]=te),Rt.useEffect((()=>{if(lt){const nt=(0,ae.A)((()=>{syncPos(),Ce(!0)}));let at;return"undefined"!=typeof ResizeObserver&&(at=new ResizeObserver(syncPos),at.observe(lt)),()=>{ae.A.cancel(nt),null==at||at.disconnect()}}}),[]),!we)return null;const Ne=("Checkbox"===Bt||"Radio"===Bt)&&(null==lt?void 0:lt.classList.contains(se));return Rt.createElement(ue.Ay,{"visible":!0,"motionAppear":!0,"motionName":"wave-motion","motionDeadline":5e3,"onAppearEnd":(nt,at)=>{var lt,Rt;if(at.deadline||"opacity"===at.propertyName){const nt=null===(lt=$t.current)||void 0===lt?void 0:lt.parentElement;null===(Rt=Kt.current)||void 0===Rt||Rt.call(Kt).then((()=>{null==nt||nt.remove()}))}return!1}},((nt,lt)=>{let{"className":Bt}=nt;return Rt.createElement("div",{"ref":(0,jt.K4)($t,lt),"className":Lt()(at,Bt,{"wave-quick":Ne}),"style":je})}))};var wave_WaveEffect=(nt,at)=>{var lt;const{"component":Bt}=at;if("Checkbox"===Bt&&!(null===(lt=nt.querySelector("input"))||void 0===lt?void 0:lt.checked))return;const Lt=document.createElement("div");Lt.style.position="absolute",Lt.style.left="0px",Lt.style.top="0px",null==nt||nt.insertBefore(Lt,null==nt?void 0:nt.firstChild);const Ht=function getReactRender(){return unstableRender}();let jt=null;jt=Ht(Rt.createElement(WaveEffect,Object.assign({},at,{"target":nt,"registerUnmount":function registerUnmount(){return jt}})),Lt)};var wave_useWave=(nt,at,lt)=>{const{"wave":Bt}=Rt.useContext($t.QO),[,Lt,Ht]=(0,oe.Ay)(),jt=(0,re.A)((Rt=>{const jt=nt.current;if((null==Bt?void 0:Bt.disabled)||!jt)return;const $t=jt.querySelector(`.${se}`)||jt,{"showEffect":Kt}=Bt||{};(Kt||wave_WaveEffect)($t,{"className":at,"token":Lt,"component":lt,"event":Rt,"hashId":Ht})})),Kt=Rt.useRef(null);return nt=>{ae.A.cancel(Kt.current),Kt.current=(0,ae.A)((()=>{jt(nt)}))}};var wave=nt=>{const{"children":at,"disabled":lt,"component":Bt}=nt,{"getPrefixCls":te}=(0,Rt.useContext)($t.QO),re=(0,Rt.useRef)(null),ae=te("wave"),[,oe]=ne(ae),se=wave_useWave(re,Lt()(ae,oe),Bt);if(Rt.useEffect((()=>{const nt=re.current;if(!nt||1!==nt.nodeType||lt)return;const onClick=at=>{!(0,Ht.A)(at.target)||!nt.getAttribute||nt.getAttribute("disabled")||nt.disabled||nt.className.includes("disabled")||nt.className.includes("-leave")||se(at)};return nt.addEventListener("click",onClick,!0),()=>{nt.removeEventListener("click",onClick,!0)}}),[lt]),!Rt.isValidElement(at))return null!=at?at:null;const le=(0,jt.f3)(at)?(0,jt.K4)((0,jt.A9)(at),re):re;return(0,Kt.Ob)(at,{"ref":le})}},"3024":function(nt,at,lt){"use strict";const Rt=lt(758).createContext(void 0);at.A=Rt},"5410":function(nt,at,lt){"use strict";lt.d(at,{"Ay":function(){return Ki}});var Rt=lt(758),Bt=lt(7500),Lt=lt.n(Bt),Ht=lt(3549),jt=lt(15),$t=lt(6276),Kt=lt(6623),te=lt(7311),ne=lt(2853),re=lt(3151),ae=lt(3727),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const oe=Rt.createContext(void 0);var button_group=nt=>{const{"getPrefixCls":at,"direction":lt}=Rt.useContext(Kt.QO),{"prefixCls":Bt,"size":Ht,"className":jt}=nt,$t=__rest(nt,["prefixCls","size","className"]),te=at("btn-group",Bt),[,,ne]=(0,ae.Ay)(),re=Rt.useMemo((()=>{switch(Ht){case"large":return"lg";case"small":return"sm";default:return""}}),[Ht]);const se=Lt()(te,{[`${te}-${re}`]:re,[`${te}-rtl`]:"rtl"===lt},jt,ne);return Rt.createElement(oe.Provider,{"value":Ht},Rt.createElement("div",Object.assign({},$t,{"className":se})))},se=lt(3691),le=lt(2978),ue=lt(3606);const ce=/^[\u4E00-\u9FA5]{2}$/,he=ce.test.bind(ce);function isString(nt){return"string"==typeof nt}function isUnBorderedButtonVariant(nt){return"text"===nt||"link"===nt}function spaceChildren(nt,at){let lt=!1;const Bt=[];return Rt.Children.forEach(nt,(nt=>{const at=typeof nt,Rt="string"===at||"number"===at;if(lt&&Rt){const at=Bt.length-1,lt=Bt[at];Bt[at]=`${lt}${nt}`}else Bt.push(nt);lt=Rt})),Rt.Children.map(Bt,(nt=>function splitCNCharsBySpace(nt,at){if(null==nt)return;const lt=at?" ":"";return"string"!=typeof nt&&"number"!=typeof nt&&isString(nt.type)&&he(nt.props.children)?(0,le.Ob)(nt,{"children":nt.props.children.split("").join(lt)}):isString(nt)?he(nt)?Rt.createElement("span",null,nt.split("").join(lt)):Rt.createElement("span",null,nt):(0,le.zv)(nt)?Rt.createElement("span",null,nt):nt}(nt,at)))}["default","primary","danger"].concat((0,se.A)(ue.s));var de=lt(5200),fe=lt(3295);const pe=(0,Rt.forwardRef)(((nt,at)=>{const{"className":lt,"style":Bt,"children":Ht,"prefixCls":jt}=nt,$t=Lt()(`${jt}-icon`,lt);return Rt.createElement("span",{"ref":at,"className":$t,"style":Bt},Ht)}));var ve=pe;const Ae=(0,Rt.forwardRef)(((nt,at)=>{const{"prefixCls":lt,"className":Bt,"style":Ht,"iconClassName":jt}=nt,$t=Lt()(`${lt}-loading-icon`,Bt);return Rt.createElement(ve,{"prefixCls":lt,"className":$t,"style":Ht,"ref":at},Rt.createElement(de.A,{"className":jt}))})),getCollapsedWidth=()=>({"width":0,"opacity":0,"transform":"scale(0)"}),getRealWidth=nt=>({"width":nt.scrollWidth,"opacity":1,"transform":"scale(1)"});var button_DefaultLoadingIcon=nt=>{const{"prefixCls":at,"loading":lt,"existIcon":Bt,"className":Ht,"style":jt,"mount":$t}=nt,Kt=!!lt;return Bt?Rt.createElement(Ae,{"prefixCls":at,"className":Ht,"style":jt}):Rt.createElement(fe.Ay,{"visible":Kt,"motionName":`${at}-loading-icon-motion`,"motionAppear":!$t,"motionEnter":!$t,"motionLeave":!$t,"removeOnLeave":!0,"onAppearStart":getCollapsedWidth,"onAppearActive":getRealWidth,"onEnterStart":getCollapsedWidth,"onEnterActive":getRealWidth,"onLeaveStart":getRealWidth,"onLeaveActive":getCollapsedWidth},((nt,lt)=>{let{"className":Bt,"style":$t}=nt;const Kt=Object.assign(Object.assign({},jt),$t);return Rt.createElement(Ae,{"prefixCls":at,"className":Lt()(Ht,Bt),"style":Kt,"ref":lt})}))},we=lt(4336),Ce=lt(7209),je=lt(8615),Ne=lt(5926);const genButtonBorderStyle=(nt,at)=>({[`> span, > ${nt}`]:{"&:not(:last-child)":{[`&, & > ${nt}`]:{"&:not(:disabled)":{"borderInlineEndColor":at}}},"&:not(:first-child)":{[`&, & > ${nt}`]:{"&:not(:disabled)":{"borderInlineStartColor":at}}}}});var group=nt=>{const{"componentCls":at,"fontSize":lt,"lineWidth":Rt,"groupBorderColor":Bt,"colorErrorHover":Lt}=nt;return{[`${at}-group`]:[{"position":"relative","display":"inline-flex",[`> span, > ${at}`]:{"&:not(:last-child)":{[`&, & > ${at}`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},"&:not(:first-child)":{"marginInlineStart":nt.calc(Rt).mul(-1).equal(),[`&, & > ${at}`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}}},[at]:{"position":"relative","zIndex":1,"&:hover, &:focus, &:active":{"zIndex":2},"&[disabled]":{"zIndex":0}},[`${at}-icon-only`]:{"fontSize":lt}},genButtonBorderStyle(`${at}-primary`,Bt),genButtonBorderStyle(`${at}-danger`,Lt)]}},Ve=lt(6214),Ge=lt(7584),ti=lt(542),li=lt(8527),hi=lt(1950),di=lt(5985),fi=lt(8299),pi=lt(5779),vi=["b"],mi=["v"],_i=function getRoundNumber(nt){return Math.round(Number(nt||0))},bi=function(nt){(0,ti.A)(Color,nt);var at=(0,li.A)(Color);function Color(nt){return(0,Ve.A)(this,Color),at.call(this,function convertHsb2Hsv(nt){if(nt instanceof pi.Y)return nt;if(nt&&"object"===(0,fi.A)(nt)&&"h"in nt&&"b"in nt){var at=nt,lt=at.b,Rt=(0,di.A)(at,vi);return(0,hi.A)((0,hi.A)({},Rt),{},{"v":lt})}return"string"==typeof nt&&/hsb/.test(nt)?nt.replace(/hsb/,"hsv"):nt}(nt))}return(0,Ge.A)(Color,[{"key":"toHsbString","value":function toHsbString(){var nt=this.toHsb(),at=_i(100*nt.s),lt=_i(100*nt.b),Rt=_i(nt.h),Bt=nt.a,Lt="hsb(".concat(Rt,", ").concat(at,"%, ").concat(lt,"%)"),Ht="hsba(".concat(Rt,", ").concat(at,"%, ").concat(lt,"%, ").concat(Bt.toFixed(0===Bt?0:2),")");return 1===Bt?Lt:Ht}},{"key":"toHsb","value":function toHsb(){var nt=this.toHsv(),at=nt.v,lt=(0,di.A)(nt,mi);return(0,hi.A)((0,hi.A)({},lt),{},{"b":at,"a":this.a})}}]),Color}(pi.Y),Mi=function generateColor(nt){return nt instanceof bi?nt:new bi(nt)};Mi("#1677ff");lt(2110);let Ti=function(){return(0,Ge.A)((function AggregationColor(nt){var at;if((0,Ve.A)(this,AggregationColor),this.cleared=!1,nt instanceof AggregationColor)return this.metaColor=nt.metaColor.clone(),this.colors=null===(at=nt.colors)||void 0===at?void 0:at.map((nt=>({"color":new AggregationColor(nt.color),"percent":nt.percent}))),void(this.cleared=nt.cleared);const lt=Array.isArray(nt);lt&&nt.length?(this.colors=nt.map((nt=>{let{"color":at,"percent":lt}=nt;return{"color":new AggregationColor(at),"percent":lt}})),this.metaColor=new bi(this.colors[0].color.metaColor)):this.metaColor=new bi(lt?"":nt),(!nt||lt&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}),[{"key":"toHsb","value":function toHsb(){return this.metaColor.toHsb()}},{"key":"toHsbString","value":function toHsbString(){return this.metaColor.toHsbString()}},{"key":"toHex","value":function toHex(){return nt=this.toHexString(),at=this.metaColor.a<1,nt?((nt,at)=>(null==nt?void 0:nt.replace(/[^\w/]/g,"").slice(0,at?8:6))||"")(nt,at):"";var nt,at}},{"key":"toHexString","value":function toHexString(){return this.metaColor.toHexString()}},{"key":"toRgb","value":function toRgb(){return this.metaColor.toRgb()}},{"key":"toRgbString","value":function toRgbString(){return this.metaColor.toRgbString()}},{"key":"isGradient","value":function isGradient(){return!!this.colors&&!this.cleared}},{"key":"getColors","value":function getColors(){return this.colors||[{"color":this,"percent":0}]}},{"key":"toCssString","value":function toCssString(){const{"colors":nt}=this;if(nt){return`linear-gradient(90deg, ${nt.map((nt=>`${nt.color.toRgbString()} ${nt.percent}%`)).join(", ")})`}return this.metaColor.toRgbString()}},{"key":"equals","value":function equals(nt){return!(!nt||this.isGradient()!==nt.isGradient())&&(this.isGradient()?this.colors.length===nt.colors.length&&this.colors.every(((at,lt)=>{const Rt=nt.colors[lt];return at.percent===Rt.percent&&at.color.equals(Rt.color)})):this.toHexString()===nt.toHexString())}}])}();lt(8821);const isBright=(nt,at)=>{const{"r":lt,"g":Rt,"b":Bt,"a":Lt}=nt.toRgb(),Ht=new bi(nt.toRgbString()).onBackground(at).toHsv();return Lt<=.5?Ht.v>.5:.299*lt+.587*Rt+.114*Bt>192};var Ii=lt(4885),Bi=lt(797);const prepareToken=nt=>{const{"paddingInline":at,"onlyIconSize":lt}=nt;return(0,je.oX)(nt,{"buttonPaddingHorizontal":at,"buttonPaddingVertical":0,"buttonIconOnlyFontSize":lt})},prepareComponentToken=nt=>{var at,lt,Rt,Bt,Lt,Ht;const jt=null!==(at=nt.contentFontSize)&&void 0!==at?at:nt.fontSize,$t=null!==(lt=nt.contentFontSizeSM)&&void 0!==lt?lt:nt.fontSize,Kt=null!==(Rt=nt.contentFontSizeLG)&&void 0!==Rt?Rt:nt.fontSizeLG,te=null!==(Bt=nt.contentLineHeight)&&void 0!==Bt?Bt:(0,Ii.k)(jt),ne=null!==(Lt=nt.contentLineHeightSM)&&void 0!==Lt?Lt:(0,Ii.k)($t),re=null!==(Ht=nt.contentLineHeightLG)&&void 0!==Ht?Ht:(0,Ii.k)(Kt),ae=isBright(new Ti(nt.colorBgSolid),"#fff")?"#000":"#fff",oe=ue.s.reduce(((at,lt)=>Object.assign(Object.assign({},at),{[`${lt}ShadowColor`]:`0 ${(0,we.zA)(nt.controlOutlineWidth)} 0 ${(0,Bi.A)(nt[`${lt}1`],nt.colorBgContainer)}`})),{});return Object.assign(Object.assign({},oe),{"fontWeight":400,"defaultShadow":`0 ${nt.controlOutlineWidth}px 0 ${nt.controlTmpOutline}`,"primaryShadow":`0 ${nt.controlOutlineWidth}px 0 ${nt.controlOutline}`,"dangerShadow":`0 ${nt.controlOutlineWidth}px 0 ${nt.colorErrorOutline}`,"primaryColor":nt.colorTextLightSolid,"dangerColor":nt.colorTextLightSolid,"borderColorDisabled":nt.colorBorder,"defaultGhostColor":nt.colorBgContainer,"ghostBg":"transparent","defaultGhostBorderColor":nt.colorBgContainer,"paddingInline":nt.paddingContentHorizontal-nt.lineWidth,"paddingInlineLG":nt.paddingContentHorizontal-nt.lineWidth,"paddingInlineSM":8-nt.lineWidth,"onlyIconSize":"inherit","onlyIconSizeSM":"inherit","onlyIconSizeLG":"inherit","groupBorderColor":nt.colorPrimaryHover,"linkHoverBg":"transparent","textTextColor":nt.colorText,"textTextHoverColor":nt.colorText,"textTextActiveColor":nt.colorText,"textHoverBg":nt.colorFillTertiary,"defaultColor":nt.colorText,"defaultBg":nt.colorBgContainer,"defaultBorderColor":nt.colorBorder,"defaultBorderColorDisabled":nt.colorBorder,"defaultHoverBg":nt.colorBgContainer,"defaultHoverColor":nt.colorPrimaryHover,"defaultHoverBorderColor":nt.colorPrimaryHover,"defaultActiveBg":nt.colorBgContainer,"defaultActiveColor":nt.colorPrimaryActive,"defaultActiveBorderColor":nt.colorPrimaryActive,"solidTextColor":ae,"contentFontSize":jt,"contentFontSizeSM":$t,"contentFontSizeLG":Kt,"contentLineHeight":te,"contentLineHeightSM":ne,"contentLineHeightLG":re,"paddingBlock":Math.max((nt.controlHeight-jt*te)/2-nt.lineWidth,0),"paddingBlockSM":Math.max((nt.controlHeightSM-$t*ne)/2-nt.lineWidth,0),"paddingBlockLG":Math.max((nt.controlHeightLG-Kt*re)/2-nt.lineWidth,0)})},genSharedButtonStyle=nt=>{const{"componentCls":at,"iconCls":lt,"fontWeight":Rt,"opacityLoading":Bt,"motionDurationSlow":Lt,"motionEaseInOut":Ht,"marginXS":jt,"calc":$t}=nt;return{[at]:{"outline":"none","position":"relative","display":"inline-flex","gap":nt.marginXS,"alignItems":"center","justifyContent":"center","fontWeight":Rt,"whiteSpace":"nowrap","textAlign":"center","backgroundImage":"none","background":"transparent","border":`${(0,we.zA)(nt.lineWidth)} ${nt.lineType} transparent`,"cursor":"pointer","transition":`all ${nt.motionDurationMid} ${nt.motionEaseInOut}`,"userSelect":"none","touchAction":"manipulation","color":nt.colorText,"&:disabled > *":{"pointerEvents":"none"},[`${at}-icon > svg`]:(0,Ce.Nk)(),"> a":{"color":"currentColor"},"&:not(:disabled)":(0,Ce.K8)(nt),[`&${at}-two-chinese-chars::first-letter`]:{"letterSpacing":"0.34em"},[`&${at}-two-chinese-chars > *:not(${lt})`]:{"marginInlineEnd":"-0.34em","letterSpacing":"0.34em"},[`&${at}-icon-only`]:{"paddingInline":0,[`&${at}-compact-item`]:{"flex":"none"},[`&${at}-round`]:{"width":"auto"}},[`&${at}-loading`]:{"opacity":Bt,"cursor":"default"},[`${at}-loading-icon`]:{"transition":["width","opacity","margin"].map((nt=>`${nt} ${Lt} ${Ht}`)).join(",")},[`&:not(${at}-icon-end)`]:{[`${at}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{"marginInlineEnd":$t(jt).mul(-1).equal()},"&-appear-active, &-enter-active":{"marginInlineEnd":0},"&-leave-start":{"marginInlineEnd":0},"&-leave-active":{"marginInlineEnd":$t(jt).mul(-1).equal()}}},"&-icon-end":{"flexDirection":"row-reverse",[`${at}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{"marginInlineStart":$t(jt).mul(-1).equal()},"&-appear-active, &-enter-active":{"marginInlineStart":0},"&-leave-start":{"marginInlineStart":0},"&-leave-active":{"marginInlineStart":$t(jt).mul(-1).equal()}}}}}},genHoverActiveButtonStyle=(nt,at,lt)=>({[`&:not(:disabled):not(${nt}-disabled)`]:{"&:hover":at,"&:active":lt}}),genCircleButtonStyle=nt=>({"minWidth":nt.controlHeight,"paddingInlineStart":0,"paddingInlineEnd":0,"borderRadius":"50%"}),genRoundButtonStyle=nt=>({"borderRadius":nt.controlHeight,"paddingInlineStart":nt.calc(nt.controlHeight).div(2).equal(),"paddingInlineEnd":nt.calc(nt.controlHeight).div(2).equal()}),genDisabledStyle=nt=>({"cursor":"not-allowed","borderColor":nt.borderColorDisabled,"color":nt.colorTextDisabled,"background":nt.colorBgContainerDisabled,"boxShadow":"none"}),genGhostButtonStyle=(nt,at,lt,Rt,Bt,Lt,Ht,jt)=>({[`&${nt}-background-ghost`]:Object.assign(Object.assign({"color":lt||void 0,"background":at,"borderColor":Rt||void 0,"boxShadow":"none"},genHoverActiveButtonStyle(nt,Object.assign({"background":at},Ht),Object.assign({"background":at},jt))),{"&:disabled":{"cursor":"not-allowed","color":Bt||void 0,"borderColor":Lt||void 0}})}),genSolidDisabledButtonStyle=nt=>({[`&:disabled, &${nt.componentCls}-disabled`]:Object.assign({},genDisabledStyle(nt))}),genPureDisabledButtonStyle=nt=>({[`&:disabled, &${nt.componentCls}-disabled`]:{"cursor":"not-allowed","color":nt.colorTextDisabled}}),genVariantButtonStyle=(nt,at,lt,Rt)=>{const Bt=Rt&&["link","text"].includes(Rt)?genPureDisabledButtonStyle:genSolidDisabledButtonStyle;return Object.assign(Object.assign({},Bt(nt)),genHoverActiveButtonStyle(nt.componentCls,at,lt))},genSolidButtonStyle=(nt,at,lt,Rt,Bt)=>({[`&${nt.componentCls}-variant-solid`]:Object.assign({"color":at,"background":lt},genVariantButtonStyle(nt,Rt,Bt))}),genOutlinedDashedButtonStyle=(nt,at,lt,Rt,Bt)=>({[`&${nt.componentCls}-variant-outlined, &${nt.componentCls}-variant-dashed`]:Object.assign({"borderColor":at,"background":lt},genVariantButtonStyle(nt,Rt,Bt))}),genDashedButtonStyle=nt=>({[`&${nt.componentCls}-variant-dashed`]:{"borderStyle":"dashed"}}),genFilledButtonStyle=(nt,at,lt,Rt)=>({[`&${nt.componentCls}-variant-filled`]:Object.assign({"boxShadow":"none","background":at},genVariantButtonStyle(nt,lt,Rt))}),genTextLinkButtonStyle=(nt,at,lt,Rt,Bt)=>({[`&${nt.componentCls}-variant-${lt}`]:Object.assign({"color":at,"boxShadow":"none"},genVariantButtonStyle(nt,Rt,Bt,lt))}),genDefaultButtonStyle=nt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"color":nt.defaultColor,"boxShadow":nt.defaultShadow},genSolidButtonStyle(nt,nt.solidTextColor,nt.colorBgSolid,{"color":nt.solidTextColor,"background":nt.colorBgSolidHover},{"color":nt.solidTextColor,"background":nt.colorBgSolidActive})),genDashedButtonStyle(nt)),genFilledButtonStyle(nt,nt.colorFillTertiary,{"background":nt.colorFillSecondary},{"background":nt.colorFill})),genGhostButtonStyle(nt.componentCls,nt.ghostBg,nt.defaultGhostColor,nt.defaultGhostBorderColor,nt.colorTextDisabled,nt.colorBorder)),genTextLinkButtonStyle(nt,nt.textTextColor,"link",{"color":nt.colorLinkHover,"background":nt.linkHoverBg},{"color":nt.colorLinkActive})),genPrimaryButtonStyle=nt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"color":nt.colorPrimary,"boxShadow":nt.primaryShadow},genOutlinedDashedButtonStyle(nt,nt.colorPrimary,nt.colorBgContainer,{"color":nt.colorPrimaryTextHover,"borderColor":nt.colorPrimaryHover,"background":nt.colorBgContainer},{"color":nt.colorPrimaryTextActive,"borderColor":nt.colorPrimaryActive,"background":nt.colorBgContainer})),genDashedButtonStyle(nt)),genFilledButtonStyle(nt,nt.colorPrimaryBg,{"background":nt.colorPrimaryBgHover},{"background":nt.colorPrimaryBorder})),genTextLinkButtonStyle(nt,nt.colorPrimaryText,"text",{"color":nt.colorPrimaryTextHover,"background":nt.colorPrimaryBg},{"color":nt.colorPrimaryTextActive,"background":nt.colorPrimaryBorder})),genTextLinkButtonStyle(nt,nt.colorPrimaryText,"link",{"color":nt.colorPrimaryTextHover,"background":nt.linkHoverBg},{"color":nt.colorPrimaryTextActive})),genGhostButtonStyle(nt.componentCls,nt.ghostBg,nt.colorPrimary,nt.colorPrimary,nt.colorTextDisabled,nt.colorBorder,{"color":nt.colorPrimaryHover,"borderColor":nt.colorPrimaryHover},{"color":nt.colorPrimaryActive,"borderColor":nt.colorPrimaryActive})),genDangerousStyle=nt=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"color":nt.colorError,"boxShadow":nt.dangerShadow},genSolidButtonStyle(nt,nt.dangerColor,nt.colorError,{"background":nt.colorErrorHover},{"background":nt.colorErrorActive})),genOutlinedDashedButtonStyle(nt,nt.colorError,nt.colorBgContainer,{"color":nt.colorErrorHover,"borderColor":nt.colorErrorBorderHover},{"color":nt.colorErrorActive,"borderColor":nt.colorErrorActive})),genDashedButtonStyle(nt)),genFilledButtonStyle(nt,nt.colorErrorBg,{"background":nt.colorErrorBgFilledHover},{"background":nt.colorErrorBgActive})),genTextLinkButtonStyle(nt,nt.colorError,"text",{"color":nt.colorErrorHover,"background":nt.colorErrorBg},{"color":nt.colorErrorHover,"background":nt.colorErrorBgActive})),genTextLinkButtonStyle(nt,nt.colorError,"link",{"color":nt.colorErrorHover},{"color":nt.colorErrorActive})),genGhostButtonStyle(nt.componentCls,nt.ghostBg,nt.colorError,nt.colorError,nt.colorTextDisabled,nt.colorBorder,{"color":nt.colorErrorHover,"borderColor":nt.colorErrorHover},{"color":nt.colorErrorActive,"borderColor":nt.colorErrorActive})),genLinkStyle=nt=>Object.assign(Object.assign({},genTextLinkButtonStyle(nt,nt.colorLink,"link",{"color":nt.colorLinkHover},{"color":nt.colorLinkActive})),genGhostButtonStyle(nt.componentCls,nt.ghostBg,nt.colorInfo,nt.colorInfo,nt.colorTextDisabled,nt.colorBorder,{"color":nt.colorInfoHover,"borderColor":nt.colorInfoHover},{"color":nt.colorInfoActive,"borderColor":nt.colorInfoActive})),genColorButtonStyle=nt=>{const{"componentCls":at}=nt;return Object.assign({[`${at}-color-default`]:genDefaultButtonStyle(nt),[`${at}-color-primary`]:genPrimaryButtonStyle(nt),[`${at}-color-dangerous`]:genDangerousStyle(nt),[`${at}-color-link`]:genLinkStyle(nt)},(nt=>{const{"componentCls":at}=nt;return ue.s.reduce(((lt,Rt)=>{const Bt=nt[`${Rt}6`],Lt=nt[`${Rt}1`],Ht=nt[`${Rt}5`],jt=nt[`${Rt}2`],$t=nt[`${Rt}3`],Kt=nt[`${Rt}7`];return Object.assign(Object.assign({},lt),{[`&${at}-color-${Rt}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"color":Bt,"boxShadow":nt[`${Rt}ShadowColor`]},genSolidButtonStyle(nt,nt.colorTextLightSolid,Bt,{"background":Ht},{"background":Kt})),genOutlinedDashedButtonStyle(nt,Bt,nt.colorBgContainer,{"color":Ht,"borderColor":Ht,"background":nt.colorBgContainer},{"color":Kt,"borderColor":Kt,"background":nt.colorBgContainer})),genDashedButtonStyle(nt)),genFilledButtonStyle(nt,Lt,{"background":jt},{"background":$t})),genTextLinkButtonStyle(nt,Bt,"link",{"color":Ht},{"color":Kt})),genTextLinkButtonStyle(nt,Bt,"text",{"color":Ht,"background":Lt},{"color":Kt,"background":$t}))})}),{})})(nt))},genCompatibleButtonStyle=nt=>Object.assign(Object.assign(Object.assign(Object.assign({},genOutlinedDashedButtonStyle(nt,nt.defaultBorderColor,nt.defaultBg,{"color":nt.defaultHoverColor,"borderColor":nt.defaultHoverBorderColor,"background":nt.defaultHoverBg},{"color":nt.defaultActiveColor,"borderColor":nt.defaultActiveBorderColor,"background":nt.defaultActiveBg})),genTextLinkButtonStyle(nt,nt.textTextColor,"text",{"color":nt.textTextHoverColor,"background":nt.textHoverBg},{"color":nt.textTextActiveColor,"background":nt.colorBgTextActive})),genSolidButtonStyle(nt,nt.primaryColor,nt.colorPrimary,{"background":nt.colorPrimaryHover,"color":nt.primaryColor},{"background":nt.colorPrimaryActive,"color":nt.primaryColor})),genTextLinkButtonStyle(nt,nt.colorLink,"link",{"color":nt.colorLinkHover,"background":nt.linkHoverBg},{"color":nt.colorLinkActive})),genButtonStyle=function(nt){let at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{"componentCls":lt,"controlHeight":Rt,"fontSize":Bt,"borderRadius":Lt,"buttonPaddingHorizontal":Ht,"iconCls":jt,"buttonPaddingVertical":$t,"buttonIconOnlyFontSize":Kt}=nt;return[{[at]:{"fontSize":Bt,"height":Rt,"padding":`${(0,we.zA)($t)} ${(0,we.zA)(Ht)}`,"borderRadius":Lt,[`&${lt}-icon-only`]:{"width":Rt,[jt]:{"fontSize":Kt}}}},{[`${lt}${lt}-circle${at}`]:genCircleButtonStyle(nt)},{[`${lt}${lt}-round${at}`]:genRoundButtonStyle(nt)}]},genSizeBaseButtonStyle=nt=>{const at=(0,je.oX)(nt,{"fontSize":nt.contentFontSize});return genButtonStyle(at,nt.componentCls)},genSizeSmallButtonStyle=nt=>{const at=(0,je.oX)(nt,{"controlHeight":nt.controlHeightSM,"fontSize":nt.contentFontSizeSM,"padding":nt.paddingXS,"buttonPaddingHorizontal":nt.paddingInlineSM,"buttonPaddingVertical":0,"borderRadius":nt.borderRadiusSM,"buttonIconOnlyFontSize":nt.onlyIconSizeSM});return genButtonStyle(at,`${nt.componentCls}-sm`)},genSizeLargeButtonStyle=nt=>{const at=(0,je.oX)(nt,{"controlHeight":nt.controlHeightLG,"fontSize":nt.contentFontSizeLG,"buttonPaddingHorizontal":nt.paddingInlineLG,"buttonPaddingVertical":0,"borderRadius":nt.borderRadiusLG,"buttonIconOnlyFontSize":nt.onlyIconSizeLG});return genButtonStyle(at,`${nt.componentCls}-lg`)},genBlockButtonStyle=nt=>{const{"componentCls":at}=nt;return{[at]:{[`&${at}-block`]:{"width":"100%"}}}};var zi=(0,Ne.OF)("Button",(nt=>{const at=prepareToken(nt);return[genSharedButtonStyle(at),genSizeBaseButtonStyle(at),genSizeSmallButtonStyle(at),genSizeLargeButtonStyle(at),genBlockButtonStyle(at),genColorButtonStyle(at),genCompatibleButtonStyle(at),group(at)]}),prepareComponentToken,{"unitless":{"fontWeight":!0,"contentLineHeight":!0,"contentLineHeightSM":!0,"contentLineHeightLG":!0}}),Wi=lt(8686);function compactItemVerticalBorder(nt,at){return{[`&-item:not(${at}-last-item)`]:{"marginBottom":nt.calc(nt.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{"zIndex":2},"&[disabled]":{"zIndex":0}}}}function genCompactItemVerticalStyle(nt){const at=`${nt.componentCls}-compact-vertical`;return{[at]:Object.assign(Object.assign({},compactItemVerticalBorder(nt,at)),(lt=nt.componentCls,Rt=at,{[`&-item:not(${Rt}-first-item):not(${Rt}-last-item)`]:{"borderRadius":0},[`&-item${Rt}-first-item:not(${Rt}-last-item)`]:{[`&, &${lt}-sm, &${lt}-lg`]:{"borderEndEndRadius":0,"borderEndStartRadius":0}},[`&-item${Rt}-last-item:not(${Rt}-first-item)`]:{[`&, &${lt}-sm, &${lt}-lg`]:{"borderStartStartRadius":0,"borderStartEndRadius":0}}}))};var lt,Rt}const genButtonCompactStyle=nt=>{const{"componentCls":at,"colorPrimaryHover":lt,"lineWidth":Rt,"calc":Bt}=nt,Lt=Bt(Rt).mul(-1).equal(),getCompactBorderStyle=nt=>{const Bt=`${at}-compact${nt?"-vertical":""}-item${at}-primary:not([disabled])`;return{[`${Bt} + ${Bt}::before`]:{"position":"absolute","top":nt?Lt:0,"insetInlineStart":nt?0:Lt,"backgroundColor":lt,"content":'""',"width":nt?"100%":Rt,"height":nt?Rt:"100%"}}};return Object.assign(Object.assign({},getCompactBorderStyle()),getCompactBorderStyle(!0))};var Ui=(0,Ne.bf)(["Button","compact"],(nt=>{const at=prepareToken(nt);return[(0,Wi.G)(at),genCompactItemVerticalStyle(at),genButtonCompactStyle(at)]}),prepareComponentToken),button_rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const $i={"default":["default","outlined"],"primary":["primary","solid"],"dashed":["default","dashed"],"link":["link","link"],"text":["default","text"]},qi=Rt.forwardRef(((nt,at)=>{var lt,Bt;const{"loading":ae=!1,"prefixCls":se,"color":le,"variant":ue,"type":ce,"danger":de=!1,"shape":fe="default","size":pe,"styles":Ae,"disabled":we,"className":Ce,"rootClassName":je,"children":Ne,"icon":Ve,"iconPosition":Ge="start","ghost":ti=!1,"block":li=!1,"htmlType":hi="button","classNames":di,"style":fi={},"autoInsertSpace":pi,"autoFocus":vi}=nt,mi=button_rest(nt,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),_i=ce||"default",[bi,Mi]=(0,Rt.useMemo)((()=>{if(le&&ue)return[le,ue];const nt=$i[_i]||[];return de?["danger",nt[1]]:nt}),[ce,le,ue,de]),Ti="danger"===bi?"dangerous":bi,{"getPrefixCls":Ii,"direction":Bi,"autoInsertSpace":Wi,"className":qi,"style":Ki,"classNames":Qi,"styles":Ji}=(0,Kt.TP)("button"),dn=null===(lt=null!=pi?pi:Wi)||void 0===lt||lt,fn=Ii("btn",se),[vn,gn,yn]=zi(fn),mn=(0,Rt.useContext)(te.A),_n=null!=we?we:mn,bn=(0,Rt.useContext)(oe),xn=(0,Rt.useMemo)((()=>function getLoadingConfig(nt){if("object"==typeof nt&&nt){let at=null==nt?void 0:nt.delay;return at=Number.isNaN(at)||"number"!=typeof at?0:at,{"loading":at<=0,"delay":at}}return{"loading":!!nt,"delay":0}}(ae)),[ae]),[kn,Sn]=(0,Rt.useState)(xn.loading),[An,wn]=(0,Rt.useState)(!1),Cn=(0,Rt.useRef)(null),Mn=(0,jt.xK)(at,Cn),Tn=1===Rt.Children.count(Ne)&&!Ve&&!isUnBorderedButtonVariant(Mi),En=(0,Rt.useRef)(!0);Rt.useEffect((()=>(En.current=!1,()=>{En.current=!0})),[]),(0,Rt.useEffect)((()=>{let nt=null;return xn.delay>0?nt=setTimeout((()=>{nt=null,Sn(!0)}),xn.delay):Sn(xn.loading),function cleanupTimer(){nt&&(clearTimeout(nt),nt=null)}}),[xn]),(0,Rt.useEffect)((()=>{if(!Cn.current||!dn)return;const nt=Cn.current.textContent||"";Tn&&he(nt)?An||wn(!0):An&&wn(!1)})),(0,Rt.useEffect)((()=>{vi&&Cn.current&&Cn.current.focus()}),[]);const Pn=Rt.useCallback((at=>{var lt;kn||_n?at.preventDefault():null===(lt=nt.onClick)||void 0===lt||lt.call(nt,at)}),[nt.onClick,kn,_n]);const{"compactSize":Rn,"compactItemClassnames":On}=(0,re.RQ)(fn,Bi),Fn={"large":"lg","small":"sm","middle":void 0},or=(0,ne.A)((nt=>{var at,lt;return null!==(lt=null!==(at=null!=pe?pe:Rn)&&void 0!==at?at:bn)&&void 0!==lt?lt:nt})),sr=or&&null!==(Bt=Fn[or])&&void 0!==Bt?Bt:"",lr=kn?"loading":Ve,vr=(0,Ht.A)(mi,["navigate"]),yr=Lt()(fn,gn,yn,{[`${fn}-${fe}`]:"default"!==fe&&fe,[`${fn}-${_i}`]:_i,[`${fn}-dangerous`]:de,[`${fn}-color-${Ti}`]:Ti,[`${fn}-variant-${Mi}`]:Mi,[`${fn}-${sr}`]:sr,[`${fn}-icon-only`]:!Ne&&0!==Ne&&!!lr,[`${fn}-background-ghost`]:ti&&!isUnBorderedButtonVariant(Mi),[`${fn}-loading`]:kn,[`${fn}-two-chinese-chars`]:An&&dn&&!kn,[`${fn}-block`]:li,[`${fn}-rtl`]:"rtl"===Bi,[`${fn}-icon-end`]:"end"===Ge},On,Ce,je,qi),mr=Object.assign(Object.assign({},Ki),fi),xr=Lt()(null==di?void 0:di.icon,Qi.icon),kr=Object.assign(Object.assign({},(null==Ae?void 0:Ae.icon)||{}),Ji.icon||{}),Sr=Ve&&!kn?Rt.createElement(ve,{"prefixCls":fn,"className":xr,"style":kr},Ve):ae&&"object"==typeof ae&&ae.icon?Rt.createElement(ve,{"prefixCls":fn,"className":xr,"style":kr},ae.icon):Rt.createElement(button_DefaultLoadingIcon,{"existIcon":!!Ve,"prefixCls":fn,"loading":kn,"mount":En.current}),Ar=Ne||0===Ne?spaceChildren(Ne,Tn&&dn):null;if(void 0!==vr.href)return vn(Rt.createElement("a",Object.assign({},vr,{"className":Lt()(yr,{[`${fn}-disabled`]:_n}),"href":_n?void 0:vr.href,"style":mr,"onClick":Pn,"ref":Mn,"tabIndex":_n?-1:0}),Sr,Ar));let wr=Rt.createElement("button",Object.assign({},mi,{"type":hi,"className":yr,"style":mr,"onClick":Pn,"disabled":_n,"ref":Mn}),Sr,Ar,On&&Rt.createElement(Ui,{"prefixCls":fn}));return isUnBorderedButtonVariant(Mi)||(wr=Rt.createElement($t.A,{"component":"Button","disabled":kn},wr)),vn(wr)}));qi.Group=button_group,qi.__ANT_BUTTON=!0;var Ki=qi},"7311":function(nt,at,lt){"use strict";lt.d(at,{"X":function(){return DisabledContextProvider}});var Rt=lt(758);const Bt=Rt.createContext(!1),DisabledContextProvider=nt=>{let{"children":at,"disabled":lt}=nt;const Lt=Rt.useContext(Bt);return Rt.createElement(Bt.Provider,{"value":null!=lt?lt:Lt},at)};at.A=Bt},"2328":function(nt,at,lt){"use strict";lt.d(at,{"c":function(){return SizeContextProvider}});var Rt=lt(758);const Bt=Rt.createContext(void 0),SizeContextProvider=nt=>{let{"children":at,"size":lt}=nt;const Lt=Rt.useContext(Bt);return Rt.createElement(Bt.Provider,{"value":lt||Lt},at)};at.A=Bt},"6623":function(nt,at,lt){"use strict";lt.d(at,{"QO":function(){return jt},"TP":function(){return useComponentConfig},"lJ":function(){return Ht},"pM":function(){return Lt},"yH":function(){return Bt}});var Rt=lt(758);const Bt="ant",Lt="anticon",Ht=["outlined","borderless","filled","underlined"],jt=Rt.createContext({"getPrefixCls":(nt,at)=>at||(nt?`${Bt}-${nt}`:Bt),"iconPrefixCls":Lt}),{"Consumer":$t}=jt,Kt={};function useComponentConfig(nt){const at=Rt.useContext(jt),{"getPrefixCls":lt,"direction":Bt,"getPopupContainer":Lt}=at,Ht=at[nt];return Object.assign(Object.assign({"classNames":Kt,"styles":Kt},Ht),{"getPrefixCls":lt,"direction":Bt,"getPopupContainer":Lt})}},"3742":function(nt,at,lt){"use strict";var Rt=lt(3727);at.A=nt=>{const[,,,,at]=(0,Rt.Ay)();return at?`${nt}-css-var`:""}},"2853":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(2328);at.A=nt=>{const at=Rt.useContext(Bt.A);return Rt.useMemo((()=>nt?"string"==typeof nt?null!=nt?nt:at:nt instanceof Function?nt(at):at:at),[nt,at])}},"1866":function(nt,at,lt){"use strict";lt.d(at,{"Ay":function(){return _i}});var Rt=lt(758),Bt=lt.t(Rt,2),Lt=lt(4336),Ht=lt(7929),jt=lt(3400),$t=lt(24),Kt=lt(8325),te=lt(5447),ne=lt(4704);let re=Object.assign({},ne.A.Modal),ae=[];const generateLocale=()=>ae.reduce(((nt,at)=>Object.assign(Object.assign({},nt),at)),ne.A.Modal);var oe=lt(8885);var es_locale=nt=>{const{"locale":at={},"children":lt,"_ANT_MARK__":Bt}=nt;Rt.useEffect((()=>{const nt=function changeConfirmLocale(nt){if(nt){const at=Object.assign({},nt);return ae.push(at),re=generateLocale(),()=>{ae=ae.filter((nt=>nt!==at)),re=generateLocale()}}re=Object.assign({},ne.A.Modal)}(null==at?void 0:at.Modal);return nt}),[at]);const Lt=Rt.useMemo((()=>Object.assign(Object.assign({},at),{"exist":!0})),[at]);return Rt.createElement(oe.A.Provider,{"value":Lt},lt)},se=lt(3257),le=lt(1414),ue=lt(9563),ce=lt(6623),he=lt(8264),de=lt(5779),fe=lt(9942),pe=lt(3144);const ve=`-ant-${Date.now()}-${Math.random()}`;function registerTheme(nt,at){const lt=function getStyle(nt,at){const lt={},formatColor=(nt,at)=>{let lt=nt.clone();return lt=(null==at?void 0:at(lt))||lt,lt.toRgbString()},fillColor=(nt,at)=>{const Rt=new de.Y(nt),Bt=(0,he.cM)(Rt.toRgbString());lt[`${at}-color`]=formatColor(Rt),lt[`${at}-color-disabled`]=Bt[1],lt[`${at}-color-hover`]=Bt[4],lt[`${at}-color-active`]=Bt[6],lt[`${at}-color-outline`]=Rt.clone().setA(.2).toRgbString(),lt[`${at}-color-deprecated-bg`]=Bt[0],lt[`${at}-color-deprecated-border`]=Bt[2]};if(at.primaryColor){fillColor(at.primaryColor,"primary");const nt=new de.Y(at.primaryColor),Rt=(0,he.cM)(nt.toRgbString());Rt.forEach(((nt,at)=>{lt[`primary-${at+1}`]=nt})),lt["primary-color-deprecated-l-35"]=formatColor(nt,(nt=>nt.lighten(35))),lt["primary-color-deprecated-l-20"]=formatColor(nt,(nt=>nt.lighten(20))),lt["primary-color-deprecated-t-20"]=formatColor(nt,(nt=>nt.tint(20))),lt["primary-color-deprecated-t-50"]=formatColor(nt,(nt=>nt.tint(50))),lt["primary-color-deprecated-f-12"]=formatColor(nt,(nt=>nt.setA(.12*nt.a)));const Bt=new de.Y(Rt[0]);lt["primary-color-active-deprecated-f-30"]=formatColor(Bt,(nt=>nt.setA(.3*nt.a))),lt["primary-color-active-deprecated-d-02"]=formatColor(Bt,(nt=>nt.darken(2)))}return at.successColor&&fillColor(at.successColor,"success"),at.warningColor&&fillColor(at.warningColor,"warning"),at.errorColor&&fillColor(at.errorColor,"error"),at.infoColor&&fillColor(at.infoColor,"info"),`\n  :root {\n    ${Object.keys(lt).map((at=>`--${nt}-${at}: ${lt[at]};`)).join("\n")}\n  }\n  `.trim()}(nt,at);(0,fe.A)()&&(0,pe.BD)(lt,`${ve}-dynamic-theme`)}var Ae=lt(7311),we=lt(2328);var Ce=function useConfig(){return{"componentDisabled":(0,Rt.useContext)(Ae.A),"componentSize":(0,Rt.useContext)(we.A)}},je=lt(6378);const Ne=Object.assign({},Bt),{"useId":Ve}=Ne;var Ge=void 0===Ve?()=>"":Ve;var ti=lt(3295),li=lt(3727);function MotionWrapper(nt){const{"children":at}=nt,[,lt]=(0,li.Ay)(),{"motion":Bt}=lt,Lt=Rt.useRef(!1);return Lt.current=Lt.current||!1===Bt,Lt.current?Rt.createElement(ti.Kq,{"motion":Bt},at):at}var config_provider_PropWarning=()=>null,hi=lt(7209);var util_useResetIconStyle=(nt,at)=>{const[lt,Rt]=(0,li.Ay)();return(0,Lt.IV)({"theme":lt,"token":Rt,"hashId":"","path":["ant-design-icons",nt],"nonce":()=>null==at?void 0:at.nonce,"layer":{"name":"antd"}},(()=>[(0,hi.jz)(nt)]))},__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const di=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let fi,pi,vi,mi;function getGlobalPrefixCls(){return fi||ce.yH}const ProviderChildren=nt=>{const{"children":at,"csp":lt,"autoInsertSpaceInButton":Bt,"alert":re,"anchor":ae,"form":oe,"locale":he,"componentSize":de,"direction":fe,"space":pe,"splitter":ve,"virtual":Ce,"dropdownMatchSelectWidth":Ne,"popupMatchSelectWidth":Ve,"popupOverflow":ti,"legacyLocale":li,"parentContext":hi,"iconPrefixCls":fi,"theme":pi,"componentDisabled":vi,"segmented":mi,"statistic":_i,"spin":bi,"calendar":Mi,"carousel":Ti,"cascader":Ii,"collapse":Bi,"typography":zi,"checkbox":Wi,"descriptions":Ui,"divider":$i,"drawer":qi,"skeleton":Ki,"steps":Qi,"image":Ji,"layout":dn,"list":fn,"mentions":vn,"modal":gn,"progress":yn,"result":mn,"slider":_n,"breadcrumb":bn,"menu":xn,"pagination":kn,"input":Sn,"textArea":An,"empty":wn,"badge":Cn,"radio":Mn,"rate":Tn,"switch":En,"transfer":Pn,"avatar":Rn,"message":On,"tag":Fn,"table":or,"card":sr,"tabs":lr,"timeline":vr,"timePicker":yr,"upload":mr,"notification":xr,"tree":kr,"colorPicker":Sr,"datePicker":Ar,"rangePicker":wr,"flex":Mr,"wave":Tr,"dropdown":Ir,"warning":Br,"tour":Or,"tooltip":Dr,"popover":Lr,"popconfirm":Fr,"floatButtonGroup":zr,"variant":Hr,"inputNumber":jr,"treeSelect":Nr}=nt,Vr=Rt.useCallback(((at,lt)=>{const{"prefixCls":Rt}=nt;if(lt)return lt;const Bt=Rt||hi.getPrefixCls("");return at?`${Bt}-${at}`:Bt}),[hi.getPrefixCls,nt.prefixCls]),Wr=fi||hi.iconPrefixCls||ce.pM,Gr=lt||hi.csp;util_useResetIconStyle(Wr,Gr);const Ur=function useTheme(nt,at,lt){var Rt;(0,Kt.rJ)("ConfigProvider");const Bt=nt||{},Lt=!1!==Bt.inherit&&at?at:Object.assign(Object.assign({},le.sb),{"hashed":null!==(Rt=null==at?void 0:at.hashed)&&void 0!==Rt?Rt:le.sb.hashed,"cssVar":null==at?void 0:at.cssVar}),Ht=Ge();return(0,jt.A)((()=>{var Rt,jt;if(!nt)return at;const $t=Object.assign({},Lt.components);Object.keys(nt.components||{}).forEach((at=>{$t[at]=Object.assign(Object.assign({},$t[at]),nt.components[at])}));const Kt=`css-var-${Ht.replace(/:/g,"")}`,te=(null!==(Rt=Bt.cssVar)&&void 0!==Rt?Rt:Lt.cssVar)&&Object.assign(Object.assign(Object.assign({"prefix":null==lt?void 0:lt.prefixCls},"object"==typeof Lt.cssVar?Lt.cssVar:{}),"object"==typeof Bt.cssVar?Bt.cssVar:{}),{"key":"object"==typeof Bt.cssVar&&(null===(jt=Bt.cssVar)||void 0===jt?void 0:jt.key)||Kt});return Object.assign(Object.assign(Object.assign({},Lt),Bt),{"token":Object.assign(Object.assign({},Lt.token),Bt.token),"components":$t,"cssVar":te})}),[Bt,Lt],((nt,at)=>nt.some(((nt,lt)=>{const Rt=at[lt];return!(0,je.A)(nt,Rt,!0)}))))}(pi,hi.theme,{"prefixCls":Vr("")});const Yr={"csp":Gr,"autoInsertSpaceInButton":Bt,"alert":re,"anchor":ae,"locale":he||li,"direction":fe,"space":pe,"splitter":ve,"virtual":Ce,"popupMatchSelectWidth":null!=Ve?Ve:Ne,"popupOverflow":ti,"getPrefixCls":Vr,"iconPrefixCls":Wr,"theme":Ur,"segmented":mi,"statistic":_i,"spin":bi,"calendar":Mi,"carousel":Ti,"cascader":Ii,"collapse":Bi,"typography":zi,"checkbox":Wi,"descriptions":Ui,"divider":$i,"drawer":qi,"skeleton":Ki,"steps":Qi,"image":Ji,"input":Sn,"textArea":An,"layout":dn,"list":fn,"mentions":vn,"modal":gn,"progress":yn,"result":mn,"slider":_n,"breadcrumb":bn,"menu":xn,"pagination":kn,"empty":wn,"badge":Cn,"radio":Mn,"rate":Tn,"switch":En,"transfer":Pn,"avatar":Rn,"message":On,"tag":Fn,"table":or,"card":sr,"tabs":lr,"timeline":vr,"timePicker":yr,"upload":mr,"notification":xr,"tree":kr,"colorPicker":Sr,"datePicker":Ar,"rangePicker":wr,"flex":Mr,"wave":Tr,"dropdown":Ir,"warning":Br,"tour":Or,"tooltip":Dr,"popover":Lr,"popconfirm":Fr,"floatButtonGroup":zr,"variant":Hr,"inputNumber":jr,"treeSelect":Nr};const Xr=Object.assign({},hi);Object.keys(Yr).forEach((nt=>{void 0!==Yr[nt]&&(Xr[nt]=Yr[nt])})),di.forEach((at=>{const lt=nt[at];lt&&(Xr[at]=lt)})),void 0!==Bt&&(Xr.button=Object.assign({"autoInsertSpace":Bt},Xr.button));const qr=(0,jt.A)((()=>Xr),Xr,((nt,at)=>{const lt=Object.keys(nt),Rt=Object.keys(at);return lt.length!==Rt.length||lt.some((lt=>nt[lt]!==at[lt]))})),{"layer":Kr}=Rt.useContext(Lt.J),Zr=Rt.useMemo((()=>({"prefixCls":Wr,"csp":Gr,"layer":Kr?"antd":void 0})),[Wr,Gr,Kr]);let Jr=Rt.createElement(Rt.Fragment,null,Rt.createElement(config_provider_PropWarning,{"dropdownMatchSelectWidth":Ne}),at);const sa=Rt.useMemo((()=>{var nt,at,lt,Rt;return(0,$t.h)((null===(nt=ne.A.Form)||void 0===nt?void 0:nt.defaultValidateMessages)||{},(null===(lt=null===(at=qr.locale)||void 0===at?void 0:at.Form)||void 0===lt?void 0:lt.defaultValidateMessages)||{},(null===(Rt=qr.form)||void 0===Rt?void 0:Rt.validateMessages)||{},(null==oe?void 0:oe.validateMessages)||{})}),[qr,null==oe?void 0:oe.validateMessages]);Object.keys(sa).length>0&&(Jr=Rt.createElement(te.A.Provider,{"value":sa},Jr)),he&&(Jr=Rt.createElement(es_locale,{"locale":he,"_ANT_MARK__":"internalMark"},Jr)),(Wr||Gr)&&(Jr=Rt.createElement(Ht.A.Provider,{"value":Zr},Jr)),de&&(Jr=Rt.createElement(we.c,{"size":de},Jr)),Jr=Rt.createElement(MotionWrapper,null,Jr);const ua=Rt.useMemo((()=>{const nt=Ur||{},{"algorithm":at,"token":lt,"components":Rt,"cssVar":Bt}=nt,Ht=__rest(nt,["algorithm","token","components","cssVar"]),jt=at&&(!Array.isArray(at)||at.length>0)?(0,Lt.an)(at):se.A,$t={};Object.entries(Rt||{}).forEach((nt=>{let[at,lt]=nt;const Rt=Object.assign({},lt);"algorithm"in Rt&&(!0===Rt.algorithm?Rt.theme=jt:(Array.isArray(Rt.algorithm)||"function"==typeof Rt.algorithm)&&(Rt.theme=(0,Lt.an)(Rt.algorithm)),delete Rt.algorithm),$t[at]=Rt}));const Kt=Object.assign(Object.assign({},ue.A),lt);return Object.assign(Object.assign({},Ht),{"theme":jt,"token":Kt,"components":$t,"override":Object.assign({"override":Kt},$t),"cssVar":Bt})}),[Ur]);return pi&&(Jr=Rt.createElement(le.vG.Provider,{"value":ua},Jr)),qr.warning&&(Jr=Rt.createElement(Kt._n.Provider,{"value":qr.warning},Jr)),void 0!==vi&&(Jr=Rt.createElement(Ae.X,{"disabled":vi},Jr)),Rt.createElement(ce.QO.Provider,{"value":qr},Jr)},ConfigProvider=nt=>{const at=Rt.useContext(ce.QO),lt=Rt.useContext(oe.A);return Rt.createElement(ProviderChildren,Object.assign({"parentContext":at,"legacyLocale":lt},nt))};ConfigProvider.ConfigContext=ce.QO,ConfigProvider.SizeContext=we.A,ConfigProvider.config=nt=>{const{"prefixCls":at,"iconPrefixCls":lt,"theme":Rt,"holderRender":Bt}=nt;void 0!==at&&(fi=at),void 0!==lt&&(pi=lt),"holderRender"in nt&&(mi=Bt),Rt&&(!function isLegacyTheme(nt){return Object.keys(nt).some((nt=>nt.endsWith("Color")))}(Rt)?vi=Rt:registerTheme(getGlobalPrefixCls(),Rt))},ConfigProvider.useConfig=Ce,Object.defineProperty(ConfigProvider,"SizeContext",{"get":()=>we.A});var _i=ConfigProvider},"3205":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return Ht}});var Rt=lt(1950),Bt=(0,Rt.A)((0,Rt.A)({},{"yearFormat":"YYYY","dayFormat":"D","cellMeridiemFormat":"A","monthBeforeYear":!0}),{},{"locale":"en_US","today":"Today","now":"Now","backToToday":"Back to today","ok":"OK","clear":"Clear","week":"Week","month":"Month","year":"Year","timeSelect":"select time","dateSelect":"select date","weekSelect":"Choose a week","monthSelect":"Choose a month","yearSelect":"Choose a year","decadeSelect":"Choose a decade","dateFormat":"M/D/YYYY","dateTimeFormat":"M/D/YYYY HH:mm:ss","previousMonth":"Previous month (PageUp)","nextMonth":"Next month (PageDown)","previousYear":"Last year (Control + left)","nextYear":"Next year (Control + right)","previousDecade":"Last decade","nextDecade":"Next decade","previousCentury":"Last century","nextCentury":"Next century"}),Lt=lt(3173);var Ht={"lang":Object.assign({"placeholder":"Select date","yearPlaceholder":"Select year","quarterPlaceholder":"Select quarter","monthPlaceholder":"Select month","weekPlaceholder":"Select week","rangePlaceholder":["Start date","End date"],"rangeYearPlaceholder":["Start year","End year"],"rangeQuarterPlaceholder":["Start quarter","End quarter"],"rangeMonthPlaceholder":["Start month","End month"],"rangeWeekPlaceholder":["Start week","End week"]},Bt),"timePickerLocale":Object.assign({},Lt.A)}},"9812":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return se}});var Rt=lt(758),Bt=lt(7500),Lt=lt.n(Bt),Ht=lt(443),jt=lt(5779),$t=lt(3727);var empty=()=>{const[,nt]=(0,$t.Ay)(),[at]=(0,Ht.A)("Empty"),lt=new jt.Y(nt.colorBgBase).toHsl().l<.5?{"opacity":.65}:{};return Rt.createElement("svg",{"style":lt,"width":"184","height":"152","viewBox":"0 0 184 152","xmlns":"http://www.w3.org/2000/svg"},Rt.createElement("title",null,(null==at?void 0:at.description)||"Empty"),Rt.createElement("g",{"fill":"none","fillRule":"evenodd"},Rt.createElement("g",{"transform":"translate(24 31.67)"},Rt.createElement("ellipse",{"fillOpacity":".8","fill":"#F5F5F7","cx":"67.797","cy":"106.89","rx":"67.797","ry":"12.668"}),Rt.createElement("path",{"d":"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z","fill":"#AEB8C2"}),Rt.createElement("path",{"d":"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z","fill":"url(#linearGradient-1)","transform":"translate(13.56)"}),Rt.createElement("path",{"d":"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z","fill":"#F5F5F7"}),Rt.createElement("path",{"d":"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z","fill":"#DCE0E6"})),Rt.createElement("path",{"d":"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z","fill":"#DCE0E6"}),Rt.createElement("g",{"transform":"translate(149.65 15.383)","fill":"#FFF"},Rt.createElement("ellipse",{"cx":"20.654","cy":"3.167","rx":"2.849","ry":"2.815"}),Rt.createElement("path",{"d":"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))};var simple=()=>{const[,nt]=(0,$t.Ay)(),[at]=(0,Ht.A)("Empty"),{"colorFill":lt,"colorFillTertiary":Bt,"colorFillQuaternary":Lt,"colorBgContainer":Kt}=nt,{"borderColor":te,"shadowColor":ne,"contentColor":re}=(0,Rt.useMemo)((()=>({"borderColor":new jt.Y(lt).onBackground(Kt).toHexString(),"shadowColor":new jt.Y(Bt).onBackground(Kt).toHexString(),"contentColor":new jt.Y(Lt).onBackground(Kt).toHexString()})),[lt,Bt,Lt,Kt]);return Rt.createElement("svg",{"width":"64","height":"41","viewBox":"0 0 64 41","xmlns":"http://www.w3.org/2000/svg"},Rt.createElement("title",null,(null==at?void 0:at.description)||"Empty"),Rt.createElement("g",{"transform":"translate(0 1)","fill":"none","fillRule":"evenodd"},Rt.createElement("ellipse",{"fill":ne,"cx":"32","cy":"33","rx":"32","ry":"7"}),Rt.createElement("g",{"fillRule":"nonzero","stroke":te},Rt.createElement("path",{"d":"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),Rt.createElement("path",{"d":"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z","fill":re}))))},Kt=lt(5926),te=lt(8615);const genSharedEmptyStyle=nt=>{const{"componentCls":at,"margin":lt,"marginXS":Rt,"marginXL":Bt,"fontSize":Lt,"lineHeight":Ht}=nt;return{[at]:{"marginInline":Rt,"fontSize":Lt,"lineHeight":Ht,"textAlign":"center",[`${at}-image`]:{"height":nt.emptyImgHeight,"marginBottom":Rt,"opacity":nt.opacityImage,"img":{"height":"100%"},"svg":{"maxWidth":"100%","height":"100%","margin":"auto"}},[`${at}-description`]:{"color":nt.colorTextDescription},[`${at}-footer`]:{"marginTop":lt},"&-normal":{"marginBlock":Bt,"color":nt.colorTextDescription,[`${at}-description`]:{"color":nt.colorTextDescription},[`${at}-image`]:{"height":nt.emptyImgHeightMD}},"&-small":{"marginBlock":Rt,"color":nt.colorTextDescription,[`${at}-image`]:{"height":nt.emptyImgHeightSM}}}}};var ne=(0,Kt.OF)("Empty",(nt=>{const{"componentCls":at,"controlHeightLG":lt,"calc":Rt}=nt,Bt=(0,te.oX)(nt,{"emptyImgCls":`${at}-img`,"emptyImgHeight":Rt(lt).mul(2.5).equal(),"emptyImgHeightMD":lt,"emptyImgHeightSM":Rt(lt).mul(.875).equal()});return[genSharedEmptyStyle(Bt)]})),re=lt(6623),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const ae=Rt.createElement(empty,null),oe=Rt.createElement(simple,null),empty_Empty=nt=>{const{"className":at,"rootClassName":lt,"prefixCls":Bt,"image":jt=ae,"description":$t,"children":Kt,"imageStyle":te,"style":se,"classNames":le,"styles":ue}=nt,ce=__rest(nt,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{"getPrefixCls":he,"direction":de,"className":fe,"style":pe,"classNames":ve,"styles":Ae}=(0,re.TP)("empty"),we=he("empty",Bt),[Ce,je,Ne]=ne(we),[Ve]=(0,Ht.A)("Empty"),Ge=void 0!==$t?$t:null==Ve?void 0:Ve.description,ti="string"==typeof Ge?Ge:"empty";let li=null;return li="string"==typeof jt?Rt.createElement("img",{"alt":ti,"src":jt}):jt,Ce(Rt.createElement("div",Object.assign({"className":Lt()(je,Ne,we,fe,{[`${we}-normal`]:jt===oe,[`${we}-rtl`]:"rtl"===de},at,lt,ve.root,null==le?void 0:le.root),"style":Object.assign(Object.assign(Object.assign(Object.assign({},Ae.root),pe),null==ue?void 0:ue.root),se)},ce),Rt.createElement("div",{"className":Lt()(`${we}-image`,ve.image,null==le?void 0:le.image),"style":Object.assign(Object.assign(Object.assign({},te),Ae.image),null==ue?void 0:ue.image)},li),Ge&&Rt.createElement("div",{"className":Lt()(`${we}-description`,ve.description,null==le?void 0:le.description),"style":Object.assign(Object.assign({},Ae.description),null==ue?void 0:ue.description)},Ge),Kt&&Rt.createElement("div",{"className":Lt()(`${we}-footer`,ve.footer,null==le?void 0:le.footer),"style":Object.assign(Object.assign({},Ae.footer),null==ue?void 0:ue.footer)},Kt)))};empty_Empty.PRESENTED_IMAGE_DEFAULT=ae,empty_Empty.PRESENTED_IMAGE_SIMPLE=oe;var se=empty_Empty},"7544":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return ue}});var Rt=lt(758),Bt=lt(7500),Lt=lt.n(Bt),Ht=lt(3549),jt=lt(8680),$t=lt(6623),Kt=lt(5926),te=lt(8615);const ne=["wrap","nowrap","wrap-reverse"],re=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],ae=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var oe=function createFlexClassNames(nt,at){return Lt()(Object.assign(Object.assign(Object.assign({},((nt,at)=>{const lt=!0===at.wrap?"wrap":at.wrap;return{[`${nt}-wrap-${lt}`]:lt&&ne.includes(lt)}})(nt,at)),((nt,at)=>{const lt={};return ae.forEach((Rt=>{lt[`${nt}-align-${Rt}`]=at.align===Rt})),lt[`${nt}-align-stretch`]=!at.align&&!!at.vertical,lt})(nt,at)),((nt,at)=>{const lt={};return re.forEach((Rt=>{lt[`${nt}-justify-${Rt}`]=at.justify===Rt})),lt})(nt,at)))};const genFlexStyle=nt=>{const{"componentCls":at}=nt;return{[at]:{"display":"flex","margin":0,"padding":0,"&-vertical":{"flexDirection":"column"},"&-rtl":{"direction":"rtl"},"&:empty":{"display":"none"}}}},genFlexGapStyle=nt=>{const{"componentCls":at}=nt;return{[at]:{"&-gap-small":{"gap":nt.flexGapSM},"&-gap-middle":{"gap":nt.flexGap},"&-gap-large":{"gap":nt.flexGapLG}}}},genFlexWrapStyle=nt=>{const{"componentCls":at}=nt,lt={};return ne.forEach((nt=>{lt[`${at}-wrap-${nt}`]={"flexWrap":nt}})),lt},genAlignItemsStyle=nt=>{const{"componentCls":at}=nt,lt={};return ae.forEach((nt=>{lt[`${at}-align-${nt}`]={"alignItems":nt}})),lt},genJustifyContentStyle=nt=>{const{"componentCls":at}=nt,lt={};return re.forEach((nt=>{lt[`${at}-justify-${nt}`]={"justifyContent":nt}})),lt};var se=(0,Kt.OF)("Flex",(nt=>{const{"paddingXS":at,"padding":lt,"paddingLG":Rt}=nt,Bt=(0,te.oX)(nt,{"flexGapSM":at,"flexGap":lt,"flexGapLG":Rt});return[genFlexStyle(Bt),genFlexGapStyle(Bt),genFlexWrapStyle(Bt),genAlignItemsStyle(Bt),genJustifyContentStyle(Bt)]}),(()=>({})),{"resetStyle":!1}),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const le=Rt.forwardRef(((nt,at)=>{const{"prefixCls":lt,"rootClassName":Bt,"className":Kt,"style":te,"flex":ne,"gap":re,"children":ae,"vertical":le=!1,"component":ue="div"}=nt,ce=__rest(nt,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{"flex":he,"direction":de,"getPrefixCls":fe}=Rt.useContext($t.QO),pe=fe("flex",lt),[ve,Ae,we]=se(pe),Ce=null!=le?le:null==he?void 0:he.vertical,je=Lt()(Kt,Bt,null==he?void 0:he.className,pe,Ae,we,oe(pe,nt),{[`${pe}-rtl`]:"rtl"===de,[`${pe}-gap-${re}`]:(0,jt.X)(re),[`${pe}-vertical`]:Ce}),Ne=Object.assign(Object.assign({},null==he?void 0:he.style),te);return ne&&(Ne.flex=ne),re&&!(0,jt.X)(re)&&(Ne.gap=re),ve(Rt.createElement(ue,Object.assign({"ref":at,"className":je,"style":Ne},(0,Ht.A)(ce,["justify","wrap","align"])),ae))}));var ue=le},"8617":function(nt,at,lt){"use strict";lt.d(at,{"$W":function(){return Kt},"Op":function(){return FormProvider},"Pp":function(){return te},"XB":function(){return NoFormStyle},"cK":function(){return Ht},"hb":function(){return $t},"jC":function(){return jt}});var Rt=lt(758),Bt=lt(8664),Lt=lt(3549);const Ht=Rt.createContext({"labelAlign":"right","vertical":!1,"itemRef":()=>{}}),jt=Rt.createContext(null),FormProvider=nt=>{const at=(0,Lt.A)(nt,["prefixCls"]);return Rt.createElement(Bt.Op,Object.assign({},at))},$t=Rt.createContext({"prefixCls":""}),Kt=Rt.createContext({});const NoFormStyle=nt=>{let{"children":at,"status":lt,"override":Bt}=nt;const Lt=Rt.useContext(Kt),Ht=Rt.useMemo((()=>{const nt=Object.assign({},Lt);return Bt&&delete nt.isFormItemInput,lt&&(delete nt.status,delete nt.hasFeedback,delete nt.feedbackIcon),nt}),[lt,Bt,Lt]);return Rt.createElement(Kt.Provider,{"value":Ht},at)},te=Rt.createContext(void 0)},"1716":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(8617),Lt=lt(6623);at.A=function(nt,at){let lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var Ht,jt;const{"variant":$t,[nt]:Kt}=Rt.useContext(Lt.QO),te=Rt.useContext(Bt.Pp),ne=null==Kt?void 0:Kt.variant;let re;re=void 0!==at?at:!1===lt?"borderless":null!==(jt=null!==(Ht=null!=te?te:ne)&&void 0!==Ht?Ht:$t)&&void 0!==jt?jt:"outlined";return[re,Lt.lJ.includes(re)]}},"5447":function(nt,at,lt){"use strict";var Rt=lt(758);at.A=(0,Rt.createContext)(void 0)},"370":function(nt,at,lt){"use strict";lt.d(at,{"BZ":function(){return genInputSmallStyle},"MG":function(){return te},"j_":function(){return genPlaceholderStyle},"wj":function(){return genBasicInputStyle}});var Rt=lt(4336),Bt=lt(7209),Lt=lt(8686),Ht=lt(5926),jt=lt(8615),$t=lt(679),Kt=lt(5246);const genPlaceholderStyle=nt=>({"&::-moz-placeholder":{"opacity":1},"&::placeholder":{"color":nt,"userSelect":"none"},"&:placeholder-shown":{"textOverflow":"ellipsis"}}),genInputLargeStyle=nt=>{const{"paddingBlockLG":at,"lineHeightLG":lt,"borderRadiusLG":Bt,"paddingInlineLG":Lt}=nt;return{"padding":`${(0,Rt.zA)(at)} ${(0,Rt.zA)(Lt)}`,"fontSize":nt.inputFontSizeLG,"lineHeight":lt,"borderRadius":Bt}},genInputSmallStyle=nt=>({"padding":`${(0,Rt.zA)(nt.paddingBlockSM)} ${(0,Rt.zA)(nt.paddingInlineSM)}`,"fontSize":nt.inputFontSizeSM,"borderRadius":nt.borderRadiusSM}),genBasicInputStyle=nt=>Object.assign(Object.assign({"position":"relative","display":"inline-block","width":"100%","minWidth":0,"padding":`${(0,Rt.zA)(nt.paddingBlock)} ${(0,Rt.zA)(nt.paddingInline)}`,"color":nt.colorText,"fontSize":nt.inputFontSize,"lineHeight":nt.lineHeight,"borderRadius":nt.borderRadius,"transition":`all ${nt.motionDurationMid}`},genPlaceholderStyle(nt.colorTextPlaceholder)),{"textarea&":{"maxWidth":"100%","height":"auto","minHeight":nt.controlHeight,"lineHeight":nt.lineHeight,"verticalAlign":"bottom","transition":`all ${nt.motionDurationSlow}, height 0s`,"resize":"vertical"},"&-lg":Object.assign({},genInputLargeStyle(nt)),"&-sm":Object.assign({},genInputSmallStyle(nt)),"&-rtl, &-textarea-rtl":{"direction":"rtl"}}),genInputGroupStyle=nt=>{const{"componentCls":at,"antCls":lt}=nt;return{"position":"relative","display":"table","width":"100%","borderCollapse":"separate","borderSpacing":0,"&[class*='col-']":{"paddingInlineEnd":nt.paddingXS,"&:last-child":{"paddingInlineEnd":0}},[`&-lg ${at}, &-lg > ${at}-group-addon`]:Object.assign({},genInputLargeStyle(nt)),[`&-sm ${at}, &-sm > ${at}-group-addon`]:Object.assign({},genInputSmallStyle(nt)),[`&-lg ${lt}-select-single ${lt}-select-selector`]:{"height":nt.controlHeightLG},[`&-sm ${lt}-select-single ${lt}-select-selector`]:{"height":nt.controlHeightSM},[`> ${at}`]:{"display":"table-cell","&:not(:first-child):not(:last-child)":{"borderRadius":0}},[`${at}-group`]:{"&-addon, &-wrap":{"display":"table-cell","width":1,"whiteSpace":"nowrap","verticalAlign":"middle","&:not(:first-child):not(:last-child)":{"borderRadius":0}},"&-wrap > *":{"display":"block !important"},"&-addon":{"position":"relative","padding":`0 ${(0,Rt.zA)(nt.paddingInline)}`,"color":nt.colorText,"fontWeight":"normal","fontSize":nt.inputFontSize,"textAlign":"center","borderRadius":nt.borderRadius,"transition":`all ${nt.motionDurationSlow}`,"lineHeight":1,[`${lt}-select`]:{"margin":`${(0,Rt.zA)(nt.calc(nt.paddingBlock).add(1).mul(-1).equal())} ${(0,Rt.zA)(nt.calc(nt.paddingInline).mul(-1).equal())}`,[`&${lt}-select-single:not(${lt}-select-customize-input):not(${lt}-pagination-size-changer)`]:{[`${lt}-select-selector`]:{"backgroundColor":"inherit","border":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} transparent`,"boxShadow":"none"}}},[`${lt}-cascader-picker`]:{"margin":`-9px ${(0,Rt.zA)(nt.calc(nt.paddingInline).mul(-1).equal())}`,"backgroundColor":"transparent",[`${lt}-cascader-input`]:{"textAlign":"start","border":0,"boxShadow":"none"}}}},[at]:{"width":"100%","marginBottom":0,"textAlign":"inherit","&:focus":{"zIndex":1,"borderInlineEndWidth":1},"&:hover":{"zIndex":1,"borderInlineEndWidth":1,[`${at}-search-with-button &`]:{"zIndex":0}}},[`> ${at}:first-child, ${at}-group-addon:first-child`]:{"borderStartEndRadius":0,"borderEndEndRadius":0,[`${lt}-select ${lt}-select-selector`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},[`> ${at}-affix-wrapper`]:{[`&:not(:first-child) ${at}`]:{"borderStartStartRadius":0,"borderEndStartRadius":0},[`&:not(:last-child) ${at}`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},[`> ${at}:last-child, ${at}-group-addon:last-child`]:{"borderStartStartRadius":0,"borderEndStartRadius":0,[`${lt}-select ${lt}-select-selector`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}},[`${at}-affix-wrapper`]:{"&:not(:last-child)":{"borderStartEndRadius":0,"borderEndEndRadius":0,[`${at}-search &`]:{"borderStartStartRadius":nt.borderRadius,"borderEndStartRadius":nt.borderRadius}},[`&:not(:first-child), ${at}-search &:not(:first-child)`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}},[`&${at}-group-compact`]:Object.assign(Object.assign({"display":"block"},(0,Bt.t6)()),{[`${at}-group-addon, ${at}-group-wrap, > ${at}`]:{"&:not(:first-child):not(:last-child)":{"borderInlineEndWidth":nt.lineWidth,"&:hover, &:focus":{"zIndex":1}}},"& > *":{"display":"inline-flex","float":"none","verticalAlign":"top","borderRadius":0},[`\n        & > ${at}-affix-wrapper,\n        & > ${at}-number-affix-wrapper,\n        & > ${lt}-picker-range\n      `]:{"display":"inline-flex"},"& > *:not(:last-child)":{"marginInlineEnd":nt.calc(nt.lineWidth).mul(-1).equal(),"borderInlineEndWidth":nt.lineWidth},[at]:{"float":"none"},[`& > ${lt}-select > ${lt}-select-selector,\n      & > ${lt}-select-auto-complete ${at},\n      & > ${lt}-cascader-picker ${at},\n      & > ${at}-group-wrapper ${at}`]:{"borderInlineEndWidth":nt.lineWidth,"borderRadius":0,"&:hover, &:focus":{"zIndex":1}},[`& > ${lt}-select-focused`]:{"zIndex":1},[`& > ${lt}-select > ${lt}-select-arrow`]:{"zIndex":1},[`& > *:first-child,\n      & > ${lt}-select:first-child > ${lt}-select-selector,\n      & > ${lt}-select-auto-complete:first-child ${at},\n      & > ${lt}-cascader-picker:first-child ${at}`]:{"borderStartStartRadius":nt.borderRadius,"borderEndStartRadius":nt.borderRadius},[`& > *:last-child,\n      & > ${lt}-select:last-child > ${lt}-select-selector,\n      & > ${lt}-cascader-picker:last-child ${at},\n      & > ${lt}-cascader-picker-focused:last-child ${at}`]:{"borderInlineEndWidth":nt.lineWidth,"borderStartEndRadius":nt.borderRadius,"borderEndEndRadius":nt.borderRadius},[`& > ${lt}-select-auto-complete ${at}`]:{"verticalAlign":"top"},[`${at}-group-wrapper + ${at}-group-wrapper`]:{"marginInlineStart":nt.calc(nt.lineWidth).mul(-1).equal(),[`${at}-affix-wrapper`]:{"borderRadius":0}},[`${at}-group-wrapper:not(:last-child)`]:{[`&${at}-search > ${at}-group`]:{[`& > ${at}-group-addon > ${at}-search-button`]:{"borderRadius":0},[`& > ${at}`]:{"borderStartStartRadius":nt.borderRadius,"borderStartEndRadius":0,"borderEndEndRadius":0,"borderEndStartRadius":nt.borderRadius}}}})}},genInputStyle=nt=>{const{"componentCls":at,"controlHeightSM":lt,"lineWidth":Rt,"calc":Lt}=nt,Ht=Lt(lt).sub(Lt(Rt).mul(2)).sub(16).div(2).equal();return{[at]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,Bt.dF)(nt)),genBasicInputStyle(nt)),(0,Kt.Eb)(nt)),(0,Kt.sA)(nt)),(0,Kt.lB)(nt)),(0,Kt.aP)(nt)),{'&[type="color"]':{"height":nt.controlHeight,[`&${at}-lg`]:{"height":nt.controlHeightLG},[`&${at}-sm`]:{"height":lt,"paddingTop":Ht,"paddingBottom":Ht}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},genAllowClearStyle=nt=>{const{"componentCls":at}=nt;return{[`${at}-clear-icon`]:{"margin":0,"padding":0,"lineHeight":0,"color":nt.colorTextQuaternary,"fontSize":nt.fontSizeIcon,"verticalAlign":-1,"cursor":"pointer","transition":`color ${nt.motionDurationSlow}`,"border":"none","outline":"none","backgroundColor":"transparent","&:hover":{"color":nt.colorTextTertiary},"&:active":{"color":nt.colorText},"&-hidden":{"visibility":"hidden"},"&-has-suffix":{"margin":`0 ${(0,Rt.zA)(nt.inputAffixPadding)}`}}}},genAffixStyle=nt=>{const{"componentCls":at,"inputAffixPadding":lt,"colorTextDescription":Rt,"motionDurationSlow":Bt,"colorIcon":Lt,"colorIconHover":Ht,"iconCls":jt}=nt,$t=`${at}-affix-wrapper`,Kt=`${at}-affix-wrapper-disabled`;return{[$t]:Object.assign(Object.assign(Object.assign(Object.assign({},genBasicInputStyle(nt)),{"display":"inline-flex",[`&:not(${at}-disabled):hover`]:{"zIndex":1,[`${at}-search-with-button &`]:{"zIndex":0}},"&-focused, &:focus":{"zIndex":1},[`> input${at}`]:{"padding":0},[`> input${at}, > textarea${at}`]:{"fontSize":"inherit","border":"none","borderRadius":0,"outline":"none","background":"transparent","color":"inherit","&::-ms-reveal":{"display":"none"},"&:focus":{"boxShadow":"none !important"}},"&::before":{"display":"inline-block","width":0,"visibility":"hidden","content":'"\\a0"'},[at]:{"&-prefix, &-suffix":{"display":"flex","flex":"none","alignItems":"center","> *:not(:last-child)":{"marginInlineEnd":nt.paddingXS}},"&-show-count-suffix":{"color":Rt},"&-show-count-has-suffix":{"marginInlineEnd":nt.paddingXXS},"&-prefix":{"marginInlineEnd":lt},"&-suffix":{"marginInlineStart":lt}}}),genAllowClearStyle(nt)),{[`${jt}${at}-password-icon`]:{"color":Lt,"cursor":"pointer","transition":`all ${Bt}`,"&:hover":{"color":Ht}}}),[`${at}-underlined`]:{"borderRadius":0},[Kt]:{[`${jt}${at}-password-icon`]:{"color":Lt,"cursor":"not-allowed","&:hover":{"color":Lt}}}}},genGroupStyle=nt=>{const{"componentCls":at,"borderRadiusLG":lt,"borderRadiusSM":Rt}=nt;return{[`${at}-group`]:Object.assign(Object.assign(Object.assign({},(0,Bt.dF)(nt)),genInputGroupStyle(nt)),{"&-rtl":{"direction":"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({"display":"inline-block","width":"100%","textAlign":"start","verticalAlign":"top","&-rtl":{"direction":"rtl"},"&-lg":{[`${at}-group-addon`]:{"borderRadius":lt,"fontSize":nt.inputFontSizeLG}},"&-sm":{[`${at}-group-addon`]:{"borderRadius":Rt}}},(0,Kt.nm)(nt)),(0,Kt.Vy)(nt)),{[`&:not(${at}-compact-first-item):not(${at}-compact-last-item)${at}-compact-item`]:{[`${at}, ${at}-group-addon`]:{"borderRadius":0}},[`&:not(${at}-compact-last-item)${at}-compact-first-item`]:{[`${at}, ${at}-group-addon`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},[`&:not(${at}-compact-first-item)${at}-compact-last-item`]:{[`${at}, ${at}-group-addon`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}},[`&:not(${at}-compact-last-item)${at}-compact-item`]:{[`${at}-affix-wrapper`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},[`&:not(${at}-compact-first-item)${at}-compact-item`]:{[`${at}-affix-wrapper`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}}})})}},genSearchInputStyle=nt=>{const{"componentCls":at,"antCls":lt}=nt,Rt=`${at}-search`;return{[Rt]:{[at]:{"&:hover, &:focus":{[`+ ${at}-group-addon ${Rt}-button:not(${lt}-btn-primary)`]:{"borderInlineStartColor":nt.colorPrimaryHover}}},[`${at}-affix-wrapper`]:{"height":nt.controlHeight,"borderRadius":0},[`${at}-lg`]:{"lineHeight":nt.calc(nt.lineHeightLG).sub(2e-4).equal()},[`> ${at}-group`]:{[`> ${at}-group-addon:last-child`]:{"insetInlineStart":-1,"padding":0,"border":0,[`${Rt}-button`]:{"marginInlineEnd":-1,"borderStartStartRadius":0,"borderEndStartRadius":0,"boxShadow":"none"},[`${Rt}-button:not(${lt}-btn-primary)`]:{"color":nt.colorTextDescription,"&:hover":{"color":nt.colorPrimaryHover},"&:active":{"color":nt.colorPrimaryActive},[`&${lt}-btn-loading::before`]:{"insetInlineStart":0,"insetInlineEnd":0,"insetBlockStart":0,"insetBlockEnd":0}}}},[`${Rt}-button`]:{"height":nt.controlHeight,"&:hover, &:focus":{"zIndex":1}},"&-large":{[`${at}-affix-wrapper, ${Rt}-button`]:{"height":nt.controlHeightLG}},"&-small":{[`${at}-affix-wrapper, ${Rt}-button`]:{"height":nt.controlHeightSM}},"&-rtl":{"direction":"rtl"},[`&${at}-compact-item`]:{[`&:not(${at}-compact-last-item)`]:{[`${at}-group-addon`]:{[`${at}-search-button`]:{"marginInlineEnd":nt.calc(nt.lineWidth).mul(-1).equal(),"borderRadius":0}}},[`&:not(${at}-compact-first-item)`]:{[`${at},${at}-affix-wrapper`]:{"borderRadius":0}},[`> ${at}-group-addon ${at}-search-button,\n        > ${at},\n        ${at}-affix-wrapper`]:{"&:hover, &:focus, &:active":{"zIndex":2}},[`> ${at}-affix-wrapper-focused`]:{"zIndex":2}}}}},genRangeStyle=nt=>{const{"componentCls":at}=nt;return{[`${at}-out-of-range`]:{[`&, & input, & textarea, ${at}-show-count-suffix, ${at}-data-count`]:{"color":nt.colorError}}}},te=(0,Ht.OF)(["Input","Shared"],(nt=>{const at=(0,jt.oX)(nt,(0,$t.C)(nt));return[genInputStyle(at),genAffixStyle(at)]}),$t.b,{"resetFont":!1});at.Ay=(0,Ht.OF)(["Input","Component"],(nt=>{const at=(0,jt.oX)(nt,(0,$t.C)(nt));return[genGroupStyle(at),genSearchInputStyle(at),genRangeStyle(at),(0,Lt.G)(at)]}),$t.b,{"resetFont":!1})},"679":function(nt,at,lt){"use strict";lt.d(at,{"C":function(){return initInputToken},"b":function(){return initComponentToken}});var Rt=lt(8615);function initInputToken(nt){return(0,Rt.oX)(nt,{"inputAffixPadding":nt.paddingXXS})}const initComponentToken=nt=>{const{"controlHeight":at,"fontSize":lt,"lineHeight":Rt,"lineWidth":Bt,"controlHeightSM":Lt,"controlHeightLG":Ht,"fontSizeLG":jt,"lineHeightLG":$t,"paddingSM":Kt,"controlPaddingHorizontalSM":te,"controlPaddingHorizontal":ne,"colorFillAlter":re,"colorPrimaryHover":ae,"colorPrimary":oe,"controlOutlineWidth":se,"controlOutline":le,"colorErrorOutline":ue,"colorWarningOutline":ce,"colorBgContainer":he}=nt;return{"paddingBlock":Math.max(Math.round((at-lt*Rt)/2*10)/10-Bt,0),"paddingBlockSM":Math.max(Math.round((Lt-lt*Rt)/2*10)/10-Bt,0),"paddingBlockLG":Math.ceil((Ht-jt*$t)/2*10)/10-Bt,"paddingInline":Kt-Bt,"paddingInlineSM":te-Bt,"paddingInlineLG":ne-Bt,"addonBg":re,"activeBorderColor":oe,"hoverBorderColor":ae,"activeShadow":`0 0 0 ${se}px ${le}`,"errorActiveShadow":`0 0 0 ${se}px ${ue}`,"warningActiveShadow":`0 0 0 ${se}px ${ce}`,"hoverBg":he,"activeBg":he,"inputFontSize":lt,"inputFontSizeLG":jt,"inputFontSizeSM":lt}}},"5246":function(nt,at,lt){"use strict";lt.d(at,{"Eb":function(){return genOutlinedStyle},"Vy":function(){return genFilledGroupStyle},"aP":function(){return genUnderlinedStyle},"eT":function(){return genDisabledStyle},"lB":function(){return genBorderlessStyle},"nI":function(){return genBaseOutlinedStyle},"nm":function(){return genOutlinedGroupStyle},"sA":function(){return genFilledStyle}});var Rt=lt(4336),Bt=lt(8615);const genHoverStyle=nt=>({"borderColor":nt.hoverBorderColor,"backgroundColor":nt.hoverBg}),genDisabledStyle=nt=>({"color":nt.colorTextDisabled,"backgroundColor":nt.colorBgContainerDisabled,"borderColor":nt.colorBorder,"boxShadow":"none","cursor":"not-allowed","opacity":1,"input[disabled], textarea[disabled]":{"cursor":"not-allowed"},"&:hover:not([disabled])":Object.assign({},genHoverStyle((0,Bt.oX)(nt,{"hoverBorderColor":nt.colorBorder,"hoverBg":nt.colorBgContainerDisabled})))}),genBaseOutlinedStyle=(nt,at)=>({"background":nt.colorBgContainer,"borderWidth":nt.lineWidth,"borderStyle":nt.lineType,"borderColor":at.borderColor,"&:hover":{"borderColor":at.hoverBorderColor,"backgroundColor":nt.hoverBg},"&:focus, &:focus-within":{"borderColor":at.activeBorderColor,"boxShadow":at.activeShadow,"outline":0,"backgroundColor":nt.activeBg}}),genOutlinedStatusStyle=(nt,at)=>({[`&${nt.componentCls}-status-${at.status}:not(${nt.componentCls}-disabled)`]:Object.assign(Object.assign({},genBaseOutlinedStyle(nt,at)),{[`${nt.componentCls}-prefix, ${nt.componentCls}-suffix`]:{"color":at.affixColor}}),[`&${nt.componentCls}-status-${at.status}${nt.componentCls}-disabled`]:{"borderColor":at.borderColor}}),genOutlinedStyle=(nt,at)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genBaseOutlinedStyle(nt,{"borderColor":nt.colorBorder,"hoverBorderColor":nt.hoverBorderColor,"activeBorderColor":nt.activeBorderColor,"activeShadow":nt.activeShadow})),{[`&${nt.componentCls}-disabled, &[disabled]`]:Object.assign({},genDisabledStyle(nt))}),genOutlinedStatusStyle(nt,{"status":"error","borderColor":nt.colorError,"hoverBorderColor":nt.colorErrorBorderHover,"activeBorderColor":nt.colorError,"activeShadow":nt.errorActiveShadow,"affixColor":nt.colorError})),genOutlinedStatusStyle(nt,{"status":"warning","borderColor":nt.colorWarning,"hoverBorderColor":nt.colorWarningBorderHover,"activeBorderColor":nt.colorWarning,"activeShadow":nt.warningActiveShadow,"affixColor":nt.colorWarning})),at)}),genOutlinedGroupStatusStyle=(nt,at)=>({[`&${nt.componentCls}-group-wrapper-status-${at.status}`]:{[`${nt.componentCls}-group-addon`]:{"borderColor":at.addonBorderColor,"color":at.addonColor}}}),genOutlinedGroupStyle=nt=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${nt.componentCls}-group`]:{"&-addon":{"background":nt.addonBg,"border":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`},"&-addon:first-child":{"borderInlineEnd":0},"&-addon:last-child":{"borderInlineStart":0}}},genOutlinedGroupStatusStyle(nt,{"status":"error","addonBorderColor":nt.colorError,"addonColor":nt.colorErrorText})),genOutlinedGroupStatusStyle(nt,{"status":"warning","addonBorderColor":nt.colorWarning,"addonColor":nt.colorWarningText})),{[`&${nt.componentCls}-group-wrapper-disabled`]:{[`${nt.componentCls}-group-addon`]:Object.assign({},genDisabledStyle(nt))}})}),genBorderlessStyle=(nt,at)=>{const{"componentCls":lt}=nt;return{"&-borderless":Object.assign({"background":"transparent","border":"none","&:focus, &:focus-within":{"outline":"none"},[`&${lt}-disabled, &[disabled]`]:{"color":nt.colorTextDisabled,"cursor":"not-allowed"},[`&${lt}-status-error`]:{"&, & input, & textarea":{"color":nt.colorError}},[`&${lt}-status-warning`]:{"&, & input, & textarea":{"color":nt.colorWarning}}},at)}},genBaseFilledStyle=(nt,at)=>({"background":at.bg,"borderWidth":nt.lineWidth,"borderStyle":nt.lineType,"borderColor":"transparent","input&, & input, textarea&, & textarea":{"color":null==at?void 0:at.inputColor},"&:hover":{"background":at.hoverBg},"&:focus, &:focus-within":{"outline":0,"borderColor":at.activeBorderColor,"backgroundColor":nt.activeBg}}),genFilledStatusStyle=(nt,at)=>({[`&${nt.componentCls}-status-${at.status}:not(${nt.componentCls}-disabled)`]:Object.assign(Object.assign({},genBaseFilledStyle(nt,at)),{[`${nt.componentCls}-prefix, ${nt.componentCls}-suffix`]:{"color":at.affixColor}})}),genFilledStyle=(nt,at)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genBaseFilledStyle(nt,{"bg":nt.colorFillTertiary,"hoverBg":nt.colorFillSecondary,"activeBorderColor":nt.activeBorderColor})),{[`&${nt.componentCls}-disabled, &[disabled]`]:Object.assign({},genDisabledStyle(nt))}),genFilledStatusStyle(nt,{"status":"error","bg":nt.colorErrorBg,"hoverBg":nt.colorErrorBgHover,"activeBorderColor":nt.colorError,"inputColor":nt.colorErrorText,"affixColor":nt.colorError})),genFilledStatusStyle(nt,{"status":"warning","bg":nt.colorWarningBg,"hoverBg":nt.colorWarningBgHover,"activeBorderColor":nt.colorWarning,"inputColor":nt.colorWarningText,"affixColor":nt.colorWarning})),at)}),genFilledGroupStatusStyle=(nt,at)=>({[`&${nt.componentCls}-group-wrapper-status-${at.status}`]:{[`${nt.componentCls}-group-addon`]:{"background":at.addonBg,"color":at.addonColor}}}),genFilledGroupStyle=nt=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${nt.componentCls}-group`]:{"&-addon":{"background":nt.colorFillTertiary},[`${nt.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{"borderInlineStart":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorSplit}`},"&:not(:last-child)":{"borderInlineEnd":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorSplit}`}}}},genFilledGroupStatusStyle(nt,{"status":"error","addonBg":nt.colorErrorBg,"addonColor":nt.colorErrorText})),genFilledGroupStatusStyle(nt,{"status":"warning","addonBg":nt.colorWarningBg,"addonColor":nt.colorWarningText})),{[`&${nt.componentCls}-group-wrapper-disabled`]:{[`${nt.componentCls}-group`]:{"&-addon":{"background":nt.colorFillTertiary,"color":nt.colorTextDisabled},"&-addon:first-child":{"borderInlineStart":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`,"borderTop":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`,"borderBottom":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`},"&-addon:last-child":{"borderInlineEnd":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`,"borderTop":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`,"borderBottom":`${(0,Rt.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorBorder}`}}}})}),genBaseUnderlinedStyle=(nt,at)=>({"background":nt.colorBgContainer,"borderWidth":`0 0 ${(0,Rt.zA)(nt.lineWidth)} 0`,"borderStyle":`none none ${nt.lineType} none`,"borderColor":at.borderColor,"borderRadius":0,"&:hover":{"borderColor":at.hoverBorderColor,"backgroundColor":nt.hoverBg},"&:focus, &:focus-within":{"borderColor":at.activeBorderColor,"outline":0,"backgroundColor":nt.activeBg}}),genUnderlinedStatusStyle=(nt,at)=>({[`&${nt.componentCls}-status-${at.status}:not(${nt.componentCls}-disabled)`]:Object.assign(Object.assign({},genBaseUnderlinedStyle(nt,at)),{[`${nt.componentCls}-prefix, ${nt.componentCls}-suffix`]:{"color":at.affixColor}}),[`&${nt.componentCls}-status-${at.status}${nt.componentCls}-disabled`]:{"borderColor":at.borderColor}}),genUnderlinedStyle=(nt,at)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genBaseUnderlinedStyle(nt,{"borderColor":nt.colorBorder,"hoverBorderColor":nt.hoverBorderColor,"activeBorderColor":nt.activeBorderColor,"activeShadow":nt.activeShadow})),{[`&${nt.componentCls}-disabled, &[disabled]`]:{"color":nt.colorTextDisabled,"boxShadow":"none","cursor":"not-allowed","&:hover":{"borderColor":nt.colorBorder}},"input[disabled], textarea[disabled]":{"cursor":"not-allowed"}}),genUnderlinedStatusStyle(nt,{"status":"error","borderColor":nt.colorError,"hoverBorderColor":nt.colorErrorBorderHover,"activeBorderColor":nt.colorError,"activeShadow":nt.errorActiveShadow,"affixColor":nt.colorError})),genUnderlinedStatusStyle(nt,{"status":"warning","borderColor":nt.colorWarning,"hoverBorderColor":nt.colorWarningBorderHover,"activeBorderColor":nt.colorWarning,"activeShadow":nt.warningActiveShadow,"affixColor":nt.colorWarning})),at)})},"8885":function(nt,at,lt){"use strict";const Rt=(0,lt(758).createContext)(void 0);at.A=Rt},"4704":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return $t}});var Rt=lt(2312),Bt=lt(3205),Lt=Bt.A,Ht=lt(3173);const jt="${label} is not a valid ${type}";var $t={"locale":"en","Pagination":Rt.A,"DatePicker":Bt.A,"TimePicker":Ht.A,"Calendar":Lt,"global":{"placeholder":"Please select"},"Table":{"filterTitle":"Filter menu","filterConfirm":"OK","filterReset":"Reset","filterEmptyText":"No filters","filterCheckAll":"Select all items","filterSearchPlaceholder":"Search in filters","emptyText":"No data","selectAll":"Select current page","selectInvert":"Invert current page","selectNone":"Clear all data","selectionAll":"Select all data","sortTitle":"Sort","expand":"Expand row","collapse":"Collapse row","triggerDesc":"Click to sort descending","triggerAsc":"Click to sort ascending","cancelSort":"Click to cancel sorting"},"Tour":{"Next":"Next","Previous":"Previous","Finish":"Finish"},"Modal":{"okText":"OK","cancelText":"Cancel","justOkText":"OK"},"Popconfirm":{"okText":"OK","cancelText":"Cancel"},"Transfer":{"titles":["",""],"searchPlaceholder":"Search here","itemUnit":"item","itemsUnit":"items","remove":"Remove","selectCurrent":"Select current page","removeCurrent":"Remove current page","selectAll":"Select all data","deselectAll":"Deselect all data","removeAll":"Remove all data","selectInvert":"Invert current page"},"Upload":{"uploading":"Uploading...","removeFile":"Remove file","uploadError":"Upload error","previewFile":"Preview file","downloadFile":"Download file"},"Empty":{"description":"No data"},"Icon":{"icon":"icon"},"Text":{"edit":"Edit","copy":"Copy","copied":"Copied","expand":"Expand","collapse":"Collapse"},"Form":{"optional":"(optional)","defaultValidateMessages":{"default":"Field validation error for ${label}","required":"Please enter ${label}","enum":"${label} must be one of [${enum}]","whitespace":"${label} cannot be a blank character","date":{"format":"${label} date format is invalid","parse":"${label} cannot be converted to a date","invalid":"${label} is an invalid date"},"types":{"string":jt,"method":jt,"array":jt,"object":jt,"number":jt,"date":jt,"boolean":jt,"integer":jt,"float":jt,"regexp":jt,"email":jt,"url":jt,"hex":jt},"string":{"len":"${label} must be ${len} characters","min":"${label} must be at least ${min} characters","max":"${label} must be up to ${max} characters","range":"${label} must be between ${min}-${max} characters"},"number":{"len":"${label} must be equal to ${len}","min":"${label} must be minimum ${min}","max":"${label} must be maximum ${max}","range":"${label} must be between ${min}-${max}"},"array":{"len":"Must be ${len} ${label}","min":"At least ${min} ${label}","max":"At most ${max} ${label}","range":"The amount of ${label} must be between ${min}-${max}"},"pattern":{"mismatch":"${label} does not match the pattern ${pattern}"}}},"Image":{"preview":"Preview"},"QRCode":{"expired":"QR code expired","refresh":"Refresh","scanned":"Scanned"},"ColorPicker":{"presetEmpty":"Empty","transparent":"Transparent","singleColor":"Single","gradientColor":"Gradient"}}},"443":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(8885),Lt=lt(4704);at.A=(nt,at)=>{const lt=Rt.useContext(Bt.A);return[Rt.useMemo((()=>{var Rt;const Bt=at||Lt.A[nt],Ht=null!==(Rt=null==lt?void 0:lt[nt])&&void 0!==Rt?Rt:{};return Object.assign(Object.assign({},"function"==typeof Bt?Bt():Bt),Ht||{})}),[nt,at,lt]),Rt.useMemo((()=>{const nt=null==lt?void 0:lt.locale;return(null==lt?void 0:lt.exist)&&!nt?Lt.A.locale:nt}),[lt])]}},"5128":function(nt,at,lt){"use strict";lt.d(at,{"Q3":function(){return genOverflowStyle},"_8":function(){return getMultipleSelectorUnit}});var Rt=lt(4336),Bt=lt(7209),Lt=lt(8615);const getMultipleSelectorUnit=nt=>{const{"multipleSelectItemHeight":at,"paddingXXS":lt,"lineWidth":Bt,"INTERNAL_FIXED_ITEM_MARGIN":Lt}=nt,Ht=nt.max(nt.calc(lt).sub(Bt).equal(),0);return{"basePadding":Ht,"containerPadding":nt.max(nt.calc(Ht).sub(Lt).equal(),0),"itemHeight":(0,Rt.zA)(at),"itemLineHeight":(0,Rt.zA)(nt.calc(at).sub(nt.calc(nt.lineWidth).mul(2)).equal())}},genOverflowStyle=nt=>{const{"componentCls":at,"iconCls":lt,"borderRadiusSM":Rt,"motionDurationSlow":Lt,"paddingXS":Ht,"multipleItemColorDisabled":jt,"multipleItemBorderColorDisabled":$t,"colorIcon":Kt,"colorIconHover":te,"INTERNAL_FIXED_ITEM_MARGIN":ne}=nt,re=`${at}-selection-overflow`;return{[re]:{"position":"relative","display":"flex","flex":"auto","flexWrap":"wrap","maxWidth":"100%","&-item":{"flex":"none","alignSelf":"center","maxWidth":"100%","display":"inline-flex"},[`${at}-selection-item`]:{"display":"flex","alignSelf":"center","flex":"none","boxSizing":"border-box","maxWidth":"100%","marginBlock":ne,"borderRadius":Rt,"cursor":"default","transition":`font-size ${Lt}, line-height ${Lt}, height ${Lt}`,"marginInlineEnd":nt.calc(ne).mul(2).equal(),"paddingInlineStart":Ht,"paddingInlineEnd":nt.calc(Ht).div(2).equal(),[`${at}-disabled&`]:{"color":jt,"borderColor":$t,"cursor":"not-allowed"},"&-content":{"display":"inline-block","marginInlineEnd":nt.calc(Ht).div(2).equal(),"overflow":"hidden","whiteSpace":"pre","textOverflow":"ellipsis"},"&-remove":Object.assign(Object.assign({},(0,Bt.Nk)()),{"display":"inline-flex","alignItems":"center","color":Kt,"fontWeight":"bold","fontSize":10,"lineHeight":"inherit","cursor":"pointer",[`> ${lt}`]:{"verticalAlign":"-0.2em"},"&:hover":{"color":te}})}}}},genSelectionStyle=(nt,at)=>{const{"componentCls":lt,"INTERNAL_FIXED_ITEM_MARGIN":Bt}=nt,Lt=`${lt}-selection-overflow`,Ht=nt.multipleSelectItemHeight,jt=(nt=>{const{"multipleSelectItemHeight":at,"selectHeight":lt,"lineWidth":Rt}=nt;return nt.calc(lt).sub(at).div(2).sub(Rt).equal()})(nt),$t=at?`${lt}-${at}`:"",Kt=getMultipleSelectorUnit(nt);return{[`${lt}-multiple${$t}`]:Object.assign(Object.assign({},genOverflowStyle(nt)),{[`${lt}-selector`]:{"display":"flex","alignItems":"center","width":"100%","height":"100%","paddingInline":Kt.basePadding,"paddingBlock":Kt.containerPadding,"borderRadius":nt.borderRadius,[`${lt}-disabled&`]:{"background":nt.multipleSelectorBgDisabled,"cursor":"not-allowed"},"&:after":{"display":"inline-block","width":0,"margin":`${(0,Rt.zA)(Bt)} 0`,"lineHeight":(0,Rt.zA)(Ht),"visibility":"hidden","content":'"\\a0"'}},[`${lt}-selection-item`]:{"height":Kt.itemHeight,"lineHeight":(0,Rt.zA)(Kt.itemLineHeight)},[`${lt}-selection-wrap`]:{"alignSelf":"flex-start","&:after":{"lineHeight":(0,Rt.zA)(Ht),"marginBlock":Bt}},[`${lt}-prefix`]:{"marginInlineStart":nt.calc(nt.inputPaddingHorizontalBase).sub(Kt.basePadding).equal()},[`${Lt}-item + ${Lt}-item,\n        ${lt}-prefix + ${lt}-selection-wrap\n      `]:{[`${lt}-selection-search`]:{"marginInlineStart":0},[`${lt}-selection-placeholder`]:{"insetInlineStart":0}},[`${Lt}-item-suffix`]:{"minHeight":Kt.itemHeight,"marginBlock":Bt},[`${lt}-selection-search`]:{"display":"inline-flex","position":"relative","maxWidth":"100%","marginInlineStart":nt.calc(nt.inputPaddingHorizontalBase).sub(jt).equal(),"\n          &-input,\n          &-mirror\n        ":{"height":Ht,"fontFamily":nt.fontFamily,"lineHeight":(0,Rt.zA)(Ht),"transition":`all ${nt.motionDurationSlow}`},"&-input":{"width":"100%","minWidth":4.1},"&-mirror":{"position":"absolute","top":0,"insetInlineStart":0,"insetInlineEnd":"auto","zIndex":999,"whiteSpace":"pre","visibility":"hidden"}},[`${lt}-selection-placeholder`]:{"position":"absolute","top":"50%","insetInlineStart":nt.calc(nt.inputPaddingHorizontalBase).sub(Kt.basePadding).equal(),"insetInlineEnd":nt.inputPaddingHorizontalBase,"transform":"translateY(-50%)","transition":`all ${nt.motionDurationSlow}`}})}};function genSizeStyle(nt,at){const{"componentCls":lt}=nt,Rt=at?`${lt}-${at}`:"",Bt={[`${lt}-multiple${Rt}`]:{"fontSize":nt.fontSize,[`${lt}-selector`]:{[`${lt}-show-search&`]:{"cursor":"text"}},[`\n        &${lt}-show-arrow ${lt}-selector,\n        &${lt}-allow-clear ${lt}-selector\n      `]:{"paddingInlineEnd":nt.calc(nt.fontSizeIcon).add(nt.controlPaddingHorizontal).equal()}}};return[genSelectionStyle(nt,at),Bt]}at.Ay=nt=>{const{"componentCls":at}=nt,lt=(0,Lt.oX)(nt,{"selectHeight":nt.controlHeightSM,"multipleSelectItemHeight":nt.multipleItemHeightSM,"borderRadius":nt.borderRadiusSM,"borderRadiusSM":nt.borderRadiusXS}),Rt=(0,Lt.oX)(nt,{"fontSize":nt.fontSizeLG,"selectHeight":nt.controlHeightLG,"multipleSelectItemHeight":nt.multipleItemHeightLG,"borderRadius":nt.borderRadiusLG,"borderRadiusSM":nt.borderRadius});return[genSizeStyle(nt),genSizeStyle(lt,"sm"),{[`${at}-multiple${at}-sm`]:{[`${at}-selection-placeholder`]:{"insetInline":nt.calc(nt.controlPaddingHorizontalSM).sub(nt.lineWidth).equal()},[`${at}-selection-search`]:{"marginInlineStart":2}}},genSizeStyle(Rt,"lg")]}},"5730":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return useIcons}});var Rt=lt(758),Bt=lt(9574),Lt=lt(9980),Ht=lt(2107),jt=lt(3973),$t={"icon":{"tag":"svg","attrs":{"viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},"name":"down","theme":"outlined"},Kt=lt(7588),te=function DownOutlined(nt,at){return Rt.createElement(Kt.A,(0,jt.A)({},nt,{"ref":at,"icon":$t}))};var ne=Rt.forwardRef(te),re=lt(5200),ae=lt(6251);function useIcons(nt){let{"suffixIcon":at,"clearIcon":lt,"menuItemSelectedIcon":jt,"removeIcon":$t,"loading":Kt,"multiple":te,"hasFeedback":oe,"prefixCls":se,"showSuffixIcon":le,"feedbackIcon":ue,"showArrow":ce,"componentName":he}=nt;const de=null!=lt?lt:Rt.createElement(Lt.A,null),getSuffixIconNode=nt=>null!==at||oe||ce?Rt.createElement(Rt.Fragment,null,!1!==le&&nt,oe&&ue):null;let fe=null;if(void 0!==at)fe=getSuffixIconNode(at);else if(Kt)fe=getSuffixIconNode(Rt.createElement(re.A,{"spin":!0}));else{const nt=`${se}-suffix`;fe=at=>{let{"open":lt,"showSearch":Bt}=at;return getSuffixIconNode(lt&&Bt?Rt.createElement(ae.A,{"className":nt}):Rt.createElement(ne,{"className":nt}))}}let pe=null;pe=void 0!==jt?jt:te?Rt.createElement(Bt.A,null):null;let ve=null;return ve=void 0!==$t?$t:Rt.createElement(Ht.A,null),{"clearIcon":de,"suffixIcon":fe,"itemIcon":pe,"removeIcon":ve}}},"3151":function(nt,at,lt){"use strict";lt.d(at,{"K6":function(){return NoCompactStyle},"RQ":function(){return useCompactItemContext}});var Rt=lt(758),Bt=lt(7500),Lt=lt.n(Bt),Ht=lt(7570),jt=lt(6623),$t=lt(2853),Kt=lt(303),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const te=Rt.createContext(null),useCompactItemContext=(nt,at)=>{const lt=Rt.useContext(te),Bt=Rt.useMemo((()=>{if(!lt)return"";const{"compactDirection":Rt,"isFirstItem":Bt,"isLastItem":Ht}=lt,jt="vertical"===Rt?"-vertical-":"-";return Lt()(`${nt}-compact${jt}item`,{[`${nt}-compact${jt}first-item`]:Bt,[`${nt}-compact${jt}last-item`]:Ht,[`${nt}-compact${jt}item-rtl`]:"rtl"===at})}),[nt,at,lt]);return{"compactSize":null==lt?void 0:lt.compactSize,"compactDirection":null==lt?void 0:lt.compactDirection,"compactItemClassnames":Bt}},NoCompactStyle=nt=>{const{"children":at}=nt;return Rt.createElement(te.Provider,{"value":null},at)},CompactItem=nt=>{const{"children":at}=nt,lt=__rest(nt,["children"]);return Rt.createElement(te.Provider,{"value":Rt.useMemo((()=>lt),[lt])},at)};at.Ay=nt=>{const{"getPrefixCls":at,"direction":lt}=Rt.useContext(jt.QO),{"size":Bt,"direction":ne,"block":re,"prefixCls":ae,"className":oe,"rootClassName":se,"children":le}=nt,ue=__rest(nt,["size","direction","block","prefixCls","className","rootClassName","children"]),ce=(0,$t.A)((nt=>null!=Bt?Bt:nt)),he=at("space-compact",ae),[de,fe]=(0,Kt.A)(he),pe=Lt()(he,fe,{[`${he}-rtl`]:"rtl"===lt,[`${he}-block`]:re,[`${he}-vertical`]:"vertical"===ne},oe,se),ve=Rt.useContext(te),Ae=(0,Ht.A)(le),we=Rt.useMemo((()=>Ae.map(((nt,at)=>{const lt=(null==nt?void 0:nt.key)||`${he}-item-${at}`;return Rt.createElement(CompactItem,{"key":lt,"compactSize":ce,"compactDirection":ne,"isFirstItem":0===at&&(!ve||(null==ve?void 0:ve.isFirstItem)),"isLastItem":at===Ae.length-1&&(!ve||(null==ve?void 0:ve.isLastItem))},nt)}))),[Bt,Ae,ve]);return 0===Ae.length?null:de(Rt.createElement("div",Object.assign({"className":pe},ue),we))}},"303":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return Lt}});var Rt=lt(5926),Bt=lt(8615);var compact=nt=>{const{"componentCls":at}=nt;return{[at]:{"&-block":{"display":"flex","width":"100%"},"&-vertical":{"flexDirection":"column"}}}};const genSpaceStyle=nt=>{const{"componentCls":at,"antCls":lt}=nt;return{[at]:{"display":"inline-flex","&-rtl":{"direction":"rtl"},"&-vertical":{"flexDirection":"column"},"&-align":{"flexDirection":"column","&-center":{"alignItems":"center"},"&-start":{"alignItems":"flex-start"},"&-end":{"alignItems":"flex-end"},"&-baseline":{"alignItems":"baseline"}},[`${at}-item:empty`]:{"display":"none"},[`${at}-item > ${lt}-badge-not-a-wrapper:only-child`]:{"display":"block"}}}},genSpaceGapStyle=nt=>{const{"componentCls":at}=nt;return{[at]:{"&-gap-row-small":{"rowGap":nt.spaceGapSmallSize},"&-gap-row-middle":{"rowGap":nt.spaceGapMiddleSize},"&-gap-row-large":{"rowGap":nt.spaceGapLargeSize},"&-gap-col-small":{"columnGap":nt.spaceGapSmallSize},"&-gap-col-middle":{"columnGap":nt.spaceGapMiddleSize},"&-gap-col-large":{"columnGap":nt.spaceGapLargeSize}}}};var Lt=(0,Rt.OF)("Space",(nt=>{const at=(0,Bt.oX)(nt,{"spaceGapSmallSize":nt.paddingXS,"spaceGapMiddleSize":nt.padding,"spaceGapLargeSize":nt.paddingLG});return[genSpaceStyle(at),genSpaceGapStyle(at),compact(at)]}),(()=>({})),{"resetStyle":!1})},"8686":function(nt,at,lt){"use strict";function compactItemBorder(nt,at,lt){const{"focusElCls":Rt,"focus":Bt,"borderElCls":Lt}=lt,Ht=Lt?"> *":"",jt=["hover",Bt?"focus":null,"active"].filter(Boolean).map((nt=>`&:${nt} ${Ht}`)).join(",");return{[`&-item:not(${at}-last-item)`]:{"marginInlineEnd":nt.calc(nt.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[jt]:{"zIndex":2}},Rt?{[`&${Rt}`]:{"zIndex":2}}:{}),{[`&[disabled] ${Ht}`]:{"zIndex":0}})}}function compactItemBorderRadius(nt,at,lt){const{"borderElCls":Rt}=lt,Bt=Rt?`> ${Rt}`:"";return{[`&-item:not(${at}-first-item):not(${at}-last-item) ${Bt}`]:{"borderRadius":0},[`&-item:not(${at}-last-item)${at}-first-item`]:{[`& ${Bt}, &${nt}-sm ${Bt}, &${nt}-lg ${Bt}`]:{"borderStartEndRadius":0,"borderEndEndRadius":0}},[`&-item:not(${at}-first-item)${at}-last-item`]:{[`& ${Bt}, &${nt}-sm ${Bt}, &${nt}-lg ${Bt}`]:{"borderStartStartRadius":0,"borderEndStartRadius":0}}}}function genCompactItemStyle(nt){let at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{"focus":!0};const{"componentCls":lt}=nt,Rt=`${lt}-compact`;return{[Rt]:Object.assign(Object.assign({},compactItemBorder(nt,Rt,at)),compactItemBorderRadius(lt,Rt,at))}}lt.d(at,{"G":function(){return genCompactItemStyle}})},"7209":function(nt,at,lt){"use strict";lt.d(at,{"K8":function(){return genFocusStyle},"L9":function(){return Bt},"Nk":function(){return resetIcon},"Y1":function(){return operationUnit},"av":function(){return genLinkStyle},"dF":function(){return resetComponent},"jk":function(){return genFocusOutline},"jz":function(){return genIconStyle},"t6":function(){return clearFix},"vj":function(){return genCommonStyle}});var Rt=lt(4336);const Bt={"overflow":"hidden","whiteSpace":"nowrap","textOverflow":"ellipsis"},resetComponent=function(nt){let at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{"boxSizing":"border-box","margin":0,"padding":0,"color":nt.colorText,"fontSize":nt.fontSize,"lineHeight":nt.lineHeight,"listStyle":"none","fontFamily":at?"inherit":nt.fontFamily}},resetIcon=()=>({"display":"inline-flex","alignItems":"center","color":"inherit","fontStyle":"normal","lineHeight":0,"textAlign":"center","textTransform":"none","verticalAlign":"-0.125em","textRendering":"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{"lineHeight":1},"svg":{"display":"inline-block"}}),clearFix=()=>({"&::before":{"display":"table","content":'""'},"&::after":{"display":"table","clear":"both","content":'""'}}),genLinkStyle=nt=>({"a":{"color":nt.colorLink,"textDecoration":nt.linkDecoration,"backgroundColor":"transparent","outline":"none","cursor":"pointer","transition":`color ${nt.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{"color":nt.colorLinkHover},"&:active":{"color":nt.colorLinkActive},"&:active, &:hover":{"textDecoration":nt.linkHoverDecoration,"outline":0},"&:focus":{"textDecoration":nt.linkFocusDecoration,"outline":0},"&[disabled]":{"color":nt.colorTextDisabled,"cursor":"not-allowed"}}}),genCommonStyle=(nt,at,lt,Rt)=>{const Bt=`[class^="${at}"], [class*=" ${at}"]`,Lt=lt?`.${lt}`:Bt,Ht={"boxSizing":"border-box","&::before, &::after":{"boxSizing":"border-box"}};let jt={};return!1!==Rt&&(jt={"fontFamily":nt.fontFamily,"fontSize":nt.fontSize}),{[Lt]:Object.assign(Object.assign(Object.assign({},jt),Ht),{[Bt]:Ht})}},genFocusOutline=(nt,at)=>({"outline":`${(0,Rt.zA)(nt.lineWidthFocus)} solid ${nt.colorPrimaryBorder}`,"outlineOffset":null!=at?at:1,"transition":"outline-offset 0s, outline 0s"}),genFocusStyle=(nt,at)=>({"&:focus-visible":Object.assign({},genFocusOutline(nt,at))}),genIconStyle=nt=>({[`.${nt}`]:Object.assign(Object.assign({},resetIcon()),{[`.${nt} .${nt}-icon`]:{"display":"block"}})}),operationUnit=nt=>Object.assign(Object.assign({"color":nt.colorLink,"textDecoration":nt.linkDecoration,"outline":"none","cursor":"pointer","transition":`all ${nt.motionDurationSlow}`,"border":0,"padding":0,"background":"none","userSelect":"none"},genFocusStyle(nt)),{"&:focus, &:hover":{"color":nt.colorLinkHover},"&:active":{"color":nt.colorLinkActive}})},"9692":function(nt,at,lt){"use strict";lt.d(at,{"b":function(){return initMotion}});const initMotionCommon=nt=>({"animationDuration":nt,"animationFillMode":"both"}),initMotionCommonLeave=nt=>({"animationDuration":nt,"animationFillMode":"both"}),initMotion=function(nt,at,lt,Rt){const Bt=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return{[`\n      ${Bt}${nt}-enter,\n      ${Bt}${nt}-appear\n    `]:Object.assign(Object.assign({},initMotionCommon(Rt)),{"animationPlayState":"paused"}),[`${Bt}${nt}-leave`]:Object.assign(Object.assign({},initMotionCommonLeave(Rt)),{"animationPlayState":"paused"}),[`\n      ${Bt}${nt}-enter${nt}-enter-active,\n      ${Bt}${nt}-appear${nt}-appear-active\n    `]:{"animationName":at,"animationPlayState":"running"},[`${Bt}${nt}-leave${nt}-leave-active`]:{"animationName":lt,"animationPlayState":"running","pointerEvents":"none"}}}},"6411":function(nt,at,lt){"use strict";lt.d(at,{"Mh":function(){return initMoveMotion}});var Rt=lt(4336),Bt=lt(9692);const Lt=new Rt.Mo("antMoveDownIn",{"0%":{"transform":"translate3d(0, 100%, 0)","transformOrigin":"0 0","opacity":0},"100%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1}}),Ht=new Rt.Mo("antMoveDownOut",{"0%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1},"100%":{"transform":"translate3d(0, 100%, 0)","transformOrigin":"0 0","opacity":0}}),jt=new Rt.Mo("antMoveLeftIn",{"0%":{"transform":"translate3d(-100%, 0, 0)","transformOrigin":"0 0","opacity":0},"100%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1}}),$t=new Rt.Mo("antMoveLeftOut",{"0%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1},"100%":{"transform":"translate3d(-100%, 0, 0)","transformOrigin":"0 0","opacity":0}}),Kt=new Rt.Mo("antMoveRightIn",{"0%":{"transform":"translate3d(100%, 0, 0)","transformOrigin":"0 0","opacity":0},"100%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1}}),te=new Rt.Mo("antMoveRightOut",{"0%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1},"100%":{"transform":"translate3d(100%, 0, 0)","transformOrigin":"0 0","opacity":0}}),ne={"move-up":{"inKeyframes":new Rt.Mo("antMoveUpIn",{"0%":{"transform":"translate3d(0, -100%, 0)","transformOrigin":"0 0","opacity":0},"100%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1}}),"outKeyframes":new Rt.Mo("antMoveUpOut",{"0%":{"transform":"translate3d(0, 0, 0)","transformOrigin":"0 0","opacity":1},"100%":{"transform":"translate3d(0, -100%, 0)","transformOrigin":"0 0","opacity":0}})},"move-down":{"inKeyframes":Lt,"outKeyframes":Ht},"move-left":{"inKeyframes":jt,"outKeyframes":$t},"move-right":{"inKeyframes":Kt,"outKeyframes":te}},initMoveMotion=(nt,at)=>{const{"antCls":lt}=nt,Rt=`${lt}-${at}`,{"inKeyframes":Lt,"outKeyframes":Ht}=ne[at];return[(0,Bt.b)(Rt,Lt,Ht,nt.motionDurationMid),{[`\n        ${Rt}-enter,\n        ${Rt}-appear\n      `]:{"opacity":0,"animationTimingFunction":nt.motionEaseOutCirc},[`${Rt}-leave`]:{"animationTimingFunction":nt.motionEaseInOutCirc}}]}},"1889":function(nt,at,lt){"use strict";lt.d(at,{"YU":function(){return $t},"_j":function(){return initSlideMotion},"nP":function(){return jt},"ox":function(){return Lt},"vR":function(){return Ht}});var Rt=lt(4336),Bt=lt(9692);const Lt=new Rt.Mo("antSlideUpIn",{"0%":{"transform":"scaleY(0.8)","transformOrigin":"0% 0%","opacity":0},"100%":{"transform":"scaleY(1)","transformOrigin":"0% 0%","opacity":1}}),Ht=new Rt.Mo("antSlideUpOut",{"0%":{"transform":"scaleY(1)","transformOrigin":"0% 0%","opacity":1},"100%":{"transform":"scaleY(0.8)","transformOrigin":"0% 0%","opacity":0}}),jt=new Rt.Mo("antSlideDownIn",{"0%":{"transform":"scaleY(0.8)","transformOrigin":"100% 100%","opacity":0},"100%":{"transform":"scaleY(1)","transformOrigin":"100% 100%","opacity":1}}),$t=new Rt.Mo("antSlideDownOut",{"0%":{"transform":"scaleY(1)","transformOrigin":"100% 100%","opacity":1},"100%":{"transform":"scaleY(0.8)","transformOrigin":"100% 100%","opacity":0}}),Kt=new Rt.Mo("antSlideLeftIn",{"0%":{"transform":"scaleX(0.8)","transformOrigin":"0% 0%","opacity":0},"100%":{"transform":"scaleX(1)","transformOrigin":"0% 0%","opacity":1}}),te=new Rt.Mo("antSlideLeftOut",{"0%":{"transform":"scaleX(1)","transformOrigin":"0% 0%","opacity":1},"100%":{"transform":"scaleX(0.8)","transformOrigin":"0% 0%","opacity":0}}),ne=new Rt.Mo("antSlideRightIn",{"0%":{"transform":"scaleX(0.8)","transformOrigin":"100% 0%","opacity":0},"100%":{"transform":"scaleX(1)","transformOrigin":"100% 0%","opacity":1}}),re=new Rt.Mo("antSlideRightOut",{"0%":{"transform":"scaleX(1)","transformOrigin":"100% 0%","opacity":1},"100%":{"transform":"scaleX(0.8)","transformOrigin":"100% 0%","opacity":0}}),ae={"slide-up":{"inKeyframes":Lt,"outKeyframes":Ht},"slide-down":{"inKeyframes":jt,"outKeyframes":$t},"slide-left":{"inKeyframes":Kt,"outKeyframes":te},"slide-right":{"inKeyframes":ne,"outKeyframes":re}},initSlideMotion=(nt,at)=>{const{"antCls":lt}=nt,Rt=`${lt}-${at}`,{"inKeyframes":Lt,"outKeyframes":Ht}=ae[at];return[(0,Bt.b)(Rt,Lt,Ht,nt.motionDurationMid),{[`\n      ${Rt}-enter,\n      ${Rt}-appear\n    `]:{"transform":"scale(0)","transformOrigin":"0% 0%","opacity":0,"animationTimingFunction":nt.motionEaseOutQuint,"&-prepare":{"transform":"scale(1)"}},[`${Rt}-leave`]:{"animationTimingFunction":nt.motionEaseInQuint}}]}},"2399":function(nt,at,lt){"use strict";lt.d(at,{"j":function(){return genRoundedArrow},"n":function(){return getArrowToken}});var Rt=lt(4336);function getArrowToken(nt){const{"sizePopupArrow":at,"borderRadiusXS":lt,"borderRadiusOuter":Rt}=nt,Bt=at/2,Lt=Bt,Ht=1*Rt/Math.sqrt(2),jt=Bt-Rt*(1-1/Math.sqrt(2)),$t=Bt-lt*(1/Math.sqrt(2)),Kt=Rt*(Math.sqrt(2)-1)+lt*(1/Math.sqrt(2)),te=2*Bt-$t,ne=Kt,re=2*Bt-Ht,ae=jt,oe=2*Bt-0,se=Lt,le=Bt*Math.sqrt(2)+Rt*(Math.sqrt(2)-2),ue=Rt*(Math.sqrt(2)-1);return{"arrowShadowWidth":le,"arrowPath":`path('M 0 ${Lt} A ${Rt} ${Rt} 0 0 0 ${Ht} ${jt} L ${$t} ${Kt} A ${lt} ${lt} 0 0 1 ${te} ${ne} L ${re} ${ae} A ${Rt} ${Rt} 0 0 0 ${oe} ${se} Z')`,"arrowPolygon":`polygon(${ue}px 100%, 50% ${ue}px, ${2*Bt-ue}px 100%, ${ue}px 100%)`}}const genRoundedArrow=(nt,at,lt)=>{const{"sizePopupArrow":Bt,"arrowPolygon":Lt,"arrowPath":Ht,"arrowShadowWidth":jt,"borderRadiusXS":$t,"calc":Kt}=nt;return{"pointerEvents":"none","width":Bt,"height":Bt,"overflow":"hidden","&::before":{"position":"absolute","bottom":0,"insetInlineStart":0,"width":Bt,"height":Kt(Bt).div(2).equal(),"background":at,"clipPath":{"_multi_value_":!0,"value":[Lt,Ht]},"content":'""'},"&::after":{"content":'""',"position":"absolute","width":jt,"height":jt,"bottom":0,"insetInline":0,"margin":"auto","borderRadius":{"_skip_check_":!0,"value":`0 0 ${(0,Rt.zA)($t)} 0`},"transform":"translateY(50%) rotate(-135deg)","boxShadow":lt,"zIndex":0,"background":"transparent"}}}},"1414":function(nt,at,lt){"use strict";lt.d(at,{"sb":function(){return Lt},"vG":function(){return Ht}});var Rt=lt(758),Bt=lt(9563);const Lt={"token":Bt.A,"override":{"override":Bt.A},"hashed":!0},Ht=Rt.createContext(Lt)},"3606":function(nt,at,lt){"use strict";lt.d(at,{"s":function(){return Rt}});const Rt=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},"3257":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return Kt}});var Rt=lt(4336),Bt=lt(8264),Lt=lt(9563),Ht=lt(5779);var shared_genRadius=nt=>{let at=nt,lt=nt,Rt=nt,Bt=nt;return nt<6&&nt>=5?at=nt+1:nt<16&&nt>=6?at=nt+2:nt>=16&&(at=16),nt<7&&nt>=5?lt=4:nt<8&&nt>=7?lt=5:nt<14&&nt>=8?lt=6:nt<16&&nt>=14?lt=7:nt>=16&&(lt=8),nt<6&&nt>=2?Rt=1:nt>=6&&(Rt=2),nt>4&&nt<8?Bt=4:nt>=8&&(Bt=6),{"borderRadius":nt,"borderRadiusXS":Rt,"borderRadiusSM":lt,"borderRadiusLG":at,"borderRadiusOuter":Bt}};var shared_genControlHeight=nt=>{const{"controlHeight":at}=nt;return{"controlHeightSM":.75*at,"controlHeightXS":.5*at,"controlHeightLG":1.25*at}},jt=lt(4885);var shared_genFontMapToken=nt=>{const at=(0,jt.A)(nt),lt=at.map((nt=>nt.size)),Rt=at.map((nt=>nt.lineHeight)),Bt=lt[1],Lt=lt[0],Ht=lt[2],$t=Rt[1],Kt=Rt[0],te=Rt[2];return{"fontSizeSM":Lt,"fontSize":Bt,"fontSizeLG":Ht,"fontSizeXL":lt[3],"fontSizeHeading1":lt[6],"fontSizeHeading2":lt[5],"fontSizeHeading3":lt[4],"fontSizeHeading4":lt[3],"fontSizeHeading5":lt[2],"lineHeight":$t,"lineHeightLG":te,"lineHeightSM":Kt,"fontHeight":Math.round($t*Bt),"fontHeightLG":Math.round(te*Ht),"fontHeightSM":Math.round(Kt*Lt),"lineHeightHeading1":Rt[6],"lineHeightHeading2":Rt[5],"lineHeightHeading3":Rt[4],"lineHeightHeading4":Rt[3],"lineHeightHeading5":Rt[2]}};const getAlphaColor=(nt,at)=>new Ht.Y(nt).setA(at).toRgbString(),getSolidColor=(nt,at)=>new Ht.Y(nt).darken(at).toHexString(),generateColorPalettes=nt=>{const at=(0,Bt.cM)(nt);return{"1":at[0],"2":at[1],"3":at[2],"4":at[3],"5":at[4],"6":at[5],"7":at[6],"8":at[4],"9":at[5],"10":at[6]}},generateNeutralColorPalettes=(nt,at)=>{const lt=nt||"#fff",Rt=at||"#000";return{"colorBgBase":lt,"colorTextBase":Rt,"colorText":getAlphaColor(Rt,.88),"colorTextSecondary":getAlphaColor(Rt,.65),"colorTextTertiary":getAlphaColor(Rt,.45),"colorTextQuaternary":getAlphaColor(Rt,.25),"colorFill":getAlphaColor(Rt,.15),"colorFillSecondary":getAlphaColor(Rt,.06),"colorFillTertiary":getAlphaColor(Rt,.04),"colorFillQuaternary":getAlphaColor(Rt,.02),"colorBgSolid":getAlphaColor(Rt,1),"colorBgSolidHover":getAlphaColor(Rt,.75),"colorBgSolidActive":getAlphaColor(Rt,.95),"colorBgLayout":getSolidColor(lt,4),"colorBgContainer":getSolidColor(lt,0),"colorBgElevated":getSolidColor(lt,0),"colorBgSpotlight":getAlphaColor(Rt,.85),"colorBgBlur":"transparent","colorBorder":getSolidColor(lt,15),"colorBorderSecondary":getSolidColor(lt,6)}};const $t=(0,Rt.an)((function derivative(nt){Bt.uy.pink=Bt.uy.magenta,Bt.UA.pink=Bt.UA.magenta;const at=Object.keys(Lt.r).map((at=>{const lt=nt[at]===Bt.uy[at]?Bt.UA[at]:(0,Bt.cM)(nt[at]);return Array.from({"length":10},(()=>1)).reduce(((nt,Rt,Bt)=>(nt[`${at}-${Bt+1}`]=lt[Bt],nt[`${at}${Bt+1}`]=lt[Bt],nt)),{})})).reduce(((nt,at)=>nt=Object.assign(Object.assign({},nt),at)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nt),at),function genColorMapToken(nt,at){let{"generateColorPalettes":lt,"generateNeutralColorPalettes":Rt}=at;const{"colorSuccess":Bt,"colorWarning":Lt,"colorError":jt,"colorInfo":$t,"colorPrimary":Kt,"colorBgBase":te,"colorTextBase":ne}=nt,re=lt(Kt),ae=lt(Bt),oe=lt(Lt),se=lt(jt),le=lt($t),ue=Rt(te,ne),ce=lt(nt.colorLink||nt.colorInfo),he=new Ht.Y(se[1]).mix(new Ht.Y(se[3]),50).toHexString();return Object.assign(Object.assign({},ue),{"colorPrimaryBg":re[1],"colorPrimaryBgHover":re[2],"colorPrimaryBorder":re[3],"colorPrimaryBorderHover":re[4],"colorPrimaryHover":re[5],"colorPrimary":re[6],"colorPrimaryActive":re[7],"colorPrimaryTextHover":re[8],"colorPrimaryText":re[9],"colorPrimaryTextActive":re[10],"colorSuccessBg":ae[1],"colorSuccessBgHover":ae[2],"colorSuccessBorder":ae[3],"colorSuccessBorderHover":ae[4],"colorSuccessHover":ae[4],"colorSuccess":ae[6],"colorSuccessActive":ae[7],"colorSuccessTextHover":ae[8],"colorSuccessText":ae[9],"colorSuccessTextActive":ae[10],"colorErrorBg":se[1],"colorErrorBgHover":se[2],"colorErrorBgFilledHover":he,"colorErrorBgActive":se[3],"colorErrorBorder":se[3],"colorErrorBorderHover":se[4],"colorErrorHover":se[5],"colorError":se[6],"colorErrorActive":se[7],"colorErrorTextHover":se[8],"colorErrorText":se[9],"colorErrorTextActive":se[10],"colorWarningBg":oe[1],"colorWarningBgHover":oe[2],"colorWarningBorder":oe[3],"colorWarningBorderHover":oe[4],"colorWarningHover":oe[4],"colorWarning":oe[6],"colorWarningActive":oe[7],"colorWarningTextHover":oe[8],"colorWarningText":oe[9],"colorWarningTextActive":oe[10],"colorInfoBg":le[1],"colorInfoBgHover":le[2],"colorInfoBorder":le[3],"colorInfoBorderHover":le[4],"colorInfoHover":le[4],"colorInfo":le[6],"colorInfoActive":le[7],"colorInfoTextHover":le[8],"colorInfoText":le[9],"colorInfoTextActive":le[10],"colorLinkHover":ce[4],"colorLink":ce[6],"colorLinkActive":ce[7],"colorBgMask":new Ht.Y("#000").setA(.45).toRgbString(),"colorWhite":"#fff"})}(nt,{"generateColorPalettes":generateColorPalettes,"generateNeutralColorPalettes":generateNeutralColorPalettes})),shared_genFontMapToken(nt.fontSize)),function genSizeMapToken(nt){const{"sizeUnit":at,"sizeStep":lt}=nt;return{"sizeXXL":at*(lt+8),"sizeXL":at*(lt+4),"sizeLG":at*(lt+2),"sizeMD":at*(lt+1),"sizeMS":at*lt,"size":at*lt,"sizeSM":at*(lt-1),"sizeXS":at*(lt-2),"sizeXXS":at*(lt-3)}}(nt)),shared_genControlHeight(nt)),function genCommonMapToken(nt){const{"motionUnit":at,"motionBase":lt,"borderRadius":Rt,"lineWidth":Bt}=nt;return Object.assign({"motionDurationFast":`${(lt+at).toFixed(1)}s`,"motionDurationMid":`${(lt+2*at).toFixed(1)}s`,"motionDurationSlow":`${(lt+3*at).toFixed(1)}s`,"lineWidthBold":Bt+1},shared_genRadius(Rt))}(nt))}));var Kt=$t},"9563":function(nt,at,lt){"use strict";lt.d(at,{"r":function(){return Rt}});const Rt={"blue":"#1677FF","purple":"#722ED1","cyan":"#13C2C2","green":"#52C41A","magenta":"#EB2F96","pink":"#EB2F96","red":"#F5222D","orange":"#FA8C16","yellow":"#FADB14","volcano":"#FA541C","geekblue":"#2F54EB","gold":"#FAAD14","lime":"#A0D911"},Bt=Object.assign(Object.assign({},Rt),{"colorPrimary":"#1677ff","colorSuccess":"#52c41a","colorWarning":"#faad14","colorError":"#ff4d4f","colorInfo":"#1677ff","colorLink":"","colorTextBase":"","colorBgBase":"","fontFamily":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'","fontFamilyCode":"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace","fontSize":14,"lineWidth":1,"lineType":"solid","motionUnit":.1,"motionBase":0,"motionEaseOutCirc":"cubic-bezier(0.08, 0.82, 0.17, 1)","motionEaseInOutCirc":"cubic-bezier(0.78, 0.14, 0.15, 0.86)","motionEaseOut":"cubic-bezier(0.215, 0.61, 0.355, 1)","motionEaseInOut":"cubic-bezier(0.645, 0.045, 0.355, 1)","motionEaseOutBack":"cubic-bezier(0.12, 0.4, 0.29, 1.46)","motionEaseInBack":"cubic-bezier(0.71, -0.46, 0.88, 0.6)","motionEaseInQuint":"cubic-bezier(0.755, 0.05, 0.855, 0.06)","motionEaseOutQuint":"cubic-bezier(0.23, 1, 0.32, 1)","borderRadius":6,"sizeUnit":4,"sizeStep":4,"sizePopupArrow":16,"controlHeight":32,"zIndexBase":0,"zIndexPopupBase":1e3,"opacityImage":1,"wireframe":!1,"motion":!0});at.A=Bt},"4885":function(nt,at,lt){"use strict";function getLineHeight(nt){return(nt+8)/nt}function getFontSizes(nt){const at=Array.from({"length":10}).map(((at,lt)=>{const Rt=lt-1,Bt=nt*Math.pow(Math.E,Rt/5),Lt=lt>1?Math.floor(Bt):Math.ceil(Bt);return 2*Math.floor(Lt/2)}));return at[1]=nt,at.map((nt=>({"size":nt,"lineHeight":getLineHeight(nt)})))}lt.d(at,{"A":function(){return getFontSizes},"k":function(){return getLineHeight}})},"3727":function(nt,at,lt){"use strict";lt.d(at,{"Ay":function(){return useToken},"Is":function(){return ne}});var Rt=lt(758),Bt=lt(4336),Lt="5.24.1",Ht=lt(1414),jt=lt(3257),$t=lt(9563),Kt=lt(5779),te=lt(797),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};function formatToken(nt){const{"override":at}=nt,lt=__rest(nt,["override"]),Rt=Object.assign({},at);Object.keys($t.A).forEach((nt=>{delete Rt[nt]}));const Bt=Object.assign(Object.assign({},lt),Rt),Lt=1200,Ht=1600;if(!1===Bt.motion){const nt="0s";Bt.motionDurationFast=nt,Bt.motionDurationMid=nt,Bt.motionDurationSlow=nt}return Object.assign(Object.assign(Object.assign({},Bt),{"colorFillContent":Bt.colorFillSecondary,"colorFillContentHover":Bt.colorFill,"colorFillAlter":Bt.colorFillQuaternary,"colorBgContainerDisabled":Bt.colorFillTertiary,"colorBorderBg":Bt.colorBgContainer,"colorSplit":(0,te.A)(Bt.colorBorderSecondary,Bt.colorBgContainer),"colorTextPlaceholder":Bt.colorTextQuaternary,"colorTextDisabled":Bt.colorTextQuaternary,"colorTextHeading":Bt.colorText,"colorTextLabel":Bt.colorTextSecondary,"colorTextDescription":Bt.colorTextTertiary,"colorTextLightSolid":Bt.colorWhite,"colorHighlight":Bt.colorError,"colorBgTextHover":Bt.colorFillSecondary,"colorBgTextActive":Bt.colorFill,"colorIcon":Bt.colorTextTertiary,"colorIconHover":Bt.colorText,"colorErrorOutline":(0,te.A)(Bt.colorErrorBg,Bt.colorBgContainer),"colorWarningOutline":(0,te.A)(Bt.colorWarningBg,Bt.colorBgContainer),"fontSizeIcon":Bt.fontSizeSM,"lineWidthFocus":3*Bt.lineWidth,"lineWidth":Bt.lineWidth,"controlOutlineWidth":2*Bt.lineWidth,"controlInteractiveSize":Bt.controlHeight/2,"controlItemBgHover":Bt.colorFillTertiary,"controlItemBgActive":Bt.colorPrimaryBg,"controlItemBgActiveHover":Bt.colorPrimaryBgHover,"controlItemBgActiveDisabled":Bt.colorFill,"controlTmpOutline":Bt.colorFillQuaternary,"controlOutline":(0,te.A)(Bt.colorPrimaryBg,Bt.colorBgContainer),"lineType":Bt.lineType,"borderRadius":Bt.borderRadius,"borderRadiusXS":Bt.borderRadiusXS,"borderRadiusSM":Bt.borderRadiusSM,"borderRadiusLG":Bt.borderRadiusLG,"fontWeightStrong":600,"opacityLoading":.65,"linkDecoration":"none","linkHoverDecoration":"none","linkFocusDecoration":"none","controlPaddingHorizontal":12,"controlPaddingHorizontalSM":8,"paddingXXS":Bt.sizeXXS,"paddingXS":Bt.sizeXS,"paddingSM":Bt.sizeSM,"padding":Bt.size,"paddingMD":Bt.sizeMD,"paddingLG":Bt.sizeLG,"paddingXL":Bt.sizeXL,"paddingContentHorizontalLG":Bt.sizeLG,"paddingContentVerticalLG":Bt.sizeMS,"paddingContentHorizontal":Bt.sizeMS,"paddingContentVertical":Bt.sizeSM,"paddingContentHorizontalSM":Bt.size,"paddingContentVerticalSM":Bt.sizeXS,"marginXXS":Bt.sizeXXS,"marginXS":Bt.sizeXS,"marginSM":Bt.sizeSM,"margin":Bt.size,"marginMD":Bt.sizeMD,"marginLG":Bt.sizeLG,"marginXL":Bt.sizeXL,"marginXXL":Bt.sizeXXL,"boxShadow":"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowSecondary":"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowTertiary":"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ","screenXS":480,"screenXSMin":480,"screenXSMax":575,"screenSM":576,"screenSMMin":576,"screenSMMax":767,"screenMD":768,"screenMDMin":768,"screenMDMax":991,"screenLG":992,"screenLGMin":992,"screenLGMax":1199,"screenXL":Lt,"screenXLMin":Lt,"screenXLMax":1599,"screenXXL":Ht,"screenXXLMin":Ht,"boxShadowPopoverArrow":"2px 2px 5px rgba(0, 0, 0, 0.05)","boxShadowCard":`\n      0 1px 2px -2px ${new Kt.Y("rgba(0, 0, 0, 0.16)").toRgbString()},\n      0 3px 6px 0 ${new Kt.Y("rgba(0, 0, 0, 0.12)").toRgbString()},\n      0 5px 12px 4px ${new Kt.Y("rgba(0, 0, 0, 0.09)").toRgbString()}\n    `,"boxShadowDrawerRight":"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowDrawerLeft":"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowDrawerUp":"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowDrawerDown":"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ","boxShadowTabsOverflowLeft":"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)","boxShadowTabsOverflowRight":"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)","boxShadowTabsOverflowTop":"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)","boxShadowTabsOverflowBottom":"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Rt)}var useToken_rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};const ne={"lineHeight":!0,"lineHeightSM":!0,"lineHeightLG":!0,"lineHeightHeading1":!0,"lineHeightHeading2":!0,"lineHeightHeading3":!0,"lineHeightHeading4":!0,"lineHeightHeading5":!0,"opacityLoading":!0,"fontWeightStrong":!0,"zIndexPopupBase":!0,"zIndexBase":!0,"opacityImage":!0},re={"size":!0,"sizeSM":!0,"sizeLG":!0,"sizeMD":!0,"sizeXS":!0,"sizeXXS":!0,"sizeMS":!0,"sizeXL":!0,"sizeXXL":!0,"sizeUnit":!0,"sizeStep":!0,"motionBase":!0,"motionUnit":!0},ae={"screenXS":!0,"screenXSMin":!0,"screenXSMax":!0,"screenSM":!0,"screenSMMin":!0,"screenSMMax":!0,"screenMD":!0,"screenMDMin":!0,"screenMDMax":!0,"screenLG":!0,"screenLGMin":!0,"screenLGMax":!0,"screenXL":!0,"screenXLMin":!0,"screenXLMax":!0,"screenXXL":!0,"screenXXLMin":!0},getComputedToken=(nt,at,lt)=>{const Rt=lt.getDerivativeToken(nt),{"override":Bt}=at,Lt=useToken_rest(at,["override"]);let Ht=Object.assign(Object.assign({},Rt),{"override":Bt});return Ht=formatToken(Ht),Lt&&Object.entries(Lt).forEach((nt=>{let[at,lt]=nt;const{"theme":Rt}=lt,Bt=useToken_rest(lt,["theme"]);let Lt=Bt;Rt&&(Lt=getComputedToken(Object.assign(Object.assign({},Ht),Bt),{"override":Bt},Rt)),Ht[at]=Lt})),Ht};function useToken(){const{"token":nt,"hashed":at,"theme":lt,"override":Kt,"cssVar":te}=Rt.useContext(Ht.vG),oe=`${Lt}-${at||""}`,se=lt||jt.A,[le,ue,ce]=(0,Bt.hV)(se,[$t.A,nt],{"salt":oe,"override":Kt,"getComputedToken":getComputedToken,"formatToken":formatToken,"cssVar":te&&{"prefix":te.prefix,"key":te.key,"unitless":ne,"ignore":re,"preserve":ae}});return[se,ce,at?ue:"",le,te]}},"5926":function(nt,at,lt){"use strict";lt.d(at,{"OF":function(){return $t},"Or":function(){return Kt},"bf":function(){return te}});var Rt=lt(758),Bt=lt(8615),Lt=lt(6623),Ht=lt(7209),jt=lt(3727);const{"genStyleHooks":$t,"genComponentStyleHook":Kt,"genSubStyleComponent":te}=(0,Bt.L_)({"usePrefix":()=>{const{"getPrefixCls":nt,"iconPrefixCls":at}=(0,Rt.useContext)(Lt.QO);return{"rootPrefixCls":nt(),"iconPrefixCls":at}},"useToken":()=>{const[nt,at,lt,Rt,Bt]=(0,jt.Ay)();return{"theme":nt,"realToken":at,"hashId":lt,"token":Rt,"cssVar":Bt}},"useCSP":()=>{const{"csp":nt}=(0,Rt.useContext)(Lt.QO);return null!=nt?nt:{}},"getResetStyles":(nt,at)=>{var lt;return[{"&":(0,Ht.av)(nt)},(0,Ht.jz)(null!==(lt=null==at?void 0:at.prefix.iconPrefixCls)&&void 0!==lt?lt:Lt.pM)]},"getCommonStyle":Ht.vj,"getCompUnitless":()=>jt.Is})},"797":function(nt,at,lt){"use strict";var Rt=lt(5779);function isStableColor(nt){return nt>=0&&nt<=255}at.A=function getAlphaColor(nt,at){const{"r":lt,"g":Bt,"b":Lt,"a":Ht}=new Rt.Y(nt).toRgb();if(Ht<1)return nt;const{"r":jt,"g":$t,"b":Kt}=new Rt.Y(at).toRgb();for(let nt=.01;nt<=1;nt+=.01){const at=Math.round((lt-jt*(1-nt))/nt),Ht=Math.round((Bt-$t*(1-nt))/nt),te=Math.round((Lt-Kt*(1-nt))/nt);if(isStableColor(at)&&isStableColor(Ht)&&isStableColor(te))return new Rt.Y({"r":at,"g":Ht,"b":te,"a":Math.round(100*nt)/100}).toRgbString()}return new Rt.Y({"r":lt,"g":Bt,"b":Lt,"a":1}).toRgbString()}},"3173":function(nt,at){"use strict";at.A={"placeholder":"Select time","rangePlaceholder":["Start time","End time"]}},"9052":function(nt,at,lt){"use strict";lt.d(at,{"Hl":function(){return je},"EY":function(){return Ne},"Ss":function(){return Ve}});var Rt=lt(758),Bt=function manipulatePropsFunction(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=nt.dangerouslySetInnerHTML,Rt=nt.style;return"string"!=typeof Rt&&(at.style=Rt),Object.assign(Object.assign({},at),{"dangerouslySetInnerHTML":lt})},Lt=lt(9859),Ht=lt(6214),jt=lt(7584),$t=lt(3467),Kt=lt(542),te=lt(1951),ne=(0,te.w$)(function(nt){function _class(){var nt;return(0,Ht.A)(this,_class),(nt=(0,$t.A)(this,_class)).__registerHost(),nt.onLongTap=(0,te.lh)(nt,"longtap",7),nt.onTouchStart=function(){nt.timer=setTimeout((function(){nt.onLongTap.emit()}),500)},nt.onTouchMove=function(){clearTimeout(nt.timer)},nt.onTouchEnd=function(){clearTimeout(nt.timer)},nt.canvasId=void 0,nt.height=void 0,nt.width=void 0,nt.nativeProps={},nt}return(0,Kt.A)(_class,nt),(0,jt.A)(_class,[{"key":"componentDidRender","value":function componentDidRender(){var nt=(0,Lt.A)(this.el.children,1)[0];if(!this.height||!this.width){var at=window.getComputedStyle(nt);this.height||(this.height=at.height),this.width||(this.width=at.width)}nt.height=parseInt(this.height),nt.width=parseInt(this.width)}},{"key":"render","value":function render(){var nt=this.canvasId,at=this.nativeProps;return(0,te.h)("canvas",Object.assign({"canvas-id":nt,"style":{"width":"100%","height":"100%"},"onTouchStart":this.onTouchStart,"onTouchMove":this.onTouchMove,"onTouchCancel":this.onTouchEnd,"onTouchEnd":this.onTouchEnd},at))}},{"key":"el","get":function get(){return this}}],[{"key":"style","get":function get(){return"taro-canvas-core{width:300px;height:150px;display:block;position:relative}"}}])}(te.wt),[0,"taro-canvas-core",{"canvasId":[1,"id"],"height":[1537],"width":[1537],"nativeProps":[16]}]);var re=function defineCustomElement$1(){if("undefined"!=typeof customElements){["taro-canvas-core"].forEach((function(nt){if("taro-canvas-core"===nt)customElements.get(nt)||customElements.define(nt,ne)}))}},ae=(0,te.w$)(function(nt){function _class(){var nt;return(0,Ht.A)(this,_class),(nt=(0,$t.A)(this,_class)).__registerHost(),nt.selectable=!1,nt.userSelect=!1,nt.space=void 0,nt.numberOfLines=void 0,nt}return(0,Kt.A)(_class,nt),(0,jt.A)(_class,[{"key":"render","value":function render(){var nt={};return"number"==typeof this.numberOfLines&&(nt["--line-clamp"]=this.numberOfLines),(0,te.h)(te.xr,{"style":nt},(0,te.h)("slot",null))}}],[{"key":"style","get":function get(){return"taro-text-core{user-select:none;display:inline}taro-text-core[selectable=true],taro-text-core[user-select=true]{user-select:text;display:inline-block}taro-text-core[space]{white-space:pre-wrap}taro-text-core[space=ensp]{word-spacing:.5em}taro-text-core[space=nbsp]{word-spacing:1em}taro-text-core[number-of-lines]{--line-clamp:2;word-wrap:break-word;text-overflow:ellipsis;-webkit-line-clamp:var(--line-clamp);-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}"}}])}(te.wt),[4,"taro-text-core",{"selectable":[1028],"userSelect":[1028,"user-select"],"space":[1025],"numberOfLines":[2,"number-of-lines"]}]);var oe=function taro_text_core_defineCustomElement$1(){if("undefined"!=typeof customElements){["taro-text-core"].forEach((function(nt){if("taro-text-core"===nt)customElements.get(nt)||customElements.define(nt,ae)}))}},se=lt(6640),le=lt(8148);var ue=(0,te.w$)(function(nt){function _class(){var nt;return(0,Ht.A)(this,_class),(nt=(0,$t.A)(this,_class)).__registerHost(),nt.onLongPress=(0,te.lh)(nt,"longpress",7),nt.startTime=0,nt.animation=void 0,nt.hoverClass=void 0,nt.hoverStartTime=50,nt.hoverStayTime=400,nt.hover=!1,nt.touch=!1,nt}return(0,Kt.A)(_class,nt),(0,jt.A)(_class,[{"key":"onTouchStart","value":function onTouchStart(){var nt=this;this.hoverClass&&(this.touch=!0,setTimeout((function(){nt.touch&&(nt.hover=!0)}),this.hoverStartTime)),this.timeoutEvent=setTimeout((function(){nt.onLongPress.emit()}),350),this.startTime=Date.now()}},{"key":"onTouchMove","value":function onTouchMove(){clearTimeout(this.timeoutEvent)}},{"key":"onTouchEnd","value":function onTouchEnd(){var nt=this;Date.now()-this.startTime<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout((function(){nt.touch||(nt.hover=!1)}),this.hoverStayTime))}},{"key":"componentDidRender","value":function componentDidRender(){!function handleStencilNodes(nt){var at;null===(at=null==nt?void 0:nt.childNodes)||void 0===at||at.forEach((function(nt){nt.nodeType===document.COMMENT_NODE&&nt["s-cn"]&&(nt["s-cn"]=!1),nt.nodeType!==document.COMMENT_NODE&&nt["s-sr"]&&(nt["s-sr"]=!1)}))}(this.el)}},{"key":"render","value":function render(){var nt=(0,le.c)((0,se.A)({},"".concat(this.hoverClass),this.hover)),at={};return this.animation&&(at.animation=this.animation,at["data-animation"]=this.animation),(0,te.h)(te.xr,Object.assign({"class":nt},at),(0,te.h)("slot",null))}},{"key":"el","get":function get(){return this}}],[{"key":"style","get":function get(){return"taro-view-core{display:block}"}}])}(te.wt),[4,"taro-view-core",{"animation":[1],"hoverClass":[1,"hover-class"],"hoverStartTime":[2,"hover-start-time"],"hoverStayTime":[2,"hover-stay-time"],"hover":[32],"touch":[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);var ce=function taro_view_core_defineCustomElement$1(){if("undefined"!=typeof customElements){["taro-view-core"].forEach((function(nt){if("taro-view-core"===nt)customElements.get(nt)||customElements.define(nt,ue)}))}},he=lt(8299);function __rest(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var de=function mergeRefs(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return function(nt){at.forEach((function(at){!function setRef(nt,at){"function"==typeof nt?nt(at):null!=nt&&(nt.current=at)}(at,nt)}))}},fe=function camelToDashCase(nt){return nt.replace(/([A-Z])/g,(function(nt){return"-".concat(nt[0].toLowerCase())}))},pe=lt(8143),ve=function arrayToMap(nt){var at=new Map;return nt.forEach((function(nt){return at.set(nt,nt)})),at};function getComponentName(nt){return nt.tagName.replace(/^TARO-/,"").replace(/-CORE$/,"")}function getControlledValue(nt){var at=getComponentName(nt);return["INPUT","TEXTAREA","SLIDER","PICKER"].includes(at)?"value":"SWITCH"===at?"checked":null}function finishedEventHandler(nt){var at=getControlledValue(nt);if(at){(0,pe.flushSync)((function(){}));var lt=function getPropsAfterReactUpdate(nt){var at=Object.keys(nt).find((function(nt){return nt.includes("__reactProps")}));return at?nt[at]:null}(nt);(null==lt?void 0:lt.hasOwnProperty(at))&&lt[at]!==nt[at]&&(nt[at]=lt[at],nt.setAttribute(at,lt[at]))}}var Ae=function syncEvent(nt,at,lt){var Rt=nt.__events||(nt.__events={}),Bt=Rt[at];if(lt){if(Bt){if(Bt.fn===lt)return;nt.removeEventListener(at,Bt)}var Lt=Rt[at]=function(at){var Rt=this;(0,pe.unstable_batchedUpdates)((function(){return lt.call(Rt,at)})),finishedEventHandler(nt)};Lt.fn=lt,nt.addEventListener(at,Lt)}else Bt&&nt.removeEventListener(at,Bt)},we=function attachProps(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(nt instanceof Element){Object.keys(lt).forEach((function(lt){if(!["style","children","ref","class","className","forwardedRef"].includes(lt)&&!at.hasOwnProperty(lt))if(/^on([A-Z].*)/.test(lt)){var Rt=lt.substring(2).toLowerCase();Ae(nt,Rt)}else nt[lt]=null,nt.removeAttribute(fe(lt))})),nt.className=function getClassName(nt,at,lt){var Rt=at.className||at.class,Bt=lt.className||lt.class,Lt=ve(nt),Ht=ve(Rt?Rt.split(" "):[]),jt=ve(Bt?Bt.split(" "):[]),$t=[];return Lt.forEach((function(nt){Ht.has(nt)?($t.push(nt),Ht.delete(nt)):jt.has(nt)||$t.push(nt)})),Ht.forEach((function(nt){return $t.push(nt)})),$t.join(" ")}(nt.classList,at,lt),Object.keys(at).forEach((function(lt){if(!("style"===lt&&"string"!=typeof at[lt]||["children","ref","class","className","forwardedRef"].includes(lt)))if(/^on([A-Z].*)/.test(lt)){var Rt=lt.substring(2).toLowerCase();Ae(nt,Rt,at[lt])}else{nt[lt]=at[lt],"string"===(0,he.A)(at[lt])&&nt.setAttribute(fe(lt),at[lt])}}));var Rt=getControlledValue(nt);if(Rt&&at.hasOwnProperty(Rt)){var Bt=["INPUT","TEXTAREA"].includes(getComponentName(nt))?"input":"change";nt.__events||(nt.__events={}),nt.__events.hasOwnProperty(Bt)||Ae(nt,Bt,(function(){}))}}};var Ce=function createReactComponent(nt,at,lt,Bt){void 0!==Bt&&Bt();var Lt=function dashToPascalCase(nt){return nt.toLowerCase().split("-").map((function(nt){return nt.charAt(0).toUpperCase()+nt.slice(1)})).join("")}(nt),te=function(at){function ReactComponent(nt){var at;return(0,Ht.A)(this,ReactComponent),(at=(0,$t.A)(this,ReactComponent,[nt])).setComponentElRef=function(nt){at.componentEl=nt},at}return(0,Kt.A)(ReactComponent,at),(0,jt.A)(ReactComponent,[{"key":"componentDidMount","value":function componentDidMount(){!function applyUnControlledDefaultValue(nt,at){var lt=getControlledValue(nt);if(lt){var Rt="default"+lt.charAt(0).toUpperCase()+lt.slice(1);!at.hasOwnProperty(lt)&&at.hasOwnProperty(Rt)&&(nt[lt]=at[Rt],nt.setAttribute(lt,at[Rt]))}}(this.componentEl,this.props),this.componentDidUpdate(this.props)}},{"key":"componentDidUpdate","value":function componentDidUpdate(nt){we(this.componentEl,this.props,nt)}},{"key":"render","value":function render(){var at=this.props,Bt=at.children,Lt=at.forwardedRef,Ht=(at.className,at.ref,at.style,__rest(at,["children","forwardedRef","className","ref","style"])),jt=Object.keys(Ht).reduce((function(nt,at){var lt=Ht[at];if(0===at.indexOf("on")&&at[2]===at[2].toUpperCase()){at.substring(2).toLowerCase();0}else{var Rt=(0,he.A)(lt);["string","boolean","number"].includes(Rt)&&(nt[fe(at)]=lt)}return nt}),{});lt&&(jt=lt(this.props,jt));var $t=Object.assign(Object.assign({},jt),{"ref":de(Lt,this.setComponentElRef)});return(0,Rt.createElement)(nt,$t,Bt)}}],[{"key":"displayName","get":function get(){return Lt}}])}(Rt.Component);return at&&(te.contextType=at),function createForwardRef(nt,at){var lt=function forwardRef(at,lt){return Rt.createElement(nt,Object.assign({},at,{"forwardedRef":lt}))};return lt.displayName=at,Rt.forwardRef(lt)}(te,Lt)},je=Ce("taro-canvas-core",void 0,Bt,re),Ne=Ce("taro-text-core",void 0,Bt,oe),Ve=Ce("taro-view-core",void 0,Bt,ce)},"2851":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=lt(9207),Lt=lt(2806);var Ht=function genData(nt){var at=new Map;nt.forEach((function(nt){var lt=nt.createTime,Rt=nt.account,Bt=void 0===Rt?0:Rt;at.has(lt)||at.set(lt,{"createTime":lt,"label":(0,Lt.QJ)(lt,"YYYY-M-D"),"values":[],"total":0,"showValues":!1}),at.get(lt).values.push(nt),at.get(lt).total=function sum(nt,at){var sum=(Array.isArray(nt)?nt:[nt]).reduce((function(nt,at){return Number(nt)+Number(at)}),at);return sum.toFixed(2)}(Bt,at.get(lt).total)}));var lt=Array.from(at.values());return(lt=lt.filter((function(nt){return nt.createTime}))).sort((function(nt,at){return at.createTime-nt.createTime}))};at.A=function useRecords(){var nt=(0,Rt.useRef)(function getRecords(){return(0,Bt.c7)("Records-List")||[]}()),at=(0,Rt.useMemo)((function(){return Ht(nt.current)}),[nt.current]),lt=(0,Rt.useMemo)((function(){return function genDataByYear(nt){var at=new Map;return nt.forEach((function(nt){var lt=(0,Lt.QJ)(nt.createTime,"YYYY");at.has(lt)||at.set(lt,[]),at.get(lt).push(nt)})),at}(at)}),[at]),jt=(0,Rt.useMemo)((function(){return function calculateDiff(nt){for(var at={},lt=0;lt<nt.length-1;lt++){var Rt=parseFloat(nt[lt].total),Bt=parseFloat(nt[lt+1].total),Lt=(Rt-Bt).toFixed(2);at[nt[lt].label]={"to":nt[lt+1].label,"fromTotal":nt[lt].total,"toTotal":nt[lt+1].total,"diff":Lt,"trend":Rt-Bt>0?"+":"-"}}return at}(at)}),[at]);return{"data":at,"dataByYear":lt,"diffs":jt}}},"5101":function(nt,at,lt){"use strict";lt.r(at),lt.d(at,{"default":function(){return Chart}});var Rt=lt(1950),Bt=lt(9859),Lt=lt(758),Ht=lt(6214),jt=lt(7584),$t=lt(3467),Kt=lt(542),te=function(nt){function WebChart(nt){return(0,Ht.A)(this,WebChart),(0,$t.A)(this,WebChart,[nt])}return(0,Kt.A)(WebChart,nt),(0,jt.A)(WebChart,[{"key":"componentDidMount","value":function componentDidMount(){var nt=this,at=this.props,lt=at.onChartInit,Rt=at.onChartReady,Bt=at.mode,Lt=at.chartConstructor;Lt||console.error("chartConstructor not found"),this.vchart=new Lt(this.props.spec,Object.assign({"dom":"".concat(this.props.canvasId),"mode":Bt},this.props.options)),lt&&lt(this.vchart),this.vchart.renderAsync().then((function(){Rt&&Rt(nt.vchart)})).catch((function(nt){console.error(nt)}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.vchart&&this.vchart&&this.vchart.release()}},{"key":"componentDidUpdate","value":function componentDidUpdate(nt){if(this.vchart){var at=this.props,lt=at.spec,Rt=at.onChartReady;JSON.stringify(nt.spec)!==JSON.stringify(lt)&&(this.vchart.updateSpec(lt,!0),Rt&&Rt(this.vchart))}}},{"key":"render","value":function render(){var nt=this.props,at=nt.canvasId,lt=nt.style;return Lt.createElement("div",{"style":Object.assign(Object.assign({"position":"relative"},lt),{"padding":0}),"id":"".concat(at)})}}])}(Lt.Component),ne=lt(8884),re=lt(9052),ae=lt(9623),oe=lt(6405),se=lt(2314),le=lt(3148),ue=lt(1152),ce=lt(5482),he={"top":"top","bottom":"bottom","middle":"middle","normal":"alphabetic","hanging":"hanging","alphabetic":"alphabetic","ideographic":"ideographic"},de=function(){return(0,jt.A)((function CanvasContext(nt,at){(0,Ht.A)(this,CanvasContext),this.actions=[],this.canvas=nt,this.ctx=at}),[{"key":"ctx","get":function get(){return this.__raw__||{}},"set":function set(nt){this.__raw__=nt}},{"key":"emptyActions","value":function emptyActions(){this.actions.length=0}},{"key":"enqueueActions","value":function enqueueActions(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];this.actions.push({"func":nt,"args":lt})}},{"key":"fillStyle","get":function get(){return this.ctx.fillStyle},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.fillStyle=nt}))}},{"key":"font","get":function get(){return this.ctx.font},"set":function set(nt){this.ctx.font=nt}},{"key":"globalAlpha","get":function get(){return this.ctx.globalAlpha},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.globalAlpha=nt}))}},{"key":"globalCompositeOperation","get":function get(){return this.ctx.globalCompositeOperation},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.globalCompositeOperation=nt}))}},{"key":"lineCap","get":function get(){return this.ctx.lineCap},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.lineCap=nt}))}},{"key":"lineDashOffset","get":function get(){return this.ctx.lineDashOffset},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.lineDashOffset=nt}))}},{"key":"lineJoin","get":function get(){return this.ctx.lineJoin},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.lineJoin=nt}))}},{"key":"lineWidth","get":function get(){return this.ctx.lineWidth},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.lineWidth=nt}))}},{"key":"miterLimit","get":function get(){return this.ctx.miterLimit},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.miterLimit=nt}))}},{"key":"shadowBlur","get":function get(){return this.ctx.shadowBlur},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.shadowBlur=nt}))}},{"key":"shadowColor","get":function get(){return this.ctx.shadowColor},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.shadowColor=nt}))}},{"key":"shadowOffsetX","get":function get(){return this.ctx.shadowOffsetX},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.shadowOffsetX=nt}))}},{"key":"shadowOffsetY","get":function get(){return this.ctx.shadowOffsetY},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.shadowOffsetY=nt}))}},{"key":"strokeStyle","get":function get(){return this.ctx.strokeStyle},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.strokeStyle=nt}))}},{"key":"textAlign","get":function get(){return this.ctx.textAlign},"set":function set(nt){this.ctx.textAlign=nt}},{"key":"textBaseline","get":function get(){return this.ctx.textBaseline},"set":function set(nt){this.ctx.textBaseline=nt}},{"key":"direction","get":function get(){return this.ctx.direction},"set":function set(nt){this.ctx.direction=nt}},{"key":"imageSmoothingEnabled","get":function get(){return this.ctx.imageSmoothingEnabled},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.imageSmoothingEnabled=nt}))}},{"key":"imageSmoothingQuality","get":function get(){return this.ctx.imageSmoothingQuality},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.imageSmoothingQuality=nt}))}},{"key":"filter","get":function get(){return this.ctx.filter},"set":function set(nt){var at=this;this.enqueueActions((function(){at.ctx.filter=nt}))}},{"key":"arc","value":function arc(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.arc].concat(at))}},{"key":"arcTo","value":function arcTo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.arcTo].concat(at))}},{"key":"beginPath","value":function beginPath(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.beginPath].concat(at))}},{"key":"bezierCurveTo","value":function bezierCurveTo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.bezierCurveTo].concat(at))}},{"key":"clearRect","value":function clearRect(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.clearRect].concat(at))}},{"key":"clip","value":function clip(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.clip].concat(at))}},{"key":"closePath","value":function closePath(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.closePath].concat(at))}},{"key":"createPattern","value":function createPattern(nt,at){var lt=this;if("string"==typeof nt){var Rt=new Image;return Rt.src=nt,new Promise((function(nt,Bt){Rt.onload=function(){nt(lt.ctx.createPattern(Rt,at))},Rt.onerror=Bt}))}return this.ctx.createPattern(nt,at)}},{"key":"draw","value":function draw(nt,at){return(0,ce.sH)(this,void 0,void 0,(0,ne.A)().mark((function _callee(){var lt,Rt,Bt,Lt,Ht;return(0,ne.A)().wrap((function _callee$(jt){for(;;)switch(jt.prev=jt.next){case 0:jt.prev=0,nt||this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),lt=(0,ue.A)(this.actions),jt.prev=3,lt.s();case 5:if((Rt=lt.n()).done){jt.next=11;break}return Bt=Rt.value,Lt=Bt.func,Ht=Bt.args,jt.next=9,Lt.apply(this.ctx,Ht);case 9:jt.next=5;break;case 11:jt.next=16;break;case 13:jt.prev=13,jt.t0=jt.catch(3),lt.e(jt.t0);case 16:return jt.prev=16,lt.f(),jt.finish(16);case 19:this.emptyActions(),at&&at(),jt.next=26;break;case 23:throw jt.prev=23,jt.t1=jt.catch(0),{"errMsg":jt.t1.message};case 26:case"end":return jt.stop()}}),_callee,this,[[0,23],[3,13,16,19]])})))}},{"key":"drawImage","value":function drawImage(nt){for(var at=this,lt=arguments.length,Rt=new Array(lt>1?lt-1:0),Bt=1;Bt<lt;Bt++)Rt[Bt-1]=arguments[Bt];this.enqueueActions((function(){var lt;if("string"==typeof nt){var Bt=new Image;return Bt.src=nt,new Promise((function(nt,lt){Bt.onload=function(){var lt;(lt=at.ctx).drawImage.apply(lt,[Bt].concat(Rt)),nt()},Bt.onerror=lt}))}(lt=at.ctx).drawImage.apply(lt,[nt].concat(Rt))}))}},{"key":"fill","value":function fill(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.fill].concat(at))}},{"key":"fillRect","value":function fillRect(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.fillRect].concat(at))}},{"key":"fillText","value":function fillText(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.fillText].concat(at))}},{"key":"lineTo","value":function lineTo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.lineTo].concat(at))}},{"key":"moveTo","value":function moveTo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.moveTo].concat(at))}},{"key":"quadraticCurveTo","value":function quadraticCurveTo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.quadraticCurveTo].concat(at))}},{"key":"rect","value":function rect(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.rect].concat(at))}},{"key":"reset","value":function reset(){return this.ctx.reset()}},{"key":"restore","value":function restore(){return this.ctx.restore()}},{"key":"rotate","value":function rotate(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.rotate].concat(at))}},{"key":"save","value":function save(){return this.ctx.save()}},{"key":"scale","value":function scale(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.scale].concat(at))}},{"key":"setFillStyle","value":function setFillStyle(nt){var at=this;this.enqueueActions((function(){at.ctx.fillStyle=nt}))}},{"key":"setFontSize","value":function setFontSize(nt){var at=this.font.split(/\s/),lt=at.findIndex((function(nt){return/^\d+px$/.test(nt)}));-1!==lt&&(at[lt]="".concat(nt,"px"),this.font=at.join(" "))}},{"key":"setGlobalAlpha","value":function setGlobalAlpha(nt){this.globalAlpha=nt}},{"key":"setLineCap","value":function setLineCap(nt){this.lineCap=nt}},{"key":"setLineDash","value":function setLineDash(nt,at){var lt=this;this.enqueueActions((function(){lt.ctx.setLineDash(nt),lt.ctx.lineDashOffset=at}))}},{"key":"setLineJoin","value":function setLineJoin(nt){this.lineJoin=nt}},{"key":"setLineWidth","value":function setLineWidth(nt){this.lineWidth=nt}},{"key":"setMiterLimit","value":function setMiterLimit(nt){this.miterLimit=nt}},{"key":"setShadow","value":function setShadow(nt,at,lt,Rt){var Bt=this;this.enqueueActions((function(){Bt.ctx.shadowOffsetX=nt,Bt.ctx.shadowOffsetY=at,Bt.ctx.shadowColor=Rt,Bt.ctx.shadowBlur=lt}))}},{"key":"setStrokeStyle","value":function setStrokeStyle(nt){var at=this;this.enqueueActions((function(){at.ctx.strokeStyle=nt}))}},{"key":"setTextAlign","value":function setTextAlign(nt){this.textAlign=nt}},{"key":"setTextBaseline","value":function setTextBaseline(nt){this.textBaseline=he[nt]||"alphabetic"}},{"key":"setTransform","value":function setTransform(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.setTransform].concat(at))}},{"key":"stroke","value":function stroke(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.stroke].concat(at))}},{"key":"strokeRect","value":function strokeRect(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.strokeRect].concat(at))}},{"key":"strokeText","value":function strokeText(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.strokeText].concat(at))}},{"key":"transform","value":function transform(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.transform].concat(at))}},{"key":"translate","value":function translate(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return this.enqueueActions.apply(this,[this.ctx.translate].concat(at))}},{"key":"measureText","value":function measureText(nt){return this.ctx.measureText(nt)}},{"key":"createCircularGradient","value":function createCircularGradient(nt,at,lt){return this.ctx.createRadialGradient(nt,at,0,nt,at,lt)}},{"key":"createLinearGradient","value":function createLinearGradient(nt,at,lt,Rt){return this.ctx.createLinearGradient(nt,at,lt,Rt)}}])}(),fe=function(){return(0,jt.A)((function NodesRef(nt,at,lt){(0,Ht.A)(this,NodesRef),this._component=at._component,this._selector=nt,this._selectorQuery=at,this._single=lt}),[{"key":"context","value":function context(nt){var at=this._selector,lt=this._component,Rt=this._single,Bt=this._selectorQuery;return Bt._push(at,lt,Rt,{"context":!0},nt),Bt}},{"key":"node","value":function node(nt){var at=this._selector,lt=this._component,Rt=this._single,Bt=this._selectorQuery;return Bt._push(at,lt,Rt,{"nodeCanvasType":!0,"node":!0},nt),Bt}},{"key":"boundingClientRect","value":function boundingClientRect(nt){var at=this._selector,lt=this._component,Rt=this._single,Bt=this._selectorQuery;return Bt._push(at,lt,Rt,{"id":!0,"dataset":!0,"rect":!0,"size":!0},nt),Bt}},{"key":"scrollOffset","value":function scrollOffset(nt){var at=this._selector,lt=this._component,Rt=this._single,Bt=this._selectorQuery;return Bt._push(at,lt,Rt,{"id":!0,"dataset":!0,"scrollOffset":!0},nt),Bt}},{"key":"fields","value":function fields(nt,at){var lt=this._selector,Rt=this._component,Bt=this._single,Lt=this._selectorQuery,Ht=nt.id,jt=nt.dataset,$t=nt.rect,Kt=nt.size,te=nt.scrollOffset,ne=nt.context,re=nt.node,ae=nt.properties,oe=void 0===ae?[]:ae,se=nt.computedStyle,le=void 0===se?[]:se;return Lt._push(lt,Rt,Bt,{"id":Ht,"dataset":jt,"rect":$t,"size":Kt,"scrollOffset":te,"context":ne,"node":re,"nodeCanvasType":re,"properties":oe,"computedStyle":le},at),Lt}}])}();function filter(nt,at,lt){if(!at)return null;var Rt=".taro_page"===lt,Bt=nt.id,Lt=nt.dataset,Ht=nt.rect,jt=nt.size,$t=nt.scrollOffset,Kt=nt.properties,te=void 0===Kt?[]:Kt,ne=nt.computedStyle,re=void 0===ne?[]:ne,ae=nt.nodeCanvasType,oe=nt.node,se=nt.context,le={};if(ae&&oe){var ue=at.tagName;if(le.node={"id":at.id,"$taroElement":at},/^taro-canvas-core/i.test(ue)){var ce=at.type||"";le.nodeCanvasType=ce;var he=at.getElementsByTagName("canvas")[0];/^(2d|webgl)/i.test(ce)&&he?le.node=he:le.node=null}else/^taro-scroll-view-core/i.test(ue)?(le.nodeCanvasType="",le.node=at,at.scrollTo=at.mpScrollToMethod,at.scrollIntoView=at.mpScrollIntoViewMethod):(le.nodeCanvasType="",le.node=at);return le}if(!se){if(Bt&&(le.id=at.id),Lt&&(le.dataset=Object.assign({},at.dataset)),Ht||jt){var fe=at.getBoundingClientRect(),pe=fe.left,ve=fe.right,Ae=fe.top,we=fe.bottom,Ce=fe.width,je=fe.height;Ht&&(Rt?(le.left=0,le.right=0,le.top=0,le.bottom=0):(le.left=pe,le.right=ve,le.top=Ae,le.bottom=we)),jt&&(Rt?(le.width=at.clientWidth,le.height=at.clientHeight):(le.width=Ce,le.height=je))}if($t&&(le.scrollLeft=at.scrollLeft,le.scrollTop=at.scrollTop),te.length&&te.forEach((function(nt){var lt=at.getAttribute(nt);lt&&(le[nt]=lt)})),re.length){var Ne=window.getComputedStyle(at);re.forEach((function(nt){var at=Ne.getPropertyValue(nt)||Ne[nt];at&&(le[nt]=at)}))}return le}var Ve=at.tagName;if(/^taro-video-core/i.test(Ve))return{"context":at};if(/^taro-canvas-core/i.test(Ve)){var Ge=at.type||"2d",ti=null==at?void 0:at.querySelector("canvas"),li=null==ti?void 0:ti.getContext(Ge);return{"context":new de(ti,li)}}/^taro-live-player-core/i.test(Ve)?console.error(" NodesRef.context  LivePlayerContext"):/^taro-editor-core/i.test(Ve)?console.error(" NodesRef.context  EditorContext"):/^taro-map-core/i.test(Ve)&&console.error(" NodesRef.context  MapContext")}var pe=function(){return(0,jt.A)((function SelectorQuery(){(0,Ht.A)(this,SelectorQuery),this._defaultWebviewId=null,this._webviewId=null,this._queue=[],this._queueCb=[],this._component}),[{"key":"in","value":function _in(nt){return this._component=nt,this}},{"key":"select","value":function select(nt){return"string"==typeof nt&&(nt=nt.replace(">>>",">")),new fe(nt,this,!0)}},{"key":"selectAll","value":function selectAll(nt){return"string"==typeof nt&&(nt=nt.replace(">>>",">")),new fe(nt,this,!1)}},{"key":"selectViewport","value":function selectViewport(){return new fe(".taro_page",this,!0)}},{"key":"exec","value":function exec(nt){var at=this;return oe.A.nextTick((function(){!function queryBat(nt,at){var lt=[];nt.forEach((function(nt){var at,Rt=nt.selector,Bt=nt.single,Lt=nt.fields,Ht=nt.component,jt=null!==Ht&&(0,le.wI)(Ht)||document,$t=!1;if(jt!==document){var Kt=null===(at=jt.parentNode)||void 0===at?void 0:at.querySelectorAll(Rt);if(Kt)for(var te=0,ne=Kt.length;te<ne;++te)if(jt===Kt[te]){$t=!0;break}}if(Bt){var re=!0===$t?jt:jt.querySelector(Rt);lt.push(filter(Lt,re,Rt))}else{var ae=jt.querySelectorAll(Rt),oe=[];!0===$t&&oe.push(jt);for(var se=0,ue=ae.length;se<ue;++se)oe.push(ae[se]);lt.push(oe.map((function(nt){return filter(Lt,nt)})))}})),at(lt)}(at._queue,(function(lt){var Rt=at._queueCb;lt.forEach((function(nt,lt){var Bt=Rt[lt];(0,se.Tn)(Bt)&&Bt.call(at,nt)})),(0,se.Tn)(nt)&&nt.call(at,lt)}))})),this}},{"key":"_push","value":function _push(nt,at,lt,Rt){var Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._queue.push({"component":at,"selector":nt,"single":lt,"fields":Rt}),this._queueCb.push(Bt)}}])}(),ve=function createSelectorQuery(){return new pe},Ae=lt(2282),we=lt.n(Ae),Ce=lt(996),je=function getSystemInfoSync(){var nt=function getWindowInfo(){return{"pixelRatio":window.devicePixelRatio,"screenWidth":window.screen.width,"screenHeight":window.screen.height,"windowWidth":document.documentElement.clientWidth,"windowHeight":document.documentElement.clientHeight,"statusBarHeight":NaN,"safeArea":{"bottom":0,"height":0,"left":0,"right":0,"top":0,"width":0}}}(),at=function getSystemSetting(){return{"bluetoothEnabled":!1,"locationEnabled":!1,"wifiEnabled":!1,"deviceOrientation":window.screen.width>=window.screen.height?"landscape":"portrait"}}(),lt=function getDeviceInfo(){var nt,at;return{"abi":"","deviceAbi":"","benchmarkLevel":-1,"brand":we().manufacturer||"unknown","model":we().product||"unknown","system":(null===(nt=we().os)||void 0===nt?void 0:nt.toString())||"unknown","platform":(null===(at=we().os)||void 0===at?void 0:at.family)||"unknown","CPUType":""}}(),Rt=function getAppBaseInfo(){var nt,at=!1;return(null===(nt=window.matchMedia)||void 0===nt?void 0:nt.call(window,"(prefers-color-scheme: dark)").matches)&&(at=!0),{"SDKVersion":"","enableDebug":!1,"language":navigator.language,"version":"","theme":at?"dark":"light"}}(),Bt={"albumAuthorized":"not determined","bluetoothAuthorized":"not determined","cameraAuthorized":"not determined","locationAuthorized":"not determined","locationReducedAccuracy":!1,"microphoneAuthorized":"not determined","notificationAuthorized":"not determined","notificationAlertAuthorized":"not determined","notificationBadgeAuthorized":"not determined","notificationSoundAuthorized":"not determined","phoneCalendarAuthorized":"not determined"};return delete lt.abi,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nt),at),lt),Rt),{"fontSizeSetting":NaN,"albumAuthorized":"authorized"===Bt.albumAuthorized,"cameraAuthorized":"authorized"===Bt.cameraAuthorized,"locationAuthorized":"authorized"===Bt.locationAuthorized,"microphoneAuthorized":"authorized"===Bt.microphoneAuthorized,"notificationAuthorized":"authorized"===Bt.notificationAuthorized,"notificationAlertAuthorized":"authorized"===Bt.notificationAlertAuthorized,"notificationBadgeAuthorized":"authorized"===Bt.notificationBadgeAuthorized,"notificationSoundAuthorized":"authorized"===Bt.notificationSoundAuthorized,"phoneCalendarAuthorized":"authorized"===Bt.phoneCalendarAuthorized,"locationReducedAccuracy":Bt.locationReducedAccuracy,"environment":""})},Ne=function getSystemInfo(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return(0,ce.sH)(void 0,[].concat(at),void 0,(function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ne.A)().mark((function _callee2(){var at,lt,Rt,Bt,Lt;return(0,ne.A)().wrap((function _callee2$(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return at=nt.success,lt=nt.fail,Rt=nt.complete,Bt=new Ce._({"name":"getSystemInfo","success":at,"fail":lt,"complete":Rt}),Ht.prev=2,Ht.next=5,je();case 5:return Lt=Ht.sent,Ht.abrupt("return",Bt.success(Lt));case 9:return Ht.prev=9,Ht.t0=Ht.catch(2),Ht.abrupt("return",Bt.fail({"errMsg":Ht.t0}));case 12:case"end":return Ht.stop()}}),_callee2,null,[[2,9]])}))()}))},Ve=function(){return(0,jt.A)((function TTCanvas(nt){(0,Ht.A)(this,TTCanvas);var at=nt.chartConstructor,lt=nt.dpr,Rt=nt.events,Bt=nt.spec,Lt=nt.options,jt=nt.domref,$t=nt.mode,Kt=nt.onChartInit,te=nt.onChartReady,ne=nt.onChartUpdate;this.chartConstructor=at,this.domref=jt,this.mode=$t||"miniApp",this.dpr=lt,this.spec=Bt,this.events=Rt,this.options=Lt,this.onChartInit=Kt,this.onChartReady=te,this.onChartUpdate=ne,this.init(),this.renderAsync()}),[{"key":"init","value":function init(){var nt=this,at=this.domref;return this.chartInstance=new this.chartConstructor(Object.assign({"width":at.width,"height":at.height},this.spec),Object.assign({"mode":this.mode,"modeParams":{"domref":at,"force":!0,"canvasIdLists":["".concat(at.id,"_draw_canvas"),"".concat(at.id,"_tooltip_canvas"),"".concat(at.id,"_hidden_canvas")],"tooltipCanvasId":"".concat(at.id,"_tooltip_canvas"),"freeCanvasIdx":2},"dpr":this.dpr,"renderCanvas":"".concat(at.id,"_draw_canvas")},this.options)),this.onChartInit&&this.onChartInit(this.chartInstance),this.events&&this.events.forEach((function(at){nt.chartInstance.on(at.type,Object.assign(Object.assign({},at.query),{"source":"chart"}),at.handler)})),this.chartInstance}},{"key":"renderAsync","value":function renderAsync(){var nt,at=this;null===(nt=this.chartInstance)||void 0===nt||nt.renderAsync().then((function(nt){return at.onChartReady&&at.onChartReady(nt),nt}))}},{"key":"updateSpec","value":function updateSpec(nt){var at;this.onChartUpdate&&this.onChartUpdate(this.chartInstance),null===(at=this.chartInstance)||void 0===at||at.updateSpec(nt.spec,!0)}},{"key":"release","value":function release(){this.chartInstance&&this.chartInstance.release()}}])}(),Ge={"width":"100%","height":"100%","display":"block","margin":"0px","position":"relative","zIndex":1},ti={"opacity":0,"visibility":"hidden","width":"100%","height":"100%","position":"absolute","pointerEvents":"none","top":0,"left":0,"zIndex":0},li={"width":"100%","height":"100%","position":"absolute","top":0,"left":0,"zIndex":2},hi={"width":"100%","height":"100%","position":"relative"},general_chart_awaiter=function(nt,at,lt,Rt){return new(lt||(lt=Promise))((function(Bt,Lt){function fulfilled(nt){try{step(Rt.next(nt))}catch(nt){Lt(nt)}}function rejected(nt){try{step(Rt.throw(nt))}catch(nt){Lt(nt)}}function step(nt){var at;nt.done?Bt(nt.value):(at=nt.value,at instanceof lt?at:new lt((function(nt){nt(at)}))).then(fulfilled,rejected)}step((Rt=Rt.apply(nt,at||[])).next())}))},di=function(nt){function GeneralChart(){return(0,Ht.A)(this,GeneralChart),(0,$t.A)(this,GeneralChart,arguments)}return(0,Kt.A)(GeneralChart,nt),(0,jt.A)(GeneralChart,[{"key":"componentDidMount","value":function componentDidMount(){return general_chart_awaiter(this,void 0,void 0,(0,ne.A)().mark((function _callee2(){var nt,at,lt,Rt=this;return(0,ne.A)().wrap((function _callee2$(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(this.props.chartConstructor||console.error("props.chartConstructor is not found"),this.props.spec&&this.props.canvasId){Bt.next=2;break}return Bt.abrupt("return",(this.props.spec||console.warn("props.spec are not found"),void(this.props.canvasId||console.warn("props.canvasId are not found"))));case 2:nt=function getDomRef(){return general_chart_awaiter(Rt,void 0,void 0,(0,ne.A)().mark((function _callee(){var nt=this;return(0,ne.A)().wrap((function _callee$(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",new Promise((function(at){(0,ae.d)((function(){ve().select("#".concat(nt.props.canvasId,"_draw_canvas")).boundingClientRect((function(nt){at(nt)})).exec()}))})));case 1:case"end":return at.stop()}}),_callee)})))},at=(0,ne.A)().mark((function _loop(){var at;return(0,ne.A)().wrap((function _loop$(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=2,nt();case 2:if(null==(at=lt.sent)){lt.next=6;break}return Ne({"success":function success(nt){Rt.init({"domref":at,"dpr":nt.pixelRatio})},"fail":function fail(nt){console.error(new Error("taro ")),console.log(nt)}}),lt.abrupt("return",1);case 6:case"end":return lt.stop()}}),_loop)})),lt=0;case 5:if(!(lt<100)){Bt.next=12;break}return Bt.delegateYield(at(),"t0",7);case 7:if(!Bt.t0){Bt.next=9;break}return Bt.abrupt("break",12);case 9:lt++,Bt.next=5;break;case 12:case"end":return Bt.stop()}}),_callee2,this)})))}},{"key":"componentDidUpdate","value":function componentDidUpdate(nt){this.ttCanvas&&this.ttCanvas.chartInstance&&JSON.stringify(nt.spec)!==JSON.stringify(this.props.spec)&&this.ttCanvas.updateSpec(this.props)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.ttCanvas&&this.ttCanvas.release()}},{"key":"init","value":function init(nt){var at=nt.domref,lt=nt.dpr,Rt=void 0===lt?2:lt;return general_chart_awaiter(this,void 0,void 0,(0,ne.A)().mark((function _callee3(){var nt,lt,Bt,Lt=this;return(0,ne.A)().wrap((function _callee3$(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(!at){Ht.next=10;break}if("wx"!==this.props.mode&&"tt"!==this.props.mode){Ht.next=7;break}if(nt=["".concat(this.props.canvasId,"_draw_canvas"),"".concat(this.props.canvasId,"_tooltip_canvas"),"".concat(this.props.canvasId,"_hidden_canvas")],lt=this.props.chartConstructor,Bt=lt.vglobal,Ht.t0=Bt,!Ht.t0){Ht.next=7;break}return Ht.next=7,Bt.setEnv(this.props.mode,{"domref":at,"force":!0,"canvasIdLists":nt,"freeCanvasIdx":2,"component":void 0,"forceUpdate":!0});case 7:at.id=this.props.canvasId,this.ttCanvas=new Ve({"chartConstructor":this.props.chartConstructor,"dpr":Rt,"domref":at,"spec":this.props.spec,"events":this.props.events,"options":this.props.options,"mode":this.props.mode,"onChartInit":function onChartInit(nt){var at;(null===(at=Lt.props)||void 0===at?void 0:at.onChartInit)&&Lt.props.onChartInit(nt)},"onChartReady":function onChartReady(nt){var at;(null===(at=Lt.props)||void 0===at?void 0:at.onChartReady)&&Lt.props.onChartReady(nt)},"onChartUpdate":function onChartUpdate(nt){var at;(null===(at=Lt.props)||void 0===at?void 0:at.onChartUpdate)&&Lt.props.onChartUpdate(nt)}}),Ht.next=11;break;case 10:console.error(" #".concat(this.props.canvasId," "));case 11:case"end":return Ht.stop()}}),_callee3,this)})))}},{"key":"render","value":function render(){var nt=this,at=function handleEvent(at){if(nt.ttCanvas&&nt.ttCanvas.chartInstance){var lt=nt.ttCanvas.chartInstance;Object.defineProperty(at,"target",{"writable":!1,"value":lt.getCanvas()}),lt.getStage().window.dispatchEvent(at)}},lt=this.props,Rt=lt.canvasId,Bt=lt.style,Ht=void 0===Bt?{}:Bt,jt="wx"===this.props.mode||"tt"===this.props.mode?"2d":void 0;return Lt.createElement(re.Ss,{"key":Rt,"style":Object.assign(Object.assign(Object.assign({},hi),Ht),{"padding":0})},Lt.createElement(re.Hl,{"type":jt,"style":Object.assign({},li),"onTouchStart":at,"onTouchMove":at,"onTouchEnd":at,"id":"".concat(Rt,"_tooltip_canvas"),"canvasId":"".concat(Rt,"_tooltip_canvas")}),Lt.createElement(re.Hl,{"type":jt,"style":Ge,"id":"".concat(Rt,"_draw_canvas"),"canvasId":"".concat(Rt,"_draw_canvas")}),Lt.createElement(re.Hl,{"type":jt,"style":Object.assign(Object.assign({},Ge),ti),"id":"".concat(Rt,"_hidden_canvas"),"canvasId":"".concat(Rt,"_hidden_canvas")}))}}])}(Lt.Component),fi=lt(8515),pi=lt(6932),__rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};function VChart(nt){var at=nt.type,lt=__rest(nt,["type"]),Rt=(null!=at?at:(0,fi._$)()).toLocaleLowerCase(),Bt=Object.assign({"chartConstructor":pi.VChart},lt),Ht={"lark":function lark(){return(0,pi.registerLarkEnv)(),Lt.createElement(di,Object.assign({},Bt,{"mode":"miniApp"}))},"tt":function tt(){return(0,pi.registerTTEnv)(),Lt.createElement(di,Object.assign({},Bt,{"mode":"tt"}))},"weapp":function weapp(){return(0,pi.registerWXEnv)(),Lt.createElement(di,Object.assign({},Bt,{"mode":"wx"}))},"web":function web(){return Lt.createElement(te,Object.assign({},Bt))},"h5":function h5(){return Lt.createElement(te,Object.assign({},Bt,{"mode":"mobile-browser"}))}};return Rt&&void 0!==Ht[Rt]?Ht[Rt].call():(console.warn(" ".concat(Rt," ")),Lt.createElement(di,Object.assign({},Bt)))}var vi=lt(7544),mi=lt(6287),_i=lt.n(mi),bi=lt(5040),Mi=lt.n(bi),Ti=lt(7434),Ii=lt.n(Ti),Bi=lt(3652),zi=lt.n(Bi),Wi=lt(9045),Ui=lt.n(Wi),$i=lt(8353),qi=lt.n($i),Ki=lt(1707),Qi=lt.n(Ki);_i().extend(Qi()),_i().extend(qi()),_i().extend(Mi()),_i().extend(Ii()),_i().extend(zi()),_i().extend(Ui()),_i().extend((function(nt,at){var lt=at.prototype,Rt=lt.format;lt.format=function f(nt){var at=(nt||"").replace("Wo","wo");return Rt.bind(this)(at)}}));var Ji={"bn_BD":"bn-bd","by_BY":"be","en_GB":"en-gb","en_US":"en","fr_BE":"fr","fr_CA":"fr-ca","hy_AM":"hy-am","kmr_IQ":"ku","nl_BE":"nl-be","pt_BR":"pt-br","zh_CN":"zh-cn","zh_HK":"zh-hk","zh_TW":"zh-tw"},dn=function parseLocale(nt){return Ji[nt]||nt.split("_")[0]},fn={"getNow":function getNow(){var nt=_i()();return"function"==typeof nt.tz?nt.tz():nt},"getFixedDate":function getFixedDate(nt){return _i()(nt,["YYYY-M-DD","YYYY-MM-DD"])},"getEndDate":function getEndDate(nt){return nt.endOf("month")},"getWeekDay":function getWeekDay(nt){var at=nt.locale("en");return at.weekday()+at.localeData().firstDayOfWeek()},"getYear":function getYear(nt){return nt.year()},"getMonth":function getMonth(nt){return nt.month()},"getDate":function getDate(nt){return nt.date()},"getHour":function getHour(nt){return nt.hour()},"getMinute":function getMinute(nt){return nt.minute()},"getSecond":function getSecond(nt){return nt.second()},"getMillisecond":function getMillisecond(nt){return nt.millisecond()},"addYear":function addYear(nt,at){return nt.add(at,"year")},"addMonth":function addMonth(nt,at){return nt.add(at,"month")},"addDate":function addDate(nt,at){return nt.add(at,"day")},"setYear":function setYear(nt,at){return nt.year(at)},"setMonth":function setMonth(nt,at){return nt.month(at)},"setDate":function setDate(nt,at){return nt.date(at)},"setHour":function setHour(nt,at){return nt.hour(at)},"setMinute":function setMinute(nt,at){return nt.minute(at)},"setSecond":function setSecond(nt,at){return nt.second(at)},"setMillisecond":function setMillisecond(nt,at){return nt.millisecond(at)},"isAfter":function isAfter(nt,at){return nt.isAfter(at)},"isValidate":function isValidate(nt){return nt.isValid()},"locale":{"getWeekFirstDay":function getWeekFirstDay(nt){return _i()().locale(dn(nt)).localeData().firstDayOfWeek()},"getWeekFirstDate":function getWeekFirstDate(nt,at){return at.locale(dn(nt)).weekday(0)},"getWeek":function getWeek(nt,at){return at.locale(dn(nt)).week()},"getShortWeekDays":function getShortWeekDays(nt){return _i()().locale(dn(nt)).localeData().weekdaysMin()},"getShortMonths":function getShortMonths(nt){return _i()().locale(dn(nt)).localeData().monthsShort()},"format":function format(nt,at,lt){return at.locale(dn(nt)).format(lt)},"parse":function parse(nt,at,lt){for(var Rt=dn(nt),Bt=0;Bt<lt.length;Bt+=1){var Lt=lt[Bt],Ht=at;if(Lt.includes("wo")||Lt.includes("Wo")){for(var jt=Ht.split("-")[0],$t=Ht.split("-")[1],Kt=_i()(jt,"YYYY").startOf("year").locale(Rt),te=0;te<=52;te+=1){var ne=Kt.add(te,"week");if(ne.format("Wo")===$t)return ne}return null}var re=_i()(Ht,Lt,!0).locale(Rt);if(re.isValid())return re}return null}}},vn=lt(3417),gn=lt(3973),yn={"icon":{"tag":"svg","attrs":{"viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},"name":"calendar","theme":"outlined"},mn=lt(7588),_n=function CalendarOutlined(nt,at){return Lt.createElement(mn.A,(0,gn.A)({},nt,{"ref":at,"icon":yn}))};var bn=Lt.forwardRef(_n),xn={"icon":{"tag":"svg","attrs":{"viewBox":"64 64 896 896","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{"tag":"path","attrs":{"d":"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},"name":"clock-circle","theme":"outlined"},kn=function ClockCircleOutlined(nt,at){return Lt.createElement(mn.A,(0,gn.A)({},nt,{"ref":at,"icon":xn}))};var Sn=Lt.forwardRef(kn),An={"icon":{"tag":"svg","attrs":{"viewBox":"0 0 1024 1024","focusable":"false"},"children":[{"tag":"path","attrs":{"d":"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},"name":"swap-right","theme":"outlined"},wn=function SwapRightOutlined(nt,at){return Lt.createElement(mn.A,(0,gn.A)({},nt,{"ref":at,"icon":An}))};var Cn=Lt.forwardRef(wn),Mn=lt(7500),Tn=lt.n(Mn),En=lt(3691),Pn=lt(2110),Rn=lt(5429),On=lt(3549),Fn=lt(7953),or=lt(1378),sr=lt(6640),lr=lt(2477);var vr=Lt.createContext(null),yr={"bottomLeft":{"points":["tl","bl"],"offset":[0,4],"overflow":{"adjustX":1,"adjustY":1}},"bottomRight":{"points":["tr","br"],"offset":[0,4],"overflow":{"adjustX":1,"adjustY":1}},"topLeft":{"points":["bl","tl"],"offset":[0,-4],"overflow":{"adjustX":0,"adjustY":1}},"topRight":{"points":["br","tr"],"offset":[0,-4],"overflow":{"adjustX":0,"adjustY":1}}};var mr=function PickerTrigger(nt){var at=nt.popupElement,lt=nt.popupStyle,Rt=nt.popupClassName,Bt=nt.popupAlign,Ht=nt.transitionName,jt=nt.getPopupContainer,$t=nt.children,Kt=nt.range,te=nt.placement,ne=nt.builtinPlacements,re=void 0===ne?yr:ne,ae=nt.direction,oe=nt.visible,se=nt.onClose,le=Lt.useContext(vr).prefixCls,ue="".concat(le,"-dropdown"),ce=function getRealPlacement(nt,at){return void 0!==nt?nt:at?"bottomRight":"bottomLeft"}(te,"rtl"===ae);return Lt.createElement(lr.A,{"showAction":[],"hideAction":["click"],"popupPlacement":ce,"builtinPlacements":re,"prefixCls":ue,"popupTransitionName":Ht,"popup":at,"popupAlign":Bt,"popupVisible":oe,"popupClassName":Tn()(Rt,(0,sr.A)((0,sr.A)({},"".concat(ue,"-range"),Kt),"".concat(ue,"-rtl"),"rtl"===ae)),"popupStyle":lt,"stretch":"minWidth","getPopupContainer":jt,"onPopupVisibleChange":function onPopupVisibleChange(nt){nt||se()}},$t)};function leftPad(nt,at){for(var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",Rt=String(nt);Rt.length<at;)Rt="".concat(lt).concat(Rt);return Rt}function toArray(nt){return null==nt?[]:Array.isArray(nt)?nt:[nt]}function fillIndex(nt,at,lt){var Rt=(0,En.A)(nt);return Rt[at]=lt,Rt}function pickProps(nt,at){var lt={};return(at||Object.keys(nt)).forEach((function(at){void 0!==nt[at]&&(lt[at]=nt[at])})),lt}function getRowFormat(nt,at,lt){if(lt)return lt;switch(nt){case"time":return at.fieldTimeFormat;case"datetime":return at.fieldDateTimeFormat;case"month":return at.fieldMonthFormat;case"year":return at.fieldYearFormat;case"quarter":return at.fieldQuarterFormat;case"week":return at.fieldWeekFormat;default:return at.fieldDateFormat}}function getFromDate(nt,at,lt){var Rt=void 0!==lt?lt:at[at.length-1],Bt=at.find((function(at){return nt[at]}));return Rt!==Bt?nt[Bt]:void 0}function pickTriggerProps(nt){return pickProps(nt,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function useCellRender(nt,at,lt,Bt){var Ht=Lt.useMemo((function(){return nt||function(nt,Rt){var Bt=nt;return at&&"date"===Rt.type?at(Bt,Rt.today):lt&&"month"===Rt.type?lt(Bt,Rt.locale):Rt.originNode}}),[nt,lt,at]);return Lt.useCallback((function(nt,at){return Ht(nt,(0,Rt.A)((0,Rt.A)({},at),{},{"range":Bt}))}),[Ht,Bt])}function useFieldsInvalidate(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],Rt=Lt.useState([!1,!1]),Ht=(0,Bt.A)(Rt,2),jt=Ht[0],$t=Ht[1];return[Lt.useMemo((function(){return jt.map((function(Rt,Bt){if(Rt)return!0;var Lt=nt[Bt];return!!Lt&&(!lt[Bt]&&!Lt||!(!Lt||!at(Lt,{"activeIndex":Bt})))}))}),[nt,jt,at,lt]),function onSelectorInvalid(nt,at){$t((function(lt){return fillIndex(lt,at,nt)}))}]}function fillTimeFormat(nt,at,lt,Rt,Bt){var Lt="",Ht=[];return nt&&Ht.push(Bt?"hh":"HH"),at&&Ht.push("mm"),lt&&Ht.push("ss"),Lt=Ht.join(":"),Rt&&(Lt+=".SSS"),Bt&&(Lt+=" A"),Lt}function useLocale(nt,at){var lt=at.showHour,Bt=at.showMinute,Ht=at.showSecond,jt=at.showMillisecond,$t=at.use12Hours;return Lt.useMemo((function(){return function fillLocale(nt,at,lt,Bt,Lt,Ht){var jt=nt.fieldDateTimeFormat,$t=nt.fieldDateFormat,Kt=nt.fieldTimeFormat,te=nt.fieldMonthFormat,ne=nt.fieldYearFormat,re=nt.fieldWeekFormat,ae=nt.fieldQuarterFormat,oe=nt.yearFormat,se=nt.cellYearFormat,le=nt.cellQuarterFormat,ue=nt.dayFormat,ce=nt.cellDateFormat,he=fillTimeFormat(at,lt,Bt,Lt,Ht);return(0,Rt.A)((0,Rt.A)({},nt),{},{"fieldDateTimeFormat":jt||"YYYY-MM-DD ".concat(he),"fieldDateFormat":$t||"YYYY-MM-DD","fieldTimeFormat":Kt||he,"fieldMonthFormat":te||"YYYY-MM","fieldYearFormat":ne||"YYYY","fieldWeekFormat":re||"gggg-wo","fieldQuarterFormat":ae||"YYYY-[Q]Q","yearFormat":oe||"YYYY","cellYearFormat":se||"YYYY","cellQuarterFormat":le||"[Q]Q","cellDateFormat":ce||ue||"D"})}(nt,lt,Bt,Ht,jt,$t)}),[nt,lt,Bt,Ht,jt,$t])}var xr=lt(8299);function checkShow(nt,at,lt){return null!=lt?lt:at.some((function(at){return nt.includes(at)}))}var kr=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function isStringFormat(nt){return nt&&"string"==typeof nt}function existShowConfig(nt,at,lt,Rt){return[nt,at,lt,Rt].some((function(nt){return void 0!==nt}))}function fillShowConfig(nt,at,lt,Rt,Bt){var Lt=at,Ht=lt,jt=Rt;if(nt||Lt||Ht||jt||Bt){if(nt){var $t,Kt,te,ne=[Lt,Ht,jt].some((function(nt){return!1===nt})),re=[Lt,Ht,jt].some((function(nt){return!0===nt})),ae=!!ne||!re;Lt=null!==($t=Lt)&&void 0!==$t?$t:ae,Ht=null!==(Kt=Ht)&&void 0!==Kt?Kt:ae,jt=null!==(te=jt)&&void 0!==te?te:ae}}else Lt=!0,Ht=!0,jt=!0;return[Lt,Ht,jt,Bt]}function getTimeProps(nt){var at=nt.showTime,lt=function pickTimeProps(nt){var at=pickProps(nt,kr),lt=nt.format,Rt=nt.picker,Bt=null;return lt&&(Bt=lt,Array.isArray(Bt)&&(Bt=Bt[0]),Bt="object"===(0,xr.A)(Bt)?Bt.format:Bt),"time"===Rt&&(at.format=Bt),[at,Bt]}(nt),Lt=(0,Bt.A)(lt,2),Ht=Lt[0],jt=Lt[1],$t=at&&"object"===(0,xr.A)(at)?at:{},Kt=(0,Rt.A)((0,Rt.A)({"defaultOpenValue":$t.defaultOpenValue||$t.defaultValue},Ht),$t),te=Kt.showMillisecond,ne=Kt.showHour,re=Kt.showMinute,ae=Kt.showSecond,oe=fillShowConfig(existShowConfig(ne,re,ae,te),ne,re,ae,te),se=(0,Bt.A)(oe,3);return ne=se[0],re=se[1],ae=se[2],[Kt,(0,Rt.A)((0,Rt.A)({},Kt),{},{"showHour":ne,"showMinute":re,"showSecond":ae,"showMillisecond":te}),Kt.format,jt]}function fillShowTimeConfig(nt,at,lt,Lt,Ht){if("datetime"===nt||"time"===nt){for(var jt=Lt,$t=getRowFormat(nt,Ht,null),Kt=[at,lt],te=0;te<Kt.length;te+=1){var ne=toArray(Kt[te])[0];if(isStringFormat(ne)){$t=ne;break}}var re=jt.showHour,ae=jt.showMinute,oe=jt.showSecond,se=jt.showMillisecond,le=checkShow($t,["a","A","LT","LLL","LTS"],jt.use12Hours),ue=existShowConfig(re,ae,oe,se);ue||(re=checkShow($t,["H","h","k","LT","LLL"]),ae=checkShow($t,["m","LT","LLL"]),oe=checkShow($t,["s","LTS"]),se=checkShow($t,["SSS"]));var ce=fillShowConfig(ue,re,ae,oe,se),he=(0,Bt.A)(ce,3);re=he[0],ae=he[1],oe=he[2];var de=at||fillTimeFormat(re,ae,oe,se,le);return(0,Rt.A)((0,Rt.A)({},jt),{},{"format":de,"showHour":re,"showMinute":ae,"showSecond":oe,"showMillisecond":se,"use12Hours":le})}return null}function fillClearIcon(nt,at,lt){return!1===at?null:(at&&"object"===(0,xr.A)(at)?at:{}).clearIcon||lt||Lt.createElement("span",{"className":"".concat(nt,"-clear-btn")})}function nullableCompare(nt,at,lt){return!nt&&!at||nt===at||!(!nt||!at)&&lt()}function isSameDecade(nt,at,lt){return nullableCompare(at,lt,(function(){return Math.floor(nt.getYear(at)/10)===Math.floor(nt.getYear(lt)/10)}))}function isSameYear(nt,at,lt){return nullableCompare(at,lt,(function(){return nt.getYear(at)===nt.getYear(lt)}))}function getQuarter(nt,at){return Math.floor(nt.getMonth(at)/3)+1}function isSameMonth(nt,at,lt){return nullableCompare(at,lt,(function(){return isSameYear(nt,at,lt)&&nt.getMonth(at)===nt.getMonth(lt)}))}function isSameDate(nt,at,lt){return nullableCompare(at,lt,(function(){return isSameYear(nt,at,lt)&&isSameMonth(nt,at,lt)&&nt.getDate(at)===nt.getDate(lt)}))}function isSameTime(nt,at,lt){return nullableCompare(at,lt,(function(){return nt.getHour(at)===nt.getHour(lt)&&nt.getMinute(at)===nt.getMinute(lt)&&nt.getSecond(at)===nt.getSecond(lt)}))}function isSameTimestamp(nt,at,lt){return nullableCompare(at,lt,(function(){return isSameDate(nt,at,lt)&&isSameTime(nt,at,lt)&&nt.getMillisecond(at)===nt.getMillisecond(lt)}))}function isSameWeek(nt,at,lt,Rt){return nullableCompare(lt,Rt,(function(){var Bt=nt.locale.getWeekFirstDate(at,lt),Lt=nt.locale.getWeekFirstDate(at,Rt);return isSameYear(nt,Bt,Lt)&&nt.locale.getWeek(at,lt)===nt.locale.getWeek(at,Rt)}))}function isSame(nt,at,lt,Rt,Bt){switch(Bt){case"date":return isSameDate(nt,lt,Rt);case"week":return isSameWeek(nt,at.locale,lt,Rt);case"month":return isSameMonth(nt,lt,Rt);case"quarter":return function isSameQuarter(nt,at,lt){return nullableCompare(at,lt,(function(){return isSameYear(nt,at,lt)&&getQuarter(nt,at)===getQuarter(nt,lt)}))}(nt,lt,Rt);case"year":return isSameYear(nt,lt,Rt);case"decade":return isSameDecade(nt,lt,Rt);case"time":return isSameTime(nt,lt,Rt);default:return isSameTimestamp(nt,lt,Rt)}}function isInRange(nt,at,lt,Rt){return!!(at&&lt&&Rt)&&(nt.isAfter(Rt,at)&&nt.isAfter(lt,Rt))}function isSameOrAfter(nt,at,lt,Rt,Bt){return!!isSame(nt,at,lt,Rt,Bt)||nt.isAfter(lt,Rt)}function formatValue(nt,at){var lt=at.generateConfig,Rt=at.locale,Bt=at.format;return nt?"function"==typeof Bt?Bt(nt):lt.locale.format(Rt.locale,nt,Bt):""}function fillTime(nt,at,lt){var Rt=at,Bt=["getHour","getMinute","getSecond","getMillisecond"];return["setHour","setMinute","setSecond","setMillisecond"].forEach((function(at,Lt){Rt=lt?nt[at](Rt,nt[Bt[Lt]](lt)):nt[at](Rt,0)})),Rt}function useList(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Lt.useMemo((function(){var lt=nt?toArray(nt):nt;return at&&lt&&(lt[1]=lt[1]||lt[0]),lt}),[nt,at])}function useFilledProps(nt,at){var lt=nt.generateConfig,Ht=nt.locale,jt=nt.picker,$t=void 0===jt?"date":jt,Kt=nt.prefixCls,te=void 0===Kt?"rc-picker":Kt,ne=nt.styles,re=void 0===ne?{}:ne,ae=nt.classNames,oe=void 0===ae?{}:ae,se=nt.order,le=void 0===se||se,ue=nt.components,ce=void 0===ue?{}:ue,he=nt.inputRender,de=nt.allowClear,fe=nt.clearIcon,pe=nt.needConfirm,ve=nt.multiple,Ae=nt.format,we=nt.inputReadOnly,Ce=nt.disabledDate,je=nt.minDate,Ne=nt.maxDate,Ve=nt.showTime,Ge=nt.value,ti=nt.defaultValue,li=nt.pickerValue,hi=nt.defaultPickerValue,di=useList(Ge),fi=useList(ti),pi=useList(li),vi=useList(hi),mi="date"===$t&&Ve?"datetime":$t,_i="time"===mi||"datetime"===mi,bi=_i||ve,Mi=null!=pe?pe:_i,Ti=getTimeProps(nt),Ii=(0,Bt.A)(Ti,4),Bi=Ii[0],zi=Ii[1],Wi=Ii[2],Ui=Ii[3],$i=useLocale(Ht,zi),qi=Lt.useMemo((function(){return fillShowTimeConfig(mi,Wi,Ui,Bi,$i)}),[mi,Wi,Ui,Bi,$i]);var Ki=Lt.useMemo((function(){return(0,Rt.A)((0,Rt.A)({},nt),{},{"prefixCls":te,"locale":$i,"picker":$t,"styles":re,"classNames":oe,"order":le,"components":(0,Rt.A)({"input":he},ce),"clearIcon":fillClearIcon(te,de,fe),"showTime":qi,"value":di,"defaultValue":fi,"pickerValue":pi,"defaultPickerValue":vi},null==at?void 0:at())}),[nt]),Qi=function useFieldFormat(nt,at,lt){return Lt.useMemo((function(){var Rt=toArray(getRowFormat(nt,at,lt)),Bt=Rt[0],Lt="object"===(0,xr.A)(Bt)&&"mask"===Bt.type?Bt.format:null;return[Rt.map((function(nt){return"string"==typeof nt||"function"==typeof nt?nt:nt.format})),Lt]}),[nt,at,lt])}(mi,$i,Ae),Ji=(0,Bt.A)(Qi,2),dn=Ji[0],fn=Ji[1],vn=function useInputReadOnly(nt,at,lt){return!("function"!=typeof nt[0]&&!lt)||at}(dn,we,ve),gn=function useDisabledBoundary(nt,at,lt,Rt,Bt){return(0,Pn._q)((function(Lt,Ht){return!(!lt||!lt(Lt,Ht))||!(!Rt||!nt.isAfter(Rt,Lt)||isSame(nt,at,Rt,Lt,Ht.type))||!(!Bt||!nt.isAfter(Lt,Bt)||isSame(nt,at,Bt,Lt,Ht.type))}))}(lt,Ht,Ce,je,Ne),yn=function useInvalidate(nt,at,lt,Bt){return(0,Pn._q)((function(Lt,Ht){var jt=(0,Rt.A)({"type":at},Ht);if(delete jt.activeIndex,!nt.isValidate(Lt)||lt&&lt(Lt,jt))return!0;if(("date"===at||"time"===at)&&Bt){var $t,Kt=Ht&&1===Ht.activeIndex?"end":"start",te=(null===($t=Bt.disabledTime)||void 0===$t?void 0:$t.call(Bt,Lt,Kt,{"from":jt.from}))||{},ne=te.disabledHours,re=te.disabledMinutes,ae=te.disabledSeconds,oe=te.disabledMilliseconds,se=Bt.disabledHours,le=Bt.disabledMinutes,ue=Bt.disabledSeconds,ce=ne||se,he=re||le,de=ae||ue,fe=nt.getHour(Lt),pe=nt.getMinute(Lt),ve=nt.getSecond(Lt),Ae=nt.getMillisecond(Lt);if(ce&&ce().includes(fe))return!0;if(he&&he(fe).includes(pe))return!0;if(de&&de(fe,pe).includes(ve))return!0;if(oe&&oe(fe,pe,ve).includes(Ae))return!0}return!1}))}(lt,$t,gn,qi);return[Lt.useMemo((function(){return(0,Rt.A)((0,Rt.A)({},Ki),{},{"needConfirm":Mi,"inputReadOnly":vn,"disabledDate":gn})}),[Ki,Mi,vn,gn]),mi,bi,dn,fn,yn]}var Sr=lt(6667);function useOpen(nt,at){var lt=arguments.length>3?arguments[3]:void 0,Rt=function useDelayState(nt,at,lt){var Rt=(0,Pn.vz)(at,{"value":nt}),Ht=(0,Bt.A)(Rt,2),jt=Ht[0],$t=Ht[1],Kt=Lt.useRef(nt),te=Lt.useRef(),ne=function cancelRaf(){Sr.A.cancel(te.current)},re=(0,Pn._q)((function(){$t(Kt.current),lt&&jt!==Kt.current&&lt(Kt.current)})),ae=(0,Pn._q)((function(nt,at){ne(),Kt.current=nt,nt||at?re():te.current=(0,Sr.A)(re)}));return Lt.useEffect((function(){return ne}),[]),[jt,ae]}(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).every((function(nt){return nt}))&&nt,at||!1,lt),Ht=(0,Bt.A)(Rt,2),jt=Ht[0],$t=Ht[1];return[jt,function setOpen(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};at.inherit&&!jt||$t(nt,at.force)}]}function usePickerRef(nt){var at=Lt.useRef();return Lt.useImperativeHandle(nt,(function(){var nt;return{"nativeElement":null===(nt=at.current)||void 0===nt?void 0:nt.nativeElement,"focus":function focus(nt){var lt;null===(lt=at.current)||void 0===lt||lt.focus(nt)},"blur":function blur(){var nt;null===(nt=at.current)||void 0===nt||nt.blur()}}})),at}function usePresets(nt,at){return Lt.useMemo((function(){return nt||(at?((0,or.Ay)(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(at).map((function(nt){var at=(0,Bt.A)(nt,2);return{"label":at[0],"value":at[1]}}))):[])}),[nt,at])}function useLockEffect(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Rt=Lt.useRef(at);Rt.current=at,(0,Rn.o)((function(){if(!nt){var at=(0,Sr.A)((function(){Rt.current(nt)}),lt);return function(){Sr.A.cancel(at)}}Rt.current(nt)}),[nt])}function useRangeActive(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Rt=Lt.useState(0),Ht=(0,Bt.A)(Rt,2),jt=Ht[0],$t=Ht[1],Kt=Lt.useState(!1),te=(0,Bt.A)(Kt,2),ne=te[0],re=te[1],ae=Lt.useRef([]),oe=Lt.useRef(null),se=Lt.useRef(null),le=function updateSubmitIndex(nt){oe.current=nt};return useLockEffect(ne||lt,(function(){ne||(ae.current=[],le(null))})),Lt.useEffect((function(){ne&&ae.current.push(jt)}),[ne,jt]),[ne,function triggerFocus(nt){re(nt)},function lastOperation(nt){return nt&&(se.current=nt),se.current},jt,$t,function nextActiveIndex(lt){var Rt=ae.current,Bt=new Set(Rt.filter((function(nt){return lt[nt]||at[nt]}))),Lt=0===Rt[Rt.length-1]?1:0;return Bt.size>=2||nt[Lt]?null:Lt},ae.current,le,function hasActiveSubmitValue(nt){return oe.current===nt}]}function offsetPanelDate(nt,at,lt,Rt){switch(at){case"date":case"week":return nt.addMonth(lt,Rt);case"month":case"quarter":return nt.addYear(lt,Rt);case"year":return nt.addYear(lt,10*Rt);case"decade":return nt.addYear(lt,100*Rt);default:return lt}}var Ar=[];function useRangePickerValue(nt,at,lt,Rt,Ht,jt,$t,Kt){var te=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ar,ne=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ar,re=arguments.length>10&&void 0!==arguments[10]?arguments[10]:Ar,ae=arguments.length>11?arguments[11]:void 0,oe=arguments.length>12?arguments[12]:void 0,se=arguments.length>13?arguments[13]:void 0,le="time"===$t,ue=jt||0,ce=function getDefaultPickerValue(at){var Rt=nt.getNow();return le&&(Rt=fillTime(nt,Rt)),te[at]||lt[at]||Rt},he=(0,Bt.A)(ne,2),de=he[0],fe=he[1],pe=(0,Pn.vz)((function(){return ce(0)}),{"value":de}),ve=(0,Bt.A)(pe,2),Ae=ve[0],we=ve[1],Ce=(0,Pn.vz)((function(){return ce(1)}),{"value":fe}),je=(0,Bt.A)(Ce,2),Ne=je[0],Ve=je[1],Ge=Lt.useMemo((function(){var at=[Ae,Ne][ue];return le?at:fillTime(nt,at,re[ue])}),[le,Ae,Ne,ue,nt,re]),ti=function setCurrentPickerValue(lt){var Bt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panel";(0,[we,Ve][ue])(lt);var Lt=[Ae,Ne];Lt[ue]=lt,!ae||isSame(nt,at,Ae,Lt[0],$t)&&isSame(nt,at,Ne,Lt[1],$t)||ae(Lt,{"source":Bt,"range":1===ue?"end":"start","mode":Rt})},li=Lt.useRef(null);return(0,Rn.A)((function(){if(Ht&&!te[ue]){var Rt=le?null:nt.getNow();if(null!==li.current&&li.current!==ue?Rt=[Ae,Ne][1^ue]:lt[ue]?Rt=0===ue?lt[0]:function getEndDatePickerValue(lt,Rt){if(Kt){var Bt={"date":"month","week":"month","month":"year","quarter":"year"}[$t];if(Bt&&!isSame(nt,at,lt,Rt,Bt))return offsetPanelDate(nt,$t,Rt,-1);if("year"===$t&&lt&&Math.floor(nt.getYear(lt)/10)!==Math.floor(nt.getYear(Rt)/10))return offsetPanelDate(nt,$t,Rt,-1)}return Rt}(lt[0],lt[1]):lt[1^ue]&&(Rt=lt[1^ue]),Rt){oe&&nt.isAfter(oe,Rt)&&(Rt=oe);var Bt=Kt?offsetPanelDate(nt,$t,Rt,1):Rt;se&&nt.isAfter(Bt,se)&&(Rt=Kt?offsetPanelDate(nt,$t,se,-1):se),ti(Rt,"reset")}}}),[Ht,ue,lt[ue]]),Lt.useEffect((function(){li.current=Ht?ue:null}),[Ht,ue]),(0,Rn.A)((function(){Ht&&te&&te[ue]&&ti(te[ue],"reset")}),[Ht,ue]),[Ge,ti]}function useSyncState(nt,at){var lt=Lt.useRef(nt),Rt=Lt.useState({}),Ht=(0,Bt.A)(Rt,2)[1],jt=function getter(nt){return nt&&void 0!==at?at:lt.current};return[jt,function setter(nt){lt.current=nt,Ht({})},jt(!0)]}var wr=[];function useUtil(nt,at,lt){return[function getDateTexts(Rt){return Rt.map((function(Rt){return formatValue(Rt,{"generateConfig":nt,"locale":at,"format":lt[0]})}))},function isSameDates(at,lt){for(var Rt=Math.max(at.length,lt.length),Bt=-1,Lt=0;Lt<Rt;Lt+=1){var Ht=at[Lt]||null,jt=lt[Lt]||null;if(Ht!==jt&&!isSameTimestamp(nt,Ht,jt)){Bt=Lt;break}}return[Bt<0,0!==Bt]}]}function orderDates(nt,at){return(0,En.A)(nt).sort((function(nt,lt){return at.isAfter(nt,lt)?1:-1}))}function useInnerValue(nt,at,lt,Rt,Ht,jt,$t,Kt,te){var ne=(0,Pn.vz)(jt,{"value":$t}),re=(0,Bt.A)(ne,2),ae=re[0],oe=re[1],se=ae||wr,le=function useCalendarValue(nt){var at=useSyncState(nt),lt=(0,Bt.A)(at,2),Rt=lt[0],Ht=lt[1],jt=(0,Pn._q)((function(){Ht(nt)}));return Lt.useEffect((function(){jt()}),[nt]),[Rt,Ht]}(se),ue=(0,Bt.A)(le,2),ce=ue[0],he=ue[1],de=useUtil(nt,at,lt),fe=(0,Bt.A)(de,2),pe=fe[0],ve=fe[1],Ae=(0,Pn._q)((function(at){var lt=(0,En.A)(at);if(Rt)for(var Lt=0;Lt<2;Lt+=1)lt[Lt]=lt[Lt]||null;else Ht&&(lt=orderDates(lt.filter((function(nt){return nt})),nt));var jt=ve(ce(),lt),$t=(0,Bt.A)(jt,2),te=$t[0],ne=$t[1];if(!te&&(he(lt),Kt)){var re=pe(lt);Kt(lt,re,{"range":ne?"end":"start"})}}));return[se,oe,ce,Ae,function triggerOk(){te&&te(ce())}]}function useRangeValue(nt,at,lt,Rt,Ht,jt,$t,Kt,te,ne){var re=nt.generateConfig,ae=nt.locale,oe=nt.picker,se=nt.onChange,le=nt.allowEmpty,ue=nt.order,ce=!jt.some((function(nt){return nt}))&&ue,he=useUtil(re,ae,$t),de=(0,Bt.A)(he,2),fe=de[0],pe=de[1],ve=useSyncState(at),Ae=(0,Bt.A)(ve,2),we=Ae[0],Ce=Ae[1],je=(0,Pn._q)((function(){Ce(at)}));Lt.useEffect((function(){je()}),[at]);var Ne=(0,Pn._q)((function(nt){var Rt=null===nt,Lt=(0,En.A)(nt||we());if(Rt)for(var $t=Math.max(jt.length,Lt.length),Kt=0;Kt<$t;Kt+=1)jt[Kt]||(Lt[Kt]=null);ce&&Lt[0]&&Lt[1]&&(Lt=orderDates(Lt,re)),Ht(Lt);var te=Lt,he=(0,Bt.A)(te,2),de=he[0],ve=he[1],Ae=!de,Ce=!ve,je=!le||(!Ae||le[0])&&(!Ce||le[1]),Ne=!ue||Ae||Ce||isSame(re,ae,de,ve,oe)||re.isAfter(ve,de),Ve=(jt[0]||!de||!ne(de,{"activeIndex":0}))&&(jt[1]||!ve||!ne(ve,{"from":de,"activeIndex":1})),Ge=Rt||je&&Ne&&Ve;if(Ge){lt(Lt);var ti=pe(Lt,at),li=(0,Bt.A)(ti,1)[0];se&&!li&&se(Rt&&Lt.every((function(nt){return!nt}))?null:Lt,fe(Lt))}return Ge})),Ve=(0,Pn._q)((function(nt,at){var lt=fillIndex(we(),nt,Rt()[nt]);Ce(lt),at&&Ne()})),Ge=!Kt&&!te;return useLockEffect(!Ge,(function(){Ge&&(Ne(),Ht(at),je())}),2),[Ve,Ne]}function useShowNow(nt,at,lt,Rt,Bt){return("date"===at||"time"===at)&&(void 0!==lt?lt:void 0!==Rt?Rt:!Bt&&("date"===nt||"time"===nt))}var Mr=lt(5113);function emptyDisabled(){return[]}function generateUnits(nt,at){for(var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Bt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],Lt=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,Ht=[],jt=lt>=1?0|lt:1,$t=nt;$t<=at;$t+=jt){var Kt=Bt.includes($t);Kt&&Rt||Ht.push({"label":leftPad($t,Lt),"value":$t,"disabled":Kt})}return Ht}function useTimeInfo(nt){var at=arguments.length>2?arguments[2]:void 0,lt=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})||{},Ht=lt.use12Hours,jt=lt.hourStep,$t=void 0===jt?1:jt,Kt=lt.minuteStep,te=void 0===Kt?1:Kt,ne=lt.secondStep,re=void 0===ne?1:ne,ae=lt.millisecondStep,oe=void 0===ae?100:ae,se=lt.hideDisabledOptions,le=lt.disabledTime,ue=lt.disabledHours,ce=lt.disabledMinutes,he=lt.disabledSeconds,de=Lt.useMemo((function(){return at||nt.getNow()}),[at,nt]),fe=Lt.useCallback((function(nt){var at=(null==le?void 0:le(nt))||{};return[at.disabledHours||ue||emptyDisabled,at.disabledMinutes||ce||emptyDisabled,at.disabledSeconds||he||emptyDisabled,at.disabledMilliseconds||emptyDisabled]}),[le,ue,ce,he]),pe=Lt.useMemo((function(){return fe(de)}),[de,fe]),ve=(0,Bt.A)(pe,4),Ae=ve[0],we=ve[1],Ce=ve[2],je=ve[3],Ne=Lt.useCallback((function(nt,at,lt,Bt){var Lt=generateUnits(0,23,$t,se,nt());return[Ht?Lt.map((function(nt){return(0,Rt.A)((0,Rt.A)({},nt),{},{"label":leftPad(nt.value%12||12,2)})})):Lt,function getMinuteUnits(nt){return generateUnits(0,59,te,se,at(nt))},function getSecondUnits(nt,at){return generateUnits(0,59,re,se,lt(nt,at))},function getMillisecondUnits(nt,at,lt){return generateUnits(0,999,oe,se,Bt(nt,at,lt),3)}]}),[se,$t,Ht,oe,te,re]),Ve=Lt.useMemo((function(){return Ne(Ae,we,Ce,je)}),[Ne,Ae,we,Ce,je]),Ge=(0,Bt.A)(Ve,4),ti=Ge[0],li=Ge[1],hi=Ge[2],di=Ge[3];return[function getValidTime(at,lt){var Rt=function getCheckHourUnits(){return ti},Lt=li,Ht=hi,jt=di;if(lt){var $t=fe(lt),Kt=(0,Bt.A)($t,4),te=Kt[0],ne=Kt[1],re=Kt[2],ae=Kt[3],oe=Ne(te,ne,re,ae),se=(0,Bt.A)(oe,4),le=se[0];Rt=function getCheckHourUnits(){return le},Lt=se[1],Ht=se[2],jt=se[3]}var ue=function findValidateTime(nt,at,lt,Rt,Bt,Lt){var Ht=nt;function alignValidate(nt,at,lt){var Rt=Lt[nt](Ht),Bt=lt.find((function(nt){return nt.value===Rt}));if(!Bt||Bt.disabled){var jt=lt.filter((function(nt){return!nt.disabled})),$t=(0,En.A)(jt).reverse().find((function(nt){return nt.value<=Rt}))||jt[0];$t&&(Rt=$t.value,Ht=Lt[at](Ht,Rt))}return Rt}var jt=alignValidate("getHour","setHour",at()),$t=alignValidate("getMinute","setMinute",lt(jt)),Kt=alignValidate("getSecond","setSecond",Rt(jt,$t));return alignValidate("getMillisecond","setMillisecond",Bt(jt,$t,Kt)),Ht}(at,Rt,Lt,Ht,jt,nt);return ue},ti,li,hi,di]}function Footer(nt){var at=nt.mode,lt=nt.internalMode,Rt=nt.renderExtraFooter,Ht=nt.showNow,jt=nt.showTime,$t=nt.onSubmit,Kt=nt.onNow,te=nt.invalid,ne=nt.needConfirm,re=nt.generateConfig,ae=nt.disabledDate,oe=Lt.useContext(vr),se=oe.prefixCls,le=oe.locale,ue=oe.button,ce=void 0===ue?"button":ue,he=re.getNow(),de=useTimeInfo(re,jt,he),fe=(0,Bt.A)(de,1)[0],pe=null==Rt?void 0:Rt(at),ve=ae(he,{"type":at}),Ae="".concat(se,"-now"),we="".concat(Ae,"-btn"),Ce=Ht&&Lt.createElement("li",{"className":Ae},Lt.createElement("a",{"className":Tn()(we,ve&&"".concat(we,"-disabled")),"aria-disabled":ve,"onClick":function onInternalNow(){if(!ve){var nt=fe(he);Kt(nt)}}},"date"===lt?le.today:le.now)),je=ne&&Lt.createElement("li",{"className":"".concat(se,"-ok")},Lt.createElement(ce,{"disabled":te,"onClick":$t},le.ok)),Ne=(Ce||je)&&Lt.createElement("ul",{"className":"".concat(se,"-ranges")},Ce,je);return pe||Ne?Lt.createElement("div",{"className":"".concat(se,"-footer")},pe&&Lt.createElement("div",{"className":"".concat(se,"-footer-extra")},pe),Ne):null}function useToggleDates(nt,at,lt){return function toggleDates(Rt,Bt){var Lt=Rt.findIndex((function(Rt){return isSame(nt,at,Rt,Bt,lt)}));if(-1===Lt)return[].concat((0,En.A)(Rt),[Bt]);var Ht=(0,En.A)(Rt);return Ht.splice(Lt,1),Ht}}var Tr=Lt.createContext(null);function usePanelContext(){return Lt.useContext(Tr)}function useInfo(nt,at){var lt=nt.prefixCls,Rt=nt.generateConfig,Bt=nt.locale,Lt=nt.disabledDate,Ht=nt.minDate,jt=nt.maxDate,$t=nt.cellRender,Kt=nt.hoverValue,te=nt.hoverRangeValue,ne=nt.onHover,re=nt.values,ae=nt.pickerValue,oe=nt.onSelect,se=nt.prevIcon,le=nt.nextIcon,ue=nt.superPrevIcon,ce=nt.superNextIcon,he=Rt.getNow();return[{"now":he,"values":re,"pickerValue":ae,"prefixCls":lt,"disabledDate":Lt,"minDate":Ht,"maxDate":jt,"cellRender":$t,"hoverValue":Kt,"hoverRangeValue":te,"onHover":ne,"locale":Bt,"generateConfig":Rt,"onSelect":oe,"panelType":at,"prevIcon":se,"nextIcon":le,"superPrevIcon":ue,"superNextIcon":ce},he]}var Ir=Lt.createContext({});function PanelBody(nt){for(var at=nt.rowNum,lt=nt.colNum,Ht=nt.baseDate,jt=nt.getCellDate,$t=nt.prefixColumn,Kt=nt.rowClassName,te=nt.titleFormat,ne=nt.getCellText,re=nt.getCellClassName,ae=nt.headerCells,oe=nt.cellSelection,se=void 0===oe||oe,le=nt.disabledDate,ue=usePanelContext(),ce=ue.prefixCls,he=ue.panelType,de=ue.now,fe=ue.disabledDate,pe=ue.cellRender,ve=ue.onHover,Ae=ue.hoverValue,we=ue.hoverRangeValue,Ce=ue.generateConfig,je=ue.values,Ne=ue.locale,Ve=ue.onSelect,Ge=le||fe,ti="".concat(ce,"-cell"),li=Lt.useContext(Ir).onCellDblClick,hi=function matchValues(nt){return je.some((function(at){return at&&isSame(Ce,Ne,nt,at,he)}))},di=[],fi=0;fi<at;fi+=1){for(var pi=[],vi=void 0,mi=function _loop(){var nt=jt(Ht,fi*lt+_i),at=null==Ge?void 0:Ge(nt,{"type":he});0===_i&&(vi=nt,$t&&pi.push($t(vi)));var Kt=!1,ae=!1,oe=!1;if(se&&we){var le=(0,Bt.A)(we,2),ue=le[0],fe=le[1];Kt=isInRange(Ce,ue,fe,nt),ae=isSame(Ce,Ne,nt,ue,he),oe=isSame(Ce,Ne,nt,fe,he)}var je=te?formatValue(nt,{"locale":Ne,"format":te,"generateConfig":Ce}):void 0,di=Lt.createElement("div",{"className":"".concat(ti,"-inner")},ne(nt));pi.push(Lt.createElement("td",{"key":_i,"title":je,"className":Tn()(ti,(0,Rt.A)((0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)({},"".concat(ti,"-disabled"),at),"".concat(ti,"-hover"),(Ae||[]).some((function(at){return isSame(Ce,Ne,nt,at,he)}))),"".concat(ti,"-in-range"),Kt&&!ae&&!oe),"".concat(ti,"-range-start"),ae),"".concat(ti,"-range-end"),oe),"".concat(ce,"-cell-selected"),!we&&"week"!==he&&hi(nt)),re(nt))),"onClick":function onClick(){at||Ve(nt)},"onDoubleClick":function onDoubleClick(){!at&&li&&li()},"onMouseEnter":function onMouseEnter(){at||null==ve||ve(nt)},"onMouseLeave":function onMouseLeave(){at||null==ve||ve(null)}},pe?pe(nt,{"prefixCls":ce,"originNode":di,"today":de,"type":he,"locale":Ne}):di))},_i=0;_i<lt;_i+=1)mi();di.push(Lt.createElement("tr",{"key":fi,"className":null==Kt?void 0:Kt(vi)},pi))}return Lt.createElement("div",{"className":"".concat(ce,"-body")},Lt.createElement("table",{"className":"".concat(ce,"-content")},ae&&Lt.createElement("thead",null,Lt.createElement("tr",null,ae)),Lt.createElement("tbody",null,di)))}var Br={"visibility":"hidden"};var Or=function PanelHeader(nt){var at=nt.offset,lt=nt.superOffset,Rt=nt.onChange,Bt=nt.getStart,Ht=nt.getEnd,jt=nt.children,$t=usePanelContext(),Kt=$t.prefixCls,te=$t.prevIcon,ne=void 0===te?"":te,re=$t.nextIcon,ae=void 0===re?"":re,oe=$t.superPrevIcon,se=void 0===oe?"":oe,le=$t.superNextIcon,ue=void 0===le?"":le,ce=$t.minDate,he=$t.maxDate,de=$t.generateConfig,fe=$t.locale,pe=$t.pickerValue,ve=$t.panelType,Ae="".concat(Kt,"-header"),we=Lt.useContext(Ir),Ce=we.hidePrev,je=we.hideNext,Ne=we.hideHeader,Ve=Lt.useMemo((function(){if(!ce||!at||!Ht)return!1;var nt=Ht(at(-1,pe));return!isSameOrAfter(de,fe,nt,ce,ve)}),[ce,at,pe,Ht,de,fe,ve]),Ge=Lt.useMemo((function(){if(!ce||!lt||!Ht)return!1;var nt=Ht(lt(-1,pe));return!isSameOrAfter(de,fe,nt,ce,ve)}),[ce,lt,pe,Ht,de,fe,ve]),ti=Lt.useMemo((function(){if(!he||!at||!Bt)return!1;var nt=Bt(at(1,pe));return!isSameOrAfter(de,fe,he,nt,ve)}),[he,at,pe,Bt,de,fe,ve]),li=Lt.useMemo((function(){if(!he||!lt||!Bt)return!1;var nt=Bt(lt(1,pe));return!isSameOrAfter(de,fe,he,nt,ve)}),[he,lt,pe,Bt,de,fe,ve]),hi=function onOffset(nt){at&&Rt(at(nt,pe))},di=function onSuperOffset(nt){lt&&Rt(lt(nt,pe))};if(Ne)return null;var fi="".concat(Ae,"-prev-btn"),pi="".concat(Ae,"-next-btn"),vi="".concat(Ae,"-super-prev-btn"),mi="".concat(Ae,"-super-next-btn");return Lt.createElement("div",{"className":Ae},lt&&Lt.createElement("button",{"type":"button","aria-label":fe.previousYear,"onClick":function onClick(){return di(-1)},"tabIndex":-1,"className":Tn()(vi,Ge&&"".concat(vi,"-disabled")),"disabled":Ge,"style":Ce?Br:{}},se),at&&Lt.createElement("button",{"type":"button","aria-label":fe.previousMonth,"onClick":function onClick(){return hi(-1)},"tabIndex":-1,"className":Tn()(fi,Ve&&"".concat(fi,"-disabled")),"disabled":Ve,"style":Ce?Br:{}},ne),Lt.createElement("div",{"className":"".concat(Ae,"-view")},jt),at&&Lt.createElement("button",{"type":"button","aria-label":fe.nextMonth,"onClick":function onClick(){return hi(1)},"tabIndex":-1,"className":Tn()(pi,ti&&"".concat(pi,"-disabled")),"disabled":ti,"style":je?Br:{}},ae),lt&&Lt.createElement("button",{"type":"button","aria-label":fe.nextYear,"onClick":function onClick(){return di(1)},"tabIndex":-1,"className":Tn()(mi,li&&"".concat(mi,"-disabled")),"disabled":li,"style":je?Br:{}},ue))};function DatePanel(nt){var at=nt.prefixCls,lt=nt.panelName,Rt=void 0===lt?"date":lt,Ht=nt.locale,jt=nt.generateConfig,$t=nt.pickerValue,Kt=nt.onPickerValueChange,te=nt.onModeChange,ne=nt.mode,re=void 0===ne?"date":ne,ae=nt.disabledDate,oe=nt.onSelect,se=nt.onHover,le=nt.showWeek,ue="".concat(at,"-").concat(Rt,"-panel"),ce="".concat(at,"-cell"),he="week"===re,de=useInfo(nt,re),fe=(0,Bt.A)(de,2),pe=fe[0],ve=fe[1],Ae=jt.locale.getWeekFirstDay(Ht.locale),we=jt.setDate($t,1),Ce=function getWeekStartDate(nt,at,lt){var Rt=at.locale.getWeekFirstDay(nt),Bt=at.setDate(lt,1),Lt=at.getWeekDay(Bt),Ht=at.addDate(Bt,Rt-Lt);return at.getMonth(Ht)===at.getMonth(lt)&&at.getDate(Ht)>1&&(Ht=at.addDate(Ht,-7)),Ht}(Ht.locale,jt,we),je=jt.getMonth($t),Ne=(void 0===le?he:le)?function(nt){var at=null==ae?void 0:ae(nt,{"type":"week"});return Lt.createElement("td",{"key":"week","className":Tn()(ce,"".concat(ce,"-week"),(0,sr.A)({},"".concat(ce,"-disabled"),at)),"onClick":function onClick(){at||oe(nt)},"onMouseEnter":function onMouseEnter(){at||null==se||se(nt)},"onMouseLeave":function onMouseLeave(){at||null==se||se(null)}},Lt.createElement("div",{"className":"".concat(ce,"-inner")},jt.locale.getWeek(Ht.locale,nt)))}:null,Ve=[],Ge=Ht.shortWeekDays||(jt.locale.getShortWeekDays?jt.locale.getShortWeekDays(Ht.locale):[]);Ne&&Ve.push(Lt.createElement("th",{"key":"empty"},Lt.createElement("span",{"style":{"width":0,"height":0,"position":"absolute","overflow":"hidden","opacity":0}},Ht.week)));for(var ti=0;ti<7;ti+=1)Ve.push(Lt.createElement("th",{"key":ti},Ge[(ti+Ae)%7]));var li=Ht.shortMonths||(jt.locale.getShortMonths?jt.locale.getShortMonths(Ht.locale):[]),hi=Lt.createElement("button",{"type":"button","aria-label":Ht.yearSelect,"key":"year","onClick":function onClick(){te("year",$t)},"tabIndex":-1,"className":"".concat(at,"-year-btn")},formatValue($t,{"locale":Ht,"format":Ht.yearFormat,"generateConfig":jt})),di=Lt.createElement("button",{"type":"button","aria-label":Ht.monthSelect,"key":"month","onClick":function onClick(){te("month",$t)},"tabIndex":-1,"className":"".concat(at,"-month-btn")},Ht.monthFormat?formatValue($t,{"locale":Ht,"format":Ht.monthFormat,"generateConfig":jt}):li[je]),fi=Ht.monthBeforeYear?[di,hi]:[hi,di];return Lt.createElement(Tr.Provider,{"value":pe},Lt.createElement("div",{"className":Tn()(ue,le&&"".concat(ue,"-show-week"))},Lt.createElement(Or,{"offset":function offset(nt){return jt.addMonth($t,nt)},"superOffset":function superOffset(nt){return jt.addYear($t,nt)},"onChange":Kt,"getStart":function getStart(nt){return jt.setDate(nt,1)},"getEnd":function getEnd(nt){var at=jt.setDate(nt,1);return at=jt.addMonth(at,1),jt.addDate(at,-1)}},fi),Lt.createElement(PanelBody,(0,gn.A)({"titleFormat":Ht.fieldDateFormat},nt,{"colNum":7,"rowNum":6,"baseDate":Ce,"headerCells":Ve,"getCellDate":function getCellDate(nt,at){return jt.addDate(nt,at)},"getCellText":function getCellText(nt){return formatValue(nt,{"locale":Ht,"format":Ht.cellDateFormat,"generateConfig":jt})},"getCellClassName":function getCellClassName(nt){return(0,sr.A)((0,sr.A)({},"".concat(at,"-cell-in-view"),isSameMonth(jt,nt,$t)),"".concat(at,"-cell-today"),isSameDate(jt,nt,ve))},"prefixColumn":Ne,"cellSelection":!he}))))}var Dr=lt(1411),Lr=1/3;function flattenUnits(nt){return nt.map((function(nt){return[nt.value,nt.label,nt.disabled].join(",")})).join(";")}function TimeColumn(nt){var at=nt.units,lt=nt.value,Rt=nt.optionalValue,Ht=nt.type,jt=nt.onChange,$t=nt.onHover,Kt=nt.onDblClick,te=nt.changeOnScroll,ne=usePanelContext(),re=ne.prefixCls,ae=ne.cellRender,oe=ne.now,se=ne.locale,le="".concat(re,"-time-panel"),ue="".concat(re,"-time-panel-cell"),ce=Lt.useRef(null),he=Lt.useRef(),de=function clearDelayCheck(){clearTimeout(he.current)},fe=function useScrollTo(nt,at){var lt=Lt.useRef(!1),Rt=Lt.useRef(null),Bt=Lt.useRef(null),Ht=function stopScroll(){Sr.A.cancel(Rt.current),lt.current=!1},jt=Lt.useRef(),$t=(0,Pn._q)((function startScroll(){var Lt=nt.current;if(Bt.current=null,jt.current=0,Lt){var $t=Lt.querySelector('[data-value="'.concat(at,'"]')),Kt=Lt.querySelector("li");$t&&Kt&&function doScroll(){Ht(),lt.current=!0,jt.current+=1;var nt=Lt.scrollTop,at=Kt.offsetTop,te=$t.offsetTop,ne=te-at;if(0===te&&$t!==Kt||!(0,Dr.A)(Lt))jt.current<=5&&(Rt.current=(0,Sr.A)(doScroll));else{var re=nt+(ne-nt)*Lr,ae=Math.abs(ne-re);if(null!==Bt.current&&Bt.current<ae)Ht();else{if(Bt.current=ae,ae<=1)return Lt.scrollTop=ne,void Ht();Lt.scrollTop=re,Rt.current=(0,Sr.A)(doScroll)}}}()}}));return[$t,Ht,function isScrolling(){return lt.current}]}(ce,null!=lt?lt:Rt),pe=(0,Bt.A)(fe,3),ve=pe[0],Ae=pe[1],we=pe[2];(0,Rn.A)((function(){return ve(),de(),function(){Ae(),de()}}),[lt,Rt,flattenUnits(at)]);var Ce="".concat(le,"-column");return Lt.createElement("ul",{"className":Ce,"ref":ce,"data-type":Ht,"onScroll":function onInternalScroll(nt){de();var lt=nt.target;!we()&&te&&(he.current=setTimeout((function(){var nt=ce.current,Rt=nt.querySelector("li").offsetTop,Bt=Array.from(nt.querySelectorAll("li")).map((function(nt){return nt.offsetTop-Rt})).map((function(nt,Rt){return at[Rt].disabled?Number.MAX_SAFE_INTEGER:Math.abs(nt-lt.scrollTop)})),Lt=Math.min.apply(Math,(0,En.A)(Bt)),Ht=Bt.findIndex((function(nt){return nt===Lt})),$t=at[Ht];$t&&!$t.disabled&&jt($t.value)}),300))}},at.map((function(nt){var at=nt.label,Rt=nt.value,Bt=nt.disabled,te=Lt.createElement("div",{"className":"".concat(ue,"-inner")},at);return Lt.createElement("li",{"key":Rt,"className":Tn()(ue,(0,sr.A)((0,sr.A)({},"".concat(ue,"-selected"),lt===Rt),"".concat(ue,"-disabled"),Bt)),"onClick":function onClick(){Bt||jt(Rt)},"onDoubleClick":function onDoubleClick(){!Bt&&Kt&&Kt()},"onMouseEnter":function onMouseEnter(){$t(Rt)},"onMouseLeave":function onMouseLeave(){$t(null)},"data-value":Rt},ae?ae(Rt,{"prefixCls":re,"originNode":te,"today":oe,"type":"time","subType":Ht,"locale":se}):te)})))}function isAM(nt){return nt<12}function TimePanelBody(nt){var at=nt.showHour,lt=nt.showMinute,Rt=nt.showSecond,Ht=nt.showMillisecond,jt=nt.use12Hours,$t=nt.changeOnScroll,Kt=usePanelContext(),te=Kt.prefixCls,ne=Kt.values,re=Kt.generateConfig,ae=Kt.locale,oe=Kt.onSelect,se=Kt.onHover,le=void 0===se?function(){}:se,ue=Kt.pickerValue,ce=(null==ne?void 0:ne[0])||null,he=Lt.useContext(Ir).onCellDblClick,de=useTimeInfo(re,nt,ce),fe=(0,Bt.A)(de,5),pe=fe[0],ve=fe[1],Ae=fe[2],we=fe[3],Ce=fe[4],je=function getUnitValue(nt){return[ce&&re[nt](ce),ue&&re[nt](ue)]},Ne=je("getHour"),Ve=(0,Bt.A)(Ne,2),Ge=Ve[0],ti=Ve[1],li=je("getMinute"),hi=(0,Bt.A)(li,2),di=hi[0],fi=hi[1],pi=je("getSecond"),vi=(0,Bt.A)(pi,2),mi=vi[0],_i=vi[1],bi=je("getMillisecond"),Mi=(0,Bt.A)(bi,2),Ti=Mi[0],Ii=Mi[1],Bi=null===Ge?null:isAM(Ge)?"am":"pm",zi=Lt.useMemo((function(){return jt?isAM(Ge)?ve.filter((function(nt){return isAM(nt.value)})):ve.filter((function(nt){return!isAM(nt.value)})):ve}),[Ge,ve,jt]),Wi=function getEnabled(nt,at){var lt,Rt=nt.filter((function(nt){return!nt.disabled}));return null!=at?at:null==Rt||null===(lt=Rt[0])||void 0===lt?void 0:lt.value},Ui=Wi(ve,Ge),$i=Lt.useMemo((function(){return Ae(Ui)}),[Ae,Ui]),qi=Wi($i,di),Ki=Lt.useMemo((function(){return we(Ui,qi)}),[we,Ui,qi]),Qi=Wi(Ki,mi),Ji=Lt.useMemo((function(){return Ce(Ui,qi,Qi)}),[Ce,Ui,qi,Qi]),dn=Wi(Ji,Ti),fn=Lt.useMemo((function(){if(!jt)return[];var nt=re.getNow(),at=re.setHour(nt,6),lt=re.setHour(nt,18),Rt=function formatMeridiem(nt,at){var lt=ae.cellMeridiemFormat;return lt?formatValue(nt,{"generateConfig":re,"locale":ae,"format":lt}):at};return[{"label":Rt(at,"AM"),"value":"am","disabled":ve.every((function(nt){return nt.disabled||!isAM(nt.value)}))},{"label":Rt(lt,"PM"),"value":"pm","disabled":ve.every((function(nt){return nt.disabled||isAM(nt.value)}))}]}),[ve,jt,re,ae]),vn=function triggerChange(nt){var at=pe(nt);oe(at)},yn=Lt.useMemo((function(){var nt=ce||ue||re.getNow(),at=function isNotNull(nt){return null!=nt};return at(Ge)?(nt=re.setHour(nt,Ge),nt=re.setMinute(nt,di),nt=re.setSecond(nt,mi),nt=re.setMillisecond(nt,Ti)):at(ti)?(nt=re.setHour(nt,ti),nt=re.setMinute(nt,fi),nt=re.setSecond(nt,_i),nt=re.setMillisecond(nt,Ii)):at(Ui)&&(nt=re.setHour(nt,Ui),nt=re.setMinute(nt,qi),nt=re.setSecond(nt,Qi),nt=re.setMillisecond(nt,dn)),nt}),[ce,ue,Ge,di,mi,Ti,Ui,qi,Qi,dn,ti,fi,_i,Ii,re]),mn=function fillColumnValue(nt,at){return null===nt?null:re[at](yn,nt)},_n=function getNextHourTime(nt){return mn(nt,"setHour")},bn=function getNextMinuteTime(nt){return mn(nt,"setMinute")},xn=function getNextSecondTime(nt){return mn(nt,"setSecond")},kn=function getNextMillisecondTime(nt){return mn(nt,"setMillisecond")},Sn=function getMeridiemTime(nt){return null===nt?null:"am"!==nt||isAM(Ge)?"pm"===nt&&isAM(Ge)?re.setHour(yn,Ge+12):yn:re.setHour(yn,Ge-12)},An={"onDblClick":he,"changeOnScroll":$t};return Lt.createElement("div",{"className":"".concat(te,"-content")},at&&Lt.createElement(TimeColumn,(0,gn.A)({"units":zi,"value":Ge,"optionalValue":ti,"type":"hour","onChange":function onHourChange(nt){vn(_n(nt))},"onHover":function onHourHover(nt){le(_n(nt))}},An)),lt&&Lt.createElement(TimeColumn,(0,gn.A)({"units":$i,"value":di,"optionalValue":fi,"type":"minute","onChange":function onMinuteChange(nt){vn(bn(nt))},"onHover":function onMinuteHover(nt){le(bn(nt))}},An)),Rt&&Lt.createElement(TimeColumn,(0,gn.A)({"units":Ki,"value":mi,"optionalValue":_i,"type":"second","onChange":function onSecondChange(nt){vn(xn(nt))},"onHover":function onSecondHover(nt){le(xn(nt))}},An)),Ht&&Lt.createElement(TimeColumn,(0,gn.A)({"units":Ji,"value":Ti,"optionalValue":Ii,"type":"millisecond","onChange":function onMillisecondChange(nt){vn(kn(nt))},"onHover":function onMillisecondHover(nt){le(kn(nt))}},An)),jt&&Lt.createElement(TimeColumn,(0,gn.A)({"units":fn,"value":Bi,"type":"meridiem","onChange":function onMeridiemChange(nt){vn(Sn(nt))},"onHover":function onMeridiemHover(nt){le(Sn(nt))}},An)))}function TimePanel(nt){var at=nt.prefixCls,lt=nt.value,Rt=nt.locale,Ht=nt.generateConfig,jt=nt.showTime,$t=(jt||{}).format,Kt="".concat(at,"-time-panel"),te=useInfo(nt,"time"),ne=(0,Bt.A)(te,1)[0];return Lt.createElement(Tr.Provider,{"value":ne},Lt.createElement("div",{"className":Tn()(Kt)},Lt.createElement(Or,null,lt?formatValue(lt,{"locale":Rt,"format":$t,"generateConfig":Ht}):""),Lt.createElement(TimePanelBody,jt)))}var Fr={"date":DatePanel,"datetime":function DateTimePanel(nt){var at=nt.prefixCls,lt=nt.generateConfig,Rt=nt.showTime,Ht=nt.onSelect,jt=nt.value,$t=nt.pickerValue,Kt=nt.onHover,te="".concat(at,"-datetime-panel"),ne=useTimeInfo(lt,Rt),re=(0,Bt.A)(ne,1)[0],ae=function mergeTime(nt){return fillTime(lt,nt,jt||$t)};return Lt.createElement("div",{"className":te},Lt.createElement(DatePanel,(0,gn.A)({},nt,{"onSelect":function onDateSelect(nt){var at=ae(nt);Ht(re(at,at))},"onHover":function onDateHover(nt){null==Kt||Kt(nt?ae(nt):nt)}})),Lt.createElement(TimePanel,nt))},"week":function WeekPanel(nt){var at=nt.prefixCls,lt=nt.generateConfig,Rt=nt.locale,Ht=nt.value,jt=nt.hoverValue,$t=nt.hoverRangeValue,Kt=Rt.locale,te="".concat(at,"-week-panel-row");return Lt.createElement(DatePanel,(0,gn.A)({},nt,{"mode":"week","panelName":"week","rowClassName":function rowClassName(nt){var at={};if($t){var Rt=(0,Bt.A)($t,2),Lt=Rt[0],ne=Rt[1],re=isSameWeek(lt,Kt,Lt,nt),ae=isSameWeek(lt,Kt,ne,nt);at["".concat(te,"-range-start")]=re,at["".concat(te,"-range-end")]=ae,at["".concat(te,"-range-hover")]=!re&&!ae&&isInRange(lt,Lt,ne,nt)}return jt&&(at["".concat(te,"-hover")]=jt.some((function(at){return isSameWeek(lt,Kt,nt,at)}))),Tn()(te,(0,sr.A)({},"".concat(te,"-selected"),!$t&&isSameWeek(lt,Kt,Ht,nt)),at)}}))},"month":function MonthPanel(nt){var at=nt.prefixCls,lt=nt.locale,Rt=nt.generateConfig,Ht=nt.pickerValue,jt=nt.disabledDate,$t=nt.onPickerValueChange,Kt=nt.onModeChange,te="".concat(at,"-month-panel"),ne=useInfo(nt,"month"),re=(0,Bt.A)(ne,1)[0],ae=Rt.setMonth(Ht,0),oe=lt.shortMonths||(Rt.locale.getShortMonths?Rt.locale.getShortMonths(lt.locale):[]),se=jt?function(nt,at){var lt=Rt.setDate(nt,1),Bt=Rt.setMonth(lt,Rt.getMonth(lt)+1),Lt=Rt.addDate(Bt,-1);return jt(lt,at)&&jt(Lt,at)}:null,le=Lt.createElement("button",{"type":"button","key":"year","aria-label":lt.yearSelect,"onClick":function onClick(){Kt("year")},"tabIndex":-1,"className":"".concat(at,"-year-btn")},formatValue(Ht,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}));return Lt.createElement(Tr.Provider,{"value":re},Lt.createElement("div",{"className":te},Lt.createElement(Or,{"superOffset":function superOffset(nt){return Rt.addYear(Ht,nt)},"onChange":$t,"getStart":function getStart(nt){return Rt.setMonth(nt,0)},"getEnd":function getEnd(nt){return Rt.setMonth(nt,11)}},le),Lt.createElement(PanelBody,(0,gn.A)({},nt,{"disabledDate":se,"titleFormat":lt.fieldMonthFormat,"colNum":3,"rowNum":4,"baseDate":ae,"getCellDate":function getCellDate(nt,at){return Rt.addMonth(nt,at)},"getCellText":function getCellText(nt){var at=Rt.getMonth(nt);return lt.monthFormat?formatValue(nt,{"locale":lt,"format":lt.monthFormat,"generateConfig":Rt}):oe[at]},"getCellClassName":function getCellClassName(){return(0,sr.A)({},"".concat(at,"-cell-in-view"),!0)}}))))},"quarter":function QuarterPanel(nt){var at=nt.prefixCls,lt=nt.locale,Rt=nt.generateConfig,Ht=nt.pickerValue,jt=nt.onPickerValueChange,$t=nt.onModeChange,Kt="".concat(at,"-quarter-panel"),te=useInfo(nt,"quarter"),ne=(0,Bt.A)(te,1)[0],re=Rt.setMonth(Ht,0),ae=Lt.createElement("button",{"type":"button","key":"year","aria-label":lt.yearSelect,"onClick":function onClick(){$t("year")},"tabIndex":-1,"className":"".concat(at,"-year-btn")},formatValue(Ht,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}));return Lt.createElement(Tr.Provider,{"value":ne},Lt.createElement("div",{"className":Kt},Lt.createElement(Or,{"superOffset":function superOffset(nt){return Rt.addYear(Ht,nt)},"onChange":jt,"getStart":function getStart(nt){return Rt.setMonth(nt,0)},"getEnd":function getEnd(nt){return Rt.setMonth(nt,11)}},ae),Lt.createElement(PanelBody,(0,gn.A)({},nt,{"titleFormat":lt.fieldQuarterFormat,"colNum":4,"rowNum":1,"baseDate":re,"getCellDate":function getCellDate(nt,at){return Rt.addMonth(nt,3*at)},"getCellText":function getCellText(nt){return formatValue(nt,{"locale":lt,"format":lt.cellQuarterFormat,"generateConfig":Rt})},"getCellClassName":function getCellClassName(){return(0,sr.A)({},"".concat(at,"-cell-in-view"),!0)}}))))},"year":function YearPanel(nt){var at=nt.prefixCls,lt=nt.locale,Rt=nt.generateConfig,Ht=nt.pickerValue,jt=nt.disabledDate,$t=nt.onPickerValueChange,Kt=nt.onModeChange,te="".concat(at,"-year-panel"),ne=useInfo(nt,"year"),re=(0,Bt.A)(ne,1)[0],ae=function getStartYear(nt){var at=10*Math.floor(Rt.getYear(nt)/10);return Rt.setYear(nt,at)},oe=function getEndYear(nt){var at=ae(nt);return Rt.addYear(at,9)},se=ae(Ht),le=oe(Ht),ue=Rt.addYear(se,-1),ce=jt?function(nt,at){var lt=Rt.setMonth(nt,0),Bt=Rt.setDate(lt,1),Lt=Rt.addYear(Bt,1),Ht=Rt.addDate(Lt,-1);return jt(Bt,at)&&jt(Ht,at)}:null,he=Lt.createElement("button",{"type":"button","key":"decade","aria-label":lt.decadeSelect,"onClick":function onClick(){Kt("decade")},"tabIndex":-1,"className":"".concat(at,"-decade-btn")},formatValue(se,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}),"-",formatValue(le,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}));return Lt.createElement(Tr.Provider,{"value":re},Lt.createElement("div",{"className":te},Lt.createElement(Or,{"superOffset":function superOffset(nt){return Rt.addYear(Ht,10*nt)},"onChange":$t,"getStart":ae,"getEnd":oe},he),Lt.createElement(PanelBody,(0,gn.A)({},nt,{"disabledDate":ce,"titleFormat":lt.fieldYearFormat,"colNum":3,"rowNum":4,"baseDate":ue,"getCellDate":function getCellDate(nt,at){return Rt.addYear(nt,at)},"getCellText":function getCellText(nt){return formatValue(nt,{"locale":lt,"format":lt.cellYearFormat,"generateConfig":Rt})},"getCellClassName":function getCellClassName(nt){return(0,sr.A)({},"".concat(at,"-cell-in-view"),isSameYear(Rt,nt,se)||isSameYear(Rt,nt,le)||isInRange(Rt,se,le,nt))}}))))},"decade":function DecadePanel(nt){var at=nt.prefixCls,lt=nt.locale,Rt=nt.generateConfig,Ht=nt.pickerValue,jt=nt.disabledDate,$t=nt.onPickerValueChange,Kt="".concat(at,"-decade-panel"),te=useInfo(nt,"decade"),ne=(0,Bt.A)(te,1)[0],re=function getStartYear(nt){var at=100*Math.floor(Rt.getYear(nt)/100);return Rt.setYear(nt,at)},ae=function getEndYear(nt){var at=re(nt);return Rt.addYear(at,99)},oe=re(Ht),se=ae(Ht),le=Rt.addYear(oe,-10),ue=jt?function(nt,at){var lt=Rt.setDate(nt,1),Bt=Rt.setMonth(lt,0),Lt=Rt.setYear(Bt,10*Math.floor(Rt.getYear(Bt)/10)),Ht=Rt.addYear(Lt,10),$t=Rt.addDate(Ht,-1);return jt(Lt,at)&&jt($t,at)}:null,ce="".concat(formatValue(oe,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}),"-").concat(formatValue(se,{"locale":lt,"format":lt.yearFormat,"generateConfig":Rt}));return Lt.createElement(Tr.Provider,{"value":ne},Lt.createElement("div",{"className":Kt},Lt.createElement(Or,{"superOffset":function superOffset(nt){return Rt.addYear(Ht,100*nt)},"onChange":$t,"getStart":re,"getEnd":ae},ce),Lt.createElement(PanelBody,(0,gn.A)({},nt,{"disabledDate":ue,"colNum":3,"rowNum":4,"baseDate":le,"getCellDate":function getCellDate(nt,at){return Rt.addYear(nt,10*at)},"getCellText":function getCellText(nt){var at=lt.cellYearFormat,Bt=formatValue(nt,{"locale":lt,"format":at,"generateConfig":Rt}),Lt=formatValue(Rt.addYear(nt,9),{"locale":lt,"format":at,"generateConfig":Rt});return"".concat(Bt,"-").concat(Lt)},"getCellClassName":function getCellClassName(nt){return(0,sr.A)({},"".concat(at,"-cell-in-view"),isSameDecade(Rt,nt,oe)||isSameDecade(Rt,nt,se)||isInRange(Rt,oe,se,nt))}}))))},"time":TimePanel};function PickerPanel(nt,at){var lt,Ht=nt.locale,jt=nt.generateConfig,$t=nt.direction,Kt=nt.prefixCls,te=nt.tabIndex,ne=void 0===te?0:te,re=nt.multiple,ae=nt.defaultValue,oe=nt.value,se=nt.onChange,le=nt.onSelect,ue=nt.defaultPickerValue,ce=nt.pickerValue,he=nt.onPickerValueChange,de=nt.mode,fe=nt.onPanelChange,pe=nt.picker,ve=void 0===pe?"date":pe,Ae=nt.showTime,we=nt.hoverValue,Ce=nt.hoverRangeValue,je=nt.cellRender,Ne=nt.dateRender,Ve=nt.monthCellRender,Ge=nt.components,ti=void 0===Ge?{}:Ge,li=nt.hideHeader,hi=(null===(lt=Lt.useContext(vr))||void 0===lt?void 0:lt.prefixCls)||Kt||"rc-picker",di=Lt.useRef();Lt.useImperativeHandle(at,(function(){return{"nativeElement":di.current}}));var fi=getTimeProps(nt),pi=(0,Bt.A)(fi,4),vi=pi[0],mi=pi[1],_i=pi[2],bi=pi[3],Mi=useLocale(Ht,mi),Ti="date"===ve&&Ae?"datetime":ve,Ii=Lt.useMemo((function(){return fillShowTimeConfig(Ti,_i,bi,vi,Mi)}),[Ti,_i,bi,vi,Mi]),Bi=jt.getNow(),zi=(0,Pn.vz)(ve,{"value":de,"postState":function postState(nt){return nt||"date"}}),Wi=(0,Bt.A)(zi,2),Ui=Wi[0],$i=Wi[1],qi="date"===Ui&&Ii?"datetime":Ui,Ki=useToggleDates(jt,Ht,Ti),Qi=(0,Pn.vz)(ae,{"value":oe}),Ji=(0,Bt.A)(Qi,2),dn=Ji[0],fn=Ji[1],vn=Lt.useMemo((function(){var nt=toArray(dn).filter((function(nt){return nt}));return re?nt:nt.slice(0,1)}),[dn,re]),yn=(0,Pn._q)((function(nt){fn(nt),se&&(null===nt||vn.length!==nt.length||vn.some((function(at,lt){return!isSame(jt,Ht,at,nt[lt],Ti)})))&&(null==se||se(re?nt:nt[0]))})),mn=(0,Pn._q)((function(nt){if(null==le||le(nt),Ui===ve){var at=re?Ki(vn,nt):[nt];yn(at)}})),_n=(0,Pn.vz)(ue||vn[0]||Bi,{"value":ce}),bn=(0,Bt.A)(_n,2),xn=bn[0],kn=bn[1];Lt.useEffect((function(){vn[0]&&!ce&&kn(vn[0])}),[vn[0]]);var Sn=function triggerPanelChange(nt,at){null==fe||fe(nt||ce,at||Ui)},An=function setPickerValue(nt){var at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];kn(nt),null==he||he(nt),at&&Sn(nt)},wn=function triggerModeChange(nt,at){$i(nt),at&&An(at),Sn(at,nt)},Cn=Lt.useMemo((function(){var nt,at;if(Array.isArray(Ce)){var lt=(0,Bt.A)(Ce,2);nt=lt[0],at=lt[1]}else nt=Ce;return nt||at?(nt=nt||at,at=at||nt,jt.isAfter(nt,at)?[at,nt]:[nt,at]):null}),[Ce,jt]),Mn=useCellRender(je,Ne,Ve),Rn=ti[qi]||Fr[qi]||DatePanel,On=Lt.useContext(Ir),Fn=Lt.useMemo((function(){return(0,Rt.A)((0,Rt.A)({},On),{},{"hideHeader":li})}),[On,li]);var or="".concat(hi,"-panel"),lr=pickProps(nt,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return Lt.createElement(Ir.Provider,{"value":Fn},Lt.createElement("div",{"ref":di,"tabIndex":ne,"className":Tn()(or,(0,sr.A)({},"".concat(or,"-rtl"),"rtl"===$t))},Lt.createElement(Rn,(0,gn.A)({},lr,{"showTime":Ii,"prefixCls":hi,"locale":Mi,"generateConfig":jt,"onModeChange":wn,"pickerValue":xn,"onPickerValueChange":function onPickerValueChange(nt){An(nt,!0)},"value":vn[0],"onSelect":function onPanelValueSelect(nt){if(mn(nt),An(nt),Ui!==ve){var at=["decade","year"],lt=[].concat(at,["month"]),Rt={"quarter":[].concat(at,["quarter"]),"week":[].concat((0,En.A)(lt),["week"]),"date":[].concat((0,En.A)(lt),["date"])}[ve]||lt,Bt=Rt.indexOf(Ui),Lt=Rt[Bt+1];Lt&&wn(Lt,nt)}},"values":vn,"cellRender":Mn,"hoverRangeValue":Cn,"hoverValue":we}))))}var zr=Lt.memo(Lt.forwardRef(PickerPanel));function PopupPanel(nt){var at=nt.picker,lt=nt.multiplePanel,Bt=nt.pickerValue,Ht=nt.onPickerValueChange,jt=nt.needConfirm,$t=nt.onSubmit,Kt=nt.range,te=nt.hoverValue,ne=Lt.useContext(vr),re=ne.prefixCls,ae=ne.generateConfig,oe=Lt.useCallback((function(nt,lt){return offsetPanelDate(ae,at,nt,lt)}),[ae,at]),se=Lt.useMemo((function(){return oe(Bt,1)}),[Bt,oe]),le={"onCellDblClick":function onCellDblClick(){jt&&$t()}},ue="time"===at,ce=(0,Rt.A)((0,Rt.A)({},nt),{},{"hoverValue":null,"hoverRangeValue":null,"hideHeader":ue});return Kt?ce.hoverRangeValue=te:ce.hoverValue=te,lt?Lt.createElement("div",{"className":"".concat(re,"-panels")},Lt.createElement(Ir.Provider,{"value":(0,Rt.A)((0,Rt.A)({},le),{},{"hideNext":!0})},Lt.createElement(zr,ce)),Lt.createElement(Ir.Provider,{"value":(0,Rt.A)((0,Rt.A)({},le),{},{"hidePrev":!0})},Lt.createElement(zr,(0,gn.A)({},ce,{"pickerValue":se,"onPickerValueChange":function onSecondPickerValueChange(nt){Ht(oe(nt,-1))}})))):Lt.createElement(Ir.Provider,{"value":(0,Rt.A)({},le)},Lt.createElement(zr,ce))}function executeValue(nt){return"function"==typeof nt?nt():nt}function PresetPanel(nt){var at=nt.prefixCls,lt=nt.presets,Rt=nt.onClick,Bt=nt.onHover;return lt.length?Lt.createElement("div",{"className":"".concat(at,"-presets")},Lt.createElement("ul",null,lt.map((function(nt,at){var lt=nt.label,Ht=nt.value;return Lt.createElement("li",{"key":at,"onClick":function onClick(){Rt(executeValue(Ht))},"onMouseEnter":function onMouseEnter(){Bt(executeValue(Ht))},"onMouseLeave":function onMouseLeave(){Bt(null)}},lt)})))):null}function Popup(nt){var at=nt.panelRender,lt=nt.internalMode,Rt=nt.picker,Ht=nt.showNow,jt=nt.range,$t=nt.multiple,Kt=nt.activeInfo,te=void 0===Kt?[0,0,0]:Kt,ne=nt.presets,re=nt.onPresetHover,ae=nt.onPresetSubmit,oe=nt.onFocus,se=nt.onBlur,le=nt.onPanelMouseDown,ue=nt.direction,ce=nt.value,he=nt.onSelect,de=nt.isInvalid,fe=nt.defaultOpenValue,pe=nt.onOk,ve=nt.onSubmit,Ae=Lt.useContext(vr).prefixCls,we="".concat(Ae,"-panel"),Ce="rtl"===ue,je=Lt.useRef(null),Ne=Lt.useRef(null),Ve=Lt.useState(0),Ge=(0,Bt.A)(Ve,2),ti=Ge[0],li=Ge[1],hi=Lt.useState(0),di=(0,Bt.A)(hi,2),fi=di[0],pi=di[1],vi=Lt.useState(0),mi=(0,Bt.A)(vi,2),_i=mi[0],bi=mi[1],Mi=(0,Bt.A)(te,3),Ti=Mi[0],Ii=Mi[1],Bi=Mi[2],zi=Lt.useState(0),Wi=(0,Bt.A)(zi,2),Ui=Wi[0],$i=Wi[1];function filterEmpty(nt){return nt.filter((function(nt){return nt}))}Lt.useEffect((function(){$i(10)}),[Ti]),Lt.useEffect((function(){if(jt&&Ne.current){var nt,at=(null===(nt=je.current)||void 0===nt?void 0:nt.offsetWidth)||0,lt=Ne.current.getBoundingClientRect();if(!lt.height||lt.right<0)return void $i((function(nt){return Math.max(0,nt-1)}));var Rt=(Ce?Ii-at:Ti)-lt.left;if(bi(Rt),ti&&ti<Bi){var Bt=Ce?lt.right-(Ii-at+ti):Ti+at-lt.left-ti,Lt=Math.max(0,Bt);pi(Lt)}else pi(0)}}),[Ui,Ce,ti,Ti,Ii,Bi,jt]);var qi=Lt.useMemo((function(){return filterEmpty(toArray(ce))}),[ce]),Ki="time"===Rt&&!qi.length,Qi=Lt.useMemo((function(){return Ki?filterEmpty([fe]):qi}),[Ki,qi,fe]),Ji=Ki?fe:qi,dn=Lt.useMemo((function(){return!Qi.length||Qi.some((function(nt){return de(nt)}))}),[Qi,de]),fn=Lt.createElement("div",{"className":"".concat(Ae,"-panel-layout")},Lt.createElement(PresetPanel,{"prefixCls":Ae,"presets":ne,"onClick":ae,"onHover":re}),Lt.createElement("div",null,Lt.createElement(PopupPanel,(0,gn.A)({},nt,{"value":Ji})),Lt.createElement(Footer,(0,gn.A)({},nt,{"showNow":!$t&&Ht,"invalid":dn,"onSubmit":function onFooterSubmit(){Ki&&he(fe),pe(),ve()}}))));at&&(fn=at(fn));var vn="".concat(we,"-container"),yn="marginLeft",mn="marginRight",_n=Lt.createElement("div",{"onMouseDown":le,"tabIndex":-1,"className":Tn()(vn,"".concat(Ae,"-").concat(lt,"-panel-container")),"style":(0,sr.A)((0,sr.A)({},Ce?mn:yn,fi),Ce?yn:mn,"auto"),"onFocus":oe,"onBlur":se},fn);return jt&&(_n=Lt.createElement("div",{"onMouseDown":le,"ref":Ne,"className":Tn()("".concat(Ae,"-range-wrapper"),"".concat(Ae,"-").concat(Rt,"-range-wrapper"))},Lt.createElement("div",{"ref":je,"className":"".concat(Ae,"-range-arrow"),"style":{"left":_i}}),Lt.createElement(Mr.A,{"onResize":function onResize(nt){nt.width&&li(nt.width)}},_n))),_n}var Hr=lt(5985);function useInputProps(nt,at){var lt=nt.format,Bt=nt.maskFormat,Ht=nt.generateConfig,jt=nt.locale,$t=nt.preserveInvalidOnBlur,Kt=nt.inputReadOnly,te=nt.required,ne=nt["aria-required"],re=nt.onSubmit,ae=nt.onFocus,oe=nt.onBlur,se=nt.onInputChange,le=nt.onInvalid,ue=nt.open,ce=nt.onOpenChange,he=nt.onKeyDown,de=nt.onChange,fe=nt.activeHelp,pe=nt.name,ve=nt.autoComplete,Ae=nt.id,we=nt.value,Ce=nt.invalid,je=nt.placeholder,Ne=nt.disabled,Ve=nt.activeIndex,Ge=nt.allHelp,ti=nt.picker,li=function parseDate(nt,at){var lt=Ht.locale.parse(jt.locale,nt,[at]);return lt&&Ht.isValidate(lt)?lt:null},hi=lt[0],di=Lt.useCallback((function(nt){return formatValue(nt,{"locale":jt,"format":hi,"generateConfig":Ht})}),[jt,Ht,hi]),fi=Lt.useMemo((function(){return we.map(di)}),[we,di]),pi=Lt.useMemo((function(){var nt="time"===ti?8:10,at="function"==typeof hi?hi(Ht.getNow()).length:hi.length;return Math.max(nt,at)+2}),[hi,ti,Ht]),vi=function validateFormat(nt){for(var at=0;at<lt.length;at+=1){var Rt=lt[at];if("string"==typeof Rt){var Bt=li(nt,Rt);if(Bt)return Bt}}return!1};return[function getInputProps(lt){function getProp(nt){return void 0!==lt?nt[lt]:nt}var Lt=(0,Fn.A)(nt,{"aria":!0,"data":!0}),Ht=(0,Rt.A)((0,Rt.A)({},Lt),{},{"format":Bt,"validateFormat":function validateFormat(nt){return!!vi(nt)},"preserveInvalidOnBlur":$t,"readOnly":Kt,"required":te,"aria-required":ne,"name":pe,"autoComplete":ve,"size":pi,"id":getProp(Ae),"value":getProp(fi)||"","invalid":getProp(Ce),"placeholder":getProp(je),"active":Ve===lt,"helped":Ge||fe&&Ve===lt,"disabled":getProp(Ne),"onFocus":function onFocus(nt){ae(nt,lt)},"onBlur":function onBlur(nt){oe(nt,lt)},"onSubmit":re,"onChange":function onChange(nt){se();var at=vi(nt);if(at)return le(!1,lt),void de(at,lt);le(!!nt,lt)},"onHelp":function onHelp(){ce(!0,{"index":lt})},"onKeyDown":function onKeyDown(nt){var at=!1;if(null==he||he(nt,(function(){at=!0})),!nt.defaultPrevented&&!at)switch(nt.key){case"Escape":ce(!1,{"index":lt});break;case"Enter":ue||ce(!0)}}},null==at?void 0:at({"valueTexts":fi}));return Object.keys(Ht).forEach((function(nt){void 0===Ht[nt]&&delete Ht[nt]})),Ht},di]}var jr=["onMouseEnter","onMouseLeave"];function useRootProps(nt){return Lt.useMemo((function(){return pickProps(nt,jr)}),[nt])}var Nr=["icon","type"],Vr=["onClear"];function Icon(nt){var at=nt.icon,lt=nt.type,Rt=(0,Hr.A)(nt,Nr),Bt=Lt.useContext(vr).prefixCls;return at?Lt.createElement("span",(0,gn.A)({"className":"".concat(Bt,"-").concat(lt)},Rt),at):null}function ClearIcon(nt){var at=nt.onClear,lt=(0,Hr.A)(nt,Vr);return Lt.createElement(Icon,(0,gn.A)({},lt,{"type":"clear","role":"button","onMouseDown":function onMouseDown(nt){nt.preventDefault()},"onClick":function onClick(nt){nt.stopPropagation(),at()}}))}var Wr=["YYYY","MM","DD","HH","mm","ss","SSS"],Gr=function(){function MaskFormat(nt){(0,Ht.A)(this,MaskFormat),(0,sr.A)(this,"format",void 0),(0,sr.A)(this,"maskFormat",void 0),(0,sr.A)(this,"cells",void 0),(0,sr.A)(this,"maskCells",void 0),this.format=nt;var at=Wr.map((function(nt){return"(".concat(nt,")")})).join("|"),lt=new RegExp(at,"g");this.maskFormat=nt.replace(lt,(function(nt){return"".repeat(nt.length)}));var Rt=new RegExp("(".concat(Wr.join("|"),")")),Bt=(nt.split(Rt)||[]).filter((function(nt){return nt})),Lt=0;this.cells=Bt.map((function(nt){var at=Wr.includes(nt),lt=Lt,Rt=Lt+nt.length;return Lt=Rt,{"text":nt,"mask":at,"start":lt,"end":Rt}})),this.maskCells=this.cells.filter((function(nt){return nt.mask}))}return(0,jt.A)(MaskFormat,[{"key":"getSelection","value":function getSelection(nt){var at=this.maskCells[nt]||{};return[at.start||0,at.end||0]}},{"key":"match","value":function match(nt){for(var at=0;at<this.maskFormat.length;at+=1){var lt=this.maskFormat[at],Rt=nt[at];if(!Rt||""!==lt&&lt!==Rt)return!1}return!0}},{"key":"size","value":function size(){return this.maskCells.length}},{"key":"getMaskCellIndex","value":function getMaskCellIndex(nt){for(var at=Number.MAX_SAFE_INTEGER,lt=0,Rt=0;Rt<this.maskCells.length;Rt+=1){var Bt=this.maskCells[Rt],Lt=Bt.start,Ht=Bt.end;if(nt>=Lt&&nt<=Ht)return Rt;var jt=Math.min(Math.abs(nt-Lt),Math.abs(nt-Ht));jt<at&&(at=jt,lt=Rt)}return lt}}]),MaskFormat}();var Ur=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"];var Yr=Lt.forwardRef((function(nt,at){var lt=nt.active,Rt=nt.showActiveCls,Ht=void 0===Rt||Rt,jt=nt.suffixIcon,$t=nt.format,Kt=nt.validateFormat,te=nt.onChange,ne=(nt.onInput,nt.helped),re=nt.onHelp,ae=nt.onSubmit,oe=nt.onKeyDown,se=nt.preserveInvalidOnBlur,le=void 0!==se&&se,ue=nt.invalid,ce=nt.clearIcon,he=(0,Hr.A)(nt,Ur),de=nt.value,fe=nt.onFocus,pe=nt.onBlur,ve=nt.onMouseUp,Ae=Lt.useContext(vr),we=Ae.prefixCls,Ce=Ae.input,je=void 0===Ce?"input":Ce,Ne="".concat(we,"-input"),Ve=Lt.useState(!1),Ge=(0,Bt.A)(Ve,2),ti=Ge[0],li=Ge[1],hi=Lt.useState(de),di=(0,Bt.A)(hi,2),fi=di[0],pi=di[1],vi=Lt.useState(""),mi=(0,Bt.A)(vi,2),_i=mi[0],bi=mi[1],Mi=Lt.useState(null),Ti=(0,Bt.A)(Mi,2),Ii=Ti[0],Bi=Ti[1],zi=Lt.useState(null),Wi=(0,Bt.A)(zi,2),Ui=Wi[0],$i=Wi[1],qi=fi||"";Lt.useEffect((function(){pi(de)}),[de]);var Ki=Lt.useRef(),Qi=Lt.useRef();Lt.useImperativeHandle(at,(function(){return{"nativeElement":Ki.current,"inputElement":Qi.current,"focus":function focus(nt){Qi.current.focus(nt)},"blur":function blur(){Qi.current.blur()}}}));var Ji=Lt.useMemo((function(){return new Gr($t||"")}),[$t]),dn=Lt.useMemo((function(){return ne?[0,0]:Ji.getSelection(Ii)}),[Ji,Ii,ne]),fn=(0,Bt.A)(dn,2),vn=fn[0],yn=fn[1],mn=function onModify(nt){nt&&nt!==$t&&nt!==de&&re()},_n=(0,Pn._q)((function(nt){Kt(nt)&&te(nt),pi(nt),mn(nt)})),bn=Lt.useRef(!1),xn=function onSharedBlur(nt){pe(nt)};useLockEffect(lt,(function(){lt||le||pi(de)}));var kn=function onSharedKeyDown(nt){"Enter"===nt.key&&Kt(qi)&&ae(),null==oe||oe(nt)},Sn=Lt.useRef();(0,Rn.A)((function(){if(ti&&$t&&!bn.current){if(Ji.match(qi))return Qi.current.setSelectionRange(vn,yn),Sn.current=(0,Sr.A)((function(){Qi.current.setSelectionRange(vn,yn)})),function(){Sr.A.cancel(Sn.current)};_n($t)}}),[Ji,$t,ti,qi,Ii,vn,yn,Ui,_n]);var An=$t?{"onFocus":function onFormatFocus(nt){li(!0),Bi(0),bi(""),fe(nt)},"onBlur":function onFormatBlur(nt){li(!1),xn(nt)},"onKeyDown":function onFormatKeyDown(nt){kn(nt);var at=nt.key,lt=null,Rt=null,Lt=yn-vn,Ht=$t.slice(vn,yn),jt=function offsetCellIndex(nt){Bi((function(at){var lt=at+nt;return lt=Math.max(lt,0),lt=Math.min(lt,Ji.size()-1)}))},Kt=function offsetCellValue(nt){var at=function getMaskRange(nt){return{"YYYY":[0,9999,(new Date).getFullYear()],"MM":[1,12],"DD":[1,31],"HH":[0,23],"mm":[0,59],"ss":[0,59],"SSS":[0,999]}[nt]}(Ht),lt=(0,Bt.A)(at,3),Rt=lt[0],Lt=lt[1],jt=lt[2],$t=qi.slice(vn,yn),Kt=Number($t);if(isNaN(Kt))return String(jt||(nt>0?Rt:Lt));var te=Lt-Rt+1;return String(Rt+(te+(Kt+nt)-Rt)%te)};switch(at){case"Backspace":case"Delete":lt="",Rt=Ht;break;case"ArrowLeft":lt="",jt(-1);break;case"ArrowRight":lt="",jt(1);break;case"ArrowUp":lt="",Rt=Kt(1);break;case"ArrowDown":lt="",Rt=Kt(-1);break;default:isNaN(Number(at))||(Rt=lt=_i+at)}if(null!==lt&&(bi(lt),lt.length>=Lt&&(jt(1),bi(""))),null!==Rt){var te=qi.slice(0,vn)+leftPad(Rt,Lt)+qi.slice(yn);_n(te.slice(0,$t.length))}$i({})},"onMouseDown":function onFormatMouseDown(){bn.current=!0},"onMouseUp":function onFormatMouseUp(nt){var at=nt.target.selectionStart,lt=Ji.getMaskCellIndex(at);Bi(lt),$i({}),null==ve||ve(nt),bn.current=!1},"onPaste":function onFormatPaste(nt){var at=nt.clipboardData.getData("text");Kt(at)&&_n(at)}}:{};return Lt.createElement("div",{"ref":Ki,"className":Tn()(Ne,(0,sr.A)((0,sr.A)({},"".concat(Ne,"-active"),lt&&Ht),"".concat(Ne,"-placeholder"),ne))},Lt.createElement(je,(0,gn.A)({"ref":Qi,"aria-invalid":ue,"autoComplete":"off"},he,{"onKeyDown":kn,"onBlur":xn},An,{"value":qi,"onChange":function onInternalChange(nt){if(!$t){var at=nt.target.value;mn(at),pi(at),te(at)}}})),Lt.createElement(Icon,{"type":"suffix","icon":jt}),ce)})),Xr=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],qr=["index"];function RangeSelector(nt,at){var lt=nt.id,Ht=nt.prefix,jt=nt.clearIcon,$t=nt.suffixIcon,Kt=nt.separator,te=void 0===Kt?"~":Kt,ne=nt.activeIndex,re=(nt.activeHelp,nt.allHelp,nt.focused),ae=(nt.onFocus,nt.onBlur,nt.onKeyDown,nt.locale,nt.generateConfig,nt.placeholder),oe=nt.className,se=nt.style,le=nt.onClick,ue=nt.onClear,ce=nt.value,he=(nt.onChange,nt.onSubmit,nt.onInputChange,nt.format,nt.maskFormat,nt.preserveInvalidOnBlur,nt.onInvalid,nt.disabled),de=nt.invalid,fe=(nt.inputReadOnly,nt.direction),pe=(nt.onOpenChange,nt.onActiveInfo),ve=(nt.placement,nt.onMouseDown),Ae=(nt.required,nt["aria-required"],nt.autoFocus),we=nt.tabIndex,Ce=(0,Hr.A)(nt,Xr),je="rtl"===fe,Ne=Lt.useContext(vr).prefixCls,Ve=Lt.useMemo((function(){if("string"==typeof lt)return[lt];var nt=lt||{};return[nt.start,nt.end]}),[lt]),Ge=Lt.useRef(),ti=Lt.useRef(),li=Lt.useRef(),hi=function getInput(nt){var at;return null===(at=[ti,li][nt])||void 0===at?void 0:at.current};Lt.useImperativeHandle(at,(function(){return{"nativeElement":Ge.current,"focus":function focus(nt){if("object"===(0,xr.A)(nt)){var at,lt=nt||{},Rt=lt.index,Bt=void 0===Rt?0:Rt,Lt=(0,Hr.A)(lt,qr);null===(at=hi(Bt))||void 0===at||at.focus(Lt)}else{var Ht;null===(Ht=hi(null!=nt?nt:0))||void 0===Ht||Ht.focus()}},"blur":function blur(){var nt,at;null===(nt=hi(0))||void 0===nt||nt.blur(),null===(at=hi(1))||void 0===at||at.blur()}}}));var di=useRootProps(Ce),fi=Lt.useMemo((function(){return Array.isArray(ae)?ae:[ae,ae]}),[ae]),pi=useInputProps((0,Rt.A)((0,Rt.A)({},nt),{},{"id":Ve,"placeholder":fi})),vi=(0,Bt.A)(pi,1)[0],mi=Lt.useState({"position":"absolute","width":0}),_i=(0,Bt.A)(mi,2),bi=_i[0],Mi=_i[1],Ti=(0,Pn._q)((function(){var nt=hi(ne);if(nt){var at=nt.nativeElement.getBoundingClientRect(),lt=Ge.current.getBoundingClientRect(),Bt=at.left-lt.left;Mi((function(nt){return(0,Rt.A)((0,Rt.A)({},nt),{},{"width":at.width,"left":Bt})})),pe([at.left,at.right,lt.width])}}));Lt.useEffect((function(){Ti()}),[ne]);var Ii=jt&&(ce[0]&&!he[0]||ce[1]&&!he[1]),Bi=Ae&&!he[0],zi=Ae&&!Bi&&!he[1];return Lt.createElement(Mr.A,{"onResize":Ti},Lt.createElement("div",(0,gn.A)({},di,{"className":Tn()(Ne,"".concat(Ne,"-range"),(0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)({},"".concat(Ne,"-focused"),re),"".concat(Ne,"-disabled"),he.every((function(nt){return nt}))),"".concat(Ne,"-invalid"),de.some((function(nt){return nt}))),"".concat(Ne,"-rtl"),je),oe),"style":se,"ref":Ge,"onClick":le,"onMouseDown":function onMouseDown(nt){var at=nt.target;at!==ti.current.inputElement&&at!==li.current.inputElement&&nt.preventDefault(),null==ve||ve(nt)}}),Ht&&Lt.createElement("div",{"className":"".concat(Ne,"-prefix")},Ht),Lt.createElement(Yr,(0,gn.A)({"ref":ti},vi(0),{"autoFocus":Bi,"tabIndex":we,"date-range":"start"})),Lt.createElement("div",{"className":"".concat(Ne,"-range-separator")},te),Lt.createElement(Yr,(0,gn.A)({"ref":li},vi(1),{"autoFocus":zi,"tabIndex":we,"date-range":"end"})),Lt.createElement("div",{"className":"".concat(Ne,"-active-bar"),"style":bi}),Lt.createElement(Icon,{"type":"suffix","icon":$t}),Ii&&Lt.createElement(ClearIcon,{"icon":jt,"onClear":ue})))}var Kr=Lt.forwardRef(RangeSelector);function separateConfig(nt,at){var lt=null!=nt?nt:at;return Array.isArray(lt)?lt:[lt,lt]}function getActiveRange(nt){return 1===nt?"end":"start"}function RangePicker(nt,at){var lt=useFilledProps(nt,(function(){var at=nt.disabled,lt=nt.allowEmpty;return{"disabled":separateConfig(at,!1),"allowEmpty":separateConfig(lt,!1)}})),Ht=(0,Bt.A)(lt,6),jt=Ht[0],$t=Ht[1],Kt=Ht[2],te=Ht[3],ne=Ht[4],re=Ht[5],ae=jt.prefixCls,oe=jt.styles,se=jt.classNames,le=jt.defaultValue,ue=jt.value,ce=jt.needConfirm,he=jt.onKeyDown,de=jt.disabled,fe=jt.allowEmpty,pe=jt.disabledDate,ve=jt.minDate,Ae=jt.maxDate,we=jt.defaultOpen,Ce=jt.open,je=jt.onOpenChange,Ne=jt.locale,Ve=jt.generateConfig,Ge=jt.picker,ti=jt.showNow,li=jt.showToday,hi=jt.showTime,di=jt.mode,fi=jt.onPanelChange,pi=jt.onCalendarChange,vi=jt.onOk,mi=jt.defaultPickerValue,_i=jt.pickerValue,bi=jt.onPickerValueChange,Mi=jt.inputReadOnly,Ti=jt.suffixIcon,Ii=jt.onFocus,Bi=jt.onBlur,zi=jt.presets,Wi=jt.ranges,Ui=jt.components,$i=jt.cellRender,qi=jt.dateRender,Ki=jt.monthCellRender,Qi=jt.onClick,Ji=usePickerRef(at),dn=useOpen(Ce,we,de,je),fn=(0,Bt.A)(dn,2),vn=fn[0],yn=fn[1],mn=function triggerOpen(nt,at){!de.some((function(nt){return!nt}))&&nt||yn(nt,at)},_n=useInnerValue(Ve,Ne,te,!0,!1,le,ue,pi,vi),bn=(0,Bt.A)(_n,5),xn=bn[0],kn=bn[1],Sn=bn[2],An=bn[3],wn=bn[4],Cn=Sn(),Mn=useRangeActive(de,fe,vn),Tn=(0,Bt.A)(Mn,9),or=Tn[0],sr=Tn[1],lr=Tn[2],yr=Tn[3],xr=Tn[4],kr=Tn[5],Sr=Tn[6],Ar=Tn[7],wr=Tn[8],Mr=function onSharedFocus(nt,at){sr(!0),null==Ii||Ii(nt,{"range":getActiveRange(null!=at?at:yr)})},Tr=function onSharedBlur(nt,at){sr(!1),null==Bi||Bi(nt,{"range":getActiveRange(null!=at?at:yr)})},Ir=Lt.useMemo((function(){if(!hi)return null;var nt=hi.disabledTime,at=nt?function(at){var lt=getActiveRange(yr),Rt=getFromDate(Cn,Sr,yr);return nt(at,lt,{"from":Rt})}:void 0;return(0,Rt.A)((0,Rt.A)({},hi),{},{"disabledTime":at})}),[hi,yr,Cn,Sr]),Br=(0,Pn.vz)([Ge,Ge],{"value":di}),Or=(0,Bt.A)(Br,2),Dr=Or[0],Lr=Or[1],Fr=Dr[yr]||Ge,zr="date"===Fr&&Ir?"datetime":Fr,Hr=zr===Ge&&"time"!==zr,jr=useShowNow(Ge,Fr,ti,li,!0),Nr=useRangeValue(jt,xn,kn,Sn,An,de,te,or,vn,re),Vr=(0,Bt.A)(Nr,2),Wr=Vr[0],Gr=Vr[1],Ur=function useRangeDisabledDate(nt,at,lt,Lt,Ht,jt){var $t=lt[lt.length-1];return function rangeDisabledDate(Kt,te){var ne=(0,Bt.A)(nt,2),re=ne[0],ae=ne[1],oe=(0,Rt.A)((0,Rt.A)({},te),{},{"from":getFromDate(nt,lt)});return!(1!==$t||!at[0]||!re||isSame(Lt,Ht,re,Kt,oe.type)||!Lt.isAfter(re,Kt))||!(0!==$t||!at[1]||!ae||isSame(Lt,Ht,ae,Kt,oe.type)||!Lt.isAfter(Kt,ae))||(null==jt?void 0:jt(Kt,oe))}}(Cn,de,Sr,Ve,Ne,pe),Yr=useFieldsInvalidate(Cn,re,fe),Xr=(0,Bt.A)(Yr,2),qr=Xr[0],Zr=Xr[1],Jr=useRangePickerValue(Ve,Ne,Cn,Dr,vn,yr,$t,Hr,mi,_i,null==Ir?void 0:Ir.defaultOpenValue,bi,ve,Ae),sa=(0,Bt.A)(Jr,2),ua=sa[0],ca=sa[1],ha=(0,Pn._q)((function(nt,at,lt){var Rt=fillIndex(Dr,yr,at);if(Rt[0]===Dr[0]&&Rt[1]===Dr[1]||Lr(Rt),fi&&!1!==lt){var Bt=(0,En.A)(Cn);nt&&(Bt[yr]=nt),fi(Bt,Rt)}})),da=function fillCalendarValue(nt,at){return fillIndex(Cn,at,nt)},fa=function triggerPartConfirm(nt,at){var lt=Cn;nt&&(lt=da(nt,yr)),Ar(yr);var Rt=kr(lt);An(lt),Wr(yr,null===Rt),null===Rt?mn(!1,{"force":!0}):at||Ji.current.focus({"index":Rt})},pa=Lt.useState(null),va=(0,Bt.A)(pa,2),ma=va[0],Ea=va[1],Pa=Lt.useState(null),Ba=(0,Bt.A)(Pa,2),Wa=Ba[0],Ga=Ba[1],$a=Lt.useMemo((function(){return Wa||Cn}),[Cn,Wa]);Lt.useEffect((function(){vn||Ga(null)}),[vn]);var Qa=Lt.useState([0,0,0]),Ja=(0,Bt.A)(Qa,2),to=Ja[0],eo=Ja[1],co=usePresets(zi,Wi),po=useCellRender($i,qi,Ki,getActiveRange(yr)),vo=Cn[yr]||null,go=(0,Pn._q)((function(nt){return re(nt,{"activeIndex":yr})})),xo=Lt.useMemo((function(){var nt=(0,Fn.A)(jt,!1);return(0,On.A)(jt,[].concat((0,En.A)(Object.keys(nt)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]))}),[jt]),ko=Lt.createElement(Popup,(0,gn.A)({},xo,{"showNow":jr,"showTime":Ir,"range":!0,"multiplePanel":Hr,"activeInfo":to,"disabledDate":Ur,"onFocus":function onPanelFocus(nt){mn(!0),Mr(nt)},"onBlur":Tr,"onPanelMouseDown":function onPanelMouseDown(){lr("panel")},"picker":Ge,"mode":Fr,"internalMode":zr,"onPanelChange":ha,"format":ne,"value":vo,"isInvalid":go,"onChange":null,"onSelect":function onPanelSelect(nt){var at=fillIndex(Cn,yr,nt);An(at),ce||Kt||$t!==zr||fa(nt)},"pickerValue":ua,"defaultOpenValue":toArray(null==hi?void 0:hi.defaultOpenValue)[yr],"onPickerValueChange":ca,"hoverValue":$a,"onHover":function onPanelHover(nt){Ga(nt?da(nt,yr):null),Ea("cell")},"needConfirm":ce,"onSubmit":fa,"onOk":wn,"presets":co,"onPresetHover":function onPresetHover(nt){Ga(nt),Ea("preset")},"onPresetSubmit":function onPresetSubmit(nt){Gr(nt)&&mn(!1,{"force":!0})},"onNow":function onNow(nt){fa(nt)},"cellRender":po})),Mo=Lt.useMemo((function(){return{"prefixCls":ae,"locale":Ne,"generateConfig":Ve,"button":Ui.button,"input":Ui.input}}),[ae,Ne,Ve,Ui.button,Ui.input]);return(0,Rn.A)((function(){vn&&void 0!==yr&&ha(null,Ge,!1)}),[vn,yr,Ge]),(0,Rn.A)((function(){var nt=lr();vn||"input"!==nt||(mn(!1),fa(null,!0)),vn||!Kt||ce||"panel"!==nt||(mn(!0),fa())}),[vn]),Lt.createElement(vr.Provider,{"value":Mo},Lt.createElement(mr,(0,gn.A)({},pickTriggerProps(jt),{"popupElement":ko,"popupStyle":oe.popup,"popupClassName":se.popup,"visible":vn,"onClose":function onPopupClose(){mn(!1)},"range":!0}),Lt.createElement(Kr,(0,gn.A)({},jt,{"ref":Ji,"suffixIcon":Ti,"activeIndex":or||vn?yr:null,"activeHelp":!!Wa,"allHelp":!!Wa&&"preset"===ma,"focused":or,"onFocus":function onSelectorFocus(nt,at){var lt=Sr.length,Rt=Sr[lt-1];lt&&Rt!==at&&ce&&!fe[Rt]&&!wr(Rt)&&Cn[Rt]?Ji.current.focus({"index":Rt}):(lr("input"),mn(!0,{"inherit":!0}),yr!==at&&vn&&!ce&&Kt&&fa(null,!0),xr(at),Mr(nt,at))},"onBlur":function onSelectorBlur(nt,at){if(mn(!1),!ce&&"input"===lr()){var lt=kr(Cn);Wr(yr,null===lt)}Tr(nt,at)},"onKeyDown":function onSelectorKeyDown(nt,at){"Tab"===nt.key&&fa(null,!0),null==he||he(nt,at)},"onSubmit":fa,"value":$a,"maskFormat":ne,"onChange":function onSelectorChange(nt,at){var lt=da(nt,at);An(lt)},"onInputChange":function onSelectorInputChange(){lr("input")},"format":te,"inputReadOnly":Mi,"disabled":de,"open":vn,"onOpenChange":mn,"onClick":function onSelectorClick(nt){var at,lt=nt.target.getRootNode();if(!Ji.current.nativeElement.contains(null!==(at=lt.activeElement)&&void 0!==at?at:document.activeElement)){var Rt=de.findIndex((function(nt){return!nt}));Rt>=0&&Ji.current.focus({"index":Rt})}mn(!0),null==Qi||Qi(nt)},"onClear":function onSelectorClear(){Gr(null),mn(!1,{"force":!0})},"invalid":qr,"onInvalid":Zr,"onActiveInfo":eo}))))}var Zr=Lt.forwardRef(RangePicker),Jr=lt(664);function MultipleDates(nt){var at=nt.prefixCls,lt=nt.value,Rt=nt.onRemove,Bt=nt.removeIcon,Ht=void 0===Bt?"":Bt,jt=nt.formatDate,$t=nt.disabled,Kt=nt.maxTagCount,te=nt.placeholder,ne="".concat(at,"-selector"),re="".concat(at,"-selection"),ae="".concat(re,"-overflow");function renderSelector(nt,at){return Lt.createElement("span",{"className":Tn()("".concat(re,"-item")),"title":"string"==typeof nt?nt:null},Lt.createElement("span",{"className":"".concat(re,"-item-content")},nt),!$t&&at&&Lt.createElement("span",{"onMouseDown":function onMouseDown(nt){nt.preventDefault()},"onClick":at,"className":"".concat(re,"-item-remove")},Ht))}return Lt.createElement("div",{"className":ne},Lt.createElement(Jr.A,{"prefixCls":ae,"data":lt,"renderItem":function renderItem(nt){return renderSelector(jt(nt),(function onClose(at){at&&at.stopPropagation(),Rt(nt)}))},"renderRest":function renderRest(nt){return renderSelector("+ ".concat(nt.length," ..."))},"itemKey":function itemKey(nt){return jt(nt)},"maxCount":Kt}),!lt.length&&Lt.createElement("span",{"className":"".concat(at,"-selection-placeholder")},te))}var sa=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function SingleSelector(nt,at){nt.id;var lt=nt.open,Ht=nt.prefix,jt=nt.clearIcon,$t=nt.suffixIcon,Kt=(nt.activeHelp,nt.allHelp,nt.focused),te=(nt.onFocus,nt.onBlur,nt.onKeyDown,nt.locale),ne=nt.generateConfig,re=nt.placeholder,ae=nt.className,oe=nt.style,se=nt.onClick,le=nt.onClear,ue=nt.internalPicker,ce=nt.value,he=nt.onChange,de=nt.onSubmit,fe=(nt.onInputChange,nt.multiple),pe=nt.maxTagCount,ve=(nt.format,nt.maskFormat,nt.preserveInvalidOnBlur,nt.onInvalid,nt.disabled),Ae=nt.invalid,we=(nt.inputReadOnly,nt.direction),Ce=(nt.onOpenChange,nt.onMouseDown),je=(nt.required,nt["aria-required"],nt.autoFocus),Ne=nt.tabIndex,Ve=nt.removeIcon,Ge=(0,Hr.A)(nt,sa),ti="rtl"===we,li=Lt.useContext(vr).prefixCls,hi=Lt.useRef(),di=Lt.useRef();Lt.useImperativeHandle(at,(function(){return{"nativeElement":hi.current,"focus":function focus(nt){var at;null===(at=di.current)||void 0===at||at.focus(nt)},"blur":function blur(){var nt;null===(nt=di.current)||void 0===nt||nt.blur()}}}));var fi=useRootProps(Ge),pi=useInputProps((0,Rt.A)((0,Rt.A)({},nt),{},{"onChange":function onSingleChange(nt){he([nt])}}),(function(nt){return{"value":nt.valueTexts[0]||"","active":Kt}})),vi=(0,Bt.A)(pi,2),mi=vi[0],_i=vi[1],bi=!(!jt||!ce.length||ve),Mi=fe?Lt.createElement(Lt.Fragment,null,Lt.createElement(MultipleDates,{"prefixCls":li,"value":ce,"onRemove":function onMultipleRemove(nt){var at=ce.filter((function(at){return at&&!isSame(ne,te,at,nt,ue)}));he(at),lt||de()},"formatDate":_i,"maxTagCount":pe,"disabled":ve,"removeIcon":Ve,"placeholder":re}),Lt.createElement("input",{"className":"".concat(li,"-multiple-input"),"value":ce.map(_i).join(","),"ref":di,"readOnly":!0,"autoFocus":je,"tabIndex":Ne}),Lt.createElement(Icon,{"type":"suffix","icon":$t}),bi&&Lt.createElement(ClearIcon,{"icon":jt,"onClear":le})):Lt.createElement(Yr,(0,gn.A)({"ref":di},mi(),{"autoFocus":je,"tabIndex":Ne,"suffixIcon":$t,"clearIcon":bi&&Lt.createElement(ClearIcon,{"icon":jt,"onClear":le}),"showActiveCls":!1}));return Lt.createElement("div",(0,gn.A)({},fi,{"className":Tn()(li,(0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)((0,sr.A)({},"".concat(li,"-multiple"),fe),"".concat(li,"-focused"),Kt),"".concat(li,"-disabled"),ve),"".concat(li,"-invalid"),Ae),"".concat(li,"-rtl"),ti),ae),"style":oe,"ref":hi,"onClick":se,"onMouseDown":function onMouseDown(nt){var at;nt.target!==(null===(at=di.current)||void 0===at?void 0:at.inputElement)&&nt.preventDefault(),null==Ce||Ce(nt)}}),Ht&&Lt.createElement("div",{"className":"".concat(li,"-prefix")},Ht),Mi)}var ua=Lt.forwardRef(SingleSelector);function Picker(nt,at){var lt=useFilledProps(nt),Ht=(0,Bt.A)(lt,6),jt=Ht[0],$t=Ht[1],Kt=Ht[2],te=Ht[3],ne=Ht[4],re=Ht[5],ae=jt,oe=ae.prefixCls,se=ae.styles,le=ae.classNames,ue=ae.order,ce=ae.defaultValue,he=ae.value,de=ae.needConfirm,fe=ae.onChange,pe=ae.onKeyDown,ve=ae.disabled,Ae=ae.disabledDate,we=ae.minDate,Ce=ae.maxDate,je=ae.defaultOpen,Ne=ae.open,Ve=ae.onOpenChange,Ge=ae.locale,ti=ae.generateConfig,li=ae.picker,hi=ae.showNow,di=ae.showToday,fi=ae.showTime,pi=ae.mode,vi=ae.onPanelChange,mi=ae.onCalendarChange,_i=ae.onOk,bi=ae.multiple,Mi=ae.defaultPickerValue,Ti=ae.pickerValue,Ii=ae.onPickerValueChange,Bi=ae.inputReadOnly,zi=ae.suffixIcon,Wi=ae.removeIcon,Ui=ae.onFocus,$i=ae.onBlur,qi=ae.presets,Ki=ae.components,Qi=ae.cellRender,Ji=ae.dateRender,dn=ae.monthCellRender,fn=ae.onClick,vn=usePickerRef(at);function pickerParam(nt){return null===nt?null:bi?nt:nt[0]}var yn=useToggleDates(ti,Ge,$t),mn=useOpen(Ne,je,[ve],Ve),_n=(0,Bt.A)(mn,2),bn=_n[0],xn=_n[1],kn=useInnerValue(ti,Ge,te,!1,ue,ce,he,(function onInternalCalendarChange(nt,at,lt){if(mi){var Bt=(0,Rt.A)({},lt);delete Bt.range,mi(pickerParam(nt),pickerParam(at),Bt)}}),(function onInternalOk(nt){null==_i||_i(pickerParam(nt))})),Sn=(0,Bt.A)(kn,5),An=Sn[0],wn=Sn[1],Cn=Sn[2],Mn=Sn[3],Tn=Sn[4],or=Cn(),sr=useRangeActive([ve]),lr=(0,Bt.A)(sr,4),yr=lr[0],xr=lr[1],kr=lr[2],Sr=lr[3],Ar=function onSharedFocus(nt){xr(!0),null==Ui||Ui(nt,{})},wr=function onSharedBlur(nt){xr(!1),null==$i||$i(nt,{})},Mr=(0,Pn.vz)(li,{"value":pi}),Tr=(0,Bt.A)(Mr,2),Ir=Tr[0],Br=Tr[1],Or="date"===Ir&&fi?"datetime":Ir,Dr=useShowNow(li,Ir,hi,di),Lr=fe&&function(nt,at){fe(pickerParam(nt),pickerParam(at))},Fr=useRangeValue((0,Rt.A)((0,Rt.A)({},jt),{},{"onChange":Lr}),An,wn,Cn,Mn,[],te,yr,bn,re),zr=(0,Bt.A)(Fr,2)[1],Hr=useFieldsInvalidate(or,re),jr=(0,Bt.A)(Hr,2),Nr=jr[0],Vr=jr[1],Wr=Lt.useMemo((function(){return Nr.some((function(nt){return nt}))}),[Nr]),Gr=useRangePickerValue(ti,Ge,or,[Ir],bn,Sr,$t,!1,Mi,Ti,toArray(null==fi?void 0:fi.defaultOpenValue),(function onInternalPickerValueChange(nt,at){if(Ii){var lt=(0,Rt.A)((0,Rt.A)({},at),{},{"mode":at.mode[0]});delete lt.range,Ii(nt[0],lt)}}),we,Ce),Ur=(0,Bt.A)(Gr,2),Yr=Ur[0],Xr=Ur[1],qr=(0,Pn._q)((function(nt,at,lt){if(Br(at),vi&&!1!==lt){var Rt=nt||or[or.length-1];vi(Rt,at)}})),Kr=function triggerConfirm(){zr(Cn()),xn(!1,{"force":!0})},Zr=Lt.useState(null),Jr=(0,Bt.A)(Zr,2),sa=Jr[0],ca=Jr[1],ha=Lt.useState(null),da=(0,Bt.A)(ha,2),fa=da[0],pa=da[1],va=Lt.useMemo((function(){var nt=[fa].concat((0,En.A)(or)).filter((function(nt){return nt}));return bi?nt:nt.slice(0,1)}),[or,fa,bi]),ma=Lt.useMemo((function(){return!bi&&fa?[fa]:or.filter((function(nt){return nt}))}),[or,fa,bi]);Lt.useEffect((function(){bn||pa(null)}),[bn]);var Ea=usePresets(qi),Pa=function onPresetSubmit(nt){var at=bi?yn(Cn(),nt):[nt];zr(at)&&!bi&&xn(!1,{"force":!0})},Ba=useCellRender(Qi,Ji,dn),Wa=Lt.useMemo((function(){var nt=(0,Fn.A)(jt,!1),at=(0,On.A)(jt,[].concat((0,En.A)(Object.keys(nt)),["onChange","onCalendarChange","style","className","onPanelChange"]));return(0,Rt.A)((0,Rt.A)({},at),{},{"multiple":jt.multiple})}),[jt]),Ga=Lt.createElement(Popup,(0,gn.A)({},Wa,{"showNow":Dr,"showTime":fi,"disabledDate":Ae,"onFocus":function onPanelFocus(nt){xn(!0),Ar(nt)},"onBlur":wr,"picker":li,"mode":Ir,"internalMode":Or,"onPanelChange":qr,"format":ne,"value":or,"isInvalid":re,"onChange":null,"onSelect":function onPanelSelect(nt){if(kr("panel"),!bi||Or===li){var at=bi?yn(Cn(),nt):[nt];Mn(at),de||Kt||$t!==Or||Kr()}},"pickerValue":Yr,"defaultOpenValue":null==fi?void 0:fi.defaultOpenValue,"onPickerValueChange":Xr,"hoverValue":va,"onHover":function onPanelHover(nt){pa(nt),ca("cell")},"needConfirm":de,"onSubmit":Kr,"onOk":Tn,"presets":Ea,"onPresetHover":function onPresetHover(nt){pa(nt),ca("preset")},"onPresetSubmit":Pa,"onNow":function onNow(nt){Pa(nt)},"cellRender":Ba})),$a=Lt.useMemo((function(){return{"prefixCls":oe,"locale":Ge,"generateConfig":ti,"button":Ki.button,"input":Ki.input}}),[oe,Ge,ti,Ki.button,Ki.input]);return(0,Rn.A)((function(){bn&&void 0!==Sr&&qr(null,li,!1)}),[bn,Sr,li]),(0,Rn.A)((function(){var nt=kr();bn||"input"!==nt||(xn(!1),Kr()),bn||!Kt||de||"panel"!==nt||(xn(!0),Kr())}),[bn]),Lt.createElement(vr.Provider,{"value":$a},Lt.createElement(mr,(0,gn.A)({},pickTriggerProps(jt),{"popupElement":Ga,"popupStyle":se.popup,"popupClassName":le.popup,"visible":bn,"onClose":function onPopupClose(){xn(!1)}}),Lt.createElement(ua,(0,gn.A)({},jt,{"ref":vn,"suffixIcon":zi,"removeIcon":Wi,"activeHelp":!!fa,"allHelp":!!fa&&"preset"===sa,"focused":yr,"onFocus":function onSelectorFocus(nt){kr("input"),xn(!0,{"inherit":!0}),Ar(nt)},"onBlur":function onSelectorBlur(nt){xn(!1),wr(nt)},"onKeyDown":function onSelectorKeyDown(nt,at){"Tab"===nt.key&&Kr(),null==pe||pe(nt,at)},"onSubmit":Kr,"value":ma,"maskFormat":ne,"onChange":function onSelectorChange(nt){Mn(nt)},"onInputChange":function onSelectorInputChange(){kr("input")},"internalPicker":$t,"format":te,"inputReadOnly":Bi,"disabled":ve,"open":bn,"onOpenChange":xn,"onClick":function onSelectorClick(nt){ve||vn.current.nativeElement.contains(document.activeElement)||vn.current.focus(),xn(!0),null==fn||fn(nt)},"onClear":function onSelectorClear(){zr(null),xn(!1,{"force":!0})},"invalid":Wr,"onInvalid":function onInvalid(nt){Vr(nt,0)}}))))}var ca=Lt.forwardRef(Picker),ha=lt(5305),da=lt(3755),fa=lt(1406),pa=lt(6623),va=lt(7311),ma=lt(3742),Ea=lt(2853),Pa=lt(8617),Ba=lt(1716),Wa=lt(443),Ga=lt(3151),$a=lt(3205),Qa=lt(4336),Ja=lt(370),to=lt(679),eo=lt(7209),co=lt(8686),po=lt(1889),vo=lt(6411),go=lt(2399),xo=lt(5926),ko=lt(8615),Mo=lt(5128);const genSize=(nt,at)=>{const{"componentCls":lt,"controlHeight":Rt}=nt,Bt=at?`${lt}-${at}`:"",Lt=(0,Mo._8)(nt);return[{[`${lt}-multiple${Bt}`]:{"paddingBlock":Lt.containerPadding,"paddingInlineStart":Lt.basePadding,"minHeight":Rt,[`${lt}-selection-item`]:{"height":Lt.itemHeight,"lineHeight":(0,Qa.zA)(Lt.itemLineHeight)}}}]};var style_multiple=nt=>{const{"componentCls":at,"calc":lt,"lineWidth":Rt}=nt,Bt=(0,ko.oX)(nt,{"fontHeight":nt.fontSize,"selectHeight":nt.controlHeightSM,"multipleSelectItemHeight":nt.multipleItemHeightSM,"borderRadius":nt.borderRadiusSM,"borderRadiusSM":nt.borderRadiusXS,"controlHeight":nt.controlHeightSM}),Lt=(0,ko.oX)(nt,{"fontHeight":lt(nt.multipleItemHeightLG).sub(lt(Rt).mul(2).equal()).equal(),"fontSize":nt.fontSizeLG,"selectHeight":nt.controlHeightLG,"multipleSelectItemHeight":nt.multipleItemHeightLG,"borderRadius":nt.borderRadiusLG,"borderRadiusSM":nt.borderRadius,"controlHeight":nt.controlHeightLG});return[genSize(Bt,"small"),genSize(nt),genSize(Lt,"large"),{[`${at}${at}-multiple`]:Object.assign(Object.assign({"width":"100%","cursor":"text",[`${at}-selector`]:{"flex":"auto","padding":0,"position":"relative","&:after":{"margin":0},[`${at}-selection-placeholder`]:{"position":"absolute","top":"50%","insetInlineStart":nt.inputPaddingHorizontalBase,"insetInlineEnd":0,"transform":"translateY(-50%)","transition":`all ${nt.motionDurationSlow}`,"overflow":"hidden","whiteSpace":"nowrap","textOverflow":"ellipsis","flex":1,"color":nt.colorTextPlaceholder,"pointerEvents":"none"}}},(0,Mo.Q3)(nt)),{[`${at}-multiple-input`]:{"width":0,"height":0,"border":0,"visibility":"hidden","position":"absolute","zIndex":-1}})}]},To=lt(5779);const genPickerCellInnerStyle=nt=>{const{"pickerCellCls":at,"pickerCellInnerCls":lt,"cellHeight":Rt,"borderRadiusSM":Bt,"motionDurationMid":Lt,"cellHoverBg":Ht,"lineWidth":jt,"lineType":$t,"colorPrimary":Kt,"cellActiveWithRangeBg":te,"colorTextLightSolid":ne,"colorTextDisabled":re,"cellBgDisabled":ae,"colorFillSecondary":oe}=nt;return{"&::before":{"position":"absolute","top":"50%","insetInlineStart":0,"insetInlineEnd":0,"zIndex":1,"height":Rt,"transform":"translateY(-50%)","content":'""',"pointerEvents":"none"},[lt]:{"position":"relative","zIndex":2,"display":"inline-block","minWidth":Rt,"height":Rt,"lineHeight":(0,Qa.zA)(Rt),"borderRadius":Bt,"transition":`background ${Lt}`},[`&:hover:not(${at}-in-view):not(${at}-disabled),\n    &:hover:not(${at}-selected):not(${at}-range-start):not(${at}-range-end):not(${at}-disabled)`]:{[lt]:{"background":Ht}},[`&-in-view${at}-today ${lt}`]:{"&::before":{"position":"absolute","top":0,"insetInlineEnd":0,"bottom":0,"insetInlineStart":0,"zIndex":1,"border":`${(0,Qa.zA)(jt)} ${$t} ${Kt}`,"borderRadius":Bt,"content":'""'}},[`&-in-view${at}-in-range,\n      &-in-view${at}-range-start,\n      &-in-view${at}-range-end`]:{"position":"relative",[`&:not(${at}-disabled):before`]:{"background":te}},[`&-in-view${at}-selected,\n      &-in-view${at}-range-start,\n      &-in-view${at}-range-end`]:{[`&:not(${at}-disabled) ${lt}`]:{"color":ne,"background":Kt},[`&${at}-disabled ${lt}`]:{"background":oe}},[`&-in-view${at}-range-start:not(${at}-disabled):before`]:{"insetInlineStart":"50%"},[`&-in-view${at}-range-end:not(${at}-disabled):before`]:{"insetInlineEnd":"50%"},[`&-in-view${at}-range-start:not(${at}-range-end) ${lt}`]:{"borderStartStartRadius":Bt,"borderEndStartRadius":Bt,"borderStartEndRadius":0,"borderEndEndRadius":0},[`&-in-view${at}-range-end:not(${at}-range-start) ${lt}`]:{"borderStartStartRadius":0,"borderEndStartRadius":0,"borderStartEndRadius":Bt,"borderEndEndRadius":Bt},"&-disabled":{"color":re,"cursor":"not-allowed",[lt]:{"background":"transparent"},"&::before":{"background":ae}},[`&-disabled${at}-today ${lt}::before`]:{"borderColor":re}}},genPanelStyle=nt=>{const{"componentCls":at,"pickerCellCls":lt,"pickerCellInnerCls":Rt,"pickerYearMonthCellWidth":Bt,"pickerControlIconSize":Lt,"cellWidth":Ht,"paddingSM":jt,"paddingXS":$t,"paddingXXS":Kt,"colorBgContainer":te,"lineWidth":ne,"lineType":re,"borderRadiusLG":ae,"colorPrimary":oe,"colorTextHeading":se,"colorSplit":le,"pickerControlIconBorderWidth":ue,"colorIcon":ce,"textHeight":he,"motionDurationMid":de,"colorIconHover":fe,"fontWeightStrong":pe,"cellHeight":ve,"pickerCellPaddingVertical":Ae,"colorTextDisabled":we,"colorText":Ce,"fontSize":je,"motionDurationSlow":Ne,"withoutTimeCellHeight":Ve,"pickerQuarterPanelContentHeight":Ge,"borderRadiusSM":ti,"colorTextLightSolid":li,"cellHoverBg":hi,"timeColumnHeight":di,"timeColumnWidth":fi,"timeCellHeight":pi,"controlItemBgActive":vi,"marginXXS":mi,"pickerDatePanelPaddingHorizontal":_i,"pickerControlIconMargin":bi}=nt,Mi=nt.calc(Ht).mul(7).add(nt.calc(_i).mul(2)).equal();return{[at]:{"&-panel":{"display":"inline-flex","flexDirection":"column","textAlign":"center","background":te,"borderRadius":ae,"outline":"none","&-focused":{"borderColor":oe},"&-rtl":{[`${at}-prev-icon,\n              ${at}-super-prev-icon`]:{"transform":"rotate(45deg)"},[`${at}-next-icon,\n              ${at}-super-next-icon`]:{"transform":"rotate(-135deg)"},[`${at}-time-panel`]:{[`${at}-content`]:{"direction":"ltr","> *":{"direction":"rtl"}}}}},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel,\n        &-week-panel,\n        &-date-panel,\n        &-time-panel":{"display":"flex","flexDirection":"column","width":Mi},"&-header":{"display":"flex","padding":`0 ${(0,Qa.zA)($t)}`,"color":se,"borderBottom":`${(0,Qa.zA)(ne)} ${re} ${le}`,"> *":{"flex":"none"},"button":{"padding":0,"color":ce,"lineHeight":(0,Qa.zA)(he),"background":"transparent","border":0,"cursor":"pointer","transition":`color ${de}`,"fontSize":"inherit","display":"inline-flex","alignItems":"center","justifyContent":"center","&:empty":{"display":"none"}},"> button":{"minWidth":"1.6em","fontSize":je,"&:hover":{"color":fe},"&:disabled":{"opacity":.25,"pointerEvents":"none"}},"&-view":{"flex":"auto","fontWeight":pe,"lineHeight":(0,Qa.zA)(he),"> button":{"color":"inherit","fontWeight":"inherit","&:not(:first-child)":{"marginInlineStart":$t},"&:hover":{"color":oe}}}},"&-prev-icon,\n        &-next-icon,\n        &-super-prev-icon,\n        &-super-next-icon":{"position":"relative","width":Lt,"height":Lt,"&::before":{"position":"absolute","top":0,"insetInlineStart":0,"width":Lt,"height":Lt,"border":"0 solid currentcolor","borderBlockWidth":`${(0,Qa.zA)(ue)} 0`,"borderInlineWidth":`${(0,Qa.zA)(ue)} 0`,"content":'""'}},"&-super-prev-icon,\n        &-super-next-icon":{"&::after":{"position":"absolute","top":bi,"insetInlineStart":bi,"display":"inline-block","width":Lt,"height":Lt,"border":"0 solid currentcolor","borderBlockWidth":`${(0,Qa.zA)(ue)} 0`,"borderInlineWidth":`${(0,Qa.zA)(ue)} 0`,"content":'""'}},"&-prev-icon, &-super-prev-icon":{"transform":"rotate(-45deg)"},"&-next-icon, &-super-next-icon":{"transform":"rotate(135deg)"},"&-content":{"width":"100%","tableLayout":"fixed","borderCollapse":"collapse","th, td":{"position":"relative","minWidth":ve,"fontWeight":"normal"},"th":{"height":nt.calc(ve).add(nt.calc(Ae).mul(2)).equal(),"color":Ce,"verticalAlign":"middle"}},"&-cell":Object.assign({"padding":`${(0,Qa.zA)(Ae)} 0`,"color":we,"cursor":"pointer","&-in-view":{"color":Ce}},genPickerCellInnerStyle(nt)),"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${at}-content`]:{"height":nt.calc(Ve).mul(4).equal()},[Rt]:{"padding":`0 ${(0,Qa.zA)($t)}`}},"&-quarter-panel":{[`${at}-content`]:{"height":Ge}},"&-decade-panel":{[Rt]:{"padding":`0 ${(0,Qa.zA)(nt.calc($t).div(2).equal())}`},[`${at}-cell::before`]:{"display":"none"}},"&-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${at}-body`]:{"padding":`0 ${(0,Qa.zA)($t)}`},[Rt]:{"width":Bt}},"&-date-panel":{[`${at}-body`]:{"padding":`${(0,Qa.zA)($t)} ${(0,Qa.zA)(_i)}`},[`${at}-content th`]:{"boxSizing":"border-box","padding":0}},"&-week-panel":{[`${at}-cell`]:{[`&:hover ${Rt},\n            &-selected ${Rt},\n            ${Rt}`]:{"background":"transparent !important"}},"&-row":{"td":{"&:before":{"transition":`background ${de}`},"&:first-child:before":{"borderStartStartRadius":ti,"borderEndStartRadius":ti},"&:last-child:before":{"borderStartEndRadius":ti,"borderEndEndRadius":ti}},"&:hover td:before":{"background":hi},"&-range-start td, &-range-end td, &-selected td, &-hover td":{[`&${lt}`]:{"&:before":{"background":oe},[`&${at}-cell-week`]:{"color":new To.Y(li).setA(.5).toHexString()},[Rt]:{"color":li}}},"&-range-hover td:before":{"background":vi}}},"&-week-panel, &-date-panel-show-week":{[`${at}-body`]:{"padding":`${(0,Qa.zA)($t)} ${(0,Qa.zA)(jt)}`},[`${at}-content th`]:{"width":"auto"}},"&-datetime-panel":{"display":"flex",[`${at}-time-panel`]:{"borderInlineStart":`${(0,Qa.zA)(ne)} ${re} ${le}`},[`${at}-date-panel,\n          ${at}-time-panel`]:{"transition":`opacity ${Ne}`},"&-active":{[`${at}-date-panel,\n            ${at}-time-panel`]:{"opacity":.3,"&-active":{"opacity":1}}}},"&-time-panel":{"width":"auto","minWidth":"auto",[`${at}-content`]:{"display":"flex","flex":"auto","height":di},"&-column":{"flex":"1 0 auto","width":fi,"margin":`${(0,Qa.zA)(Kt)} 0`,"padding":0,"overflowY":"hidden","textAlign":"start","listStyle":"none","transition":`background ${de}`,"overflowX":"hidden","&::-webkit-scrollbar":{"width":8,"backgroundColor":"transparent"},"&::-webkit-scrollbar-thumb":{"backgroundColor":nt.colorTextTertiary,"borderRadius":nt.borderRadiusSM},"&":{"scrollbarWidth":"thin","scrollbarColor":`${nt.colorTextTertiary} transparent`},"&::after":{"display":"block","height":`calc(100% - ${(0,Qa.zA)(pi)})`,"content":'""'},"&:not(:first-child)":{"borderInlineStart":`${(0,Qa.zA)(ne)} ${re} ${le}`},"&-active":{"background":new To.Y(vi).setA(.2).toHexString()},"&:hover":{"overflowY":"auto"},"> li":{"margin":0,"padding":0,[`&${at}-time-panel-cell`]:{"marginInline":mi,[`${at}-time-panel-cell-inner`]:{"display":"block","width":nt.calc(fi).sub(nt.calc(mi).mul(2)).equal(),"height":pi,"margin":0,"paddingBlock":0,"paddingInlineEnd":0,"paddingInlineStart":nt.calc(fi).sub(pi).div(2).equal(),"color":Ce,"lineHeight":(0,Qa.zA)(pi),"borderRadius":ti,"cursor":"pointer","transition":`background ${de}`,"&:hover":{"background":hi}},"&-selected":{[`${at}-time-panel-cell-inner`]:{"background":vi}},"&-disabled":{[`${at}-time-panel-cell-inner`]:{"color":we,"background":"transparent","cursor":"not-allowed"}}}}}}}}};var panel=nt=>{const{"componentCls":at,"textHeight":lt,"lineWidth":Rt,"paddingSM":Bt,"antCls":Lt,"colorPrimary":Ht,"cellActiveWithRangeBg":jt,"colorPrimaryBorder":$t,"lineType":Kt,"colorSplit":te}=nt;return{[`${at}-dropdown`]:{[`${at}-footer`]:{"borderTop":`${(0,Qa.zA)(Rt)} ${Kt} ${te}`,"&-extra":{"padding":`0 ${(0,Qa.zA)(Bt)}`,"lineHeight":(0,Qa.zA)(nt.calc(lt).sub(nt.calc(Rt).mul(2)).equal()),"textAlign":"start","&:not(:last-child)":{"borderBottom":`${(0,Qa.zA)(Rt)} ${Kt} ${te}`}}},[`${at}-panels + ${at}-footer ${at}-ranges`]:{"justifyContent":"space-between"},[`${at}-ranges`]:{"marginBlock":0,"paddingInline":(0,Qa.zA)(Bt),"overflow":"hidden","textAlign":"start","listStyle":"none","display":"flex","justifyContent":"center","alignItems":"center","> li":{"lineHeight":(0,Qa.zA)(nt.calc(lt).sub(nt.calc(Rt).mul(2)).equal()),"display":"inline-block"},[`${at}-now-btn-disabled`]:{"pointerEvents":"none","color":nt.colorTextDisabled},[`${at}-preset > ${Lt}-tag-blue`]:{"color":Ht,"background":jt,"borderColor":$t,"cursor":"pointer"},[`${at}-ok`]:{"paddingBlock":nt.calc(Rt).mul(2).equal(),"marginInlineStart":"auto"}}}}};var Io=lt(5246);var style_variants=nt=>{const{"componentCls":at}=nt;return{[at]:[Object.assign(Object.assign(Object.assign(Object.assign({},(0,Io.Eb)(nt)),(0,Io.aP)(nt)),(0,Io.sA)(nt)),(0,Io.lB)(nt)),{"&-outlined":{[`&${at}-multiple ${at}-selection-item`]:{"background":nt.multipleItemBg,"border":`${(0,Qa.zA)(nt.lineWidth)} ${nt.lineType} ${nt.multipleItemBorderColor}`}},"&-filled":{[`&${at}-multiple ${at}-selection-item`]:{"background":nt.colorBgContainer,"border":`${(0,Qa.zA)(nt.lineWidth)} ${nt.lineType} ${nt.colorSplit}`}},"&-borderless":{[`&${at}-multiple ${at}-selection-item`]:{"background":nt.multipleItemBg,"border":`${(0,Qa.zA)(nt.lineWidth)} ${nt.lineType} ${nt.multipleItemBorderColor}`}},"&-underlined":{[`&${at}-multiple ${at}-selection-item`]:{"background":nt.multipleItemBg,"border":`${(0,Qa.zA)(nt.lineWidth)} ${nt.lineType} ${nt.multipleItemBorderColor}`}}}]}};const genPickerPadding=(nt,at,lt,Rt)=>{const Bt=nt.calc(lt).add(2).equal(),Lt=nt.max(nt.calc(at).sub(Bt).div(2).equal(),0),Ht=nt.max(nt.calc(at).sub(Bt).sub(Lt).equal(),0);return{"padding":`${(0,Qa.zA)(Lt)} ${(0,Qa.zA)(Rt)} ${(0,Qa.zA)(Ht)}`}},genPickerStatusStyle=nt=>{const{"componentCls":at,"colorError":lt,"colorWarning":Rt}=nt;return{[`${at}:not(${at}-disabled):not([disabled])`]:{[`&${at}-status-error`]:{[`${at}-active-bar`]:{"background":lt}},[`&${at}-status-warning`]:{[`${at}-active-bar`]:{"background":Rt}}}}},genPickerStyle=nt=>{const{"componentCls":at,"antCls":lt,"controlHeight":Rt,"paddingInline":Bt,"lineWidth":Lt,"lineType":Ht,"colorBorder":jt,"borderRadius":$t,"motionDurationMid":Kt,"colorTextDisabled":te,"colorTextPlaceholder":ne,"controlHeightLG":re,"fontSizeLG":ae,"controlHeightSM":oe,"paddingInlineSM":se,"paddingXS":le,"marginXS":ue,"colorTextDescription":ce,"lineWidthBold":he,"colorPrimary":de,"motionDurationSlow":fe,"zIndexPopup":pe,"paddingXXS":ve,"sizePopupArrow":Ae,"colorBgElevated":we,"borderRadiusLG":Ce,"boxShadowSecondary":je,"borderRadiusSM":Ne,"colorSplit":Ve,"cellHoverBg":Ge,"presetsWidth":ti,"presetsMaxWidth":li,"boxShadowPopoverArrow":hi,"fontHeight":di,"fontHeightLG":fi,"lineHeightLG":pi}=nt;return[{[at]:Object.assign(Object.assign(Object.assign({},(0,eo.dF)(nt)),genPickerPadding(nt,Rt,di,Bt)),{"position":"relative","display":"inline-flex","alignItems":"center","lineHeight":1,"borderRadius":$t,"transition":`border ${Kt}, box-shadow ${Kt}, background ${Kt}`,[`${at}-prefix`]:{"flex":"0 0 auto","marginInlineEnd":nt.inputAffixPadding},[`${at}-input`]:{"position":"relative","display":"inline-flex","alignItems":"center","width":"100%","> input":Object.assign(Object.assign({"position":"relative","display":"inline-block","width":"100%","color":"inherit","fontSize":nt.fontSize,"lineHeight":nt.lineHeight,"transition":`all ${Kt}`},(0,Ja.j_)(ne)),{"flex":"auto","minWidth":1,"height":"auto","padding":0,"background":"transparent","border":0,"fontFamily":"inherit","&:focus":{"boxShadow":"none","outline":0},"&[disabled]":{"background":"transparent","color":te,"cursor":"not-allowed"}}),"&-placeholder":{"> input":{"color":ne}}},"&-large":Object.assign(Object.assign({},genPickerPadding(nt,re,fi,Bt)),{[`${at}-input > input`]:{"fontSize":ae,"lineHeight":pi}}),"&-small":Object.assign({},genPickerPadding(nt,oe,di,se)),[`${at}-suffix`]:{"display":"flex","flex":"none","alignSelf":"center","marginInlineStart":nt.calc(le).div(2).equal(),"color":te,"lineHeight":1,"pointerEvents":"none","transition":`opacity ${Kt}, color ${Kt}`,"> *":{"verticalAlign":"top","&:not(:last-child)":{"marginInlineEnd":ue}}},[`${at}-clear`]:{"position":"absolute","top":"50%","insetInlineEnd":0,"color":te,"lineHeight":1,"transform":"translateY(-50%)","cursor":"pointer","opacity":0,"transition":`opacity ${Kt}, color ${Kt}`,"> *":{"verticalAlign":"top"},"&:hover":{"color":ce}},"&:hover":{[`${at}-clear`]:{"opacity":1},[`${at}-suffix:not(:last-child)`]:{"opacity":0}},[`${at}-separator`]:{"position":"relative","display":"inline-block","width":"1em","height":ae,"color":te,"fontSize":ae,"verticalAlign":"top","cursor":"default",[`${at}-focused &`]:{"color":ce},[`${at}-range-separator &`]:{[`${at}-disabled &`]:{"cursor":"not-allowed"}}},"&-range":{"position":"relative","display":"inline-flex",[`${at}-active-bar`]:{"bottom":nt.calc(Lt).mul(-1).equal(),"height":he,"background":de,"opacity":0,"transition":`all ${fe} ease-out`,"pointerEvents":"none"},[`&${at}-focused`]:{[`${at}-active-bar`]:{"opacity":1}},[`${at}-range-separator`]:{"alignItems":"center","padding":`0 ${(0,Qa.zA)(le)}`,"lineHeight":1}},"&-range, &-multiple":{[`${at}-clear`]:{"insetInlineEnd":Bt},[`&${at}-small`]:{[`${at}-clear`]:{"insetInlineEnd":se}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},(0,eo.dF)(nt)),genPanelStyle(nt)),{"pointerEvents":"none","position":"absolute","top":-9999,"left":{"_skip_check_":!0,"value":-9999},"zIndex":pe,[`&${at}-dropdown-hidden`]:{"display":"none"},"&-rtl":{"direction":"rtl"},[`&${at}-dropdown-placement-bottomLeft,\n            &${at}-dropdown-placement-bottomRight`]:{[`${at}-range-arrow`]:{"top":0,"display":"block","transform":"translateY(-100%)"}},[`&${at}-dropdown-placement-topLeft,\n            &${at}-dropdown-placement-topRight`]:{[`${at}-range-arrow`]:{"bottom":0,"display":"block","transform":"translateY(100%) rotate(180deg)"}},[`&${lt}-slide-up-enter${lt}-slide-up-enter-active${at}-dropdown-placement-topLeft,\n          &${lt}-slide-up-enter${lt}-slide-up-enter-active${at}-dropdown-placement-topRight,\n          &${lt}-slide-up-appear${lt}-slide-up-appear-active${at}-dropdown-placement-topLeft,\n          &${lt}-slide-up-appear${lt}-slide-up-appear-active${at}-dropdown-placement-topRight`]:{"animationName":po.nP},[`&${lt}-slide-up-enter${lt}-slide-up-enter-active${at}-dropdown-placement-bottomLeft,\n          &${lt}-slide-up-enter${lt}-slide-up-enter-active${at}-dropdown-placement-bottomRight,\n          &${lt}-slide-up-appear${lt}-slide-up-appear-active${at}-dropdown-placement-bottomLeft,\n          &${lt}-slide-up-appear${lt}-slide-up-appear-active${at}-dropdown-placement-bottomRight`]:{"animationName":po.ox},[`&${lt}-slide-up-leave ${at}-panel-container`]:{"pointerEvents":"none"},[`&${lt}-slide-up-leave${lt}-slide-up-leave-active${at}-dropdown-placement-topLeft,\n          &${lt}-slide-up-leave${lt}-slide-up-leave-active${at}-dropdown-placement-topRight`]:{"animationName":po.YU},[`&${lt}-slide-up-leave${lt}-slide-up-leave-active${at}-dropdown-placement-bottomLeft,\n          &${lt}-slide-up-leave${lt}-slide-up-leave-active${at}-dropdown-placement-bottomRight`]:{"animationName":po.vR},[`${at}-panel > ${at}-time-panel`]:{"paddingTop":ve},[`${at}-range-wrapper`]:{"display":"flex","position":"relative"},[`${at}-range-arrow`]:Object.assign(Object.assign({"position":"absolute","zIndex":1,"display":"none","paddingInline":nt.calc(Bt).mul(1.5).equal(),"boxSizing":"content-box","transition":`all ${fe} ease-out`},(0,go.j)(nt,we,hi)),{"&:before":{"insetInlineStart":nt.calc(Bt).mul(1.5).equal()}}),[`${at}-panel-container`]:{"overflow":"hidden","verticalAlign":"top","background":we,"borderRadius":Ce,"boxShadow":je,"transition":`margin ${fe}`,"display":"inline-block","pointerEvents":"auto",[`${at}-panel-layout`]:{"display":"flex","flexWrap":"nowrap","alignItems":"stretch"},[`${at}-presets`]:{"display":"flex","flexDirection":"column","minWidth":ti,"maxWidth":li,"ul":{"height":0,"flex":"auto","listStyle":"none","overflow":"auto","margin":0,"padding":le,"borderInlineEnd":`${(0,Qa.zA)(Lt)} ${Ht} ${Ve}`,"li":Object.assign(Object.assign({},eo.L9),{"borderRadius":Ne,"paddingInline":le,"paddingBlock":nt.calc(oe).sub(di).div(2).equal(),"cursor":"pointer","transition":`all ${fe}`,"+ li":{"marginTop":ue},"&:hover":{"background":Ge}})}},[`${at}-panels`]:{"display":"inline-flex","flexWrap":"nowrap","&:last-child":{[`${at}-panel`]:{"borderWidth":0}}},[`${at}-panel`]:{"verticalAlign":"top","background":"transparent","borderRadius":0,"borderWidth":0,[`${at}-content, table`]:{"textAlign":"center"},"&-focused":{"borderColor":jt}}}}),"&-dropdown-range":{"padding":`${(0,Qa.zA)(nt.calc(Ae).mul(2).div(3).equal())} 0`,"&-hidden":{"display":"none"}},"&-rtl":{"direction":"rtl",[`${at}-separator`]:{"transform":"rotate(180deg)"},[`${at}-footer`]:{"&-extra":{"direction":"rtl"}}}})},(0,po._j)(nt,"slide-up"),(0,po._j)(nt,"slide-down"),(0,vo.Mh)(nt,"move-up"),(0,vo.Mh)(nt,"move-down")]};var Do=(0,xo.OF)("DatePicker",(nt=>{const at=(0,ko.oX)((0,to.C)(nt),(nt=>{const{"componentCls":at,"controlHeightLG":lt,"paddingXXS":Rt,"padding":Bt}=nt;return{"pickerCellCls":`${at}-cell`,"pickerCellInnerCls":`${at}-cell-inner`,"pickerYearMonthCellWidth":nt.calc(lt).mul(1.5).equal(),"pickerQuarterPanelContentHeight":nt.calc(lt).mul(1.4).equal(),"pickerCellPaddingVertical":nt.calc(Rt).add(nt.calc(Rt).div(2)).equal(),"pickerCellBorderGap":2,"pickerControlIconSize":7,"pickerControlIconMargin":4,"pickerControlIconBorderWidth":1.5,"pickerDatePanelPaddingHorizontal":nt.calc(Bt).add(nt.calc(Rt).div(2)).equal()}})(nt),{"inputPaddingHorizontalBase":nt.calc(nt.paddingSM).sub(1).equal(),"multipleSelectItemHeight":nt.multipleItemHeight,"selectHeight":nt.controlHeight});return[panel(at),genPickerStyle(at),style_variants(at),genPickerStatusStyle(at),style_multiple(at),(0,co.G)(nt,{"focusElCls":`${nt.componentCls}-focused`})]}),(nt=>Object.assign(Object.assign(Object.assign(Object.assign({},(0,to.b)(nt)),(nt=>{const{"colorBgContainerDisabled":at,"controlHeight":lt,"controlHeightSM":Rt,"controlHeightLG":Bt,"paddingXXS":Lt,"lineWidth":Ht}=nt,jt=2*Lt,$t=2*Ht,Kt=Math.min(lt-jt,lt-$t),te=Math.min(Rt-jt,Rt-$t),ne=Math.min(Bt-jt,Bt-$t);return{"INTERNAL_FIXED_ITEM_MARGIN":Math.floor(Lt/2),"cellHoverBg":nt.controlItemBgHover,"cellActiveWithRangeBg":nt.controlItemBgActive,"cellHoverWithRangeBg":new To.Y(nt.colorPrimary).lighten(35).toHexString(),"cellRangeBorderColor":new To.Y(nt.colorPrimary).lighten(20).toHexString(),"cellBgDisabled":at,"timeColumnWidth":1.4*Bt,"timeColumnHeight":224,"timeCellHeight":28,"cellWidth":1.5*Rt,"cellHeight":Rt,"textHeight":Bt,"withoutTimeCellHeight":1.65*Bt,"multipleItemBg":nt.colorFillSecondary,"multipleItemBorderColor":"transparent","multipleItemHeight":Kt,"multipleItemHeightSM":te,"multipleItemHeightLG":ne,"multipleSelectorBgDisabled":at,"multipleItemColorDisabled":nt.colorTextDisabled,"multipleItemBorderColorDisabled":"transparent"}})(nt)),(0,go.n)(nt)),{"presetsWidth":120,"presetsMaxWidth":200,"zIndexPopup":nt.zIndexPopupBase+50}))),Lo=lt(5730);function getPlaceholder(nt,at,lt){return void 0!==lt?lt:"year"===at&&nt.lang.yearPlaceholder?nt.lang.yearPlaceholder:"quarter"===at&&nt.lang.quarterPlaceholder?nt.lang.quarterPlaceholder:"month"===at&&nt.lang.monthPlaceholder?nt.lang.monthPlaceholder:"week"===at&&nt.lang.weekPlaceholder?nt.lang.weekPlaceholder:"time"===at&&nt.timePickerLocale.placeholder?nt.timePickerLocale.placeholder:nt.lang.placeholder}function getRangePlaceholder(nt,at,lt){return void 0!==lt?lt:"year"===at&&nt.lang.yearPlaceholder?nt.lang.rangeYearPlaceholder:"quarter"===at&&nt.lang.quarterPlaceholder?nt.lang.rangeQuarterPlaceholder:"month"===at&&nt.lang.monthPlaceholder?nt.lang.rangeMonthPlaceholder:"week"===at&&nt.lang.weekPlaceholder?nt.lang.rangeWeekPlaceholder:"time"===at&&nt.timePickerLocale.placeholder?nt.timePickerLocale.rangePlaceholder:nt.lang.rangePlaceholder}function util_useIcons(nt,at){const{"allowClear":lt=!0}=nt,{"clearIcon":Rt,"removeIcon":Bt}=(0,Lo.A)(Object.assign(Object.assign({},nt),{"prefixCls":at,"componentName":"DatePicker"}));return[Lt.useMemo((()=>{if(!1===lt)return!1;const nt=!0===lt?{}:lt;return Object.assign({"clearIcon":Rt},nt)}),[lt,Rt]),Bt]}const[$o,ts]=["week","WeekPicker"],[ns,os]=["month","MonthPicker"],[ss,ls]=["year","YearPicker"],[us,cs]=["quarter","QuarterPicker"],[hs,ds]=["time","TimePicker"];var fs=lt(5410);var date_picker_PickerButton=nt=>Lt.createElement(fs.Ay,Object.assign({"size":"small","type":"primary"},nt));function useComponents(nt){return(0,Lt.useMemo)((()=>Object.assign({"button":date_picker_PickerButton},nt)),[nt])}var generateRangePicker_rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};var generatePicker_generateRangePicker=nt=>{const at=(0,Lt.forwardRef)(((at,lt)=>{var Rt;const{"prefixCls":Bt,"getPopupContainer":Ht,"components":jt,"className":$t,"style":Kt,"placement":te,"size":ne,"disabled":re,"bordered":ae=!0,"placeholder":oe,"popupClassName":se,"dropdownClassName":le,"status":ue,"rootClassName":ce,"variant":he,"picker":de}=at,fe=generateRangePicker_rest(at,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),pe=Lt.useRef(null),{"getPrefixCls":ve,"direction":Ae,"getPopupContainer":we,"rangePicker":Ce}=(0,Lt.useContext)(pa.QO),je=ve("picker",Bt),{"compactSize":Ne,"compactItemClassnames":Ve}=(0,Ga.RQ)(je,Ae),Ge=ve(),[ti,li]=(0,Ba.A)("rangePicker",he,ae),hi=(0,ma.A)(je),[di,fi,pi]=Do(je,hi);const[vi]=util_useIcons(at,je),mi=useComponents(jt),_i=(0,Ea.A)((nt=>{var at;return null!==(at=null!=ne?ne:Ne)&&void 0!==at?at:nt})),bi=Lt.useContext(va.A),Mi=null!=re?re:bi,Ti=(0,Lt.useContext)(Pa.$W),{"hasFeedback":Ii,"status":Bi,"feedbackIcon":zi}=Ti,Wi=Lt.createElement(Lt.Fragment,null,de===hs?Lt.createElement(Sn,null):Lt.createElement(bn,null),Ii&&zi);(0,Lt.useImperativeHandle)(lt,(()=>pe.current));const[Ui]=(0,Wa.A)("Calendar",$a.A),$i=Object.assign(Object.assign({},Ui),at.locale),[qi]=(0,da.YK)("DatePicker",null===(Rt=at.popupStyle)||void 0===Rt?void 0:Rt.zIndex);return di(Lt.createElement(ha.A,{"space":!0},Lt.createElement(Zr,Object.assign({"separator":Lt.createElement("span",{"aria-label":"to","className":`${je}-separator`},Lt.createElement(Cn,null)),"disabled":Mi,"ref":pe,"placement":te,"placeholder":getRangePlaceholder($i,de,oe),"suffixIcon":Wi,"prevIcon":Lt.createElement("span",{"className":`${je}-prev-icon`}),"nextIcon":Lt.createElement("span",{"className":`${je}-next-icon`}),"superPrevIcon":Lt.createElement("span",{"className":`${je}-super-prev-icon`}),"superNextIcon":Lt.createElement("span",{"className":`${je}-super-next-icon`}),"transitionName":`${Ge}-slide-up`,"picker":de},fe,{"className":Tn()({[`${je}-${_i}`]:_i,[`${je}-${ti}`]:li},(0,fa.L)(je,(0,fa.v)(Bi,ue),Ii),fi,Ve,$t,null==Ce?void 0:Ce.className,pi,hi,ce),"style":Object.assign(Object.assign({},null==Ce?void 0:Ce.style),Kt),"locale":$i.lang,"prefixCls":je,"getPopupContainer":Ht||we,"generateConfig":nt,"components":mi,"direction":Ae,"classNames":{"popup":Tn()(fi,se||le,pi,hi,ce)},"styles":{"popup":Object.assign(Object.assign({},at.popupStyle),{"zIndex":qi})},"allowClear":vi}))))}));return at},generateSinglePicker_rest=function(nt,at){var lt={};for(var Rt in nt)Object.prototype.hasOwnProperty.call(nt,Rt)&&at.indexOf(Rt)<0&&(lt[Rt]=nt[Rt]);if(null!=nt&&"function"==typeof Object.getOwnPropertySymbols){var Bt=0;for(Rt=Object.getOwnPropertySymbols(nt);Bt<Rt.length;Bt++)at.indexOf(Rt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(nt,Rt[Bt])&&(lt[Rt[Bt]]=nt[Rt[Bt]])}return lt};var generateSinglePicker=nt=>{const getPicker=(at,lt)=>{const Rt=lt===ds?"timePicker":"datePicker",Bt=(0,Lt.forwardRef)(((lt,Bt)=>{var Ht;const{"prefixCls":jt,"getPopupContainer":$t,"components":Kt,"style":te,"className":ne,"rootClassName":re,"size":ae,"bordered":oe,"placement":se,"placeholder":le,"popupClassName":ue,"dropdownClassName":ce,"disabled":he,"status":de,"variant":fe,"onCalendarChange":pe}=lt,ve=generateSinglePicker_rest(lt,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{"getPrefixCls":Ae,"direction":we,"getPopupContainer":Ce,[Rt]:je}=(0,Lt.useContext)(pa.QO),Ne=Ae("picker",jt),{"compactSize":Ve,"compactItemClassnames":Ge}=(0,Ga.RQ)(Ne,we),ti=Lt.useRef(null),[li,hi]=(0,Ba.A)("datePicker",fe,oe),di=(0,ma.A)(Ne),[fi,pi,vi]=Do(Ne,di);(0,Lt.useImperativeHandle)(Bt,(()=>ti.current));const mi=at||lt.picker,_i=Ae(),{"onSelect":bi,"multiple":Mi}=ve,Ti=bi&&"time"===at&&!Mi;const[Ii,Bi]=util_useIcons(lt,Ne),zi=useComponents(Kt),Wi=(0,Ea.A)((nt=>{var at;return null!==(at=null!=ae?ae:Ve)&&void 0!==at?at:nt})),Ui=Lt.useContext(va.A),$i=null!=he?he:Ui,qi=(0,Lt.useContext)(Pa.$W),{"hasFeedback":Ki,"status":Qi,"feedbackIcon":Ji}=qi,dn=Lt.createElement(Lt.Fragment,null,"time"===mi?Lt.createElement(Sn,null):Lt.createElement(bn,null),Ki&&Ji),[fn]=(0,Wa.A)("DatePicker",$a.A),vn=Object.assign(Object.assign({},fn),lt.locale),[gn]=(0,da.YK)("DatePicker",null===(Ht=lt.popupStyle)||void 0===Ht?void 0:Ht.zIndex);return fi(Lt.createElement(ha.A,{"space":!0},Lt.createElement(ca,Object.assign({"ref":ti,"placeholder":getPlaceholder(vn,mi,le),"suffixIcon":dn,"placement":se,"prevIcon":Lt.createElement("span",{"className":`${Ne}-prev-icon`}),"nextIcon":Lt.createElement("span",{"className":`${Ne}-next-icon`}),"superPrevIcon":Lt.createElement("span",{"className":`${Ne}-super-prev-icon`}),"superNextIcon":Lt.createElement("span",{"className":`${Ne}-super-next-icon`}),"transitionName":`${_i}-slide-up`,"picker":at,"onCalendarChange":(nt,at,lt)=>{null==pe||pe(nt,at,lt),Ti&&bi(nt)}},{"showToday":!0},ve,{"locale":vn.lang,"className":Tn()({[`${Ne}-${Wi}`]:Wi,[`${Ne}-${li}`]:hi},(0,fa.L)(Ne,(0,fa.v)(Qi,de),Ki),pi,Ge,null==je?void 0:je.className,ne,vi,di,re),"style":Object.assign(Object.assign({},null==je?void 0:je.style),te),"prefixCls":Ne,"getPopupContainer":$t||Ce,"generateConfig":nt,"components":zi,"direction":we,"disabled":$i,"classNames":{"popup":Tn()(pi,vi,di,re,ue||ce)},"styles":{"popup":Object.assign(Object.assign({},lt.popupStyle),{"zIndex":gn})},"allowClear":Ii,"removeIcon":Bi}))))}));return Bt},at=getPicker(),lt=getPicker($o,ts),Rt=getPicker(ns,os),Bt=getPicker(ss,ls),Ht=getPicker(us,cs);return{"DatePicker":at,"WeekPicker":lt,"MonthPicker":Rt,"YearPicker":Bt,"TimePicker":getPicker(hs,ds),"QuarterPicker":Ht}};var date_picker_generatePicker=nt=>{const{"DatePicker":at,"WeekPicker":lt,"MonthPicker":Rt,"YearPicker":Bt,"TimePicker":Lt,"QuarterPicker":Ht}=generateSinglePicker(nt),jt=generatePicker_generateRangePicker(nt),$t=at;return $t.WeekPicker=lt,$t.MonthPicker=Rt,$t.YearPicker=Bt,$t.RangePicker=jt,$t.TimePicker=Lt,$t.QuarterPicker=Ht,$t};const bs=date_picker_generatePicker(fn),ks=(0,vn.A)(bs,"popupAlign",void 0,"picker");bs._InternalPanelDoNotUseOrYouWillBeFired=ks;const Ss=(0,vn.A)(bs.RangePicker,"popupAlign",void 0,"picker");bs._InternalRangePanelDoNotUseOrYouWillBeFired=Ss,bs.generatePicker=date_picker_generatePicker;var As=bs,ws=lt(9812),Cs=lt(8071),Ms=lt(2851),Ts=lt(2806),Es=lt(6070),Ps={"type":"bar","data":{"values":[]},"xField":"value","yField":["month","day"],"seriesField":"day","direction":"horizontal","axes":[{"orient":"bottom","visible":!1}],"label":{"visible":!0}};function chart_YearPanel(nt){var at=nt.data,lt=nt.onYearChange;return(0,Es.jsx)(vi.A,{"justify":"flex-end","gap":"small","children":(0,Es.jsx)(As,{"picker":"year","defaultValue":at,"onChange":function onChange(nt){return lt(nt)},"suffixIcon":""})})}var Rs=function genDataByYear(nt){var at=new Map;return nt.forEach((function(nt){var lt=(0,Ts.QJ)(nt.createTime,"YYYY");at.has(lt)||at.set(lt,[]),at.get(lt).push(nt)})),at};function Chart(){var nt=(0,Ms.A)().data,at=(0,Lt.useMemo)((function(){return Rs(nt)}),[nt]),lt=(0,Lt.useState)([]),Ht=(0,Bt.A)(lt,2),jt=Ht[0],$t=Ht[1],Kt=(0,Lt.useState)((0,Ts.Cp)()),te=(0,Bt.A)(Kt,2),ne=te[0],ae=te[1];(0,Lt.useEffect)((function(){var nt=(0,Ts.QJ)(ne,"YYYY");$t((function(){return at.has(nt)?at.get(nt):[]}))}),[ne]);var oe=(0,Lt.useMemo)((function(){return(0,Rt.A)((0,Rt.A)({},Ps),{},{"data":{"values":jt.map((function(nt){var at=nt.createTime,lt=nt.total;return{"month":(0,Ts.QJ)(at,"MM"),"value":lt,"day":(0,Ts.QJ)(at,"DD")}}))}})}),[jt]);return(0,Es.jsxs)(re.Ss,{"className":"chart-page","children":[(0,Es.jsx)(Cs.A,{"offsetBottom":20,"children":(0,Es.jsx)(re.Ss,{"className":"chart-header","children":(0,Es.jsx)(chart_YearPanel,{"data":ne,"onYearChange":function onYearChange(nt){return ae(nt)}})})}),0===jt.length&&(0,Es.jsx)(ws.A,{"image":ws.A.PRESENTED_IMAGE_SIMPLE,"description":"no data"}),jt.length>0&&(0,Es.jsx)(re.Ss,{"className":"chart-content","children":(0,Es.jsx)(re.Ss,{"className":"chart-content-container","children":(0,Es.jsx)(VChart,{"type":"WEB"===(0,fi._$)()?"h5":"weapp","style":{"width":"100%","height":(0,fi.n_)(500)},"spec":oe,"canvasId":"bar-chart","onChartReady":function onChartReady(){}})})})]})}},"9207":function(nt,at,lt){"use strict";lt.d(at,{"c7":function(){return te},"rh":function(){return Kt}});var Rt=lt(3691),Bt=lt(8299),Lt=lt(3148),Ht=lt(996);function getItem(nt){var at;try{at=JSON.parse(localStorage.getItem(nt)||"")}catch(nt){}return at&&"object"===(0,Bt.A)(at)&&at.hasOwnProperty("data")?{"result":!0,"data":at.data}:{"result":!1}}var jt=function setStorage(nt){var at=(0,Lt._S)(nt);if(!at.flag){var lt={"errMsg":"setStorage:fail ".concat(at.msg)};return console.error(lt.errMsg),Promise.reject(lt)}var Rt=nt.key,jt=nt.data,$t=nt.success,Kt=nt.fail,te=nt.complete,ne=new Ht._({"name":"setStorage","success":$t,"fail":Kt,"complete":te});return"string"!=typeof Rt?ne.fail({"errMsg":(0,Lt.m2)({"para":"key","correct":"String","wrong":Rt})}):(function setStorageSync(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof nt){var lt={};lt="symbol"===(0,Bt.A)(at)?{"data":""}:{"data":at},localStorage.setItem(nt,JSON.stringify(lt))}else console.error((0,Lt.m2)({"name":"setStorage","correct":"String","wrong":nt}))}(Rt,jt),ne.success())},$t=function getStorageSync(nt){if("string"==typeof nt){var at=getItem(nt);return at.result?at.data:""}console.error((0,Lt.m2)({"name":"getStorageSync","correct":"String","wrong":nt}))};function storage_setStorage(nt,at){try{jt({"key":nt,"data":at})}catch(nt){console.error(nt)}}var Kt=function setArrayStorage(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Bt=$t(nt);if(Bt)if(lt.replace)storage_setStorage(nt,at);else{var Lt=Array.isArray(Bt)?Bt:[Bt];storage_setStorage(nt,[].concat((0,Rt.A)(Lt),[at]))}else storage_setStorage(nt,Array.isArray(at)?at:[at])},te=function getStorage(nt){try{return $t(nt)}catch(nt){return console.error(nt),null}}},"2806":function(nt,at,lt){"use strict";lt.d(at,{"Cp":function(){return te},"Gq":function(){return Ht},"QJ":function(){return Kt},"fU":function(){return ne},"fm":function(){return $t},"iG":function(){return jt}});var Rt=lt(9859),Bt=lt(6287),Lt=lt.n(Bt),Ht=function getToday(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY MD";return Lt()().format(nt)},jt=function getNowTime(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD",at=Lt()().format(nt);return+Lt()(at)},$t=function transformDate(nt){var at=nt.match(/^(\d{4})?[.-/]?(\d{1,2})[.-/](\d{1,2})$/);if(at){var lt=(0,Rt.A)(at,4),Bt=(lt[0],lt[1]),Ht=void 0===Bt?Lt()().year():Bt,jt=lt[2],$t=lt[3];return"".concat(Ht,"-").concat(jt,"-").concat($t)}return null},Kt=function transformByPattern(nt,at){return Lt()(nt).format(at)},te=function getYear(){return Lt()(Ht(),"YYYY")},ne=function getYearTime(nt){return nt?+Lt()(nt):+Lt()()}},"6287":function(nt){nt.exports=function(){"use strict";var nt=1e3,at=6e4,lt=36e5,Rt="millisecond",Bt="second",Lt="minute",Ht="hour",jt="day",$t="week",Kt="month",te="quarter",ne="year",re="date",ae="Invalid Date",oe=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,se=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,le={"name":"en","weekdays":"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"months":"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"ordinal":function(nt){var at=["th","st","nd","rd"],lt=nt%100;return"["+nt+(at[(lt-20)%10]||at[lt]||at[0])+"]"}},m=function(nt,at,lt){var Rt=String(nt);return!Rt||Rt.length>=at?nt:""+Array(at+1-Rt.length).join(lt)+nt},ue={"s":m,"z":function(nt){var at=-nt.utcOffset(),lt=Math.abs(at),Rt=Math.floor(lt/60),Bt=lt%60;return(at<=0?"+":"-")+m(Rt,2,"0")+":"+m(Bt,2,"0")},"m":function t(nt,at){if(nt.date()<at.date())return-t(at,nt);var lt=12*(at.year()-nt.year())+(at.month()-nt.month()),Rt=nt.clone().add(lt,Kt),Bt=at-Rt<0,Lt=nt.clone().add(lt+(Bt?-1:1),Kt);return+(-(lt+(at-Rt)/(Bt?Rt-Lt:Lt-Rt))||0)},"a":function(nt){return nt<0?Math.ceil(nt)||0:Math.floor(nt)},"p":function(nt){return{"M":Kt,"y":ne,"w":$t,"d":jt,"D":re,"h":Ht,"m":Lt,"s":Bt,"ms":Rt,"Q":te}[nt]||String(nt||"").toLowerCase().replace(/s$/,"")},"u":function(nt){return void 0===nt}},ce="en",he={};he[ce]=le;var de="$isDayjsObject",S=function(nt){return nt instanceof ve||!(!nt||!nt[de])},fe=function t(nt,at,lt){var Rt;if(!nt)return ce;if("string"==typeof nt){var Bt=nt.toLowerCase();he[Bt]&&(Rt=Bt),at&&(he[Bt]=at,Rt=Bt);var Lt=nt.split("-");if(!Rt&&Lt.length>1)return t(Lt[0])}else{var Ht=nt.name;he[Ht]=nt,Rt=Ht}return!lt&&Rt&&(ce=Rt),Rt||!lt&&ce},O=function(nt,at){if(S(nt))return nt.clone();var lt="object"==typeof at?at:{};return lt.date=nt,lt.args=arguments,new ve(lt)},pe=ue;pe.l=fe,pe.i=S,pe.w=function(nt,at){return O(nt,{"locale":at.$L,"utc":at.$u,"x":at.$x,"$offset":at.$offset})};var ve=function(){function M(nt){this.$L=fe(nt.locale,null,!0),this.parse(nt),this.$x=this.$x||nt.x||{},this[de]=!0}var le=M.prototype;return le.parse=function(nt){this.$d=function(nt){var at=nt.date,lt=nt.utc;if(null===at)return new Date(NaN);if(pe.u(at))return new Date;if(at instanceof Date)return new Date(at);if("string"==typeof at&&!/Z$/i.test(at)){var Rt=at.match(oe);if(Rt){var Bt=Rt[2]-1||0,Lt=(Rt[7]||"0").substring(0,3);return lt?new Date(Date.UTC(Rt[1],Bt,Rt[3]||1,Rt[4]||0,Rt[5]||0,Rt[6]||0,Lt)):new Date(Rt[1],Bt,Rt[3]||1,Rt[4]||0,Rt[5]||0,Rt[6]||0,Lt)}}return new Date(at)}(nt),this.init()},le.init=function(){var nt=this.$d;this.$y=nt.getFullYear(),this.$M=nt.getMonth(),this.$D=nt.getDate(),this.$W=nt.getDay(),this.$H=nt.getHours(),this.$m=nt.getMinutes(),this.$s=nt.getSeconds(),this.$ms=nt.getMilliseconds()},le.$utils=function(){return pe},le.isValid=function(){return!(this.$d.toString()===ae)},le.isSame=function(nt,at){var lt=O(nt);return this.startOf(at)<=lt&&lt<=this.endOf(at)},le.isAfter=function(nt,at){return O(nt)<this.startOf(at)},le.isBefore=function(nt,at){return this.endOf(at)<O(nt)},le.$g=function(nt,at,lt){return pe.u(nt)?this[at]:this.set(lt,nt)},le.unix=function(){return Math.floor(this.valueOf()/1e3)},le.valueOf=function(){return this.$d.getTime()},le.startOf=function(nt,at){var lt=this,Rt=!!pe.u(at)||at,te=pe.p(nt),l=function(nt,at){var Bt=pe.w(lt.$u?Date.UTC(lt.$y,at,nt):new Date(lt.$y,at,nt),lt);return Rt?Bt:Bt.endOf(jt)},$=function(nt,at){return pe.w(lt.toDate()[nt].apply(lt.toDate("s"),(Rt?[0,0,0,0]:[23,59,59,999]).slice(at)),lt)},ae=this.$W,oe=this.$M,se=this.$D,le="set"+(this.$u?"UTC":"");switch(te){case ne:return Rt?l(1,0):l(31,11);case Kt:return Rt?l(1,oe):l(0,oe+1);case $t:var ue=this.$locale().weekStart||0,ce=(ae<ue?ae+7:ae)-ue;return l(Rt?se-ce:se+(6-ce),oe);case jt:case re:return $(le+"Hours",0);case Ht:return $(le+"Minutes",1);case Lt:return $(le+"Seconds",2);case Bt:return $(le+"Milliseconds",3);default:return this.clone()}},le.endOf=function(nt){return this.startOf(nt,!1)},le.$set=function(nt,at){var lt,$t=pe.p(nt),te="set"+(this.$u?"UTC":""),ae=(lt={},lt[jt]=te+"Date",lt[re]=te+"Date",lt[Kt]=te+"Month",lt[ne]=te+"FullYear",lt[Ht]=te+"Hours",lt[Lt]=te+"Minutes",lt[Bt]=te+"Seconds",lt[Rt]=te+"Milliseconds",lt)[$t],oe=$t===jt?this.$D+(at-this.$W):at;if($t===Kt||$t===ne){var se=this.clone().set(re,1);se.$d[ae](oe),se.init(),this.$d=se.set(re,Math.min(this.$D,se.daysInMonth())).$d}else ae&&this.$d[ae](oe);return this.init(),this},le.set=function(nt,at){return this.clone().$set(nt,at)},le.get=function(nt){return this[pe.p(nt)]()},le.add=function(Rt,te){var re,ae=this;Rt=Number(Rt);var oe=pe.p(te),y=function(nt){var at=O(ae);return pe.w(at.date(at.date()+Math.round(nt*Rt)),ae)};if(oe===Kt)return this.set(Kt,this.$M+Rt);if(oe===ne)return this.set(ne,this.$y+Rt);if(oe===jt)return y(1);if(oe===$t)return y(7);var se=(re={},re[Lt]=at,re[Ht]=lt,re[Bt]=nt,re)[oe]||1,le=this.$d.getTime()+Rt*se;return pe.w(le,this)},le.subtract=function(nt,at){return this.add(-1*nt,at)},le.format=function(nt){var at=this,lt=this.$locale();if(!this.isValid())return lt.invalidDate||ae;var Rt=nt||"YYYY-MM-DDTHH:mm:ssZ",Bt=pe.z(this),Lt=this.$H,Ht=this.$m,jt=this.$M,$t=lt.weekdays,Kt=lt.months,te=lt.meridiem,h=function(nt,lt,Bt,Lt){return nt&&(nt[lt]||nt(at,Rt))||Bt[lt].slice(0,Lt)},d=function(nt){return pe.s(Lt%12||12,nt,"0")},ne=te||function(nt,at,lt){var Rt=nt<12?"AM":"PM";return lt?Rt.toLowerCase():Rt};return Rt.replace(se,(function(nt,Rt){return Rt||function(nt){switch(nt){case"YY":return String(at.$y).slice(-2);case"YYYY":return pe.s(at.$y,4,"0");case"M":return jt+1;case"MM":return pe.s(jt+1,2,"0");case"MMM":return h(lt.monthsShort,jt,Kt,3);case"MMMM":return h(Kt,jt);case"D":return at.$D;case"DD":return pe.s(at.$D,2,"0");case"d":return String(at.$W);case"dd":return h(lt.weekdaysMin,at.$W,$t,2);case"ddd":return h(lt.weekdaysShort,at.$W,$t,3);case"dddd":return $t[at.$W];case"H":return String(Lt);case"HH":return pe.s(Lt,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return ne(Lt,Ht,!0);case"A":return ne(Lt,Ht,!1);case"m":return String(Ht);case"mm":return pe.s(Ht,2,"0");case"s":return String(at.$s);case"ss":return pe.s(at.$s,2,"0");case"SSS":return pe.s(at.$ms,3,"0");case"Z":return Bt}return null}(nt)||Bt.replace(":","")}))},le.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},le.diff=function(Rt,re,ae){var oe,se=this,le=pe.p(re),ue=O(Rt),ce=(ue.utcOffset()-this.utcOffset())*at,he=this-ue,D=function(){return pe.m(se,ue)};switch(le){case ne:oe=D()/12;break;case Kt:oe=D();break;case te:oe=D()/3;break;case $t:oe=(he-ce)/6048e5;break;case jt:oe=(he-ce)/864e5;break;case Ht:oe=he/lt;break;case Lt:oe=he/at;break;case Bt:oe=he/nt;break;default:oe=he}return ae?oe:pe.a(oe)},le.daysInMonth=function(){return this.endOf(Kt).$D},le.$locale=function(){return he[this.$L]},le.locale=function(nt,at){if(!nt)return this.$L;var lt=this.clone(),Rt=fe(nt,at,!0);return Rt&&(lt.$L=Rt),lt},le.clone=function(){return pe.w(this.$d,this)},le.toDate=function(){return new Date(this.valueOf())},le.toJSON=function(){return this.isValid()?this.toISOString():null},le.toISOString=function(){return this.$d.toISOString()},le.toString=function(){return this.$d.toUTCString()},M}(),Ae=ve.prototype;return O.prototype=Ae,[["$ms",Rt],["$s",Bt],["$m",Lt],["$H",Ht],["$W",jt],["$M",Kt],["$y",ne],["$D",re]].forEach((function(nt){Ae[nt[1]]=function(at){return this.$g(at,nt[0],nt[1])}})),O.extend=function(nt,at){return nt.$i||(nt(at,ve,O),nt.$i=!0),O},O.locale=fe,O.isDayjs=S,O.unix=function(nt){return O(1e3*nt)},O.en=he[ce],O.Ls=he,O.p={},O}()},"8353":function(nt){nt.exports=function(){"use strict";return function(nt,at){var lt=at.prototype,Rt=lt.format;lt.format=function(nt){var at=this,lt=this.$locale();if(!this.isValid())return Rt.bind(this)(nt);var Bt=this.$utils(),Lt=(nt||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(nt){switch(nt){case"Q":return Math.ceil((at.$M+1)/3);case"Do":return lt.ordinal(at.$D);case"gggg":return at.weekYear();case"GGGG":return at.isoWeekYear();case"wo":return lt.ordinal(at.week(),"W");case"w":case"ww":return Bt.s(at.week(),"w"===nt?1:2,"0");case"W":case"WW":return Bt.s(at.isoWeek(),"W"===nt?1:2,"0");case"k":case"kk":return Bt.s(String(0===at.$H?24:at.$H),"k"===nt?1:2,"0");case"X":return Math.floor(at.$d.getTime()/1e3);case"x":return at.$d.getTime();case"z":return"["+at.offsetName()+"]";case"zzz":return"["+at.offsetName("long")+"]";default:return nt}}));return Rt.bind(this)(Lt)}}}()},"1707":function(nt){nt.exports=function(){"use strict";var nt={"LTS":"h:mm:ss A","LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D, YYYY","LLL":"MMMM D, YYYY h:mm A","LLLL":"dddd, MMMM D, YYYY h:mm A"},at=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,lt=/\d/,Rt=/\d\d/,Bt=/\d\d?/,Lt=/\d*[^-_:/,()\s\d]+/,Ht={},a=function(nt){return(nt=+nt)+(nt>68?1900:2e3)},f=function(nt){return function(at){this[nt]=+at}},jt=[/[+-]\d\d:?(\d\d)?|Z/,function(nt){(this.zone||(this.zone={})).offset=function(nt){if(!nt)return 0;if("Z"===nt)return 0;var at=nt.match(/([+-]|\d\d)/g),lt=60*at[1]+(+at[2]||0);return 0===lt?0:"+"===at[0]?-lt:lt}(nt)}],u=function(nt){var at=Ht[nt];return at&&(at.indexOf?at:at.s.concat(at.f))},d=function(nt,at){var lt,Rt=Ht.meridiem;if(Rt){for(var Bt=1;Bt<=24;Bt+=1)if(nt.indexOf(Rt(Bt,0,at))>-1){lt=Bt>12;break}}else lt=nt===(at?"pm":"PM");return lt},$t={"A":[Lt,function(nt){this.afternoon=d(nt,!1)}],"a":[Lt,function(nt){this.afternoon=d(nt,!0)}],"Q":[lt,function(nt){this.month=3*(nt-1)+1}],"S":[lt,function(nt){this.milliseconds=100*+nt}],"SS":[Rt,function(nt){this.milliseconds=10*+nt}],"SSS":[/\d{3}/,function(nt){this.milliseconds=+nt}],"s":[Bt,f("seconds")],"ss":[Bt,f("seconds")],"m":[Bt,f("minutes")],"mm":[Bt,f("minutes")],"H":[Bt,f("hours")],"h":[Bt,f("hours")],"HH":[Bt,f("hours")],"hh":[Bt,f("hours")],"D":[Bt,f("day")],"DD":[Rt,f("day")],"Do":[Lt,function(nt){var at=Ht.ordinal,lt=nt.match(/\d+/);if(this.day=lt[0],at)for(var Rt=1;Rt<=31;Rt+=1)at(Rt).replace(/\[|\]/g,"")===nt&&(this.day=Rt)}],"w":[Bt,f("week")],"ww":[Rt,f("week")],"M":[Bt,f("month")],"MM":[Rt,f("month")],"MMM":[Lt,function(nt){var at=u("months"),lt=(u("monthsShort")||at.map((function(nt){return nt.slice(0,3)}))).indexOf(nt)+1;if(lt<1)throw new Error;this.month=lt%12||lt}],"MMMM":[Lt,function(nt){var at=u("months").indexOf(nt)+1;if(at<1)throw new Error;this.month=at%12||at}],"Y":[/[+-]?\d+/,f("year")],"YY":[Rt,function(nt){this.year=a(nt)}],"YYYY":[/\d{4}/,f("year")],"Z":jt,"ZZ":jt};function l(lt){var Rt,Bt;Rt=lt,Bt=Ht&&Ht.formats;for(var Lt=(lt=Rt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(at,lt,Rt){var Lt=Rt&&Rt.toUpperCase();return lt||Bt[Rt]||nt[Rt]||Bt[Lt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(nt,at,lt){return at||lt.slice(1)}))}))).match(at),jt=Lt.length,Kt=0;Kt<jt;Kt+=1){var te=Lt[Kt],ne=$t[te],re=ne&&ne[0],ae=ne&&ne[1];Lt[Kt]=ae?{"regex":re,"parser":ae}:te.replace(/^\[|\]$/g,"")}return function(nt){for(var at={},lt=0,Rt=0;lt<jt;lt+=1){var Bt=Lt[lt];if("string"==typeof Bt)Rt+=Bt.length;else{var Ht=Bt.regex,$t=Bt.parser,Kt=nt.slice(Rt),te=Ht.exec(Kt)[0];$t.call(at,te),nt=nt.replace(te,"")}}return function(nt){var at=nt.afternoon;if(void 0!==at){var lt=nt.hours;at?lt<12&&(nt.hours+=12):12===lt&&(nt.hours=0),delete nt.afternoon}}(at),at}}return function(nt,at,lt){lt.p.customParseFormat=!0,nt&&nt.parseTwoDigitYear&&(a=nt.parseTwoDigitYear);var Rt=at.prototype,Bt=Rt.parse;Rt.parse=function(nt){var at=nt.date,Rt=nt.utc,Lt=nt.args;this.$u=Rt;var jt=Lt[1];if("string"==typeof jt){var $t=!0===Lt[2],Kt=!0===Lt[3],te=$t||Kt,ne=Lt[2];Kt&&(ne=Lt[2]),Ht=this.$locale(),!$t&&ne&&(Ht=lt.Ls[ne]),this.$d=function(nt,at,lt,Rt){try{if(["x","X"].indexOf(at)>-1)return new Date(("X"===at?1e3:1)*nt);var Bt=l(at)(nt),Lt=Bt.year,Ht=Bt.month,jt=Bt.day,$t=Bt.hours,Kt=Bt.minutes,te=Bt.seconds,ne=Bt.milliseconds,re=Bt.zone,ae=Bt.week,oe=new Date,se=jt||(Lt||Ht?1:oe.getDate()),le=Lt||oe.getFullYear(),ue=0;Lt&&!Ht||(ue=Ht>0?Ht-1:oe.getMonth());var ce,he=$t||0,de=Kt||0,fe=te||0,pe=ne||0;return re?new Date(Date.UTC(le,ue,se,he,de,fe,pe+60*re.offset*1e3)):lt?new Date(Date.UTC(le,ue,se,he,de,fe,pe)):(ce=new Date(le,ue,se,he,de,fe,pe),ae&&(ce=Rt(ce).week(ae).toDate()),ce)}catch(nt){return new Date("")}}(at,jt,Rt,lt),this.init(),ne&&!0!==ne&&(this.$L=this.locale(ne).$L),te&&at!=this.format(jt)&&(this.$d=new Date("")),Ht={}}else if(jt instanceof Array)for(var re=jt.length,ae=1;ae<=re;ae+=1){Lt[1]=jt[ae-1];var oe=lt.apply(this,Lt);if(oe.isValid()){this.$d=oe.$d,this.$L=oe.$L,this.init();break}ae===re&&(this.$d=new Date(""))}else Bt.call(this,nt)}}}()},"7434":function(nt){nt.exports=function(){"use strict";return function(nt,at,lt){var Rt=at.prototype,o=function(nt){return nt&&(nt.indexOf?nt:nt.s)},u=function(nt,at,lt,Rt,Bt){var Lt=nt.name?nt:nt.$locale(),Ht=o(Lt[at]),jt=o(Lt[lt]),$t=Ht||jt.map((function(nt){return nt.slice(0,Rt)}));if(!Bt)return $t;var Kt=Lt.weekStart;return $t.map((function(nt,at){return $t[(at+(Kt||0))%7]}))},i=function(){return lt.Ls[lt.locale()]},a=function(nt,at){return nt.formats[at]||function(nt){return nt.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(nt,at,lt){return at||lt.slice(1)}))}(nt.formats[at.toUpperCase()])},s=function(){var nt=this;return{"months":function(at){return at?at.format("MMMM"):u(nt,"months")},"monthsShort":function(at){return at?at.format("MMM"):u(nt,"monthsShort","months",3)},"firstDayOfWeek":function(){return nt.$locale().weekStart||0},"weekdays":function(at){return at?at.format("dddd"):u(nt,"weekdays")},"weekdaysMin":function(at){return at?at.format("dd"):u(nt,"weekdaysMin","weekdays",2)},"weekdaysShort":function(at){return at?at.format("ddd"):u(nt,"weekdaysShort","weekdays",3)},"longDateFormat":function(at){return a(nt.$locale(),at)},"meridiem":this.$locale().meridiem,"ordinal":this.$locale().ordinal}};Rt.localeData=function(){return s.bind(this)()},lt.localeData=function(){var nt=i();return{"firstDayOfWeek":function(){return nt.weekStart||0},"weekdays":function(){return lt.weekdays()},"weekdaysShort":function(){return lt.weekdaysShort()},"weekdaysMin":function(){return lt.weekdaysMin()},"months":function(){return lt.months()},"monthsShort":function(){return lt.monthsShort()},"longDateFormat":function(at){return a(nt,at)},"meridiem":nt.meridiem,"ordinal":nt.ordinal}},lt.months=function(){return u(i(),"months")},lt.monthsShort=function(){return u(i(),"monthsShort","months",3)},lt.weekdays=function(nt){return u(i(),"weekdays",null,null,nt)},lt.weekdaysShort=function(nt){return u(i(),"weekdaysShort","weekdays",3,nt)},lt.weekdaysMin=function(nt){return u(i(),"weekdaysMin","weekdays",2,nt)}}}()},"3652":function(nt){nt.exports=function(){"use strict";var nt="week",at="year";return function(lt,Rt,Bt){var Lt=Rt.prototype;Lt.week=function(lt){if(void 0===lt&&(lt=null),null!==lt)return this.add(7*(lt-this.week()),"day");var Rt=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var Lt=Bt(this).startOf(at).add(1,at).date(Rt),Ht=Bt(this).endOf(nt);if(Lt.isBefore(Ht))return 1}var jt=Bt(this).startOf(at).date(Rt).startOf(nt).subtract(1,"millisecond"),$t=this.diff(jt,nt,!0);return $t<0?Bt(this).startOf("week").week():Math.ceil($t)},Lt.weeks=function(nt){return void 0===nt&&(nt=null),this.week(nt)}}}()},"9045":function(nt){nt.exports=function(){"use strict";return function(nt,at){at.prototype.weekYear=function(){var nt=this.month(),at=this.week(),lt=this.year();return 1===at&&11===nt?lt+1:0===nt&&at>=52?lt-1:lt}}}()},"5040":function(nt){nt.exports=function(){"use strict";return function(nt,at){at.prototype.weekday=function(nt){var at=this.$locale().weekStart||0,lt=this.$W,Rt=(lt<at?lt+7:lt)-at;return this.$utils().u(nt)?Rt:this.subtract(Rt,"day").add(nt,"day")}}}()},"2282":function(nt,at,lt){var Rt;nt=lt.nmd(nt),function(){"use strict";var Bt={"function":!0,"object":!0},Lt=Bt[typeof window]&&window||this,Ht=Bt[typeof at]&&at,jt=Bt.object&&nt&&!nt.nodeType&&nt,$t=Ht&&jt&&"object"==typeof lt.g&&lt.g;!$t||$t.global!==$t&&$t.window!==$t&&$t.self!==$t||(Lt=$t);var Kt=Math.pow(2,53)-1,te=/\bOpera/,ne=Object.prototype,re=ne.hasOwnProperty,ae=ne.toString;function capitalize(nt){return(nt=String(nt)).charAt(0).toUpperCase()+nt.slice(1)}function format(nt){return nt=trim(nt),/^(?:webOS|i(?:OS|P))/.test(nt)?nt:capitalize(nt)}function forOwn(nt,at){for(var lt in nt)re.call(nt,lt)&&at(nt[lt],lt,nt)}function getClassOf(nt){return null==nt?capitalize(nt):ae.call(nt).slice(8,-1)}function qualify(nt){return String(nt).replace(/([ -])(?!$)/g,"$1?")}function reduce(nt,at){var lt=null;return function each(nt,at){var lt=-1,Rt=nt?nt.length:0;if("number"==typeof Rt&&Rt>-1&&Rt<=Kt)for(;++lt<Rt;)at(nt[lt],lt,nt);else forOwn(nt,at)}(nt,(function(Rt,Bt){lt=at(lt,Rt,Bt,nt)})),lt}function trim(nt){return String(nt).replace(/^ +| +$/g,"")}var oe=function parse(nt){var at=Lt,lt=nt&&"object"==typeof nt&&"String"!=getClassOf(nt);lt&&(at=nt,nt=null);var Rt=at.navigator||{},Bt=Rt.userAgent||"";nt||(nt=Bt);var Ht,jt,$t=lt?!!Rt.likeChrome:/\bChrome\b/.test(nt)&&!/internal|\n/i.test(ae.toString()),Kt="Object",ne=lt?Kt:"ScriptBridgingProxyObject",re=lt?Kt:"Environment",oe=lt&&at.java?"JavaPackage":getClassOf(at.java),se=lt?Kt:"RuntimeObject",le=/\bJava/.test(oe)&&at.java,ue=le&&getClassOf(at.environment)==re,ce=le?"a":"",he=le?"b":"",de=at.document||{},fe=at.operamini||at.opera,pe=te.test(pe=lt&&fe?fe["[[Class]]"]:getClassOf(fe))?pe:fe=null,ve=nt,Ae=[],we=null,Ce=nt==Bt,je=Ce&&fe&&"function"==typeof fe.version&&fe.version(),Ne=function getLayout(at){return reduce(at,(function(at,lt){return at||RegExp("\\b"+(lt.pattern||qualify(lt))+"\\b","i").exec(nt)&&(lt.label||lt)}))}([{"label":"EdgeHTML","pattern":"Edge"},"Trident",{"label":"WebKit","pattern":"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Ve=function getName(at){return reduce(at,(function(at,lt){return at||RegExp("\\b"+(lt.pattern||qualify(lt))+"\\b","i").exec(nt)&&(lt.label||lt)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{"label":"Microsoft Edge","pattern":"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{"label":"Samsung Internet","pattern":"SamsungBrowser"},"SeaMonkey",{"label":"Silk","pattern":"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{"label":"SRWare Iron","pattern":"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{"label":"Yandex Browser","pattern":"YaBrowser"},{"label":"UC Browser","pattern":"UCBrowser"},"Opera Mini",{"label":"Opera Mini","pattern":"OPiOS"},"Opera",{"label":"Opera","pattern":"OPR"},"Chromium","Chrome",{"label":"Chrome","pattern":"(?:HeadlessChrome)"},{"label":"Chrome Mobile","pattern":"(?:CriOS|CrMo)"},{"label":"Firefox","pattern":"(?:Firefox|Minefield)"},{"label":"Firefox for iOS","pattern":"FxiOS"},{"label":"IE","pattern":"IEMobile"},{"label":"IE","pattern":"MSIE"},"Safari"]),Ge=getProduct([{"label":"BlackBerry","pattern":"BB10"},"BlackBerry",{"label":"Galaxy S","pattern":"GT-I9000"},{"label":"Galaxy S2","pattern":"GT-I9100"},{"label":"Galaxy S3","pattern":"GT-I9300"},{"label":"Galaxy S4","pattern":"GT-I9500"},{"label":"Galaxy S5","pattern":"SM-G900"},{"label":"Galaxy S6","pattern":"SM-G920"},{"label":"Galaxy S6 Edge","pattern":"SM-G925"},{"label":"Galaxy S7","pattern":"SM-G930"},{"label":"Galaxy S7 Edge","pattern":"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{"label":"Kindle Fire","pattern":"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{"label":"Wii U","pattern":"WiiU"},"Wii","Xbox One",{"label":"Xbox 360","pattern":"Xbox"},"Xoom"]),ti=function getManufacturer(at){return reduce(at,(function(at,lt,Rt){return at||(lt[Ge]||lt[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Ge)]||RegExp("\\b"+qualify(Rt)+"(?:\\b|\\w*\\d)","i").exec(nt))&&Rt}))}({"Apple":{"iPad":1,"iPhone":1,"iPod":1},"Alcatel":{},"Archos":{},"Amazon":{"Kindle":1,"Kindle Fire":1},"Asus":{"Transformer":1},"Barnes & Noble":{"Nook":1},"BlackBerry":{"PlayBook":1},"Google":{"Google TV":1,"Nexus":1},"HP":{"TouchPad":1},"HTC":{},"Huawei":{},"Lenovo":{},"LG":{},"Microsoft":{"Xbox":1,"Xbox One":1},"Motorola":{"Xoom":1},"Nintendo":{"Wii U":1,"Wii":1},"Nokia":{"Lumia":1},"Oppo":{},"Samsung":{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},"Sony":{"PlayStation":1,"PlayStation Vita":1},"Xiaomi":{"Mi":1,"Redmi":1}}),li=function getOS(at){return reduce(at,(function(at,lt){var Rt=lt.pattern||qualify(lt);return!at&&(at=RegExp("\\b"+Rt+"(?:/[\\d.]+|[ \\w.]*)","i").exec(nt))&&(at=function cleanupOS(nt,at,lt){var Rt={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return at&&lt&&/^Win/i.test(nt)&&!/^Windows Phone /i.test(nt)&&(Rt=Rt[/[\d.]+$/.exec(nt)])&&(nt="Windows "+Rt),nt=String(nt),at&&lt&&(nt=nt.replace(RegExp(at,"i"),lt)),format(nt.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(at,Rt,lt.label||lt)),at}))}(["Windows Phone","KaiOS","Android","CentOS",{"label":"Chrome OS","pattern":"CrOS"},"Debian",{"label":"DragonFly BSD","pattern":"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getProduct(at){return reduce(at,(function(at,lt){var Rt=lt.pattern||qualify(lt);return!at&&(at=RegExp("\\b"+Rt+" *\\d+[.\\w_]*","i").exec(nt)||RegExp("\\b"+Rt+" *\\w+-[\\w]*","i").exec(nt)||RegExp("\\b"+Rt+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(nt))&&((at=String(lt.label&&!RegExp(Rt,"i").test(lt.label)?lt.label:at).split("/"))[1]&&!/[\d.]+/.test(at[0])&&(at[0]+=" "+at[1]),lt=lt.label||lt,at=format(at[0].replace(RegExp(Rt,"i"),lt).replace(RegExp("; *(?:"+lt+"[_-])?","i")," ").replace(RegExp("("+lt+")[-_.]?(\\w)","i"),"$1 $2"))),at}))}function getVersion(at){return reduce(at,(function(at,lt){return at||(RegExp(lt+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(nt)||0)[1]||null}))}if(Ne&&(Ne=[Ne]),/\bAndroid\b/.test(li)&&!Ge&&(Ht=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(nt))&&(Ge=trim(Ht[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),ti&&!Ge?Ge=getProduct([ti]):ti&&Ge&&(Ge=Ge.replace(RegExp("^("+qualify(ti)+")[-_.\\s]","i"),ti+" ").replace(RegExp("^("+qualify(ti)+")[-_.]?(\\w)","i"),ti+" $2")),(Ht=/\bGoogle TV\b/.exec(Ge))&&(Ge=Ht[0]),/\bSimulator\b/i.test(nt)&&(Ge=(Ge?Ge+" ":"")+"Simulator"),"Opera Mini"==Ve&&/\bOPiOS\b/.test(nt)&&Ae.push("running in Turbo/Uncompressed mode"),"IE"==Ve&&/\blike iPhone OS\b/.test(nt)?(ti=(Ht=parse(nt.replace(/like iPhone OS/,""))).manufacturer,Ge=Ht.product):/^iP/.test(Ge)?(Ve||(Ve="Safari"),li="iOS"+((Ht=/ OS ([\d_]+)/i.exec(nt))?" "+Ht[1].replace(/_/g,"."):"")):"Konqueror"==Ve&&/^Linux\b/i.test(li)?li="Kubuntu":ti&&"Google"!=ti&&(/Chrome/.test(Ve)&&!/\bMobile Safari\b/i.test(nt)||/\bVita\b/.test(Ge))||/\bAndroid\b/.test(li)&&/^Chrome/.test(Ve)&&/\bVersion\//i.test(nt)?(Ve="Android Browser",li=/\bAndroid\b/.test(li)?li:"Android"):"Silk"==Ve?(/\bMobi/i.test(nt)||(li="Android",Ae.unshift("desktop mode")),/Accelerated *= *true/i.test(nt)&&Ae.unshift("accelerated")):"UC Browser"==Ve&&/\bUCWEB\b/.test(nt)?Ae.push("speed mode"):"PaleMoon"==Ve&&(Ht=/\bFirefox\/([\d.]+)\b/.exec(nt))?Ae.push("identifying as Firefox "+Ht[1]):"Firefox"==Ve&&(Ht=/\b(Mobile|Tablet|TV)\b/i.exec(nt))?(li||(li="Firefox OS"),Ge||(Ge=Ht[1])):!Ve||(Ht=!/\bMinefield\b/i.test(nt)&&/\b(?:Firefox|Safari)\b/.exec(Ve))?(Ve&&!Ge&&/[\/,]|^[^(]+?\)/.test(nt.slice(nt.indexOf(Ht+"/")+8))&&(Ve=null),(Ht=Ge||ti||li)&&(Ge||ti||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(li))&&(Ve=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(li)?li:Ht)+" Browser")):"Electron"==Ve&&(Ht=(/\bChrome\/([\d.]+)\b/.exec(nt)||0)[1])&&Ae.push("Chromium "+Ht),je||(je=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",qualify(Ve),"(?:Firefox|Minefield|NetFront)"])),(Ht=("iCab"==Ne&&parseFloat(je)>3?"WebKit":/\bOpera\b/.test(Ve)&&(/\bOPR\b/.test(nt)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(nt)&&!/^(?:Trident|EdgeHTML)$/.test(Ne)&&"WebKit"||!Ne&&/\bMSIE\b/i.test(nt)&&("Mac OS"==li?"Tasman":"Trident")||"WebKit"==Ne&&/\bPlayStation\b(?! Vita\b)/i.test(Ve)&&"NetFront")&&(Ne=[Ht]),"IE"==Ve&&(Ht=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(nt)||0)[1])?(Ve+=" Mobile",li="Windows Phone "+(/\+$/.test(Ht)?Ht:Ht+".x"),Ae.unshift("desktop mode")):/\bWPDesktop\b/i.test(nt)?(Ve="IE Mobile",li="Windows Phone 8.x",Ae.unshift("desktop mode"),je||(je=(/\brv:([\d.]+)/.exec(nt)||0)[1])):"IE"!=Ve&&"Trident"==Ne&&(Ht=/\brv:([\d.]+)/.exec(nt))&&(Ve&&Ae.push("identifying as "+Ve+(je?" "+je:"")),Ve="IE",je=Ht[1]),Ce){if(function isHostType(nt,at){var lt=null!=nt?typeof nt[at]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(lt)||"object"==lt&&!nt[at])}(at,"global"))if(le&&(ve=(Ht=le.lang.System).getProperty("os.arch"),li=li||Ht.getProperty("os.name")+" "+Ht.getProperty("os.version")),ue){try{je=at.require("ringo/engine").version.join("."),Ve="RingoJS"}catch(nt){(Ht=at.system)&&Ht.global.system==at.system&&(Ve="Narwhal",li||(li=Ht[0].os||null))}Ve||(Ve="Rhino")}else"object"==typeof at.process&&!at.process.browser&&(Ht=at.process)&&("object"==typeof Ht.versions&&("string"==typeof Ht.versions.electron?(Ae.push("Node "+Ht.versions.node),Ve="Electron",je=Ht.versions.electron):"string"==typeof Ht.versions.nw&&(Ae.push("Chromium "+je,"Node "+Ht.versions.node),Ve="NW.js",je=Ht.versions.nw)),Ve||(Ve="Node.js",ve=Ht.arch,li=Ht.platform,je=(je=/[\d.]+/.exec(Ht.version))?je[0]:null));else getClassOf(Ht=at.runtime)==ne?(Ve="Adobe AIR",li=Ht.flash.system.Capabilities.os):getClassOf(Ht=at.phantom)==se?(Ve="PhantomJS",je=(Ht=Ht.version||null)&&Ht.major+"."+Ht.minor+"."+Ht.patch):"number"==typeof de.documentMode&&(Ht=/\bTrident\/(\d+)/i.exec(nt))?(je=[je,de.documentMode],(Ht=+Ht[1]+4)!=je[1]&&(Ae.push("IE "+je[1]+" mode"),Ne&&(Ne[1]=""),je[1]=Ht),je="IE"==Ve?String(je[1].toFixed(1)):je[0]):"number"==typeof de.documentMode&&/^(?:Chrome|Firefox)\b/.test(Ve)&&(Ae.push("masking as "+Ve+" "+je),Ve="IE",je="11.0",Ne=["Trident"],li="Windows");li=li&&format(li)}if(je&&(Ht=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(je)||/(?:alpha|beta)(?: ?\d)?/i.exec(nt+";"+(Ce&&Rt.appMinorVersion))||/\bMinefield\b/i.test(nt)&&"a")&&(we=/b/i.test(Ht)?"beta":"alpha",je=je.replace(RegExp(Ht+"\\+?$"),"")+("beta"==we?he:ce)+(/\d+\+?/.exec(Ht)||"")),"Fennec"==Ve||"Firefox"==Ve&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(li))Ve="Firefox Mobile";else if("Maxthon"==Ve&&je)je=je.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Ge))"Xbox 360"==Ge&&(li=null),"Xbox 360"==Ge&&/\bIEMobile\b/.test(nt)&&Ae.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(Ve)&&(!Ve||Ge||/Browser|Mobi/.test(Ve))||"Windows CE"!=li&&!/Mobi/i.test(nt))if("IE"==Ve&&Ce)try{null===at.external&&Ae.unshift("platform preview")}catch(nt){Ae.unshift("embedded")}else(/\bBlackBerry\b/.test(Ge)||/\bBB10\b/.test(nt))&&(Ht=(RegExp(Ge.replace(/ +/g," *")+"/([.\\d]+)","i").exec(nt)||0)[1]||je)?(li=((Ht=[Ht,/BB10/.test(nt)])[1]?(Ge=null,ti="BlackBerry"):"Device Software")+" "+Ht[0],je=null):this!=forOwn&&"Wii"!=Ge&&(Ce&&fe||/Opera/.test(Ve)&&/\b(?:MSIE|Firefox)\b/i.test(nt)||"Firefox"==Ve&&/\bOS X (?:\d+\.){2,}/.test(li)||"IE"==Ve&&(li&&!/^Win/.test(li)&&je>5.5||/\bWindows XP\b/.test(li)&&je>8||8==je&&!/\bTrident\b/.test(nt)))&&!te.test(Ht=parse.call(forOwn,nt.replace(te,"")+";"))&&Ht.name&&(Ht="ing as "+Ht.name+((Ht=Ht.version)?" "+Ht:""),te.test(Ve)?(/\bIE\b/.test(Ht)&&"Mac OS"==li&&(li=null),Ht="identify"+Ht):(Ht="mask"+Ht,Ve=pe?format(pe.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(Ht)&&(li=null),Ce||(je=null)),Ne=["Presto"],Ae.push(Ht));else Ve+=" Mobile";(Ht=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(nt)||0)[1])&&(Ht=[parseFloat(Ht.replace(/\.(\d)$/,".0$1")),Ht],"Safari"==Ve&&"+"==Ht[1].slice(-1)?(Ve="WebKit Nightly",we="alpha",je=Ht[1].slice(0,-1)):je!=Ht[1]&&je!=(Ht[2]=(/\bSafari\/([\d.]+\+?)/i.exec(nt)||0)[1])||(je=null),Ht[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(nt)||0)[1],537.36==Ht[0]&&537.36==Ht[2]&&parseFloat(Ht[1])>=28&&"WebKit"==Ne&&(Ne=["Blink"]),Ce&&($t||Ht[1])?(Ne&&(Ne[1]="like Chrome"),Ht=Ht[1]||((Ht=Ht[0])<530?1:Ht<532?2:Ht<532.05?3:Ht<533?4:Ht<534.03?5:Ht<534.07?6:Ht<534.1?7:Ht<534.13?8:Ht<534.16?9:Ht<534.24?10:Ht<534.3?11:Ht<535.01?12:Ht<535.02?"13+":Ht<535.07?15:Ht<535.11?16:Ht<535.19?17:Ht<536.05?18:Ht<536.1?19:Ht<537.01?20:Ht<537.11?"21+":Ht<537.13?23:Ht<537.18?24:Ht<537.24?25:Ht<537.36?26:"Blink"!=Ne?"27":"28")):(Ne&&(Ne[1]="like Safari"),Ht=(Ht=Ht[0])<400?1:Ht<500?2:Ht<526?3:Ht<533?4:Ht<534?"4+":Ht<535?5:Ht<537?6:Ht<538?7:Ht<601?8:Ht<602?9:Ht<604?10:Ht<606?11:Ht<608?12:"12"),Ne&&(Ne[1]+=" "+(Ht+="number"==typeof Ht?".x":/[.+]/.test(Ht)?"":"+")),"Safari"==Ve&&(!je||parseInt(je)>45)?je=Ht:"Chrome"==Ve&&/\bHeadlessChrome/i.test(nt)&&Ae.unshift("headless")),"Opera"==Ve&&(Ht=/\bzbov|zvav$/.exec(li))?(Ve+=" ",Ae.unshift("desktop mode"),"zvav"==Ht?(Ve+="Mini",je=null):Ve+="Mobile",li=li.replace(RegExp(" *"+Ht+"$"),"")):"Safari"==Ve&&/\bChrome\b/.exec(Ne&&Ne[1])?(Ae.unshift("desktop mode"),Ve="Chrome Mobile",je=null,/\bOS X\b/.test(li)?(ti="Apple",li="iOS 4.3+"):li=null):/\bSRWare Iron\b/.test(Ve)&&!je&&(je=getVersion("Chrome")),je&&0==je.indexOf(Ht=/[\d.]+$/.exec(li))&&nt.indexOf("/"+Ht+"-")>-1&&(li=trim(li.replace(Ht,""))),li&&-1!=li.indexOf(Ve)&&!RegExp(Ve+" OS").test(li)&&(li=li.replace(RegExp(" *"+qualify(Ve)+" *"),"")),Ne&&!/\b(?:Avant|Nook)\b/.test(Ve)&&(/Browser|Lunascape|Maxthon/.test(Ve)||"Safari"!=Ve&&/^iOS/.test(li)&&/\bSafari\b/.test(Ne[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Ve)&&Ne[1])&&(Ht=Ne[Ne.length-1])&&Ae.push(Ht),Ae.length&&(Ae=["("+Ae.join("; ")+")"]),ti&&Ge&&Ge.indexOf(ti)<0&&Ae.push("on "+ti),Ge&&Ae.push((/^on /.test(Ae[Ae.length-1])?"":"on ")+Ge),li&&(Ht=/ ([\d.+]+)$/.exec(li),jt=Ht&&"/"==li.charAt(li.length-Ht[0].length-1),li={"architecture":32,"family":Ht&&!jt?li.replace(Ht[0],""):li,"version":Ht?Ht[1]:null,"toString":function(){var nt=this.version;return this.family+(nt&&!jt?" "+nt:"")+(64==this.architecture?" 64-bit":"")}}),(Ht=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ve))&&!/\bi686\b/i.test(ve)?(li&&(li.architecture=64,li.family=li.family.replace(RegExp(" *"+Ht),"")),Ve&&(/\bWOW64\b/i.test(nt)||Ce&&/\w(?:86|32)$/.test(Rt.cpuClass||Rt.platform)&&!/\bWin64; x64\b/i.test(nt))&&Ae.unshift("32-bit")):li&&/^OS X/.test(li.family)&&"Chrome"==Ve&&parseFloat(je)>=39&&(li.architecture=64),nt||(nt=null);var hi={};return hi.description=nt,hi.layout=Ne&&Ne[0],hi.manufacturer=ti,hi.name=Ve,hi.prerelease=we,hi.product=Ge,hi.ua=nt,hi.version=Ve&&je,hi.os=li||{"architecture":null,"family":null,"version":null,"toString":function(){return"null"}},hi.parse=parse,hi.toString=function toStringPlatform(){return this.description||""},hi.version&&Ae.unshift(je),hi.name&&Ae.unshift(Ve),li&&Ve&&(li!=String(li).split(" ")[0]||li!=Ve.split(" ")[0]&&!Ge)&&Ae.push(Ge?"("+li+")":"on "+li),Ae.length&&(hi.description=Ae.join(" ")),hi}();Lt.platform=oe,void 0===(Rt=function(){return oe}.call(at,lt,at,nt))||(nt.exports=Rt)}.call(this)},"8664":function(nt,at,lt){"use strict";lt.d(at,{"D0":function(){return Ji},"_z":function(){return fe},"Op":function(){return kn},"B8":function(){return dn},"EF":function(){return pe},"Ay":function(){return Tn},"mN":function(){return bn},"FH":function(){return Cn}});var Rt=lt(758),Bt=lt(3973),Lt=lt(5985),Ht=lt(8884),jt=lt(2368),$t=lt(1950),Kt=lt(3691),te=lt(6214),ne=lt(7584),re=lt(2320),ae=lt(542),oe=lt(8527),se=lt(6640),le=lt(7570),ue=lt(6378),ce=lt(1378),he="RC_FORM_INTERNAL_HOOKS",de=function warningFunc(){(0,ce.Ay)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},fe=Rt.createContext({"getFieldValue":de,"getFieldsValue":de,"getFieldError":de,"getFieldWarning":de,"getFieldsError":de,"isFieldsTouched":de,"isFieldTouched":de,"isFieldValidating":de,"isFieldsValidating":de,"resetFields":de,"setFields":de,"setFieldValue":de,"setFieldsValue":de,"validateFields":de,"submit":de,"getInternalHooks":function getInternalHooks(){return de(),{"dispatch":de,"initEntityValue":de,"registerField":de,"useSubscribe":de,"setInitialValues":de,"destroyForm":de,"setCallbacks":de,"registerWatch":de,"getFields":de,"setValidateMessages":de,"setPreserve":de,"getInitialValue":de}}}),pe=Rt.createContext(null);function typeUtil_toArray(nt){return null==nt?[]:Array.isArray(nt)?nt:[nt]}var ve=lt(8299);function newMessages(){return{"default":"Validation error on field %s","required":"%s is required","enum":"%s must be one of %s","whitespace":"%s cannot be empty","date":{"format":"%s date %s is invalid for format %s","parse":"%s date could not be parsed, %s is invalid ","invalid":"%s date %s is invalid"},"types":{"string":"%s is not a %s","method":"%s is not a %s (function)","array":"%s is not an %s","object":"%s is not an %s","number":"%s is not a %s","date":"%s is not a %s","boolean":"%s is not a %s","integer":"%s is not an %s","float":"%s is not a %s","regexp":"%s is not a valid %s","email":"%s is not a valid %s","url":"%s is not a valid %s","hex":"%s is not a valid %s"},"string":{"len":"%s must be exactly %s characters","min":"%s must be at least %s characters","max":"%s cannot be longer than %s characters","range":"%s must be between %s and %s characters"},"number":{"len":"%s must equal %s","min":"%s cannot be less than %s","max":"%s cannot be greater than %s","range":"%s must be between %s and %s"},"array":{"len":"%s must be exactly %s in length","min":"%s cannot be less than %s in length","max":"%s cannot be greater than %s in length","range":"%s must be between %s and %s in length"},"pattern":{"mismatch":"%s value %s does not match pattern %s"},"clone":function clone(){var nt=JSON.parse(JSON.stringify(this));return nt.clone=this.clone,nt}}}var Ae=newMessages(),we=lt(9637),Ce=lt(9993);var je=lt(9651);function _wrapNativeSuper(nt){var at="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(nt){if(null===nt||!function _isNativeFunction(nt){try{return-1!==Function.toString.call(nt).indexOf("[native code]")}catch(at){return"function"==typeof nt}}(nt))return nt;if("function"!=typeof nt)throw new TypeError("Super expression must either be null or a function");if(void 0!==at){if(at.has(nt))return at.get(nt);at.set(nt,Wrapper)}function Wrapper(){return function _construct(nt,at,lt){if((0,je.A)())return Reflect.construct.apply(null,arguments);var Rt=[null];Rt.push.apply(Rt,at);var Bt=new(nt.bind.apply(nt,Rt));return lt&&(0,Ce.A)(Bt,lt.prototype),Bt}(nt,arguments,(0,we.A)(this).constructor)}return Wrapper.prototype=Object.create(nt.prototype,{"constructor":{"value":Wrapper,"enumerable":!1,"writable":!0,"configurable":!0}}),(0,Ce.A)(Wrapper,nt)},_wrapNativeSuper(nt)}var Ne=/%[sdj%]/g;function convertFieldsError(nt){if(!nt||!nt.length)return null;var at={};return nt.forEach((function(nt){var lt=nt.field;at[lt]=at[lt]||[],at[lt].push(nt)})),at}function format(nt){for(var at=arguments.length,lt=new Array(at>1?at-1:0),Rt=1;Rt<at;Rt++)lt[Rt-1]=arguments[Rt];var Bt=0,Lt=lt.length;return"function"==typeof nt?nt.apply(null,lt):"string"==typeof nt?nt.replace(Ne,(function(nt){if("%%"===nt)return"%";if(Bt>=Lt)return nt;switch(nt){case"%s":return String(lt[Bt++]);case"%d":return Number(lt[Bt++]);case"%j":try{return JSON.stringify(lt[Bt++])}catch(nt){return"[Circular]"}break;default:return nt}})):nt}function isEmptyValue(nt,at){return null==nt||(!("array"!==at||!Array.isArray(nt)||nt.length)||!(!function isNativeStringType(nt){return"string"===nt||"url"===nt||"hex"===nt||"email"===nt||"date"===nt||"pattern"===nt}(at)||"string"!=typeof nt||nt))}function asyncSerialArray(nt,at,lt){var Rt=0,Bt=nt.length;!function next(Lt){if(Lt&&Lt.length)lt(Lt);else{var Ht=Rt;Rt+=1,Ht<Bt?at(nt[Ht],next):lt([])}}([])}"undefined"!=typeof process&&process.env;var Ve=function(nt){(0,ae.A)(AsyncValidationError,nt);var at=(0,oe.A)(AsyncValidationError);function AsyncValidationError(nt,lt){var Rt;return(0,te.A)(this,AsyncValidationError),Rt=at.call(this,"Async Validation Error"),(0,se.A)((0,re.A)(Rt),"errors",void 0),(0,se.A)((0,re.A)(Rt),"fields",void 0),Rt.errors=nt,Rt.fields=lt,Rt}return(0,ne.A)(AsyncValidationError)}(_wrapNativeSuper(Error));function asyncMap(nt,at,lt,Rt,Bt){if(at.first){var Lt=new Promise((function(at,Lt){var Ht=function flattenObjArr(nt){var at=[];return Object.keys(nt).forEach((function(lt){at.push.apply(at,(0,Kt.A)(nt[lt]||[]))})),at}(nt);asyncSerialArray(Ht,lt,(function next(nt){return Rt(nt),nt.length?Lt(new Ve(nt,convertFieldsError(nt))):at(Bt)}))}));return Lt.catch((function(nt){return nt})),Lt}var Ht=!0===at.firstFields?Object.keys(nt):at.firstFields||[],jt=Object.keys(nt),$t=jt.length,te=0,ne=[],re=new Promise((function(at,Lt){var re=function next(nt){if(ne.push.apply(ne,nt),++te===$t)return Rt(ne),ne.length?Lt(new Ve(ne,convertFieldsError(ne))):at(Bt)};jt.length||(Rt(ne),at(Bt)),jt.forEach((function(at){var Rt=nt[at];-1!==Ht.indexOf(at)?asyncSerialArray(Rt,lt,re):function asyncParallelArray(nt,at,lt){var Rt=[],Bt=0,Lt=nt.length;function count(nt){Rt.push.apply(Rt,(0,Kt.A)(nt||[])),++Bt===Lt&&lt(Rt)}nt.forEach((function(nt){at(nt,count)}))}(Rt,lt,re)}))}));return re.catch((function(nt){return nt})),re}function complementError(nt,at){return function(lt){var Rt;return Rt=nt.fullFields?function getValue(nt,at){for(var lt=nt,Rt=0;Rt<at.length;Rt++){if(null==lt)return lt;lt=lt[at[Rt]]}return lt}(at,nt.fullFields):at[lt.field||nt.fullField],function isErrorObj(nt){return!(!nt||void 0===nt.message)}(lt)?(lt.field=lt.field||nt.fullField,lt.fieldValue=Rt,lt):{"message":"function"==typeof lt?lt():lt,"fieldValue":Rt,"field":lt.field||nt.fullField}}}function deepMerge(nt,at){if(at)for(var lt in at)if(at.hasOwnProperty(lt)){var Rt=at[lt];"object"===(0,ve.A)(Rt)&&"object"===(0,ve.A)(nt[lt])?nt[lt]=(0,$t.A)((0,$t.A)({},nt[lt]),Rt):nt[lt]=Rt}return nt}var Ge,ti="enum",li=function required(nt,at,lt,Rt,Bt,Lt){!nt.required||lt.hasOwnProperty(nt.field)&&!isEmptyValue(at,Lt||nt.type)||Rt.push(format(Bt.messages.required,nt.fullField))},hi=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,di=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,fi={"integer":function integer(nt){return fi.number(nt)&&parseInt(nt,10)===nt},"float":function float(nt){return fi.number(nt)&&!fi.integer(nt)},"array":function array(nt){return Array.isArray(nt)},"regexp":function regexp(nt){if(nt instanceof RegExp)return!0;try{return!!new RegExp(nt)}catch(nt){return!1}},"date":function date(nt){return"function"==typeof nt.getTime&&"function"==typeof nt.getMonth&&"function"==typeof nt.getYear&&!isNaN(nt.getTime())},"number":function number(nt){return!isNaN(nt)&&"number"==typeof nt},"object":function object(nt){return"object"===(0,ve.A)(nt)&&!fi.array(nt)},"method":function method(nt){return"function"==typeof nt},"email":function email(nt){return"string"==typeof nt&&nt.length<=320&&!!nt.match(hi)},"url":function url(nt){return"string"==typeof nt&&nt.length<=2048&&!!nt.match(function(){if(Ge)return Ge;var nt="[a-fA-F\\d:]",at=function b(at){return at&&at.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(nt,")|(?<=").concat(nt,")(?=\\s|$))"):""},lt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Rt="[a-fA-F\\d]{1,4}",Bt=["(?:".concat(Rt,":){7}(?:").concat(Rt,"|:)"),"(?:".concat(Rt,":){6}(?:").concat(lt,"|:").concat(Rt,"|:)"),"(?:".concat(Rt,":){5}(?::").concat(lt,"|(?::").concat(Rt,"){1,2}|:)"),"(?:".concat(Rt,":){4}(?:(?::").concat(Rt,"){0,1}:").concat(lt,"|(?::").concat(Rt,"){1,3}|:)"),"(?:".concat(Rt,":){3}(?:(?::").concat(Rt,"){0,2}:").concat(lt,"|(?::").concat(Rt,"){1,4}|:)"),"(?:".concat(Rt,":){2}(?:(?::").concat(Rt,"){0,3}:").concat(lt,"|(?::").concat(Rt,"){1,5}|:)"),"(?:".concat(Rt,":){1}(?:(?::").concat(Rt,"){0,4}:").concat(lt,"|(?::").concat(Rt,"){1,6}|:)"),"(?::(?:(?::".concat(Rt,"){0,5}:").concat(lt,"|(?::").concat(Rt,"){1,7}|:))")],Lt="(?:".concat(Bt.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),Ht=new RegExp("(?:^".concat(lt,"$)|(?:^").concat(Lt,"$)")),jt=new RegExp("^".concat(lt,"$")),$t=new RegExp("^".concat(Lt,"$")),Kt=function ip(nt){return nt&&nt.exact?Ht:new RegExp("(?:".concat(at(nt)).concat(lt).concat(at(nt),")|(?:").concat(at(nt)).concat(Lt).concat(at(nt),")"),"g")};Kt.v4=function(nt){return nt&&nt.exact?jt:new RegExp("".concat(at(nt)).concat(lt).concat(at(nt)),"g")},Kt.v6=function(nt){return nt&&nt.exact?$t:new RegExp("".concat(at(nt)).concat(Lt).concat(at(nt)),"g")};var te=Kt.v4().source,ne=Kt.v6().source,re="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(te,"|").concat(ne,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return Ge=new RegExp("(?:^".concat(re,"$)"),"i")}())},"hex":function hex(nt){return"string"==typeof nt&&!!nt.match(di)}},pi=function type(nt,at,lt,Rt,Bt){if(nt.required&&void 0===at)li(nt,at,lt,Rt,Bt);else{var Lt=nt.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(Lt)>-1?fi[Lt](at)||Rt.push(format(Bt.messages.types[Lt],nt.fullField,nt.type)):Lt&&(0,ve.A)(at)!==nt.type&&Rt.push(format(Bt.messages.types[Lt],nt.fullField,nt.type))}},vi={"required":li,"whitespace":function whitespace(nt,at,lt,Rt,Bt){(/^\s+$/.test(at)||""===at)&&Rt.push(format(Bt.messages.whitespace,nt.fullField))},"type":pi,"range":function range(nt,at,lt,Rt,Bt){var Lt="number"==typeof nt.len,Ht="number"==typeof nt.min,jt="number"==typeof nt.max,$t=at,Kt=null,te="number"==typeof at,ne="string"==typeof at,re=Array.isArray(at);if(te?Kt="number":ne?Kt="string":re&&(Kt="array"),!Kt)return!1;re&&($t=at.length),ne&&($t=at.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),Lt?$t!==nt.len&&Rt.push(format(Bt.messages[Kt].len,nt.fullField,nt.len)):Ht&&!jt&&$t<nt.min?Rt.push(format(Bt.messages[Kt].min,nt.fullField,nt.min)):jt&&!Ht&&$t>nt.max?Rt.push(format(Bt.messages[Kt].max,nt.fullField,nt.max)):Ht&&jt&&($t<nt.min||$t>nt.max)&&Rt.push(format(Bt.messages[Kt].range,nt.fullField,nt.min,nt.max))},"enum":function enumerable(nt,at,lt,Rt,Bt){nt[ti]=Array.isArray(nt[ti])?nt[ti]:[],-1===nt[ti].indexOf(at)&&Rt.push(format(Bt.messages[ti],nt.fullField,nt[ti].join(", ")))},"pattern":function pattern(nt,at,lt,Rt,Bt){if(nt.pattern)if(nt.pattern instanceof RegExp)nt.pattern.lastIndex=0,nt.pattern.test(at)||Rt.push(format(Bt.messages.pattern.mismatch,nt.fullField,at,nt.pattern));else if("string"==typeof nt.pattern){new RegExp(nt.pattern).test(at)||Rt.push(format(Bt.messages.pattern.mismatch,nt.fullField,at,nt.pattern))}}},mi=function required(nt,at,lt,Rt,Bt){var Lt=[],Ht=Array.isArray(at)?"array":(0,ve.A)(at);vi.required(nt,at,Rt,Lt,Bt,Ht),lt(Lt)},_i=function type(nt,at,lt,Rt,Bt){var Lt=nt.type,Ht=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at,Lt)&&!nt.required)return lt();vi.required(nt,at,Rt,Ht,Bt,Lt),isEmptyValue(at,Lt)||vi.type(nt,at,Rt,Ht,Bt)}lt(Ht)},bi={"string":function string(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at,"string")&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt,"string"),isEmptyValue(at,"string")||(vi.type(nt,at,Rt,Lt,Bt),vi.range(nt,at,Rt,Lt,Bt),vi.pattern(nt,at,Rt,Lt,Bt),!0===nt.whitespace&&vi.whitespace(nt,at,Rt,Lt,Bt))}lt(Lt)},"method":function method(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&vi.type(nt,at,Rt,Lt,Bt)}lt(Lt)},"number":function number(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(""===at&&(at=void 0),isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&(vi.type(nt,at,Rt,Lt,Bt),vi.range(nt,at,Rt,Lt,Bt))}lt(Lt)},"boolean":function boolean(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&vi.type(nt,at,Rt,Lt,Bt)}lt(Lt)},"regexp":function regexp(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),isEmptyValue(at)||vi.type(nt,at,Rt,Lt,Bt)}lt(Lt)},"integer":function integer(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&(vi.type(nt,at,Rt,Lt,Bt),vi.range(nt,at,Rt,Lt,Bt))}lt(Lt)},"float":function floatFn(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&(vi.type(nt,at,Rt,Lt,Bt),vi.range(nt,at,Rt,Lt,Bt))}lt(Lt)},"array":function array(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(null==at&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt,"array"),null!=at&&(vi.type(nt,at,Rt,Lt,Bt),vi.range(nt,at,Rt,Lt,Bt))}lt(Lt)},"object":function object(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&vi.type(nt,at,Rt,Lt,Bt)}lt(Lt)},"enum":function enumerable(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),void 0!==at&&vi.enum(nt,at,Rt,Lt,Bt)}lt(Lt)},"pattern":function pattern(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at,"string")&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt),isEmptyValue(at,"string")||vi.pattern(nt,at,Rt,Lt,Bt)}lt(Lt)},"date":function date(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at,"date")&&!nt.required)return lt();var Ht;if(vi.required(nt,at,Rt,Lt,Bt),!isEmptyValue(at,"date"))Ht=at instanceof Date?at:new Date(at),vi.type(nt,Ht,Rt,Lt,Bt),Ht&&vi.range(nt,Ht.getTime(),Rt,Lt,Bt)}lt(Lt)},"url":_i,"hex":_i,"email":_i,"required":mi,"any":function any(nt,at,lt,Rt,Bt){var Lt=[];if(nt.required||!nt.required&&Rt.hasOwnProperty(nt.field)){if(isEmptyValue(at)&&!nt.required)return lt();vi.required(nt,at,Rt,Lt,Bt)}lt(Lt)}},Mi=function(){function Schema(nt){(0,te.A)(this,Schema),(0,se.A)(this,"rules",null),(0,se.A)(this,"_messages",Ae),this.define(nt)}return(0,ne.A)(Schema,[{"key":"define","value":function define(nt){var at=this;if(!nt)throw new Error("Cannot configure a schema with no rules");if("object"!==(0,ve.A)(nt)||Array.isArray(nt))throw new Error("Rules must be an object");this.rules={},Object.keys(nt).forEach((function(lt){var Rt=nt[lt];at.rules[lt]=Array.isArray(Rt)?Rt:[Rt]}))}},{"key":"messages","value":function messages(nt){return nt&&(this._messages=deepMerge(newMessages(),nt)),this._messages}},{"key":"validate","value":function validate(nt){var at=this,lt=nt,Rt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Bt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof Rt&&(Bt=Rt,Rt={}),!this.rules||0===Object.keys(this.rules).length)return Bt&&Bt(null,lt),Promise.resolve(lt);if(Rt.messages){var Lt=this.messages();Lt===Ae&&(Lt=newMessages()),deepMerge(Lt,Rt.messages),Rt.messages=Lt}else Rt.messages=this.messages();var Ht={};(Rt.keys||Object.keys(this.rules)).forEach((function(Rt){var Bt=at.rules[Rt],Lt=lt[Rt];Bt.forEach((function(Bt){var jt=Bt;"function"==typeof jt.transform&&(lt===nt&&(lt=(0,$t.A)({},lt)),null!=(Lt=lt[Rt]=jt.transform(Lt))&&(jt.type=jt.type||(Array.isArray(Lt)?"array":(0,ve.A)(Lt)))),(jt="function"==typeof jt?{"validator":jt}:(0,$t.A)({},jt)).validator=at.getValidationMethod(jt),jt.validator&&(jt.field=Rt,jt.fullField=jt.fullField||Rt,jt.type=at.getType(jt),Ht[Rt]=Ht[Rt]||[],Ht[Rt].push({"rule":jt,"value":Lt,"source":lt,"field":Rt}))}))}));var jt={};return asyncMap(Ht,Rt,(function(nt,at){var Bt,Lt=nt.rule,Ht=!("object"!==Lt.type&&"array"!==Lt.type||"object"!==(0,ve.A)(Lt.fields)&&"object"!==(0,ve.A)(Lt.defaultField));function addFullField(nt,at){return(0,$t.A)((0,$t.A)({},at),{},{"fullField":"".concat(Lt.fullField,".").concat(nt),"fullFields":Lt.fullFields?[].concat((0,Kt.A)(Lt.fullFields),[nt]):[nt]})}function cb(){var Bt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],te=Array.isArray(Bt)?Bt:[Bt];!Rt.suppressWarning&&te.length&&Schema.warning("async-validator:",te),te.length&&void 0!==Lt.message&&(te=[].concat(Lt.message));var ne=te.map(complementError(Lt,lt));if(Rt.first&&ne.length)return jt[Lt.field]=1,at(ne);if(Ht){if(Lt.required&&!nt.value)return void 0!==Lt.message?ne=[].concat(Lt.message).map(complementError(Lt,lt)):Rt.error&&(ne=[Rt.error(Lt,format(Rt.messages.required,Lt.field))]),at(ne);var re={};Lt.defaultField&&Object.keys(nt.value).map((function(nt){re[nt]=Lt.defaultField})),re=(0,$t.A)((0,$t.A)({},re),nt.rule.fields);var ae={};Object.keys(re).forEach((function(nt){var at=re[nt],lt=Array.isArray(at)?at:[at];ae[nt]=lt.map(addFullField.bind(null,nt))}));var oe=new Schema(ae);oe.messages(Rt.messages),nt.rule.options&&(nt.rule.options.messages=Rt.messages,nt.rule.options.error=Rt.error),oe.validate(nt.value,nt.rule.options||Rt,(function(nt){var lt=[];ne&&ne.length&&lt.push.apply(lt,(0,Kt.A)(ne)),nt&&nt.length&&lt.push.apply(lt,(0,Kt.A)(nt)),at(lt.length?lt:null)}))}else at(ne)}if(Ht=Ht&&(Lt.required||!Lt.required&&nt.value),Lt.field=nt.field,Lt.asyncValidator)Bt=Lt.asyncValidator(Lt,nt.value,cb,nt.source,Rt);else if(Lt.validator){try{Bt=Lt.validator(Lt,nt.value,cb,nt.source,Rt)}catch(nt){var te,ne;null===(te=(ne=console).error)||void 0===te||te.call(ne,nt),Rt.suppressValidatorError||setTimeout((function(){throw nt}),0),cb(nt.message)}!0===Bt?cb():!1===Bt?cb("function"==typeof Lt.message?Lt.message(Lt.fullField||Lt.field):Lt.message||"".concat(Lt.fullField||Lt.field," fails")):Bt instanceof Array?cb(Bt):Bt instanceof Error&&cb(Bt.message)}Bt&&Bt.then&&Bt.then((function(){return cb()}),(function(nt){return cb(nt)}))}),(function(nt){!function complete(nt){for(var at,Rt,Lt=[],Ht={},jt=0;jt<nt.length;jt++)at=nt[jt],Rt=void 0,Array.isArray(at)?Lt=(Rt=Lt).concat.apply(Rt,(0,Kt.A)(at)):Lt.push(at);Lt.length?(Ht=convertFieldsError(Lt),Bt(Lt,Ht)):Bt(null,lt)}(nt)}),lt)}},{"key":"getType","value":function getType(nt){if(void 0===nt.type&&nt.pattern instanceof RegExp&&(nt.type="pattern"),"function"!=typeof nt.validator&&nt.type&&!bi.hasOwnProperty(nt.type))throw new Error(format("Unknown rule type %s",nt.type));return nt.type||"string"}},{"key":"getValidationMethod","value":function getValidationMethod(nt){if("function"==typeof nt.validator)return nt.validator;var at=Object.keys(nt),lt=at.indexOf("message");return-1!==lt&&at.splice(lt,1),1===at.length&&"required"===at[0]?bi.required:bi[this.getType(nt)]||void 0}}]),Schema}();(0,se.A)(Mi,"register",(function register(nt,at){if("function"!=typeof at)throw new Error("Cannot register a validator by type, validator is not a function");bi[nt]=at})),(0,se.A)(Mi,"warning",(function warning(){})),(0,se.A)(Mi,"messages",Ae),(0,se.A)(Mi,"validators",bi);var Ti=Mi,Ii="'${name}' is not a valid ${type}",Bi={"default":"Validation error on field '${name}'","required":"'${name}' is required","enum":"'${name}' must be one of [${enum}]","whitespace":"'${name}' cannot be empty","date":{"format":"'${name}' is invalid for format date","parse":"'${name}' could not be parsed as date","invalid":"'${name}' is invalid date"},"types":{"string":Ii,"method":Ii,"array":Ii,"object":Ii,"number":Ii,"date":Ii,"boolean":Ii,"integer":Ii,"float":Ii,"regexp":Ii,"email":Ii,"url":Ii,"hex":Ii},"string":{"len":"'${name}' must be exactly ${len} characters","min":"'${name}' must be at least ${min} characters","max":"'${name}' cannot be longer than ${max} characters","range":"'${name}' must be between ${min} and ${max} characters"},"number":{"len":"'${name}' must equal ${len}","min":"'${name}' cannot be less than ${min}","max":"'${name}' cannot be greater than ${max}","range":"'${name}' must be between ${min} and ${max}"},"array":{"len":"'${name}' must be exactly ${len} in length","min":"'${name}' cannot be less than ${min} in length","max":"'${name}' cannot be greater than ${max} in length","range":"'${name}' must be between ${min} and ${max} in length"},"pattern":{"mismatch":"'${name}' does not match pattern ${pattern}"}},zi=lt(24),Wi=Ti;function replaceMessage(nt,at){return nt.replace(/\\?\$\{\w+\}/g,(function(nt){if(nt.startsWith("\\"))return nt.slice(1);var lt=nt.slice(2,-1);return at[lt]}))}var Ui="CODE_LOGIC_ERROR";function validateRule(nt,at,lt,Rt,Bt){return _validateRule.apply(this,arguments)}function _validateRule(){return _validateRule=(0,jt.A)((0,Ht.A)().mark((function _callee2(nt,at,lt,Bt,Lt){var jt,te,ne,re,ae,oe,le,ue,ce;return(0,Ht.A)().wrap((function _callee2$(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return delete(jt=(0,$t.A)({},lt)).ruleIndex,Wi.warning=function(){},jt.validator&&(te=jt.validator,jt.validator=function(){try{return te.apply(void 0,arguments)}catch(nt){return console.error(nt),Promise.reject(Ui)}}),ne=null,jt&&"array"===jt.type&&jt.defaultField&&(ne=jt.defaultField,delete jt.defaultField),re=new Wi((0,se.A)({},nt,[jt])),ae=(0,zi.h)(Bi,Bt.validateMessages),re.messages(ae),oe=[],Ht.prev=10,Ht.next=13,Promise.resolve(re.validate((0,se.A)({},nt,at),(0,$t.A)({},Bt)));case 13:Ht.next=18;break;case 15:Ht.prev=15,Ht.t0=Ht.catch(10),Ht.t0.errors&&(oe=Ht.t0.errors.map((function(nt,at){var lt=nt.message,Bt=lt===Ui?ae.default:lt;return Rt.isValidElement(Bt)?Rt.cloneElement(Bt,{"key":"error_".concat(at)}):Bt})));case 18:if(oe.length||!ne){Ht.next=23;break}return Ht.next=21,Promise.all(at.map((function(at,lt){return validateRule("".concat(nt,".").concat(lt),at,ne,Bt,Lt)})));case 21:return le=Ht.sent,Ht.abrupt("return",le.reduce((function(nt,at){return[].concat((0,Kt.A)(nt),(0,Kt.A)(at))}),[]));case 23:return ue=(0,$t.A)((0,$t.A)({},lt),{},{"name":nt,"enum":(lt.enum||[]).join(", ")},Lt),ce=oe.map((function(nt){return"string"==typeof nt?replaceMessage(nt,ue):nt})),Ht.abrupt("return",ce);case 26:case"end":return Ht.stop()}}),_callee2,null,[[10,15]])}))),_validateRule.apply(this,arguments)}function validateRules(nt,at,lt,Rt,Bt,Lt){var Kt,te=nt.join("."),ne=lt.map((function(nt,at){var lt=nt.validator,Rt=(0,$t.A)((0,$t.A)({},nt),{},{"ruleIndex":at});return lt&&(Rt.validator=function(nt,at,Rt){var Bt=!1,Lt=lt(nt,at,(function wrappedCallback(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];Promise.resolve().then((function(){(0,ce.Ay)(!Bt,"Your validator function has already return a promise. `callback` will be ignored."),Bt||Rt.apply(void 0,at)}))}));Bt=Lt&&"function"==typeof Lt.then&&"function"==typeof Lt.catch,(0,ce.Ay)(Bt,"`callback` is deprecated. Please return a promise instead."),Bt&&Lt.then((function(){Rt()})).catch((function(nt){Rt(nt||" ")}))}),Rt})).sort((function(nt,at){var lt=nt.warningOnly,Rt=nt.ruleIndex,Bt=at.warningOnly,Lt=at.ruleIndex;return!!lt==!!Bt?Rt-Lt:lt?1:-1}));if(!0===Bt)Kt=new Promise(function(){var nt=(0,jt.A)((0,Ht.A)().mark((function _callee(nt,lt){var Bt,jt,$t;return(0,Ht.A)().wrap((function _callee$(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:Bt=0;case 1:if(!(Bt<ne.length)){Ht.next=12;break}return jt=ne[Bt],Ht.next=5,validateRule(te,at,jt,Rt,Lt);case 5:if(!($t=Ht.sent).length){Ht.next=9;break}return lt([{"errors":$t,"rule":jt}]),Ht.abrupt("return");case 9:Bt+=1,Ht.next=1;break;case 12:nt([]);case 13:case"end":return Ht.stop()}}),_callee)})));return function(at,lt){return nt.apply(this,arguments)}}());else{var re=ne.map((function(nt){return validateRule(te,at,nt,Rt,Lt).then((function(at){return{"errors":at,"rule":nt}}))}));Kt=(Bt?function finishOnFirstFailed(nt){return _finishOnFirstFailed.apply(this,arguments)}(re):function finishOnAllFailed(nt){return _finishOnAllFailed.apply(this,arguments)}(re)).then((function(nt){return Promise.reject(nt)}))}return Kt.catch((function(nt){return nt})),Kt}function _finishOnAllFailed(){return(_finishOnAllFailed=(0,jt.A)((0,Ht.A)().mark((function _callee3(nt){return(0,Ht.A)().wrap((function _callee3$(at){for(;;)switch(at.prev=at.next){case 0:return at.abrupt("return",Promise.all(nt).then((function(nt){var at;return(at=[]).concat.apply(at,(0,Kt.A)(nt))})));case 1:case"end":return at.stop()}}),_callee3)})))).apply(this,arguments)}function _finishOnFirstFailed(){return(_finishOnFirstFailed=(0,jt.A)((0,Ht.A)().mark((function _callee4(nt){var at;return(0,Ht.A)().wrap((function _callee4$(lt){for(;;)switch(lt.prev=lt.next){case 0:return at=0,lt.abrupt("return",new Promise((function(lt){nt.forEach((function(Rt){Rt.then((function(Rt){Rt.errors.length&&lt([Rt]),(at+=1)===nt.length&&lt([])}))}))})));case 2:case"end":return lt.stop()}}),_callee4)})))).apply(this,arguments)}var $i=lt(2188);function getNamePath(nt){return typeUtil_toArray(nt)}function cloneByNamePathList(nt,at){var lt={};return at.forEach((function(at){var Rt=(0,$i.A)(nt,at);lt=(0,zi.A)(lt,at,Rt)})),lt}function containsNamePath(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return nt&&nt.some((function(nt){return matchNamePath(at,nt,lt)}))}function matchNamePath(nt,at){return!(!nt||!at)&&(!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&nt.length!==at.length)&&at.every((function(at,lt){return nt[lt]===at})))}function defaultGetValueFromEvent(nt){var at=arguments.length<=1?void 0:arguments[1];return at&&at.target&&"object"===(0,ve.A)(at.target)&&nt in at.target?at.target[nt]:at}function valueUtil_move(nt,at,lt){var Rt=nt.length;if(at<0||at>=Rt||lt<0||lt>=Rt)return nt;var Bt=nt[at],Lt=at-lt;return Lt>0?[].concat((0,Kt.A)(nt.slice(0,lt)),[Bt],(0,Kt.A)(nt.slice(lt,at)),(0,Kt.A)(nt.slice(at+1,Rt))):Lt<0?[].concat((0,Kt.A)(nt.slice(0,at)),(0,Kt.A)(nt.slice(at+1,lt+1)),[Bt],(0,Kt.A)(nt.slice(lt+1,Rt))):nt}var qi=["name"],Ki=[];function requireUpdate(nt,at,lt,Rt,Bt,Lt){return"function"==typeof nt?nt(at,lt,"source"in Lt?{"source":Lt.source}:{}):Rt!==Bt}var Qi=function(nt){(0,ae.A)(Field,nt);var at=(0,oe.A)(Field);function Field(nt){var lt;((0,te.A)(this,Field),lt=at.call(this,nt),(0,se.A)((0,re.A)(lt),"state",{"resetCount":0}),(0,se.A)((0,re.A)(lt),"cancelRegisterFunc",null),(0,se.A)((0,re.A)(lt),"mounted",!1),(0,se.A)((0,re.A)(lt),"touched",!1),(0,se.A)((0,re.A)(lt),"dirty",!1),(0,se.A)((0,re.A)(lt),"validatePromise",void 0),(0,se.A)((0,re.A)(lt),"prevValidating",void 0),(0,se.A)((0,re.A)(lt),"errors",Ki),(0,se.A)((0,re.A)(lt),"warnings",Ki),(0,se.A)((0,re.A)(lt),"cancelRegister",(function(){var nt=lt.props,at=nt.preserve,Rt=nt.isListField,Bt=nt.name;lt.cancelRegisterFunc&&lt.cancelRegisterFunc(Rt,at,getNamePath(Bt)),lt.cancelRegisterFunc=null})),(0,se.A)((0,re.A)(lt),"getNamePath",(function(){var nt=lt.props,at=nt.name,Rt=nt.fieldContext.prefixName,Bt=void 0===Rt?[]:Rt;return void 0!==at?[].concat((0,Kt.A)(Bt),(0,Kt.A)(at)):[]})),(0,se.A)((0,re.A)(lt),"getRules",(function(){var nt=lt.props,at=nt.rules,Rt=void 0===at?[]:at,Bt=nt.fieldContext;return Rt.map((function(nt){return"function"==typeof nt?nt(Bt):nt}))})),(0,se.A)((0,re.A)(lt),"refresh",(function(){lt.mounted&&lt.setState((function(nt){return{"resetCount":nt.resetCount+1}}))})),(0,se.A)((0,re.A)(lt),"metaCache",null),(0,se.A)((0,re.A)(lt),"triggerMetaEvent",(function(nt){var at=lt.props.onMetaChange;if(at){var Rt=(0,$t.A)((0,$t.A)({},lt.getMeta()),{},{"destroy":nt});(0,ue.A)(lt.metaCache,Rt)||at(Rt),lt.metaCache=Rt}else lt.metaCache=null})),(0,se.A)((0,re.A)(lt),"onStoreChange",(function(nt,at,Rt){var Bt=lt.props,Lt=Bt.shouldUpdate,Ht=Bt.dependencies,jt=void 0===Ht?[]:Ht,$t=Bt.onReset,Kt=Rt.store,te=lt.getNamePath(),ne=lt.getValue(nt),re=lt.getValue(Kt),ae=at&&containsNamePath(at,te);switch("valueUpdate"!==Rt.type||"external"!==Rt.source||(0,ue.A)(ne,re)||(lt.touched=!0,lt.dirty=!0,lt.validatePromise=null,lt.errors=Ki,lt.warnings=Ki,lt.triggerMetaEvent()),Rt.type){case"reset":if(!at||ae)return lt.touched=!1,lt.dirty=!1,lt.validatePromise=void 0,lt.errors=Ki,lt.warnings=Ki,lt.triggerMetaEvent(),null==$t||$t(),void lt.refresh();break;case"remove":if(Lt&&requireUpdate(Lt,nt,Kt,ne,re,Rt))return void lt.reRender();break;case"setField":var oe=Rt.data;if(ae)return"touched"in oe&&(lt.touched=oe.touched),"validating"in oe&&!("originRCField"in oe)&&(lt.validatePromise=oe.validating?Promise.resolve([]):null),"errors"in oe&&(lt.errors=oe.errors||Ki),"warnings"in oe&&(lt.warnings=oe.warnings||Ki),lt.dirty=!0,lt.triggerMetaEvent(),void lt.reRender();if("value"in oe&&containsNamePath(at,te,!0))return void lt.reRender();if(Lt&&!te.length&&requireUpdate(Lt,nt,Kt,ne,re,Rt))return void lt.reRender();break;case"dependenciesUpdate":if(jt.map(getNamePath).some((function(nt){return containsNamePath(Rt.relatedFields,nt)})))return void lt.reRender();break;default:if(ae||(!jt.length||te.length||Lt)&&requireUpdate(Lt,nt,Kt,ne,re,Rt))return void lt.reRender()}!0===Lt&&lt.reRender()})),(0,se.A)((0,re.A)(lt),"validateRules",(function(nt){var at=lt.getNamePath(),Rt=lt.getValue(),Bt=nt||{},Lt=Bt.triggerName,$t=Bt.validateOnly,te=void 0!==$t&&$t,ne=Promise.resolve().then((0,jt.A)((0,Ht.A)().mark((function _callee(){var Bt,jt,$t,te,re,ae,oe;return(0,Ht.A)().wrap((function _callee$(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(lt.mounted){Ht.next=2;break}return Ht.abrupt("return",[]);case 2:if(Bt=lt.props,jt=Bt.validateFirst,$t=void 0!==jt&&jt,te=Bt.messageVariables,re=Bt.validateDebounce,ae=lt.getRules(),Lt&&(ae=ae.filter((function(nt){return nt})).filter((function(nt){var at=nt.validateTrigger;return!at||typeUtil_toArray(at).includes(Lt)}))),!re||!Lt){Ht.next=10;break}return Ht.next=8,new Promise((function(nt){setTimeout(nt,re)}));case 8:if(lt.validatePromise===ne){Ht.next=10;break}return Ht.abrupt("return",[]);case 10:return(oe=validateRules(at,Rt,ae,nt,$t,te)).catch((function(nt){return nt})).then((function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ki;if(lt.validatePromise===ne){var at;lt.validatePromise=null;var Rt=[],Bt=[];null===(at=nt.forEach)||void 0===at||at.call(nt,(function(nt){var at=nt.rule.warningOnly,lt=nt.errors,Lt=void 0===lt?Ki:lt;at?Bt.push.apply(Bt,(0,Kt.A)(Lt)):Rt.push.apply(Rt,(0,Kt.A)(Lt))})),lt.errors=Rt,lt.warnings=Bt,lt.triggerMetaEvent(),lt.reRender()}})),Ht.abrupt("return",oe);case 13:case"end":return Ht.stop()}}),_callee)}))));return te||(lt.validatePromise=ne,lt.dirty=!0,lt.errors=Ki,lt.warnings=Ki,lt.triggerMetaEvent(),lt.reRender()),ne})),(0,se.A)((0,re.A)(lt),"isFieldValidating",(function(){return!!lt.validatePromise})),(0,se.A)((0,re.A)(lt),"isFieldTouched",(function(){return lt.touched})),(0,se.A)((0,re.A)(lt),"isFieldDirty",(function(){return!(!lt.dirty&&void 0===lt.props.initialValue)||void 0!==(0,lt.props.fieldContext.getInternalHooks(he).getInitialValue)(lt.getNamePath())})),(0,se.A)((0,re.A)(lt),"getErrors",(function(){return lt.errors})),(0,se.A)((0,re.A)(lt),"getWarnings",(function(){return lt.warnings})),(0,se.A)((0,re.A)(lt),"isListField",(function(){return lt.props.isListField})),(0,se.A)((0,re.A)(lt),"isList",(function(){return lt.props.isList})),(0,se.A)((0,re.A)(lt),"isPreserve",(function(){return lt.props.preserve})),(0,se.A)((0,re.A)(lt),"getMeta",(function(){return lt.prevValidating=lt.isFieldValidating(),{"touched":lt.isFieldTouched(),"validating":lt.prevValidating,"errors":lt.errors,"warnings":lt.warnings,"name":lt.getNamePath(),"validated":null===lt.validatePromise}})),(0,se.A)((0,re.A)(lt),"getOnlyChild",(function(nt){if("function"==typeof nt){var at=lt.getMeta();return(0,$t.A)((0,$t.A)({},lt.getOnlyChild(nt(lt.getControlled(),at,lt.props.fieldContext))),{},{"isFunction":!0})}var Bt=(0,le.A)(nt);return 1===Bt.length&&Rt.isValidElement(Bt[0])?{"child":Bt[0],"isFunction":!1}:{"child":Bt,"isFunction":!1}})),(0,se.A)((0,re.A)(lt),"getValue",(function(nt){var at=lt.props.fieldContext.getFieldsValue,Rt=lt.getNamePath();return(0,$i.A)(nt||at(!0),Rt)})),(0,se.A)((0,re.A)(lt),"getControlled",(function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},at=lt.props,Rt=at.name,Bt=at.trigger,Lt=at.validateTrigger,Ht=at.getValueFromEvent,jt=at.normalize,Kt=at.valuePropName,te=at.getValueProps,ne=at.fieldContext,re=void 0!==Lt?Lt:ne.validateTrigger,ae=lt.getNamePath(),oe=ne.getInternalHooks,le=ne.getFieldsValue,ue=oe(he).dispatch,ce=lt.getValue(),de=te||function(nt){return(0,se.A)({},Kt,nt)},fe=nt[Bt],pe=void 0!==Rt?de(ce):{};var ve=(0,$t.A)((0,$t.A)({},nt),pe);return ve[Bt]=function(){var nt;lt.touched=!0,lt.dirty=!0,lt.triggerMetaEvent();for(var at=arguments.length,Rt=new Array(at),Bt=0;Bt<at;Bt++)Rt[Bt]=arguments[Bt];nt=Ht?Ht.apply(void 0,Rt):defaultGetValueFromEvent.apply(void 0,[Kt].concat(Rt)),jt&&(nt=jt(nt,ce,le(!0))),nt!==ce&&ue({"type":"updateValue","namePath":ae,"value":nt}),fe&&fe.apply(void 0,Rt)},typeUtil_toArray(re||[]).forEach((function(nt){var at=ve[nt];ve[nt]=function(){at&&at.apply(void 0,arguments);var Rt=lt.props.rules;Rt&&Rt.length&&ue({"type":"validateField","namePath":ae,"triggerName":nt})}})),ve})),nt.fieldContext)&&(0,(0,nt.fieldContext.getInternalHooks)(he).initEntityValue)((0,re.A)(lt));return lt}return(0,ne.A)(Field,[{"key":"componentDidMount","value":function componentDidMount(){var nt=this.props,at=nt.shouldUpdate,lt=nt.fieldContext;if(this.mounted=!0,lt){var Rt=(0,lt.getInternalHooks)(he).registerField;this.cancelRegisterFunc=Rt(this)}!0===at&&this.reRender()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{"key":"reRender","value":function reRender(){this.mounted&&this.forceUpdate()}},{"key":"render","value":function render(){var nt,at=this.state.resetCount,lt=this.props.children,Bt=this.getOnlyChild(lt),Lt=Bt.child;return Bt.isFunction?nt=Lt:Rt.isValidElement(Lt)?nt=Rt.cloneElement(Lt,this.getControlled(Lt.props)):((0,ce.Ay)(!Lt,"`children` of Field is not validate ReactElement."),nt=Lt),Rt.createElement(Rt.Fragment,{"key":at},nt)}}]),Field}(Rt.Component);(0,se.A)(Qi,"contextType",fe),(0,se.A)(Qi,"defaultProps",{"trigger":"onChange","valuePropName":"value"});var Ji=function WrapperField(nt){var at,lt=nt.name,Ht=(0,Lt.A)(nt,qi),jt=Rt.useContext(fe),$t=Rt.useContext(pe),Kt=void 0!==lt?getNamePath(lt):void 0,te=null!==(at=Ht.isListField)&&void 0!==at?at:!!$t,ne="keep";return te||(ne="_".concat((Kt||[]).join("_"))),Rt.createElement(Qi,(0,Bt.A)({"key":ne,"name":Kt,"isListField":te},Ht,{"fieldContext":jt}))};var dn=function List(nt){var at=nt.name,lt=nt.initialValue,Bt=nt.children,Lt=nt.rules,Ht=nt.validateTrigger,jt=nt.isListField,te=Rt.useContext(fe),ne=Rt.useContext(pe),re=Rt.useRef({"keys":[],"id":0}).current,ae=Rt.useMemo((function(){var nt=getNamePath(te.prefixName)||[];return[].concat((0,Kt.A)(nt),(0,Kt.A)(getNamePath(at)))}),[te.prefixName,at]),oe=Rt.useMemo((function(){return(0,$t.A)((0,$t.A)({},te),{},{"prefixName":ae})}),[te,ae]),se=Rt.useMemo((function(){return{"getKey":function getKey(nt){var at=ae.length,lt=nt[at];return[re.keys[lt],nt.slice(at+1)]}}}),[ae]);return"function"!=typeof Bt?((0,ce.Ay)(!1,"Form.List only accepts function as children."),null):Rt.createElement(pe.Provider,{"value":se},Rt.createElement(fe.Provider,{"value":oe},Rt.createElement(Ji,{"name":[],"shouldUpdate":function shouldUpdate(nt,at,lt){return"internal"!==lt.source&&nt!==at},"rules":Lt,"validateTrigger":Ht,"initialValue":lt,"isList":!0,"isListField":null!=jt?jt:!!ne},(function(nt,at){var lt=nt.value,Rt=void 0===lt?[]:lt,Lt=nt.onChange,Ht=te.getFieldValue,jt=function getNewValue(){return Ht(ae||[])||[]},$t={"add":function add(nt,at){var lt=jt();at>=0&&at<=lt.length?(re.keys=[].concat((0,Kt.A)(re.keys.slice(0,at)),[re.id],(0,Kt.A)(re.keys.slice(at))),Lt([].concat((0,Kt.A)(lt.slice(0,at)),[nt],(0,Kt.A)(lt.slice(at))))):(re.keys=[].concat((0,Kt.A)(re.keys),[re.id]),Lt([].concat((0,Kt.A)(lt),[nt]))),re.id+=1},"remove":function remove(nt){var at=jt(),lt=new Set(Array.isArray(nt)?nt:[nt]);lt.size<=0||(re.keys=re.keys.filter((function(nt,at){return!lt.has(at)})),Lt(at.filter((function(nt,at){return!lt.has(at)}))))},"move":function move(nt,at){if(nt!==at){var lt=jt();nt<0||nt>=lt.length||at<0||at>=lt.length||(re.keys=valueUtil_move(re.keys,nt,at),Lt(valueUtil_move(lt,nt,at)))}}},ne=Rt||[];return Array.isArray(ne)||(ne=[]),Bt(ne.map((function(nt,at){var lt=re.keys[at];return void 0===lt&&(re.keys[at]=re.id,lt=re.keys[at],re.id+=1),{"name":at,"key":lt,"isListField":!0}})),$t,at)}))))},fn=lt(9859);var vn="__@field_split__";function normalize(nt){return nt.map((function(nt){return"".concat((0,ve.A)(nt),":").concat(nt)})).join(vn)}var gn=function(){function NameMap(){(0,te.A)(this,NameMap),(0,se.A)(this,"kvs",new Map)}return(0,ne.A)(NameMap,[{"key":"set","value":function set(nt,at){this.kvs.set(normalize(nt),at)}},{"key":"get","value":function get(nt){return this.kvs.get(normalize(nt))}},{"key":"update","value":function update(nt,at){var lt=at(this.get(nt));lt?this.set(nt,lt):this.delete(nt)}},{"key":"delete","value":function _delete(nt){this.kvs.delete(normalize(nt))}},{"key":"map","value":function map(nt){return(0,Kt.A)(this.kvs.entries()).map((function(at){var lt=(0,fn.A)(at,2),Rt=lt[0],Bt=lt[1],Lt=Rt.split(vn);return nt({"key":Lt.map((function(nt){var at=nt.match(/^([^:]*):(.*)$/),lt=(0,fn.A)(at,3),Rt=lt[1],Bt=lt[2];return"number"===Rt?Number(Bt):Bt})),"value":Bt})}))}},{"key":"toJSON","value":function toJSON(){var nt={};return this.map((function(at){var lt=at.key,Rt=at.value;return nt[lt.join(".")]=Rt,null})),nt}}]),NameMap}(),yn=gn,mn=["name"],_n=(0,ne.A)((function FormStore(nt){var at=this;(0,te.A)(this,FormStore),(0,se.A)(this,"formHooked",!1),(0,se.A)(this,"forceRootUpdate",void 0),(0,se.A)(this,"subscribable",!0),(0,se.A)(this,"store",{}),(0,se.A)(this,"fieldEntities",[]),(0,se.A)(this,"initialValues",{}),(0,se.A)(this,"callbacks",{}),(0,se.A)(this,"validateMessages",null),(0,se.A)(this,"preserve",null),(0,se.A)(this,"lastValidatePromise",null),(0,se.A)(this,"getForm",(function(){return{"getFieldValue":at.getFieldValue,"getFieldsValue":at.getFieldsValue,"getFieldError":at.getFieldError,"getFieldWarning":at.getFieldWarning,"getFieldsError":at.getFieldsError,"isFieldsTouched":at.isFieldsTouched,"isFieldTouched":at.isFieldTouched,"isFieldValidating":at.isFieldValidating,"isFieldsValidating":at.isFieldsValidating,"resetFields":at.resetFields,"setFields":at.setFields,"setFieldValue":at.setFieldValue,"setFieldsValue":at.setFieldsValue,"validateFields":at.validateFields,"submit":at.submit,"_init":!0,"getInternalHooks":at.getInternalHooks}})),(0,se.A)(this,"getInternalHooks",(function(nt){return nt===he?(at.formHooked=!0,{"dispatch":at.dispatch,"initEntityValue":at.initEntityValue,"registerField":at.registerField,"useSubscribe":at.useSubscribe,"setInitialValues":at.setInitialValues,"destroyForm":at.destroyForm,"setCallbacks":at.setCallbacks,"setValidateMessages":at.setValidateMessages,"getFields":at.getFields,"setPreserve":at.setPreserve,"getInitialValue":at.getInitialValue,"registerWatch":at.registerWatch}):((0,ce.Ay)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),(0,se.A)(this,"useSubscribe",(function(nt){at.subscribable=nt})),(0,se.A)(this,"prevWithoutPreserves",null),(0,se.A)(this,"setInitialValues",(function(nt,lt){if(at.initialValues=nt||{},lt){var Rt,Bt=(0,zi.h)(nt,at.store);null===(Rt=at.prevWithoutPreserves)||void 0===Rt||Rt.map((function(at){var lt=at.key;Bt=(0,zi.A)(Bt,lt,(0,$i.A)(nt,lt))})),at.prevWithoutPreserves=null,at.updateStore(Bt)}})),(0,se.A)(this,"destroyForm",(function(nt){if(nt)at.updateStore({});else{var lt=new yn;at.getFieldEntities(!0).forEach((function(nt){at.isMergedPreserve(nt.isPreserve())||lt.set(nt.getNamePath(),!0)})),at.prevWithoutPreserves=lt}})),(0,se.A)(this,"getInitialValue",(function(nt){var lt=(0,$i.A)(at.initialValues,nt);return nt.length?(0,zi.h)(lt):lt})),(0,se.A)(this,"setCallbacks",(function(nt){at.callbacks=nt})),(0,se.A)(this,"setValidateMessages",(function(nt){at.validateMessages=nt})),(0,se.A)(this,"setPreserve",(function(nt){at.preserve=nt})),(0,se.A)(this,"watchList",[]),(0,se.A)(this,"registerWatch",(function(nt){return at.watchList.push(nt),function(){at.watchList=at.watchList.filter((function(at){return at!==nt}))}})),(0,se.A)(this,"notifyWatch",(function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(at.watchList.length){var lt=at.getFieldsValue(),Rt=at.getFieldsValue(!0);at.watchList.forEach((function(at){at(lt,Rt,nt)}))}})),(0,se.A)(this,"timeoutId",null),(0,se.A)(this,"warningUnhooked",(function(){0})),(0,se.A)(this,"updateStore",(function(nt){at.store=nt})),(0,se.A)(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?at.fieldEntities.filter((function(nt){return nt.getNamePath().length})):at.fieldEntities})),(0,se.A)(this,"getFieldsMap",(function(){var nt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],lt=new yn;return at.getFieldEntities(nt).forEach((function(nt){var at=nt.getNamePath();lt.set(at,nt)})),lt})),(0,se.A)(this,"getFieldEntitiesForNamePathList",(function(nt){if(!nt)return at.getFieldEntities(!0);var lt=at.getFieldsMap(!0);return nt.map((function(nt){var at=getNamePath(nt);return lt.get(at)||{"INVALIDATE_NAME_PATH":getNamePath(nt)}}))})),(0,se.A)(this,"getFieldsValue",(function(nt,lt){var Rt,Bt,Lt;if(at.warningUnhooked(),!0===nt||Array.isArray(nt)?(Rt=nt,Bt=lt):nt&&"object"===(0,ve.A)(nt)&&(Lt=nt.strict,Bt=nt.filter),!0===Rt&&!Bt)return at.store;var Ht=at.getFieldEntitiesForNamePathList(Array.isArray(Rt)?Rt:null),jt=[];return Ht.forEach((function(nt){var at,lt,Ht,$t,Kt="INVALIDATE_NAME_PATH"in nt?nt.INVALIDATE_NAME_PATH:nt.getNamePath();if(Lt){if(null!==(Ht=($t=nt).isList)&&void 0!==Ht&&Ht.call($t))return}else if(!Rt&&null!==(at=(lt=nt).isListField)&&void 0!==at&&at.call(lt))return;if(Bt){var te="getMeta"in nt?nt.getMeta():null;Bt(te)&&jt.push(Kt)}else jt.push(Kt)})),cloneByNamePathList(at.store,jt.map(getNamePath))})),(0,se.A)(this,"getFieldValue",(function(nt){at.warningUnhooked();var lt=getNamePath(nt);return(0,$i.A)(at.store,lt)})),(0,se.A)(this,"getFieldsError",(function(nt){return at.warningUnhooked(),at.getFieldEntitiesForNamePathList(nt).map((function(at,lt){return at&&!("INVALIDATE_NAME_PATH"in at)?{"name":at.getNamePath(),"errors":at.getErrors(),"warnings":at.getWarnings()}:{"name":getNamePath(nt[lt]),"errors":[],"warnings":[]}}))})),(0,se.A)(this,"getFieldError",(function(nt){at.warningUnhooked();var lt=getNamePath(nt);return at.getFieldsError([lt])[0].errors})),(0,se.A)(this,"getFieldWarning",(function(nt){at.warningUnhooked();var lt=getNamePath(nt);return at.getFieldsError([lt])[0].warnings})),(0,se.A)(this,"isFieldsTouched",(function(){at.warningUnhooked();for(var nt=arguments.length,lt=new Array(nt),Rt=0;Rt<nt;Rt++)lt[Rt]=arguments[Rt];var Bt,Lt=lt[0],Ht=lt[1],jt=!1;0===lt.length?Bt=null:1===lt.length?Array.isArray(Lt)?(Bt=Lt.map(getNamePath),jt=!1):(Bt=null,jt=Lt):(Bt=Lt.map(getNamePath),jt=Ht);var $t=at.getFieldEntities(!0),te=function isFieldTouched(nt){return nt.isFieldTouched()};if(!Bt)return jt?$t.every((function(nt){return te(nt)||nt.isList()})):$t.some(te);var ne=new yn;Bt.forEach((function(nt){ne.set(nt,[])})),$t.forEach((function(nt){var at=nt.getNamePath();Bt.forEach((function(lt){lt.every((function(nt,lt){return at[lt]===nt}))&&ne.update(lt,(function(at){return[].concat((0,Kt.A)(at),[nt])}))}))}));var re=function isNamePathListTouched(nt){return nt.some(te)},ae=ne.map((function(nt){return nt.value}));return jt?ae.every(re):ae.some(re)})),(0,se.A)(this,"isFieldTouched",(function(nt){return at.warningUnhooked(),at.isFieldsTouched([nt])})),(0,se.A)(this,"isFieldsValidating",(function(nt){at.warningUnhooked();var lt=at.getFieldEntities();if(!nt)return lt.some((function(nt){return nt.isFieldValidating()}));var Rt=nt.map(getNamePath);return lt.some((function(nt){var at=nt.getNamePath();return containsNamePath(Rt,at)&&nt.isFieldValidating()}))})),(0,se.A)(this,"isFieldValidating",(function(nt){return at.warningUnhooked(),at.isFieldsValidating([nt])})),(0,se.A)(this,"resetWithFieldInitialValue",(function(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},lt=new yn,Rt=at.getFieldEntities(!0);Rt.forEach((function(nt){var at=nt.props.initialValue,Rt=nt.getNamePath();if(void 0!==at){var Bt=lt.get(Rt)||new Set;Bt.add({"entity":nt,"value":at}),lt.set(Rt,Bt)}}));var Bt;nt.entities?Bt=nt.entities:nt.namePathList?(Bt=[],nt.namePathList.forEach((function(nt){var at,Rt=lt.get(nt);Rt&&(at=Bt).push.apply(at,(0,Kt.A)((0,Kt.A)(Rt).map((function(nt){return nt.entity}))))}))):Bt=Rt,function resetWithFields(Rt){Rt.forEach((function(Rt){if(void 0!==Rt.props.initialValue){var Bt=Rt.getNamePath();if(void 0!==at.getInitialValue(Bt))(0,ce.Ay)(!1,"Form already set 'initialValues' with path '".concat(Bt.join("."),"'. Field can not overwrite it."));else{var Lt=lt.get(Bt);if(Lt&&Lt.size>1)(0,ce.Ay)(!1,"Multiple Field with path '".concat(Bt.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(Lt){var Ht=at.getFieldValue(Bt);Rt.isListField()||nt.skipExist&&void 0!==Ht||at.updateStore((0,zi.A)(at.store,Bt,(0,Kt.A)(Lt)[0].value))}}}}))}(Bt)})),(0,se.A)(this,"resetFields",(function(nt){at.warningUnhooked();var lt=at.store;if(!nt)return at.updateStore((0,zi.h)(at.initialValues)),at.resetWithFieldInitialValue(),at.notifyObservers(lt,null,{"type":"reset"}),void at.notifyWatch();var Rt=nt.map(getNamePath);Rt.forEach((function(nt){var lt=at.getInitialValue(nt);at.updateStore((0,zi.A)(at.store,nt,lt))})),at.resetWithFieldInitialValue({"namePathList":Rt}),at.notifyObservers(lt,Rt,{"type":"reset"}),at.notifyWatch(Rt)})),(0,se.A)(this,"setFields",(function(nt){at.warningUnhooked();var lt=at.store,Rt=[];nt.forEach((function(nt){var Bt=nt.name,Ht=(0,Lt.A)(nt,mn),jt=getNamePath(Bt);Rt.push(jt),"value"in Ht&&at.updateStore((0,zi.A)(at.store,jt,Ht.value)),at.notifyObservers(lt,[jt],{"type":"setField","data":nt})})),at.notifyWatch(Rt)})),(0,se.A)(this,"getFields",(function(){return at.getFieldEntities(!0).map((function(nt){var lt=nt.getNamePath(),Rt=nt.getMeta(),Bt=(0,$t.A)((0,$t.A)({},Rt),{},{"name":lt,"value":at.getFieldValue(lt)});return Object.defineProperty(Bt,"originRCField",{"value":!0}),Bt}))})),(0,se.A)(this,"initEntityValue",(function(nt){var lt=nt.props.initialValue;if(void 0!==lt){var Rt=nt.getNamePath();void 0===(0,$i.A)(at.store,Rt)&&at.updateStore((0,zi.A)(at.store,Rt,lt))}})),(0,se.A)(this,"isMergedPreserve",(function(nt){var lt=void 0!==nt?nt:at.preserve;return null==lt||lt})),(0,se.A)(this,"registerField",(function(nt){at.fieldEntities.push(nt);var lt=nt.getNamePath();if(at.notifyWatch([lt]),void 0!==nt.props.initialValue){var Rt=at.store;at.resetWithFieldInitialValue({"entities":[nt],"skipExist":!0}),at.notifyObservers(Rt,[nt.getNamePath()],{"type":"valueUpdate","source":"internal"})}return function(Rt,Bt){var Lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(at.fieldEntities=at.fieldEntities.filter((function(at){return at!==nt})),!at.isMergedPreserve(Bt)&&(!Rt||Lt.length>1)){var Ht=Rt?void 0:at.getInitialValue(lt);if(lt.length&&at.getFieldValue(lt)!==Ht&&at.fieldEntities.every((function(nt){return!matchNamePath(nt.getNamePath(),lt)}))){var jt=at.store;at.updateStore((0,zi.A)(jt,lt,Ht,!0)),at.notifyObservers(jt,[lt],{"type":"remove"}),at.triggerDependenciesUpdate(jt,lt)}}at.notifyWatch([lt])}})),(0,se.A)(this,"dispatch",(function(nt){switch(nt.type){case"updateValue":var lt=nt.namePath,Rt=nt.value;at.updateValue(lt,Rt);break;case"validateField":var Bt=nt.namePath,Lt=nt.triggerName;at.validateFields([Bt],{"triggerName":Lt})}})),(0,se.A)(this,"notifyObservers",(function(nt,lt,Rt){if(at.subscribable){var Bt=(0,$t.A)((0,$t.A)({},Rt),{},{"store":at.getFieldsValue(!0)});at.getFieldEntities().forEach((function(at){(0,at.onStoreChange)(nt,lt,Bt)}))}else at.forceRootUpdate()})),(0,se.A)(this,"triggerDependenciesUpdate",(function(nt,lt){var Rt=at.getDependencyChildrenFields(lt);return Rt.length&&at.validateFields(Rt),at.notifyObservers(nt,Rt,{"type":"dependenciesUpdate","relatedFields":[lt].concat((0,Kt.A)(Rt))}),Rt})),(0,se.A)(this,"updateValue",(function(nt,lt){var Rt=getNamePath(nt),Bt=at.store;at.updateStore((0,zi.A)(at.store,Rt,lt)),at.notifyObservers(Bt,[Rt],{"type":"valueUpdate","source":"internal"}),at.notifyWatch([Rt]);var Lt=at.triggerDependenciesUpdate(Bt,Rt),Ht=at.callbacks.onValuesChange;Ht&&Ht(cloneByNamePathList(at.store,[Rt]),at.getFieldsValue());at.triggerOnFieldsChange([Rt].concat((0,Kt.A)(Lt)))})),(0,se.A)(this,"setFieldsValue",(function(nt){at.warningUnhooked();var lt=at.store;if(nt){var Rt=(0,zi.h)(at.store,nt);at.updateStore(Rt)}at.notifyObservers(lt,null,{"type":"valueUpdate","source":"external"}),at.notifyWatch()})),(0,se.A)(this,"setFieldValue",(function(nt,lt){at.setFields([{"name":nt,"value":lt,"errors":[],"warnings":[]}])})),(0,se.A)(this,"getDependencyChildrenFields",(function(nt){var lt=new Set,Rt=[],Bt=new yn;at.getFieldEntities().forEach((function(nt){(nt.props.dependencies||[]).forEach((function(at){var lt=getNamePath(at);Bt.update(lt,(function(){var at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return at.add(nt),at}))}))}));return function fillChildren(nt){(Bt.get(nt)||new Set).forEach((function(nt){if(!lt.has(nt)){lt.add(nt);var at=nt.getNamePath();nt.isFieldDirty()&&at.length&&(Rt.push(at),fillChildren(at))}}))}(nt),Rt})),(0,se.A)(this,"triggerOnFieldsChange",(function(nt,lt){var Rt=at.callbacks.onFieldsChange;if(Rt){var Bt=at.getFields();if(lt){var Lt=new yn;lt.forEach((function(nt){var at=nt.name,lt=nt.errors;Lt.set(at,lt)})),Bt.forEach((function(nt){nt.errors=Lt.get(nt.name)||nt.errors}))}var Ht=Bt.filter((function(at){var lt=at.name;return containsNamePath(nt,lt)}));Ht.length&&Rt(Ht,Bt)}})),(0,se.A)(this,"validateFields",(function(nt,lt){var Rt,Bt;at.warningUnhooked(),Array.isArray(nt)||"string"==typeof nt||"string"==typeof lt?(Rt=nt,Bt=lt):Bt=nt;var Lt=!!Rt,Ht=Lt?Rt.map(getNamePath):[],jt=[],te=String(Date.now()),ne=new Set,re=Bt||{},ae=re.recursive,oe=re.dirty;at.getFieldEntities(!0).forEach((function(nt){if(Lt||Ht.push(nt.getNamePath()),nt.props.rules&&nt.props.rules.length&&(!oe||nt.isFieldDirty())){var lt=nt.getNamePath();if(ne.add(lt.join(te)),!Lt||containsNamePath(Ht,lt,ae)){var Rt=nt.validateRules((0,$t.A)({"validateMessages":(0,$t.A)((0,$t.A)({},Bi),at.validateMessages)},Bt));jt.push(Rt.then((function(){return{"name":lt,"errors":[],"warnings":[]}})).catch((function(nt){var at,Rt=[],Bt=[];return null===(at=nt.forEach)||void 0===at||at.call(nt,(function(nt){var at=nt.rule.warningOnly,lt=nt.errors;at?Bt.push.apply(Bt,(0,Kt.A)(lt)):Rt.push.apply(Rt,(0,Kt.A)(lt))})),Rt.length?Promise.reject({"name":lt,"errors":Rt,"warnings":Bt}):{"name":lt,"errors":Rt,"warnings":Bt}})))}}}));var se=function allPromiseFinish(nt){var at=!1,lt=nt.length,Rt=[];return nt.length?new Promise((function(Bt,Lt){nt.forEach((function(nt,Ht){nt.catch((function(nt){return at=!0,nt})).then((function(nt){lt-=1,Rt[Ht]=nt,lt>0||(at&&Lt(Rt),Bt(Rt))}))}))})):Promise.resolve([])}(jt);at.lastValidatePromise=se,se.catch((function(nt){return nt})).then((function(nt){var lt=nt.map((function(nt){return nt.name}));at.notifyObservers(at.store,lt,{"type":"validateFinish"}),at.triggerOnFieldsChange(lt,nt)}));var le=se.then((function(){return at.lastValidatePromise===se?Promise.resolve(at.getFieldsValue(Ht)):Promise.reject([])})).catch((function(nt){var lt=nt.filter((function(nt){return nt&&nt.errors.length}));return Promise.reject({"values":at.getFieldsValue(Ht),"errorFields":lt,"outOfDate":at.lastValidatePromise!==se})}));le.catch((function(nt){return nt}));var ue=Ht.filter((function(nt){return ne.has(nt.join(te))}));return at.triggerOnFieldsChange(ue),le})),(0,se.A)(this,"submit",(function(){at.warningUnhooked(),at.validateFields().then((function(nt){var lt=at.callbacks.onFinish;if(lt)try{lt(nt)}catch(nt){console.error(nt)}})).catch((function(nt){var lt=at.callbacks.onFinishFailed;lt&&lt(nt)}))})),this.forceRootUpdate=nt}));var bn=function useForm(nt){var at=Rt.useRef(),lt=Rt.useState({}),Bt=(0,fn.A)(lt,2)[1];if(!at.current)if(nt)at.current=nt;else{var Lt=new _n((function forceReRender(){Bt({})}));at.current=Lt.getForm()}return[at.current]},xn=Rt.createContext({"triggerFormChange":function triggerFormChange(){},"triggerFormFinish":function triggerFormFinish(){},"registerForm":function registerForm(){},"unregisterForm":function unregisterForm(){}}),kn=function FormProvider(nt){var at=nt.validateMessages,lt=nt.onFormChange,Bt=nt.onFormFinish,Lt=nt.children,Ht=Rt.useContext(xn),jt=Rt.useRef({});return Rt.createElement(xn.Provider,{"value":(0,$t.A)((0,$t.A)({},Ht),{},{"validateMessages":(0,$t.A)((0,$t.A)({},Ht.validateMessages),at),"triggerFormChange":function triggerFormChange(nt,at){lt&&lt(nt,{"changedFields":at,"forms":jt.current}),Ht.triggerFormChange(nt,at)},"triggerFormFinish":function triggerFormFinish(nt,at){Bt&&Bt(nt,{"values":at,"forms":jt.current}),Ht.triggerFormFinish(nt,at)},"registerForm":function registerForm(nt,at){nt&&(jt.current=(0,$t.A)((0,$t.A)({},jt.current),{},(0,se.A)({},nt,at))),Ht.registerForm(nt,at)},"unregisterForm":function unregisterForm(nt){var at=(0,$t.A)({},jt.current);delete at[nt],jt.current=at,Ht.unregisterForm(nt)}})},Lt)},Sn=xn,An=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],wn=function Form(nt,at){var lt=nt.name,Ht=nt.initialValues,jt=nt.fields,te=nt.form,ne=nt.preserve,re=nt.children,ae=nt.component,oe=void 0===ae?"form":ae,se=nt.validateMessages,le=nt.validateTrigger,ue=void 0===le?"onChange":le,ce=nt.onValuesChange,de=nt.onFieldsChange,Ae=nt.onFinish,we=nt.onFinishFailed,Ce=nt.clearOnDestroy,je=(0,Lt.A)(nt,An),Ne=Rt.useRef(null),Ve=Rt.useContext(Sn),Ge=bn(te),ti=(0,fn.A)(Ge,1)[0],li=ti.getInternalHooks(he),hi=li.useSubscribe,di=li.setInitialValues,fi=li.setCallbacks,pi=li.setValidateMessages,vi=li.setPreserve,mi=li.destroyForm;Rt.useImperativeHandle(at,(function(){return(0,$t.A)((0,$t.A)({},ti),{},{"nativeElement":Ne.current})})),Rt.useEffect((function(){return Ve.registerForm(lt,ti),function(){Ve.unregisterForm(lt)}}),[Ve,ti,lt]),pi((0,$t.A)((0,$t.A)({},Ve.validateMessages),se)),fi({"onValuesChange":ce,"onFieldsChange":function onFieldsChange(nt){if(Ve.triggerFormChange(lt,nt),de){for(var at=arguments.length,Rt=new Array(at>1?at-1:0),Bt=1;Bt<at;Bt++)Rt[Bt-1]=arguments[Bt];de.apply(void 0,[nt].concat(Rt))}},"onFinish":function onFinish(nt){Ve.triggerFormFinish(lt,nt),Ae&&Ae(nt)},"onFinishFailed":we}),vi(ne);var _i,bi=Rt.useRef(null);di(Ht,!bi.current),bi.current||(bi.current=!0),Rt.useEffect((function(){return function(){return mi(Ce)}}),[]);var Mi="function"==typeof re;Mi?_i=re(ti.getFieldsValue(!0),ti):_i=re;hi(!Mi);var Ti=Rt.useRef();Rt.useEffect((function(){(function isSimilar(nt,at){if(nt===at)return!0;if(!nt&&at||nt&&!at)return!1;if(!nt||!at||"object"!==(0,ve.A)(nt)||"object"!==(0,ve.A)(at))return!1;var lt=Object.keys(nt),Rt=Object.keys(at),Bt=new Set([].concat(lt,Rt));return(0,Kt.A)(Bt).every((function(lt){var Rt=nt[lt],Bt=at[lt];return"function"==typeof Rt&&"function"==typeof Bt||Rt===Bt}))})(Ti.current||[],jt||[])||ti.setFields(jt||[]),Ti.current=jt}),[jt,ti]);var Ii=Rt.useMemo((function(){return(0,$t.A)((0,$t.A)({},ti),{},{"validateTrigger":ue})}),[ti,ue]),Bi=Rt.createElement(pe.Provider,{"value":null},Rt.createElement(fe.Provider,{"value":Ii},_i));return!1===oe?Bi:Rt.createElement(oe,(0,Bt.A)({},je,{"ref":Ne,"onSubmit":function onSubmit(nt){nt.preventDefault(),nt.stopPropagation(),ti.submit()},"onReset":function onReset(nt){var at;nt.preventDefault(),ti.resetFields(),null===(at=je.onReset)||void 0===at||at.call(je,nt)}}),Bi)};function stringify(nt){try{return JSON.stringify(nt)}catch(nt){return Math.random()}}var useWatchWarning=function(){};var Cn=function useWatch(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];var Bt=at[0],Lt=at[1],Ht=void 0===Lt?{}:Lt,jt=function isFormInstance(nt){return nt&&!!nt._init}(Ht)?{"form":Ht}:Ht,$t=jt.form,Kt=(0,Rt.useState)(),te=(0,fn.A)(Kt,2),ne=te[0],re=te[1],ae=(0,Rt.useMemo)((function(){return stringify(ne)}),[ne]),oe=(0,Rt.useRef)(ae);oe.current=ae;var se=(0,Rt.useContext)(fe),le=$t||se,ue=le&&le._init,ce=getNamePath(Bt),de=(0,Rt.useRef)(ce);return de.current=ce,useWatchWarning(ce),(0,Rt.useEffect)((function(){if(ue){var nt=le.getFieldsValue,at=(0,le.getInternalHooks)(he).registerWatch,lt=function getWatchValue(nt,at){var lt=jt.preserve?at:nt;return"function"==typeof Bt?Bt(lt):(0,$i.A)(lt,de.current)},Rt=at((function(nt,at){var Rt=lt(nt,at),Bt=stringify(Rt);oe.current!==Bt&&(oe.current=Bt,re(Rt))})),Lt=lt(nt(),nt(!0));return ne!==Lt&&re(Lt),Rt}}),[ue]),ne},Mn=Rt.forwardRef(wn);Mn.FormProvider=kn,Mn.Field=Ji,Mn.List=dn,Mn.useForm=bn,Mn.useWatch=Cn;var Tn=Mn},"3295":function(nt,at,lt){"use strict";lt.d(at,{"aF":function(){return _n},"Kq":function(){return MotionProvider},"Ay":function(){return bn}});var Rt=lt(6640),Bt=lt(1950),Lt=lt(9859),Ht=lt(8299),jt=lt(7500),$t=lt.n(jt),Kt=lt(8636),te=lt(15),ne=lt(758),re=lt(5985),ae=["children"],oe=ne.createContext({});function MotionProvider(nt){var at=nt.children,lt=(0,re.A)(nt,ae);return ne.createElement(oe.Provider,{"value":lt},at)}var se=lt(6214),le=lt(7584),ue=lt(542),ce=lt(8527),he=function(nt){(0,ue.A)(DomWrapper,nt);var at=(0,ce.A)(DomWrapper);function DomWrapper(){return(0,se.A)(this,DomWrapper),at.apply(this,arguments)}return(0,le.A)(DomWrapper,[{"key":"render","value":function render(){return this.props.children}}]),DomWrapper}(ne.Component),de=he,fe=lt(2110),pe=lt(1089),ve=lt(6812);var Ae="none",we="appear",Ce="enter",je="leave",Ne="none",Ve="prepare",Ge="start",ti="active",li="end",hi="prepared",di=lt(9942);function makePrefixMap(nt,at){var lt={};return lt[nt.toLowerCase()]=at.toLowerCase(),lt["Webkit".concat(nt)]="webkit".concat(at),lt["Moz".concat(nt)]="moz".concat(at),lt["ms".concat(nt)]="MS".concat(at),lt["O".concat(nt)]="o".concat(at.toLowerCase()),lt}var fi=function getVendorPrefixes(nt,at){var lt={"animationend":makePrefixMap("Animation","AnimationEnd"),"transitionend":makePrefixMap("Transition","TransitionEnd")};return nt&&("AnimationEvent"in at||delete lt.animationend.animation,"TransitionEvent"in at||delete lt.transitionend.transition),lt}((0,di.A)(),"undefined"!=typeof window?window:{}),pi={};if((0,di.A)()){var vi=document.createElement("div");pi=vi.style}var mi={};function getVendorPrefixedEventName(nt){if(mi[nt])return mi[nt];var at=fi[nt];if(at)for(var lt=Object.keys(at),Rt=lt.length,Bt=0;Bt<Rt;Bt+=1){var Lt=lt[Bt];if(Object.prototype.hasOwnProperty.call(at,Lt)&&Lt in pi)return mi[nt]=at[Lt],mi[nt]}return""}var _i=getVendorPrefixedEventName("animationend"),bi=getVendorPrefixedEventName("transitionend"),Mi=!(!_i||!bi),Ti=_i||"animationend",Ii=bi||"transitionend";function getTransitionName(nt,at){return nt?"object"===(0,Ht.A)(nt)?nt[at.replace(/-\w/g,(function(nt){return nt[1].toUpperCase()}))]:"".concat(nt,"-").concat(at):null}var Bi=(0,di.A)()?ne.useLayoutEffect:ne.useEffect,zi=lt(6667),Wi=[Ve,Ge,ti,li],Ui=[Ve,hi],$i=!1;function isActive(nt){return nt===ti||nt===li}var useStepQueue=function(nt,at,lt){var Rt=(0,pe.A)(Ne),Bt=(0,Lt.A)(Rt,2),Ht=Bt[0],jt=Bt[1],$t=function(){var nt=ne.useRef(null);function cancelNextFrame(){zi.A.cancel(nt.current)}return ne.useEffect((function(){return function(){cancelNextFrame()}}),[]),[function nextFrame(at){var lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;cancelNextFrame();var Rt=(0,zi.A)((function(){lt<=1?at({"isCanceled":function isCanceled(){return Rt!==nt.current}}):nextFrame(at,lt-1)}));nt.current=Rt},cancelNextFrame]}(),Kt=(0,Lt.A)($t,2),te=Kt[0],re=Kt[1];var ae=at?Ui:Wi;return Bi((function(){if(Ht!==Ne&&Ht!==li){var nt=ae.indexOf(Ht),at=ae[nt+1],Rt=lt(Ht);Rt===$i?jt(at,!0):at&&te((function(nt){function doNext(){nt.isCanceled()||jt(at,!0)}!0===Rt?doNext():Promise.resolve(Rt).then(doNext)}))}}),[nt,Ht]),ne.useEffect((function(){return function(){re()}}),[]),[function startQueue(){jt(Ve,!0)},Ht]};function useStatus(nt,at,lt,Ht){var jt=Ht.motionEnter,$t=void 0===jt||jt,Kt=Ht.motionAppear,te=void 0===Kt||Kt,re=Ht.motionLeave,ae=void 0===re||re,oe=Ht.motionDeadline,se=Ht.motionLeaveImmediately,le=Ht.onAppearPrepare,ue=Ht.onEnterPrepare,ce=Ht.onLeavePrepare,he=Ht.onAppearStart,de=Ht.onEnterStart,Ne=Ht.onLeaveStart,li=Ht.onAppearActive,di=Ht.onEnterActive,fi=Ht.onLeaveActive,pi=Ht.onAppearEnd,vi=Ht.onEnterEnd,mi=Ht.onLeaveEnd,_i=Ht.onVisibleChanged,bi=(0,pe.A)(),Mi=(0,Lt.A)(bi,2),zi=Mi[0],Wi=Mi[1],Ui=function useSyncState(nt){var at=ne.useReducer((function(nt){return nt+1}),0),lt=(0,Lt.A)(at,2)[1],Rt=ne.useRef(nt);return[(0,ve.A)((function(){return Rt.current})),(0,ve.A)((function(nt){Rt.current="function"==typeof nt?nt(Rt.current):nt,lt()}))]}(Ae),qi=(0,Lt.A)(Ui,2),Ki=qi[0],Qi=qi[1],Ji=(0,pe.A)(null),dn=(0,Lt.A)(Ji,2),fn=dn[0],vn=dn[1],gn=Ki(),yn=(0,ne.useRef)(!1),mn=(0,ne.useRef)(null);function getDomElement(){return lt()}var _n=(0,ne.useRef)(!1);function updateMotionEndStatus(){Qi(Ae),vn(null,!0)}var bn=(0,fe._q)((function(nt){var at=Ki();if(at!==Ae){var lt=getDomElement();if(!nt||nt.deadline||nt.target===lt){var Rt,Bt=_n.current;at===we&&Bt?Rt=null==pi?void 0:pi(lt,nt):at===Ce&&Bt?Rt=null==vi?void 0:vi(lt,nt):at===je&&Bt&&(Rt=null==mi?void 0:mi(lt,nt)),Bt&&!1!==Rt&&updateMotionEndStatus()}}})),xn=function(nt){var at=(0,ne.useRef)();function removeMotionEvents(at){at&&(at.removeEventListener(Ii,nt),at.removeEventListener(Ti,nt))}return ne.useEffect((function(){return function(){removeMotionEvents(at.current)}}),[]),[function patchMotionEvents(lt){at.current&&at.current!==lt&&removeMotionEvents(at.current),lt&&lt!==at.current&&(lt.addEventListener(Ii,nt),lt.addEventListener(Ti,nt),at.current=lt)},removeMotionEvents]}(bn),kn=(0,Lt.A)(xn,1)[0],Sn=function getEventHandlers(nt){switch(nt){case we:return(0,Rt.A)((0,Rt.A)((0,Rt.A)({},Ve,le),Ge,he),ti,li);case Ce:return(0,Rt.A)((0,Rt.A)((0,Rt.A)({},Ve,ue),Ge,de),ti,di);case je:return(0,Rt.A)((0,Rt.A)((0,Rt.A)({},Ve,ce),Ge,Ne),ti,fi);default:return{}}},An=ne.useMemo((function(){return Sn(gn)}),[gn]),wn=useStepQueue(gn,!nt,(function(nt){if(nt===Ve){var at=An[Ve];return at?at(getDomElement()):$i}var lt;Tn in An&&vn((null===(lt=An[Tn])||void 0===lt?void 0:lt.call(An,getDomElement(),null))||null);return Tn===ti&&gn!==Ae&&(kn(getDomElement()),oe>0&&(clearTimeout(mn.current),mn.current=setTimeout((function(){bn({"deadline":!0})}),oe))),Tn===hi&&updateMotionEndStatus(),true})),Cn=(0,Lt.A)(wn,2),Mn=Cn[0],Tn=Cn[1],En=isActive(Tn);_n.current=En;var Pn=(0,ne.useRef)(null);Bi((function(){if(!yn.current||Pn.current!==at){Wi(at);var lt,Rt=yn.current;yn.current=!0,!Rt&&at&&te&&(lt=we),Rt&&at&&$t&&(lt=Ce),(Rt&&!at&&ae||!Rt&&se&&!at&&ae)&&(lt=je);var Bt=Sn(lt);lt&&(nt||Bt[Ve])?(Qi(lt),Mn()):Qi(Ae),Pn.current=at}}),[at]),(0,ne.useEffect)((function(){(gn===we&&!te||gn===Ce&&!$t||gn===je&&!ae)&&Qi(Ae)}),[te,$t,ae]),(0,ne.useEffect)((function(){return function(){yn.current=!1,clearTimeout(mn.current)}}),[]);var Rn=ne.useRef(!1);(0,ne.useEffect)((function(){zi&&(Rn.current=!0),void 0!==zi&&gn===Ae&&((Rn.current||zi)&&(null==_i||_i(zi)),Rn.current=!0)}),[zi,gn]);var On=fn;return An[Ve]&&Tn===Ge&&(On=(0,Bt.A)({"transition":"none"},On)),[gn,Tn,On,null!=zi?zi:at]}var qi=function genCSSMotion(nt){var at=nt;"object"===(0,Ht.A)(nt)&&(at=nt.transitionSupport);var lt=ne.forwardRef((function(nt,lt){var Ht=nt.visible,jt=void 0===Ht||Ht,re=nt.removeOnLeave,ae=void 0===re||re,se=nt.forceRender,le=nt.children,ue=nt.motionName,ce=nt.leavedClassName,he=nt.eventProps,fe=function isSupportTransition(nt,lt){return!(!nt.motionName||!at||!1===lt)}(nt,ne.useContext(oe).motion),pe=(0,ne.useRef)(),ve=(0,ne.useRef)();var we=useStatus(fe,jt,(function getDomElement(){try{return pe.current instanceof HTMLElement?pe.current:(0,Kt.Ay)(ve.current)}catch(nt){return null}}),nt),Ce=(0,Lt.A)(we,4),je=Ce[0],Ne=Ce[1],ti=Ce[2],li=Ce[3],hi=ne.useRef(li);li&&(hi.current=!0);var di,fi=ne.useCallback((function(nt){pe.current=nt,(0,te.Xf)(lt,nt)}),[lt]),pi=(0,Bt.A)((0,Bt.A)({},he),{},{"visible":jt});if(le)if(je===Ae)di=li?le((0,Bt.A)({},pi),fi):!ae&&hi.current&&ce?le((0,Bt.A)((0,Bt.A)({},pi),{},{"className":ce}),fi):se||!ae&&!ce?le((0,Bt.A)((0,Bt.A)({},pi),{},{"style":{"display":"none"}}),fi):null;else{var vi;Ne===Ve?vi="prepare":isActive(Ne)?vi="active":Ne===Ge&&(vi="start");var mi=getTransitionName(ue,"".concat(je,"-").concat(vi));di=le((0,Bt.A)((0,Bt.A)({},pi),{},{"className":$t()(getTransitionName(ue,je),(0,Rt.A)((0,Rt.A)({},mi,mi&&vi),ue,"string"==typeof ue)),"style":ti}),fi)}else di=null;ne.isValidElement(di)&&(0,te.f3)(di)&&((0,te.A9)(di)||(di=ne.cloneElement(di,{"ref":fi})));return ne.createElement(de,{"ref":ve},di)}));return lt.displayName="CSSMotion",lt}(Mi),Ki=lt(3973),Qi=lt(2320),Ji="add",dn="keep",fn="remove",vn="removed";function wrapKeyToObject(nt){var at;return at=nt&&"object"===(0,Ht.A)(nt)&&"key"in nt?nt:{"key":nt},(0,Bt.A)((0,Bt.A)({},at),{},{"key":String(at.key)})}function parseKeys(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(wrapKeyToObject)}var gn=["component","children","onVisibleChanged","onAllRemoved"],yn=["status"],mn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var _n=function genCSSMotionList(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qi,lt=function(nt){(0,ue.A)(CSSMotionList,nt);var lt=(0,ce.A)(CSSMotionList);function CSSMotionList(){var nt;(0,se.A)(this,CSSMotionList);for(var at=arguments.length,Lt=new Array(at),Ht=0;Ht<at;Ht++)Lt[Ht]=arguments[Ht];return nt=lt.call.apply(lt,[this].concat(Lt)),(0,Rt.A)((0,Qi.A)(nt),"state",{"keyEntities":[]}),(0,Rt.A)((0,Qi.A)(nt),"removeKey",(function(at){nt.setState((function(nt){return{"keyEntities":nt.keyEntities.map((function(nt){return nt.key!==at?nt:(0,Bt.A)((0,Bt.A)({},nt),{},{"status":vn})}))}}),(function(){0===nt.state.keyEntities.filter((function(nt){return nt.status!==vn})).length&&nt.props.onAllRemoved&&nt.props.onAllRemoved()}))})),nt}return(0,le.A)(CSSMotionList,[{"key":"render","value":function render(){var nt=this,lt=this.state.keyEntities,Rt=this.props,Lt=Rt.component,Ht=Rt.children,jt=Rt.onVisibleChanged,$t=(Rt.onAllRemoved,(0,re.A)(Rt,gn)),Kt=Lt||ne.Fragment,te={};return mn.forEach((function(nt){te[nt]=$t[nt],delete $t[nt]})),delete $t.keys,ne.createElement(Kt,$t,lt.map((function(lt,Rt){var Lt=lt.status,$t=(0,re.A)(lt,yn),Kt=Lt===Ji||Lt===dn;return ne.createElement(at,(0,Ki.A)({},te,{"key":$t.key,"visible":Kt,"eventProps":$t,"onVisibleChanged":function onVisibleChanged(at){null==jt||jt(at,{"key":$t.key}),at||nt.removeKey($t.key)}}),(function(nt,at){return Ht((0,Bt.A)((0,Bt.A)({},nt),{},{"index":Rt}),at)}))})))}}],[{"key":"getDerivedStateFromProps","value":function getDerivedStateFromProps(nt,at){var lt=nt.keys,Rt=at.keyEntities,Lt=parseKeys(lt),Ht=function diffKeys(){var nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],lt=[],Rt=0,Lt=at.length,Ht=parseKeys(nt),jt=parseKeys(at);Ht.forEach((function(nt){for(var at=!1,Ht=Rt;Ht<Lt;Ht+=1){var $t=jt[Ht];if($t.key===nt.key){Rt<Ht&&(lt=lt.concat(jt.slice(Rt,Ht).map((function(nt){return(0,Bt.A)((0,Bt.A)({},nt),{},{"status":Ji})}))),Rt=Ht),lt.push((0,Bt.A)((0,Bt.A)({},$t),{},{"status":dn})),Rt+=1,at=!0;break}}at||lt.push((0,Bt.A)((0,Bt.A)({},nt),{},{"status":fn}))})),Rt<Lt&&(lt=lt.concat(jt.slice(Rt).map((function(nt){return(0,Bt.A)((0,Bt.A)({},nt),{},{"status":Ji})}))));var $t={};return lt.forEach((function(nt){var at=nt.key;$t[at]=($t[at]||0)+1})),Object.keys($t).filter((function(nt){return $t[nt]>1})).forEach((function(nt){(lt=lt.filter((function(at){var lt=at.key,Rt=at.status;return lt!==nt||Rt!==fn}))).forEach((function(at){at.key===nt&&(at.status=dn)}))})),lt}(Rt,Lt);return{"keyEntities":Ht.filter((function(nt){var at=Rt.find((function(at){var lt=at.key;return nt.key===lt}));return!at||at.status!==vn||nt.status!==fn}))}}}]),CSSMotionList}(ne.Component);return(0,Rt.A)(lt,"defaultProps",{"component":"div"}),lt}(Mi),bn=qi},"664":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return Ge}});var Rt=lt(3973),Bt=lt(1950),Lt=lt(9859),Ht=lt(5985),jt=lt(758),$t=lt(7500),Kt=lt.n($t),te=lt(5113),ne=lt(5429),re=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],ae=void 0;function InternalItem(nt,at){var lt=nt.prefixCls,Lt=nt.invalidate,$t=nt.item,ne=nt.renderItem,oe=nt.responsive,se=nt.responsiveDisabled,le=nt.registerSize,ue=nt.itemKey,ce=nt.className,he=nt.style,de=nt.children,fe=nt.display,pe=nt.order,ve=nt.component,Ae=void 0===ve?"div":ve,we=(0,Ht.A)(nt,re),Ce=oe&&!fe;function internalRegisterSize(nt){le(ue,nt)}jt.useEffect((function(){return function(){internalRegisterSize(null)}}),[]);var je,Ne=ne&&$t!==ae?ne($t,{"index":pe}):de;Lt||(je={"opacity":Ce?0:1,"height":Ce?0:ae,"overflowY":Ce?"hidden":ae,"order":oe?pe:ae,"pointerEvents":Ce?"none":ae,"position":Ce?"absolute":ae});var Ve={};Ce&&(Ve["aria-hidden"]=!0);var Ge=jt.createElement(Ae,(0,Rt.A)({"className":Kt()(!Lt&&lt,ce),"style":(0,Bt.A)((0,Bt.A)({},je),he)},Ve,we,{"ref":at}),Ne);return oe&&(Ge=jt.createElement(te.A,{"onResize":function onResize(nt){internalRegisterSize(nt.offsetWidth)},"disabled":se},Ge)),Ge}var oe=jt.forwardRef(InternalItem);oe.displayName="Item";var se=oe,le=lt(6812),ue=lt(8143),ce=lt(6667);function useBatcher(){var nt=jt.useRef(null);return function notifyEffectUpdate(at){nt.current||(nt.current=[],function channelUpdate(nt){if("undefined"==typeof MessageChannel)(0,ce.A)(nt);else{var at=new MessageChannel;at.port1.onmessage=function(){return nt()},at.port2.postMessage(void 0)}}((function(){(0,ue.unstable_batchedUpdates)((function(){nt.current.forEach((function(nt){nt()})),nt.current=null}))}))),nt.current.push(at)}}function useEffectState(nt,at){var lt=jt.useState(at),Rt=(0,Lt.A)(lt,2),Bt=Rt[0],Ht=Rt[1];return[Bt,(0,le.A)((function(at){nt((function(){Ht(at)}))}))]}var he=jt.createContext(null),de=["component"],fe=["className"],pe=["className"],ve=function InternalRawItem(nt,at){var lt=jt.useContext(he);if(!lt){var Bt=nt.component,Lt=void 0===Bt?"div":Bt,$t=(0,Ht.A)(nt,de);return jt.createElement(Lt,(0,Rt.A)({},$t,{"ref":at}))}var te=lt.className,ne=(0,Ht.A)(lt,fe),re=nt.className,ae=(0,Ht.A)(nt,pe);return jt.createElement(he.Provider,{"value":null},jt.createElement(se,(0,Rt.A)({"ref":at,"className":Kt()(te,re)},ne,ae)))},Ae=jt.forwardRef(ve);Ae.displayName="RawItem";var we=Ae,Ce=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],je="responsive",Ne="invalidate";function defaultRenderRest(nt){return"+ ".concat(nt.length," ...")}function Overflow(nt,at){var lt=nt.prefixCls,$t=void 0===lt?"rc-overflow":lt,re=nt.data,ae=void 0===re?[]:re,oe=nt.renderItem,le=nt.renderRawItem,ue=nt.itemKey,ce=nt.itemWidth,de=void 0===ce?10:ce,fe=nt.ssr,pe=nt.style,ve=nt.className,Ae=nt.maxCount,we=nt.renderRest,Ve=nt.renderRawRest,Ge=nt.suffix,ti=nt.component,li=void 0===ti?"div":ti,hi=nt.itemComponent,di=nt.onVisibleChange,fi=(0,Ht.A)(nt,Ce),pi="full"===fe,vi=useBatcher(),mi=useEffectState(vi,null),_i=(0,Lt.A)(mi,2),bi=_i[0],Mi=_i[1],Ti=bi||0,Ii=useEffectState(vi,new Map),Bi=(0,Lt.A)(Ii,2),zi=Bi[0],Wi=Bi[1],Ui=useEffectState(vi,0),$i=(0,Lt.A)(Ui,2),qi=$i[0],Ki=$i[1],Qi=useEffectState(vi,0),Ji=(0,Lt.A)(Qi,2),dn=Ji[0],fn=Ji[1],vn=useEffectState(vi,0),gn=(0,Lt.A)(vn,2),yn=gn[0],mn=gn[1],_n=(0,jt.useState)(null),bn=(0,Lt.A)(_n,2),xn=bn[0],kn=bn[1],Sn=(0,jt.useState)(null),An=(0,Lt.A)(Sn,2),wn=An[0],Cn=An[1],Mn=jt.useMemo((function(){return null===wn&&pi?Number.MAX_SAFE_INTEGER:wn||0}),[wn,bi]),Tn=(0,jt.useState)(!1),En=(0,Lt.A)(Tn,2),Pn=En[0],Rn=En[1],On="".concat($t,"-item"),Fn=Math.max(qi,dn),or=Ae===je,sr=ae.length&&or,lr=Ae===Ne,vr=sr||"number"==typeof Ae&&ae.length>Ae,yr=(0,jt.useMemo)((function(){var nt=ae;return sr?nt=null===bi&&pi?ae:ae.slice(0,Math.min(ae.length,Ti/de)):"number"==typeof Ae&&(nt=ae.slice(0,Ae)),nt}),[ae,de,bi,Ae,sr]),mr=(0,jt.useMemo)((function(){return sr?ae.slice(Mn+1):ae.slice(yr.length)}),[ae,yr,sr,Mn]),xr=(0,jt.useCallback)((function(nt,at){var lt;return"function"==typeof ue?ue(nt):null!==(lt=ue&&(null==nt?void 0:nt[ue]))&&void 0!==lt?lt:at}),[ue]),kr=(0,jt.useCallback)(oe||function(nt){return nt},[oe]);function updateDisplayCount(nt,at,lt){(wn!==nt||void 0!==at&&at!==xn)&&(Cn(nt),lt||(Rn(nt<ae.length-1),null==di||di(nt)),void 0!==at&&kn(at))}function registerSize(nt,at){Wi((function(lt){var Rt=new Map(lt);return null===at?Rt.delete(nt):Rt.set(nt,at),Rt}))}function getItemWidth(nt){return zi.get(xr(yr[nt],nt))}(0,ne.A)((function(){if(Ti&&"number"==typeof Fn&&yr){var nt=yn,at=yr.length,lt=at-1;if(!at)return void updateDisplayCount(0,null);for(var Rt=0;Rt<at;Rt+=1){var Bt=getItemWidth(Rt);if(pi&&(Bt=Bt||0),void 0===Bt){updateDisplayCount(Rt-1,void 0,!0);break}if(nt+=Bt,0===lt&&nt<=Ti||Rt===lt-1&&nt+getItemWidth(lt)<=Ti){updateDisplayCount(lt,null);break}if(nt+Fn>Ti){updateDisplayCount(Rt-1,nt-Bt-yn+dn);break}}Ge&&getItemWidth(0)+yn>Ti&&kn(null)}}),[Ti,zi,dn,yn,xr,yr]);var Sr=Pn&&!!mr.length,Ar={};null!==xn&&sr&&(Ar={"position":"absolute","left":xn,"top":0});var wr={"prefixCls":On,"responsive":sr,"component":hi,"invalidate":lr},Mr=le?function(nt,at){var lt=xr(nt,at);return jt.createElement(he.Provider,{"key":lt,"value":(0,Bt.A)((0,Bt.A)({},wr),{},{"order":at,"item":nt,"itemKey":lt,"registerSize":registerSize,"display":at<=Mn})},le(nt,at))}:function(nt,at){var lt=xr(nt,at);return jt.createElement(se,(0,Rt.A)({},wr,{"order":at,"key":lt,"item":nt,"renderItem":kr,"itemKey":lt,"registerSize":registerSize,"display":at<=Mn}))},Tr={"order":Sr?Mn:Number.MAX_SAFE_INTEGER,"className":"".concat(On,"-rest"),"registerSize":function registerOverflowSize(nt,at){fn(at),Ki(dn)},"display":Sr},Ir=we||defaultRenderRest,Br=Ve?jt.createElement(he.Provider,{"value":(0,Bt.A)((0,Bt.A)({},wr),Tr)},Ve(mr)):jt.createElement(se,(0,Rt.A)({},wr,Tr),"function"==typeof Ir?Ir(mr):Ir),Or=jt.createElement(li,(0,Rt.A)({"className":Kt()(!lr&&$t,ve),"style":pe,"ref":at},fi),yr.map(Mr),vr?Br:null,Ge&&jt.createElement(se,(0,Rt.A)({},wr,{"responsive":or,"responsiveDisabled":!sr,"order":Mn,"className":"".concat(On,"-suffix"),"registerSize":function registerSuffixSize(nt,at){mn(at)},"display":!0,"style":Ar}),Ge));return or?jt.createElement(te.A,{"onResize":function onOverflowResize(nt,at){Mi(at.clientWidth)},"disabled":!sr},Or):Or}var Ve=jt.forwardRef(Overflow);Ve.displayName="Overflow",Ve.Item=we,Ve.RESPONSIVE=je,Ve.INVALIDATE=Ne;var Ge=Ve},"2312":function(nt,at){"use strict";at.A={"items_per_page":"/ page","jump_to":"Go to","jump_to_confirm":"confirm","page":"Page","prev_page":"Previous Page","next_page":"Next Page","prev_5":"Previous 5 Pages","next_5":"Next 5 Pages","prev_3":"Previous 3 Pages","next_3":"Next 3 Pages","page_size":"Page Size"}},"5113":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return fi}});var Rt=lt(3973),Bt=lt(758),Lt=lt(7570),Ht=(lt(1378),lt(1950)),jt=lt(8299),$t=lt(8636),Kt=lt(15),te=Bt.createContext(null);var ne=function(){if("undefined"!=typeof Map)return Map;function getIndex(nt,at){var lt=-1;return nt.some((function(nt,Rt){return nt[0]===at&&(lt=Rt,!0)})),lt}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{"get":function(){return this.__entries__.length},"enumerable":!0,"configurable":!0}),class_1.prototype.get=function(nt){var at=getIndex(this.__entries__,nt),lt=this.__entries__[at];return lt&&lt[1]},class_1.prototype.set=function(nt,at){var lt=getIndex(this.__entries__,nt);~lt?this.__entries__[lt][1]=at:this.__entries__.push([nt,at])},class_1.prototype.delete=function(nt){var at=this.__entries__,lt=getIndex(at,nt);~lt&&at.splice(lt,1)},class_1.prototype.has=function(nt){return!!~getIndex(this.__entries__,nt)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(nt,at){void 0===at&&(at=null);for(var lt=0,Rt=this.__entries__;lt<Rt.length;lt++){var Bt=Rt[lt];nt.call(at,Bt[1],Bt[0])}},class_1}()}(),re="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ae=void 0!==lt.g&&lt.g.Math===Math?lt.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),oe="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ae):function(nt){return setTimeout((function(){return nt(Date.now())}),1e3/60)};var se=["top","right","bottom","left","width","height","size","weight"],le="undefined"!=typeof MutationObserver,ue=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(nt,at){var lt=!1,Rt=!1,Bt=0;function resolvePending(){lt&&(lt=!1,nt()),Rt&&proxy()}function timeoutCallback(){oe(resolvePending)}function proxy(){var nt=Date.now();if(lt){if(nt-Bt<2)return;Rt=!0}else lt=!0,Rt=!1,setTimeout(timeoutCallback,at);Bt=nt}return proxy}(this.refresh.bind(this),20)}return ResizeObserverController.prototype.addObserver=function(nt){~this.observers_.indexOf(nt)||this.observers_.push(nt),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(nt){var at=this.observers_,lt=at.indexOf(nt);~lt&&at.splice(lt,1),!at.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var nt=this.observers_.filter((function(nt){return nt.gatherActive(),nt.hasActive()}));return nt.forEach((function(nt){return nt.broadcastActive()})),nt.length>0},ResizeObserverController.prototype.connect_=function(){re&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),le?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{"attributes":!0,"childList":!0,"characterData":!0,"subtree":!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){re&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(nt){var at=nt.propertyName,lt=void 0===at?"":at;se.some((function(nt){return!!~lt.indexOf(nt)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(nt,at){for(var lt=0,Rt=Object.keys(at);lt<Rt.length;lt++){var Bt=Rt[lt];Object.defineProperty(nt,Bt,{"value":at[Bt],"enumerable":!1,"writable":!1,"configurable":!0})}return nt},getWindowOf=function(nt){return nt&&nt.ownerDocument&&nt.ownerDocument.defaultView||ae},ce=createRectInit(0,0,0,0);function toFloat(nt){return parseFloat(nt)||0}function getBordersSize(nt){for(var at=[],lt=1;lt<arguments.length;lt++)at[lt-1]=arguments[lt];return at.reduce((function(at,lt){return at+toFloat(nt["border-"+lt+"-width"])}),0)}function getHTMLElementContentRect(nt){var at=nt.clientWidth,lt=nt.clientHeight;if(!at&&!lt)return ce;var Rt=getWindowOf(nt).getComputedStyle(nt),Bt=function getPaddings(nt){for(var at={},lt=0,Rt=["top","right","bottom","left"];lt<Rt.length;lt++){var Bt=Rt[lt],Lt=nt["padding-"+Bt];at[Bt]=toFloat(Lt)}return at}(Rt),Lt=Bt.left+Bt.right,Ht=Bt.top+Bt.bottom,jt=toFloat(Rt.width),$t=toFloat(Rt.height);if("border-box"===Rt.boxSizing&&(Math.round(jt+Lt)!==at&&(jt-=getBordersSize(Rt,"left","right")+Lt),Math.round($t+Ht)!==lt&&($t-=getBordersSize(Rt,"top","bottom")+Ht)),!function isDocumentElement(nt){return nt===getWindowOf(nt).document.documentElement}(nt)){var Kt=Math.round(jt+Lt)-at,te=Math.round($t+Ht)-lt;1!==Math.abs(Kt)&&(jt-=Kt),1!==Math.abs(te)&&($t-=te)}return createRectInit(Bt.left,Bt.top,jt,$t)}var he="undefined"!=typeof SVGGraphicsElement?function(nt){return nt instanceof getWindowOf(nt).SVGGraphicsElement}:function(nt){return nt instanceof getWindowOf(nt).SVGElement&&"function"==typeof nt.getBBox};function getContentRect(nt){return re?he(nt)?function getSVGContentRect(nt){var at=nt.getBBox();return createRectInit(0,0,at.width,at.height)}(nt):getHTMLElementContentRect(nt):ce}function createRectInit(nt,at,lt,Rt){return{"x":nt,"y":at,"width":lt,"height":Rt}}var de=function(){function ResizeObservation(nt){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=nt}return ResizeObservation.prototype.isActive=function(){var nt=getContentRect(this.target);return this.contentRect_=nt,nt.width!==this.broadcastWidth||nt.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var nt=this.contentRect_;return this.broadcastWidth=nt.width,this.broadcastHeight=nt.height,nt},ResizeObservation}(),fe=function fe(nt,at){var lt=function createReadOnlyRect(nt){var at=nt.x,lt=nt.y,Rt=nt.width,Bt=nt.height,Lt="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,Ht=Object.create(Lt.prototype);return defineConfigurable(Ht,{"x":at,"y":lt,"width":Rt,"height":Bt,"top":lt,"right":at+Rt,"bottom":Bt+lt,"left":at}),Ht}(at);defineConfigurable(this,{"target":nt,"contentRect":lt})},pe=function(){function ResizeObserverSPI(nt,at,lt){if(this.activeObservations_=[],this.observations_=new ne,"function"!=typeof nt)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=nt,this.controller_=at,this.callbackCtx_=lt}return ResizeObserverSPI.prototype.observe=function(nt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(nt instanceof getWindowOf(nt).Element))throw new TypeError('parameter 1 is not of type "Element".');var at=this.observations_;at.has(nt)||(at.set(nt,new de(nt)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(nt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(nt instanceof getWindowOf(nt).Element))throw new TypeError('parameter 1 is not of type "Element".');var at=this.observations_;at.has(nt)&&(at.delete(nt),at.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var nt=this;this.clearActive(),this.observations_.forEach((function(at){at.isActive()&&nt.activeObservations_.push(at)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var nt=this.callbackCtx_,at=this.activeObservations_.map((function(nt){return new fe(nt.target,nt.broadcastRect())}));this.callback_.call(nt,at,nt),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),ve="undefined"!=typeof WeakMap?new WeakMap:new ne,Ae=function ResizeObserver(nt){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var at=ue.getInstance(),lt=new pe(nt,at,this);ve.set(this,lt)};["observe","unobserve","disconnect"].forEach((function(nt){Ae.prototype[nt]=function(){var at;return(at=ve.get(this))[nt].apply(at,arguments)}}));var we=void 0!==ae.ResizeObserver?ae.ResizeObserver:Ae,Ce=new Map;var je=new we((function onResize(nt){nt.forEach((function(nt){var at,lt=nt.target;null===(at=Ce.get(lt))||void 0===at||at.forEach((function(nt){return nt(lt)}))}))}));var Ne=lt(6214),Ve=lt(7584),Ge=lt(542),ti=lt(8527),li=function(nt){(0,Ge.A)(DomWrapper,nt);var at=(0,ti.A)(DomWrapper);function DomWrapper(){return(0,Ne.A)(this,DomWrapper),at.apply(this,arguments)}return(0,Ve.A)(DomWrapper,[{"key":"render","value":function render(){return this.props.children}}]),DomWrapper}(Bt.Component);function SingleObserver(nt,at){var lt=nt.children,Rt=nt.disabled,Lt=Bt.useRef(null),ne=Bt.useRef(null),re=Bt.useContext(te),ae="function"==typeof lt,oe=ae?lt(Lt):lt,se=Bt.useRef({"width":-1,"height":-1,"offsetWidth":-1,"offsetHeight":-1}),le=!ae&&Bt.isValidElement(oe)&&(0,Kt.f3)(oe),ue=le?(0,Kt.A9)(oe):null,ce=(0,Kt.xK)(ue,Lt),he=function getDom(){var nt;return(0,$t.Ay)(Lt.current)||(Lt.current&&"object"===(0,jt.A)(Lt.current)?(0,$t.Ay)(null===(nt=Lt.current)||void 0===nt?void 0:nt.nativeElement):null)||(0,$t.Ay)(ne.current)};Bt.useImperativeHandle(at,(function(){return he()}));var de=Bt.useRef(nt);de.current=nt;var fe=Bt.useCallback((function(nt){var at=de.current,lt=at.onResize,Rt=at.data,Bt=nt.getBoundingClientRect(),Lt=Bt.width,jt=Bt.height,$t=nt.offsetWidth,Kt=nt.offsetHeight,te=Math.floor(Lt),ne=Math.floor(jt);if(se.current.width!==te||se.current.height!==ne||se.current.offsetWidth!==$t||se.current.offsetHeight!==Kt){var ae={"width":te,"height":ne,"offsetWidth":$t,"offsetHeight":Kt};se.current=ae;var oe=$t===Math.round(Lt)?Lt:$t,le=Kt===Math.round(jt)?jt:Kt,ue=(0,Ht.A)((0,Ht.A)({},ae),{},{"offsetWidth":oe,"offsetHeight":le});null==re||re(ue,nt,Rt),lt&&Promise.resolve().then((function(){lt(ue,nt)}))}}),[]);return Bt.useEffect((function(){var nt=he();return nt&&!Rt&&function observe(nt,at){Ce.has(nt)||(Ce.set(nt,new Set),je.observe(nt)),Ce.get(nt).add(at)}(nt,fe),function(){return function unobserve(nt,at){Ce.has(nt)&&(Ce.get(nt).delete(at),Ce.get(nt).size||(je.unobserve(nt),Ce.delete(nt)))}(nt,fe)}}),[Lt.current,Rt]),Bt.createElement(li,{"ref":ne},le?Bt.cloneElement(oe,{"ref":ce}):oe)}var hi=Bt.forwardRef(SingleObserver);function es_ResizeObserver(nt,at){var lt=nt.children;return("function"==typeof lt?[lt]:(0,Lt.A)(lt)).map((function(lt,Lt){var Ht=(null==lt?void 0:lt.key)||"".concat("rc-observer-key","-").concat(Lt);return Bt.createElement(hi,(0,Rt.A)({},nt,{"key":Ht,"ref":0===Lt?at:void 0}),lt)}))}var di=Bt.forwardRef(es_ResizeObserver);di.Collection=function Collection(nt){var at=nt.children,lt=nt.onBatchResize,Rt=Bt.useRef(0),Lt=Bt.useRef([]),Ht=Bt.useContext(te),jt=Bt.useCallback((function(nt,at,Bt){Rt.current+=1;var jt=Rt.current;Lt.current.push({"size":nt,"element":at,"data":Bt}),Promise.resolve().then((function(){jt===Rt.current&&(null==lt||lt(Lt.current),Lt.current=[])})),null==Ht||Ht(nt,at,Bt)}),[lt,Ht]);return Bt.createElement(te.Provider,{"value":jt},at)};var fi=di},"7570":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return toArray}});var Rt=lt(1312),Bt=lt(758);function toArray(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=[];return Bt.Children.forEach(nt,(function(nt){(null!=nt||at.keepEmpty)&&(Array.isArray(nt)?lt=lt.concat(toArray(nt)):(0,Rt.A)(nt)&&nt.props?lt=lt.concat(toArray(nt.props.children,at)):lt.push(nt))})),lt}},"9942":function(nt,at,lt){"use strict";function canUseDom(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}lt.d(at,{"A":function(){return canUseDom}})},"3144":function(nt,at,lt){"use strict";lt.d(at,{"m6":function(){return removeCSS},"BD":function(){return updateCSS}});var Rt=lt(1950),Bt=lt(9942);var Lt="data-rc-order",Ht="data-rc-priority",jt="rc-util-key",$t=new Map;function getMark(){var nt=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return nt?nt.startsWith("data-")?nt:"data-".concat(nt):jt}function getContainer(nt){return nt.attachTo?nt.attachTo:document.querySelector("head")||document.body}function findStyles(nt){return Array.from(($t.get(nt)||nt).children).filter((function(nt){return"STYLE"===nt.tagName}))}function injectCSS(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,Bt.A)())return null;var lt=at.csp,Rt=at.prepend,jt=at.priority,$t=void 0===jt?0:jt,Kt=function getOrder(nt){return"queue"===nt?"prependQueue":nt?"prepend":"append"}(Rt),te="prependQueue"===Kt,ne=document.createElement("style");ne.setAttribute(Lt,Kt),te&&$t&&ne.setAttribute(Ht,"".concat($t)),null!=lt&&lt.nonce&&(ne.nonce=null==lt?void 0:lt.nonce),ne.innerHTML=nt;var re=getContainer(at),ae=re.firstChild;if(Rt){if(te){var oe=(at.styles||findStyles(re)).filter((function(nt){if(!["prepend","prependQueue"].includes(nt.getAttribute(Lt)))return!1;var at=Number(nt.getAttribute(Ht)||0);return $t>=at}));if(oe.length)return re.insertBefore(ne,oe[oe.length-1].nextSibling),ne}re.insertBefore(ne,ae)}else re.appendChild(ne);return ne}function findExistNode(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=getContainer(at);return(at.styles||findStyles(lt)).find((function(lt){return lt.getAttribute(getMark(at))===nt}))}function removeCSS(nt){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},lt=findExistNode(nt,at);lt&&getContainer(at).removeChild(lt)}function updateCSS(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Bt=getContainer(lt),Lt=findStyles(Bt),Ht=(0,Rt.A)((0,Rt.A)({},lt),{},{"styles":Lt});!function syncRealContainer(nt,at){var lt=$t.get(nt);if(!lt||!function contains(nt,at){if(!nt)return!1;if(nt.contains)return nt.contains(at);for(var lt=at;lt;){if(lt===nt)return!0;lt=lt.parentNode}return!1}(document,lt)){var Rt=injectCSS("",at),Bt=Rt.parentNode;$t.set(nt,Bt),nt.removeChild(Rt)}}(Bt,Ht);var jt=findExistNode(at,Ht);if(jt){var Kt,te,ne;if(null!==(Kt=Ht.csp)&&void 0!==Kt&&Kt.nonce&&jt.nonce!==(null===(te=Ht.csp)||void 0===te?void 0:te.nonce))jt.nonce=null===(ne=Ht.csp)||void 0===ne?void 0:ne.nonce;return jt.innerHTML!==nt&&(jt.innerHTML=nt),jt}var re=injectCSS(nt,Ht);return re.setAttribute(getMark(Ht),at),re}},"8636":function(nt,at,lt){"use strict";lt.d(at,{"Ay":function(){return findDOMNode},"fk":function(){return isDOM},"rb":function(){return getDOM}});var Rt=lt(8299),Bt=lt(758),Lt=lt(8143);function isDOM(nt){return nt instanceof HTMLElement||nt instanceof SVGElement}function getDOM(nt){return nt&&"object"===(0,Rt.A)(nt)&&isDOM(nt.nativeElement)?nt.nativeElement:isDOM(nt)?nt:null}function findDOMNode(nt){var at,lt=getDOM(nt);return lt||(nt instanceof Bt.Component?null===(at=Lt.findDOMNode)||void 0===at?void 0:at.call(Lt,nt):null)}},"1411":function(nt,at){"use strict";at.A=function(nt){if(!nt)return!1;if(nt instanceof Element){if(nt.offsetParent)return!0;if(nt.getBBox){var at=nt.getBBox(),lt=at.width,Rt=at.height;if(lt||Rt)return!0}if(nt.getBoundingClientRect){var Bt=nt.getBoundingClientRect(),Lt=Bt.width,Ht=Bt.height;if(Lt||Ht)return!0}}return!1}},"9657":function(nt,at,lt){"use strict";function getRoot(nt){var at;return null==nt||null===(at=nt.getRootNode)||void 0===at?void 0:at.call(nt)}function getShadowRoot(nt){return function inShadow(nt){return getRoot(nt)instanceof ShadowRoot}(nt)?getRoot(nt):null}lt.d(at,{"j":function(){return getShadowRoot}})},"1312":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return isFragment}});var Rt=lt(8299),Bt=Symbol.for("react.element"),Lt=Symbol.for("react.transitional.element"),Ht=Symbol.for("react.fragment");function isFragment(nt){return nt&&"object"===(0,Rt.A)(nt)&&(nt.$$typeof===Bt||nt.$$typeof===Lt)&&nt.type===Ht}},"6812":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return useEvent}});var Rt=lt(758);function useEvent(nt){var at=Rt.useRef();at.current=nt;var lt=Rt.useCallback((function(){for(var nt,lt=arguments.length,Rt=new Array(lt),Bt=0;Bt<lt;Bt++)Rt[Bt]=arguments[Bt];return null===(nt=at.current)||void 0===nt?void 0:nt.call.apply(nt,[at].concat(Rt))}),[]);return lt}},"9511":function(nt,at,lt){"use strict";var Rt,Bt=lt(9859),Lt=lt(1950),Ht=lt(758);var jt=0;var $t=function getUseId(){return(0,Lt.A)({},Rt||(Rt=lt.t(Ht,2))).useId}();at.A=$t?function useId(nt){var at=$t();return nt||at}:function useCompatId(nt){var at=Ht.useState("ssr-id"),lt=(0,Bt.A)(at,2),Rt=lt[0],Lt=lt[1];return Ht.useEffect((function(){var nt=jt;jt+=1,Lt("rc_unique_".concat(nt))}),[]),nt||Rt}},"5429":function(nt,at,lt){"use strict";lt.d(at,{"o":function(){return Ht}});var Rt=lt(758),Bt=(0,lt(9942).A)()?Rt.useLayoutEffect:Rt.useEffect,Lt=function useLayoutEffect(nt,at){var lt=Rt.useRef(!0);Bt((function(){return nt(lt.current)}),at),Bt((function(){return lt.current=!1,function(){lt.current=!0}}),[])},Ht=function useLayoutUpdateEffect(nt,at){Lt((function(at){if(!at)return nt()}),at)};at.A=Lt},"3400":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return useMemo}});var Rt=lt(758);function useMemo(nt,at,lt){var Bt=Rt.useRef({});return"value"in Bt.current&&!lt(Bt.current.condition,at)||(Bt.current.value=nt(),Bt.current.condition=at),Bt.current.value}},"8821":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return useMergedState}});var Rt=lt(9859),Bt=lt(6812),Lt=lt(5429),Ht=lt(1089);function hasValue(nt){return void 0!==nt}function useMergedState(nt,at){var lt=at||{},jt=lt.defaultValue,$t=lt.value,Kt=lt.onChange,te=lt.postState,ne=(0,Ht.A)((function(){return hasValue($t)?$t:hasValue(jt)?"function"==typeof jt?jt():jt:"function"==typeof nt?nt():nt})),re=(0,Rt.A)(ne,2),ae=re[0],oe=re[1],se=void 0!==$t?$t:ae,le=te?te(se):se,ue=(0,Bt.A)(Kt),ce=(0,Ht.A)([se]),he=(0,Rt.A)(ce,2),de=he[0],fe=he[1];return(0,Lt.o)((function(){var nt=de[0];ae!==nt&&ue(ae,nt)}),[de]),(0,Lt.o)((function(){hasValue($t)||oe($t)}),[$t]),[le,(0,Bt.A)((function(nt,at){oe(nt,at),fe([se],at)}))]}},"1089":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return useSafeState}});var Rt=lt(9859),Bt=lt(758);function useSafeState(nt){var at=Bt.useRef(!1),lt=Bt.useState(nt),Lt=(0,Rt.A)(lt,2),Ht=Lt[0],jt=Lt[1];return Bt.useEffect((function(){return at.current=!1,function(){at.current=!0}}),[]),[Ht,function safeSetState(nt,lt){lt&&at.current||jt(nt)}]}},"2110":function(nt,at,lt){"use strict";lt.d(at,{"Jt":function(){return Lt.A},"_q":function(){return Rt.A},"hZ":function(){return Ht.A},"vz":function(){return Bt.A}});var Rt=lt(6812),Bt=lt(8821),Lt=(lt(15),lt(2188)),Ht=lt(24);lt(1378)},"6378":function(nt,at,lt){"use strict";var Rt=lt(8299),Bt=lt(1378);at.A=function isEqual(nt,at){var lt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Lt=new Set;return function deepEqual(nt,at){var Ht=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,jt=Lt.has(nt);if((0,Bt.Ay)(!jt,"Warning: There may be circular references"),jt)return!1;if(nt===at)return!0;if(lt&&Ht>1)return!1;Lt.add(nt);var $t=Ht+1;if(Array.isArray(nt)){if(!Array.isArray(at)||nt.length!==at.length)return!1;for(var Kt=0;Kt<nt.length;Kt++)if(!deepEqual(nt[Kt],at[Kt],$t))return!1;return!0}if(nt&&at&&"object"===(0,Rt.A)(nt)&&"object"===(0,Rt.A)(at)){var te=Object.keys(nt);return te.length===Object.keys(at).length&&te.every((function(lt){return deepEqual(nt[lt],at[lt],$t)}))}return!1}(nt,at)}},"9294":function(nt,at){"use strict";at.A=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var nt=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(nt)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==nt?void 0:nt.substr(0,4))}},"3549":function(nt,at,lt){"use strict";function omit(nt,at){var lt=Object.assign({},nt);return Array.isArray(at)&&at.forEach((function(nt){delete lt[nt]})),lt}lt.d(at,{"A":function(){return omit}})},"7953":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return pickAttrs}});var Rt=lt(1950),Bt="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Lt="aria-",Ht="data-";function match(nt,at){return 0===nt.indexOf(at)}function pickAttrs(nt){var at,lt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];at=!1===lt?{"aria":!0,"data":!0,"attr":!0}:!0===lt?{"aria":!0}:(0,Rt.A)({},lt);var jt={};return Object.keys(nt).forEach((function(lt){(at.aria&&("role"===lt||match(lt,Lt))||at.data&&match(lt,Ht)||at.attr&&Bt.includes(lt))&&(jt[lt]=nt[lt])})),jt}},"6667":function(nt,at){"use strict";var lt=function raf(nt){return+setTimeout(nt,16)},Rt=function caf(nt){return clearTimeout(nt)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(lt=function raf(nt){return window.requestAnimationFrame(nt)},Rt=function caf(nt){return window.cancelAnimationFrame(nt)});var Bt=0,Lt=new Map;function cleanup(nt){Lt.delete(nt)}var Ht=function wrapperRaf(nt){var at=Bt+=1;return function callRef(Rt){if(0===Rt)cleanup(at),nt();else{var Bt=lt((function(){callRef(Rt-1)}));Lt.set(at,Bt)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),at};Ht.cancel=function(nt){var at=Lt.get(nt);return cleanup(nt),Rt(at)},at.A=Ht},"15":function(nt,at,lt){"use strict";lt.d(at,{"A9":function(){return ae},"K4":function(){return te},"Xf":function(){return Kt},"f3":function(){return re},"xK":function(){return ne}});var Rt=lt(8299),Bt=lt(758),Lt=lt(4276),Ht=lt(3400),jt=lt(1312),$t=Number(Bt.version.split(".")[0]),Kt=function fillRef(nt,at){"function"==typeof nt?nt(at):"object"===(0,Rt.A)(nt)&&nt&&"current"in nt&&(nt.current=at)},te=function composeRef(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];var Rt=at.filter(Boolean);return Rt.length<=1?Rt[0]:function(nt){at.forEach((function(at){Kt(at,nt)}))}},ne=function useComposeRef(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];return(0,Ht.A)((function(){return te.apply(void 0,at)}),at,(function(nt,at){return nt.length!==at.length||nt.every((function(nt,lt){return nt!==at[lt]}))}))},re=function supportRef(nt){var at,lt;if(!nt)return!1;if(isReactElement(nt)&&$t>=19)return!0;var Rt=(0,Lt.isMemo)(nt)?nt.type.type:nt.type;return!!("function"!=typeof Rt||null!==(at=Rt.prototype)&&void 0!==at&&at.render||Rt.$$typeof===Lt.ForwardRef)&&!!("function"!=typeof nt||null!==(lt=nt.prototype)&&void 0!==lt&&lt.render||nt.$$typeof===Lt.ForwardRef)};function isReactElement(nt){return(0,Bt.isValidElement)(nt)&&!(0,jt.A)(nt)}var ae=function getNodeRef(nt){if(nt&&isReactElement(nt)){var at=nt;return at.props.propertyIsEnumerable("ref")?at.props.ref:at.ref}return null}},"2188":function(nt,at,lt){"use strict";function get(nt,at){for(var lt=nt,Rt=0;Rt<at.length;Rt+=1){if(null==lt)return;lt=lt[at[Rt]]}return lt}lt.d(at,{"A":function(){return get}})},"24":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return set},"h":function(){return merge}});var Rt=lt(8299),Bt=lt(1950),Lt=lt(3691),Ht=lt(8750),jt=lt(2188);function internalSet(nt,at,lt,Rt){if(!at.length)return lt;var jt,$t=(0,Ht.A)(at),Kt=$t[0],te=$t.slice(1);return jt=nt||"number"!=typeof Kt?Array.isArray(nt)?(0,Lt.A)(nt):(0,Bt.A)({},nt):[],Rt&&void 0===lt&&1===te.length?delete jt[Kt][te[0]]:jt[Kt]=internalSet(jt[Kt],te,lt,Rt),jt}function set(nt,at,lt){var Rt=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return at.length&&Rt&&void 0===lt&&!(0,jt.A)(nt,at.slice(0,-1))?nt:internalSet(nt,at,lt,Rt)}function createEmpty(nt){return Array.isArray(nt)?[]:{}}var $t="undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function merge(){for(var nt=arguments.length,at=new Array(nt),lt=0;lt<nt;lt++)at[lt]=arguments[lt];var Bt=createEmpty(at[0]);return at.forEach((function(nt){!function internalMerge(at,lt){var Ht=new Set(lt),Kt=(0,jt.A)(nt,at),te=Array.isArray(Kt);if(te||function isObject(nt){return"object"===(0,Rt.A)(nt)&&null!==nt&&Object.getPrototypeOf(nt)===Object.prototype}(Kt)){if(!Ht.has(Kt)){Ht.add(Kt);var ne=(0,jt.A)(Bt,at);te?Bt=set(Bt,at,[]):ne&&"object"===(0,Rt.A)(ne)||(Bt=set(Bt,at,createEmpty(Kt))),$t(Kt).forEach((function(nt){internalMerge([].concat((0,Lt.A)(at),[nt]),Ht)}))}}else Bt=set(Bt,at,Kt)}([])})),Bt}},"1378":function(nt,at,lt){"use strict";lt.d(at,{"$e":function(){return warning}});var Rt={},Bt=[];function warning(nt,at){}function note(nt,at){}function call(nt,at,lt){at||Rt[lt]||(nt(!1,lt),Rt[lt]=!0)}function warningOnce(nt,at){call(warning,nt,at)}warningOnce.preMessage=function preMessage(nt){Bt.push(nt)},warningOnce.resetWarned=function resetWarned(){Rt={}},warningOnce.noteOnce=function noteOnce(nt,at){call(note,nt,at)},at.Ay=warningOnce},"6936":function(nt,at){"use strict";var lt,Rt=Symbol.for("react.element"),Bt=Symbol.for("react.portal"),Lt=Symbol.for("react.fragment"),Ht=Symbol.for("react.strict_mode"),jt=Symbol.for("react.profiler"),$t=Symbol.for("react.provider"),Kt=Symbol.for("react.context"),te=Symbol.for("react.server_context"),ne=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen");function v(nt){if("object"==typeof nt&&null!==nt){var at=nt.$$typeof;switch(at){case Rt:switch(nt=nt.type){case Lt:case jt:case Ht:case re:case ae:return nt;default:switch(nt=nt&&nt.$$typeof){case te:case Kt:case ne:case se:case oe:case $t:return nt;default:return at}}case Bt:return at}}}lt=Symbol.for("react.module.reference"),at.ForwardRef=ne,at.isMemo=function(nt){return v(nt)===oe}},"4276":function(nt,at,lt){"use strict";nt.exports=lt(6936)},"7462":function(nt,at,lt){"use strict";var Rt=lt(758),Bt=Symbol.for("react.element"),Lt=Symbol.for("react.fragment"),Ht=Object.prototype.hasOwnProperty,jt=Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$t={"key":!0,"ref":!0,"__self":!0,"__source":!0};function q(nt,at,lt){var Rt,Lt={},Kt=null,te=null;for(Rt in void 0!==lt&&(Kt=""+lt),void 0!==at.key&&(Kt=""+at.key),void 0!==at.ref&&(te=at.ref),at)Ht.call(at,Rt)&&!$t.hasOwnProperty(Rt)&&(Lt[Rt]=at[Rt]);if(nt&&nt.defaultProps)for(Rt in at=nt.defaultProps)void 0===Lt[Rt]&&(Lt[Rt]=at[Rt]);return{"$$typeof":Bt,"type":nt,"key":Kt,"ref":te,"props":Lt,"_owner":jt.current}}at.Fragment=Lt,at.jsx=q,at.jsxs=q},"6070":function(nt,at,lt){"use strict";nt.exports=lt(7462)},"7500":function(nt,at){var lt;!function(){"use strict";var Rt={}.hasOwnProperty;function classNames(){for(var nt="",at=0;at<arguments.length;at++){var lt=arguments[at];lt&&(nt=appendClass(nt,parseValue(lt)))}return nt}function parseValue(nt){if("string"==typeof nt||"number"==typeof nt)return nt;if("object"!=typeof nt)return"";if(Array.isArray(nt))return classNames.apply(null,nt);if(nt.toString!==Object.prototype.toString&&!nt.toString.toString().includes("[native code]"))return nt.toString();var at="";for(var lt in nt)Rt.call(nt,lt)&&nt[lt]&&(at=appendClass(at,lt));return at}function appendClass(nt,at){return at?nt?nt+" "+at:nt+at:nt}nt.exports?(classNames.default=classNames,nt.exports=classNames):void 0===(lt=function(){return classNames}.apply(at,[]))||(nt.exports=lt)}()},"2368":function(nt,at,lt){"use strict";function asyncGeneratorStep(nt,at,lt,Rt,Bt,Lt,Ht){try{var jt=nt[Lt](Ht),$t=jt.value}catch(nt){return void lt(nt)}jt.done?at($t):Promise.resolve($t).then(Rt,Bt)}function _asyncToGenerator(nt){return function(){var at=this,lt=arguments;return new Promise((function(Rt,Bt){var Lt=nt.apply(at,lt);function _next(nt){asyncGeneratorStep(Lt,Rt,Bt,_next,_throw,"next",nt)}function _throw(nt){asyncGeneratorStep(Lt,Rt,Bt,_next,_throw,"throw",nt)}_next(void 0)}))}}lt.d(at,{"A":function(){return _asyncToGenerator}})},"1152":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return _createForOfIteratorHelper}});var Rt=lt(8295);function _createForOfIteratorHelper(nt,at){var lt="undefined"!=typeof Symbol&&nt[Symbol.iterator]||nt["@@iterator"];if(!lt){if(Array.isArray(nt)||(lt=(0,Rt.A)(nt))||at&&nt&&"number"==typeof nt.length){lt&&(nt=lt);var Bt=0,Lt=function F(){};return{"s":Lt,"n":function n(){return Bt>=nt.length?{"done":!0}:{"done":!1,"value":nt[Bt++]}},"e":function e(nt){throw nt},"f":Lt}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ht,jt=!0,$t=!1;return{"s":function s(){lt=lt.call(nt)},"n":function n(){var nt=lt.next();return jt=nt.done,nt},"e":function e(nt){$t=!0,Ht=nt},"f":function f(){try{jt||null==lt.return||lt.return()}finally{if($t)throw Ht}}}}},"8527":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return _createSuper}});var Rt=lt(9637),Bt=lt(9651),Lt=lt(319);function _createSuper(nt){var at=(0,Bt.A)();return function(){var lt,Bt=(0,Rt.A)(nt);if(at){var Ht=(0,Rt.A)(this).constructor;lt=Reflect.construct(Bt,arguments,Ht)}else lt=Bt.apply(this,arguments);return(0,Lt.A)(this,lt)}}},"1950":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return _objectSpread2}});var Rt=lt(6640);function ownKeys(nt,at){var lt=Object.keys(nt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(nt);at&&(Rt=Rt.filter((function(at){return Object.getOwnPropertyDescriptor(nt,at).enumerable}))),lt.push.apply(lt,Rt)}return lt}function _objectSpread2(nt){for(var at=1;at<arguments.length;at++){var lt=null!=arguments[at]?arguments[at]:{};at%2?ownKeys(Object(lt),!0).forEach((function(at){(0,Rt.A)(nt,at,lt[at])})):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(lt)):ownKeys(Object(lt)).forEach((function(at){Object.defineProperty(nt,at,Object.getOwnPropertyDescriptor(lt,at))}))}return nt}},"5985":function(nt,at,lt){"use strict";function _objectWithoutProperties(nt,at){if(null==nt)return{};var lt,Rt,Bt=function _objectWithoutPropertiesLoose(nt,at){if(null==nt)return{};var lt={};for(var Rt in nt)if({}.hasOwnProperty.call(nt,Rt)){if(-1!==at.indexOf(Rt))continue;lt[Rt]=nt[Rt]}return lt}(nt,at);if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(nt);for(Rt=0;Rt<Lt.length;Rt++)lt=Lt[Rt],-1===at.indexOf(lt)&&{}.propertyIsEnumerable.call(nt,lt)&&(Bt[lt]=nt[lt])}return Bt}lt.d(at,{"A":function(){return _objectWithoutProperties}})},"8750":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return _toArray}});var Rt=lt(54),Bt=lt(2736),Lt=lt(8295),Ht=lt(7599);function _toArray(nt){return(0,Rt.A)(nt)||(0,Bt.A)(nt)||(0,Lt.A)(nt)||(0,Ht.A)()}},"8071":function(nt,at,lt){"use strict";lt.d(at,{"A":function(){return src_default}});var Rt=lt(758),Bt=lt(6070),isOffsetElement=nt=>!nt.firstChild||nt.firstChild.offsetParent===nt,offsetTill=(nt,at)=>{let lt=nt,Rt=0;isOffsetElement(at)||(Rt+=nt.offsetTop-at.offsetTop,at=nt.offsetParent,Rt+=-nt.offsetTop);do{Rt+=lt.offsetTop,lt=lt.offsetParent}while(lt&&lt!==at);return Rt},Lt=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?Lt="sticky":CSS.supports("position","-webkit-sticky")&&(Lt="-webkit-sticky"));var Ht=!1;try{const nt=Object.defineProperty({},"passive",{"get"(){Ht={"passive":!0}}}),emptyHandler=()=>{};window.addEventListener("testPassive",emptyHandler,nt),window.removeEventListener("testPassive",emptyHandler,nt)}catch(nt){}var getDimensions=nt=>{const{"el":at,"onChange":lt,"unsubs":Rt,"measure":Bt}=nt;if(at===window){const getRect=()=>({"top":0,"left":0,"height":window.innerHeight,"width":window.innerWidth}),nt=Bt(getRect()),handler=()=>{Object.assign(nt,Bt(getRect())),lt()};return window.addEventListener("resize",handler,Ht),Rt.push((()=>window.removeEventListener("resize",handler))),nt}{const nt=Bt(at.getBoundingClientRect()),Lt=new ResizeObserver((()=>{Object.assign(nt,Bt(at.getBoundingClientRect())),lt()}));return Lt.observe(at),Rt.push((()=>Lt.disconnect())),nt}},setup=(nt,at,lt)=>{const{"bottom":Rt,"offsetBottom":Bt,"offsetTop":jt}=lt,$t=(nt=>{let at=nt;for(;at=at.parentElement;){const nt=getComputedStyle(at,null).getPropertyValue("overflow-y");if(at===document.body)return window;if("auto"===nt||"scroll"===nt||"overlay"===nt)return at}return window})(nt);let Kt=!1;const scheduleOnLayout=()=>{Kt||requestAnimationFrame((()=>{const at=onLayout();if(at!==ce)changeMode(at);else if(1!==at||Rt){if(2===at){const{"height":at,"offsetTop":lt}=re,{"height":Lt,"naturalTop":Ht}=se,{"height":jt}=le,$t=Math.max(0,lt+te+at-(Ht+jt+Bt));if(Rt){const at=Math.max(0,Lt-jt-$t);nt.style.bottom=`${at}px`}else nt.style.top=`${$t}px`}}else{const{"height":at}=re,{"height":lt}=le;nt.style.top=at-lt-Bt+"px"}Kt=!1})),Kt=!0};let te=$t===window?window.scrollY:$t.scrollTop;const isBoxTooLow=nt=>{const{"offsetTop":at,"height":lt}=re,{"naturalTop":Rt}=se,{"height":Lt}=le;return nt+at+lt>=Rt+Lt+ue+Bt},onLayout=()=>{const{"height":nt}=re,{"height":at}=le;return at+jt+Bt<=nt?3:isBoxTooLow(te)?1:2},ne=$t!==window&&isOffsetElement($t),re=getDimensions({"el":$t,"onChange":scheduleOnLayout,"unsubs":at,"measure":({"height":nt,"top":at})=>({"height":nt,"offsetTop":ne?at:0})}),ae=(nt=>{let at=nt.parentElement;for(;at&&"contents"===getComputedStyle(at,null).getPropertyValue("display");)at=at.parentElement;return at||window})(nt),oe=ae===window?{"top":0,"bottom":0}:(nt=>{const at=getComputedStyle(nt,null);return{"top":parseInt(at.getPropertyValue("padding-top"),10),"bottom":parseInt(at.getPropertyValue("padding-bottom"),10)}})(ae),se=getDimensions({"el":ae,"onChange":scheduleOnLayout,"unsubs":at,"measure":({"height":nt})=>({"height":nt-oe.top-oe.bottom,"naturalTop":ae===window?0:offsetTill(ae,$t)+oe.top+re.offsetTop})}),le=getDimensions({"el":nt,"onChange":scheduleOnLayout,"unsubs":at,"measure":({"height":nt})=>({"height":nt})});let ue=0,ce=onLayout();const changeMode=at=>{const lt=ce;if(ce=at,2===lt&&(ue=-1),3===at)return nt.style.position=Lt,void(Rt?nt.style.bottom=`${Bt}px`:nt.style.top=`${jt}px`);const{"height":Ht,"offsetTop":$t}=re,{"height":Kt,"naturalTop":ne}=se,{"height":ae}=le;if(2===at)if(nt.style.position="relative",ue=0===lt?Math.max(0,$t+te-ne+jt):Math.max(0,$t+te+Ht-(ne+ae+Bt)),Rt){const at=Math.max(0,Kt-ae-ue);nt.style.bottom=`${at}px`}else nt.style.top=`${ue}px`;else nt.style.position=Lt,1===at?Rt?nt.style.bottom=`${Bt}px`:nt.style.top=Ht-ae-Bt+"px":Rt?nt.style.bottom=Ht-ae-Bt+"px":nt.style.top=`${jt}px`};changeMode(ce);const onScroll=nt=>{if(nt===te)return;const at=nt-te;if(te=nt,3===ce)return;const{"offsetTop":lt,"height":Rt}=re,{"naturalTop":Lt,"height":Ht}=se,{"height":$t}=le;if(at>0)if(0===ce){if(nt+lt+jt>Lt){const at=Math.max(0,lt+te-Lt+jt);changeMode(nt+lt+Rt<=Lt+$t+at+Bt?2:1)}}else 2===ce&&isBoxTooLow(nt)&&changeMode(1);else if(1===ce){if(lt+nt+Rt<Lt+Ht+Bt){const at=Math.max(0,lt+te+Rt-(Lt+$t+Bt));changeMode(lt+nt+jt>=Lt+at?2:0)}}else 2===ce&&lt+nt+jt<Lt+ue&&changeMode(0)},he=$t===window?()=>onScroll(window.scrollY):()=>onScroll($t.scrollTop);$t.addEventListener("scroll",he,Ht),$t.addEventListener("mousewheel",he,Ht),at.push((()=>$t.removeEventListener("scroll",he)),(()=>$t.removeEventListener("mousewheel",he)))},src_default=nt=>{const{"offsetTop":at,"offsetBottom":lt,"bottom":Ht,"children":jt,"className":$t,"style":Kt}=nt,te=(({"offsetTop":nt=0,"offsetBottom":at=0,"bottom":lt=!1}={})=>{const[Bt,Ht]=(0,Rt.useState)(null);return(0,Rt.useEffect)((()=>{if(!Bt||!Lt)return;const Rt=[];return setup(Bt,Rt,{"offsetBottom":at,"offsetTop":nt,"bottom":lt}),()=>{Rt.forEach((nt=>nt()))}}),[Bt,at,nt,lt]),Ht})({"offsetTop":at,"offsetBottom":lt,"bottom":Ht});return(0,Bt.jsx)("div",{"className":$t,"style":Kt,"ref":te,"children":jt})}}}]);